var Rae=Object.defineProperty;var Oae=(t,e,n)=>e in t?Rae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Lt=(t,e,n)=>(Oae(t,typeof e!="symbol"?e+"":e,n),n);function jV(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var wp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ic(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Dae(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var BV={exports:{}},US={},zV={exports:{}},tn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dv=Symbol.for("react.element"),Lae=Symbol.for("react.portal"),Mae=Symbol.for("react.fragment"),Fae=Symbol.for("react.strict_mode"),jae=Symbol.for("react.profiler"),Bae=Symbol.for("react.provider"),zae=Symbol.for("react.context"),Uae=Symbol.for("react.forward_ref"),Vae=Symbol.for("react.suspense"),Wae=Symbol.for("react.memo"),Gae=Symbol.for("react.lazy"),HM=Symbol.iterator;function qae(t){return t===null||typeof t!="object"?null:(t=HM&&t[HM]||t["@@iterator"],typeof t=="function"?t:null)}var UV={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},VV=Object.assign,WV={};function $g(t,e,n){this.props=t,this.context=e,this.refs=WV,this.updater=n||UV}$g.prototype.isReactComponent={};$g.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};$g.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function GV(){}GV.prototype=$g.prototype;function u$(t,e,n){this.props=t,this.context=e,this.refs=WV,this.updater=n||UV}var d$=u$.prototype=new GV;d$.constructor=u$;VV(d$,$g.prototype);d$.isPureReactComponent=!0;var KM=Array.isArray,qV=Object.prototype.hasOwnProperty,h$={current:null},HV={key:!0,ref:!0,__self:!0,__source:!0};function KV(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)qV.call(e,r)&&!HV.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:dv,type:t,key:s,ref:o,props:i,_owner:h$.current}}function Hae(t,e){return{$$typeof:dv,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function f$(t){return typeof t=="object"&&t!==null&&t.$$typeof===dv}function Kae(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var XM=/\/+/g;function _A(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Kae(""+t.key):e.toString(36)}function l2(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case dv:case Lae:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+_A(o,0):r,KM(i)?(n="",t!=null&&(n=t.replace(XM,"$&/")+"/"),l2(i,e,n,"",function(c){return c})):i!=null&&(f$(i)&&(i=Hae(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(XM,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",KM(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+_A(s,a);o+=l2(s,e,n,l,i)}else if(l=qae(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+_A(s,a++),o+=l2(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function qb(t,e,n){if(t==null)return t;var r=[],i=0;return l2(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Xae(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var eo={current:null},c2={transition:null},Yae={ReactCurrentDispatcher:eo,ReactCurrentBatchConfig:c2,ReactCurrentOwner:h$};function XV(){throw Error("act(...) is not supported in production builds of React.")}tn.Children={map:qb,forEach:function(t,e,n){qb(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return qb(t,function(){e++}),e},toArray:function(t){return qb(t,function(e){return e})||[]},only:function(t){if(!f$(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};tn.Component=$g;tn.Fragment=Mae;tn.Profiler=jae;tn.PureComponent=u$;tn.StrictMode=Fae;tn.Suspense=Vae;tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Yae;tn.act=XV;tn.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=VV({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=h$.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)qV.call(e,l)&&!HV.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:dv,type:t.type,key:i,ref:s,props:r,_owner:o}};tn.createContext=function(t){return t={$$typeof:zae,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Bae,_context:t},t.Consumer=t};tn.createElement=KV;tn.createFactory=function(t){var e=KV.bind(null,t);return e.type=t,e};tn.createRef=function(){return{current:null}};tn.forwardRef=function(t){return{$$typeof:Uae,render:t}};tn.isValidElement=f$;tn.lazy=function(t){return{$$typeof:Gae,_payload:{_status:-1,_result:t},_init:Xae}};tn.memo=function(t,e){return{$$typeof:Wae,type:t,compare:e===void 0?null:e}};tn.startTransition=function(t){var e=c2.transition;c2.transition={};try{t()}finally{c2.transition=e}};tn.unstable_act=XV;tn.useCallback=function(t,e){return eo.current.useCallback(t,e)};tn.useContext=function(t){return eo.current.useContext(t)};tn.useDebugValue=function(){};tn.useDeferredValue=function(t){return eo.current.useDeferredValue(t)};tn.useEffect=function(t,e){return eo.current.useEffect(t,e)};tn.useId=function(){return eo.current.useId()};tn.useImperativeHandle=function(t,e,n){return eo.current.useImperativeHandle(t,e,n)};tn.useInsertionEffect=function(t,e){return eo.current.useInsertionEffect(t,e)};tn.useLayoutEffect=function(t,e){return eo.current.useLayoutEffect(t,e)};tn.useMemo=function(t,e){return eo.current.useMemo(t,e)};tn.useReducer=function(t,e,n){return eo.current.useReducer(t,e,n)};tn.useRef=function(t){return eo.current.useRef(t)};tn.useState=function(t){return eo.current.useState(t)};tn.useSyncExternalStore=function(t,e,n){return eo.current.useSyncExternalStore(t,e,n)};tn.useTransition=function(){return eo.current.useTransition()};tn.version="18.3.1";zV.exports=tn;var N=zV.exports;const Tu=Ic(N),Zae=jV({__proto__:null,default:Tu},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jae=N,Qae=Symbol.for("react.element"),ele=Symbol.for("react.fragment"),tle=Object.prototype.hasOwnProperty,nle=Jae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,rle={key:!0,ref:!0,__self:!0,__source:!0};function YV(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)tle.call(e,r)&&!rle.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Qae,type:t,key:s,ref:o,props:i,_owner:nle.current}}US.Fragment=ele;US.jsx=YV;US.jsxs=YV;BV.exports=US;var k=BV.exports,M_={},ZV={exports:{}},ea={},JV={exports:{}},QV={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(j,Y){var ae=j.length;j.push(Y);e:for(;0<ae;){var le=ae-1>>>1,M=j[le];if(0<i(M,Y))j[le]=Y,j[ae]=M,ae=le;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var Y=j[0],ae=j.pop();if(ae!==Y){j[0]=ae;e:for(var le=0,M=j.length,V=M>>>1;le<V;){var H=2*(le+1)-1,J=j[H],oe=H+1,ce=j[oe];if(0>i(J,ae))oe<M&&0>i(ce,J)?(j[le]=ce,j[oe]=ae,le=oe):(j[le]=J,j[H]=ae,le=H);else if(oe<M&&0>i(ce,ae))j[le]=ce,j[oe]=ae,le=oe;else break e}}return Y}function i(j,Y){var ae=j.sortIndex-Y.sortIndex;return ae!==0?ae:j.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,h=3,f=!1,p=!1,m=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(j){for(var Y=n(c);Y!==null;){if(Y.callback===null)r(c);else if(Y.startTime<=j)r(c),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=n(c)}}function b(j){if(m=!1,x(j),!p)if(n(l)!==null)p=!0,q(S);else{var Y=n(c);Y!==null&&K(b,Y.startTime-j)}}function S(j,Y){p=!1,m&&(m=!1,g(I),I=-1),f=!0;var ae=h;try{for(x(Y),d=n(l);d!==null&&(!(d.expirationTime>Y)||j&&!$());){var le=d.callback;if(typeof le=="function"){d.callback=null,h=d.priorityLevel;var M=le(d.expirationTime<=Y);Y=t.unstable_now(),typeof M=="function"?d.callback=M:d===n(l)&&r(l),x(Y)}else r(l);d=n(l)}if(d!==null)var V=!0;else{var H=n(c);H!==null&&K(b,H.startTime-Y),V=!1}return V}finally{d=null,h=ae,f=!1}}var A=!1,E=null,I=-1,T=5,O=-1;function $(){return!(t.unstable_now()-O<T)}function R(){if(E!==null){var j=t.unstable_now();O=j;var Y=!0;try{Y=E(!0,j)}finally{Y?F():(A=!1,E=null)}}else A=!1}var F;if(typeof v=="function")F=function(){v(R)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,U=L.port2;L.port1.onmessage=R,F=function(){U.postMessage(null)}}else F=function(){y(R,0)};function q(j){E=j,A||(A=!0,F())}function K(j,Y){I=y(function(){j(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(j){j.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,q(S))},t.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<j?Math.floor(1e3/j):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(j){switch(h){case 1:case 2:case 3:var Y=3;break;default:Y=h}var ae=h;h=Y;try{return j()}finally{h=ae}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(j,Y){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var ae=h;h=j;try{return Y()}finally{h=ae}},t.unstable_scheduleCallback=function(j,Y,ae){var le=t.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?le+ae:le):ae=le,j){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=ae+M,j={id:u++,callback:Y,priorityLevel:j,startTime:ae,expirationTime:M,sortIndex:-1},ae>le?(j.sortIndex=ae,e(c,j),n(l)===null&&j===n(c)&&(m?(g(I),I=-1):m=!0,K(b,ae-le))):(j.sortIndex=M,e(l,j),p||f||(p=!0,q(S))),j},t.unstable_shouldYield=$,t.unstable_wrapCallback=function(j){var Y=h;return function(){var ae=h;h=Y;try{return j.apply(this,arguments)}finally{h=ae}}}})(QV);JV.exports=QV;var ile=JV.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sle=N,Xo=ile;function Ve(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var eW=new Set,u1={};function kp(t,e){Jm(t,e),Jm(t+"Capture",e)}function Jm(t,e){for(u1[t]=e,t=0;t<e.length;t++)eW.add(e[t])}var fu=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),F_=Object.prototype.hasOwnProperty,ole=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,YM={},ZM={};function ale(t){return F_.call(ZM,t)?!0:F_.call(YM,t)?!1:ole.test(t)?ZM[t]=!0:(YM[t]=!0,!1)}function lle(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function cle(t,e,n,r){if(e===null||typeof e>"u"||lle(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function to(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var rs={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){rs[t]=new to(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];rs[e]=new to(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){rs[t]=new to(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){rs[t]=new to(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){rs[t]=new to(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){rs[t]=new to(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){rs[t]=new to(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){rs[t]=new to(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){rs[t]=new to(t,5,!1,t.toLowerCase(),null,!1,!1)});var p$=/[\-:]([a-z])/g;function m$(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(p$,m$);rs[e]=new to(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(p$,m$);rs[e]=new to(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(p$,m$);rs[e]=new to(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){rs[t]=new to(t,1,!1,t.toLowerCase(),null,!1,!1)});rs.xlinkHref=new to("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){rs[t]=new to(t,1,!1,t.toLowerCase(),null,!0,!0)});function g$(t,e,n,r){var i=rs.hasOwnProperty(e)?rs[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(cle(e,n,i,r)&&(n=null),r||i===null?ale(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var $u=sle.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Hb=Symbol.for("react.element"),fm=Symbol.for("react.portal"),pm=Symbol.for("react.fragment"),y$=Symbol.for("react.strict_mode"),j_=Symbol.for("react.profiler"),tW=Symbol.for("react.provider"),nW=Symbol.for("react.context"),v$=Symbol.for("react.forward_ref"),B_=Symbol.for("react.suspense"),z_=Symbol.for("react.suspense_list"),x$=Symbol.for("react.memo"),pd=Symbol.for("react.lazy"),rW=Symbol.for("react.offscreen"),JM=Symbol.iterator;function Y0(t){return t===null||typeof t!="object"?null:(t=JM&&t[JM]||t["@@iterator"],typeof t=="function"?t:null)}var kr=Object.assign,EA;function Cy(t){if(EA===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);EA=e&&e[1]||""}return`
`+EA+t}var TA=!1;function $A(t,e){if(!t||TA)return"";TA=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{TA=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Cy(t):""}function ule(t){switch(t.tag){case 5:return Cy(t.type);case 16:return Cy("Lazy");case 13:return Cy("Suspense");case 19:return Cy("SuspenseList");case 0:case 2:case 15:return t=$A(t.type,!1),t;case 11:return t=$A(t.type.render,!1),t;case 1:return t=$A(t.type,!0),t;default:return""}}function U_(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case pm:return"Fragment";case fm:return"Portal";case j_:return"Profiler";case y$:return"StrictMode";case B_:return"Suspense";case z_:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case nW:return(t.displayName||"Context")+".Consumer";case tW:return(t._context.displayName||"Context")+".Provider";case v$:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case x$:return e=t.displayName||null,e!==null?e:U_(t.type)||"Memo";case pd:e=t._payload,t=t._init;try{return U_(t(e))}catch{}}return null}function dle(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U_(e);case 8:return e===y$?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Kd(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function iW(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function hle(t){var e=iW(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Kb(t){t._valueTracker||(t._valueTracker=hle(t))}function sW(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=iW(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function V2(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function V_(t,e){var n=e.checked;return kr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function QM(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Kd(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function oW(t,e){e=e.checked,e!=null&&g$(t,"checked",e,!1)}function W_(t,e){oW(t,e);var n=Kd(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?G_(t,e.type,n):e.hasOwnProperty("defaultValue")&&G_(t,e.type,Kd(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function eF(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function G_(t,e,n){(e!=="number"||V2(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ny=Array.isArray;function Rm(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Kd(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function q_(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ve(91));return kr({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function tF(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ve(92));if(Ny(n)){if(1<n.length)throw Error(Ve(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Kd(n)}}function aW(t,e){var n=Kd(e.value),r=Kd(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function nF(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function lW(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function H_(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?lW(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Xb,cW=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Xb=Xb||document.createElement("div"),Xb.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Xb.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function d1(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var zy={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fle=["Webkit","ms","Moz","O"];Object.keys(zy).forEach(function(t){fle.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),zy[e]=zy[t]})});function uW(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||zy.hasOwnProperty(t)&&zy[t]?(""+e).trim():e+"px"}function dW(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=uW(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var ple=kr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function K_(t,e){if(e){if(ple[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ve(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ve(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ve(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ve(62))}}function X_(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Y_=null;function b$(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Z_=null,Om=null,Dm=null;function rF(t){if(t=pv(t)){if(typeof Z_!="function")throw Error(Ve(280));var e=t.stateNode;e&&(e=HS(e),Z_(t.stateNode,t.type,e))}}function hW(t){Om?Dm?Dm.push(t):Dm=[t]:Om=t}function fW(){if(Om){var t=Om,e=Dm;if(Dm=Om=null,rF(t),e)for(t=0;t<e.length;t++)rF(e[t])}}function pW(t,e){return t(e)}function mW(){}var PA=!1;function gW(t,e,n){if(PA)return t(e,n);PA=!0;try{return pW(t,e,n)}finally{PA=!1,(Om!==null||Dm!==null)&&(mW(),fW())}}function h1(t,e){var n=t.stateNode;if(n===null)return null;var r=HS(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ve(231,e,typeof n));return n}var J_=!1;if(fu)try{var Z0={};Object.defineProperty(Z0,"passive",{get:function(){J_=!0}}),window.addEventListener("test",Z0,Z0),window.removeEventListener("test",Z0,Z0)}catch{J_=!1}function mle(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Uy=!1,W2=null,G2=!1,Q_=null,gle={onError:function(t){Uy=!0,W2=t}};function yle(t,e,n,r,i,s,o,a,l){Uy=!1,W2=null,mle.apply(gle,arguments)}function vle(t,e,n,r,i,s,o,a,l){if(yle.apply(this,arguments),Uy){if(Uy){var c=W2;Uy=!1,W2=null}else throw Error(Ve(198));G2||(G2=!0,Q_=c)}}function Sp(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function yW(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function iF(t){if(Sp(t)!==t)throw Error(Ve(188))}function xle(t){var e=t.alternate;if(!e){if(e=Sp(t),e===null)throw Error(Ve(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return iF(i),t;if(s===r)return iF(i),e;s=s.sibling}throw Error(Ve(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Ve(189))}}if(n.alternate!==r)throw Error(Ve(190))}if(n.tag!==3)throw Error(Ve(188));return n.stateNode.current===n?t:e}function vW(t){return t=xle(t),t!==null?xW(t):null}function xW(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=xW(t);if(e!==null)return e;t=t.sibling}return null}var bW=Xo.unstable_scheduleCallback,sF=Xo.unstable_cancelCallback,ble=Xo.unstable_shouldYield,wle=Xo.unstable_requestPaint,Kr=Xo.unstable_now,kle=Xo.unstable_getCurrentPriorityLevel,w$=Xo.unstable_ImmediatePriority,wW=Xo.unstable_UserBlockingPriority,q2=Xo.unstable_NormalPriority,Sle=Xo.unstable_LowPriority,kW=Xo.unstable_IdlePriority,VS=null,lc=null;function Cle(t){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(VS,t,void 0,(t.current.flags&128)===128)}catch{}}var kl=Math.clz32?Math.clz32:Ile,Nle=Math.log,Ale=Math.LN2;function Ile(t){return t>>>=0,t===0?32:31-(Nle(t)/Ale|0)|0}var Yb=64,Zb=4194304;function Ay(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function H2(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Ay(a):(s&=o,s!==0&&(r=Ay(s)))}else o=n&~i,o!==0?r=Ay(o):s!==0&&(r=Ay(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-kl(e),i=1<<n,r|=t[n],e&=~i;return r}function _le(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ele(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-kl(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=_le(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function eE(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function SW(){var t=Yb;return Yb<<=1,!(Yb&4194240)&&(Yb=64),t}function RA(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function hv(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-kl(e),t[e]=n}function Tle(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-kl(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function k$(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-kl(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Tn=0;function CW(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var NW,S$,AW,IW,_W,tE=!1,Jb=[],$d=null,Pd=null,Rd=null,f1=new Map,p1=new Map,xd=[],$le="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function oF(t,e){switch(t){case"focusin":case"focusout":$d=null;break;case"dragenter":case"dragleave":Pd=null;break;case"mouseover":case"mouseout":Rd=null;break;case"pointerover":case"pointerout":f1.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":p1.delete(e.pointerId)}}function J0(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=pv(e),e!==null&&S$(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Ple(t,e,n,r,i){switch(e){case"focusin":return $d=J0($d,t,e,n,r,i),!0;case"dragenter":return Pd=J0(Pd,t,e,n,r,i),!0;case"mouseover":return Rd=J0(Rd,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return f1.set(s,J0(f1.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,p1.set(s,J0(p1.get(s)||null,t,e,n,r,i)),!0}return!1}function EW(t){var e=yf(t.target);if(e!==null){var n=Sp(e);if(n!==null){if(e=n.tag,e===13){if(e=yW(n),e!==null){t.blockedOn=e,_W(t.priority,function(){AW(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function u2(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=nE(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Y_=r,n.target.dispatchEvent(r),Y_=null}else return e=pv(n),e!==null&&S$(e),t.blockedOn=n,!1;e.shift()}return!0}function aF(t,e,n){u2(t)&&n.delete(e)}function Rle(){tE=!1,$d!==null&&u2($d)&&($d=null),Pd!==null&&u2(Pd)&&(Pd=null),Rd!==null&&u2(Rd)&&(Rd=null),f1.forEach(aF),p1.forEach(aF)}function Q0(t,e){t.blockedOn===e&&(t.blockedOn=null,tE||(tE=!0,Xo.unstable_scheduleCallback(Xo.unstable_NormalPriority,Rle)))}function m1(t){function e(i){return Q0(i,t)}if(0<Jb.length){Q0(Jb[0],t);for(var n=1;n<Jb.length;n++){var r=Jb[n];r.blockedOn===t&&(r.blockedOn=null)}}for($d!==null&&Q0($d,t),Pd!==null&&Q0(Pd,t),Rd!==null&&Q0(Rd,t),f1.forEach(e),p1.forEach(e),n=0;n<xd.length;n++)r=xd[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<xd.length&&(n=xd[0],n.blockedOn===null);)EW(n),n.blockedOn===null&&xd.shift()}var Lm=$u.ReactCurrentBatchConfig,K2=!0;function Ole(t,e,n,r){var i=Tn,s=Lm.transition;Lm.transition=null;try{Tn=1,C$(t,e,n,r)}finally{Tn=i,Lm.transition=s}}function Dle(t,e,n,r){var i=Tn,s=Lm.transition;Lm.transition=null;try{Tn=4,C$(t,e,n,r)}finally{Tn=i,Lm.transition=s}}function C$(t,e,n,r){if(K2){var i=nE(t,e,n,r);if(i===null)VA(t,e,r,X2,n),oF(t,r);else if(Ple(i,t,e,n,r))r.stopPropagation();else if(oF(t,r),e&4&&-1<$le.indexOf(t)){for(;i!==null;){var s=pv(i);if(s!==null&&NW(s),s=nE(t,e,n,r),s===null&&VA(t,e,r,X2,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else VA(t,e,r,null,n)}}var X2=null;function nE(t,e,n,r){if(X2=null,t=b$(r),t=yf(t),t!==null)if(e=Sp(t),e===null)t=null;else if(n=e.tag,n===13){if(t=yW(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return X2=t,null}function TW(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kle()){case w$:return 1;case wW:return 4;case q2:case Sle:return 16;case kW:return 536870912;default:return 16}default:return 16}}var Cd=null,N$=null,d2=null;function $W(){if(d2)return d2;var t,e=N$,n=e.length,r,i="value"in Cd?Cd.value:Cd.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return d2=i.slice(t,1<r?1-r:void 0)}function h2(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Qb(){return!0}function lF(){return!1}function ta(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Qb:lF,this.isPropagationStopped=lF,this}return kr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Qb)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Qb)},persist:function(){},isPersistent:Qb}),e}var Pg={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},A$=ta(Pg),fv=kr({},Pg,{view:0,detail:0}),Lle=ta(fv),OA,DA,ey,WS=kr({},fv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:I$,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ey&&(ey&&t.type==="mousemove"?(OA=t.screenX-ey.screenX,DA=t.screenY-ey.screenY):DA=OA=0,ey=t),OA)},movementY:function(t){return"movementY"in t?t.movementY:DA}}),cF=ta(WS),Mle=kr({},WS,{dataTransfer:0}),Fle=ta(Mle),jle=kr({},fv,{relatedTarget:0}),LA=ta(jle),Ble=kr({},Pg,{animationName:0,elapsedTime:0,pseudoElement:0}),zle=ta(Ble),Ule=kr({},Pg,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Vle=ta(Ule),Wle=kr({},Pg,{data:0}),uF=ta(Wle),Gle={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qle={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hle={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kle(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Hle[t])?!!e[t]:!1}function I$(){return Kle}var Xle=kr({},fv,{key:function(t){if(t.key){var e=Gle[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=h2(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?qle[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:I$,charCode:function(t){return t.type==="keypress"?h2(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?h2(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Yle=ta(Xle),Zle=kr({},WS,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dF=ta(Zle),Jle=kr({},fv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:I$}),Qle=ta(Jle),ece=kr({},Pg,{propertyName:0,elapsedTime:0,pseudoElement:0}),tce=ta(ece),nce=kr({},WS,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),rce=ta(nce),ice=[9,13,27,32],_$=fu&&"CompositionEvent"in window,Vy=null;fu&&"documentMode"in document&&(Vy=document.documentMode);var sce=fu&&"TextEvent"in window&&!Vy,PW=fu&&(!_$||Vy&&8<Vy&&11>=Vy),hF=String.fromCharCode(32),fF=!1;function RW(t,e){switch(t){case"keyup":return ice.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function OW(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var mm=!1;function oce(t,e){switch(t){case"compositionend":return OW(e);case"keypress":return e.which!==32?null:(fF=!0,hF);case"textInput":return t=e.data,t===hF&&fF?null:t;default:return null}}function ace(t,e){if(mm)return t==="compositionend"||!_$&&RW(t,e)?(t=$W(),d2=N$=Cd=null,mm=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return PW&&e.locale!=="ko"?null:e.data;default:return null}}var lce={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pF(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!lce[t.type]:e==="textarea"}function DW(t,e,n,r){hW(r),e=Y2(e,"onChange"),0<e.length&&(n=new A$("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Wy=null,g1=null;function cce(t){qW(t,0)}function GS(t){var e=vm(t);if(sW(e))return t}function uce(t,e){if(t==="change")return e}var LW=!1;if(fu){var MA;if(fu){var FA="oninput"in document;if(!FA){var mF=document.createElement("div");mF.setAttribute("oninput","return;"),FA=typeof mF.oninput=="function"}MA=FA}else MA=!1;LW=MA&&(!document.documentMode||9<document.documentMode)}function gF(){Wy&&(Wy.detachEvent("onpropertychange",MW),g1=Wy=null)}function MW(t){if(t.propertyName==="value"&&GS(g1)){var e=[];DW(e,g1,t,b$(t)),gW(cce,e)}}function dce(t,e,n){t==="focusin"?(gF(),Wy=e,g1=n,Wy.attachEvent("onpropertychange",MW)):t==="focusout"&&gF()}function hce(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return GS(g1)}function fce(t,e){if(t==="click")return GS(e)}function pce(t,e){if(t==="input"||t==="change")return GS(e)}function mce(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Il=typeof Object.is=="function"?Object.is:mce;function y1(t,e){if(Il(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!F_.call(e,i)||!Il(t[i],e[i]))return!1}return!0}function yF(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function vF(t,e){var n=yF(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=yF(n)}}function FW(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?FW(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function jW(){for(var t=window,e=V2();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=V2(t.document)}return e}function E$(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function gce(t){var e=jW(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&FW(n.ownerDocument.documentElement,n)){if(r!==null&&E$(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=vF(n,s);var o=vF(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var yce=fu&&"documentMode"in document&&11>=document.documentMode,gm=null,rE=null,Gy=null,iE=!1;function xF(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;iE||gm==null||gm!==V2(r)||(r=gm,"selectionStart"in r&&E$(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Gy&&y1(Gy,r)||(Gy=r,r=Y2(rE,"onSelect"),0<r.length&&(e=new A$("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=gm)))}function ew(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ym={animationend:ew("Animation","AnimationEnd"),animationiteration:ew("Animation","AnimationIteration"),animationstart:ew("Animation","AnimationStart"),transitionend:ew("Transition","TransitionEnd")},jA={},BW={};fu&&(BW=document.createElement("div").style,"AnimationEvent"in window||(delete ym.animationend.animation,delete ym.animationiteration.animation,delete ym.animationstart.animation),"TransitionEvent"in window||delete ym.transitionend.transition);function qS(t){if(jA[t])return jA[t];if(!ym[t])return t;var e=ym[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in BW)return jA[t]=e[n];return t}var zW=qS("animationend"),UW=qS("animationiteration"),VW=qS("animationstart"),WW=qS("transitionend"),GW=new Map,bF="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function uh(t,e){GW.set(t,e),kp(e,[t])}for(var BA=0;BA<bF.length;BA++){var zA=bF[BA],vce=zA.toLowerCase(),xce=zA[0].toUpperCase()+zA.slice(1);uh(vce,"on"+xce)}uh(zW,"onAnimationEnd");uh(UW,"onAnimationIteration");uh(VW,"onAnimationStart");uh("dblclick","onDoubleClick");uh("focusin","onFocus");uh("focusout","onBlur");uh(WW,"onTransitionEnd");Jm("onMouseEnter",["mouseout","mouseover"]);Jm("onMouseLeave",["mouseout","mouseover"]);Jm("onPointerEnter",["pointerout","pointerover"]);Jm("onPointerLeave",["pointerout","pointerover"]);kp("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));kp("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));kp("onBeforeInput",["compositionend","keypress","textInput","paste"]);kp("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));kp("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));kp("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Iy="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bce=new Set("cancel close invalid load scroll toggle".split(" ").concat(Iy));function wF(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,vle(r,e,void 0,t),t.currentTarget=null}function qW(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;wF(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;wF(i,a,c),s=l}}}if(G2)throw t=Q_,G2=!1,Q_=null,t}function tr(t,e){var n=e[cE];n===void 0&&(n=e[cE]=new Set);var r=t+"__bubble";n.has(r)||(HW(e,t,2,!1),n.add(r))}function UA(t,e,n){var r=0;e&&(r|=4),HW(n,t,r,e)}var tw="_reactListening"+Math.random().toString(36).slice(2);function v1(t){if(!t[tw]){t[tw]=!0,eW.forEach(function(n){n!=="selectionchange"&&(bce.has(n)||UA(n,!1,t),UA(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[tw]||(e[tw]=!0,UA("selectionchange",!1,e))}}function HW(t,e,n,r){switch(TW(e)){case 1:var i=Ole;break;case 4:i=Dle;break;default:i=C$}n=i.bind(null,e,n,t),i=void 0,!J_||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function VA(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=yf(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}gW(function(){var c=s,u=b$(n),d=[];e:{var h=GW.get(t);if(h!==void 0){var f=A$,p=t;switch(t){case"keypress":if(h2(n)===0)break e;case"keydown":case"keyup":f=Yle;break;case"focusin":p="focus",f=LA;break;case"focusout":p="blur",f=LA;break;case"beforeblur":case"afterblur":f=LA;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=cF;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=Fle;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=Qle;break;case zW:case UW:case VW:f=zle;break;case WW:f=tce;break;case"scroll":f=Lle;break;case"wheel":f=rce;break;case"copy":case"cut":case"paste":f=Vle;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=dF}var m=(e&4)!==0,y=!m&&t==="scroll",g=m?h!==null?h+"Capture":null:h;m=[];for(var v=c,x;v!==null;){x=v;var b=x.stateNode;if(x.tag===5&&b!==null&&(x=b,g!==null&&(b=h1(v,g),b!=null&&m.push(x1(v,b,x)))),y)break;v=v.return}0<m.length&&(h=new f(h,p,null,n,u),d.push({event:h,listeners:m}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==Y_&&(p=n.relatedTarget||n.fromElement)&&(yf(p)||p[pu]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=c,p=p?yf(p):null,p!==null&&(y=Sp(p),p!==y||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=c),f!==p)){if(m=cF,b="onMouseLeave",g="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(m=dF,b="onPointerLeave",g="onPointerEnter",v="pointer"),y=f==null?h:vm(f),x=p==null?h:vm(p),h=new m(b,v+"leave",f,n,u),h.target=y,h.relatedTarget=x,b=null,yf(u)===c&&(m=new m(g,v+"enter",p,n,u),m.target=x,m.relatedTarget=y,b=m),y=b,f&&p)t:{for(m=f,g=p,v=0,x=m;x;x=Jp(x))v++;for(x=0,b=g;b;b=Jp(b))x++;for(;0<v-x;)m=Jp(m),v--;for(;0<x-v;)g=Jp(g),x--;for(;v--;){if(m===g||g!==null&&m===g.alternate)break t;m=Jp(m),g=Jp(g)}m=null}else m=null;f!==null&&kF(d,h,f,m,!1),p!==null&&y!==null&&kF(d,y,p,m,!0)}}e:{if(h=c?vm(c):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var S=uce;else if(pF(h))if(LW)S=pce;else{S=hce;var A=dce}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(S=fce);if(S&&(S=S(t,c))){DW(d,S,n,u);break e}A&&A(t,h,c),t==="focusout"&&(A=h._wrapperState)&&A.controlled&&h.type==="number"&&G_(h,"number",h.value)}switch(A=c?vm(c):window,t){case"focusin":(pF(A)||A.contentEditable==="true")&&(gm=A,rE=c,Gy=null);break;case"focusout":Gy=rE=gm=null;break;case"mousedown":iE=!0;break;case"contextmenu":case"mouseup":case"dragend":iE=!1,xF(d,n,u);break;case"selectionchange":if(yce)break;case"keydown":case"keyup":xF(d,n,u)}var E;if(_$)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else mm?RW(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(PW&&n.locale!=="ko"&&(mm||I!=="onCompositionStart"?I==="onCompositionEnd"&&mm&&(E=$W()):(Cd=u,N$="value"in Cd?Cd.value:Cd.textContent,mm=!0)),A=Y2(c,I),0<A.length&&(I=new uF(I,t,null,n,u),d.push({event:I,listeners:A}),E?I.data=E:(E=OW(n),E!==null&&(I.data=E)))),(E=sce?oce(t,n):ace(t,n))&&(c=Y2(c,"onBeforeInput"),0<c.length&&(u=new uF("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=E))}qW(d,e)})}function x1(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Y2(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=h1(t,n),s!=null&&r.unshift(x1(t,s,i)),s=h1(t,e),s!=null&&r.push(x1(t,s,i))),t=t.return}return r}function Jp(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function kF(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=h1(n,s),l!=null&&o.unshift(x1(n,l,a))):i||(l=h1(n,s),l!=null&&o.push(x1(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var wce=/\r\n?/g,kce=/\u0000|\uFFFD/g;function SF(t){return(typeof t=="string"?t:""+t).replace(wce,`
`).replace(kce,"")}function nw(t,e,n){if(e=SF(e),SF(t)!==e&&n)throw Error(Ve(425))}function Z2(){}var sE=null,oE=null;function aE(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var lE=typeof setTimeout=="function"?setTimeout:void 0,Sce=typeof clearTimeout=="function"?clearTimeout:void 0,CF=typeof Promise=="function"?Promise:void 0,Cce=typeof queueMicrotask=="function"?queueMicrotask:typeof CF<"u"?function(t){return CF.resolve(null).then(t).catch(Nce)}:lE;function Nce(t){setTimeout(function(){throw t})}function WA(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),m1(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);m1(e)}function Od(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function NF(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Rg=Math.random().toString(36).slice(2),nc="__reactFiber$"+Rg,b1="__reactProps$"+Rg,pu="__reactContainer$"+Rg,cE="__reactEvents$"+Rg,Ace="__reactListeners$"+Rg,Ice="__reactHandles$"+Rg;function yf(t){var e=t[nc];if(e)return e;for(var n=t.parentNode;n;){if(e=n[pu]||n[nc]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=NF(t);t!==null;){if(n=t[nc])return n;t=NF(t)}return e}t=n,n=t.parentNode}return null}function pv(t){return t=t[nc]||t[pu],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function vm(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ve(33))}function HS(t){return t[b1]||null}var uE=[],xm=-1;function dh(t){return{current:t}}function ir(t){0>xm||(t.current=uE[xm],uE[xm]=null,xm--)}function Yn(t,e){xm++,uE[xm]=t.current,t.current=e}var Xd={},$s=dh(Xd),yo=dh(!1),Vf=Xd;function Qm(t,e){var n=t.type.contextTypes;if(!n)return Xd;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function vo(t){return t=t.childContextTypes,t!=null}function J2(){ir(yo),ir($s)}function AF(t,e,n){if($s.current!==Xd)throw Error(Ve(168));Yn($s,e),Yn(yo,n)}function KW(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Ve(108,dle(t)||"Unknown",i));return kr({},n,r)}function Q2(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Xd,Vf=$s.current,Yn($s,t),Yn(yo,yo.current),!0}function IF(t,e,n){var r=t.stateNode;if(!r)throw Error(Ve(169));n?(t=KW(t,e,Vf),r.__reactInternalMemoizedMergedChildContext=t,ir(yo),ir($s),Yn($s,t)):ir(yo),Yn(yo,n)}var Yc=null,KS=!1,GA=!1;function XW(t){Yc===null?Yc=[t]:Yc.push(t)}function _ce(t){KS=!0,XW(t)}function hh(){if(!GA&&Yc!==null){GA=!0;var t=0,e=Tn;try{var n=Yc;for(Tn=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Yc=null,KS=!1}catch(i){throw Yc!==null&&(Yc=Yc.slice(t+1)),bW(w$,hh),i}finally{Tn=e,GA=!1}}return null}var bm=[],wm=0,ek=null,tk=0,ka=[],Sa=0,Wf=null,ru=1,iu="";function rf(t,e){bm[wm++]=tk,bm[wm++]=ek,ek=t,tk=e}function YW(t,e,n){ka[Sa++]=ru,ka[Sa++]=iu,ka[Sa++]=Wf,Wf=t;var r=ru;t=iu;var i=32-kl(r)-1;r&=~(1<<i),n+=1;var s=32-kl(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,ru=1<<32-kl(e)+i|n<<i|r,iu=s+t}else ru=1<<s|n<<i|r,iu=t}function T$(t){t.return!==null&&(rf(t,1),YW(t,1,0))}function $$(t){for(;t===ek;)ek=bm[--wm],bm[wm]=null,tk=bm[--wm],bm[wm]=null;for(;t===Wf;)Wf=ka[--Sa],ka[Sa]=null,iu=ka[--Sa],ka[Sa]=null,ru=ka[--Sa],ka[Sa]=null}var qo=null,Uo=null,ur=!1,pl=null;function ZW(t,e){var n=_a(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function _F(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,qo=t,Uo=Od(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,qo=t,Uo=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Wf!==null?{id:ru,overflow:iu}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=_a(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,qo=t,Uo=null,!0):!1;default:return!1}}function dE(t){return(t.mode&1)!==0&&(t.flags&128)===0}function hE(t){if(ur){var e=Uo;if(e){var n=e;if(!_F(t,e)){if(dE(t))throw Error(Ve(418));e=Od(n.nextSibling);var r=qo;e&&_F(t,e)?ZW(r,n):(t.flags=t.flags&-4097|2,ur=!1,qo=t)}}else{if(dE(t))throw Error(Ve(418));t.flags=t.flags&-4097|2,ur=!1,qo=t}}}function EF(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;qo=t}function rw(t){if(t!==qo)return!1;if(!ur)return EF(t),ur=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!aE(t.type,t.memoizedProps)),e&&(e=Uo)){if(dE(t))throw JW(),Error(Ve(418));for(;e;)ZW(t,e),e=Od(e.nextSibling)}if(EF(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ve(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Uo=Od(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Uo=null}}else Uo=qo?Od(t.stateNode.nextSibling):null;return!0}function JW(){for(var t=Uo;t;)t=Od(t.nextSibling)}function eg(){Uo=qo=null,ur=!1}function P$(t){pl===null?pl=[t]:pl.push(t)}var Ece=$u.ReactCurrentBatchConfig;function ty(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ve(309));var r=n.stateNode}if(!r)throw Error(Ve(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Ve(284));if(!n._owner)throw Error(Ve(290,t))}return t}function iw(t,e){throw t=Object.prototype.toString.call(e),Error(Ve(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function TF(t){var e=t._init;return e(t._payload)}function QW(t){function e(g,v){if(t){var x=g.deletions;x===null?(g.deletions=[v],g.flags|=16):x.push(v)}}function n(g,v){if(!t)return null;for(;v!==null;)e(g,v),v=v.sibling;return null}function r(g,v){for(g=new Map;v!==null;)v.key!==null?g.set(v.key,v):g.set(v.index,v),v=v.sibling;return g}function i(g,v){return g=Fd(g,v),g.index=0,g.sibling=null,g}function s(g,v,x){return g.index=x,t?(x=g.alternate,x!==null?(x=x.index,x<v?(g.flags|=2,v):x):(g.flags|=2,v)):(g.flags|=1048576,v)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,v,x,b){return v===null||v.tag!==6?(v=JA(x,g.mode,b),v.return=g,v):(v=i(v,x),v.return=g,v)}function l(g,v,x,b){var S=x.type;return S===pm?u(g,v,x.props.children,b,x.key):v!==null&&(v.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===pd&&TF(S)===v.type)?(b=i(v,x.props),b.ref=ty(g,v,x),b.return=g,b):(b=x2(x.type,x.key,x.props,null,g.mode,b),b.ref=ty(g,v,x),b.return=g,b)}function c(g,v,x,b){return v===null||v.tag!==4||v.stateNode.containerInfo!==x.containerInfo||v.stateNode.implementation!==x.implementation?(v=QA(x,g.mode,b),v.return=g,v):(v=i(v,x.children||[]),v.return=g,v)}function u(g,v,x,b,S){return v===null||v.tag!==7?(v=Pf(x,g.mode,b,S),v.return=g,v):(v=i(v,x),v.return=g,v)}function d(g,v,x){if(typeof v=="string"&&v!==""||typeof v=="number")return v=JA(""+v,g.mode,x),v.return=g,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Hb:return x=x2(v.type,v.key,v.props,null,g.mode,x),x.ref=ty(g,null,v),x.return=g,x;case fm:return v=QA(v,g.mode,x),v.return=g,v;case pd:var b=v._init;return d(g,b(v._payload),x)}if(Ny(v)||Y0(v))return v=Pf(v,g.mode,x,null),v.return=g,v;iw(g,v)}return null}function h(g,v,x,b){var S=v!==null?v.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return S!==null?null:a(g,v,""+x,b);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Hb:return x.key===S?l(g,v,x,b):null;case fm:return x.key===S?c(g,v,x,b):null;case pd:return S=x._init,h(g,v,S(x._payload),b)}if(Ny(x)||Y0(x))return S!==null?null:u(g,v,x,b,null);iw(g,x)}return null}function f(g,v,x,b,S){if(typeof b=="string"&&b!==""||typeof b=="number")return g=g.get(x)||null,a(v,g,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Hb:return g=g.get(b.key===null?x:b.key)||null,l(v,g,b,S);case fm:return g=g.get(b.key===null?x:b.key)||null,c(v,g,b,S);case pd:var A=b._init;return f(g,v,x,A(b._payload),S)}if(Ny(b)||Y0(b))return g=g.get(x)||null,u(v,g,b,S,null);iw(v,b)}return null}function p(g,v,x,b){for(var S=null,A=null,E=v,I=v=0,T=null;E!==null&&I<x.length;I++){E.index>I?(T=E,E=null):T=E.sibling;var O=h(g,E,x[I],b);if(O===null){E===null&&(E=T);break}t&&E&&O.alternate===null&&e(g,E),v=s(O,v,I),A===null?S=O:A.sibling=O,A=O,E=T}if(I===x.length)return n(g,E),ur&&rf(g,I),S;if(E===null){for(;I<x.length;I++)E=d(g,x[I],b),E!==null&&(v=s(E,v,I),A===null?S=E:A.sibling=E,A=E);return ur&&rf(g,I),S}for(E=r(g,E);I<x.length;I++)T=f(E,g,I,x[I],b),T!==null&&(t&&T.alternate!==null&&E.delete(T.key===null?I:T.key),v=s(T,v,I),A===null?S=T:A.sibling=T,A=T);return t&&E.forEach(function($){return e(g,$)}),ur&&rf(g,I),S}function m(g,v,x,b){var S=Y0(x);if(typeof S!="function")throw Error(Ve(150));if(x=S.call(x),x==null)throw Error(Ve(151));for(var A=S=null,E=v,I=v=0,T=null,O=x.next();E!==null&&!O.done;I++,O=x.next()){E.index>I?(T=E,E=null):T=E.sibling;var $=h(g,E,O.value,b);if($===null){E===null&&(E=T);break}t&&E&&$.alternate===null&&e(g,E),v=s($,v,I),A===null?S=$:A.sibling=$,A=$,E=T}if(O.done)return n(g,E),ur&&rf(g,I),S;if(E===null){for(;!O.done;I++,O=x.next())O=d(g,O.value,b),O!==null&&(v=s(O,v,I),A===null?S=O:A.sibling=O,A=O);return ur&&rf(g,I),S}for(E=r(g,E);!O.done;I++,O=x.next())O=f(E,g,I,O.value,b),O!==null&&(t&&O.alternate!==null&&E.delete(O.key===null?I:O.key),v=s(O,v,I),A===null?S=O:A.sibling=O,A=O);return t&&E.forEach(function(R){return e(g,R)}),ur&&rf(g,I),S}function y(g,v,x,b){if(typeof x=="object"&&x!==null&&x.type===pm&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Hb:e:{for(var S=x.key,A=v;A!==null;){if(A.key===S){if(S=x.type,S===pm){if(A.tag===7){n(g,A.sibling),v=i(A,x.props.children),v.return=g,g=v;break e}}else if(A.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===pd&&TF(S)===A.type){n(g,A.sibling),v=i(A,x.props),v.ref=ty(g,A,x),v.return=g,g=v;break e}n(g,A);break}else e(g,A);A=A.sibling}x.type===pm?(v=Pf(x.props.children,g.mode,b,x.key),v.return=g,g=v):(b=x2(x.type,x.key,x.props,null,g.mode,b),b.ref=ty(g,v,x),b.return=g,g=b)}return o(g);case fm:e:{for(A=x.key;v!==null;){if(v.key===A)if(v.tag===4&&v.stateNode.containerInfo===x.containerInfo&&v.stateNode.implementation===x.implementation){n(g,v.sibling),v=i(v,x.children||[]),v.return=g,g=v;break e}else{n(g,v);break}else e(g,v);v=v.sibling}v=QA(x,g.mode,b),v.return=g,g=v}return o(g);case pd:return A=x._init,y(g,v,A(x._payload),b)}if(Ny(x))return p(g,v,x,b);if(Y0(x))return m(g,v,x,b);iw(g,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,v!==null&&v.tag===6?(n(g,v.sibling),v=i(v,x),v.return=g,g=v):(n(g,v),v=JA(x,g.mode,b),v.return=g,g=v),o(g)):n(g,v)}return y}var tg=QW(!0),e9=QW(!1),nk=dh(null),rk=null,km=null,R$=null;function O$(){R$=km=rk=null}function D$(t){var e=nk.current;ir(nk),t._currentValue=e}function fE(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Mm(t,e){rk=t,R$=km=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ho=!0),t.firstContext=null)}function Fa(t){var e=t._currentValue;if(R$!==t)if(t={context:t,memoizedValue:e,next:null},km===null){if(rk===null)throw Error(Ve(308));km=t,rk.dependencies={lanes:0,firstContext:t}}else km=km.next=t;return e}var vf=null;function L$(t){vf===null?vf=[t]:vf.push(t)}function t9(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,L$(e)):(n.next=i.next,i.next=n),e.interleaved=n,mu(t,r)}function mu(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var md=!1;function M$(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function n9(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function lu(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Dd(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,mn&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,mu(t,n)}return i=r.interleaved,i===null?(e.next=e,L$(r)):(e.next=i.next,i.next=e),r.interleaved=e,mu(t,n)}function f2(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,k$(t,n)}}function $F(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ik(t,e,n,r){var i=t.updateQueue;md=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,u=c=l=null,a=s;do{var h=a.lane,f=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,m=a;switch(h=e,f=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=kr({},d,h);break e;case 2:md=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=f,l=d):u=u.next=f,o|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(1);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);qf|=o,t.lanes=o,t.memoizedState=d}}function PF(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Ve(191,i));i.call(r)}}}var mv={},cc=dh(mv),w1=dh(mv),k1=dh(mv);function xf(t){if(t===mv)throw Error(Ve(174));return t}function F$(t,e){switch(Yn(k1,e),Yn(w1,t),Yn(cc,mv),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:H_(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=H_(e,t)}ir(cc),Yn(cc,e)}function ng(){ir(cc),ir(w1),ir(k1)}function r9(t){xf(k1.current);var e=xf(cc.current),n=H_(e,t.type);e!==n&&(Yn(w1,t),Yn(cc,n))}function j$(t){w1.current===t&&(ir(cc),ir(w1))}var xr=dh(0);function sk(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var qA=[];function B$(){for(var t=0;t<qA.length;t++)qA[t]._workInProgressVersionPrimary=null;qA.length=0}var p2=$u.ReactCurrentDispatcher,HA=$u.ReactCurrentBatchConfig,Gf=0,wr=null,wi=null,Li=null,ok=!1,qy=!1,S1=0,Tce=0;function ms(){throw Error(Ve(321))}function z$(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Il(t[n],e[n]))return!1;return!0}function U$(t,e,n,r,i,s){if(Gf=s,wr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,p2.current=t===null||t.memoizedState===null?Oce:Dce,t=n(r,i),qy){s=0;do{if(qy=!1,S1=0,25<=s)throw Error(Ve(301));s+=1,Li=wi=null,e.updateQueue=null,p2.current=Lce,t=n(r,i)}while(qy)}if(p2.current=ak,e=wi!==null&&wi.next!==null,Gf=0,Li=wi=wr=null,ok=!1,e)throw Error(Ve(300));return t}function V$(){var t=S1!==0;return S1=0,t}function Yl(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Li===null?wr.memoizedState=Li=t:Li=Li.next=t,Li}function ja(){if(wi===null){var t=wr.alternate;t=t!==null?t.memoizedState:null}else t=wi.next;var e=Li===null?wr.memoizedState:Li.next;if(e!==null)Li=e,wi=t;else{if(t===null)throw Error(Ve(310));wi=t,t={memoizedState:wi.memoizedState,baseState:wi.baseState,baseQueue:wi.baseQueue,queue:wi.queue,next:null},Li===null?wr.memoizedState=Li=t:Li=Li.next=t}return Li}function C1(t,e){return typeof e=="function"?e(t):e}function KA(t){var e=ja(),n=e.queue;if(n===null)throw Error(Ve(311));n.lastRenderedReducer=t;var r=wi,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Gf&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,wr.lanes|=u,qf|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Il(r,e.memoizedState)||(ho=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,wr.lanes|=s,qf|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function XA(t){var e=ja(),n=e.queue;if(n===null)throw Error(Ve(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Il(s,e.memoizedState)||(ho=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function i9(){}function s9(t,e){var n=wr,r=ja(),i=e(),s=!Il(r.memoizedState,i);if(s&&(r.memoizedState=i,ho=!0),r=r.queue,W$(l9.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Li!==null&&Li.memoizedState.tag&1){if(n.flags|=2048,N1(9,a9.bind(null,n,r,i,e),void 0,null),Bi===null)throw Error(Ve(349));Gf&30||o9(n,e,i)}return i}function o9(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=wr.updateQueue,e===null?(e={lastEffect:null,stores:null},wr.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function a9(t,e,n,r){e.value=n,e.getSnapshot=r,c9(e)&&u9(t)}function l9(t,e,n){return n(function(){c9(e)&&u9(t)})}function c9(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Il(t,n)}catch{return!0}}function u9(t){var e=mu(t,1);e!==null&&Sl(e,t,1,-1)}function RF(t){var e=Yl();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:C1,lastRenderedState:t},e.queue=t,t=t.dispatch=Rce.bind(null,wr,t),[e.memoizedState,t]}function N1(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=wr.updateQueue,e===null?(e={lastEffect:null,stores:null},wr.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function d9(){return ja().memoizedState}function m2(t,e,n,r){var i=Yl();wr.flags|=t,i.memoizedState=N1(1|e,n,void 0,r===void 0?null:r)}function XS(t,e,n,r){var i=ja();r=r===void 0?null:r;var s=void 0;if(wi!==null){var o=wi.memoizedState;if(s=o.destroy,r!==null&&z$(r,o.deps)){i.memoizedState=N1(e,n,s,r);return}}wr.flags|=t,i.memoizedState=N1(1|e,n,s,r)}function OF(t,e){return m2(8390656,8,t,e)}function W$(t,e){return XS(2048,8,t,e)}function h9(t,e){return XS(4,2,t,e)}function f9(t,e){return XS(4,4,t,e)}function p9(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function m9(t,e,n){return n=n!=null?n.concat([t]):null,XS(4,4,p9.bind(null,e,t),n)}function G$(){}function g9(t,e){var n=ja();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&z$(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function y9(t,e){var n=ja();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&z$(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function v9(t,e,n){return Gf&21?(Il(n,e)||(n=SW(),wr.lanes|=n,qf|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ho=!0),t.memoizedState=n)}function $ce(t,e){var n=Tn;Tn=n!==0&&4>n?n:4,t(!0);var r=HA.transition;HA.transition={};try{t(!1),e()}finally{Tn=n,HA.transition=r}}function x9(){return ja().memoizedState}function Pce(t,e,n){var r=Md(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},b9(t))w9(e,n);else if(n=t9(t,e,n,r),n!==null){var i=Xs();Sl(n,t,r,i),k9(n,e,r)}}function Rce(t,e,n){var r=Md(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(b9(t))w9(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Il(a,o)){var l=e.interleaved;l===null?(i.next=i,L$(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=t9(t,e,i,r),n!==null&&(i=Xs(),Sl(n,t,r,i),k9(n,e,r))}}function b9(t){var e=t.alternate;return t===wr||e!==null&&e===wr}function w9(t,e){qy=ok=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function k9(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,k$(t,n)}}var ak={readContext:Fa,useCallback:ms,useContext:ms,useEffect:ms,useImperativeHandle:ms,useInsertionEffect:ms,useLayoutEffect:ms,useMemo:ms,useReducer:ms,useRef:ms,useState:ms,useDebugValue:ms,useDeferredValue:ms,useTransition:ms,useMutableSource:ms,useSyncExternalStore:ms,useId:ms,unstable_isNewReconciler:!1},Oce={readContext:Fa,useCallback:function(t,e){return Yl().memoizedState=[t,e===void 0?null:e],t},useContext:Fa,useEffect:OF,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,m2(4194308,4,p9.bind(null,e,t),n)},useLayoutEffect:function(t,e){return m2(4194308,4,t,e)},useInsertionEffect:function(t,e){return m2(4,2,t,e)},useMemo:function(t,e){var n=Yl();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Yl();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Pce.bind(null,wr,t),[r.memoizedState,t]},useRef:function(t){var e=Yl();return t={current:t},e.memoizedState=t},useState:RF,useDebugValue:G$,useDeferredValue:function(t){return Yl().memoizedState=t},useTransition:function(){var t=RF(!1),e=t[0];return t=$ce.bind(null,t[1]),Yl().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=wr,i=Yl();if(ur){if(n===void 0)throw Error(Ve(407));n=n()}else{if(n=e(),Bi===null)throw Error(Ve(349));Gf&30||o9(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,OF(l9.bind(null,r,s,t),[t]),r.flags|=2048,N1(9,a9.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Yl(),e=Bi.identifierPrefix;if(ur){var n=iu,r=ru;n=(r&~(1<<32-kl(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=S1++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Tce++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Dce={readContext:Fa,useCallback:g9,useContext:Fa,useEffect:W$,useImperativeHandle:m9,useInsertionEffect:h9,useLayoutEffect:f9,useMemo:y9,useReducer:KA,useRef:d9,useState:function(){return KA(C1)},useDebugValue:G$,useDeferredValue:function(t){var e=ja();return v9(e,wi.memoizedState,t)},useTransition:function(){var t=KA(C1)[0],e=ja().memoizedState;return[t,e]},useMutableSource:i9,useSyncExternalStore:s9,useId:x9,unstable_isNewReconciler:!1},Lce={readContext:Fa,useCallback:g9,useContext:Fa,useEffect:W$,useImperativeHandle:m9,useInsertionEffect:h9,useLayoutEffect:f9,useMemo:y9,useReducer:XA,useRef:d9,useState:function(){return XA(C1)},useDebugValue:G$,useDeferredValue:function(t){var e=ja();return wi===null?e.memoizedState=t:v9(e,wi.memoizedState,t)},useTransition:function(){var t=XA(C1)[0],e=ja().memoizedState;return[t,e]},useMutableSource:i9,useSyncExternalStore:s9,useId:x9,unstable_isNewReconciler:!1};function dl(t,e){if(t&&t.defaultProps){e=kr({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function pE(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:kr({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var YS={isMounted:function(t){return(t=t._reactInternals)?Sp(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Xs(),i=Md(t),s=lu(r,i);s.payload=e,n!=null&&(s.callback=n),e=Dd(t,s,i),e!==null&&(Sl(e,t,i,r),f2(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Xs(),i=Md(t),s=lu(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Dd(t,s,i),e!==null&&(Sl(e,t,i,r),f2(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Xs(),r=Md(t),i=lu(n,r);i.tag=2,e!=null&&(i.callback=e),e=Dd(t,i,r),e!==null&&(Sl(e,t,r,n),f2(e,t,r))}};function DF(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!y1(n,r)||!y1(i,s):!0}function S9(t,e,n){var r=!1,i=Xd,s=e.contextType;return typeof s=="object"&&s!==null?s=Fa(s):(i=vo(e)?Vf:$s.current,r=e.contextTypes,s=(r=r!=null)?Qm(t,i):Xd),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=YS,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function LF(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&YS.enqueueReplaceState(e,e.state,null)}function mE(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},M$(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Fa(s):(s=vo(e)?Vf:$s.current,i.context=Qm(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(pE(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&YS.enqueueReplaceState(i,i.state,null),ik(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function rg(t,e){try{var n="",r=e;do n+=ule(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function YA(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function gE(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Mce=typeof WeakMap=="function"?WeakMap:Map;function C9(t,e,n){n=lu(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ck||(ck=!0,AE=r),gE(t,e)},n}function N9(t,e,n){n=lu(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){gE(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){gE(t,e),typeof r!="function"&&(Ld===null?Ld=new Set([this]):Ld.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function MF(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Mce;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Zce.bind(null,t,e,n),e.then(t,t))}function FF(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function jF(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=lu(-1,1),e.tag=2,Dd(n,e,1))),n.lanes|=1),t)}var Fce=$u.ReactCurrentOwner,ho=!1;function Fs(t,e,n,r){e.child=t===null?e9(e,null,n,r):tg(e,t.child,n,r)}function BF(t,e,n,r,i){n=n.render;var s=e.ref;return Mm(e,i),r=U$(t,e,n,r,s,i),n=V$(),t!==null&&!ho?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,gu(t,e,i)):(ur&&n&&T$(e),e.flags|=1,Fs(t,e,r,i),e.child)}function zF(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Q$(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,A9(t,e,s,r,i)):(t=x2(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:y1,n(o,r)&&t.ref===e.ref)return gu(t,e,i)}return e.flags|=1,t=Fd(s,r),t.ref=e.ref,t.return=e,e.child=t}function A9(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(y1(s,r)&&t.ref===e.ref)if(ho=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(ho=!0);else return e.lanes=t.lanes,gu(t,e,i)}return yE(t,e,n,r,i)}function I9(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Yn(Cm,Mo),Mo|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Yn(Cm,Mo),Mo|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Yn(Cm,Mo),Mo|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Yn(Cm,Mo),Mo|=r;return Fs(t,e,i,n),e.child}function _9(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function yE(t,e,n,r,i){var s=vo(n)?Vf:$s.current;return s=Qm(e,s),Mm(e,i),n=U$(t,e,n,r,s,i),r=V$(),t!==null&&!ho?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,gu(t,e,i)):(ur&&r&&T$(e),e.flags|=1,Fs(t,e,n,i),e.child)}function UF(t,e,n,r,i){if(vo(n)){var s=!0;Q2(e)}else s=!1;if(Mm(e,i),e.stateNode===null)g2(t,e),S9(e,n,r),mE(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Fa(c):(c=vo(n)?Vf:$s.current,c=Qm(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&LF(e,o,r,c),md=!1;var h=e.memoizedState;o.state=h,ik(e,r,o,i),l=e.memoizedState,a!==r||h!==l||yo.current||md?(typeof u=="function"&&(pE(e,n,u,r),l=e.memoizedState),(a=md||DF(e,n,a,r,h,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,n9(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:dl(e.type,a),o.props=c,d=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Fa(l):(l=vo(n)?Vf:$s.current,l=Qm(e,l));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==l)&&LF(e,o,r,l),md=!1,h=e.memoizedState,o.state=h,ik(e,r,o,i);var p=e.memoizedState;a!==d||h!==p||yo.current||md?(typeof f=="function"&&(pE(e,n,f,r),p=e.memoizedState),(c=md||DF(e,n,c,r,h,p,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return vE(t,e,n,r,s,i)}function vE(t,e,n,r,i,s){_9(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&IF(e,n,!1),gu(t,e,s);r=e.stateNode,Fce.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=tg(e,t.child,null,s),e.child=tg(e,null,a,s)):Fs(t,e,a,s),e.memoizedState=r.state,i&&IF(e,n,!0),e.child}function E9(t){var e=t.stateNode;e.pendingContext?AF(t,e.pendingContext,e.pendingContext!==e.context):e.context&&AF(t,e.context,!1),F$(t,e.containerInfo)}function VF(t,e,n,r,i){return eg(),P$(i),e.flags|=256,Fs(t,e,n,r),e.child}var xE={dehydrated:null,treeContext:null,retryLane:0};function bE(t){return{baseLanes:t,cachePool:null,transitions:null}}function T9(t,e,n){var r=e.pendingProps,i=xr.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Yn(xr,i&1),t===null)return hE(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=QS(o,r,0,null),t=Pf(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=bE(n),e.memoizedState=xE,t):q$(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return jce(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Fd(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Fd(a,s):(s=Pf(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?bE(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=xE,r}return s=t.child,t=s.sibling,r=Fd(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function q$(t,e){return e=QS({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function sw(t,e,n,r){return r!==null&&P$(r),tg(e,t.child,null,n),t=q$(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function jce(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=YA(Error(Ve(422))),sw(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=QS({mode:"visible",children:r.children},i,0,null),s=Pf(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&tg(e,t.child,null,o),e.child.memoizedState=bE(o),e.memoizedState=xE,s);if(!(e.mode&1))return sw(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Ve(419)),r=YA(s,r,void 0),sw(t,e,o,r)}if(a=(o&t.childLanes)!==0,ho||a){if(r=Bi,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,mu(t,i),Sl(r,t,i,-1))}return J$(),r=YA(Error(Ve(421))),sw(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Jce.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Uo=Od(i.nextSibling),qo=e,ur=!0,pl=null,t!==null&&(ka[Sa++]=ru,ka[Sa++]=iu,ka[Sa++]=Wf,ru=t.id,iu=t.overflow,Wf=e),e=q$(e,r.children),e.flags|=4096,e)}function WF(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),fE(t.return,e,n)}function ZA(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function $9(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Fs(t,e,r.children,n),r=xr.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&WF(t,n,e);else if(t.tag===19)WF(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Yn(xr,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&sk(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),ZA(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&sk(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}ZA(e,!0,n,null,s);break;case"together":ZA(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function g2(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function gu(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),qf|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ve(153));if(e.child!==null){for(t=e.child,n=Fd(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Fd(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Bce(t,e,n){switch(e.tag){case 3:E9(e),eg();break;case 5:r9(e);break;case 1:vo(e.type)&&Q2(e);break;case 4:F$(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Yn(nk,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Yn(xr,xr.current&1),e.flags|=128,null):n&e.child.childLanes?T9(t,e,n):(Yn(xr,xr.current&1),t=gu(t,e,n),t!==null?t.sibling:null);Yn(xr,xr.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return $9(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Yn(xr,xr.current),r)break;return null;case 22:case 23:return e.lanes=0,I9(t,e,n)}return gu(t,e,n)}var P9,wE,R9,O9;P9=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};wE=function(){};R9=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,xf(cc.current);var s=null;switch(n){case"input":i=V_(t,i),r=V_(t,r),s=[];break;case"select":i=kr({},i,{value:void 0}),r=kr({},r,{value:void 0}),s=[];break;case"textarea":i=q_(t,i),r=q_(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Z2)}K_(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(u1.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(u1.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&tr("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};O9=function(t,e,n,r){n!==r&&(e.flags|=4)};function ny(t,e){if(!ur)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function gs(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function zce(t,e,n){var r=e.pendingProps;switch($$(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gs(e),null;case 1:return vo(e.type)&&J2(),gs(e),null;case 3:return r=e.stateNode,ng(),ir(yo),ir($s),B$(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(rw(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,pl!==null&&(EE(pl),pl=null))),wE(t,e),gs(e),null;case 5:j$(e);var i=xf(k1.current);if(n=e.type,t!==null&&e.stateNode!=null)R9(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ve(166));return gs(e),null}if(t=xf(cc.current),rw(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[nc]=e,r[b1]=s,t=(e.mode&1)!==0,n){case"dialog":tr("cancel",r),tr("close",r);break;case"iframe":case"object":case"embed":tr("load",r);break;case"video":case"audio":for(i=0;i<Iy.length;i++)tr(Iy[i],r);break;case"source":tr("error",r);break;case"img":case"image":case"link":tr("error",r),tr("load",r);break;case"details":tr("toggle",r);break;case"input":QM(r,s),tr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},tr("invalid",r);break;case"textarea":tF(r,s),tr("invalid",r)}K_(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&nw(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&nw(r.textContent,a,t),i=["children",""+a]):u1.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&tr("scroll",r)}switch(n){case"input":Kb(r),eF(r,s,!0);break;case"textarea":Kb(r),nF(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Z2)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=lW(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[nc]=e,t[b1]=r,P9(t,e,!1,!1),e.stateNode=t;e:{switch(o=X_(n,r),n){case"dialog":tr("cancel",t),tr("close",t),i=r;break;case"iframe":case"object":case"embed":tr("load",t),i=r;break;case"video":case"audio":for(i=0;i<Iy.length;i++)tr(Iy[i],t);i=r;break;case"source":tr("error",t),i=r;break;case"img":case"image":case"link":tr("error",t),tr("load",t),i=r;break;case"details":tr("toggle",t),i=r;break;case"input":QM(t,r),i=V_(t,r),tr("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=kr({},r,{value:void 0}),tr("invalid",t);break;case"textarea":tF(t,r),i=q_(t,r),tr("invalid",t);break;default:i=r}K_(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?dW(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&cW(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&d1(t,l):typeof l=="number"&&d1(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(u1.hasOwnProperty(s)?l!=null&&s==="onScroll"&&tr("scroll",t):l!=null&&g$(t,s,l,o))}switch(n){case"input":Kb(t),eF(t,r,!1);break;case"textarea":Kb(t),nF(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Kd(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Rm(t,!!r.multiple,s,!1):r.defaultValue!=null&&Rm(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Z2)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return gs(e),null;case 6:if(t&&e.stateNode!=null)O9(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ve(166));if(n=xf(k1.current),xf(cc.current),rw(e)){if(r=e.stateNode,n=e.memoizedProps,r[nc]=e,(s=r.nodeValue!==n)&&(t=qo,t!==null))switch(t.tag){case 3:nw(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&nw(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[nc]=e,e.stateNode=r}return gs(e),null;case 13:if(ir(xr),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ur&&Uo!==null&&e.mode&1&&!(e.flags&128))JW(),eg(),e.flags|=98560,s=!1;else if(s=rw(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Ve(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ve(317));s[nc]=e}else eg(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;gs(e),s=!1}else pl!==null&&(EE(pl),pl=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||xr.current&1?Ai===0&&(Ai=3):J$())),e.updateQueue!==null&&(e.flags|=4),gs(e),null);case 4:return ng(),wE(t,e),t===null&&v1(e.stateNode.containerInfo),gs(e),null;case 10:return D$(e.type._context),gs(e),null;case 17:return vo(e.type)&&J2(),gs(e),null;case 19:if(ir(xr),s=e.memoizedState,s===null)return gs(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)ny(s,!1);else{if(Ai!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=sk(t),o!==null){for(e.flags|=128,ny(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Yn(xr,xr.current&1|2),e.child}t=t.sibling}s.tail!==null&&Kr()>ig&&(e.flags|=128,r=!0,ny(s,!1),e.lanes=4194304)}else{if(!r)if(t=sk(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ny(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ur)return gs(e),null}else 2*Kr()-s.renderingStartTime>ig&&n!==1073741824&&(e.flags|=128,r=!0,ny(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Kr(),e.sibling=null,n=xr.current,Yn(xr,r?n&1|2:n&1),e):(gs(e),null);case 22:case 23:return Z$(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Mo&1073741824&&(gs(e),e.subtreeFlags&6&&(e.flags|=8192)):gs(e),null;case 24:return null;case 25:return null}throw Error(Ve(156,e.tag))}function Uce(t,e){switch($$(e),e.tag){case 1:return vo(e.type)&&J2(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ng(),ir(yo),ir($s),B$(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return j$(e),null;case 13:if(ir(xr),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ve(340));eg()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ir(xr),null;case 4:return ng(),null;case 10:return D$(e.type._context),null;case 22:case 23:return Z$(),null;case 24:return null;default:return null}}var ow=!1,Cs=!1,Vce=typeof WeakSet=="function"?WeakSet:Set,et=null;function Sm(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Tr(t,e,r)}else n.current=null}function kE(t,e,n){try{n()}catch(r){Tr(t,e,r)}}var GF=!1;function Wce(t,e){if(sE=K2,t=jW(),E$(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++c===i&&(a=o),h===s&&++u===r&&(l=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(oE={focusedElem:t,selectionRange:n},K2=!1,et=e;et!==null;)if(e=et,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,et=t;else for(;et!==null;){e=et;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,y=p.memoizedState,g=e.stateNode,v=g.getSnapshotBeforeUpdate(e.elementType===e.type?m:dl(e.type,m),y);g.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ve(163))}}catch(b){Tr(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,et=t;break}et=e.return}return p=GF,GF=!1,p}function Hy(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&kE(e,n,s)}i=i.next}while(i!==r)}}function ZS(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function SE(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function D9(t){var e=t.alternate;e!==null&&(t.alternate=null,D9(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[nc],delete e[b1],delete e[cE],delete e[Ace],delete e[Ice])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function L9(t){return t.tag===5||t.tag===3||t.tag===4}function qF(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||L9(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function CE(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Z2));else if(r!==4&&(t=t.child,t!==null))for(CE(t,e,n),t=t.sibling;t!==null;)CE(t,e,n),t=t.sibling}function NE(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(NE(t,e,n),t=t.sibling;t!==null;)NE(t,e,n),t=t.sibling}var Ji=null,hl=!1;function cd(t,e,n){for(n=n.child;n!==null;)M9(t,e,n),n=n.sibling}function M9(t,e,n){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(VS,n)}catch{}switch(n.tag){case 5:Cs||Sm(n,e);case 6:var r=Ji,i=hl;Ji=null,cd(t,e,n),Ji=r,hl=i,Ji!==null&&(hl?(t=Ji,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ji.removeChild(n.stateNode));break;case 18:Ji!==null&&(hl?(t=Ji,n=n.stateNode,t.nodeType===8?WA(t.parentNode,n):t.nodeType===1&&WA(t,n),m1(t)):WA(Ji,n.stateNode));break;case 4:r=Ji,i=hl,Ji=n.stateNode.containerInfo,hl=!0,cd(t,e,n),Ji=r,hl=i;break;case 0:case 11:case 14:case 15:if(!Cs&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&kE(n,e,o),i=i.next}while(i!==r)}cd(t,e,n);break;case 1:if(!Cs&&(Sm(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Tr(n,e,a)}cd(t,e,n);break;case 21:cd(t,e,n);break;case 22:n.mode&1?(Cs=(r=Cs)||n.memoizedState!==null,cd(t,e,n),Cs=r):cd(t,e,n);break;default:cd(t,e,n)}}function HF(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Vce),e.forEach(function(r){var i=Qce.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ol(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ji=a.stateNode,hl=!1;break e;case 3:Ji=a.stateNode.containerInfo,hl=!0;break e;case 4:Ji=a.stateNode.containerInfo,hl=!0;break e}a=a.return}if(Ji===null)throw Error(Ve(160));M9(s,o,i),Ji=null,hl=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Tr(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)F9(e,t),e=e.sibling}function F9(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ol(e,t),ql(t),r&4){try{Hy(3,t,t.return),ZS(3,t)}catch(m){Tr(t,t.return,m)}try{Hy(5,t,t.return)}catch(m){Tr(t,t.return,m)}}break;case 1:ol(e,t),ql(t),r&512&&n!==null&&Sm(n,n.return);break;case 5:if(ol(e,t),ql(t),r&512&&n!==null&&Sm(n,n.return),t.flags&32){var i=t.stateNode;try{d1(i,"")}catch(m){Tr(t,t.return,m)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&oW(i,s),X_(a,o);var c=X_(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?dW(i,d):u==="dangerouslySetInnerHTML"?cW(i,d):u==="children"?d1(i,d):g$(i,u,d,c)}switch(a){case"input":W_(i,s);break;case"textarea":aW(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?Rm(i,!!s.multiple,f,!1):h!==!!s.multiple&&(s.defaultValue!=null?Rm(i,!!s.multiple,s.defaultValue,!0):Rm(i,!!s.multiple,s.multiple?[]:"",!1))}i[b1]=s}catch(m){Tr(t,t.return,m)}}break;case 6:if(ol(e,t),ql(t),r&4){if(t.stateNode===null)throw Error(Ve(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(m){Tr(t,t.return,m)}}break;case 3:if(ol(e,t),ql(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{m1(e.containerInfo)}catch(m){Tr(t,t.return,m)}break;case 4:ol(e,t),ql(t);break;case 13:ol(e,t),ql(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(X$=Kr())),r&4&&HF(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Cs=(c=Cs)||u,ol(e,t),Cs=c):ol(e,t),ql(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(et=t,u=t.child;u!==null;){for(d=et=u;et!==null;){switch(h=et,f=h.child,h.tag){case 0:case 11:case 14:case 15:Hy(4,h,h.return);break;case 1:Sm(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){Tr(r,n,m)}}break;case 5:Sm(h,h.return);break;case 22:if(h.memoizedState!==null){XF(d);continue}}f!==null?(f.return=h,et=f):XF(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=uW("display",o))}catch(m){Tr(t,t.return,m)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){Tr(t,t.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ol(e,t),ql(t),r&4&&HF(t);break;case 21:break;default:ol(e,t),ql(t)}}function ql(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(L9(n)){var r=n;break e}n=n.return}throw Error(Ve(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(d1(i,""),r.flags&=-33);var s=qF(t);NE(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=qF(t);CE(t,a,o);break;default:throw Error(Ve(161))}}catch(l){Tr(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Gce(t,e,n){et=t,j9(t)}function j9(t,e,n){for(var r=(t.mode&1)!==0;et!==null;){var i=et,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||ow;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Cs;a=ow;var c=Cs;if(ow=o,(Cs=l)&&!c)for(et=i;et!==null;)o=et,l=o.child,o.tag===22&&o.memoizedState!==null?YF(i):l!==null?(l.return=o,et=l):YF(i);for(;s!==null;)et=s,j9(s),s=s.sibling;et=i,ow=a,Cs=c}KF(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,et=s):KF(t)}}function KF(t){for(;et!==null;){var e=et;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Cs||ZS(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Cs)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:dl(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&PF(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}PF(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&m1(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ve(163))}Cs||e.flags&512&&SE(e)}catch(h){Tr(e,e.return,h)}}if(e===t){et=null;break}if(n=e.sibling,n!==null){n.return=e.return,et=n;break}et=e.return}}function XF(t){for(;et!==null;){var e=et;if(e===t){et=null;break}var n=e.sibling;if(n!==null){n.return=e.return,et=n;break}et=e.return}}function YF(t){for(;et!==null;){var e=et;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ZS(4,e)}catch(l){Tr(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Tr(e,i,l)}}var s=e.return;try{SE(e)}catch(l){Tr(e,s,l)}break;case 5:var o=e.return;try{SE(e)}catch(l){Tr(e,o,l)}}}catch(l){Tr(e,e.return,l)}if(e===t){et=null;break}var a=e.sibling;if(a!==null){a.return=e.return,et=a;break}et=e.return}}var qce=Math.ceil,lk=$u.ReactCurrentDispatcher,H$=$u.ReactCurrentOwner,La=$u.ReactCurrentBatchConfig,mn=0,Bi=null,ii=null,ns=0,Mo=0,Cm=dh(0),Ai=0,A1=null,qf=0,JS=0,K$=0,Ky=null,co=null,X$=0,ig=1/0,Xc=null,ck=!1,AE=null,Ld=null,aw=!1,Nd=null,uk=0,Xy=0,IE=null,y2=-1,v2=0;function Xs(){return mn&6?Kr():y2!==-1?y2:y2=Kr()}function Md(t){return t.mode&1?mn&2&&ns!==0?ns&-ns:Ece.transition!==null?(v2===0&&(v2=SW()),v2):(t=Tn,t!==0||(t=window.event,t=t===void 0?16:TW(t.type)),t):1}function Sl(t,e,n,r){if(50<Xy)throw Xy=0,IE=null,Error(Ve(185));hv(t,n,r),(!(mn&2)||t!==Bi)&&(t===Bi&&(!(mn&2)&&(JS|=n),Ai===4&&bd(t,ns)),xo(t,r),n===1&&mn===0&&!(e.mode&1)&&(ig=Kr()+500,KS&&hh()))}function xo(t,e){var n=t.callbackNode;Ele(t,e);var r=H2(t,t===Bi?ns:0);if(r===0)n!==null&&sF(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&sF(n),e===1)t.tag===0?_ce(ZF.bind(null,t)):XW(ZF.bind(null,t)),Cce(function(){!(mn&6)&&hh()}),n=null;else{switch(CW(r)){case 1:n=w$;break;case 4:n=wW;break;case 16:n=q2;break;case 536870912:n=kW;break;default:n=q2}n=H9(n,B9.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function B9(t,e){if(y2=-1,v2=0,mn&6)throw Error(Ve(327));var n=t.callbackNode;if(Fm()&&t.callbackNode!==n)return null;var r=H2(t,t===Bi?ns:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=dk(t,r);else{e=r;var i=mn;mn|=2;var s=U9();(Bi!==t||ns!==e)&&(Xc=null,ig=Kr()+500,$f(t,e));do try{Xce();break}catch(a){z9(t,a)}while(1);O$(),lk.current=s,mn=i,ii!==null?e=0:(Bi=null,ns=0,e=Ai)}if(e!==0){if(e===2&&(i=eE(t),i!==0&&(r=i,e=_E(t,i))),e===1)throw n=A1,$f(t,0),bd(t,r),xo(t,Kr()),n;if(e===6)bd(t,r);else{if(i=t.current.alternate,!(r&30)&&!Hce(i)&&(e=dk(t,r),e===2&&(s=eE(t),s!==0&&(r=s,e=_E(t,s))),e===1))throw n=A1,$f(t,0),bd(t,r),xo(t,Kr()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Ve(345));case 2:sf(t,co,Xc);break;case 3:if(bd(t,r),(r&130023424)===r&&(e=X$+500-Kr(),10<e)){if(H2(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Xs(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=lE(sf.bind(null,t,co,Xc),e);break}sf(t,co,Xc);break;case 4:if(bd(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-kl(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Kr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*qce(r/1960))-r,10<r){t.timeoutHandle=lE(sf.bind(null,t,co,Xc),r);break}sf(t,co,Xc);break;case 5:sf(t,co,Xc);break;default:throw Error(Ve(329))}}}return xo(t,Kr()),t.callbackNode===n?B9.bind(null,t):null}function _E(t,e){var n=Ky;return t.current.memoizedState.isDehydrated&&($f(t,e).flags|=256),t=dk(t,e),t!==2&&(e=co,co=n,e!==null&&EE(e)),t}function EE(t){co===null?co=t:co.push.apply(co,t)}function Hce(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Il(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function bd(t,e){for(e&=~K$,e&=~JS,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-kl(e),r=1<<n;t[n]=-1,e&=~r}}function ZF(t){if(mn&6)throw Error(Ve(327));Fm();var e=H2(t,0);if(!(e&1))return xo(t,Kr()),null;var n=dk(t,e);if(t.tag!==0&&n===2){var r=eE(t);r!==0&&(e=r,n=_E(t,r))}if(n===1)throw n=A1,$f(t,0),bd(t,e),xo(t,Kr()),n;if(n===6)throw Error(Ve(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,sf(t,co,Xc),xo(t,Kr()),null}function Y$(t,e){var n=mn;mn|=1;try{return t(e)}finally{mn=n,mn===0&&(ig=Kr()+500,KS&&hh())}}function Hf(t){Nd!==null&&Nd.tag===0&&!(mn&6)&&Fm();var e=mn;mn|=1;var n=La.transition,r=Tn;try{if(La.transition=null,Tn=1,t)return t()}finally{Tn=r,La.transition=n,mn=e,!(mn&6)&&hh()}}function Z$(){Mo=Cm.current,ir(Cm)}function $f(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Sce(n)),ii!==null)for(n=ii.return;n!==null;){var r=n;switch($$(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&J2();break;case 3:ng(),ir(yo),ir($s),B$();break;case 5:j$(r);break;case 4:ng();break;case 13:ir(xr);break;case 19:ir(xr);break;case 10:D$(r.type._context);break;case 22:case 23:Z$()}n=n.return}if(Bi=t,ii=t=Fd(t.current,null),ns=Mo=e,Ai=0,A1=null,K$=JS=qf=0,co=Ky=null,vf!==null){for(e=0;e<vf.length;e++)if(n=vf[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}vf=null}return t}function z9(t,e){do{var n=ii;try{if(O$(),p2.current=ak,ok){for(var r=wr.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ok=!1}if(Gf=0,Li=wi=wr=null,qy=!1,S1=0,H$.current=null,n===null||n.return===null){Ai=1,A1=e,ii=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=ns,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=FF(o);if(f!==null){f.flags&=-257,jF(f,o,a,s,e),f.mode&1&&MF(s,c,e),e=f,l=c;var p=e.updateQueue;if(p===null){var m=new Set;m.add(l),e.updateQueue=m}else p.add(l);break e}else{if(!(e&1)){MF(s,c,e),J$();break e}l=Error(Ve(426))}}else if(ur&&a.mode&1){var y=FF(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),jF(y,o,a,s,e),P$(rg(l,a));break e}}s=l=rg(l,a),Ai!==4&&(Ai=2),Ky===null?Ky=[s]:Ky.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=C9(s,l,e);$F(s,g);break e;case 1:a=l;var v=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Ld===null||!Ld.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=N9(s,a,e);$F(s,b);break e}}s=s.return}while(s!==null)}W9(n)}catch(S){e=S,ii===n&&n!==null&&(ii=n=n.return);continue}break}while(1)}function U9(){var t=lk.current;return lk.current=ak,t===null?ak:t}function J$(){(Ai===0||Ai===3||Ai===2)&&(Ai=4),Bi===null||!(qf&268435455)&&!(JS&268435455)||bd(Bi,ns)}function dk(t,e){var n=mn;mn|=2;var r=U9();(Bi!==t||ns!==e)&&(Xc=null,$f(t,e));do try{Kce();break}catch(i){z9(t,i)}while(1);if(O$(),mn=n,lk.current=r,ii!==null)throw Error(Ve(261));return Bi=null,ns=0,Ai}function Kce(){for(;ii!==null;)V9(ii)}function Xce(){for(;ii!==null&&!ble();)V9(ii)}function V9(t){var e=q9(t.alternate,t,Mo);t.memoizedProps=t.pendingProps,e===null?W9(t):ii=e,H$.current=null}function W9(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Uce(n,e),n!==null){n.flags&=32767,ii=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ai=6,ii=null;return}}else if(n=zce(n,e,Mo),n!==null){ii=n;return}if(e=e.sibling,e!==null){ii=e;return}ii=e=t}while(e!==null);Ai===0&&(Ai=5)}function sf(t,e,n){var r=Tn,i=La.transition;try{La.transition=null,Tn=1,Yce(t,e,n,r)}finally{La.transition=i,Tn=r}return null}function Yce(t,e,n,r){do Fm();while(Nd!==null);if(mn&6)throw Error(Ve(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ve(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Tle(t,s),t===Bi&&(ii=Bi=null,ns=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||aw||(aw=!0,H9(q2,function(){return Fm(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=La.transition,La.transition=null;var o=Tn;Tn=1;var a=mn;mn|=4,H$.current=null,Wce(t,n),F9(n,t),gce(oE),K2=!!sE,oE=sE=null,t.current=n,Gce(n),wle(),mn=a,Tn=o,La.transition=s}else t.current=n;if(aw&&(aw=!1,Nd=t,uk=i),s=t.pendingLanes,s===0&&(Ld=null),Cle(n.stateNode),xo(t,Kr()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ck)throw ck=!1,t=AE,AE=null,t;return uk&1&&t.tag!==0&&Fm(),s=t.pendingLanes,s&1?t===IE?Xy++:(Xy=0,IE=t):Xy=0,hh(),null}function Fm(){if(Nd!==null){var t=CW(uk),e=La.transition,n=Tn;try{if(La.transition=null,Tn=16>t?16:t,Nd===null)var r=!1;else{if(t=Nd,Nd=null,uk=0,mn&6)throw Error(Ve(331));var i=mn;for(mn|=4,et=t.current;et!==null;){var s=et,o=s.child;if(et.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(et=c;et!==null;){var u=et;switch(u.tag){case 0:case 11:case 15:Hy(8,u,s)}var d=u.child;if(d!==null)d.return=u,et=d;else for(;et!==null;){u=et;var h=u.sibling,f=u.return;if(D9(u),u===c){et=null;break}if(h!==null){h.return=f,et=h;break}et=f}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(m!==null)}}et=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,et=o;else e:for(;et!==null;){if(s=et,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Hy(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,et=g;break e}et=s.return}}var v=t.current;for(et=v;et!==null;){o=et;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,et=x;else e:for(o=v;et!==null;){if(a=et,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ZS(9,a)}}catch(S){Tr(a,a.return,S)}if(a===o){et=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,et=b;break e}et=a.return}}if(mn=i,hh(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(VS,t)}catch{}r=!0}return r}finally{Tn=n,La.transition=e}}return!1}function JF(t,e,n){e=rg(n,e),e=C9(t,e,1),t=Dd(t,e,1),e=Xs(),t!==null&&(hv(t,1,e),xo(t,e))}function Tr(t,e,n){if(t.tag===3)JF(t,t,n);else for(;e!==null;){if(e.tag===3){JF(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ld===null||!Ld.has(r))){t=rg(n,t),t=N9(e,t,1),e=Dd(e,t,1),t=Xs(),e!==null&&(hv(e,1,t),xo(e,t));break}}e=e.return}}function Zce(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Xs(),t.pingedLanes|=t.suspendedLanes&n,Bi===t&&(ns&n)===n&&(Ai===4||Ai===3&&(ns&130023424)===ns&&500>Kr()-X$?$f(t,0):K$|=n),xo(t,e)}function G9(t,e){e===0&&(t.mode&1?(e=Zb,Zb<<=1,!(Zb&130023424)&&(Zb=4194304)):e=1);var n=Xs();t=mu(t,e),t!==null&&(hv(t,e,n),xo(t,n))}function Jce(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),G9(t,n)}function Qce(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Ve(314))}r!==null&&r.delete(e),G9(t,n)}var q9;q9=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||yo.current)ho=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ho=!1,Bce(t,e,n);ho=!!(t.flags&131072)}else ho=!1,ur&&e.flags&1048576&&YW(e,tk,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;g2(t,e),t=e.pendingProps;var i=Qm(e,$s.current);Mm(e,n),i=U$(null,e,r,t,i,n);var s=V$();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,vo(r)?(s=!0,Q2(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,M$(e),i.updater=YS,e.stateNode=i,i._reactInternals=e,mE(e,r,t,n),e=vE(null,e,r,!0,s,n)):(e.tag=0,ur&&s&&T$(e),Fs(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(g2(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=tue(r),t=dl(r,t),i){case 0:e=yE(null,e,r,t,n);break e;case 1:e=UF(null,e,r,t,n);break e;case 11:e=BF(null,e,r,t,n);break e;case 14:e=zF(null,e,r,dl(r.type,t),n);break e}throw Error(Ve(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:dl(r,i),yE(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:dl(r,i),UF(t,e,r,i,n);case 3:e:{if(E9(e),t===null)throw Error(Ve(387));r=e.pendingProps,s=e.memoizedState,i=s.element,n9(t,e),ik(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=rg(Error(Ve(423)),e),e=VF(t,e,r,n,i);break e}else if(r!==i){i=rg(Error(Ve(424)),e),e=VF(t,e,r,n,i);break e}else for(Uo=Od(e.stateNode.containerInfo.firstChild),qo=e,ur=!0,pl=null,n=e9(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(eg(),r===i){e=gu(t,e,n);break e}Fs(t,e,r,n)}e=e.child}return e;case 5:return r9(e),t===null&&hE(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,aE(r,i)?o=null:s!==null&&aE(r,s)&&(e.flags|=32),_9(t,e),Fs(t,e,o,n),e.child;case 6:return t===null&&hE(e),null;case 13:return T9(t,e,n);case 4:return F$(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=tg(e,null,r,n):Fs(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:dl(r,i),BF(t,e,r,i,n);case 7:return Fs(t,e,e.pendingProps,n),e.child;case 8:return Fs(t,e,e.pendingProps.children,n),e.child;case 12:return Fs(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Yn(nk,r._currentValue),r._currentValue=o,s!==null)if(Il(s.value,o)){if(s.children===i.children&&!yo.current){e=gu(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=lu(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),fE(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Ve(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),fE(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Fs(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Mm(e,n),i=Fa(i),r=r(i),e.flags|=1,Fs(t,e,r,n),e.child;case 14:return r=e.type,i=dl(r,e.pendingProps),i=dl(r.type,i),zF(t,e,r,i,n);case 15:return A9(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:dl(r,i),g2(t,e),e.tag=1,vo(r)?(t=!0,Q2(e)):t=!1,Mm(e,n),S9(e,r,i),mE(e,r,i,n),vE(null,e,r,!0,t,n);case 19:return $9(t,e,n);case 22:return I9(t,e,n)}throw Error(Ve(156,e.tag))};function H9(t,e){return bW(t,e)}function eue(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _a(t,e,n,r){return new eue(t,e,n,r)}function Q$(t){return t=t.prototype,!(!t||!t.isReactComponent)}function tue(t){if(typeof t=="function")return Q$(t)?1:0;if(t!=null){if(t=t.$$typeof,t===v$)return 11;if(t===x$)return 14}return 2}function Fd(t,e){var n=t.alternate;return n===null?(n=_a(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function x2(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Q$(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case pm:return Pf(n.children,i,s,e);case y$:o=8,i|=8;break;case j_:return t=_a(12,n,e,i|2),t.elementType=j_,t.lanes=s,t;case B_:return t=_a(13,n,e,i),t.elementType=B_,t.lanes=s,t;case z_:return t=_a(19,n,e,i),t.elementType=z_,t.lanes=s,t;case rW:return QS(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case tW:o=10;break e;case nW:o=9;break e;case v$:o=11;break e;case x$:o=14;break e;case pd:o=16,r=null;break e}throw Error(Ve(130,t==null?t:typeof t,""))}return e=_a(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Pf(t,e,n,r){return t=_a(7,t,r,e),t.lanes=n,t}function QS(t,e,n,r){return t=_a(22,t,r,e),t.elementType=rW,t.lanes=n,t.stateNode={isHidden:!1},t}function JA(t,e,n){return t=_a(6,t,null,e),t.lanes=n,t}function QA(t,e,n){return e=_a(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function nue(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=RA(0),this.expirationTimes=RA(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=RA(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function eP(t,e,n,r,i,s,o,a,l){return t=new nue(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=_a(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},M$(s),t}function rue(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fm,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function K9(t){if(!t)return Xd;t=t._reactInternals;e:{if(Sp(t)!==t||t.tag!==1)throw Error(Ve(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(vo(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ve(171))}if(t.tag===1){var n=t.type;if(vo(n))return KW(t,n,e)}return e}function X9(t,e,n,r,i,s,o,a,l){return t=eP(n,r,!0,t,i,s,o,a,l),t.context=K9(null),n=t.current,r=Xs(),i=Md(n),s=lu(r,i),s.callback=e??null,Dd(n,s,i),t.current.lanes=i,hv(t,i,r),xo(t,r),t}function eC(t,e,n,r){var i=e.current,s=Xs(),o=Md(i);return n=K9(n),e.context===null?e.context=n:e.pendingContext=n,e=lu(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Dd(i,e,o),t!==null&&(Sl(t,i,o,s),f2(t,i,o)),o}function hk(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function QF(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function tP(t,e){QF(t,e),(t=t.alternate)&&QF(t,e)}function iue(){return null}var Y9=typeof reportError=="function"?reportError:function(t){console.error(t)};function nP(t){this._internalRoot=t}tC.prototype.render=nP.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ve(409));eC(t,e,null,null)};tC.prototype.unmount=nP.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Hf(function(){eC(null,t,null,null)}),e[pu]=null}};function tC(t){this._internalRoot=t}tC.prototype.unstable_scheduleHydration=function(t){if(t){var e=IW();t={blockedOn:null,target:t,priority:e};for(var n=0;n<xd.length&&e!==0&&e<xd[n].priority;n++);xd.splice(n,0,t),n===0&&EW(t)}};function rP(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function nC(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function e6(){}function sue(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=hk(o);s.call(c)}}var o=X9(e,r,t,0,null,!1,!1,"",e6);return t._reactRootContainer=o,t[pu]=o.current,v1(t.nodeType===8?t.parentNode:t),Hf(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=hk(l);a.call(c)}}var l=eP(t,0,!1,null,null,!1,!1,"",e6);return t._reactRootContainer=l,t[pu]=l.current,v1(t.nodeType===8?t.parentNode:t),Hf(function(){eC(e,l,n,r)}),l}function rC(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=hk(o);a.call(l)}}eC(e,o,t,i)}else o=sue(n,e,t,i,r);return hk(o)}NW=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ay(e.pendingLanes);n!==0&&(k$(e,n|1),xo(e,Kr()),!(mn&6)&&(ig=Kr()+500,hh()))}break;case 13:Hf(function(){var r=mu(t,1);if(r!==null){var i=Xs();Sl(r,t,1,i)}}),tP(t,1)}};S$=function(t){if(t.tag===13){var e=mu(t,134217728);if(e!==null){var n=Xs();Sl(e,t,134217728,n)}tP(t,134217728)}};AW=function(t){if(t.tag===13){var e=Md(t),n=mu(t,e);if(n!==null){var r=Xs();Sl(n,t,e,r)}tP(t,e)}};IW=function(){return Tn};_W=function(t,e){var n=Tn;try{return Tn=t,e()}finally{Tn=n}};Z_=function(t,e,n){switch(e){case"input":if(W_(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=HS(r);if(!i)throw Error(Ve(90));sW(r),W_(r,i)}}}break;case"textarea":aW(t,n);break;case"select":e=n.value,e!=null&&Rm(t,!!n.multiple,e,!1)}};pW=Y$;mW=Hf;var oue={usingClientEntryPoint:!1,Events:[pv,vm,HS,hW,fW,Y$]},ry={findFiberByHostInstance:yf,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},aue={bundleType:ry.bundleType,version:ry.version,rendererPackageName:ry.rendererPackageName,rendererConfig:ry.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$u.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=vW(t),t===null?null:t.stateNode},findFiberByHostInstance:ry.findFiberByHostInstance||iue,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lw=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lw.isDisabled&&lw.supportsFiber)try{VS=lw.inject(aue),lc=lw}catch{}}ea.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oue;ea.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rP(e))throw Error(Ve(200));return rue(t,e,null,n)};ea.createRoot=function(t,e){if(!rP(t))throw Error(Ve(299));var n=!1,r="",i=Y9;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=eP(t,1,!1,null,null,n,!1,r,i),t[pu]=e.current,v1(t.nodeType===8?t.parentNode:t),new nP(e)};ea.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ve(188)):(t=Object.keys(t).join(","),Error(Ve(268,t)));return t=vW(e),t=t===null?null:t.stateNode,t};ea.flushSync=function(t){return Hf(t)};ea.hydrate=function(t,e,n){if(!nC(e))throw Error(Ve(200));return rC(null,t,e,!0,n)};ea.hydrateRoot=function(t,e,n){if(!rP(t))throw Error(Ve(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Y9;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=X9(e,null,t,1,n??null,i,!1,s,o),t[pu]=e.current,v1(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new tC(e)};ea.render=function(t,e,n){if(!nC(e))throw Error(Ve(200));return rC(null,t,e,!1,n)};ea.unmountComponentAtNode=function(t){if(!nC(t))throw Error(Ve(40));return t._reactRootContainer?(Hf(function(){rC(null,null,t,!1,function(){t._reactRootContainer=null,t[pu]=null})}),!0):!1};ea.unstable_batchedUpdates=Y$;ea.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!nC(n))throw Error(Ve(200));if(t==null||t._reactInternals===void 0)throw Error(Ve(38));return rC(t,e,n,!1,r)};ea.version="18.3.1-next-f1338f8080-20240426";function Z9(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Z9)}catch(t){console.error(t)}}Z9(),ZV.exports=ea;var J9=ZV.exports,t6=J9;M_.createRoot=t6.createRoot,M_.hydrateRoot=t6.hydrateRoot;const lue="modulepreload",cue=function(t){return"/"+t},n6={},Yy=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=cue(s),s in n6)return;n6[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let u=i.length-1;u>=0;u--){const d=i[u];if(d.href===s&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":lue,o||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),o)return new Promise((u,d)=>{c.addEventListener("load",u),c.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};var r6="popstate";function uue(t={}){function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return TE("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:I1(i)}return hue(e,n,null,t)}function pr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function _l(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function due(){return Math.random().toString(36).substring(2,10)}function i6(t,e){return{usr:t.state,key:t.key,idx:e}}function TE(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Og(e):e,state:n,key:e&&e.key||r||due()}}function I1({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Og(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function hue(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",l=null,c=u();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function u(){return(o.state||{idx:null}).idx}function d(){a="POP";let y=u(),g=y==null?null:y-c;c=y,l&&l({action:a,location:m.location,delta:g})}function h(y,g){a="PUSH";let v=TE(m.location,y,g);n&&n(v,y),c=u()+1;let x=i6(v,c),b=m.createHref(v);try{o.pushState(x,"",b)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(b)}s&&l&&l({action:a,location:m.location,delta:1})}function f(y,g){a="REPLACE";let v=TE(m.location,y,g);n&&n(v,y),c=u();let x=i6(v,c),b=m.createHref(v);o.replaceState(x,"",b),s&&l&&l({action:a,location:m.location,delta:0})}function p(y){return fue(y)}let m={get action(){return a},get location(){return t(i,o)},listen(y){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(r6,d),l=y,()=>{i.removeEventListener(r6,d),l=null}},createHref(y){return e(i,y)},createURL:p,encodeLocation(y){let g=p(y);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:h,replace:f,go(y){return o.go(y)}};return m}function fue(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),pr(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:I1(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function Q9(t,e,n="/"){return pue(t,e,n,!1)}function pue(t,e,n,r){let i=typeof e=="string"?Og(e):e,s=yu(i.pathname||"/",n);if(s==null)return null;let o=eG(t);mue(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=Aue(s);a=Cue(o[l],c,r)}return a}function eG(t,e=[],n=[],r="",i=!1){let s=(o,a,l=i,c)=>{let u={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(u.relativePath.startsWith("/")){if(!u.relativePath.startsWith(r)&&l)return;pr(u.relativePath.startsWith(r),`Absolute route path "${u.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(r.length)}let d=cu([r,u.relativePath]),h=n.concat(u);o.children&&o.children.length>0&&(pr(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),eG(o.children,e,h,d,l)),!(o.path==null&&!o.index)&&e.push({path:d,score:kue(d,o.index),routesMeta:h})};return t.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))s(o,a);else for(let c of tG(o.path))s(o,a,!0,c)}),e}function tG(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=tG(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function mue(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Sue(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var gue=/^:[\w-]+$/,yue=3,vue=2,xue=1,bue=10,wue=-2,s6=t=>t==="*";function kue(t,e){let n=t.split("/"),r=n.length;return n.some(s6)&&(r+=wue),e&&(r+=vue),n.filter(i=>!s6(i)).reduce((i,s)=>i+(gue.test(s)?yue:s===""?xue:bue),r)}function Sue(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function Cue(t,e,n=!1){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=s==="/"?e:e.slice(s.length)||"/",d=fk({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),h=l.route;if(!d&&c&&n&&!r[r.length-1].route.index&&(d=fk({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:cu([s,d.pathname]),pathnameBase:Tue(cu([s,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(s=cu([s,d.pathnameBase]))}return o}function fk(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Nue(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,{paramName:u,isOptional:d},h)=>{if(u==="*"){let p=a[h]||"";o=s.slice(0,s.length-p.length).replace(/(.)\/+$/,"$1")}const f=a[h];return d&&!f?c[u]=void 0:c[u]=(f||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function Nue(t,e=!1,n=!0){_l(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function Aue(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return _l(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function yu(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Iue(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Og(t):t;return{pathname:n?n.startsWith("/")?n:_ue(n,e):e,search:$ue(r),hash:Pue(i)}}function _ue(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function eI(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Eue(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function iP(t){let e=Eue(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function sP(t,e,n,r=!1){let i;typeof t=="string"?i=Og(t):(i={...t},pr(!i.pathname||!i.pathname.includes("?"),eI("?","pathname","search",i)),pr(!i.pathname||!i.pathname.includes("#"),eI("#","pathname","hash",i)),pr(!i.search||!i.search.includes("#"),eI("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;i.pathname=h.join("/")}a=d>=0?e[d]:"/"}let l=Iue(i,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}var cu=t=>t.join("/").replace(/\/\/+/g,"/"),Tue=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),$ue=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Pue=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Rue(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var nG=["POST","PUT","PATCH","DELETE"];new Set(nG);var Oue=["GET",...nG];new Set(Oue);var Dg=N.createContext(null);Dg.displayName="DataRouter";var iC=N.createContext(null);iC.displayName="DataRouterState";N.createContext(!1);var rG=N.createContext({isTransitioning:!1});rG.displayName="ViewTransition";var Due=N.createContext(new Map);Due.displayName="Fetchers";var Lue=N.createContext(null);Lue.displayName="Await";var Rl=N.createContext(null);Rl.displayName="Navigation";var gv=N.createContext(null);gv.displayName="Location";var _c=N.createContext({outlet:null,matches:[],isDataRoute:!1});_c.displayName="Route";var oP=N.createContext(null);oP.displayName="RouteError";function Mue(t,{relative:e}={}){pr(Lg(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=N.useContext(Rl),{hash:i,pathname:s,search:o}=yv(t,{relative:e}),a=s;return n!=="/"&&(a=s==="/"?n:cu([n,s])),r.createHref({pathname:a,search:o,hash:i})}function Lg(){return N.useContext(gv)!=null}function Pu(){return pr(Lg(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(gv).location}var iG="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function sG(t){N.useContext(Rl).static||N.useLayoutEffect(t)}function sC(){let{isDataRoute:t}=N.useContext(_c);return t?Yue():Fue()}function Fue(){pr(Lg(),"useNavigate() may be used only in the context of a <Router> component.");let t=N.useContext(Dg),{basename:e,navigator:n}=N.useContext(Rl),{matches:r}=N.useContext(_c),{pathname:i}=Pu(),s=JSON.stringify(iP(r)),o=N.useRef(!1);return sG(()=>{o.current=!0}),N.useCallback((l,c={})=>{if(_l(o.current,iG),!o.current)return;if(typeof l=="number"){n.go(l);return}let u=sP(l,JSON.parse(s),i,c.relative==="path");t==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:cu([e,u.pathname])),(c.replace?n.replace:n.push)(u,c.state,c)},[e,n,s,i,t])}N.createContext(null);function yv(t,{relative:e}={}){let{matches:n}=N.useContext(_c),{pathname:r}=Pu(),i=JSON.stringify(iP(n));return N.useMemo(()=>sP(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function jue(t,e){return oG(t,e)}function oG(t,e,n,r,i){var v;pr(Lg(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=N.useContext(Rl),{matches:o}=N.useContext(_c),a=o[o.length-1],l=a?a.params:{},c=a?a.pathname:"/",u=a?a.pathnameBase:"/",d=a&&a.route;{let x=d&&d.path||"";aG(c,!d||x.endsWith("*")||x.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${x}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${x}"> to <Route path="${x==="/"?"*":`${x}/*`}">.`)}let h=Pu(),f;if(e){let x=typeof e=="string"?Og(e):e;pr(u==="/"||((v=x.pathname)==null?void 0:v.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${x.pathname}" was given in the \`location\` prop.`),f=x}else f=h;let p=f.pathname||"/",m=p;if(u!=="/"){let x=u.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(x.length).join("/")}let y=Q9(t,{pathname:m});_l(d||y!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),_l(y==null||y[y.length-1].route.element!==void 0||y[y.length-1].route.Component!==void 0||y[y.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let g=Wue(y&&y.map(x=>Object.assign({},x,{params:Object.assign({},l,x.params),pathname:cu([u,s.encodeLocation?s.encodeLocation(x.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?u:cu([u,s.encodeLocation?s.encodeLocation(x.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:x.pathnameBase])})),o,n,r,i);return e&&g?N.createElement(gv.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...f},navigationType:"POP"}},g):g}function Bue(){let t=Xue(),e=Rue(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=N.createElement(N.Fragment,null,N.createElement("p",null,"💿 Hey developer 👋"),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:s},"ErrorBoundary")," or"," ",N.createElement("code",{style:s},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),n?N.createElement("pre",{style:i},n):null,o)}var zue=N.createElement(Bue,null),Uue=class extends N.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?N.createElement(_c.Provider,{value:this.props.routeContext},N.createElement(oP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Vue({routeContext:t,match:e,children:n}){let r=N.useContext(Dg);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),N.createElement(_c.Provider,{value:t},n)}function Wue(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,o=n==null?void 0:n.errors;if(o!=null){let c=s.findIndex(u=>u.route.id&&(o==null?void 0:o[u.route.id])!==void 0);pr(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,c+1))}let a=!1,l=-1;if(n)for(let c=0;c<s.length;c++){let u=s[c];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(l=c),u.route.id){let{loaderData:d,errors:h}=n,f=u.route.loader&&!d.hasOwnProperty(u.route.id)&&(!h||h[u.route.id]===void 0);if(u.route.lazy||f){a=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}return s.reduceRight((c,u,d)=>{let h,f=!1,p=null,m=null;n&&(h=o&&u.route.id?o[u.route.id]:void 0,p=u.route.errorElement||zue,a&&(l<0&&d===0?(aG("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,m=null):l===d&&(f=!0,m=u.route.hydrateFallbackElement||null)));let y=e.concat(s.slice(0,d+1)),g=()=>{let v;return h?v=p:f?v=m:u.route.Component?v=N.createElement(u.route.Component,null):u.route.element?v=u.route.element:v=c,N.createElement(Vue,{match:u,routeContext:{outlet:c,matches:y,isDataRoute:n!=null},children:v})};return n&&(u.route.ErrorBoundary||u.route.errorElement||d===0)?N.createElement(Uue,{location:n.location,revalidation:n.revalidation,component:p,error:h,children:g(),routeContext:{outlet:null,matches:y,isDataRoute:!0},unstable_onError:r}):g()},null)}function aP(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Gue(t){let e=N.useContext(Dg);return pr(e,aP(t)),e}function que(t){let e=N.useContext(iC);return pr(e,aP(t)),e}function Hue(t){let e=N.useContext(_c);return pr(e,aP(t)),e}function lP(t){let e=Hue(t),n=e.matches[e.matches.length-1];return pr(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function Kue(){return lP("useRouteId")}function Xue(){var r;let t=N.useContext(oP),e=que("useRouteError"),n=lP("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function Yue(){let{router:t}=Gue("useNavigate"),e=lP("useNavigate"),n=N.useRef(!1);return sG(()=>{n.current=!0}),N.useCallback(async(i,s={})=>{_l(n.current,iG),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...s}))},[t,e])}var o6={};function aG(t,e,n){!e&&!o6[t]&&(o6[t]=!0,_l(!1,n))}N.memo(Zue);function Zue({routes:t,future:e,state:n,unstable_onError:r}){return oG(t,void 0,n,r,e)}function cP({to:t,replace:e,state:n,relative:r}){pr(Lg(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=N.useContext(Rl);_l(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=N.useContext(_c),{pathname:o}=Pu(),a=sC(),l=sP(t,iP(s),o,r==="path"),c=JSON.stringify(l);return N.useEffect(()=>{a(JSON.parse(c),{replace:e,state:n,relative:r})},[a,c,r,e,n]),null}function ws(t){pr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Jue({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){pr(!Lg(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),a=N.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);typeof n=="string"&&(n=Og(n));let{pathname:l="/",search:c="",hash:u="",state:d=null,key:h="default"}=n,f=N.useMemo(()=>{let p=yu(l,o);return p==null?null:{location:{pathname:p,search:c,hash:u,state:d,key:h},navigationType:r}},[o,l,c,u,d,h,r]);return _l(f!=null,`<Router basename="${o}"> is not able to match the URL "${l}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),f==null?null:N.createElement(Rl.Provider,{value:a},N.createElement(gv.Provider,{children:e,value:f}))}function Que({children:t,location:e}){return jue($E(t),e)}function $E(t,e=[]){let n=[];return N.Children.forEach(t,(r,i)=>{if(!N.isValidElement(r))return;let s=[...e,i];if(r.type===N.Fragment){n.push.apply(n,$E(r.props.children,s));return}pr(r.type===ws,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),pr(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=$E(r.props.children,s)),n.push(o)}),n}var b2="get",w2="application/x-www-form-urlencoded";function oC(t){return t!=null&&typeof t.tagName=="string"}function ede(t){return oC(t)&&t.tagName.toLowerCase()==="button"}function tde(t){return oC(t)&&t.tagName.toLowerCase()==="form"}function nde(t){return oC(t)&&t.tagName.toLowerCase()==="input"}function rde(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function ide(t,e){return t.button===0&&(!e||e==="_self")&&!rde(t)}var cw=null;function sde(){if(cw===null)try{new FormData(document.createElement("form"),0),cw=!1}catch{cw=!0}return cw}var ode=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function tI(t){return t!=null&&!ode.has(t)?(_l(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${w2}"`),null):t}function ade(t,e){let n,r,i,s,o;if(tde(t)){let a=t.getAttribute("action");r=a?yu(a,e):null,n=t.getAttribute("method")||b2,i=tI(t.getAttribute("enctype"))||w2,s=new FormData(t)}else if(ede(t)||nde(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||a.getAttribute("action");if(r=l?yu(l,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||b2,i=tI(t.getAttribute("formenctype"))||tI(a.getAttribute("enctype"))||w2,s=new FormData(a,t),!sde()){let{name:c,type:u,value:d}=t;if(u==="image"){let h=c?`${c}.`:"";s.append(`${h}x`,"0"),s.append(`${h}y`,"0")}else c&&s.append(c,d)}}else{if(oC(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=b2,r=null,i=w2,o=t}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function uP(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function lde(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&yu(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function cde(t,e){if(t.id in e)return e[t.id];try{let n=await Yy(()=>import(t.module),[]);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function ude(t){return t!=null&&typeof t.page=="string"}function dde(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function hde(t,e,n){let r=await Promise.all(t.map(async i=>{let s=e.routes[i.route.id];if(s){let o=await cde(s,n);return o.links?o.links():[]}return[]}));return gde(r.flat(1).filter(dde).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function a6(t,e,n,r,i,s){let o=(l,c)=>n[c]?l.route.id!==n[c].route.id:!0,a=(l,c)=>{var u;return n[c].pathname!==l.pathname||((u=n[c].route.path)==null?void 0:u.endsWith("*"))&&n[c].params["*"]!==l.params["*"]};return s==="assets"?e.filter((l,c)=>o(l,c)||a(l,c)):s==="data"?e.filter((l,c)=>{var d;let u=r.routes[l.route.id];if(!u||!u.hasLoader)return!1;if(o(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let h=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((d=n[0])==null?void 0:d.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function fde(t,e,{includeHydrateFallback:n}={}){return pde(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function pde(t){return[...new Set(t)]}function mde(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function gde(t,e){let n=new Set,r=new Set(e);return t.reduce((i,s)=>{if(e&&!ude(s)&&s.as==="script"&&s.href&&r.has(s.href))return i;let a=JSON.stringify(mde(s));return n.has(a)||(n.add(a),i.push({key:a,link:s})),i},[])}function lG(){let t=N.useContext(Dg);return uP(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function yde(){let t=N.useContext(iC);return uP(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var dP=N.createContext(void 0);dP.displayName="FrameworkContext";function cG(){let t=N.useContext(dP);return uP(t,"You must render this element inside a <HydratedRouter> element"),t}function vde(t,e){let n=N.useContext(dP),[r,i]=N.useState(!1),[s,o]=N.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:d}=e,h=N.useRef(null);N.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let m=g=>{g.forEach(v=>{o(v.isIntersecting)})},y=new IntersectionObserver(m,{threshold:.5});return h.current&&y.observe(h.current),()=>{y.disconnect()}}},[t]),N.useEffect(()=>{if(r){let m=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(m)}}},[r]);let f=()=>{i(!0)},p=()=>{i(!1),o(!1)};return n?t!=="intent"?[s,h,{}]:[s,h,{onFocus:iy(a,f),onBlur:iy(l,p),onMouseEnter:iy(c,f),onMouseLeave:iy(u,p),onTouchStart:iy(d,f)}]:[!1,h,{}]}function iy(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function xde({page:t,...e}){let{router:n}=lG(),r=N.useMemo(()=>Q9(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?N.createElement(wde,{page:t,matches:r,...e}):null}function bde(t){let{manifest:e,routeModules:n}=cG(),[r,i]=N.useState([]);return N.useEffect(()=>{let s=!1;return hde(t,e,n).then(o=>{s||i(o)}),()=>{s=!0}},[t,e,n]),r}function wde({page:t,matches:e,...n}){let r=Pu(),{manifest:i,routeModules:s}=cG(),{basename:o}=lG(),{loaderData:a,matches:l}=yde(),c=N.useMemo(()=>a6(t,e,l,i,r,"data"),[t,e,l,i,r]),u=N.useMemo(()=>a6(t,e,l,i,r,"assets"),[t,e,l,i,r]),d=N.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let p=new Set,m=!1;if(e.forEach(g=>{var x;let v=i.routes[g.route.id];!v||!v.hasLoader||(!c.some(b=>b.route.id===g.route.id)&&g.route.id in a&&((x=s[g.route.id])!=null&&x.shouldRevalidate)||v.hasClientLoader?m=!0:p.add(g.route.id))}),p.size===0)return[];let y=lde(t,o,"data");return m&&p.size>0&&y.searchParams.set("_routes",e.filter(g=>p.has(g.route.id)).map(g=>g.route.id).join(",")),[y.pathname+y.search]},[o,a,r,i,c,e,t,s]),h=N.useMemo(()=>fde(u,i),[u,i]),f=bde(u);return N.createElement(N.Fragment,null,d.map(p=>N.createElement("link",{key:p,rel:"prefetch",as:"fetch",href:p,...n})),h.map(p=>N.createElement("link",{key:p,rel:"modulepreload",href:p,...n})),f.map(({key:p,link:m})=>N.createElement("link",{key:p,nonce:n.nonce,...m})))}function kde(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var uG=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{uG&&(window.__reactRouterVersion="7.9.4")}catch{}function Sde({basename:t,children:e,window:n}){let r=N.useRef();r.current==null&&(r.current=uue({window:n,v5Compat:!0}));let i=r.current,[s,o]=N.useState({action:i.action,location:i.location}),a=N.useCallback(l=>{N.startTransition(()=>o(l))},[o]);return N.useLayoutEffect(()=>i.listen(a),[i,a]),N.createElement(Jue,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:i})}var dG=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bl=N.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:d,...h},f){let{basename:p}=N.useContext(Rl),m=typeof c=="string"&&dG.test(c),y,g=!1;if(typeof c=="string"&&m&&(y=c,uG))try{let T=new URL(window.location.href),O=c.startsWith("//")?new URL(T.protocol+c):new URL(c),$=yu(O.pathname,p);O.origin===T.origin&&$!=null?c=$+O.search+O.hash:g=!0}catch{_l(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let v=Mue(c,{relative:i}),[x,b,S]=vde(r,h),A=Ide(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:i,viewTransition:d});function E(T){e&&e(T),T.defaultPrevented||A(T)}let I=N.createElement("a",{...h,...S,href:y||v,onClick:g||s?e:E,ref:kde(f,b),target:l,"data-discover":!m&&n==="render"?"true":void 0});return x&&!m?N.createElement(N.Fragment,null,I,N.createElement(xde,{page:v})):I});bl.displayName="Link";var Cde=N.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:a,children:l,...c},u){let d=yv(o,{relative:c.relative}),h=Pu(),f=N.useContext(iC),{navigator:p,basename:m}=N.useContext(Rl),y=f!=null&&Pde(d)&&a===!0,g=p.encodeLocation?p.encodeLocation(d).pathname:d.pathname,v=h.pathname,x=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;n||(v=v.toLowerCase(),x=x?x.toLowerCase():null,g=g.toLowerCase()),x&&m&&(x=yu(x,m)||x);const b=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let S=v===g||!i&&v.startsWith(g)&&v.charAt(b)==="/",A=x!=null&&(x===g||!i&&x.startsWith(g)&&x.charAt(g.length)==="/"),E={isActive:S,isPending:A,isTransitioning:y},I=S?e:void 0,T;typeof r=="function"?T=r(E):T=[r,S?"active":null,A?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let O=typeof s=="function"?s(E):s;return N.createElement(bl,{...c,"aria-current":I,className:T,ref:u,style:O,to:o,viewTransition:a},typeof l=="function"?l(E):l)});Cde.displayName="NavLink";var Nde=N.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:s,method:o=b2,action:a,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:d,...h},f)=>{let p=Tde(),m=$de(a,{relative:c}),y=o.toLowerCase()==="get"?"get":"post",g=typeof a=="string"&&dG.test(a),v=x=>{if(l&&l(x),x.defaultPrevented)return;x.preventDefault();let b=x.nativeEvent.submitter,S=(b==null?void 0:b.getAttribute("formmethod"))||o;p(b||x.currentTarget,{fetcherKey:e,method:S,navigate:n,replace:i,state:s,relative:c,preventScrollReset:u,viewTransition:d})};return N.createElement("form",{ref:f,method:y,action:m,onSubmit:r?l:v,...h,"data-discover":!g&&t==="render"?"true":void 0})});Nde.displayName="Form";function Ade(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function hG(t){let e=N.useContext(Dg);return pr(e,Ade(t)),e}function Ide(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:o}={}){let a=sC(),l=Pu(),c=yv(t,{relative:s});return N.useCallback(u=>{if(ide(u,e)){u.preventDefault();let d=n!==void 0?n:I1(l)===I1(c);a(t,{replace:d,state:r,preventScrollReset:i,relative:s,viewTransition:o})}},[l,a,c,n,r,e,t,i,s,o])}var _de=0,Ede=()=>`__${String(++_de)}__`;function Tde(){let{router:t}=hG("useSubmit"),{basename:e}=N.useContext(Rl),n=Kue();return N.useCallback(async(r,i={})=>{let{action:s,method:o,encType:a,formData:l,body:c}=ade(r,e);if(i.navigate===!1){let u=i.fetcherKey||Ede();await t.fetch(u,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else await t.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function $de(t,{relative:e}={}){let{basename:n}=N.useContext(Rl),r=N.useContext(_c);pr(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...yv(t||".",{relative:e})},o=Pu();if(t==null){s.search=o.search;let a=new URLSearchParams(s.search),l=a.getAll("index");if(l.some(u=>u==="")){a.delete("index"),l.filter(d=>d).forEach(d=>a.append("index",d));let u=a.toString();s.search=u?`?${u}`:""}}return(!t||t===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:cu([n,s.pathname])),I1(s)}function Pde(t,{relative:e}={}){let n=N.useContext(rG);pr(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=hG("useViewTransitionState"),i=yv(t,{relative:e});if(!n.isTransitioning)return!1;let s=yu(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=yu(n.nextLocation.pathname,r)||n.nextLocation.pathname;return fk(i.pathname,o)!=null||fk(i.pathname,s)!=null}const fG=N.createContext(void 0),Rde=({children:t})=>{const[e,n]=N.useState("light");N.useEffect(()=>{const i=localStorage.getItem("mbarie-theme");i?n(i):window.matchMedia("(prefers-color-scheme: dark)").matches&&n("dark")},[]),N.useEffect(()=>{localStorage.setItem("mbarie-theme",e),document.documentElement.classList.toggle("dark",e==="dark")},[e]);const r=()=>{n(i=>i==="light"?"dark":"light")};return k.jsx(fG.Provider,{value:{theme:e,toggleTheme:r},children:t})},Ode=()=>{const t=N.useContext(fG);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t},pG=N.createContext(void 0),Mg=()=>{const t=N.useContext(pG);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},Dde=({children:t})=>{const[e,n]=N.useState(null),[r,i]=N.useState(localStorage.getItem("token")),[s,o]=N.useState(!0),a={}.VITE_API_URL||"http://localhost:3001/api";N.useEffect(()=>{(async()=>{localStorage.getItem("token")&&(await u()||h()),o(!1)})()},[]);const l=async(p,m)=>{try{const g=await(await fetch(`${a}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:p,password:m})})).json();return g.success&&g.token&&g.user&&(i(g.token),n(g.user),localStorage.setItem("token",g.token),localStorage.setItem("user",JSON.stringify(g.user))),g}catch(y){return console.error("Login error:",y),{success:!1,message:"Failed to connect to server"}}},c=async p=>{try{const y=await(await fetch(`${a}/auth/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)})).json();return y.success&&y.token&&y.user&&(i(y.token),n(y.user),localStorage.setItem("token",y.token),localStorage.setItem("user",JSON.stringify(y.user))),y}catch(m){return console.error("Registration error:",m),{success:!1,message:"Failed to connect to server"}}},u=async()=>{const p=localStorage.getItem("token");if(!p)return!1;try{const y=await(await fetch(`${a}/auth/verify`,{method:"GET",headers:{Authorization:`Bearer ${p}`}})).json();return y.success&&y.user?(n(y.user),i(p),!0):(h(),!1)}catch(m){return console.error("Token verification error:",m),h(),!1}},d=async(p,m)=>{try{return await(await fetch(`${a}/auth/change-password`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({currentPassword:p,newPassword:m})})).json()}catch(y){return console.error("Password change error:",y),{success:!1,message:"Failed to connect to server"}}},h=()=>{n(null),i(null),localStorage.removeItem("token"),localStorage.removeItem("user")},f={user:e,token:r,isLoading:s,login:l,register:c,logout:h,verifyToken:u,changePassword:d};return k.jsx(pG.Provider,{value:f,children:t})};function mG(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=mG(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function yn(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=mG(t))&&(r&&(r+=" "),r+=e);return r}const hP="-",Lde=t=>{const e=Fde(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(hP);return a[0]===""&&a.length!==1&&a.shift(),gG(a,e)||Mde(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},gG=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?gG(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(hP);return(o=e.validators.find(({validator:a})=>a(s)))==null?void 0:o.classGroupId},l6=/^\[(.+)\]$/,Mde=t=>{if(l6.test(t)){const e=l6.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},Fde=t=>{const{theme:e,classGroups:n}=t,r={nextPart:new Map,validators:[]};for(const i in n)PE(n[i],r,i,e);return r},PE=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:c6(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(jde(i)){PE(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,o])=>{PE(o,c6(e,s),n,r)})})},c6=(t,e)=>{let n=t;return e.split(hP).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},jde=t=>t.isThemeGetter,Bde=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(s,o)=>{n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){n.has(s)?n.set(s,o):i(s,o)}}},RE="!",OE=":",zde=OE.length,Ude=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=i=>{const s=[];let o=0,a=0,l=0,c;for(let p=0;p<i.length;p++){let m=i[p];if(o===0&&a===0){if(m===OE){s.push(i.slice(l,p)),l=p+zde;continue}if(m==="/"){c=p;continue}}m==="["?o++:m==="]"?o--:m==="("?a++:m===")"&&a--}const u=s.length===0?i:i.substring(l),d=Vde(u),h=d!==u,f=c&&c>l?c-l:void 0;return{modifiers:s,hasImportantModifier:h,baseClassName:d,maybePostfixModifierPosition:f}};if(e){const i=e+OE,s=r;r=o=>o.startsWith(i)?s(o.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:o,maybePostfixModifierPosition:void 0}}if(n){const i=r;r=s=>n({className:s,parseClassName:i})}return r},Vde=t=>t.endsWith(RE)?t.substring(0,t.length-1):t.startsWith(RE)?t.substring(1):t,Wde=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const i=[];let s=[];return r.forEach(o=>{o[0]==="["||e[o]?(i.push(...s.sort(),o),s=[]):s.push(o)}),i.push(...s.sort()),i}},Gde=t=>({cache:Bde(t.cacheSize),parseClassName:Ude(t),sortModifiers:Wde(t),...Lde(t)}),qde=/\s+/,Hde=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:s}=e,o=[],a=t.trim().split(qde);let l="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{isExternal:d,modifiers:h,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:m}=n(u);if(d){l=u+(l.length>0?" "+l:l);continue}let y=!!m,g=r(y?p.substring(0,m):p);if(!g){if(!y){l=u+(l.length>0?" "+l:l);continue}if(g=r(p),!g){l=u+(l.length>0?" "+l:l);continue}y=!1}const v=s(h).join(":"),x=f?v+RE:v,b=x+g;if(o.includes(b))continue;o.push(b);const S=i(g,y);for(let A=0;A<S.length;++A){const E=S[A];o.push(x+E)}l=u+(l.length>0?" "+l:l)}return l};function Kde(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=yG(e))&&(r&&(r+=" "),r+=n);return r}const yG=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=yG(t[r]))&&(n&&(n+=" "),n+=e);return n};function Xde(t,...e){let n,r,i,s=o;function o(l){const c=e.reduce((u,d)=>d(u),t());return n=Gde(c),r=n.cache.get,i=n.cache.set,s=a,a(l)}function a(l){const c=r(l);if(c)return c;const u=Hde(l,n);return i(l,u),u}return function(){return s(Kde.apply(null,arguments))}}const bi=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},vG=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,xG=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Yde=/^\d+\/\d+$/,Zde=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Jde=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Qde=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,ehe=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,the=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Qp=t=>Yde.test(t),Jt=t=>!!t&&!Number.isNaN(Number(t)),ud=t=>!!t&&Number.isInteger(Number(t)),nI=t=>t.endsWith("%")&&Jt(t.slice(0,-1)),Gc=t=>Zde.test(t),nhe=()=>!0,rhe=t=>Jde.test(t)&&!Qde.test(t),bG=()=>!1,ihe=t=>ehe.test(t),she=t=>the.test(t),ohe=t=>!st(t)&&!ot(t),ahe=t=>Fg(t,SG,bG),st=t=>vG.test(t),Qh=t=>Fg(t,CG,rhe),rI=t=>Fg(t,hhe,Jt),u6=t=>Fg(t,wG,bG),lhe=t=>Fg(t,kG,she),uw=t=>Fg(t,NG,ihe),ot=t=>xG.test(t),sy=t=>jg(t,CG),che=t=>jg(t,fhe),d6=t=>jg(t,wG),uhe=t=>jg(t,SG),dhe=t=>jg(t,kG),dw=t=>jg(t,NG,!0),Fg=(t,e,n)=>{const r=vG.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},jg=(t,e,n=!1)=>{const r=xG.exec(t);return r?r[1]?e(r[1]):n:!1},wG=t=>t==="position"||t==="percentage",kG=t=>t==="image"||t==="url",SG=t=>t==="length"||t==="size"||t==="bg-size",CG=t=>t==="length",hhe=t=>t==="number",fhe=t=>t==="family-name",NG=t=>t==="shadow",phe=()=>{const t=bi("color"),e=bi("font"),n=bi("text"),r=bi("font-weight"),i=bi("tracking"),s=bi("leading"),o=bi("breakpoint"),a=bi("container"),l=bi("spacing"),c=bi("radius"),u=bi("shadow"),d=bi("inset-shadow"),h=bi("text-shadow"),f=bi("drop-shadow"),p=bi("blur"),m=bi("perspective"),y=bi("aspect"),g=bi("ease"),v=bi("animate"),x=()=>["auto","avoid","all","avoid-page","page","left","right","column"],b=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],S=()=>[...b(),ot,st],A=()=>["auto","hidden","clip","visible","scroll"],E=()=>["auto","contain","none"],I=()=>[ot,st,l],T=()=>[Qp,"full","auto",...I()],O=()=>[ud,"none","subgrid",ot,st],$=()=>["auto",{span:["full",ud,ot,st]},ud,ot,st],R=()=>[ud,"auto",ot,st],F=()=>["auto","min","max","fr",ot,st],L=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],U=()=>["start","end","center","stretch","center-safe","end-safe"],q=()=>["auto",...I()],K=()=>[Qp,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...I()],j=()=>[t,ot,st],Y=()=>[...b(),d6,u6,{position:[ot,st]}],ae=()=>["no-repeat",{repeat:["","x","y","space","round"]}],le=()=>["auto","cover","contain",uhe,ahe,{size:[ot,st]}],M=()=>[nI,sy,Qh],V=()=>["","none","full",c,ot,st],H=()=>["",Jt,sy,Qh],J=()=>["solid","dashed","dotted","double"],oe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ce=()=>[Jt,nI,d6,u6],ge=()=>["","none",p,ot,st],ee=()=>["none",Jt,ot,st],fe=()=>["none",Jt,ot,st],Se=()=>[Jt,ot,st],me=()=>[Qp,"full",...I()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Gc],breakpoint:[Gc],color:[nhe],container:[Gc],"drop-shadow":[Gc],ease:["in","out","in-out"],font:[ohe],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Gc],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Gc],shadow:[Gc],spacing:["px",Jt],text:[Gc],"text-shadow":[Gc],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Qp,st,ot,y]}],container:["container"],columns:[{columns:[Jt,st,ot,a]}],"break-after":[{"break-after":x()}],"break-before":[{"break-before":x()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:S()}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:E()}],"overscroll-x":[{"overscroll-x":E()}],"overscroll-y":[{"overscroll-y":E()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:T()}],"inset-x":[{"inset-x":T()}],"inset-y":[{"inset-y":T()}],start:[{start:T()}],end:[{end:T()}],top:[{top:T()}],right:[{right:T()}],bottom:[{bottom:T()}],left:[{left:T()}],visibility:["visible","invisible","collapse"],z:[{z:[ud,"auto",ot,st]}],basis:[{basis:[Qp,"full","auto",a,...I()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Jt,Qp,"auto","initial","none",st]}],grow:[{grow:["",Jt,ot,st]}],shrink:[{shrink:["",Jt,ot,st]}],order:[{order:[ud,"first","last","none",ot,st]}],"grid-cols":[{"grid-cols":O()}],"col-start-end":[{col:$()}],"col-start":[{"col-start":R()}],"col-end":[{"col-end":R()}],"grid-rows":[{"grid-rows":O()}],"row-start-end":[{row:$()}],"row-start":[{"row-start":R()}],"row-end":[{"row-end":R()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":F()}],"auto-rows":[{"auto-rows":F()}],gap:[{gap:I()}],"gap-x":[{"gap-x":I()}],"gap-y":[{"gap-y":I()}],"justify-content":[{justify:[...L(),"normal"]}],"justify-items":[{"justify-items":[...U(),"normal"]}],"justify-self":[{"justify-self":["auto",...U()]}],"align-content":[{content:["normal",...L()]}],"align-items":[{items:[...U(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...U(),{baseline:["","last"]}]}],"place-content":[{"place-content":L()}],"place-items":[{"place-items":[...U(),"baseline"]}],"place-self":[{"place-self":["auto",...U()]}],p:[{p:I()}],px:[{px:I()}],py:[{py:I()}],ps:[{ps:I()}],pe:[{pe:I()}],pt:[{pt:I()}],pr:[{pr:I()}],pb:[{pb:I()}],pl:[{pl:I()}],m:[{m:q()}],mx:[{mx:q()}],my:[{my:q()}],ms:[{ms:q()}],me:[{me:q()}],mt:[{mt:q()}],mr:[{mr:q()}],mb:[{mb:q()}],ml:[{ml:q()}],"space-x":[{"space-x":I()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":I()}],"space-y-reverse":["space-y-reverse"],size:[{size:K()}],w:[{w:[a,"screen",...K()]}],"min-w":[{"min-w":[a,"screen","none",...K()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[o]},...K()]}],h:[{h:["screen","lh",...K()]}],"min-h":[{"min-h":["screen","lh","none",...K()]}],"max-h":[{"max-h":["screen","lh",...K()]}],"font-size":[{text:["base",n,sy,Qh]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,ot,rI]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",nI,st]}],"font-family":[{font:[che,st,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,ot,st]}],"line-clamp":[{"line-clamp":[Jt,"none",ot,rI]}],leading:[{leading:[s,...I()]}],"list-image":[{"list-image":["none",ot,st]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ot,st]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:j()}],"text-color":[{text:j()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...J(),"wavy"]}],"text-decoration-thickness":[{decoration:[Jt,"from-font","auto",ot,Qh]}],"text-decoration-color":[{decoration:j()}],"underline-offset":[{"underline-offset":[Jt,"auto",ot,st]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ot,st]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ot,st]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Y()}],"bg-repeat":[{bg:ae()}],"bg-size":[{bg:le()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},ud,ot,st],radial:["",ot,st],conic:[ud,ot,st]},dhe,lhe]}],"bg-color":[{bg:j()}],"gradient-from-pos":[{from:M()}],"gradient-via-pos":[{via:M()}],"gradient-to-pos":[{to:M()}],"gradient-from":[{from:j()}],"gradient-via":[{via:j()}],"gradient-to":[{to:j()}],rounded:[{rounded:V()}],"rounded-s":[{"rounded-s":V()}],"rounded-e":[{"rounded-e":V()}],"rounded-t":[{"rounded-t":V()}],"rounded-r":[{"rounded-r":V()}],"rounded-b":[{"rounded-b":V()}],"rounded-l":[{"rounded-l":V()}],"rounded-ss":[{"rounded-ss":V()}],"rounded-se":[{"rounded-se":V()}],"rounded-ee":[{"rounded-ee":V()}],"rounded-es":[{"rounded-es":V()}],"rounded-tl":[{"rounded-tl":V()}],"rounded-tr":[{"rounded-tr":V()}],"rounded-br":[{"rounded-br":V()}],"rounded-bl":[{"rounded-bl":V()}],"border-w":[{border:H()}],"border-w-x":[{"border-x":H()}],"border-w-y":[{"border-y":H()}],"border-w-s":[{"border-s":H()}],"border-w-e":[{"border-e":H()}],"border-w-t":[{"border-t":H()}],"border-w-r":[{"border-r":H()}],"border-w-b":[{"border-b":H()}],"border-w-l":[{"border-l":H()}],"divide-x":[{"divide-x":H()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":H()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...J(),"hidden","none"]}],"divide-style":[{divide:[...J(),"hidden","none"]}],"border-color":[{border:j()}],"border-color-x":[{"border-x":j()}],"border-color-y":[{"border-y":j()}],"border-color-s":[{"border-s":j()}],"border-color-e":[{"border-e":j()}],"border-color-t":[{"border-t":j()}],"border-color-r":[{"border-r":j()}],"border-color-b":[{"border-b":j()}],"border-color-l":[{"border-l":j()}],"divide-color":[{divide:j()}],"outline-style":[{outline:[...J(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Jt,ot,st]}],"outline-w":[{outline:["",Jt,sy,Qh]}],"outline-color":[{outline:j()}],shadow:[{shadow:["","none",u,dw,uw]}],"shadow-color":[{shadow:j()}],"inset-shadow":[{"inset-shadow":["none",d,dw,uw]}],"inset-shadow-color":[{"inset-shadow":j()}],"ring-w":[{ring:H()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:j()}],"ring-offset-w":[{"ring-offset":[Jt,Qh]}],"ring-offset-color":[{"ring-offset":j()}],"inset-ring-w":[{"inset-ring":H()}],"inset-ring-color":[{"inset-ring":j()}],"text-shadow":[{"text-shadow":["none",h,dw,uw]}],"text-shadow-color":[{"text-shadow":j()}],opacity:[{opacity:[Jt,ot,st]}],"mix-blend":[{"mix-blend":[...oe(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":oe()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Jt]}],"mask-image-linear-from-pos":[{"mask-linear-from":ce()}],"mask-image-linear-to-pos":[{"mask-linear-to":ce()}],"mask-image-linear-from-color":[{"mask-linear-from":j()}],"mask-image-linear-to-color":[{"mask-linear-to":j()}],"mask-image-t-from-pos":[{"mask-t-from":ce()}],"mask-image-t-to-pos":[{"mask-t-to":ce()}],"mask-image-t-from-color":[{"mask-t-from":j()}],"mask-image-t-to-color":[{"mask-t-to":j()}],"mask-image-r-from-pos":[{"mask-r-from":ce()}],"mask-image-r-to-pos":[{"mask-r-to":ce()}],"mask-image-r-from-color":[{"mask-r-from":j()}],"mask-image-r-to-color":[{"mask-r-to":j()}],"mask-image-b-from-pos":[{"mask-b-from":ce()}],"mask-image-b-to-pos":[{"mask-b-to":ce()}],"mask-image-b-from-color":[{"mask-b-from":j()}],"mask-image-b-to-color":[{"mask-b-to":j()}],"mask-image-l-from-pos":[{"mask-l-from":ce()}],"mask-image-l-to-pos":[{"mask-l-to":ce()}],"mask-image-l-from-color":[{"mask-l-from":j()}],"mask-image-l-to-color":[{"mask-l-to":j()}],"mask-image-x-from-pos":[{"mask-x-from":ce()}],"mask-image-x-to-pos":[{"mask-x-to":ce()}],"mask-image-x-from-color":[{"mask-x-from":j()}],"mask-image-x-to-color":[{"mask-x-to":j()}],"mask-image-y-from-pos":[{"mask-y-from":ce()}],"mask-image-y-to-pos":[{"mask-y-to":ce()}],"mask-image-y-from-color":[{"mask-y-from":j()}],"mask-image-y-to-color":[{"mask-y-to":j()}],"mask-image-radial":[{"mask-radial":[ot,st]}],"mask-image-radial-from-pos":[{"mask-radial-from":ce()}],"mask-image-radial-to-pos":[{"mask-radial-to":ce()}],"mask-image-radial-from-color":[{"mask-radial-from":j()}],"mask-image-radial-to-color":[{"mask-radial-to":j()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":b()}],"mask-image-conic-pos":[{"mask-conic":[Jt]}],"mask-image-conic-from-pos":[{"mask-conic-from":ce()}],"mask-image-conic-to-pos":[{"mask-conic-to":ce()}],"mask-image-conic-from-color":[{"mask-conic-from":j()}],"mask-image-conic-to-color":[{"mask-conic-to":j()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Y()}],"mask-repeat":[{mask:ae()}],"mask-size":[{mask:le()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ot,st]}],filter:[{filter:["","none",ot,st]}],blur:[{blur:ge()}],brightness:[{brightness:[Jt,ot,st]}],contrast:[{contrast:[Jt,ot,st]}],"drop-shadow":[{"drop-shadow":["","none",f,dw,uw]}],"drop-shadow-color":[{"drop-shadow":j()}],grayscale:[{grayscale:["",Jt,ot,st]}],"hue-rotate":[{"hue-rotate":[Jt,ot,st]}],invert:[{invert:["",Jt,ot,st]}],saturate:[{saturate:[Jt,ot,st]}],sepia:[{sepia:["",Jt,ot,st]}],"backdrop-filter":[{"backdrop-filter":["","none",ot,st]}],"backdrop-blur":[{"backdrop-blur":ge()}],"backdrop-brightness":[{"backdrop-brightness":[Jt,ot,st]}],"backdrop-contrast":[{"backdrop-contrast":[Jt,ot,st]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Jt,ot,st]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Jt,ot,st]}],"backdrop-invert":[{"backdrop-invert":["",Jt,ot,st]}],"backdrop-opacity":[{"backdrop-opacity":[Jt,ot,st]}],"backdrop-saturate":[{"backdrop-saturate":[Jt,ot,st]}],"backdrop-sepia":[{"backdrop-sepia":["",Jt,ot,st]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":I()}],"border-spacing-x":[{"border-spacing-x":I()}],"border-spacing-y":[{"border-spacing-y":I()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ot,st]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Jt,"initial",ot,st]}],ease:[{ease:["linear","initial",g,ot,st]}],delay:[{delay:[Jt,ot,st]}],animate:[{animate:["none",v,ot,st]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[m,ot,st]}],"perspective-origin":[{"perspective-origin":S()}],rotate:[{rotate:ee()}],"rotate-x":[{"rotate-x":ee()}],"rotate-y":[{"rotate-y":ee()}],"rotate-z":[{"rotate-z":ee()}],scale:[{scale:fe()}],"scale-x":[{"scale-x":fe()}],"scale-y":[{"scale-y":fe()}],"scale-z":[{"scale-z":fe()}],"scale-3d":["scale-3d"],skew:[{skew:Se()}],"skew-x":[{"skew-x":Se()}],"skew-y":[{"skew-y":Se()}],transform:[{transform:[ot,st,"","none","gpu","cpu"]}],"transform-origin":[{origin:S()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:me()}],"translate-x":[{"translate-x":me()}],"translate-y":[{"translate-y":me()}],"translate-z":[{"translate-z":me()}],"translate-none":["translate-none"],accent:[{accent:j()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:j()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ot,st]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ot,st]}],fill:[{fill:["none",...j()]}],"stroke-w":[{stroke:[Jt,sy,Qh,rI]}],stroke:[{stroke:["none",...j()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},mhe=Xde(phe);function h6(...t){return mhe(yn(t))}function ghe(){var h,f,p,m;const t=Pu(),[e,n]=N.useState(!1),[r,i]=N.useState(!1),{user:s,logout:o}=Mg(),a=[{path:"/",label:"Home",icon:"🏠"},{path:"/dashboard",label:"Dashboard",icon:"📊"},{path:"/inventory",label:"Inventory",icon:"📦"},{path:"/maintenance",label:"Maintenance",icon:"🔧"},{path:"/chat-agent",label:"AI Chat",icon:"💬"},{path:"/ai-agent",label:"AI Agents",icon:"🤖"},{path:"/admin-org-editor",label:"Settings",icon:"⚙️"},{path:"/profile",label:"Profile",icon:"👤"}],l=y=>y==="/"&&t.pathname==="/"?!0:y==="/dashboard"&&t.pathname==="/"?!1:t.pathname===y,c=()=>{n(!e)},u=()=>{i(!r)},d=()=>{o(),i(!1)};return k.jsxs("nav",{className:"bg-gray-800 text-white shadow-lg",children:[k.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:k.jsxs("div",{className:"flex items-center justify-between h-16",children:[k.jsxs("div",{className:"flex items-center",children:[k.jsx("div",{className:"flex-shrink-0",children:k.jsx("h1",{className:"text-xl font-bold",children:"MBARIE FMS"})}),k.jsx("div",{className:"hidden md:block",children:k.jsx("div",{className:"ml-10 flex items-baseline space-x-4",children:a.map(y=>k.jsxs(bl,{to:y.path,className:h6("px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200",l(y.path)?"bg-gray-900 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white"),children:[k.jsx("span",{className:"mr-2",children:y.icon}),y.label]},y.path))})})]}),k.jsx("div",{className:"hidden md:block",children:k.jsx("div",{className:"ml-4 flex items-center md:ml-6",children:k.jsxs("div",{className:"relative",children:[k.jsxs("button",{type:"button",className:"max-w-xs bg-gray-800 rounded-full flex items-center text-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white",id:"user-menu","aria-expanded":"false","aria-haspopup":"true",onClick:u,children:[k.jsx("span",{className:"sr-only",children:"Open user menu"}),k.jsx("div",{className:"h-8 w-8 rounded-full bg-blue-500 flex items-center justify-center",children:k.jsxs("span",{className:"text-white text-sm font-medium",children:[(h=s==null?void 0:s.firstName)==null?void 0:h.charAt(0),(f=s==null?void 0:s.lastName)==null?void 0:f.charAt(0)]})}),k.jsxs("div",{className:"ml-3 text-left",children:[k.jsxs("div",{className:"text-sm font-medium text-white",children:[s==null?void 0:s.firstName," ",s==null?void 0:s.lastName]}),k.jsx("div",{className:"text-xs text-gray-300 capitalize",children:(p=s==null?void 0:s.role)==null?void 0:p.toLowerCase()})]})]}),r&&k.jsxs("div",{className:"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg py-1 bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-50",children:[k.jsxs("div",{className:"px-4 py-2 text-sm text-gray-700 border-b",children:[k.jsxs("div",{className:"font-medium",children:[s==null?void 0:s.firstName," ",s==null?void 0:s.lastName]}),k.jsx("div",{className:"text-gray-500",children:s==null?void 0:s.email}),k.jsx("div",{className:"text-xs text-gray-400 capitalize",children:(m=s==null?void 0:s.role)==null?void 0:m.toLowerCase()})]}),k.jsx(bl,{to:"/profile",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>i(!1),children:"Your Profile"}),k.jsx(bl,{to:"/settings",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>i(!1),children:"Settings"}),k.jsx("button",{onClick:d,className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Sign out"})]})]})})}),k.jsx("div",{className:"md:hidden",children:k.jsxs("button",{type:"button",className:"bg-gray-800 inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white","aria-controls":"mobile-menu","aria-expanded":"false",onClick:c,children:[k.jsx("span",{className:"sr-only",children:"Open main menu"}),k.jsx("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})]})})]})}),k.jsx("div",{className:"md:hidden",id:"mobile-menu",children:k.jsx("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3",children:a.map(y=>k.jsxs(bl,{to:y.path,className:h6("block px-3 py-2 rounded-md text-base font-medium transition-colors duration-200",l(y.path)?"bg-gray-900 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white"),children:[k.jsx("span",{className:"mr-2",children:y.icon}),y.label]},y.path))})})]})}function f6(){const[t,e]=N.useState(new Date);N.useEffect(()=>{const r=setInterval(()=>{e(new Date)},1e3);return()=>clearInterval(r)},[]);const n=[{title:"AI Insights Dashboard",description:"Get real-time analytics and predictive insights for your facility operations",icon:"📊",path:"/dashboard",color:"bg-blue-500"},{title:"Inventory Management",description:"Track materials, manage stock levels, and receive smart alerts",icon:"📦",path:"/inventory",color:"bg-green-500"},{title:"Predictive Maintenance",description:"Monitor equipment health and schedule maintenance proactively",icon:"🔧",path:"/maintenance",color:"bg-orange-500"},{title:"AI Chat Assistant",description:"Get instant help with facility management tasks and queries",icon:"💬",path:"/chat-agent",color:"bg-purple-500"},{title:"AI Agents",description:"Automated workflows and intelligent task management",icon:"🤖",path:"/ai-agent",color:"bg-red-500"},{title:"Organization Editor",description:"Manage team structure, positions, and access controls",icon:"🏢",path:"/admin-org-editor",color:"bg-indigo-500"}];return k.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:[k.jsx("div",{className:"bg-white/80 backdrop-blur-sm border-b border-gray-200",children:k.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:k.jsxs("div",{className:"flex justify-between items-center py-6",children:[k.jsxs("div",{className:"flex items-center space-x-4",children:[k.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center",children:k.jsx("span",{className:"text-white text-xl font-bold",children:"M"})}),k.jsxs("div",{children:[k.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"MBARIE FMS"}),k.jsx("p",{className:"text-gray-600",children:"Facility Management System"})]})]}),k.jsxs("div",{className:"text-right",children:[k.jsx("p",{className:"text-sm text-gray-600",children:t.toLocaleDateString()}),k.jsx("p",{className:"text-lg font-semibold text-gray-900",children:t.toLocaleTimeString()})]})]})})}),k.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:k.jsxs("div",{className:"text-center",children:[k.jsxs("h1",{className:"text-4xl md:text-6xl font-bold text-gray-900 mb-6",children:["Intelligent Facility",k.jsx("span",{className:"text-blue-600",children:" Management"})]}),k.jsx("p",{className:"text-xl text-gray-600 mb-8 max-w-3xl mx-auto",children:"Streamline your facility operations with AI-powered insights, predictive maintenance, and intelligent inventory management. Everything you need in one unified platform."}),k.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[k.jsx(bl,{to:"/dashboard",className:"bg-blue-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors shadow-lg",children:"Get Started"}),k.jsx(bl,{to:"/chat-agent",className:"border border-blue-600 text-blue-600 px-8 py-3 rounded-lg font-semibold hover:bg-blue-50 transition-colors",children:"Try AI Assistant"})]})]})}),k.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[k.jsxs("div",{className:"text-center mb-12",children:[k.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Powerful Features"}),k.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Discover how our AI-powered platform transforms facility management"})]}),k.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:n.map((r,i)=>k.jsx(bl,{to:r.path,className:"bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 p-6 border border-gray-100",children:k.jsxs("div",{className:"flex items-start space-x-4",children:[k.jsx("div",{className:`${r.color} w-12 h-12 rounded-lg flex items-center justify-center text-white text-xl`,children:r.icon}),k.jsxs("div",{className:"flex-1",children:[k.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:r.title}),k.jsx("p",{className:"text-gray-600 text-sm",children:r.description})]})]})},i))})]}),k.jsx("div",{className:"bg-white border-t border-gray-200",children:k.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:k.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8 text-center",children:[k.jsxs("div",{children:[k.jsx("div",{className:"text-3xl font-bold text-blue-600",children:"24/7"}),k.jsx("div",{className:"text-gray-600",children:"AI Monitoring"})]}),k.jsxs("div",{children:[k.jsx("div",{className:"text-3xl font-bold text-green-600",children:"99.9%"}),k.jsx("div",{className:"text-gray-600",children:"Uptime"})]}),k.jsxs("div",{children:[k.jsx("div",{className:"text-3xl font-bold text-orange-600",children:"50+"}),k.jsx("div",{className:"text-gray-600",children:"Facilities"})]}),k.jsxs("div",{children:[k.jsx("div",{className:"text-3xl font-bold text-purple-600",children:"AI"}),k.jsx("div",{className:"text-gray-600",children:"Powered"})]})]})})}),k.jsx("div",{className:"bg-gray-900 text-white",children:k.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:k.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[k.jsxs("div",{className:"mb-4 md:mb-0",children:[k.jsxs("div",{className:"flex items-center space-x-2",children:[k.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded flex items-center justify-center",children:k.jsx("span",{className:"text-white font-bold",children:"M"})}),k.jsx("span",{className:"text-lg font-semibold",children:"MBARIE FMS"})]}),k.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Intelligent Facility Management System"})]}),k.jsx("div",{className:"text-gray-400 text-sm",children:"© 2025 Mbarie Services Ltd. All rights reserved."})]})})})]})}function yhe(){const[t,e]=N.useState(""),[n,r]=N.useState(""),[i,s]=N.useState(!1),[o,a]=N.useState(""),{login:l}=Mg(),c=sC(),u=async d=>{d.preventDefault(),s(!0),a("");const h=await l(t,n);h.success?c("/dashboard"):a(h.message),s(!1)};return k.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:k.jsxs("div",{className:"max-w-md w-full space-y-8",children:[k.jsxs("div",{children:[k.jsx("div",{className:"mx-auto h-12 w-12 bg-blue-600 rounded-lg flex items-center justify-center",children:k.jsx("span",{className:"text-white text-xl font-bold",children:"M"})}),k.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sign in to your account"}),k.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Or"," ",k.jsx(bl,{to:"/register",className:"font-medium text-blue-600 hover:text-blue-500",children:"create a new account"})]})]}),k.jsxs("form",{className:"mt-8 space-y-6",onSubmit:u,children:[o&&k.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md",children:o}),k.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[k.jsxs("div",{children:[k.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),k.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Email address",value:t,onChange:d=>e(d.target.value)})]}),k.jsxs("div",{children:[k.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),k.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Password",value:n,onChange:d=>r(d.target.value)})]})]}),k.jsxs("div",{className:"flex items-center justify-between",children:[k.jsxs("div",{className:"flex items-center",children:[k.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),k.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-900",children:"Remember me"})]}),k.jsx("div",{className:"text-sm",children:k.jsx("a",{href:"#",className:"font-medium text-blue-600 hover:text-blue-500",children:"Forgot your password?"})})]}),k.jsx("div",{children:k.jsx("button",{type:"submit",disabled:i,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:i?k.jsxs("div",{className:"flex items-center",children:[k.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[k.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),k.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing in..."]}):"Sign in"})}),k.jsx("div",{className:"text-center",children:k.jsx("p",{className:"text-sm text-gray-600",children:"Demo credentials: admin@mbarieservicesltd.com / password123"})})]})]})})}function vhe(){const[t,e]=N.useState({employeeId:"",firstName:"",lastName:"",email:"",password:"",confirmPassword:"",role:"GUEST",jobTitle:"",department:"",facility:""}),[n,r]=N.useState(!1),[i,s]=N.useState(""),{register:o}=Mg(),a=sC(),l=u=>{e({...t,[u.target.name]:u.target.value})},c=async u=>{if(u.preventDefault(),r(!0),s(""),t.password!==t.confirmPassword){s("Passwords do not match"),r(!1);return}if(t.password.length<6){s("Password must be at least 6 characters long"),r(!1);return}const{confirmPassword:d,...h}=t,f=await o(h);f.success?a("/dashboard"):s(f.message),r(!1)};return k.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:k.jsxs("div",{className:"max-w-2xl w-full space-y-8",children:[k.jsxs("div",{children:[k.jsx("div",{className:"mx-auto h-12 w-12 bg-blue-600 rounded-lg flex items-center justify-center",children:k.jsx("span",{className:"text-white text-xl font-bold",children:"M"})}),k.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Create your account"}),k.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Or"," ",k.jsx(bl,{to:"/login",className:"font-medium text-blue-600 hover:text-blue-500",children:"sign in to your existing account"})]})]}),k.jsxs("form",{className:"mt-8 space-y-6",onSubmit:c,children:[i&&k.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md",children:i}),k.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[k.jsxs("div",{children:[k.jsx("label",{htmlFor:"employeeId",className:"block text-sm font-medium text-gray-700",children:"Employee ID *"}),k.jsx("input",{id:"employeeId",name:"employeeId",type:"text",required:!0,className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"EMP001",value:t.employeeId,onChange:l})]}),k.jsxs("div",{children:[k.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700",children:"Role *"}),k.jsxs("select",{id:"role",name:"role",required:!0,className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:t.role,onChange:l,children:[k.jsx("option",{value:"GUEST",children:"Guest"}),k.jsx("option",{value:"TECHNICIAN",children:"Technician"}),k.jsx("option",{value:"STOREKEEPER",children:"Storekeeper"}),k.jsx("option",{value:"ADMIN",children:"Administrator"})]})]}),k.jsxs("div",{children:[k.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700",children:"First Name *"}),k.jsx("input",{id:"firstName",name:"firstName",type:"text",required:!0,className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"John",value:t.firstName,onChange:l})]}),k.jsxs("div",{children:[k.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700",children:"Last Name *"}),k.jsx("input",{id:"lastName",name:"lastName",type:"text",required:!0,className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Doe",value:t.lastName,onChange:l})]}),k.jsxs("div",{children:[k.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address *"}),k.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"john.doe@company.com",value:t.email,onChange:l})]}),k.jsxs("div",{children:[k.jsx("label",{htmlFor:"jobTitle",className:"block text-sm font-medium text-gray-700",children:"Job Title *"}),k.jsx("input",{id:"jobTitle",name:"jobTitle",type:"text",required:!0,className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Technician",value:t.jobTitle,onChange:l})]}),k.jsxs("div",{children:[k.jsx("label",{htmlFor:"department",className:"block text-sm font-medium text-gray-700",children:"Department *"}),k.jsx("input",{id:"department",name:"department",type:"text",required:!0,className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Maintenance",value:t.department,onChange:l})]}),k.jsxs("div",{children:[k.jsx("label",{htmlFor:"facility",className:"block text-sm font-medium text-gray-700",children:"Facility *"}),k.jsx("input",{id:"facility",name:"facility",type:"text",required:!0,className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Main Workshop",value:t.facility,onChange:l})]}),k.jsxs("div",{children:[k.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password *"}),k.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Minimum 6 characters",value:t.password,onChange:l})]}),k.jsxs("div",{children:[k.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm Password *"}),k.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Confirm your password",value:t.confirmPassword,onChange:l})]})]}),k.jsx("div",{children:k.jsx("button",{type:"submit",disabled:n,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:n?k.jsxs("div",{className:"flex items-center",children:[k.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[k.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),k.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating account..."]}):"Create Account"})})]})]})})}const AG=()=>{const[t,e]=N.useState(!1),[n,r]=N.useState(null),[i,s]=N.useState("unknown"),o=async()=>{try{return(await fetch("/api/ai/health",{method:"GET",headers:{"Content-Type":"application/json"}})).ok?(s("healthy"),!0):(s("unhealthy"),!1)}catch{return s("unhealthy"),!1}},a=async(c,u,d)=>{const h=(d==null?void 0:d.retry)??!0;try{e(!0),r(null);const f=new AbortController,p=setTimeout(()=>f.abort(),3e4),m=await fetch(`/api/ai/${c}`,{method:u?"POST":"GET",headers:{"Content-Type":"application/json"},body:u?JSON.stringify(u):void 0,signal:f.signal});if(clearTimeout(p),!m.ok){let y=`Request failed: ${m.status}`;switch(m.status){case 404:y="AI endpoint not found - please check backend configuration";break;case 500:y="AI service is currently offline - please try again later";break;case 503:y="AI service is temporarily unavailable";break;default:y=`Server error: ${m.status}`}throw new Error(y)}return s("healthy"),await m.json()}catch(f){const p=f.name==="AbortError"?"Request timeout - AI service is not responding":f.message||"Unknown error occurred";return r(p),s("unhealthy"),h&&f.name!=="AbortError"?(console.log("Retrying request..."),await a(c,u,{retry:!1})):null}finally{e(!1)}};return{request:a,uploadFile:async c=>{try{e(!0),r(null);const u=new FormData;u.append("file",c);const d=new AbortController,h=setTimeout(()=>d.abort(),6e4),f=await fetch("/api/ai/document/analyze",{method:"POST",body:u,signal:d.signal});if(clearTimeout(h),!f.ok)throw new Error(`File upload failed: ${f.status}`);return s("healthy"),await f.json()}catch(u){const d=u.name==="AbortError"?"File upload timeout - please try again with a smaller file":u.message||"File upload failed";return r(d),s("unhealthy"),null}finally{e(!1)}},loading:t,error:n,backendStatus:i,checkHealth:o}},xhe=({onResult:t})=>{const[e,n]=N.useState(!1),[r,i]=N.useState(null),s=N.useRef(null),o=()=>{const c=window.SpeechRecognition||window.webkitSpeechRecognition;if(!c){i("Speech recognition is not supported in this browser. Please use Chrome or Edge.");return}try{i(null),n(!0);const u=new c;s.current=u,u.continuous=!1,u.interimResults=!1,u.lang="en-US",u.maxAlternatives=1,u.onstart=()=>{n(!0)},u.onresult=d=>{const h=d.results[0][0].transcript;t(h),n(!1)},u.onerror=d=>{switch(console.error("Speech recognition error:",d.error),d.error){case"not-allowed":case"permission-denied":i("Microphone permission denied. Please allow microphone access in your browser settings.");break;case"no-speech":i("No speech detected. Please try speaking again.");break;case"audio-capture":i("No microphone found. Please check your audio devices.");break;case"network":i("Network error occurred during speech recognition.");break;default:i("Speech recognition failed. Please try again.")}n(!1)},u.onend=()=>{n(!1)},u.start(),setTimeout(()=>{e&&(u.stop(),i("Speech recognition timed out. Please try again."),n(!1))},1e4)}catch(u){console.error("Failed to start speech recognition:",u),i("Failed to initialize speech recognition. Please try again."),n(!1)}},a=()=>{s.current&&s.current.stop(),n(!1)},l=()=>{e?a():o()};return k.jsxs("div",{className:"relative",children:[k.jsx("button",{onClick:l,className:`p-3 rounded-full transition-all duration-300 ${e?"bg-red-500 text-white animate-pulse":"bg-blue-600 text-white hover:bg-blue-700"}`,title:e?"Stop listening":"Start voice input",children:e?k.jsx("div",{className:"w-4 h-4 bg-white rounded-sm"}):k.jsx("span",{className:"text-sm",children:"🎤"})}),r&&k.jsxs("div",{className:"absolute bottom-full mb-2 left-1/2 transform -translate-x-1/2 bg-red-100 border border-red-300 text-red-800 px-3 py-2 rounded-lg text-xs max-w-xs z-10",children:[r,k.jsx("button",{onClick:()=>i(null),className:"ml-2 text-red-600 hover:text-red-800",children:"×"})]}),e&&k.jsx("div",{className:"absolute bottom-full mb-2 left-1/2 transform -translate-x-1/2 bg-blue-100 border border-blue-300 text-blue-800 px-3 py-1 rounded-lg text-xs whitespace-nowrap",children:"Listening..."})]})},fP="mbarie-offline-cache",aC="mbarie-sync-queue",bhe=async()=>{try{const t=localStorage.getItem(fP);return t?JSON.parse(t):null}catch(t){return console.error("Error reading cache:",t),null}},whe=async(t,e)=>{try{const n={insights:t,recommendations:e,timestamp:new Date().toISOString(),summary:`Last updated: ${new Date().toLocaleString()} - ${t.length} insights, ${e.length} recommendations`};localStorage.setItem(fP,JSON.stringify(n))}catch(n){console.error("Error setting cache:",n)}},khe=()=>{try{localStorage.removeItem(fP)}catch(t){console.error("Error clearing cache:",t)}},Bg=()=>{try{const t=localStorage.getItem(aC);return t?JSON.parse(t):[]}catch(t){return console.error("Error reading sync queue:",t),[]}},IG=t=>{try{const e=Bg(),n={...t,id:`sync-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:new Date().toISOString(),retryCount:0};e.push(n),localStorage.setItem(aC,JSON.stringify(e)),console.log("Added to sync queue:",n)}catch(e){console.error("Error adding to sync queue:",e)}},DE=t=>{try{const n=Bg().filter(r=>r.id!==t);localStorage.setItem(aC,JSON.stringify(n))}catch(e){console.error("Error removing from sync queue:",e)}},LE=(t,e)=>{try{const r=Bg().map(i=>i.id===t?{...i,...e}:i);localStorage.setItem(aC,JSON.stringify(r))}catch(n){console.error("Error updating sync queue item:",n)}},pP=async()=>{if(!navigator.onLine){console.log("Offline - skipping sync queue processing");return}const t=Bg();if(t.length!==0){console.log(`Processing ${t.length} items from sync queue...`);for(const e of t)try{let n=!1;switch(e.type){case"action":n=await She(e.data);break;case"upload":n=await Che(e.data);break;case"insight":n=await Nhe(e.data);break;case"recommendation":n=await Ahe(e.data);break;case"maintenance":n=await Ihe(e.data,e.endpoint,e.method);break}n?(DE(e.id),console.log(`Successfully synced item: ${e.id}`)):(LE(e.id,{retryCount:e.retryCount+1,timestamp:new Date().toISOString()}),e.retryCount>=3&&(DE(e.id),console.warn(`Removed item after ${e.retryCount} failed retries: ${e.id}`)))}catch(n){console.error(`Error processing sync item ${e.id}:`,n),LE(e.id,{retryCount:e.retryCount+1,timestamp:new Date().toISOString()})}}},She=async t=>(console.log("Processing action item:",t),await new Promise(e=>setTimeout(e,1e3)),Math.random()>.2),Che=async t=>(console.log("Processing upload item:",t),await new Promise(e=>setTimeout(e,2e3)),Math.random()>.1),Nhe=async t=>(console.log("Processing insight item:",t),await new Promise(e=>setTimeout(e,500)),!0),Ahe=async t=>(console.log("Processing recommendation item:",t),await new Promise(e=>setTimeout(e,800)),Math.random()>.3),Ihe=async(t,e,n)=>{console.log("Processing maintenance item:",t,"Endpoint:",e,"Method:",n);try{return await new Promise(r=>setTimeout(r,1500)),e!=null&&e.includes("/tasks")?Math.random()>.1:e!=null&&e.includes("/analyses")?Math.random()>.05:Math.random()>.15}catch(r){return console.error("Error processing maintenance item:",r),!1}},_G=()=>{window.addEventListener("online",()=>{console.log("Connection restored - starting auto-sync"),pP()})},EG=()=>{const t=setInterval(()=>{navigator.onLine&&pP()},3e4);return()=>clearInterval(t)},_y=()=>{const t=Bg(),e=t.reduce((n,r)=>(n[r.type]=(n[r.type]||0)+1,n),{});return{total:t.length,byType:e,oldest:t.length>0?new Date(t[0].timestamp):null,hasRetries:t.some(n=>n.retryCount>0)}},_he=Object.freeze(Object.defineProperty({__proto__:null,addToSyncQueue:IG,clearCache:khe,getCachedInsights:bhe,getSyncQueue:Bg,getSyncQueueStats:_y,initializeAutoSync:_G,processSyncQueue:pP,removeFromSyncQueue:DE,setCachedInsights:whe,startPeriodicSync:EG,updateSyncQueueItem:LE},Symbol.toStringTag,{value:"Module"})),Ehe=({onFileUpload:t,onUploadProgress:e,onOfflineQueue:n})=>{const[r,i]=N.useState(!1),[s,o]=N.useState(null),[a,l]=N.useState("idle"),c=N.useRef(null),u=[".pdf",".docx",".doc",".csv",".xlsx",".xls",".jpg",".jpeg",".png",".txt",".md"],d=async S=>{var T;if(!S||S.length===0)return;const A=S[0],E="."+((T=A.name.split(".").pop())==null?void 0:T.toLowerCase());if(!u.includes(E||"")){alert(`Unsupported file type. Please upload one of: ${u.join(", ")}`);return}if(A.size>10*1024*1024){alert("File size too large. Please upload files smaller than 10MB.");return}if(!navigator.onLine){f(A);return}await h(A)},h=async S=>{l("uploading"),o(0),e&&e(0);try{const A=setInterval(()=>{o(E=>{const I=Math.min((E||0)+10,90);return e&&e(I),I})},100);setTimeout(()=>{clearInterval(A),o(100),e&&e(100),t(S),l("success"),setTimeout(()=>{o(null),l("idle"),e&&e(0)},1e3)},1e3)}catch(A){console.error("Upload failed:",A),l("error"),setTimeout(()=>l("idle"),3e3)}},f=S=>{const A=new FileReader;A.onload=E=>{var T;const I={name:S.name,type:S.type,size:S.size,data:(T=E.target)==null?void 0:T.result,timestamp:new Date().toISOString()};IG({type:"upload",data:I}),l("queued"),n&&n(S),setTimeout(()=>{l("idle")},2e3)},A.readAsDataURL(S)},p=S=>{S.preventDefault(),i(!0)},m=S=>{S.preventDefault(),i(!1)},y=S=>{S.preventDefault(),i(!1),d(S.dataTransfer.files)},g=()=>{var S;(S=c.current)==null||S.click()},v=()=>{switch(a){case"uploading":return"bg-blue-400 text-white";case"success":return"bg-green-500 text-white";case"error":return"bg-red-500 text-white";case"queued":return"bg-yellow-500 text-white";case"idle":return r?"bg-green-500 text-white scale-110":"bg-gray-200 text-gray-700 hover:bg-gray-300";default:return"bg-gray-200 text-gray-700 hover:bg-gray-300"}},x=()=>{switch(a){case"uploading":return k.jsxs("div",{className:"w-4 h-4 flex items-center justify-center text-xs",children:[s,"%"]});case"success":return k.jsx("span",{className:"text-sm",children:"✅"});case"error":return k.jsx("span",{className:"text-sm",children:"❌"});case"queued":return k.jsx("span",{className:"text-sm",children:"⏳"});default:return k.jsx("span",{className:"text-sm",children:"📎"})}},b=()=>{switch(a){case"uploading":return`Uploading... ${s}%`;case"success":return"Upload complete!";case"error":return"Upload failed";case"queued":return"Queued for offline sync";default:return"Upload file (PDF, DOCX, CSV, Images, TXT)"}};return k.jsxs("div",{className:"relative",children:[k.jsx("input",{type:"file",ref:c,className:"hidden",accept:u.join(","),onChange:S=>d(S.target.files)}),k.jsx("div",{onClick:g,onDragOver:p,onDragLeave:m,onDrop:y,className:`p-3 rounded-full transition-all duration-300 cursor-pointer ${v()}`,title:b(),children:x()}),a!=="idle"&&k.jsxs("div",{className:`absolute bottom-full mb-2 left-1/2 transform -translate-x-1/2 px-3 py-1 rounded-lg text-xs whitespace-nowrap z-10 ${a==="success"?"bg-green-100 border border-green-300 text-green-800":a==="error"?"bg-red-100 border border-red-300 text-red-800":a==="queued"?"bg-yellow-100 border border-yellow-300 text-yellow-800":"bg-blue-100 border border-blue-300 text-blue-800"}`,children:[b(),a==="queued"&&!navigator.onLine&&k.jsx("div",{className:"text-xs mt-1",children:"Will sync when back online"})]}),r&&a==="idle"&&k.jsx("div",{className:"absolute bottom-full mb-2 left-1/2 transform -translate-x-1/2 bg-green-100 border border-green-300 text-green-800 px-3 py-1 rounded-lg text-xs whitespace-nowrap z-10",children:"Drop file to upload"})]})},The=({role:t,content:e})=>k.jsx("div",{className:`p-4 my-3 rounded-2xl max-w-[85%] transition-all duration-300 ${t==="user"?"bg-gradient-to-br from-blue-500 to-blue-600 text-white self-end ml-auto shadow-lg shadow-blue-500/25":"bg-gradient-to-br from-gray-50 to-white dark:from-gray-800 dark:to-gray-700 text-gray-800 dark:text-gray-200 self-start shadow-lg shadow-gray-500/10 dark:shadow-gray-900/50 border border-gray-100 dark:border-gray-600"}`,children:k.jsx("p",{className:"leading-relaxed",children:e})});async function $he(t){try{const{request:e}=AG(),n=await e("recommendations",{prompt:t});return n&&n.recommendations?JSON.stringify({recommendations:n.recommendations}):p6()}catch(e){return console.error("AI recommendation service unavailable:",e),p6()}}async function TG(t){const e=Rhe(t),n=`
Analyze the following operational trends and predict recommended actions:
${JSON.stringify(e,null,2)}

Provide 3-5 actionable insights grouped by category:
- Performance Optimization: Suggestions to improve workflow efficiency and resource allocation
- Risk Mitigation: Actions to reduce operational risks and safety concerns
- Compliance & Safety: Recommendations for regulatory compliance and safety protocols
- Maintenance Scheduling: Proactive maintenance and equipment optimization

For each recommendation, include:
- Specific, actionable text
- Confidence level (0-100%)
- Brief reasoning explaining the recommendation
- Suggested action type (optimize, alert, schedule, review)
- Target department if applicable

Format the response as JSON with a "recommendations" array.
`,r=await $he(n);return Phe(r)}function Phe(t){try{const e=JSON.parse(t);if(Array.isArray(e.recommendations))return e.recommendations.map(n=>({category:n.category||"General",text:n.text||"No recommendation provided",confidence:Math.min(100,Math.max(0,n.confidence||75)),reasoning:n.reasoning,actionType:n.actionType,departmentId:n.departmentId}))}catch(e){console.warn("Failed to parse AI recommendations:",e)}return[{category:"General",text:t.slice(0,300),confidence:75,reasoning:"AI service response format unexpected"}]}function Rhe(t){var a,l;const e=t.insights.filter(c=>c.category==="workflow"),n=t.insights.filter(c=>c.category==="risk"),r=t.insights.filter(c=>c.category==="document"),i=t.insights.filter(c=>c.category==="permit"),s=e.length>0?e.reduce((c,u)=>{const d=typeof u.value=="string"?parseFloat(u.value):u.value||0;return c+d},0)/e.length:85,o=n.length>0?n.reduce((c,u)=>{const d=typeof u.value=="string"?parseFloat(u.value):u.value||0;return c+d},0)/n.length:25;return{workflowEfficiency:Math.round(s),riskLevel:Math.round(o),trend:t.trend||"stable",confidence:t.confidence||.8,documentCount:r.length,permitCount:i.length,predictiveForecast:((l=(a=t.predictiveData)==null?void 0:a.predictions)==null?void 0:l.slice(0,3))||[],timestamp:new Date().toISOString()}}function p6(){return JSON.stringify({recommendations:[{category:"Performance Optimization",text:"Optimize resource allocation for engineering department based on 15% increase in workflow efficiency predictions",confidence:88,reasoning:"Predictive analytics show consistent upward trend in engineering workflow performance",actionType:"optimize",departmentId:"engineering"},{category:"Risk Mitigation",text:"Schedule safety audit for maintenance team due to increased equipment usage patterns",confidence:76,reasoning:"Maintenance department showing higher equipment utilization rates",actionType:"schedule",departmentId:"maintenance"},{category:"Compliance & Safety",text:"Review and update safety protocols for high-risk operations identified in recent assessments",confidence:92,reasoning:"Compliance dashboard shows 3 pending safety protocol updates",actionType:"review"},{category:"Maintenance Scheduling",text:"Proactive maintenance recommended for critical equipment showing 12% performance degradation",confidence:81,reasoning:"Equipment performance metrics indicate potential maintenance needs",actionType:"schedule"}]})}function Ohe(t,e){const n=e.toLowerCase();return n.includes("efficiency")||n.includes("performance")?t.filter(r=>r.category==="Performance Optimization"):n.includes("risk")||n.includes("safety")?t.filter(r=>r.category==="Risk Mitigation"||r.category==="Compliance & Safety"):n.includes("maintenance")||n.includes("equipment")?t.filter(r=>r.category==="Maintenance Scheduling"):n.includes("compliance")||n.includes("regulatory")?t.filter(r=>r.category==="Compliance & Safety"):t}const wc=Object.create(null);wc.open="0";wc.close="1";wc.ping="2";wc.pong="3";wc.message="4";wc.upgrade="5";wc.noop="6";const k2=Object.create(null);Object.keys(wc).forEach(t=>{k2[wc[t]]=t});const ME={type:"error",data:"parser error"},$G=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",PG=typeof ArrayBuffer=="function",RG=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,mP=({type:t,data:e},n,r)=>$G&&e instanceof Blob?n?r(e):m6(e,r):PG&&(e instanceof ArrayBuffer||RG(e))?n?r(e):m6(new Blob([e]),r):r(wc[t]+(e||"")),m6=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function g6(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let iI;function Dhe(t,e){if($G&&t.data instanceof Blob)return t.data.arrayBuffer().then(g6).then(e);if(PG&&(t.data instanceof ArrayBuffer||RG(t.data)))return e(g6(t.data));mP(t,!1,n=>{iI||(iI=new TextEncoder),e(iI.encode(n))})}const y6="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ey=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<y6.length;t++)Ey[y6.charCodeAt(t)]=t;const Lhe=t=>{let e=t.length*.75,n=t.length,r,i=0,s,o,a,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const c=new ArrayBuffer(e),u=new Uint8Array(c);for(r=0;r<n;r+=4)s=Ey[t.charCodeAt(r)],o=Ey[t.charCodeAt(r+1)],a=Ey[t.charCodeAt(r+2)],l=Ey[t.charCodeAt(r+3)],u[i++]=s<<2|o>>4,u[i++]=(o&15)<<4|a>>2,u[i++]=(a&3)<<6|l&63;return c},Mhe=typeof ArrayBuffer=="function",gP=(t,e)=>{if(typeof t!="string")return{type:"message",data:OG(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:Fhe(t.substring(1),e)}:k2[n]?t.length>1?{type:k2[n],data:t.substring(1)}:{type:k2[n]}:ME},Fhe=(t,e)=>{if(Mhe){const n=Lhe(t);return OG(n,e)}else return{base64:!0,data:t}},OG=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},DG=String.fromCharCode(30),jhe=(t,e)=>{const n=t.length,r=new Array(n);let i=0;t.forEach((s,o)=>{mP(s,!1,a=>{r[o]=a,++i===n&&e(r.join(DG))})})},Bhe=(t,e)=>{const n=t.split(DG),r=[];for(let i=0;i<n.length;i++){const s=gP(n[i],e);if(r.push(s),s.type==="error")break}return r};function zhe(){return new TransformStream({transform(t,e){Dhe(t,n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const s=new DataView(i.buffer);s.setUint8(0,126),s.setUint16(1,r)}else{i=new Uint8Array(9);const s=new DataView(i.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(n)})}})}let sI;function hw(t){return t.reduce((e,n)=>e+n.length,0)}function fw(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let i=0;i<e;i++)n[i]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function Uhe(t,e){sI||(sI=new TextDecoder);const n=[];let r=0,i=-1,s=!1;return new TransformStream({transform(o,a){for(n.push(o);;){if(r===0){if(hw(n)<1)break;const l=fw(n,1);s=(l[0]&128)===128,i=l[0]&127,i<126?r=3:i===126?r=1:r=2}else if(r===1){if(hw(n)<2)break;const l=fw(n,2);i=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),r=3}else if(r===2){if(hw(n)<8)break;const l=fw(n,8),c=new DataView(l.buffer,l.byteOffset,l.length),u=c.getUint32(0);if(u>Math.pow(2,53-32)-1){a.enqueue(ME);break}i=u*Math.pow(2,32)+c.getUint32(4),r=3}else{if(hw(n)<i)break;const l=fw(n,i);a.enqueue(gP(s?l:sI.decode(l),e)),r=0}if(i===0||i>t){a.enqueue(ME);break}}}})}const LG=4;function si(t){if(t)return Vhe(t)}function Vhe(t){for(var e in si.prototype)t[e]=si.prototype[e];return t}si.prototype.on=si.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};si.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};si.prototype.off=si.prototype.removeListener=si.prototype.removeAllListeners=si.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===e||r.fn===e){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+t],this};si.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,e)}return this};si.prototype.emitReserved=si.prototype.emit;si.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};si.prototype.hasListeners=function(t){return!!this.listeners(t).length};const lC=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0))(),Ca=(()=>typeof self<"u"?self:typeof window<"u"?window:Function("return this")())(),Whe="arraybuffer";function MG(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const Ghe=Ca.setTimeout,qhe=Ca.clearTimeout;function cC(t,e){e.useNativeTimers?(t.setTimeoutFn=Ghe.bind(Ca),t.clearTimeoutFn=qhe.bind(Ca)):(t.setTimeoutFn=Ca.setTimeout.bind(Ca),t.clearTimeoutFn=Ca.clearTimeout.bind(Ca))}const Hhe=1.33;function Khe(t){return typeof t=="string"?Xhe(t):Math.ceil((t.byteLength||t.size)*Hhe)}function Xhe(t){let e=0,n=0;for(let r=0,i=t.length;r<i;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function FG(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Yhe(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function Zhe(t){let e={},n=t.split("&");for(let r=0,i=n.length;r<i;r++){let s=n[r].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}class Jhe extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class yP extends si{constructor(e){super(),this.writable=!1,cC(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,r){return super.emitReserved("error",new Jhe(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=gP(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=Yhe(e);return n.length?"?"+n:""}}class Qhe extends yP{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};Bhe(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,jhe(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=FG()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let jG=!1;try{jG=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const efe=jG;function tfe(){}class nfe extends Qhe{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(i,s)=>{this.onError("xhr post error",i,s)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}class uc extends si{constructor(e,n,r){super(),this.createRequest=e,cC(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const n=MG(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var i;r.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=uc.requestsCount++,uc.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=tfe,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete uc.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}uc.requestsCount=0;uc.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",v6);else if(typeof addEventListener=="function"){const t="onpagehide"in Ca?"pagehide":"unload";addEventListener(t,v6,!1)}}function v6(){for(let t in uc.requests)uc.requests.hasOwnProperty(t)&&uc.requests[t].abort()}const rfe=function(){const t=BG({xdomain:!1});return t&&t.responseType!==null}();class ife extends nfe{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=rfe&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new uc(BG,this.uri(),e)}}function BG(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||efe))return new XMLHttpRequest}catch{}if(!e)try{return new Ca[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const zG=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class sfe extends yP{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,r=zG?{}:MG(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;mP(r,this.supportsBinary,s=>{try{this.doWrite(r,s)}catch{}i&&lC(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=FG()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const oI=Ca.WebSocket||Ca.MozWebSocket;class ofe extends sfe{createSocket(e,n,r){return zG?new oI(e,n,r):n?new oI(e,n):new oI(e)}doWrite(e,n){this.ws.send(n)}}class afe extends yP{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=Uhe(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),i=zhe();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const s=()=>{r.read().then(({done:a,value:l})=>{a||(this.onPacket(l),s())}).catch(a=>{})};s();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;this._writer.write(r).then(()=>{i&&lC(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const lfe={websocket:ofe,webtransport:afe,polling:ife},cfe=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,ufe=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function FE(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let i=cfe.exec(t||""),s={},o=14;for(;o--;)s[ufe[o]]=i[o]||"";return n!=-1&&r!=-1&&(s.source=e,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=dfe(s,s.path),s.queryKey=hfe(s,s.query),s}function dfe(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function hfe(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,s){i&&(n[i]=s)}),n}const jE=typeof addEventListener=="function"&&typeof removeEventListener=="function",S2=[];jE&&addEventListener("offline",()=>{S2.forEach(t=>t())},!1);class jd extends si{constructor(e,n){if(super(),this.binaryType=Whe,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const r=FE(e);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=FE(n.host).host);cC(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const i=r.prototype.name;this.transports.push(i),this._transportsByName[i]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Zhe(this.opts.query)),jE&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},S2.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=LG,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&jd.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",jd.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(n+=Khe(i)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,lC(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,r){return this._sendPacket("message",e,n,r),this}send(e,n,r){return this._sendPacket("message",e,n,r),this}_sendPacket(e,n,r,i){if(typeof n=="function"&&(i=n,n=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const s={type:e,data:n,options:r};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(jd.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),jE&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=S2.indexOf(this._offlineEventListener);r!==-1&&S2.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}jd.protocol=LG;class ffe extends jd{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),r=!1;jd.priorWebsocketSuccess=!1;const i=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",d=>{if(!r)if(d.type==="pong"&&d.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;jd.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(u(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const h=new Error("probe error");h.transport=n.name,this.emitReserved("upgradeError",h)}}))};function s(){r||(r=!0,u(),n.close(),n=null)}const o=d=>{const h=new Error("probe error: "+d);h.transport=n.name,s(),this.emitReserved("upgradeError",h)};function a(){o("transport closed")}function l(){o("socket closed")}function c(d){n&&d.name!==n.name&&s()}const u=()=>{n.removeListener("open",i),n.removeListener("error",o),n.removeListener("close",a),this.off("close",l),this.off("upgrading",c)};n.once("open",i),n.once("error",o),n.once("close",a),this.once("close",l),this.once("upgrading",c),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}}let pfe=class extends ffe{constructor(e,n={}){const r=typeof e=="object"?e:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(i=>lfe[i]).filter(i=>!!i)),super(e,r)}};function mfe(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=FE(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const s=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+e,r.href=r.protocol+"://"+s+(n&&n.port===r.port?"":":"+r.port),r}const gfe=typeof ArrayBuffer=="function",yfe=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,UG=Object.prototype.toString,vfe=typeof Blob=="function"||typeof Blob<"u"&&UG.call(Blob)==="[object BlobConstructor]",xfe=typeof File=="function"||typeof File<"u"&&UG.call(File)==="[object FileConstructor]";function vP(t){return gfe&&(t instanceof ArrayBuffer||yfe(t))||vfe&&t instanceof Blob||xfe&&t instanceof File}function C2(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(C2(t[n]))return!0;return!1}if(vP(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return C2(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&C2(t[n]))return!0;return!1}function bfe(t){const e=[],n=t.data,r=t;return r.data=BE(n,e),r.attachments=e.length,{packet:r,buffers:e}}function BE(t,e){if(!t)return t;if(vP(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=BE(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=BE(t[r],e));return n}return t}function wfe(t,e){return t.data=zE(t.data,e),delete t.attachments,t}function zE(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=zE(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=zE(t[n],e));return t}const kfe=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Sfe=5;var on;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(on||(on={}));class Cfe{constructor(e){this.replacer=e}encode(e){return(e.type===on.EVENT||e.type===on.ACK)&&C2(e)?this.encodeAsBinary({type:e.type===on.EVENT?on.BINARY_EVENT:on.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===on.BINARY_EVENT||e.type===on.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=bfe(e),r=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(r),i}}function x6(t){return Object.prototype.toString.call(t)==="[object Object]"}class xP extends si{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===on.BINARY_EVENT;r||n.type===on.BINARY_ACK?(n.type=r?on.EVENT:on.ACK,this.reconstructor=new Nfe(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(vP(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(on[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===on.BINARY_EVENT||r.type===on.BINARY_ACK){const s=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const o=e.substring(s,n);if(o!=Number(o)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(e.charAt(n+1)==="/"){const s=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(s,n)}else r.nsp="/";const i=e.charAt(n+1);if(i!==""&&Number(i)==i){const s=n+1;for(;++n;){const o=e.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===e.length)break}r.id=Number(e.substring(s,n+1))}if(e.charAt(++n)){const s=this.tryParse(e.substr(n));if(xP.isPayloadValid(r.type,s))r.data=s;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case on.CONNECT:return x6(n);case on.DISCONNECT:return n===void 0;case on.CONNECT_ERROR:return typeof n=="string"||x6(n);case on.EVENT:case on.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&kfe.indexOf(n[0])===-1);case on.ACK:case on.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Nfe{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=wfe(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Afe=Object.freeze(Object.defineProperty({__proto__:null,Decoder:xP,Encoder:Cfe,get PacketType(){return on},protocol:Sfe},Symbol.toStringTag,{value:"Module"}));function fl(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const Ife=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class VG extends si{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[fl(e,"open",this.onopen.bind(this)),fl(e,"packet",this.onpacket.bind(this)),fl(e,"error",this.onerror.bind(this)),fl(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var r,i,s;if(Ife.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const o={type:on.EVENT,data:n};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const u=this.ids++,d=n.pop();this._registerAckCallback(u,d),o.id=u}const a=(i=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||i===void 0?void 0:i.writable,l=this.connected&&!(!((s=this.io.engine)===null||s===void 0)&&s._hasPingExpired());return this.flags.volatile&&!a||(l?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(e,n){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[e]=n;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);n.call(this,new Error("operation has timed out"))},i),o=(...a)=>{this.io.clearTimeoutFn(s),n.apply(this,a)};o.withError=!0,this.acks[e]=o}emitWithAck(e,...n){return new Promise((r,i)=>{const s=(o,a)=>o?i(o):r(a);s.withError=!0,n.push(s),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...s)=>r!==this._queue[0]?void 0:(i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...s)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:on.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case on.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case on.EVENT:case on.BINARY_EVENT:this.onevent(e);break;case on.ACK:case on.BINARY_ACK:this.onack(e);break;case on.DISCONNECT:this.ondisconnect();break;case on.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...i){r||(r=!0,n.packet({type:on.ACK,id:e,data:i}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:on.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function zg(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}zg.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};zg.prototype.reset=function(){this.attempts=0};zg.prototype.setMin=function(t){this.ms=t};zg.prototype.setMax=function(t){this.max=t};zg.prototype.setJitter=function(t){this.jitter=t};class UE extends si{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,cC(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new zg({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const i=n.parser||Afe;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new pfe(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=fl(n,"open",function(){r.onopen(),e&&e()}),s=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},o=fl(n,"error",s);if(this._timeout!==!1){const a=this._timeout,l=this.setTimeoutFn(()=>{i(),s(new Error("timeout")),n.close()},a);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(i),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(fl(e,"ping",this.onping.bind(this)),fl(e,"data",this.ondata.bind(this)),fl(e,"error",this.onerror.bind(this)),fl(e,"close",this.onclose.bind(this)),fl(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){lC(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new VG(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const oy={};function N2(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=mfe(t,e.path||"/socket.io"),r=n.source,i=n.id,s=n.path,o=oy[i]&&s in oy[i].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let l;return a?l=new UE(r,e):(oy[i]||(oy[i]=new UE(r,e)),l=oy[i]),n.query&&!e.query&&(e.query=n.queryKey),l.socket(n.path,e)}Object.assign(N2,{Manager:UE,Socket:VG,io:N2,connect:N2});let _fe={data:""},Efe=t=>{if(typeof window=="object"){let e=(t?t.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return e.nonce=window.__nonce__,e.parentNode||(t||document.head).appendChild(e),e.firstChild}return t||_fe},Tfe=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,$fe=/\/\*[^]*?\*\/|  +/g,b6=/\n+/g,wd=(t,e)=>{let n="",r="",i="";for(let s in t){let o=t[s];s[0]=="@"?s[1]=="i"?n=s+" "+o+";":r+=s[1]=="f"?wd(o,s):s+"{"+wd(o,s[1]=="k"?"":e)+"}":typeof o=="object"?r+=wd(o,e?e.replace(/([^,])+/g,a=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):s):o!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=wd.p?wd.p(s,o):s+":"+o+";")}return n+(e&&i?e+"{"+i+"}":i)+r},qc={},WG=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+WG(t[n]);return e}return t},Pfe=(t,e,n,r,i)=>{let s=WG(t),o=qc[s]||(qc[s]=(l=>{let c=0,u=11;for(;c<l.length;)u=101*u+l.charCodeAt(c++)>>>0;return"go"+u})(s));if(!qc[o]){let l=s!==t?t:(c=>{let u,d,h=[{}];for(;u=Tfe.exec(c.replace($fe,""));)u[4]?h.shift():u[3]?(d=u[3].replace(b6," ").trim(),h.unshift(h[0][d]=h[0][d]||{})):h[0][u[1]]=u[2].replace(b6," ").trim();return h[0]})(t);qc[o]=wd(i?{["@keyframes "+o]:l}:l,n?"":"."+o)}let a=n&&qc.g?qc.g:null;return n&&(qc.g=qc[o]),((l,c,u,d)=>{d?c.data=c.data.replace(d,l):c.data.indexOf(l)===-1&&(c.data=u?l+c.data:c.data+l)})(qc[o],e,r,a),o},Rfe=(t,e,n)=>t.reduce((r,i,s)=>{let o=e[s];if(o&&o.call){let a=o(n),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=l?"."+l:a&&typeof a=="object"?a.props?"":wd(a,""):a===!1?"":a}return r+i+(o??"")},"");function uC(t){let e=this||{},n=t.call?t(e.p):t;return Pfe(n.unshift?n.raw?Rfe(n,[].slice.call(arguments,1),e.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):n,Efe(e.target),e.g,e.o,e.k)}let GG,VE,WE;uC.bind({g:1});let vu=uC.bind({k:1});function Ofe(t,e,n,r){wd.p=e,GG=t,VE=n,WE=r}function fh(t,e){let n=this||{};return function(){let r=arguments;function i(s,o){let a=Object.assign({},s),l=a.className||i.className;n.p=Object.assign({theme:VE&&VE()},a),n.o=/ *go\d+/.test(l),a.className=uC.apply(n,r)+(l?" "+l:""),e&&(a.ref=o);let c=t;return t[0]&&(c=a.as||t,delete a.as),WE&&c[0]&&WE(a),GG(c,a)}return e?e(i):i}}var Dfe=t=>typeof t=="function",pk=(t,e)=>Dfe(t)?t(e):t,Lfe=(()=>{let t=0;return()=>(++t).toString()})(),qG=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),Mfe=20,bP="default",HG=(t,e)=>{let{toastLimit:n}=t.settings;switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,n)};case 1:return{...t,toasts:t.toasts.map(o=>o.id===e.toast.id?{...o,...e.toast}:o)};case 2:let{toast:r}=e;return HG(t,{type:t.toasts.find(o=>o.id===r.id)?1:0,toast:r});case 3:let{toastId:i}=e;return{...t,toasts:t.toasts.map(o=>o.id===i||i===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(o=>o.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let s=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+s}))}}},A2=[],KG={toasts:[],pausedAt:void 0,settings:{toastLimit:Mfe}},ic={},XG=(t,e=bP)=>{ic[e]=HG(ic[e]||KG,t),A2.forEach(([n,r])=>{n===e&&r(ic[e])})},YG=t=>Object.keys(ic).forEach(e=>XG(t,e)),Ffe=t=>Object.keys(ic).find(e=>ic[e].toasts.some(n=>n.id===t)),dC=(t=bP)=>e=>{XG(e,t)},jfe={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Bfe=(t={},e=bP)=>{let[n,r]=N.useState(ic[e]||KG),i=N.useRef(ic[e]);N.useEffect(()=>(i.current!==ic[e]&&r(ic[e]),A2.push([e,r]),()=>{let o=A2.findIndex(([a])=>a===e);o>-1&&A2.splice(o,1)}),[e]);let s=n.toasts.map(o=>{var a,l,c;return{...t,...t[o.type],...o,removeDelay:o.removeDelay||((a=t[o.type])==null?void 0:a.removeDelay)||(t==null?void 0:t.removeDelay),duration:o.duration||((l=t[o.type])==null?void 0:l.duration)||(t==null?void 0:t.duration)||jfe[o.type],style:{...t.style,...(c=t[o.type])==null?void 0:c.style,...o.style}}});return{...n,toasts:s}},zfe=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||Lfe()}),vv=t=>(e,n)=>{let r=zfe(e,t,n);return dC(r.toasterId||Ffe(r.id))({type:2,toast:r}),r.id},Xn=(t,e)=>vv("blank")(t,e);Xn.error=vv("error");Xn.success=vv("success");Xn.loading=vv("loading");Xn.custom=vv("custom");Xn.dismiss=(t,e)=>{let n={type:3,toastId:t};e?dC(e)(n):YG(n)};Xn.dismissAll=t=>Xn.dismiss(void 0,t);Xn.remove=(t,e)=>{let n={type:4,toastId:t};e?dC(e)(n):YG(n)};Xn.removeAll=t=>Xn.remove(void 0,t);Xn.promise=(t,e,n)=>{let r=Xn.loading(e.loading,{...n,...n==null?void 0:n.loading});return typeof t=="function"&&(t=t()),t.then(i=>{let s=e.success?pk(e.success,i):void 0;return s?Xn.success(s,{id:r,...n,...n==null?void 0:n.success}):Xn.dismiss(r),i}).catch(i=>{let s=e.error?pk(e.error,i):void 0;s?Xn.error(s,{id:r,...n,...n==null?void 0:n.error}):Xn.dismiss(r)}),t};var Ufe=1e3,Vfe=(t,e="default")=>{let{toasts:n,pausedAt:r}=Bfe(t,e),i=N.useRef(new Map).current,s=N.useCallback((d,h=Ufe)=>{if(i.has(d))return;let f=setTimeout(()=>{i.delete(d),o({type:4,toastId:d})},h);i.set(d,f)},[]);N.useEffect(()=>{if(r)return;let d=Date.now(),h=n.map(f=>{if(f.duration===1/0)return;let p=(f.duration||0)+f.pauseDuration-(d-f.createdAt);if(p<0){f.visible&&Xn.dismiss(f.id);return}return setTimeout(()=>Xn.dismiss(f.id,e),p)});return()=>{h.forEach(f=>f&&clearTimeout(f))}},[n,r,e]);let o=N.useCallback(dC(e),[e]),a=N.useCallback(()=>{o({type:5,time:Date.now()})},[o]),l=N.useCallback((d,h)=>{o({type:1,toast:{id:d,height:h}})},[o]),c=N.useCallback(()=>{r&&o({type:6,time:Date.now()})},[r,o]),u=N.useCallback((d,h)=>{let{reverseOrder:f=!1,gutter:p=8,defaultPosition:m}=h||{},y=n.filter(x=>(x.position||m)===(d.position||m)&&x.height),g=y.findIndex(x=>x.id===d.id),v=y.filter((x,b)=>b<g&&x.visible).length;return y.filter(x=>x.visible).slice(...f?[v+1]:[0,v]).reduce((x,b)=>x+(b.height||0)+p,0)},[n]);return N.useEffect(()=>{n.forEach(d=>{if(d.dismissed)s(d.id,d.removeDelay);else{let h=i.get(d.id);h&&(clearTimeout(h),i.delete(d.id))}})},[n,s]),{toasts:n,handlers:{updateHeight:l,startPause:a,endPause:c,calculateOffset:u}}},Wfe=vu`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Gfe=vu`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,qfe=vu`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Hfe=fh("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Wfe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Gfe} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${qfe} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Kfe=vu`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Xfe=fh("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${Kfe} 1s linear infinite;
`,Yfe=vu`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Zfe=vu`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Jfe=fh("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Yfe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Zfe} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Qfe=fh("div")`
  position: absolute;
`,epe=fh("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,tpe=vu`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,npe=fh("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${tpe} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,rpe=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?N.createElement(npe,null,e):e:n==="blank"?null:N.createElement(epe,null,N.createElement(Xfe,{...r}),n!=="loading"&&N.createElement(Qfe,null,n==="error"?N.createElement(Hfe,{...r}):N.createElement(Jfe,{...r})))},ipe=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,spe=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,ope="0%{opacity:0;} 100%{opacity:1;}",ape="0%{opacity:1;} 100%{opacity:0;}",lpe=fh("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,cpe=fh("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,upe=(t,e)=>{let n=t.includes("top")?1:-1,[r,i]=qG()?[ope,ape]:[ipe(n),spe(n)];return{animation:e?`${vu(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${vu(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},dpe=N.memo(({toast:t,position:e,style:n,children:r})=>{let i=t.height?upe(t.position||e||"top-center",t.visible):{opacity:0},s=N.createElement(rpe,{toast:t}),o=N.createElement(cpe,{...t.ariaProps},pk(t.message,t));return N.createElement(lpe,{className:t.className,style:{...i,...n,...t.style}},typeof r=="function"?r({icon:s,message:o}):N.createElement(N.Fragment,null,s,o))});Ofe(N.createElement);var hpe=({id:t,className:e,style:n,onHeightUpdate:r,children:i})=>{let s=N.useCallback(o=>{if(o){let a=()=>{let l=o.getBoundingClientRect().height;r(t,l)};a(),new MutationObserver(a).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return N.createElement("div",{ref:s,className:e,style:n},i)},fpe=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},i=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:qG()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...i}},ppe=uC`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,pw=16,mpe=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:i,toasterId:s,containerStyle:o,containerClassName:a})=>{let{toasts:l,handlers:c}=Vfe(n,s);return N.createElement("div",{"data-rht-toaster":s||"",style:{position:"fixed",zIndex:9999,top:pw,left:pw,right:pw,bottom:pw,pointerEvents:"none",...o},className:a,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(u=>{let d=u.position||e,h=c.calculateOffset(u,{reverseOrder:t,gutter:r,defaultPosition:e}),f=fpe(d,h);return N.createElement(hpe,{id:u.id,key:u.id,onHeightUpdate:c.updateHeight,className:u.visible?ppe:"",style:f},u.type==="custom"?pk(u.message,u):i?i(u):N.createElement(dpe,{toast:u,position:d}))}))},mw=Xn;const w6="http://localhost:3001",ZG=()=>{const[t,e]=N.useState([]),[n,r]=N.useState(!1),[i,s]=N.useState(null),[o,a]=N.useState(!1),l=N.useRef(null),c=N.useRef(null),u=async p=>{const m=await fetch(`${w6}${p}`);if(!m.ok)throw new Error(`API Error: ${m.status}`);return m.json()},d=N.useCallback(async()=>{r(!0),s(null);try{const[p,m,y,g]=await Promise.all([u("/api/ai/insights/overview"),u("/api/ai/insights/trends"),u("/api/ai/insights/risk"),u("/api/ai/insights/compliance")]),v=[...p.map(x=>({id:x.id||`overview-${x.category}`,category:x.category,title:x.title,value:x.value,trend:x.trend,icon:x.icon||"TrendingUp",color:x.color||"emerald",description:x.description})),...m.map(x=>({id:x.id||`trend-${x.category}`,category:x.category,title:x.title,value:x.value,trend:x.trend,icon:x.icon||"Activity",color:x.color||"blue",description:x.description})),...y.map(x=>({id:x.id||`risk-${x.category}`,category:x.category,title:x.title,value:x.value,trend:x.trend,icon:x.icon||"Shield",color:x.color||"green",description:x.description})),...g.map(x=>({id:x.id||`compliance-${x.category}`,category:x.category,title:x.title,value:x.value,trend:x.trend,icon:x.icon||"Award",color:x.color||"purple",description:x.description}))];e(v),a(!0),n||mw.success("Data refreshed successfully")}catch(p){console.error("Failed to fetch insights:",p),s(p.message||"Failed to load insights"),e([{id:"1",category:"workflow",title:"Workflow Efficiency",value:"87%",trend:12,icon:"TrendingUp",color:"emerald",description:"Workflow completion rate improved by 12% this month"},{id:"2",category:"risk",title:"Risk Score",value:"Low",trend:-5,icon:"Shield",color:"green",description:"Overall risk decreased by 5%"},{id:"3",category:"document",title:"Documents Processed",value:"1,247",trend:8,icon:"FileText",color:"blue",description:"8% increase in document processing"},{id:"4",category:"permit",title:"Permit Approvals",value:"94%",trend:3,icon:"CheckCircle",color:"purple",description:"Permit approval rate increased by 3%"},{id:"5",category:"workflow",title:"Avg. Processing Time",value:"2.3 days",trend:-15,icon:"Clock",color:"orange",description:"Processing time reduced by 15%"},{id:"6",category:"risk",title:"Compliance Score",value:"98%",trend:2,icon:"Award",color:"emerald",description:"Compliance improved by 2%"}]),a(!1)}finally{r(!1)}},[n]),h=N.useCallback(()=>(l.current&&l.current.disconnect(),l.current=N2(w6,{transports:["websocket","polling"]}),l.current.on("connect",()=>{console.log("WebSocket connected"),a(!0)}),l.current.on("disconnect",()=>{console.log("WebSocket disconnected"),a(!1)}),l.current.on("insights_update",p=>{console.log("Received insights update:",p),e(m=>{const y=[...m],g=y.findIndex(v=>v.id===p.id);return g!==-1&&(y[g]={...y[g],...p}),y}),mw.success("Insights updated in real-time")}),l.current.on("risk_update",p=>{console.log("Received risk update:",p),e(m=>{const y=[...m];return y.filter(v=>v.category==="risk").forEach(v=>{const x=y.findIndex(b=>b.id===v.id);x!==-1&&(y[x]={...y[x],...p})}),y}),mw.success("Risk data updated")}),l.current.on("workflow_update",p=>{console.log("Received workflow update:",p),e(m=>{const y=[...m];return y.filter(v=>v.category==="workflow").forEach(v=>{const x=y.findIndex(b=>b.id===v.id);x!==-1&&(y[x]={...y[x],...p})}),y}),mw.success("Workflow data updated")}),l.current.on("error",p=>{console.error("WebSocket error:",p),s("WebSocket connection failed")}),()=>{l.current&&l.current.disconnect()}),[]),f=N.useCallback(()=>(c.current&&clearInterval(c.current),c.current=setInterval(()=>{d()},3e4),()=>{c.current&&clearInterval(c.current)}),[d]);return N.useEffect(()=>{d();const p=h(),m=f();return()=>{p(),m()}},[d,h,f]),{insights:t,isLoading:n,error:i,refresh:d,isLive:o}},gpe=()=>{const{request:t,uploadFile:e,loading:n,error:r,backendStatus:i,checkHealth:s}=AG(),{theme:o,toggleTheme:a}=Ode(),[l,c]=N.useState([]),[u,d]=N.useState(""),[h,f]=N.useState(!1);N.useEffect(()=>{(async()=>{await s(),f(!0)})()},[s]);const p=async()=>{if(!u.trim())return;const b={role:"user",content:u};c(T=>[...T,b]),d("");const S=u.toLowerCase();if(S.includes("efficiency")||S.includes("performance")||S.includes("risk")||S.includes("safety")||S.includes("maintenance")||S.includes("compliance")||S.includes("recommend")||S.includes("suggest")||S.includes("what should")||S.includes("how to"))try{const{insights:T}=ZG(),$=await TG({insights:T,trend:"up",confidence:.85}),R=Ohe($,S);if(R.length>0){const F=x(R);c(L=>[...L,{role:"assistant",content:F,type:"recommendations"}]);return}}catch(T){console.warn("Failed to generate recommendations:",T)}let A,E="document/analyze";S.includes("risk")||S.includes("safety")?E="risk/assess":S.includes("permit")||S.includes("approval")?E="permit/recommend":(S.includes("delegate")||S.includes("assign"))&&(E="delegation/recommend"),A=await t(E,{text:u});const I=(A==null?void 0:A.summary)||(A==null?void 0:A.recommendation)||(A==null?void 0:A.message)||"No response received from AI service.";c(T=>[...T,{role:"assistant",content:I}])},m=async b=>{const S={role:"user",content:`Uploaded file: ${b.name} (${(b.size/1024/1024).toFixed(2)} MB)`,type:"file"};c(E=>[...E,S]);const A=await e(b);if(A){const E=A.summary||A.analysis||"File analysis completed successfully.";c(I=>[...I,{role:"assistant",content:E}])}else c(E=>[...E,{role:"assistant",content:"Failed to analyze the uploaded file. Please try again or check if the backend service is running."}])},y=b=>{b.key==="Enter"&&!b.shiftKey&&(b.preventDefault(),p())},g=()=>{switch(i){case"healthy":return"bg-green-500";case"unhealthy":return"bg-red-500";default:return"bg-yellow-500"}},v=()=>{switch(i){case"healthy":return"Connected";case"unhealthy":return"Disconnected";default:return"Checking..."}},x=b=>{if(!b||b.length===0)return"I don't have any specific recommendations based on your current data. Please check back later or provide more context.";let S=`Based on your operational data, here are my recommendations:

`;return b.forEach(A=>{S+=`**${A.category}** (${A.confidence}% confidence)
`,S+=`${A.text}
`,A.reasoning&&(S+=`*Reasoning: ${A.reasoning}*
`),S+=`
`}),S+="You can execute these actions directly from the dashboard or ask me for more details about any specific recommendation.",S};return k.jsxs("div",{className:`flex flex-col h-full p-6 rounded-3xl mx-auto max-w-4xl w-full transition-all duration-500 ${o==="dark"?"bg-gradient-to-br from-gray-900 via-slate-800 to-black text-white shadow-2xl shadow-blue-900/20":"bg-white/80 backdrop-blur-md text-gray-900 shadow-2xl shadow-blue-500/10 border border-white/20"}`,children:[k.jsxs("div",{className:"flex items-center justify-between mb-6",children:[k.jsxs("div",{className:"flex items-center space-x-3",children:[k.jsx("div",{className:"text-2xl",children:"🤖"}),k.jsxs("div",{children:[k.jsx("h2",{className:"text-xl font-bold",children:"Mbarie FMS AI Copilot"}),k.jsxs("div",{className:"flex items-center space-x-2 text-sm opacity-75",children:[k.jsx("div",{className:`w-2 h-2 rounded-full ${g()} animate-pulse`}),k.jsx("span",{children:v()}),!h&&k.jsx("span",{className:"animate-pulse",children:"• Checking connection..."})]})]})]}),k.jsx("button",{onClick:a,className:`p-3 rounded-full transition-all duration-300 hover:scale-110 ${o==="dark"?"bg-gray-700 hover:bg-gray-600 text-yellow-300":"bg-gray-200 hover:bg-gray-300 text-gray-700"}`,title:`Switch to ${o==="dark"?"light":"dark"} mode`,children:o==="dark"?"🌞":"🌙"})]}),r&&k.jsxs("div",{className:`mb-4 p-4 rounded-xl border transition-all duration-300 ${o==="dark"?"bg-red-900/20 border-red-700 text-red-200":"bg-red-50 border-red-200 text-red-800"}`,children:[k.jsxs("div",{className:"flex items-center justify-between",children:[k.jsx("span",{className:"font-medium",children:"Connection Issue"}),k.jsx("button",{onClick:()=>window.location.reload(),className:"text-sm underline hover:no-underline",children:"Retry"})]}),k.jsx("p",{className:"text-sm mt-1 opacity-90",children:r})]}),k.jsxs("div",{className:`flex-1 overflow-y-auto rounded-2xl p-6 mb-4 transition-all duration-300 ${o==="dark"?"bg-gray-800/40 backdrop-blur-sm border border-gray-700/50":"bg-gray-50/80 backdrop-blur-sm border border-gray-200/50"}`,children:[l.length===0&&k.jsxs("div",{className:"text-center py-12",children:[k.jsx("div",{className:"text-4xl mb-4 opacity-50",children:"💬"}),k.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Welcome to Mbarie AI Copilot"}),k.jsx("p",{className:`text-sm max-w-md mx-auto leading-relaxed ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:"Ask me about permits, risk assessments, delegation recommendations, or upload documents for AI analysis. I'm here to help with your facility management needs."})]}),l.map((b,S)=>k.jsx(The,{role:b.role,content:b.content},S)),n&&k.jsxs("div",{className:"flex items-center space-x-2 text-sm opacity-75 mt-4",children:[k.jsxs("div",{className:"flex space-x-1",children:[k.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce"}),k.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),k.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),k.jsx("span",{children:"AI is thinking..."})]})]}),k.jsxs("div",{className:"flex items-end space-x-3",children:[k.jsx("div",{className:"flex-1",children:k.jsx("input",{value:u,onChange:b=>d(b.target.value),onKeyPress:y,placeholder:"Ask about permits, risks, delegations, or upload documents...",className:`w-full p-4 rounded-2xl border transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500/50 ${o==="dark"?"bg-gray-800/60 border-gray-600 text-white placeholder-gray-400":"bg-white/90 border-gray-300 text-gray-900 placeholder-gray-500"}`,disabled:n})}),k.jsxs("div",{className:"flex space-x-2",children:[k.jsx(Ehe,{onFileUpload:m}),k.jsx(xhe,{onResult:d}),k.jsx("button",{onClick:p,disabled:n||!u.trim(),className:`px-6 py-4 rounded-2xl font-medium transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed ${o==="dark"?"bg-blue-600 hover:bg-blue-500 text-white disabled:hover:bg-blue-600":"bg-blue-600 hover:bg-blue-700 text-white disabled:hover:bg-blue-600"}`,children:"Send"})]})]}),k.jsx("div",{className:`mt-4 text-xs text-center transition-colors duration-300 ${o==="dark"?"text-gray-500":"text-gray-400"}`,children:"Powered by Mbarie FMS AI • Phase 7.2 Enhanced Experience"})]})};function k6(){return k.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 p-4",children:k.jsx(gpe,{})})}const wP=N.createContext({});function kP(t){const e=N.useRef(null);return e.current===null&&(e.current=t()),e.current}const SP=typeof window<"u",JG=SP?N.useLayoutEffect:N.useEffect,hC=N.createContext(null);function CP(t,e){t.indexOf(e)===-1&&t.push(e)}function NP(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const xu=(t,e,n)=>n>e?e:n<t?t:n;let AP=()=>{};const bu={},QG=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function eq(t){return typeof t=="object"&&t!==null}const tq=t=>/^0[^.\s]+$/u.test(t);function IP(t){let e;return()=>(e===void 0&&(e=t()),e)}const Ma=t=>t,ype=(t,e)=>n=>e(t(n)),xv=(...t)=>t.reduce(ype),_1=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class _P{constructor(){this.subscriptions=[]}add(e){return CP(this.subscriptions,e),()=>NP(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const dc=t=>t*1e3,Ea=t=>t/1e3;function nq(t,e){return e?t*(1e3/e):0}const rq=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,vpe=1e-7,xpe=12;function bpe(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=rq(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>vpe&&++a<xpe);return o}function bv(t,e,n,r){if(t===e&&n===r)return Ma;const i=s=>bpe(s,0,1,t,n);return s=>s===0||s===1?s:rq(i(s),e,r)}const iq=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,sq=t=>e=>1-t(1-e),oq=bv(.33,1.53,.69,.99),EP=sq(oq),aq=iq(EP),lq=t=>(t*=2)<1?.5*EP(t):.5*(2-Math.pow(2,-10*(t-1))),TP=t=>1-Math.sin(Math.acos(t)),cq=sq(TP),uq=iq(TP),wpe=bv(.42,0,1,1),kpe=bv(0,0,.58,1),dq=bv(.42,0,.58,1),Spe=t=>Array.isArray(t)&&typeof t[0]!="number",hq=t=>Array.isArray(t)&&typeof t[0]=="number",Cpe={linear:Ma,easeIn:wpe,easeInOut:dq,easeOut:kpe,circIn:TP,circInOut:uq,circOut:cq,backIn:EP,backInOut:aq,backOut:oq,anticipate:lq},Npe=t=>typeof t=="string",S6=t=>{if(hq(t)){AP(t.length===4);const[e,n,r,i]=t;return bv(e,n,r,i)}else if(Npe(t))return Cpe[t];return t},gw=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],C6={value:null,addProjectionMetrics:null};function Ape(t,e){let n=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1},l=0;function c(d){o.has(d)&&(u.schedule(d),t()),l++,d(a)}const u={schedule:(d,h=!1,f=!1)=>{const m=f&&i?n:r;return h&&o.add(d),m.has(d)||m.add(d),d},cancel:d=>{r.delete(d),o.delete(d)},process:d=>{if(a=d,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(c),e&&C6.value&&C6.value.frameloop[e].push(l),l=0,n.clear(),i=!1,s&&(s=!1,u.process(d))}};return u}const Ipe=40;function fq(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=gw.reduce((x,b)=>(x[b]=Ape(s,e?b:void 0),x),{}),{setup:a,read:l,resolveKeyframes:c,preUpdate:u,update:d,preRender:h,render:f,postRender:p}=o,m=()=>{const x=bu.useManualTiming?i.timestamp:performance.now();n=!1,bu.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(x-i.timestamp,Ipe),1)),i.timestamp=x,i.isProcessing=!0,a.process(i),l.process(i),c.process(i),u.process(i),d.process(i),h.process(i),f.process(i),p.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(m))},y=()=>{n=!0,r=!0,i.isProcessing||t(m)};return{schedule:gw.reduce((x,b)=>{const S=o[b];return x[b]=(A,E=!1,I=!1)=>(n||y(),S.schedule(A,E,I)),x},{}),cancel:x=>{for(let b=0;b<gw.length;b++)o[gw[b]].cancel(x)},state:i,steps:o}}const{schedule:dr,cancel:Yd,state:es,steps:aI}=fq(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ma,!0);let I2;function _pe(){I2=void 0}const fo={now:()=>(I2===void 0&&fo.set(es.isProcessing||bu.useManualTiming?es.timestamp:performance.now()),I2),set:t=>{I2=t,queueMicrotask(_pe)}},pq=t=>e=>typeof e=="string"&&e.startsWith(t),$P=pq("--"),Epe=pq("var(--"),PP=t=>Epe(t)?Tpe.test(t.split("/*")[0].trim()):!1,Tpe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ug={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},E1={...Ug,transform:t=>xu(0,1,t)},yw={...Ug,default:1},Zy=t=>Math.round(t*1e5)/1e5,RP=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function $pe(t){return t==null}const Ppe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,OP=(t,e)=>n=>!!(typeof n=="string"&&Ppe.test(n)&&n.startsWith(t)||e&&!$pe(n)&&Object.prototype.hasOwnProperty.call(n,e)),mq=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(RP);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},Rpe=t=>xu(0,255,t),lI={...Ug,transform:t=>Math.round(Rpe(t))},bf={test:OP("rgb","red"),parse:mq("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+lI.transform(t)+", "+lI.transform(e)+", "+lI.transform(n)+", "+Zy(E1.transform(r))+")"};function Ope(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const GE={test:OP("#"),parse:Ope,transform:bf.transform},wv=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),fd=wv("deg"),hc=wv("%"),Pt=wv("px"),Dpe=wv("vh"),Lpe=wv("vw"),N6=(()=>({...hc,parse:t=>hc.parse(t)/100,transform:t=>hc.transform(t*100)}))(),Nm={test:OP("hsl","hue"),parse:mq("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+hc.transform(Zy(e))+", "+hc.transform(Zy(n))+", "+Zy(E1.transform(r))+")"},ni={test:t=>bf.test(t)||GE.test(t)||Nm.test(t),parse:t=>bf.test(t)?bf.parse(t):Nm.test(t)?Nm.parse(t):GE.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?bf.transform(t):Nm.transform(t),getAnimatableNone:t=>{const e=ni.parse(t);return e.alpha=0,ni.transform(e)}},Mpe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Fpe(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(RP))==null?void 0:e.length)||0)+(((n=t.match(Mpe))==null?void 0:n.length)||0)>0}const gq="number",yq="color",jpe="var",Bpe="var(",A6="${}",zpe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function T1(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(zpe,l=>(ni.test(l)?(r.color.push(s),i.push(yq),n.push(ni.parse(l))):l.startsWith(Bpe)?(r.var.push(s),i.push(jpe),n.push(l)):(r.number.push(s),i.push(gq),n.push(parseFloat(l))),++s,A6)).split(A6);return{values:n,split:a,indexes:r,types:i}}function vq(t){return T1(t).values}function xq(t){const{split:e,types:n}=T1(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===gq?s+=Zy(i[o]):a===yq?s+=ni.transform(i[o]):s+=i[o]}return s}}const Upe=t=>typeof t=="number"?0:ni.test(t)?ni.getAnimatableNone(t):t;function Vpe(t){const e=vq(t);return xq(t)(e.map(Upe))}const Zd={test:Fpe,parse:vq,createTransformer:xq,getAnimatableNone:Vpe};function cI(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Wpe({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=cI(l,a,t+1/3),s=cI(l,a,t),o=cI(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function mk(t,e){return n=>n>0?e:t}const br=(t,e,n)=>t+(e-t)*n,uI=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},Gpe=[GE,bf,Nm],qpe=t=>Gpe.find(e=>e.test(t));function I6(t){const e=qpe(t);if(!e)return!1;let n=e.parse(t);return e===Nm&&(n=Wpe(n)),n}const _6=(t,e)=>{const n=I6(t),r=I6(e);if(!n||!r)return mk(t,e);const i={...n};return s=>(i.red=uI(n.red,r.red,s),i.green=uI(n.green,r.green,s),i.blue=uI(n.blue,r.blue,s),i.alpha=br(n.alpha,r.alpha,s),bf.transform(i))},qE=new Set(["none","hidden"]);function Hpe(t,e){return qE.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function Kpe(t,e){return n=>br(t,e,n)}function DP(t){return typeof t=="number"?Kpe:typeof t=="string"?PP(t)?mk:ni.test(t)?_6:Zpe:Array.isArray(t)?bq:typeof t=="object"?ni.test(t)?_6:Xpe:mk}function bq(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>DP(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function Xpe(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=DP(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function Ype(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],o=t.indexes[s][r[s]],a=t.values[o]??0;n[i]=a,r[s]++}return n}const Zpe=(t,e)=>{const n=Zd.createTransformer(e),r=T1(t),i=T1(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?qE.has(t)&&!i.values.length||qE.has(e)&&!r.values.length?Hpe(t,e):xv(bq(Ype(r,i),i.values),n):mk(t,e)};function wq(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?br(t,e,n):DP(t)(t,e)}const Jpe=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>dr.update(e,n),stop:()=>Yd(e),now:()=>es.isProcessing?es.timestamp:fo.now()}},kq=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=Math.round(t(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},gk=2e4;function LP(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<gk;)e+=n,r=t.next(e);return e>=gk?1/0:e}function Qpe(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(LP(r),gk);return{type:"keyframes",ease:s=>r.next(i*s).value/e,duration:Ea(i)}}const eme=5;function Sq(t,e,n){const r=Math.max(e-eme,0);return nq(n-t(r),e-r)}const Er={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},dI=.001;function tme({duration:t=Er.duration,bounce:e=Er.bounce,velocity:n=Er.velocity,mass:r=Er.mass}){let i,s,o=1-e;o=xu(Er.minDamping,Er.maxDamping,o),t=xu(Er.minDuration,Er.maxDuration,Ea(t)),o<1?(i=c=>{const u=c*o,d=u*t,h=u-n,f=HE(c,o),p=Math.exp(-d);return dI-h/f*p},s=c=>{const d=c*o*t,h=d*n+n,f=Math.pow(o,2)*Math.pow(c,2)*t,p=Math.exp(-d),m=HE(Math.pow(c,2),o);return(-i(c)+dI>0?-1:1)*((h-f)*p)/m}):(i=c=>{const u=Math.exp(-c*t),d=(c-n)*t+1;return-dI+u*d},s=c=>{const u=Math.exp(-c*t),d=(n-c)*(t*t);return u*d});const a=5/t,l=rme(i,s,a);if(t=dc(t),isNaN(l))return{stiffness:Er.stiffness,damping:Er.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const nme=12;function rme(t,e,n){let r=n;for(let i=1;i<nme;i++)r=r-t(r)/e(r);return r}function HE(t,e){return t*Math.sqrt(1-e*e)}const ime=["duration","bounce"],sme=["stiffness","damping","mass"];function E6(t,e){return e.some(n=>t[n]!==void 0)}function ome(t){let e={velocity:Er.velocity,stiffness:Er.stiffness,damping:Er.damping,mass:Er.mass,isResolvedFromDuration:!1,...t};if(!E6(t,sme)&&E6(t,ime))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*xu(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Er.mass,stiffness:i,damping:s}}else{const n=tme(t);e={...e,...n,mass:Er.mass},e.isResolvedFromDuration=!0}return e}function yk(t=Er.visualDuration,e=Er.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:d,velocity:h,isResolvedFromDuration:f}=ome({...n,velocity:-Ea(n.velocity||0)}),p=h||0,m=c/(2*Math.sqrt(l*u)),y=o-s,g=Ea(Math.sqrt(l/u)),v=Math.abs(y)<5;r||(r=v?Er.restSpeed.granular:Er.restSpeed.default),i||(i=v?Er.restDelta.granular:Er.restDelta.default);let x;if(m<1){const S=HE(g,m);x=A=>{const E=Math.exp(-m*g*A);return o-E*((p+m*g*y)/S*Math.sin(S*A)+y*Math.cos(S*A))}}else if(m===1)x=S=>o-Math.exp(-g*S)*(y+(p+g*y)*S);else{const S=g*Math.sqrt(m*m-1);x=A=>{const E=Math.exp(-m*g*A),I=Math.min(S*A,300);return o-E*((p+m*g*y)*Math.sinh(I)+S*y*Math.cosh(I))/S}}const b={calculatedDuration:f&&d||null,next:S=>{const A=x(S);if(f)a.done=S>=d;else{let E=S===0?p:0;m<1&&(E=S===0?dc(p):Sq(x,S,A));const I=Math.abs(E)<=r,T=Math.abs(o-A)<=i;a.done=I&&T}return a.value=a.done?o:A,a},toString:()=>{const S=Math.min(LP(b),gk),A=kq(E=>b.next(S*E).value,S,30);return S+"ms "+A},toTransition:()=>{}};return b}yk.applyToOptions=t=>{const e=Qpe(t,100,yk);return t.ease=e.ease,t.duration=dc(e.duration),t.type="keyframes",t};function KE({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const d=t[0],h={done:!1,value:d},f=I=>a!==void 0&&I<a||l!==void 0&&I>l,p=I=>a===void 0?l:l===void 0||Math.abs(a-I)<Math.abs(l-I)?a:l;let m=n*e;const y=d+m,g=o===void 0?y:o(y);g!==y&&(m=g-d);const v=I=>-m*Math.exp(-I/r),x=I=>g+v(I),b=I=>{const T=v(I),O=x(I);h.done=Math.abs(T)<=c,h.value=h.done?g:O};let S,A;const E=I=>{f(h.value)&&(S=I,A=yk({keyframes:[h.value,p(h.value)],velocity:Sq(x,I,h.value),damping:i,stiffness:s,restDelta:c,restSpeed:u}))};return E(0),{calculatedDuration:null,next:I=>{let T=!1;return!A&&S===void 0&&(T=!0,b(I),E(I)),S!==void 0&&I>=S?A.next(I-S):(!T&&b(I),h)}}}function ame(t,e,n){const r=[],i=n||bu.mix||wq,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Ma:e;a=xv(l,a)}r.push(a)}return r}function lme(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(AP(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=ame(e,r,i),l=a.length,c=u=>{if(o&&u<t[0])return e[0];let d=0;if(l>1)for(;d<t.length-2&&!(u<t[d+1]);d++);const h=_1(t[d],t[d+1],u);return a[d](h)};return n?u=>c(xu(t[0],t[s-1],u)):c}function cme(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=_1(0,e,r);t.push(br(n,1,i))}}function ume(t){const e=[0];return cme(e,t.length-1),e}function dme(t,e){return t.map(n=>n*e)}function hme(t,e){return t.map(()=>e||dq).splice(0,t.length-1)}function Jy({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=Spe(r)?r.map(S6):S6(r),s={done:!1,value:e[0]},o=dme(n&&n.length===e.length?n:ume(e),t),a=lme(o,e,{ease:Array.isArray(i)?i:hme(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const fme=t=>t!==null;function MP(t,{repeat:e,repeatType:n="loop"},r,i=1){const s=t.filter(fme),a=i<0||e&&n!=="loop"&&e%2===1?0:s.length-1;return!a||r===void 0?s[a]:r}const pme={decay:KE,inertia:KE,tween:Jy,keyframes:Jy,spring:yk};function Cq(t){typeof t.type=="string"&&(t.type=pme[t.type])}class FP{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const mme=t=>t/100;class jP extends FP{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==fo.now()&&this.tick(fo.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;Cq(e);const{type:n=Jy,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=e;let{keyframes:a}=e;const l=n||Jy;l!==Jy&&typeof a[0]!="number"&&(this.mixKeyframes=xv(mme,wq(a[0],a[1])),a=[0,100]);const c=l({...e,keyframes:a});s==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...a].reverse(),velocity:-o})),c.calculatedDuration===null&&(c.calculatedDuration=LP(c));const{calculatedDuration:u}=c;this.calculatedDuration=u,this.resolvedDuration=u+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=c}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:c=0,keyframes:u,repeat:d,repeatType:h,repeatDelay:f,type:p,onUpdate:m,finalKeyframe:y}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const g=this.currentTime-c*(this.playbackSpeed>=0?1:-1),v=this.playbackSpeed>=0?g<0:g>i;this.currentTime=Math.max(g,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let x=this.currentTime,b=r;if(d){const I=Math.min(this.currentTime,i)/a;let T=Math.floor(I),O=I%1;!O&&I>=1&&(O=1),O===1&&T--,T=Math.min(T,d+1),!!(T%2)&&(h==="reverse"?(O=1-O,f&&(O-=f/a)):h==="mirror"&&(b=o)),x=xu(0,1,O)*a}const S=v?{done:!1,value:u[0]}:b.next(x);s&&(S.value=s(S.value));let{done:A}=S;!v&&l!==null&&(A=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const E=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&A);return E&&p!==KE&&(S.value=MP(u,this.options,y,this.speed)),m&&m(S.value),E&&this.finish(),S}then(e,n){return this.finished.then(e,n)}get duration(){return Ea(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Ea(e)}get time(){return Ea(this.currentTime)}set time(e){var n;e=dc(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(fo.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Ea(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:e=Jpe,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(s=(i=this.options).onPlay)==null||s.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(fo.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function gme(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const wf=t=>t*180/Math.PI,XE=t=>{const e=wf(Math.atan2(t[1],t[0]));return YE(e)},yme={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:XE,rotateZ:XE,skewX:t=>wf(Math.atan(t[1])),skewY:t=>wf(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},YE=t=>(t=t%360,t<0&&(t+=360),t),T6=XE,$6=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),P6=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),vme={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:$6,scaleY:P6,scale:t=>($6(t)+P6(t))/2,rotateX:t=>YE(wf(Math.atan2(t[6],t[5]))),rotateY:t=>YE(wf(Math.atan2(-t[2],t[0]))),rotateZ:T6,rotate:T6,skewX:t=>wf(Math.atan(t[4])),skewY:t=>wf(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function ZE(t){return t.includes("scale")?1:0}function JE(t,e){if(!t||t==="none")return ZE(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=vme,i=n;else{const a=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=yme,i=a}if(!i)return ZE(e);const s=r[e],o=i[1].split(",").map(bme);return typeof s=="function"?s(o):o[s]}const xme=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return JE(n,e)};function bme(t){return parseFloat(t.trim())}const Vg=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Wg=(()=>new Set(Vg))(),R6=t=>t===Ug||t===Pt,wme=new Set(["x","y","z"]),kme=Vg.filter(t=>!wme.has(t));function Sme(t){const e=[];return kme.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Rf={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>JE(e,"x"),y:(t,{transform:e})=>JE(e,"y")};Rf.translateX=Rf.x;Rf.translateY=Rf.y;const Of=new Set;let QE=!1,eT=!1,tT=!1;function Nq(){if(eT){const t=Array.from(Of).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=Sme(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))==null||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}eT=!1,QE=!1,Of.forEach(t=>t.complete(tT)),Of.clear()}function Aq(){Of.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(eT=!0)})}function Cme(){tT=!0,Aq(),Nq(),tT=!1}class BP{constructor(e,n,r,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Of.add(this),QE||(QE=!0,dr.read(Aq),dr.resolveKeyframes(Nq))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const s=i==null?void 0:i.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const a=r.readValue(n,o);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=o),i&&s===void 0&&i.set(e[0])}gme(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Of.delete(this)}cancel(){this.state==="scheduled"&&(Of.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Nme=t=>t.startsWith("--");function Ame(t,e,n){Nme(e)?t.style.setProperty(e,n):t.style[e]=n}const Ime=IP(()=>window.ScrollTimeline!==void 0),_me={};function Eme(t,e){const n=IP(t);return()=>_me[e]??n()}const Iq=Eme(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ty=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,O6={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ty([0,.65,.55,1]),circOut:Ty([.55,0,1,.45]),backIn:Ty([.31,.01,.66,-.59]),backOut:Ty([.33,1.53,.69,.99])};function _q(t,e){if(t)return typeof t=="function"?Iq()?kq(t,e):"ease-out":hq(t)?Ty(t):Array.isArray(t)?t.map(n=>_q(n,e)||O6.easeOut):O6[t]}function Tme(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeOut",times:l}={},c=void 0){const u={[e]:n};l&&(u.offset=l);const d=_q(a,i);Array.isArray(d)&&(u.easing=d);const h={delay:r,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return c&&(h.pseudoElement=c),t.animate(u,h)}function Eq(t){return typeof t=="function"&&"applyToOptions"in t}function $me({type:t,...e}){return Eq(t)&&Iq()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class Pme extends FP{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,AP(typeof e.type!="string");const c=$me(e);this.animation=Tme(n,r,i,c,s),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const u=MP(i,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(u):Ame(n,r,u),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Ea(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Ea(e)}get time(){return Ea(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=dc(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&Ime()?(this.animation.timeline=e,Ma):n(this)}}const Tq={anticipate:lq,backInOut:aq,circInOut:uq};function Rme(t){return t in Tq}function Ome(t){typeof t.ease=="string"&&Rme(t.ease)&&(t.ease=Tq[t.ease])}const D6=10;class Dme extends Pme{constructor(e){Ome(e),Cq(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const a=new jP({...o,autoplay:!1}),l=dc(this.finishedTime??this.time);n.setWithVelocity(a.sample(l-D6).value,a.sample(l).value,D6),a.stop()}}const L6=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Zd.test(t)||t==="0")&&!t.startsWith("url("));function Lme(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function Mme(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=L6(i,e),a=L6(s,e);return!o||!a?!1:Lme(t)||(n==="spring"||Eq(n))&&r}function nT(t){t.duration=0,t.type="keyframes"}const Fme=new Set(["opacity","clipPath","filter","transform"]),jme=IP(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Bme(t){var u;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:s,type:o}=t;if(!(((u=e==null?void 0:e.owner)==null?void 0:u.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=e.owner.getProps();return jme()&&n&&Fme.has(n)&&(n!=="transform"||!c)&&!l&&!r&&i!=="mirror"&&s!==0&&o!=="inertia"}const zme=40;class Ume extends FP{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:a,name:l,motionValue:c,element:u,...d}){var p;super(),this.stop=()=>{var m,y;this._animation&&(this._animation.stop(),(m=this.stopTimeline)==null||m.call(this)),(y=this.keyframeResolver)==null||y.cancel()},this.createdAt=fo.now();const h={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,name:l,motionValue:c,element:u,...d},f=(u==null?void 0:u.KeyframeResolver)||BP;this.keyframeResolver=new f(a,(m,y,g)=>this.onKeyframesResolved(m,y,h,!g),l,c,u),(p=this.keyframeResolver)==null||p.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:s,type:o,velocity:a,delay:l,isHandoff:c,onUpdate:u}=r;this.resolvedAt=fo.now(),Mme(e,s,o,a)||((bu.instantAnimations||!l)&&(u==null||u(MP(e,r,n))),e[0]=e[e.length-1],nT(r),r.repeat=0);const h={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>zme?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},f=!c&&Bme(h)?new Dme({...h,element:h.motionValue.owner.current}):new jP(h);f.finished.then(()=>this.notifyFinished()).catch(Ma),this.pendingTimeline&&(this.stopTimeline=f.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=f}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),Cme()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const Vme=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Wme(t){const e=Vme.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function $q(t,e,n=1){const[r,i]=Wme(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return QG(o)?parseFloat(o):o}return PP(i)?$q(i,e,n+1):i}function zP(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const Pq=new Set(["width","height","top","left","right","bottom",...Vg]),Gme={test:t=>t==="auto",parse:t=>t},Rq=t=>e=>e.test(t),Oq=[Ug,Pt,hc,fd,Lpe,Dpe,Gme],M6=t=>Oq.find(Rq(t));function qme(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||tq(t):!0}const Hme=new Set(["brightness","contrast","saturate","opacity"]);function Kme(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(RP)||[];if(!r)return t;const i=n.replace(r,"");let s=Hme.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const Xme=/\b([a-z-]*)\(.*?\)/gu,rT={...Zd,getAnimatableNone:t=>{const e=t.match(Xme);return e?e.map(Kme).join(" "):t}},F6={...Ug,transform:Math.round},Yme={rotate:fd,rotateX:fd,rotateY:fd,rotateZ:fd,scale:yw,scaleX:yw,scaleY:yw,scaleZ:yw,skew:fd,skewX:fd,skewY:fd,distance:Pt,translateX:Pt,translateY:Pt,translateZ:Pt,x:Pt,y:Pt,z:Pt,perspective:Pt,transformPerspective:Pt,opacity:E1,originX:N6,originY:N6,originZ:Pt},UP={borderWidth:Pt,borderTopWidth:Pt,borderRightWidth:Pt,borderBottomWidth:Pt,borderLeftWidth:Pt,borderRadius:Pt,radius:Pt,borderTopLeftRadius:Pt,borderTopRightRadius:Pt,borderBottomRightRadius:Pt,borderBottomLeftRadius:Pt,width:Pt,maxWidth:Pt,height:Pt,maxHeight:Pt,top:Pt,right:Pt,bottom:Pt,left:Pt,padding:Pt,paddingTop:Pt,paddingRight:Pt,paddingBottom:Pt,paddingLeft:Pt,margin:Pt,marginTop:Pt,marginRight:Pt,marginBottom:Pt,marginLeft:Pt,backgroundPositionX:Pt,backgroundPositionY:Pt,...Yme,zIndex:F6,fillOpacity:E1,strokeOpacity:E1,numOctaves:F6},Zme={...UP,color:ni,backgroundColor:ni,outlineColor:ni,fill:ni,stroke:ni,borderColor:ni,borderTopColor:ni,borderRightColor:ni,borderBottomColor:ni,borderLeftColor:ni,filter:rT,WebkitFilter:rT},Dq=t=>Zme[t];function Lq(t,e){let n=Dq(t);return n!==rT&&(n=Zd),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const Jme=new Set(["auto","none","0"]);function Qme(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!Jme.has(s)&&T1(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=Lq(n,i)}class ege extends BP{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),PP(c))){const u=$q(c,n.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!Pq.has(r)||e.length!==2)return;const[i,s]=e,o=M6(i),a=M6(s);if(o!==a)if(R6(o)&&R6(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else Rf[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||qme(e[i]))&&r.push(i);r.length&&Qme(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Rf[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var a;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=Rf[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,c])=>{e.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function tge(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;e&&(r=e.current);const i=(n==null?void 0:n[t])??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const Mq=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function Fq(t){return eq(t)&&"offsetHeight"in t}const j6=30,nge=t=>!isNaN(parseFloat(t));class rge{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var s;const i=fo.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=fo.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=nge(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new _P);const r=this.events[e].add(n);return e==="change"?()=>{r(),dr.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=fo.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>j6)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,j6);return nq(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function sg(t,e){return new rge(t,e)}const{schedule:VP,cancel:cat}=fq(queueMicrotask,!1),cl={x:!1,y:!1};function jq(){return cl.x||cl.y}function ige(t){return t==="x"||t==="y"?cl[t]?null:(cl[t]=!0,()=>{cl[t]=!1}):cl.x||cl.y?null:(cl.x=cl.y=!0,()=>{cl.x=cl.y=!1})}function Bq(t,e){const n=tge(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function B6(t){return!(t.pointerType==="touch"||jq())}function sge(t,e,n={}){const[r,i,s]=Bq(t,n),o=a=>{if(!B6(a))return;const{target:l}=a,c=e(l,a);if(typeof c!="function"||!l)return;const u=d=>{B6(d)&&(c(d),l.removeEventListener("pointerleave",u))};l.addEventListener("pointerleave",u,i)};return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const zq=(t,e)=>e?t===e?!0:zq(t,e.parentElement):!1,WP=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,oge=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function age(t){return oge.has(t.tagName)||t.tabIndex!==-1}const _2=new WeakSet;function z6(t){return e=>{e.key==="Enter"&&t(e)}}function hI(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const lge=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=z6(()=>{if(_2.has(n))return;hI(n,"down");const i=z6(()=>{hI(n,"up")}),s=()=>hI(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function U6(t){return WP(t)&&!jq()}function cge(t,e,n={}){const[r,i,s]=Bq(t,n),o=a=>{const l=a.currentTarget;if(!U6(a))return;_2.add(l);const c=e(l,a),u=(f,p)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",h),_2.has(l)&&_2.delete(l),U6(f)&&typeof c=="function"&&c(f,{success:p})},d=f=>{u(f,l===window||l===document||n.useGlobalTarget||zq(l,f.target))},h=f=>{u(f,!1)};window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",h,i)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),Fq(a)&&(a.addEventListener("focus",c=>lge(c,i)),!age(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),s}function Uq(t){return eq(t)&&"ownerSVGElement"in t}function uge(t){return Uq(t)&&t.tagName==="svg"}const _s=t=>!!(t&&t.getVelocity),dge=[...Oq,ni,Zd],hge=t=>dge.find(Rq(t)),GP=N.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function V6(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function fge(...t){return e=>{let n=!1;const r=t.map(i=>{const s=V6(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():V6(t[i],null)}}}}function pge(...t){return N.useCallback(fge(...t),t)}class mge extends N.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=Fq(r)&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function gge({children:t,isPresent:e,anchorX:n,root:r}){const i=N.useId(),s=N.useRef(null),o=N.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=N.useContext(GP),l=pge(s,t==null?void 0:t.ref);return N.useInsertionEffect(()=>{const{width:c,height:u,top:d,left:h,right:f}=o.current;if(e||!s.current||!c||!u)return;const p=n==="left"?`left: ${h}`:`right: ${f}`;s.current.dataset.motionPopId=i;const m=document.createElement("style");a&&(m.nonce=a);const y=r??document.head;return y.appendChild(m),m.sheet&&m.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${u}px !important;
            ${p}px !important;
            top: ${d}px !important;
          }
        `),()=>{y.contains(m)&&y.removeChild(m)}},[e]),k.jsx(mge,{isPresent:e,childRef:s,sizeRef:o,children:N.cloneElement(t,{ref:l})})}const yge=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o,anchorX:a,root:l})=>{const c=kP(vge),u=N.useId();let d=!0,h=N.useMemo(()=>(d=!1,{id:u,initial:e,isPresent:n,custom:i,onExitComplete:f=>{c.set(f,!0);for(const p of c.values())if(!p)return;r&&r()},register:f=>(c.set(f,!1),()=>c.delete(f))}),[n,c,r]);return s&&d&&(h={...h}),N.useMemo(()=>{c.forEach((f,p)=>c.set(p,!1))},[n]),N.useEffect(()=>{!n&&!c.size&&r&&r()},[n]),o==="popLayout"&&(t=k.jsx(gge,{isPresent:n,anchorX:a,root:l,children:t})),k.jsx(hC.Provider,{value:h,children:t})};function vge(){return new Map}function Vq(t=!0){const e=N.useContext(hC);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=N.useId();N.useEffect(()=>{if(t)return i(s)},[t]);const o=N.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const vw=t=>t.key||"";function W6(t){const e=[];return N.Children.forEach(t,n=>{N.isValidElement(n)&&e.push(n)}),e}const xge=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1,anchorX:a="left",root:l})=>{const[c,u]=Vq(o),d=N.useMemo(()=>W6(t),[t]),h=o&&!c?[]:d.map(vw),f=N.useRef(!0),p=N.useRef(d),m=kP(()=>new Map),[y,g]=N.useState(d),[v,x]=N.useState(d);JG(()=>{f.current=!1,p.current=d;for(let A=0;A<v.length;A++){const E=vw(v[A]);h.includes(E)?m.delete(E):m.get(E)!==!0&&m.set(E,!1)}},[v,h.length,h.join("-")]);const b=[];if(d!==y){let A=[...d];for(let E=0;E<v.length;E++){const I=v[E],T=vw(I);h.includes(T)||(A.splice(E,0,I),b.push(I))}return s==="wait"&&b.length&&(A=b),x(W6(A)),g(d),null}const{forceRender:S}=N.useContext(wP);return k.jsx(k.Fragment,{children:v.map(A=>{const E=vw(A),I=o&&!c?!1:d===v||h.includes(E),T=()=>{if(m.has(E))m.set(E,!0);else return;let O=!0;m.forEach($=>{$||(O=!1)}),O&&(S==null||S(),x(p.current),o&&(u==null||u()),r&&r())};return k.jsx(yge,{isPresent:I,initial:!f.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:s,root:l,onExitComplete:I?void 0:T,anchorX:a,children:A},E)})})},Wq=N.createContext({strict:!1}),G6={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},og={};for(const t in G6)og[t]={isEnabled:e=>G6[t].some(n=>!!e[n])};function bge(t){for(const e in t)og[e]={...og[e],...t[e]}}const wge=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function vk(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||wge.has(t)}let Gq=t=>!vk(t);function kge(t){typeof t=="function"&&(Gq=e=>e.startsWith("on")?!vk(e):t(e))}try{kge(require("@emotion/is-prop-valid").default)}catch{}function Sge(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(Gq(i)||n===!0&&vk(i)||!e&&!vk(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const fC=N.createContext({});function pC(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function $1(t){return typeof t=="string"||Array.isArray(t)}const qP=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],HP=["initial",...qP];function mC(t){return pC(t.animate)||HP.some(e=>$1(t[e]))}function qq(t){return!!(mC(t)||t.variants)}function Cge(t,e){if(mC(t)){const{initial:n,animate:r}=t;return{initial:n===!1||$1(n)?n:void 0,animate:$1(r)?r:void 0}}return t.inherit!==!1?e:{}}function Nge(t){const{initial:e,animate:n}=Cge(t,N.useContext(fC));return N.useMemo(()=>({initial:e,animate:n}),[q6(e),q6(n)])}function q6(t){return Array.isArray(t)?t.join(" "):t}const P1={};function Age(t){for(const e in t)P1[e]=t[e],$P(e)&&(P1[e].isCSSVariable=!0)}function Hq(t,{layout:e,layoutId:n}){return Wg.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!P1[t]||t==="opacity")}const Ige={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},_ge=Vg.length;function Ege(t,e,n){let r="",i=!0;for(let s=0;s<_ge;s++){const o=Vg[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=Mq(a,UP[o]);if(!l){i=!1;const u=Ige[o]||o;r+=`${u}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function KP(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(Wg.has(l)){o=!0;continue}else if($P(l)){i[l]=c;continue}else{const u=Mq(c,UP[l]);l.startsWith("origin")?(a=!0,s[l]=u):r[l]=u}}if(e.transform||(o||n?r.transform=Ege(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=s;r.transformOrigin=`${l} ${c} ${u}`}}const XP=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Kq(t,e,n){for(const r in e)!_s(e[r])&&!Hq(r,n)&&(t[r]=e[r])}function Tge({transformTemplate:t},e){return N.useMemo(()=>{const n=XP();return KP(n,e,t),Object.assign({},n.vars,n.style)},[e])}function $ge(t,e){const n=t.style||{},r={};return Kq(r,n,t),Object.assign(r,Tge(t,e)),r}function Pge(t,e){const n={},r=$ge(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const Rge={offset:"stroke-dashoffset",array:"stroke-dasharray"},Oge={offset:"strokeDashoffset",array:"strokeDasharray"};function Dge(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?Rge:Oge;t[s.offset]=Pt.transform(-r);const o=Pt.transform(e),a=Pt.transform(n);t[s.array]=`${o} ${a}`}function Xq(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...a},l,c,u){if(KP(t,a,c),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:d,style:h}=t;d.transform&&(h.transform=d.transform,delete d.transform),(h.transform||d.transformOrigin)&&(h.transformOrigin=d.transformOrigin??"50% 50%",delete d.transformOrigin),h.transform&&(h.transformBox=(u==null?void 0:u.transformBox)??"fill-box",delete d.transformBox),e!==void 0&&(d.x=e),n!==void 0&&(d.y=n),r!==void 0&&(d.scale=r),i!==void 0&&Dge(d,i,s,o,!1)}const Yq=()=>({...XP(),attrs:{}}),Zq=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Lge(t,e,n,r){const i=N.useMemo(()=>{const s=Yq();return Xq(s,e,Zq(r),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};Kq(s,t.style,t),i.style={...s,...i.style}}return i}const Mge=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function YP(t){return typeof t!="string"||t.includes("-")?!1:!!(Mge.indexOf(t)>-1||/[A-Z]/u.test(t))}function Fge(t,e,n,{latestValues:r},i,s=!1){const a=(YP(t)?Lge:Pge)(e,r,i,t),l=Sge(e,typeof t=="string",s),c=t!==N.Fragment?{...l,...a,ref:n}:{},{children:u}=e,d=N.useMemo(()=>_s(u)?u.get():u,[u]);return N.createElement(t,{...c,children:d})}function H6(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function ZP(t,e,n,r){if(typeof e=="function"){const[i,s]=H6(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=H6(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function E2(t){return _s(t)?t.get():t}function jge({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:Bge(n,r,i,t),renderState:e()}}function Bge(t,e,n,r){const i={},s=r(t,{});for(const h in s)i[h]=E2(s[h]);let{initial:o,animate:a}=t;const l=mC(t),c=qq(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const d=u?a:o;if(d&&typeof d!="boolean"&&!pC(d)){const h=Array.isArray(d)?d:[d];for(let f=0;f<h.length;f++){const p=ZP(t,h[f]);if(p){const{transitionEnd:m,transition:y,...g}=p;for(const v in g){let x=g[v];if(Array.isArray(x)){const b=u?x.length-1:0;x=x[b]}x!==null&&(i[v]=x)}for(const v in m)i[v]=m[v]}}}return i}const Jq=t=>(e,n)=>{const r=N.useContext(fC),i=N.useContext(hC),s=()=>jge(t,e,r,i);return n?s():kP(s)};function JP(t,e,n){var s;const{style:r}=t,i={};for(const o in r)(_s(r[o])||e.style&&_s(e.style[o])||Hq(o,t)||((s=n==null?void 0:n.getValue(o))==null?void 0:s.liveStyle)!==void 0)&&(i[o]=r[o]);return i}const zge=Jq({scrapeMotionValuesFromProps:JP,createRenderState:XP});function Qq(t,e,n){const r=JP(t,e,n);for(const i in t)if(_s(t[i])||_s(e[i])){const s=Vg.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}const Uge=Jq({scrapeMotionValuesFromProps:Qq,createRenderState:Yq}),Vge=Symbol.for("motionComponentSymbol");function Am(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Wge(t,e,n){return N.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Am(n)&&(n.current=r))},[e])}const QP=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Gge="framerAppearId",eH="data-"+QP(Gge),tH=N.createContext({});function qge(t,e,n,r,i){var m,y;const{visualElement:s}=N.useContext(fC),o=N.useContext(Wq),a=N.useContext(hC),l=N.useContext(GP).reducedMotion,c=N.useRef(null);r=r||o.renderer,!c.current&&r&&(c.current=r(t,{visualState:e,parent:s,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const u=c.current,d=N.useContext(tH);u&&!u.projection&&i&&(u.type==="html"||u.type==="svg")&&Hge(c.current,n,i,d);const h=N.useRef(!1);N.useInsertionEffect(()=>{u&&h.current&&u.update(n,a)});const f=n[eH],p=N.useRef(!!f&&!((m=window.MotionHandoffIsComplete)!=null&&m.call(window,f))&&((y=window.MotionHasOptimisedAnimation)==null?void 0:y.call(window,f)));return JG(()=>{u&&(h.current=!0,window.MotionIsMounted=!0,u.updateFeatures(),u.scheduleRenderMicrotask(),p.current&&u.animationState&&u.animationState.animateChanges())}),N.useEffect(()=>{u&&(!p.current&&u.animationState&&u.animationState.animateChanges(),p.current&&(queueMicrotask(()=>{var g;(g=window.MotionHandoffMarkAsComplete)==null||g.call(window,f)}),p.current=!1),u.enteringChildren=void 0)}),u}function Hge(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c,layoutCrossfade:u}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:nH(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&Am(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:u,layoutScroll:l,layoutRoot:c})}function nH(t){if(t)return t.options.allowProjection!==!1?t.projection:nH(t.parent)}function fI(t,{forwardMotionProps:e=!1}={},n,r){n&&bge(n);const i=YP(t)?Uge:zge;function s(a,l){let c;const u={...N.useContext(GP),...a,layoutId:Kge(a)},{isStatic:d}=u,h=Nge(a),f=i(a,d);if(!d&&SP){Xge();const p=Yge(u);c=p.MeasureLayout,h.visualElement=qge(t,f,u,r,p.ProjectionNode)}return k.jsxs(fC.Provider,{value:h,children:[c&&h.visualElement?k.jsx(c,{visualElement:h.visualElement,...u}):null,Fge(t,a,Wge(f,h.visualElement,l),f,d,e)]})}s.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=N.forwardRef(s);return o[Vge]=t,o}function Kge({layoutId:t}){const e=N.useContext(wP).id;return e&&t!==void 0?e+"-"+t:t}function Xge(t,e){N.useContext(Wq).strict}function Yge(t){const{drag:e,layout:n}=og;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function Zge(t,e){if(typeof Proxy>"u")return fI;const n=new Map,r=(s,o)=>fI(s,o,t,e),i=(s,o)=>r(s,o);return new Proxy(i,{get:(s,o)=>o==="create"?r:(n.has(o)||n.set(o,fI(o,void 0,t,e)),n.get(o))})}function rH({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function Jge({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Qge(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function pI(t){return t===void 0||t===1}function iT({scale:t,scaleX:e,scaleY:n}){return!pI(t)||!pI(e)||!pI(n)}function of(t){return iT(t)||iH(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function iH(t){return K6(t.x)||K6(t.y)}function K6(t){return t&&t!=="0%"}function xk(t,e,n){const r=t-n,i=e*r;return n+i}function X6(t,e,n,r,i){return i!==void 0&&(t=xk(t,i,r)),xk(t,n,r)+e}function sT(t,e=0,n=1,r,i){t.min=X6(t.min,e,n,r,i),t.max=X6(t.max,e,n,r,i)}function sH(t,{x:e,y:n}){sT(t.x,e.translate,e.scale,e.originPoint),sT(t.y,n.translate,n.scale,n.originPoint)}const Y6=.999999999999,Z6=1.0000000000001;function e0e(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&_m(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,sH(t,o)),r&&of(s.latestValues)&&_m(t,s.latestValues))}e.x<Z6&&e.x>Y6&&(e.x=1),e.y<Z6&&e.y>Y6&&(e.y=1)}function Im(t,e){t.min=t.min+e,t.max=t.max+e}function J6(t,e,n,r,i=.5){const s=br(t.min,t.max,i);sT(t,e,n,s,r)}function _m(t,e){J6(t.x,e.x,e.scaleX,e.scale,e.originX),J6(t.y,e.y,e.scaleY,e.scale,e.originY)}function oH(t,e){return rH(Qge(t.getBoundingClientRect(),e))}function t0e(t,e,n){const r=oH(t,n),{scroll:i}=e;return i&&(Im(r.x,i.offset.x),Im(r.y,i.offset.y)),r}const Q6=()=>({translate:0,scale:1,origin:0,originPoint:0}),Em=()=>({x:Q6(),y:Q6()}),ej=()=>({min:0,max:0}),Hr=()=>({x:ej(),y:ej()}),oT={current:null},aH={current:!1};function n0e(){if(aH.current=!0,!!SP)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>oT.current=t.matches;t.addEventListener("change",e),e()}else oT.current=!1}const r0e=new WeakMap;function i0e(t,e,n){for(const r in e){const i=e[r],s=n[r];if(_s(i))t.addValue(r,i);else if(_s(s))t.addValue(r,sg(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,sg(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const tj=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class s0e{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=BP,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=fo.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,dr.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=mC(n),this.isVariantNode=qq(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const h in d){const f=d[h];l[h]!==void 0&&_s(f)&&f.set(l[h])}}mount(e){var n;this.current=e,r0e.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),aH.current||n0e(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:oT.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),Yd(this.notifyUpdate),Yd(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Wg.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&dr.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in og){const n=og[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Hr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<tj.length;r++){const i=tj[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=i0e(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=sg(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(QG(r)||tq(r))?r=parseFloat(r):!hge(r)&&Zd.test(n)&&(r=Lq(e,n)),this.setBaseTarget(e,_s(r)?r.get():r)),_s(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var s;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=ZP(this.props,n,(s=this.presenceContext)==null?void 0:s.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!_s(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new _P),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){VP.render(this.render)}}class lH extends s0e{constructor(){super(...arguments),this.KeyframeResolver=ege}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;_s(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function cH(t,{style:e,vars:n},r,i){const s=t.style;let o;for(o in e)s[o]=e[o];i==null||i.applyProjectionStyles(s,r);for(o in n)s.setProperty(o,n[o])}function o0e(t){return window.getComputedStyle(t)}class a0e extends lH{constructor(){super(...arguments),this.type="html",this.renderInstance=cH}readValueFromInstance(e,n){var r;if(Wg.has(n))return(r=this.projection)!=null&&r.isProjecting?ZE(n):xme(e,n);{const i=o0e(e),s=($P(n)?i.getPropertyValue(n):i[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return oH(e,n)}build(e,n,r){KP(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return JP(e,n,r)}}const uH=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function l0e(t,e,n,r){cH(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(uH.has(i)?i:QP(i),e.attrs[i])}class c0e extends lH{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Hr}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Wg.has(n)){const r=Dq(n);return r&&r.default||0}return n=uH.has(n)?n:QP(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return Qq(e,n,r)}build(e,n,r){Xq(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){l0e(e,n,r,i)}mount(e){this.isSVGTag=Zq(e.tagName),super.mount(e)}}const u0e=(t,e)=>YP(t)?new c0e(e):new a0e(e,{allowProjection:t!==N.Fragment});function jm(t,e,n){const r=t.getProps();return ZP(r,e,n!==void 0?n:r.custom,t)}const aT=t=>Array.isArray(t);function d0e(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,sg(n))}function h0e(t){return aT(t)?t[t.length-1]||0:t}function f0e(t,e){const n=jm(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=h0e(s[o]);d0e(t,o,a)}}function p0e(t){return!!(_s(t)&&t.add)}function lT(t,e){const n=t.getValue("willChange");if(p0e(n))return n.add(e);if(!n&&bu.WillChange){const r=new bu.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function dH(t){return t.props[eH]}const m0e=t=>t!==null;function g0e(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(m0e),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const y0e={type:"spring",stiffness:500,damping:25,restSpeed:10},v0e=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),x0e={type:"keyframes",duration:.8},b0e={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},w0e=(t,{keyframes:e})=>e.length>2?x0e:Wg.has(t)?t.startsWith("scale")?v0e(e[1]):y0e:b0e;function k0e({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const e4=(t,e,n,r={},i,s)=>o=>{const a=zP(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-dc(l);const u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:h=>{e.set(h),a.onUpdate&&a.onUpdate(h)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};k0e(a)||Object.assign(u,w0e(t,u)),u.duration&&(u.duration=dc(u.duration)),u.repeatDelay&&(u.repeatDelay=dc(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let d=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(nT(u),u.delay===0&&(d=!0)),(bu.instantAnimations||bu.skipAnimations)&&(d=!0,nT(u),u.delay=0),u.allowFlatten=!a.type&&!a.ease,d&&!s&&e.get()!==void 0){const h=g0e(u.keyframes,a);if(h!==void 0){dr.update(()=>{u.onUpdate(h),u.onComplete()});return}}return a.isSync?new jP(u):new Ume(u)};function S0e({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function hH(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...a}=e;r&&(s=r);const l=[],c=i&&t.animationState&&t.animationState.getState()[i];for(const u in a){const d=t.getValue(u,t.latestValues[u]??null),h=a[u];if(h===void 0||c&&S0e(c,u))continue;const f={delay:n,...zP(s||{},u)},p=d.get();if(p!==void 0&&!d.isAnimating&&!Array.isArray(h)&&h===p&&!f.velocity)continue;let m=!1;if(window.MotionHandoffAnimation){const g=dH(t);if(g){const v=window.MotionHandoffAnimation(g,u,dr);v!==null&&(f.startTime=v,m=!0)}}lT(t,u),d.start(e4(u,d,h,t.shouldReduceMotion&&Pq.has(u)?{type:!1}:f,t,m));const y=d.animation;y&&l.push(y)}return o&&Promise.all(l).then(()=>{dr.update(()=>{o&&f0e(t,o)})}),l}function fH(t,e,n,r=0,i=1){const s=Array.from(t).sort((c,u)=>c.sortNodePosition(u)).indexOf(e),o=t.size,a=(o-1)*r;return typeof n=="function"?n(s,o):i===1?s*r:a-s*r}function cT(t,e,n={}){var l;const r=jm(t,e,n.type==="exit"?(l=t.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(hH(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:h}=i;return C0e(t,e,c,u,d,h,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[c,u]=a==="beforeChildren"?[s,o]:[o,s];return c().then(()=>u())}else return Promise.all([s(),o(n.delay)])}function C0e(t,e,n=0,r=0,i=0,s=1,o){const a=[];for(const l of t.variantChildren)l.notify("AnimationStart",e),a.push(cT(l,e,{...o,delay:n+(typeof r=="function"?0:r)+fH(t.variantChildren,l,r,i,s)}).then(()=>l.notify("AnimationComplete",e)));return Promise.all(a)}function N0e(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>cT(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=cT(t,e,n);else{const i=typeof e=="function"?jm(t,e,n.custom):e;r=Promise.all(hH(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function pH(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const A0e=HP.length;function mH(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?mH(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<A0e;n++){const r=HP[n],i=t.props[r];($1(i)||i===!1)&&(e[r]=i)}return e}const I0e=[...qP].reverse(),_0e=qP.length;function E0e(t){return e=>Promise.all(e.map(({animation:n,options:r})=>N0e(t,n,r)))}function T0e(t){let e=E0e(t),n=nj(),r=!0;const i=l=>(c,u)=>{var h;const d=jm(t,u,l==="exit"?(h=t.presenceContext)==null?void 0:h.custom:void 0);if(d){const{transition:f,transitionEnd:p,...m}=d;c={...c,...m,...p}}return c};function s(l){e=l(t)}function o(l){const{props:c}=t,u=mH(t.parent)||{},d=[],h=new Set;let f={},p=1/0;for(let y=0;y<_0e;y++){const g=I0e[y],v=n[g],x=c[g]!==void 0?c[g]:u[g],b=$1(x),S=g===l?v.isActive:null;S===!1&&(p=y);let A=x===u[g]&&x!==c[g]&&b;if(A&&r&&t.manuallyAnimateOnMount&&(A=!1),v.protectedKeys={...f},!v.isActive&&S===null||!x&&!v.prevProp||pC(x)||typeof x=="boolean")continue;const E=$0e(v.prevProp,x);let I=E||g===l&&v.isActive&&!A&&b||y>p&&b,T=!1;const O=Array.isArray(x)?x:[x];let $=O.reduce(i(g),{});S===!1&&($={});const{prevResolvedValues:R={}}=v,F={...R,...$},L=K=>{I=!0,h.has(K)&&(T=!0,h.delete(K)),v.needsAnimating[K]=!0;const j=t.getValue(K);j&&(j.liveStyle=!1)};for(const K in F){const j=$[K],Y=R[K];if(f.hasOwnProperty(K))continue;let ae=!1;aT(j)&&aT(Y)?ae=!pH(j,Y):ae=j!==Y,ae?j!=null?L(K):h.add(K):j!==void 0&&h.has(K)?L(K):v.protectedKeys[K]=!0}v.prevProp=x,v.prevResolvedValues=$,v.isActive&&(f={...f,...$}),r&&t.blockInitialAnimation&&(I=!1);const U=A&&E;I&&(!U||T)&&d.push(...O.map(K=>{const j={type:g};if(typeof K=="string"&&r&&!U&&t.manuallyAnimateOnMount&&t.parent){const{parent:Y}=t,ae=jm(Y,K);if(Y.enteringChildren&&ae){const{delayChildren:le}=ae.transition||{};j.delay=fH(Y.enteringChildren,t,le)}}return{animation:K,options:j}}))}if(h.size){const y={};if(typeof c.initial!="boolean"){const g=jm(t,Array.isArray(c.initial)?c.initial[0]:c.initial);g&&g.transition&&(y.transition=g.transition)}h.forEach(g=>{const v=t.getBaseTarget(g),x=t.getValue(g);x&&(x.liveStyle=!0),y[g]=v??null}),d.push({animation:y})}let m=!!d.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(m=!1),r=!1,m?e(d):Promise.resolve()}function a(l,c){var d;if(n[l].isActive===c)return Promise.resolve();(d=t.variantChildren)==null||d.forEach(h=>{var f;return(f=h.animationState)==null?void 0:f.setActive(l,c)}),n[l].isActive=c;const u=o(l);for(const h in n)n[h].protectedKeys={};return u}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=nj()}}}function $0e(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!pH(e,t):!1}function ef(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function nj(){return{animate:ef(!0),whileInView:ef(),whileHover:ef(),whileTap:ef(),whileDrag:ef(),whileFocus:ef(),exit:ef()}}class ph{constructor(e){this.isMounted=!1,this.node=e}update(){}}class P0e extends ph{constructor(e){super(e),e.animationState||(e.animationState=T0e(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();pC(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let R0e=0;class O0e extends ph{constructor(){super(...arguments),this.id=R0e++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const D0e={animation:{Feature:P0e},exit:{Feature:O0e}};function R1(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function kv(t){return{point:{x:t.pageX,y:t.pageY}}}const L0e=t=>e=>WP(e)&&t(e,kv(e));function Qy(t,e,n,r){return R1(t,e,L0e(n),r)}const gH=1e-4,M0e=1-gH,F0e=1+gH,yH=.01,j0e=0-yH,B0e=0+yH;function Gs(t){return t.max-t.min}function z0e(t,e,n){return Math.abs(t-e)<=n}function rj(t,e,n,r=.5){t.origin=r,t.originPoint=br(e.min,e.max,t.origin),t.scale=Gs(n)/Gs(e),t.translate=br(n.min,n.max,t.origin)-t.originPoint,(t.scale>=M0e&&t.scale<=F0e||isNaN(t.scale))&&(t.scale=1),(t.translate>=j0e&&t.translate<=B0e||isNaN(t.translate))&&(t.translate=0)}function e1(t,e,n,r){rj(t.x,e.x,n.x,r?r.originX:void 0),rj(t.y,e.y,n.y,r?r.originY:void 0)}function ij(t,e,n){t.min=n.min+e.min,t.max=t.min+Gs(e)}function U0e(t,e,n){ij(t.x,e.x,n.x),ij(t.y,e.y,n.y)}function sj(t,e,n){t.min=e.min-n.min,t.max=t.min+Gs(e)}function t1(t,e,n){sj(t.x,e.x,n.x),sj(t.y,e.y,n.y)}function ba(t){return[t("x"),t("y")]}const vH=({current:t})=>t?t.ownerDocument.defaultView:null,oj=(t,e)=>Math.abs(t-e);function V0e(t,e){const n=oj(t.x,e.x),r=oj(t.y,e.y);return Math.sqrt(n**2+r**2)}class xH{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=gI(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,p=V0e(h.offset,{x:0,y:0})>=this.distanceThreshold;if(!f&&!p)return;const{point:m}=h,{timestamp:y}=es;this.history.push({...m,timestamp:y});const{onStart:g,onMove:v}=this.handlers;f||(g&&g(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=mI(f,this.transformPagePoint),dr.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{this.end();const{onEnd:p,onSessionEnd:m,resumeAnimation:y}=this.handlers;if(this.dragSnapToOrigin&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=gI(h.type==="pointercancel"?this.lastMoveEventInfo:mI(f,this.transformPagePoint),this.history);this.startEvent&&p&&p(h,g),m&&m(h,g)},!WP(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const a=kv(e),l=mI(a,this.transformPagePoint),{point:c}=l,{timestamp:u}=es;this.history=[{...c,timestamp:u}];const{onSessionStart:d}=n;d&&d(e,gI(l,this.history)),this.removeListeners=xv(Qy(this.contextWindow,"pointermove",this.handlePointerMove),Qy(this.contextWindow,"pointerup",this.handlePointerUp),Qy(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Yd(this.updatePoint)}}function mI(t,e){return e?{point:e(t.point)}:t}function aj(t,e){return{x:t.x-e.x,y:t.y-e.y}}function gI({point:t},e){return{point:t,delta:aj(t,bH(e)),offset:aj(t,W0e(e)),velocity:G0e(e,.1)}}function W0e(t){return t[0]}function bH(t){return t[t.length-1]}function G0e(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=bH(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>dc(e)));)n--;if(!r)return{x:0,y:0};const s=Ea(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function q0e(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?br(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?br(n,t,r.max):Math.min(t,n)),t}function lj(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function H0e(t,{top:e,left:n,bottom:r,right:i}){return{x:lj(t.x,n,i),y:lj(t.y,e,r)}}function cj(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function K0e(t,e){return{x:cj(t.x,e.x),y:cj(t.y,e.y)}}function X0e(t,e){let n=.5;const r=Gs(t),i=Gs(e);return i>r?n=_1(e.min,e.max-r,t.min):r>i&&(n=_1(t.min,t.max-i,e.min)),xu(0,1,n)}function Y0e(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const uT=.35;function Z0e(t=uT){return t===!1?t=0:t===!0&&(t=uT),{x:uj(t,"left","right"),y:uj(t,"top","bottom")}}function uj(t,e,n){return{min:dj(t,e),max:dj(t,n)}}function dj(t,e){return typeof t=="number"?t:t[e]||0}const J0e=new WeakMap;class Q0e{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Hr(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(kv(d).point)},o=(d,h)=>{const{drag:f,dragPropagation:p,onDragStart:m}=this.getProps();if(f&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=ige(f),!this.openDragLock))return;this.latestPointerEvent=d,this.latestPanInfo=h,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ba(g=>{let v=this.getAxisMotionValue(g).get()||0;if(hc.test(v)){const{projection:x}=this.visualElement;if(x&&x.layout){const b=x.layout.layoutBox[g];b&&(v=Gs(b)*(parseFloat(v)/100))}}this.originPoint[g]=v}),m&&dr.postRender(()=>m(d,h)),lT(this.visualElement,"transform");const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},a=(d,h)=>{this.latestPointerEvent=d,this.latestPanInfo=h;const{dragPropagation:f,dragDirectionLock:p,onDirectionLock:m,onDrag:y}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:g}=h;if(p&&this.currentDirection===null){this.currentDirection=eye(g),this.currentDirection!==null&&m&&m(this.currentDirection);return}this.updateAxis("x",h.point,g),this.updateAxis("y",h.point,g),this.visualElement.render(),y&&y(d,h)},l=(d,h)=>{this.latestPointerEvent=d,this.latestPanInfo=h,this.stop(d,h),this.latestPointerEvent=null,this.latestPanInfo=null},c=()=>ba(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)==null?void 0:h.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new xH(e,{onSessionStart:s,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,distanceThreshold:r,contextWindow:vH(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&dr.postRender(()=>a(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!xw(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=q0e(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;e&&Am(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=H0e(r.layoutBox,e):this.constraints=!1,this.elastic=Z0e(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&ba(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=Y0e(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Am(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=t0e(r,i.root,this.visualElement.getTransformPagePoint());let o=K0e(i.layout.layoutBox,s);if(n){const a=n(Jge(o));this.hasMutatedConstraints=!!a,a&&(o=rH(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=ba(u=>{if(!xw(u,n,this.currentDirection))return;let d=l&&l[u]||{};o&&(d={min:0,max:0});const h=i?200:1e6,f=i?40:1e7,p={type:"inertia",velocity:r?e[u]:0,bounceStiffness:h,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(u,p)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return lT(this.visualElement,e),r.start(e4(e,r,0,n,this.visualElement,!1))}stopAnimation(){ba(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ba(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){ba(n=>{const{drag:r}=this.getProps();if(!xw(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-br(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Am(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};ba(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=X0e({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),ba(o=>{if(!xw(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(br(l,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;J0e.set(this.visualElement,this);const e=this.visualElement.current,n=Qy(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Am(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),dr.read(r);const o=R1(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(ba(u=>{const d=this.getAxisMotionValue(u);d&&(this.originPoint[u]+=l[u].translate,d.set(d.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=uT,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function xw(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function eye(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class tye extends ph{constructor(e){super(e),this.removeGroupControls=Ma,this.removeListeners=Ma,this.controls=new Q0e(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ma}unmount(){this.removeGroupControls(),this.removeListeners()}}const hj=t=>(e,n)=>{t&&dr.postRender(()=>t(e,n))};class nye extends ph{constructor(){super(...arguments),this.removePointerDownListener=Ma}onPointerDown(e){this.session=new xH(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:vH(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:hj(e),onStart:hj(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&dr.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=Qy(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const T2={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function fj(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const ay={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Pt.test(t))t=parseFloat(t);else return t;const n=fj(t,e.target.x),r=fj(t,e.target.y);return`${n}% ${r}%`}},rye={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Zd.parse(t);if(i.length>5)return r;const s=Zd.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=br(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}};let yI=!1;class iye extends N.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;Age(sye),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),yI&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),T2.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:o}=r;return o&&(o.isPresent=s,yI=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||dr.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),VP.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;yI=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function wH(t){const[e,n]=Vq(),r=N.useContext(wP);return k.jsx(iye,{...t,layoutGroup:r,switchLayoutGroup:N.useContext(tH),isPresent:e,safeToRemove:n})}const sye={borderRadius:{...ay,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ay,borderTopRightRadius:ay,borderBottomLeftRadius:ay,borderBottomRightRadius:ay,boxShadow:rye};function oye(t,e,n){const r=_s(t)?t:sg(t);return r.start(e4("",r,e,n)),r.animation}const aye=(t,e)=>t.depth-e.depth;class lye{constructor(){this.children=[],this.isDirty=!1}add(e){CP(this.children,e),this.isDirty=!0}remove(e){NP(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(aye),this.isDirty=!1,this.children.forEach(e)}}function cye(t,e){const n=fo.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(Yd(r),t(s-e))};return dr.setup(r,!0),()=>Yd(r)}const kH=["TopLeft","TopRight","BottomLeft","BottomRight"],uye=kH.length,pj=t=>typeof t=="string"?parseFloat(t):t,mj=t=>typeof t=="number"||Pt.test(t);function dye(t,e,n,r,i,s){i?(t.opacity=br(0,n.opacity??1,hye(r)),t.opacityExit=br(e.opacity??1,0,fye(r))):s&&(t.opacity=br(e.opacity??1,n.opacity??1,r));for(let o=0;o<uye;o++){const a=`border${kH[o]}Radius`;let l=gj(e,a),c=gj(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||mj(l)===mj(c)?(t[a]=Math.max(br(pj(l),pj(c),r),0),(hc.test(c)||hc.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=br(e.rotate||0,n.rotate||0,r))}function gj(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const hye=SH(0,.5,cq),fye=SH(.5,.95,Ma);function SH(t,e,n){return r=>r<t?0:r>e?1:n(_1(t,e,r))}function yj(t,e){t.min=e.min,t.max=e.max}function pa(t,e){yj(t.x,e.x),yj(t.y,e.y)}function vj(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function xj(t,e,n,r,i){return t-=e,t=xk(t,1/n,r),i!==void 0&&(t=xk(t,1/i,r)),t}function pye(t,e=0,n=1,r=.5,i,s=t,o=t){if(hc.test(e)&&(e=parseFloat(e),e=br(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=br(s.min,s.max,r);t===s&&(a-=e),t.min=xj(t.min,e,n,a,i),t.max=xj(t.max,e,n,a,i)}function bj(t,e,[n,r,i],s,o){pye(t,e[n],e[r],e[i],e.scale,s,o)}const mye=["x","scaleX","originX"],gye=["y","scaleY","originY"];function wj(t,e,n,r){bj(t.x,e,mye,n?n.x:void 0,r?r.x:void 0),bj(t.y,e,gye,n?n.y:void 0,r?r.y:void 0)}function kj(t){return t.translate===0&&t.scale===1}function CH(t){return kj(t.x)&&kj(t.y)}function Sj(t,e){return t.min===e.min&&t.max===e.max}function yye(t,e){return Sj(t.x,e.x)&&Sj(t.y,e.y)}function Cj(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function NH(t,e){return Cj(t.x,e.x)&&Cj(t.y,e.y)}function Nj(t){return Gs(t.x)/Gs(t.y)}function Aj(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class vye{constructor(){this.members=[]}add(e){CP(this.members,e),e.scheduleRender()}remove(e){if(NP(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function xye(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:d,rotateY:h,skewX:f,skewY:p}=n;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),d&&(r+=`rotateX(${d}deg) `),h&&(r+=`rotateY(${h}deg) `),f&&(r+=`skewX(${f}deg) `),p&&(r+=`skewY(${p}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const vI=["","X","Y","Z"],bye=1e3;let wye=0;function xI(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function AH(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=dH(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",dr,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&AH(r)}function IH({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=wye++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Cye),this.nodes.forEach(_ye),this.nodes.forEach(Eye),this.nodes.forEach(Nye)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new lye)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new _P),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=Uq(o)&&!uge(o),this.instance=o;const{layoutId:a,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),t){let u,d=0;const h=()=>this.root.updateBlockedByResize=!1;dr.read(()=>{d=window.innerWidth}),t(o,()=>{const f=window.innerWidth;f!==d&&(d=f,this.root.updateBlockedByResize=!0,u&&u(),u=cye(h,250),T2.hasAnimatedSinceResize&&(T2.hasAnimatedSinceResize=!1,this.nodes.forEach(Ej)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&c&&(a||l)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:d,hasRelativeLayoutChanged:h,layout:f})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const p=this.options.transition||c.getDefaultTransition()||Oye,{onLayoutAnimationStart:m,onLayoutAnimationComplete:y}=c.getProps(),g=!this.targetLayout||!NH(this.targetLayout,f),v=!d&&h;if(this.options.layoutRoot||this.resumeFrom||v||d&&(g||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const x={...zP(p,"layout"),onPlay:m,onComplete:y};(c.shouldReduceMotion||this.options.layoutRoot)&&(x.delay=0,x.type=!1),this.startAnimation(x),this.setAnimationOrigin(u,v)}else d||Ej(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=f})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Yd(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Tye),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&AH(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const d=this.path[u];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Ij);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(_j);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Iye),this.nodes.forEach(kye),this.nodes.forEach(Sye)):this.nodes.forEach(_j),this.clearAllSnapshots();const a=fo.now();es.delta=xu(0,1e3/60,a-es.timestamp),es.timestamp=a,es.isProcessing=!0,aI.update.process(es),aI.preRender.process(es),aI.render.process(es),es.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,VP.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Aye),this.sharedNodes.forEach($ye)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,dr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){dr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Gs(this.snapshot.measuredBox.x)&&!Gs(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Hr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!CH(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&this.instance&&(a||of(this.latestValues)||u)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),Dye(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:o}=this.options;if(!o)return Hr();const a=o.measureViewportBox();if(!(((c=this.scroll)==null?void 0:c.wasRoot)||this.path.some(Lye))){const{scroll:u}=this.root;u&&(Im(a.x,u.offset.x),Im(a.y,u.offset.y))}return a}removeElementScroll(o){var l;const a=Hr();if(pa(a,o),(l=this.scroll)!=null&&l.wasRoot)return a;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:h}=u;u!==this.root&&d&&h.layoutScroll&&(d.wasRoot&&pa(a,o),Im(a.x,d.offset.x),Im(a.y,d.offset.y))}return a}applyTransform(o,a=!1){const l=Hr();pa(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&_m(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),of(u.latestValues)&&_m(l,u.latestValues)}return of(this.latestValues)&&_m(l,this.latestValues),l}removeTransform(o){const a=Hr();pa(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!of(c.latestValues))continue;iT(c.latestValues)&&c.updateSnapshot();const u=Hr(),d=c.measurePageBox();pa(u,d),wj(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return of(this.latestValues)&&wj(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==es.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var h;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(h=this.parent)!=null&&h.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:d}=this.options;if(!(!this.layout||!(u||d))){if(this.resolvedRelativeTargetAt=es.timestamp,!this.targetDelta&&!this.relativeTarget){const f=this.getClosestProjectingParent();f&&f.layout&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Hr(),this.relativeTargetOrigin=Hr(),t1(this.relativeTargetOrigin,this.layout.layoutBox,f.layout.layoutBox),pa(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Hr(),this.targetWithTransforms=Hr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),U0e(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):pa(this.target,this.layout.layoutBox),sH(this.target,this.targetDelta)):pa(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const f=this.getClosestProjectingParent();f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Hr(),this.relativeTargetOrigin=Hr(),t1(this.relativeTargetOrigin,this.target,f.target),pa(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||iT(this.parent.latestValues)||iH(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var p;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===es.timestamp&&(l=!1),l)return;const{layout:c,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||u))return;pa(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,h=this.treeScale.y;e0e(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Hr());const{target:f}=o;if(!f){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(vj(this.prevProjectionDelta.x,this.projectionDelta.x),vj(this.prevProjectionDelta.y,this.projectionDelta.y)),e1(this.projectionDelta,this.layoutCorrected,f,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==h||!Aj(this.projectionDelta.x,this.prevProjectionDelta.x)||!Aj(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",f))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Em(),this.projectionDelta=Em(),this.projectionDeltaWithTransform=Em()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},d=Em();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const h=Hr(),f=l?l.source:void 0,p=this.layout?this.layout.source:void 0,m=f!==p,y=this.getStack(),g=!y||y.members.length<=1,v=!!(m&&!g&&this.options.crossfade===!0&&!this.path.some(Rye));this.animationProgress=0;let x;this.mixTargetDelta=b=>{const S=b/1e3;Tj(d.x,o.x,S),Tj(d.y,o.y,S),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(t1(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Pye(this.relativeTarget,this.relativeTargetOrigin,h,S),x&&yye(this.relativeTarget,x)&&(this.isProjectionDirty=!1),x||(x=Hr()),pa(x,this.relativeTarget)),m&&(this.animationValues=u,dye(u,c,this.latestValues,S,v,g)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=S},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,l,c;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(c=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||c.stop(),this.pendingAnimation&&(Yd(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=dr.update(()=>{T2.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=sg(0)),this.currentAnimation=oye(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),o.onUpdate&&o.onUpdate(u)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(bye),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&_H(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Hr();const d=Gs(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const h=Gs(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+h}pa(a,l),_m(a,u),e1(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new vye),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&xI("z",o,c,this.animationValues);for(let u=0;u<vI.length;u++)xI(`rotate${vI[u]}`,o,c,this.animationValues),xI(`skew${vI[u]}`,o,c,this.animationValues);o.render();for(const u in c)o.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=E2(a==null?void 0:a.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none";return}const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=E2(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!of(this.latestValues)&&(o.transform=l?l({},""):"none",this.hasProjected=!1);return}o.visibility="";const u=c.animationValues||c.latestValues;this.applyTransformsToTarget();let d=xye(this.projectionDeltaWithTransform,this.treeScale,u);l&&(d=l(u,d)),o.transform=d;const{x:h,y:f}=this.projectionDelta;o.transformOrigin=`${h.origin*100}% ${f.origin*100}% 0`,c.animationValues?o.opacity=c===this?u.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:o.opacity=c===this?u.opacity!==void 0?u.opacity:"":u.opacityExit!==void 0?u.opacityExit:0;for(const p in P1){if(u[p]===void 0)continue;const{correct:m,applyTo:y,isCSSVariable:g}=P1[p],v=d==="none"?u[p]:m(u[p],c);if(y){const x=y.length;for(let b=0;b<x;b++)o[y[b]]=v}else g?this.options.visualElement.renderState.vars[p]=v:o[p]=v}this.options.layoutId&&(o.pointerEvents=c===this?E2(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(Ij),this.root.sharedNodes.clear()}}}function kye(t){t.updateLayout()}function Sye(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=e.source!==t.layout.source;s==="size"?ba(d=>{const h=o?e.measuredBox[d]:e.layoutBox[d],f=Gs(h);h.min=r[d].min,h.max=h.min+f}):_H(s,e.layoutBox,r)&&ba(d=>{const h=o?e.measuredBox[d]:e.layoutBox[d],f=Gs(r[d]);h.max=h.min+f,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+f)});const a=Em();e1(a,r,e.layoutBox);const l=Em();o?e1(l,t.applyTransform(i,!0),e.measuredBox):e1(l,r,e.layoutBox);const c=!CH(a);let u=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:h,layout:f}=d;if(h&&f){const p=Hr();t1(p,e.layoutBox,h.layoutBox);const m=Hr();t1(m,r,f.layoutBox),NH(p,m)||(u=!0),d.options.layoutRoot&&(t.relativeTarget=m,t.relativeTargetOrigin=p,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function Cye(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Nye(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Aye(t){t.clearSnapshot()}function Ij(t){t.clearMeasurements()}function _j(t){t.isLayoutDirty=!1}function Iye(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Ej(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function _ye(t){t.resolveTargetDelta()}function Eye(t){t.calcProjection()}function Tye(t){t.resetSkewAndRotation()}function $ye(t){t.removeLeadSnapshot()}function Tj(t,e,n){t.translate=br(e.translate,0,n),t.scale=br(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function $j(t,e,n,r){t.min=br(e.min,n.min,r),t.max=br(e.max,n.max,r)}function Pye(t,e,n,r){$j(t.x,e.x,n.x,r),$j(t.y,e.y,n.y,r)}function Rye(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Oye={duration:.45,ease:[.4,0,.1,1]},Pj=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Rj=Pj("applewebkit/")&&!Pj("chrome/")?Math.round:Ma;function Oj(t){t.min=Rj(t.min),t.max=Rj(t.max)}function Dye(t){Oj(t.x),Oj(t.y)}function _H(t,e,n){return t==="position"||t==="preserve-aspect"&&!z0e(Nj(e),Nj(n),.2)}function Lye(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const Mye=IH({attachResizeListener:(t,e)=>R1(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),bI={current:void 0},EH=IH({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!bI.current){const t=new Mye({});t.mount(window),t.setOptions({layoutScroll:!0}),bI.current=t}return bI.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Fye={pan:{Feature:nye},drag:{Feature:tye,ProjectionNode:EH,MeasureLayout:wH}};function Dj(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&dr.postRender(()=>s(e,kv(e)))}class jye extends ph{mount(){const{current:e}=this.node;e&&(this.unmount=sge(e,(n,r)=>(Dj(this.node,r,"Start"),i=>Dj(this.node,i,"End"))))}unmount(){}}class Bye extends ph{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=xv(R1(this.node.current,"focus",()=>this.onFocus()),R1(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Lj(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&dr.postRender(()=>s(e,kv(e)))}class zye extends ph{mount(){const{current:e}=this.node;e&&(this.unmount=cge(e,(n,r)=>(Lj(this.node,r,"Start"),(i,{success:s})=>Lj(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const dT=new WeakMap,wI=new WeakMap,Uye=t=>{const e=dT.get(t.target);e&&e(t)},Vye=t=>{t.forEach(Uye)};function Wye({root:t,...e}){const n=t||document;wI.has(n)||wI.set(n,{});const r=wI.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(Vye,{root:t,...e})),r[i]}function Gye(t,e,n){const r=Wye(e);return dT.set(t,n),r.observe(t),()=>{dT.delete(t),r.unobserve(t)}}const qye={some:0,all:1};class Hye extends ph{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:qye[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:d}=this.node.getProps(),h=c?u:d;h&&h(l)};return Gye(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Kye(e,n))&&this.startObserver()}unmount(){}}function Kye({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const Xye={inView:{Feature:Hye},tap:{Feature:zye},focus:{Feature:Bye},hover:{Feature:jye}},Yye={layout:{ProjectionNode:EH,MeasureLayout:wH}},Zye={...D0e,...Xye,...Fye,...Yye},ml=Zge(Zye,u0e);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jye=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Qye=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),Mj=t=>{const e=Qye(t);return e.charAt(0).toUpperCase()+e.slice(1)},TH=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),e1e=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var t1e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n1e=N.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>N.createElement("svg",{ref:l,...t1e,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:TH("lucide",i),...!s&&!e1e(a)&&{"aria-hidden":"true"},...a},[...o.map(([c,u])=>N.createElement(c,u)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jr=(t,e)=>{const n=N.forwardRef(({className:r,...i},s)=>N.createElement(n1e,{ref:s,iconNode:e,className:TH(`lucide-${Jye(Mj(t))}`,`lucide-${t}`,r),...i}));return n.displayName=Mj(t),n};/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r1e=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],i1e=Jr("activity",r1e);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s1e=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],o1e=Jr("calendar",s1e);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a1e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],$H=Jr("circle-alert",a1e);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1e=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Fj=Jr("circle-check-big",l1e);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c1e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],u1e=Jr("circle",c1e);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d1e=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],h1e=Jr("download",d1e);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f1e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],p1e=Jr("info",f1e);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m1e=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],bk=Jr("lightbulb",m1e);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g1e=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],jj=Jr("loader-circle",g1e);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y1e=[["path",{d:"M5 12h14",key:"1ays0h"}]],PH=Jr("minus",y1e);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v1e=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],x1e=Jr("play",v1e);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b1e=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],RH=Jr("refresh-cw",b1e);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w1e=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],k1e=Jr("settings",w1e);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S1e=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],C1e=Jr("shield-check",S1e);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N1e=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],OH=Jr("trending-down",N1e);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A1e=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],DH=Jr("trending-up",A1e);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I1e=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],_1e=Jr("triangle-alert",I1e);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E1e=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Bj=Jr("wifi-off",E1e);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T1e=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],zj=Jr("wifi",T1e);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1e=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],P1e=Jr("wrench",$1e);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R1e=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],O1e=Jr("zap",R1e);function En(t){"@babel/helpers - typeof";return En=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},En(t)}var El=Uint8Array,Vo=Uint16Array,t4=Int32Array,n4=new El([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),r4=new El([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Uj=new El([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),LH=function(t,e){for(var n=new Vo(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new t4(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},MH=LH(n4,2),D1e=MH.b,hT=MH.r;D1e[28]=258,hT[258]=28;var L1e=LH(r4,0),Vj=L1e.r,fT=new Vo(32768);for(var rr=0;rr<32768;++rr){var dd=(rr&43690)>>1|(rr&21845)<<1;dd=(dd&52428)>>2|(dd&13107)<<2,dd=(dd&61680)>>4|(dd&3855)<<4,fT[rr]=((dd&65280)>>8|(dd&255)<<8)>>1}var n1=function(t,e,n){for(var r=t.length,i=0,s=new Vo(e);i<r;++i)t[i]&&++s[t[i]-1];var o=new Vo(e);for(i=1;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(n){a=new Vo(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var c=i<<4|t[i],u=e-t[i],d=o[t[i]-1]++<<u,h=d|(1<<u)-1;d<=h;++d)a[fT[d]>>l]=c}else for(a=new Vo(r),i=0;i<r;++i)t[i]&&(a[i]=fT[o[t[i]-1]++]>>15-t[i]);return a},Kf=new El(288);for(var rr=0;rr<144;++rr)Kf[rr]=8;for(var rr=144;rr<256;++rr)Kf[rr]=9;for(var rr=256;rr<280;++rr)Kf[rr]=7;for(var rr=280;rr<288;++rr)Kf[rr]=8;var wk=new El(32);for(var rr=0;rr<32;++rr)wk[rr]=5;var M1e=n1(Kf,9,0),F1e=n1(wk,5,0),FH=function(t){return(t+7)/8|0},j1e=function(t,e,n){return(e==null||e<0)&&(e=0),(n==null||n>t.length)&&(n=t.length),new El(t.subarray(e,n))},Hc=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},ly=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},kI=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,s=n.slice();if(!i)return{t:BH,l:0};if(i==1){var o=new El(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(S,A){return S.f-A.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,u=1,d=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};u!=i-1;)a=n[n[c].f<n[d].f?c++:d++],l=n[c!=u&&n[c].f<n[d].f?c++:d++],n[u++]={s:-1,f:a.f+l.f,l:a,r:l};for(var h=s[0].s,r=1;r<i;++r)s[r].s>h&&(h=s[r].s);var f=new Vo(h+1),p=pT(n[u-1],f,0);if(p>e){var r=0,m=0,y=p-e,g=1<<y;for(s.sort(function(A,E){return f[E.s]-f[A.s]||A.f-E.f});r<i;++r){var v=s[r].s;if(f[v]>e)m+=g-(1<<p-f[v]),f[v]=e;else break}for(m>>=y;m>0;){var x=s[r].s;f[x]<e?m-=1<<e-f[x]++-1:++r}for(;r>=0&&m;--r){var b=s[r].s;f[b]==e&&(--f[b],++m)}p=e}return{t:new El(f),l:p}},pT=function(t,e,n){return t.s==-1?Math.max(pT(t.l,e,n+1),pT(t.r,e,n+1)):e[t.s]=n},Wj=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Vo(++e),r=0,i=t[0],s=1,o=function(l){n[r++]=l},a=1;a<=e;++a)if(t[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=t[a]}return{c:n.subarray(0,r),n:e}},cy=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},jH=function(t,e,n){var r=n.length,i=FH(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var s=0;s<r;++s)t[i+s+4]=n[s];return(i+4+r)*8},Gj=function(t,e,n,r,i,s,o,a,l,c,u){Hc(e,u++,n),++i[256];for(var d=kI(i,15),h=d.t,f=d.l,p=kI(s,15),m=p.t,y=p.l,g=Wj(h),v=g.c,x=g.n,b=Wj(m),S=b.c,A=b.n,E=new Vo(19),I=0;I<v.length;++I)++E[v[I]&31];for(var I=0;I<S.length;++I)++E[S[I]&31];for(var T=kI(E,7),O=T.t,$=T.l,R=19;R>4&&!O[Uj[R-1]];--R);var F=c+5<<3,L=cy(i,Kf)+cy(s,wk)+o,U=cy(i,h)+cy(s,m)+o+14+3*R+cy(E,O)+2*E[16]+3*E[17]+7*E[18];if(l>=0&&F<=L&&F<=U)return jH(e,u,t.subarray(l,l+c));var q,K,j,Y;if(Hc(e,u,1+(U<L)),u+=2,U<L){q=n1(h,f,0),K=h,j=n1(m,y,0),Y=m;var ae=n1(O,$,0);Hc(e,u,x-257),Hc(e,u+5,A-1),Hc(e,u+10,R-4),u+=14;for(var I=0;I<R;++I)Hc(e,u+3*I,O[Uj[I]]);u+=3*R;for(var le=[v,S],M=0;M<2;++M)for(var V=le[M],I=0;I<V.length;++I){var H=V[I]&31;Hc(e,u,ae[H]),u+=O[H],H>15&&(Hc(e,u,V[I]>>5&127),u+=V[I]>>12)}}else q=M1e,K=Kf,j=F1e,Y=wk;for(var I=0;I<a;++I){var J=r[I];if(J>255){var H=J>>18&31;ly(e,u,q[H+257]),u+=K[H+257],H>7&&(Hc(e,u,J>>23&31),u+=n4[H]);var oe=J&31;ly(e,u,j[oe]),u+=Y[oe],oe>3&&(ly(e,u,J>>5&8191),u+=r4[oe])}else ly(e,u,q[J]),u+=K[J]}return ly(e,u,q[256]),u+K[256]},B1e=new t4([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),BH=new El(0),z1e=function(t,e,n,r,i,s){var o=s.z||t.length,a=new El(r+o+5*(1+Math.ceil(o/7e3))+i),l=a.subarray(r,a.length-i),c=s.l,u=(s.r||0)&7;if(e){u&&(l[0]=s.r>>3);for(var d=B1e[e-1],h=d>>13,f=d&8191,p=(1<<n)-1,m=s.p||new Vo(32768),y=s.h||new Vo(p+1),g=Math.ceil(n/3),v=2*g,x=function(we){return(t[we]^t[we+1]<<g^t[we+2]<<v)&p},b=new t4(25e3),S=new Vo(288),A=new Vo(32),E=0,I=0,T=s.i||0,O=0,$=s.w||0,R=0;T+2<o;++T){var F=x(T),L=T&32767,U=y[F];if(m[L]=U,y[F]=L,$<=T){var q=o-T;if((E>7e3||O>24576)&&(q>423||!c)){u=Gj(t,l,0,b,S,A,I,O,R,T-R,u),O=E=I=0,R=T;for(var K=0;K<286;++K)S[K]=0;for(var K=0;K<30;++K)A[K]=0}var j=2,Y=0,ae=f,le=L-U&32767;if(q>2&&F==x(T-le))for(var M=Math.min(h,q)-1,V=Math.min(32767,T),H=Math.min(258,q);le<=V&&--ae&&L!=U;){if(t[T+j]==t[T+j-le]){for(var J=0;J<H&&t[T+J]==t[T+J-le];++J);if(J>j){if(j=J,Y=le,J>M)break;for(var oe=Math.min(le,J-2),ce=0,K=0;K<oe;++K){var ge=T-le+K&32767,ee=m[ge],fe=ge-ee&32767;fe>ce&&(ce=fe,U=ge)}}}L=U,U=m[L],le+=L-U&32767}if(Y){b[O++]=268435456|hT[j]<<18|Vj[Y];var Se=hT[j]&31,me=Vj[Y]&31;I+=n4[Se]+r4[me],++S[257+Se],++A[me],$=T+j,++E}else b[O++]=t[T],++S[t[T]]}}for(T=Math.max(T,$);T<o;++T)b[O++]=t[T],++S[t[T]];u=Gj(t,l,c,b,S,A,I,O,R,T-R,u),c||(s.r=u&7|l[u/8|0]<<3,u-=7,s.h=y,s.p=m,s.i=T,s.w=$)}else{for(var T=s.w||0;T<o+c;T+=65535){var Le=T+65535;Le>=o&&(l[u/8|0]=c,Le=o),u=jH(l,u+1,t.subarray(T,Le))}s.i=o}return j1e(a,0,r+FH(u)+i)},zH=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,s=n.length|0,o=0;o!=s;){for(var a=Math.min(o+2655,s);o<a;++o)i+=r+=n[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},U1e=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new El(s.length+t.length);o.set(s),o.set(t,s.length),t=o,i.w=s.length}return z1e(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,i)},UH=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},V1e=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=zH();i.p(e.dictionary),UH(t,2,i.d())}};function mT(t,e){e||(e={});var n=zH();n.p(t);var r=U1e(t,e,e.dictionary?6:2,4);return V1e(r,e),UH(r,r.length-4,n.d()),r}var W1e=typeof TextDecoder<"u"&&new TextDecoder,G1e=0;try{W1e.decode(BH,{stream:!0}),G1e=1}catch{}function q1e(t){if(Array.isArray(t))return t}function H1e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}function qj(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function K1e(t,e){if(t){if(typeof t=="string")return qj(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qj(t,e):void 0}}function X1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hj(t,e){return q1e(t)||H1e(t,e)||K1e(t,e)||X1e()}function Kj(t,e="utf8"){return new TextDecoder(e).decode(t)}const Y1e=new TextEncoder;function Z1e(t){return Y1e.encode(t)}const J1e=1024*8,Q1e=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),SI={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class i4{constructor(e=J1e,n={}){Lt(this,"buffer");Lt(this,"byteLength");Lt(this,"byteOffset");Lt(this,"length");Lt(this,"offset");Lt(this,"lastWrittenByte");Lt(this,"littleEndian");Lt(this,"_data");Lt(this,"_mark");Lt(this,"_marks");let r=!1;typeof e=="number"?e=new ArrayBuffer(e):(r=!0,this.lastWrittenByte=e.byteLength);const i=n.offset?n.offset>>>0:0,s=e.byteLength-i;let o=i;(ArrayBuffer.isView(e)||e instanceof i4)&&(e.byteLength!==e.buffer.byteLength&&(o=e.byteOffset+i),e=e.buffer),r?this.lastWrittenByte=s:this.lastWrittenByte=0,this.buffer=e,this.length=s,this.byteLength=s,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,s),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const r=(this.offset+e)*2,i=new Uint8Array(r);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,n){const r=SI[n].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,s=this.buffer.slice(i,i+r);if(this.littleEndian===Q1e&&n!=="uint8"&&n!=="int8"){const a=new Uint8Array(this.buffer.slice(i,i+r));a.reverse();const l=new SI[n](a.buffer);return this.offset+=r,l.reverse(),l}const o=new SI[n](s);return this.offset+=r,o}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let n="";for(let r=0;r<e;r++)n+=this.readChar();return n}readUtf8(e=1){return Kj(this.readBytes(e))}decodeText(e=1,n="utf8"){return Kj(this.readBytes(e),n)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let n=0;n<e.length;n++)this._data.setUint8(this.offset++,e[n]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let n=0;n<e.length;n++)this.writeUint8(e.charCodeAt(n));return this}writeUtf8(e){return this.writeBytes(Z1e(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const eve=4,Xj=0,Yj=1,tve=2;function Gg(t){let e=t.length;for(;--e>=0;)t[e]=0}const nve=0,VH=1,rve=2,ive=3,sve=258,s4=29,Sv=256,O1=Sv+1+s4,Bm=30,o4=19,WH=2*O1+1,kf=15,CI=16,ove=7,a4=256,GH=16,qH=17,HH=18,gT=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),$2=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),ave=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),KH=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),lve=512,Zc=new Array((O1+2)*2);Gg(Zc);const r1=new Array(Bm*2);Gg(r1);const D1=new Array(lve);Gg(D1);const L1=new Array(sve-ive+1);Gg(L1);const l4=new Array(s4);Gg(l4);const kk=new Array(Bm);Gg(kk);function NI(t,e,n,r,i){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=t&&t.length}let XH,YH,ZH;function AI(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}const JH=t=>t<256?D1[t]:D1[256+(t>>>7)],M1=(t,e)=>{t.pending_buf[t.pending++]=e&255,t.pending_buf[t.pending++]=e>>>8&255},po=(t,e,n)=>{t.bi_valid>CI-n?(t.bi_buf|=e<<t.bi_valid&65535,M1(t,t.bi_buf),t.bi_buf=e>>CI-t.bi_valid,t.bi_valid+=n-CI):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)},rc=(t,e,n)=>{po(t,n[e*2],n[e*2+1])},QH=(t,e)=>{let n=0;do n|=t&1,t>>>=1,n<<=1;while(--e>0);return n>>>1},cve=t=>{t.bi_valid===16?(M1(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=t.bi_buf&255,t.bi_buf>>=8,t.bi_valid-=8)},uve=(t,e)=>{const n=e.dyn_tree,r=e.max_code,i=e.stat_desc.static_tree,s=e.stat_desc.has_stree,o=e.stat_desc.extra_bits,a=e.stat_desc.extra_base,l=e.stat_desc.max_length;let c,u,d,h,f,p,m=0;for(h=0;h<=kf;h++)t.bl_count[h]=0;for(n[t.heap[t.heap_max]*2+1]=0,c=t.heap_max+1;c<WH;c++)u=t.heap[c],h=n[n[u*2+1]*2+1]+1,h>l&&(h=l,m++),n[u*2+1]=h,!(u>r)&&(t.bl_count[h]++,f=0,u>=a&&(f=o[u-a]),p=n[u*2],t.opt_len+=p*(h+f),s&&(t.static_len+=p*(i[u*2+1]+f)));if(m!==0){do{for(h=l-1;t.bl_count[h]===0;)h--;t.bl_count[h]--,t.bl_count[h+1]+=2,t.bl_count[l]--,m-=2}while(m>0);for(h=l;h!==0;h--)for(u=t.bl_count[h];u!==0;)d=t.heap[--c],!(d>r)&&(n[d*2+1]!==h&&(t.opt_len+=(h-n[d*2+1])*n[d*2],n[d*2+1]=h),u--)}},eK=(t,e,n)=>{const r=new Array(kf+1);let i=0,s,o;for(s=1;s<=kf;s++)i=i+n[s-1]<<1,r[s]=i;for(o=0;o<=e;o++){let a=t[o*2+1];a!==0&&(t[o*2]=QH(r[a]++,a))}},dve=()=>{let t,e,n,r,i;const s=new Array(kf+1);for(n=0,r=0;r<s4-1;r++)for(l4[r]=n,t=0;t<1<<gT[r];t++)L1[n++]=r;for(L1[n-1]=r,i=0,r=0;r<16;r++)for(kk[r]=i,t=0;t<1<<$2[r];t++)D1[i++]=r;for(i>>=7;r<Bm;r++)for(kk[r]=i<<7,t=0;t<1<<$2[r]-7;t++)D1[256+i++]=r;for(e=0;e<=kf;e++)s[e]=0;for(t=0;t<=143;)Zc[t*2+1]=8,t++,s[8]++;for(;t<=255;)Zc[t*2+1]=9,t++,s[9]++;for(;t<=279;)Zc[t*2+1]=7,t++,s[7]++;for(;t<=287;)Zc[t*2+1]=8,t++,s[8]++;for(eK(Zc,O1+1,s),t=0;t<Bm;t++)r1[t*2+1]=5,r1[t*2]=QH(t,5);XH=new NI(Zc,gT,Sv+1,O1,kf),YH=new NI(r1,$2,0,Bm,kf),ZH=new NI(new Array(0),ave,0,o4,ove)},tK=t=>{let e;for(e=0;e<O1;e++)t.dyn_ltree[e*2]=0;for(e=0;e<Bm;e++)t.dyn_dtree[e*2]=0;for(e=0;e<o4;e++)t.bl_tree[e*2]=0;t.dyn_ltree[a4*2]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},nK=t=>{t.bi_valid>8?M1(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},Zj=(t,e,n,r)=>{const i=e*2,s=n*2;return t[i]<t[s]||t[i]===t[s]&&r[e]<=r[n]},II=(t,e,n)=>{const r=t.heap[n];let i=n<<1;for(;i<=t.heap_len&&(i<t.heap_len&&Zj(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!Zj(e,r,t.heap[i],t.depth));)t.heap[n]=t.heap[i],n=i,i<<=1;t.heap[n]=r},Jj=(t,e,n)=>{let r,i,s=0,o,a;if(t.sym_next!==0)do r=t.pending_buf[t.sym_buf+s++]&255,r+=(t.pending_buf[t.sym_buf+s++]&255)<<8,i=t.pending_buf[t.sym_buf+s++],r===0?rc(t,i,e):(o=L1[i],rc(t,o+Sv+1,e),a=gT[o],a!==0&&(i-=l4[o],po(t,i,a)),r--,o=JH(r),rc(t,o,n),a=$2[o],a!==0&&(r-=kk[o],po(t,r,a)));while(s<t.sym_next);rc(t,a4,e)},yT=(t,e)=>{const n=e.dyn_tree,r=e.stat_desc.static_tree,i=e.stat_desc.has_stree,s=e.stat_desc.elems;let o,a,l=-1,c;for(t.heap_len=0,t.heap_max=WH,o=0;o<s;o++)n[o*2]!==0?(t.heap[++t.heap_len]=l=o,t.depth[o]=0):n[o*2+1]=0;for(;t.heap_len<2;)c=t.heap[++t.heap_len]=l<2?++l:0,n[c*2]=1,t.depth[c]=0,t.opt_len--,i&&(t.static_len-=r[c*2+1]);for(e.max_code=l,o=t.heap_len>>1;o>=1;o--)II(t,n,o);c=s;do o=t.heap[1],t.heap[1]=t.heap[t.heap_len--],II(t,n,1),a=t.heap[1],t.heap[--t.heap_max]=o,t.heap[--t.heap_max]=a,n[c*2]=n[o*2]+n[a*2],t.depth[c]=(t.depth[o]>=t.depth[a]?t.depth[o]:t.depth[a])+1,n[o*2+1]=n[a*2+1]=c,t.heap[1]=c++,II(t,n,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],uve(t,e),eK(n,l,t.bl_count)},Qj=(t,e,n)=>{let r,i=-1,s,o=e[0*2+1],a=0,l=7,c=4;for(o===0&&(l=138,c=3),e[(n+1)*2+1]=65535,r=0;r<=n;r++)s=o,o=e[(r+1)*2+1],!(++a<l&&s===o)&&(a<c?t.bl_tree[s*2]+=a:s!==0?(s!==i&&t.bl_tree[s*2]++,t.bl_tree[GH*2]++):a<=10?t.bl_tree[qH*2]++:t.bl_tree[HH*2]++,a=0,i=s,o===0?(l=138,c=3):s===o?(l=6,c=3):(l=7,c=4))},e8=(t,e,n)=>{let r,i=-1,s,o=e[0*2+1],a=0,l=7,c=4;for(o===0&&(l=138,c=3),r=0;r<=n;r++)if(s=o,o=e[(r+1)*2+1],!(++a<l&&s===o)){if(a<c)do rc(t,s,t.bl_tree);while(--a!==0);else s!==0?(s!==i&&(rc(t,s,t.bl_tree),a--),rc(t,GH,t.bl_tree),po(t,a-3,2)):a<=10?(rc(t,qH,t.bl_tree),po(t,a-3,3)):(rc(t,HH,t.bl_tree),po(t,a-11,7));a=0,i=s,o===0?(l=138,c=3):s===o?(l=6,c=3):(l=7,c=4)}},hve=t=>{let e;for(Qj(t,t.dyn_ltree,t.l_desc.max_code),Qj(t,t.dyn_dtree,t.d_desc.max_code),yT(t,t.bl_desc),e=o4-1;e>=3&&t.bl_tree[KH[e]*2+1]===0;e--);return t.opt_len+=3*(e+1)+5+5+4,e},fve=(t,e,n,r)=>{let i;for(po(t,e-257,5),po(t,n-1,5),po(t,r-4,4),i=0;i<r;i++)po(t,t.bl_tree[KH[i]*2+1],3);e8(t,t.dyn_ltree,e-1),e8(t,t.dyn_dtree,n-1)},pve=t=>{let e=4093624447,n;for(n=0;n<=31;n++,e>>>=1)if(e&1&&t.dyn_ltree[n*2]!==0)return Xj;if(t.dyn_ltree[9*2]!==0||t.dyn_ltree[10*2]!==0||t.dyn_ltree[13*2]!==0)return Yj;for(n=32;n<Sv;n++)if(t.dyn_ltree[n*2]!==0)return Yj;return Xj};let t8=!1;const mve=t=>{t8||(dve(),t8=!0),t.l_desc=new AI(t.dyn_ltree,XH),t.d_desc=new AI(t.dyn_dtree,YH),t.bl_desc=new AI(t.bl_tree,ZH),t.bi_buf=0,t.bi_valid=0,tK(t)},rK=(t,e,n,r)=>{po(t,(nve<<1)+(r?1:0),3),nK(t),M1(t,n),M1(t,~n),n&&t.pending_buf.set(t.window.subarray(e,e+n),t.pending),t.pending+=n},gve=t=>{po(t,VH<<1,3),rc(t,a4,Zc),cve(t)},yve=(t,e,n,r)=>{let i,s,o=0;t.level>0?(t.strm.data_type===tve&&(t.strm.data_type=pve(t)),yT(t,t.l_desc),yT(t,t.d_desc),o=hve(t),i=t.opt_len+3+7>>>3,s=t.static_len+3+7>>>3,s<=i&&(i=s)):i=s=n+5,n+4<=i&&e!==-1?rK(t,e,n,r):t.strategy===eve||s===i?(po(t,(VH<<1)+(r?1:0),3),Jj(t,Zc,r1)):(po(t,(rve<<1)+(r?1:0),3),fve(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),Jj(t,t.dyn_ltree,t.dyn_dtree)),tK(t),r&&nK(t)},vve=(t,e,n)=>(t.pending_buf[t.sym_buf+t.sym_next++]=e,t.pending_buf[t.sym_buf+t.sym_next++]=e>>8,t.pending_buf[t.sym_buf+t.sym_next++]=n,e===0?t.dyn_ltree[n*2]++:(t.matches++,e--,t.dyn_ltree[(L1[n]+Sv+1)*2]++,t.dyn_dtree[JH(e)*2]++),t.sym_next===t.sym_end);var xve=mve,bve=rK,wve=yve,kve=vve,Sve=gve,Cve={_tr_init:xve,_tr_stored_block:bve,_tr_flush_block:wve,_tr_tally:kve,_tr_align:Sve};const Nve=(t,e,n,r)=>{let i=t&65535|0,s=t>>>16&65535|0,o=0;for(;n!==0;){o=n>2e3?2e3:n,n-=o;do i=i+e[r++]|0,s=s+i|0;while(--o);i%=65521,s%=65521}return i|s<<16|0};var F1=Nve;const Ave=()=>{let t,e=[];for(var n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=t&1?3988292384^t>>>1:t>>>1;e[n]=t}return e},Ive=new Uint32Array(Ave()),_ve=(t,e,n,r)=>{const i=Ive,s=r+n;t^=-1;for(let o=r;o<s;o++)t=t>>>8^i[(t^e[o])&255];return t^-1};var Oi=_ve,ag={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Cv={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:Eve,_tr_stored_block:vT,_tr_flush_block:Tve,_tr_tally:Bd,_tr_align:$ve}=Cve,{Z_NO_FLUSH:zd,Z_PARTIAL_FLUSH:Pve,Z_FULL_FLUSH:Rve,Z_FINISH:Aa,Z_BLOCK:n8,Z_OK:Qi,Z_STREAM_END:r8,Z_STREAM_ERROR:fc,Z_DATA_ERROR:Ove,Z_BUF_ERROR:_I,Z_DEFAULT_COMPRESSION:Dve,Z_FILTERED:Lve,Z_HUFFMAN_ONLY:bw,Z_RLE:Mve,Z_FIXED:Fve,Z_DEFAULT_STRATEGY:jve,Z_UNKNOWN:Bve,Z_DEFLATED:gC}=Cv,zve=9,Uve=15,Vve=8,Wve=29,Gve=256,xT=Gve+1+Wve,qve=30,Hve=19,Kve=2*xT+1,Xve=15,an=3,Ad=258,pc=Ad+an+1,Yve=32,lg=42,c4=57,bT=69,wT=73,kT=91,ST=103,Sf=113,$y=666,qs=1,qg=2,Xf=3,Hg=4,Zve=3,Cf=(t,e)=>(t.msg=ag[e],e),i8=t=>t*2-(t>4?9:0),kd=t=>{let e=t.length;for(;--e>=0;)t[e]=0},Jve=t=>{let e,n,r,i=t.w_size;e=t.hash_size,r=e;do n=t.head[--r],t.head[r]=n>=i?n-i:0;while(--e);e=i,r=e;do n=t.prev[--r],t.prev[r]=n>=i?n-i:0;while(--e)};let Qve=(t,e,n)=>(e<<t.hash_shift^n)&t.hash_mask,Ud=Qve;const Lo=t=>{const e=t.state;let n=e.pending;n>t.avail_out&&(n=t.avail_out),n!==0&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+n),t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,e.pending===0&&(e.pending_out=0))},Wo=(t,e)=>{Tve(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,Lo(t.strm)},wn=(t,e)=>{t.pending_buf[t.pending++]=e},uy=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=e&255},CT=(t,e,n,r)=>{let i=t.avail_in;return i>r&&(i=r),i===0?0:(t.avail_in-=i,e.set(t.input.subarray(t.next_in,t.next_in+i),n),t.state.wrap===1?t.adler=F1(t.adler,e,i,n):t.state.wrap===2&&(t.adler=Oi(t.adler,e,i,n)),t.next_in+=i,t.total_in+=i,i)},iK=(t,e)=>{let n=t.max_chain_length,r=t.strstart,i,s,o=t.prev_length,a=t.nice_match;const l=t.strstart>t.w_size-pc?t.strstart-(t.w_size-pc):0,c=t.window,u=t.w_mask,d=t.prev,h=t.strstart+Ad;let f=c[r+o-1],p=c[r+o];t.prev_length>=t.good_match&&(n>>=2),a>t.lookahead&&(a=t.lookahead);do if(i=e,!(c[i+o]!==p||c[i+o-1]!==f||c[i]!==c[r]||c[++i]!==c[r+1])){r+=2,i++;do;while(c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&r<h);if(s=Ad-(h-r),r=h-Ad,s>o){if(t.match_start=e,o=s,s>=a)break;f=c[r+o-1],p=c[r+o]}}while((e=d[e&u])>l&&--n!==0);return o<=t.lookahead?o:t.lookahead},cg=t=>{const e=t.w_size;let n,r,i;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-pc)&&(t.window.set(t.window.subarray(e,e+e-r),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,t.insert>t.strstart&&(t.insert=t.strstart),Jve(t),r+=e),t.strm.avail_in===0)break;if(n=CT(t.strm,t.window,t.strstart+t.lookahead,r),t.lookahead+=n,t.lookahead+t.insert>=an)for(i=t.strstart-t.insert,t.ins_h=t.window[i],t.ins_h=Ud(t,t.ins_h,t.window[i+1]);t.insert&&(t.ins_h=Ud(t,t.ins_h,t.window[i+an-1]),t.prev[i&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=i,i++,t.insert--,!(t.lookahead+t.insert<an)););}while(t.lookahead<pc&&t.strm.avail_in!==0)},sK=(t,e)=>{let n=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,r,i,s,o=0,a=t.strm.avail_in;do{if(r=65535,s=t.bi_valid+42>>3,t.strm.avail_out<s||(s=t.strm.avail_out-s,i=t.strstart-t.block_start,r>i+t.strm.avail_in&&(r=i+t.strm.avail_in),r>s&&(r=s),r<n&&(r===0&&e!==Aa||e===zd||r!==i+t.strm.avail_in)))break;o=e===Aa&&r===i+t.strm.avail_in?1:0,vT(t,0,0,o),t.pending_buf[t.pending-4]=r,t.pending_buf[t.pending-3]=r>>8,t.pending_buf[t.pending-2]=~r,t.pending_buf[t.pending-1]=~r>>8,Lo(t.strm),i&&(i>r&&(i=r),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+i),t.strm.next_out),t.strm.next_out+=i,t.strm.avail_out-=i,t.strm.total_out+=i,t.block_start+=i,r-=i),r&&(CT(t.strm,t.strm.output,t.strm.next_out,r),t.strm.next_out+=r,t.strm.avail_out-=r,t.strm.total_out+=r)}while(o===0);return a-=t.strm.avail_in,a&&(a>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=a&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-a,t.strm.next_in),t.strstart),t.strstart+=a,t.insert+=a>t.w_size-t.insert?t.w_size-t.insert:a),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),o?Hg:e!==zd&&e!==Aa&&t.strm.avail_in===0&&t.strstart===t.block_start?qg:(s=t.window_size-t.strstart,t.strm.avail_in>s&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,s+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),s>t.strm.avail_in&&(s=t.strm.avail_in),s&&(CT(t.strm,t.window,t.strstart,s),t.strstart+=s,t.insert+=s>t.w_size-t.insert?t.w_size-t.insert:s),t.high_water<t.strstart&&(t.high_water=t.strstart),s=t.bi_valid+42>>3,s=t.pending_buf_size-s>65535?65535:t.pending_buf_size-s,n=s>t.w_size?t.w_size:s,i=t.strstart-t.block_start,(i>=n||(i||e===Aa)&&e!==zd&&t.strm.avail_in===0&&i<=s)&&(r=i>s?s:i,o=e===Aa&&t.strm.avail_in===0&&r===i?1:0,vT(t,t.block_start,r,o),t.block_start+=r,Lo(t.strm)),o?Xf:qs)},EI=(t,e)=>{let n,r;for(;;){if(t.lookahead<pc){if(cg(t),t.lookahead<pc&&e===zd)return qs;if(t.lookahead===0)break}if(n=0,t.lookahead>=an&&(t.ins_h=Ud(t,t.ins_h,t.window[t.strstart+an-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),n!==0&&t.strstart-n<=t.w_size-pc&&(t.match_length=iK(t,n)),t.match_length>=an)if(r=Bd(t,t.strstart-t.match_start,t.match_length-an),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=an){t.match_length--;do t.strstart++,t.ins_h=Ud(t,t.ins_h,t.window[t.strstart+an-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(--t.match_length!==0);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=Ud(t,t.ins_h,t.window[t.strstart+1]);else r=Bd(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(Wo(t,!1),t.strm.avail_out===0))return qs}return t.insert=t.strstart<an-1?t.strstart:an-1,e===Aa?(Wo(t,!0),t.strm.avail_out===0?Xf:Hg):t.sym_next&&(Wo(t,!1),t.strm.avail_out===0)?qs:qg},em=(t,e)=>{let n,r,i;for(;;){if(t.lookahead<pc){if(cg(t),t.lookahead<pc&&e===zd)return qs;if(t.lookahead===0)break}if(n=0,t.lookahead>=an&&(t.ins_h=Ud(t,t.ins_h,t.window[t.strstart+an-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=an-1,n!==0&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-pc&&(t.match_length=iK(t,n),t.match_length<=5&&(t.strategy===Lve||t.match_length===an&&t.strstart-t.match_start>4096)&&(t.match_length=an-1)),t.prev_length>=an&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-an,r=Bd(t,t.strstart-1-t.prev_match,t.prev_length-an),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=i&&(t.ins_h=Ud(t,t.ins_h,t.window[t.strstart+an-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(--t.prev_length!==0);if(t.match_available=0,t.match_length=an-1,t.strstart++,r&&(Wo(t,!1),t.strm.avail_out===0))return qs}else if(t.match_available){if(r=Bd(t,0,t.window[t.strstart-1]),r&&Wo(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return qs}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=Bd(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<an-1?t.strstart:an-1,e===Aa?(Wo(t,!0),t.strm.avail_out===0?Xf:Hg):t.sym_next&&(Wo(t,!1),t.strm.avail_out===0)?qs:qg},exe=(t,e)=>{let n,r,i,s;const o=t.window;for(;;){if(t.lookahead<=Ad){if(cg(t),t.lookahead<=Ad&&e===zd)return qs;if(t.lookahead===0)break}if(t.match_length=0,t.lookahead>=an&&t.strstart>0&&(i=t.strstart-1,r=o[i],r===o[++i]&&r===o[++i]&&r===o[++i])){s=t.strstart+Ad;do;while(r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&i<s);t.match_length=Ad-(s-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=an?(n=Bd(t,1,t.match_length-an),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=Bd(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(Wo(t,!1),t.strm.avail_out===0))return qs}return t.insert=0,e===Aa?(Wo(t,!0),t.strm.avail_out===0?Xf:Hg):t.sym_next&&(Wo(t,!1),t.strm.avail_out===0)?qs:qg},txe=(t,e)=>{let n;for(;;){if(t.lookahead===0&&(cg(t),t.lookahead===0)){if(e===zd)return qs;break}if(t.match_length=0,n=Bd(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(Wo(t,!1),t.strm.avail_out===0))return qs}return t.insert=0,e===Aa?(Wo(t,!0),t.strm.avail_out===0?Xf:Hg):t.sym_next&&(Wo(t,!1),t.strm.avail_out===0)?qs:qg};function Hl(t,e,n,r,i){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=r,this.func=i}const Py=[new Hl(0,0,0,0,sK),new Hl(4,4,8,4,EI),new Hl(4,5,16,8,EI),new Hl(4,6,32,32,EI),new Hl(4,4,16,16,em),new Hl(8,16,32,32,em),new Hl(8,16,128,128,em),new Hl(8,32,128,256,em),new Hl(32,128,258,1024,em),new Hl(32,258,258,4096,em)],nxe=t=>{t.window_size=2*t.w_size,kd(t.head),t.max_lazy_match=Py[t.level].max_lazy,t.good_match=Py[t.level].good_length,t.nice_match=Py[t.level].nice_length,t.max_chain_length=Py[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=an-1,t.match_available=0,t.ins_h=0};function rxe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=gC,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Kve*2),this.dyn_dtree=new Uint16Array((2*qve+1)*2),this.bl_tree=new Uint16Array((2*Hve+1)*2),kd(this.dyn_ltree),kd(this.dyn_dtree),kd(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Xve+1),this.heap=new Uint16Array(2*xT+1),kd(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*xT+1),kd(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Nv=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.status!==lg&&e.status!==c4&&e.status!==bT&&e.status!==wT&&e.status!==kT&&e.status!==ST&&e.status!==Sf&&e.status!==$y?1:0},oK=t=>{if(Nv(t))return Cf(t,fc);t.total_in=t.total_out=0,t.data_type=Bve;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap===2?c4:e.wrap?lg:Sf,t.adler=e.wrap===2?0:1,e.last_flush=-2,Eve(e),Qi},aK=t=>{const e=oK(t);return e===Qi&&nxe(t.state),e},ixe=(t,e)=>Nv(t)||t.state.wrap!==2?fc:(t.state.gzhead=e,Qi),lK=(t,e,n,r,i,s)=>{if(!t)return fc;let o=1;if(e===Dve&&(e=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),i<1||i>zve||n!==gC||r<8||r>15||e<0||e>9||s<0||s>Fve||r===8&&o!==1)return Cf(t,fc);r===8&&(r=9);const a=new rxe;return t.state=a,a.strm=t,a.status=lg,a.wrap=o,a.gzhead=null,a.w_bits=r,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+an-1)/an),a.window=new Uint8Array(a.w_size*2),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=(a.lit_bufsize-1)*3,a.level=e,a.strategy=s,a.method=n,aK(t)},sxe=(t,e)=>lK(t,e,gC,Uve,Vve,jve),oxe=(t,e)=>{if(Nv(t)||e>n8||e<0)return t?Cf(t,fc):fc;const n=t.state;if(!t.output||t.avail_in!==0&&!t.input||n.status===$y&&e!==Aa)return Cf(t,t.avail_out===0?_I:fc);const r=n.last_flush;if(n.last_flush=e,n.pending!==0){if(Lo(t),t.avail_out===0)return n.last_flush=-1,Qi}else if(t.avail_in===0&&i8(e)<=i8(r)&&e!==Aa)return Cf(t,_I);if(n.status===$y&&t.avail_in!==0)return Cf(t,_I);if(n.status===lg&&n.wrap===0&&(n.status=Sf),n.status===lg){let i=gC+(n.w_bits-8<<4)<<8,s=-1;if(n.strategy>=bw||n.level<2?s=0:n.level<6?s=1:n.level===6?s=2:s=3,i|=s<<6,n.strstart!==0&&(i|=Yve),i+=31-i%31,uy(n,i),n.strstart!==0&&(uy(n,t.adler>>>16),uy(n,t.adler&65535)),t.adler=1,n.status=Sf,Lo(t),n.pending!==0)return n.last_flush=-1,Qi}if(n.status===c4){if(t.adler=0,wn(n,31),wn(n,139),wn(n,8),n.gzhead)wn(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),wn(n,n.gzhead.time&255),wn(n,n.gzhead.time>>8&255),wn(n,n.gzhead.time>>16&255),wn(n,n.gzhead.time>>24&255),wn(n,n.level===9?2:n.strategy>=bw||n.level<2?4:0),wn(n,n.gzhead.os&255),n.gzhead.extra&&n.gzhead.extra.length&&(wn(n,n.gzhead.extra.length&255),wn(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(t.adler=Oi(t.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=bT;else if(wn(n,0),wn(n,0),wn(n,0),wn(n,0),wn(n,0),wn(n,n.level===9?2:n.strategy>=bw||n.level<2?4:0),wn(n,Zve),n.status=Sf,Lo(t),n.pending!==0)return n.last_flush=-1,Qi}if(n.status===bT){if(n.gzhead.extra){let i=n.pending,s=(n.gzhead.extra.length&65535)-n.gzindex;for(;n.pending+s>n.pending_buf_size;){let a=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+a),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>i&&(t.adler=Oi(t.adler,n.pending_buf,n.pending-i,i)),n.gzindex+=a,Lo(t),n.pending!==0)return n.last_flush=-1,Qi;i=0,s-=a}let o=new Uint8Array(n.gzhead.extra);n.pending_buf.set(o.subarray(n.gzindex,n.gzindex+s),n.pending),n.pending+=s,n.gzhead.hcrc&&n.pending>i&&(t.adler=Oi(t.adler,n.pending_buf,n.pending-i,i)),n.gzindex=0}n.status=wT}if(n.status===wT){if(n.gzhead.name){let i=n.pending,s;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>i&&(t.adler=Oi(t.adler,n.pending_buf,n.pending-i,i)),Lo(t),n.pending!==0)return n.last_flush=-1,Qi;i=0}n.gzindex<n.gzhead.name.length?s=n.gzhead.name.charCodeAt(n.gzindex++)&255:s=0,wn(n,s)}while(s!==0);n.gzhead.hcrc&&n.pending>i&&(t.adler=Oi(t.adler,n.pending_buf,n.pending-i,i)),n.gzindex=0}n.status=kT}if(n.status===kT){if(n.gzhead.comment){let i=n.pending,s;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>i&&(t.adler=Oi(t.adler,n.pending_buf,n.pending-i,i)),Lo(t),n.pending!==0)return n.last_flush=-1,Qi;i=0}n.gzindex<n.gzhead.comment.length?s=n.gzhead.comment.charCodeAt(n.gzindex++)&255:s=0,wn(n,s)}while(s!==0);n.gzhead.hcrc&&n.pending>i&&(t.adler=Oi(t.adler,n.pending_buf,n.pending-i,i))}n.status=ST}if(n.status===ST){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(Lo(t),n.pending!==0))return n.last_flush=-1,Qi;wn(n,t.adler&255),wn(n,t.adler>>8&255),t.adler=0}if(n.status=Sf,Lo(t),n.pending!==0)return n.last_flush=-1,Qi}if(t.avail_in!==0||n.lookahead!==0||e!==zd&&n.status!==$y){let i=n.level===0?sK(n,e):n.strategy===bw?txe(n,e):n.strategy===Mve?exe(n,e):Py[n.level].func(n,e);if((i===Xf||i===Hg)&&(n.status=$y),i===qs||i===Xf)return t.avail_out===0&&(n.last_flush=-1),Qi;if(i===qg&&(e===Pve?$ve(n):e!==n8&&(vT(n,0,0,!1),e===Rve&&(kd(n.head),n.lookahead===0&&(n.strstart=0,n.block_start=0,n.insert=0))),Lo(t),t.avail_out===0))return n.last_flush=-1,Qi}return e!==Aa?Qi:n.wrap<=0?r8:(n.wrap===2?(wn(n,t.adler&255),wn(n,t.adler>>8&255),wn(n,t.adler>>16&255),wn(n,t.adler>>24&255),wn(n,t.total_in&255),wn(n,t.total_in>>8&255),wn(n,t.total_in>>16&255),wn(n,t.total_in>>24&255)):(uy(n,t.adler>>>16),uy(n,t.adler&65535)),Lo(t),n.wrap>0&&(n.wrap=-n.wrap),n.pending!==0?Qi:r8)},axe=t=>{if(Nv(t))return fc;const e=t.state.status;return t.state=null,e===Sf?Cf(t,Ove):Qi},lxe=(t,e)=>{let n=e.length;if(Nv(t))return fc;const r=t.state,i=r.wrap;if(i===2||i===1&&r.status!==lg||r.lookahead)return fc;if(i===1&&(t.adler=F1(t.adler,e,n,0)),r.wrap=0,n>=r.w_size){i===0&&(kd(r.head),r.strstart=0,r.block_start=0,r.insert=0);let l=new Uint8Array(r.w_size);l.set(e.subarray(n-r.w_size,n),0),e=l,n=r.w_size}const s=t.avail_in,o=t.next_in,a=t.input;for(t.avail_in=n,t.next_in=0,t.input=e,cg(r);r.lookahead>=an;){let l=r.strstart,c=r.lookahead-(an-1);do r.ins_h=Ud(r,r.ins_h,r.window[l+an-1]),r.prev[l&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=l,l++;while(--c);r.strstart=l,r.lookahead=an-1,cg(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=an-1,r.match_available=0,t.next_in=o,t.input=a,t.avail_in=s,r.wrap=i,Qi};var cxe=sxe,uxe=lK,dxe=aK,hxe=oK,fxe=ixe,pxe=oxe,mxe=axe,gxe=lxe,yxe="pako deflate (from Nodeca project)",i1={deflateInit:cxe,deflateInit2:uxe,deflateReset:dxe,deflateResetKeep:hxe,deflateSetHeader:fxe,deflate:pxe,deflateEnd:mxe,deflateSetDictionary:gxe,deflateInfo:yxe};const vxe=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var xxe=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const n=e.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const r in n)vxe(n,r)&&(t[r]=n[r])}}return t},bxe=t=>{let e=0;for(let r=0,i=t.length;r<i;r++)e+=t[r].length;const n=new Uint8Array(e);for(let r=0,i=0,s=t.length;r<s;r++){let o=t[r];n.set(o,i),i+=o.length}return n},yC={assign:xxe,flattenChunks:bxe};let cK=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{cK=!1}const j1=new Uint8Array(256);for(let t=0;t<256;t++)j1[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;j1[254]=j1[254]=1;var wxe=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,n,r,i,s,o=t.length,a=0;for(i=0;i<o;i++)n=t.charCodeAt(i),(n&64512)===55296&&i+1<o&&(r=t.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Uint8Array(a),s=0,i=0;s<a;i++)n=t.charCodeAt(i),(n&64512)===55296&&i+1<o&&(r=t.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?e[s++]=n:n<2048?(e[s++]=192|n>>>6,e[s++]=128|n&63):n<65536?(e[s++]=224|n>>>12,e[s++]=128|n>>>6&63,e[s++]=128|n&63):(e[s++]=240|n>>>18,e[s++]=128|n>>>12&63,e[s++]=128|n>>>6&63,e[s++]=128|n&63);return e};const kxe=(t,e)=>{if(e<65534&&t.subarray&&cK)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let n="";for(let r=0;r<e;r++)n+=String.fromCharCode(t[r]);return n};var Sxe=(t,e)=>{const n=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let r,i;const s=new Array(n*2);for(i=0,r=0;r<n;){let o=t[r++];if(o<128){s[i++]=o;continue}let a=j1[o];if(a>4){s[i++]=65533,r+=a-1;continue}for(o&=a===2?31:a===3?15:7;a>1&&r<n;)o=o<<6|t[r++]&63,a--;if(a>1){s[i++]=65533;continue}o<65536?s[i++]=o:(o-=65536,s[i++]=55296|o>>10&1023,s[i++]=56320|o&1023)}return kxe(s,i)},Cxe=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let n=e-1;for(;n>=0&&(t[n]&192)===128;)n--;return n<0||n===0?e:n+j1[t[n]]>e?n:e},B1={string2buf:wxe,buf2string:Sxe,utf8border:Cxe};function Nxe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var uK=Nxe;const dK=Object.prototype.toString,{Z_NO_FLUSH:Axe,Z_SYNC_FLUSH:Ixe,Z_FULL_FLUSH:_xe,Z_FINISH:Exe,Z_OK:Sk,Z_STREAM_END:Txe,Z_DEFAULT_COMPRESSION:$xe,Z_DEFAULT_STRATEGY:Pxe,Z_DEFLATED:Rxe}=Cv;function u4(t){this.options=yC.assign({level:$xe,method:Rxe,chunkSize:16384,windowBits:15,memLevel:8,strategy:Pxe},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new uK,this.strm.avail_out=0;let n=i1.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==Sk)throw new Error(ag[n]);if(e.header&&i1.deflateSetHeader(this.strm,e.header),e.dictionary){let r;if(typeof e.dictionary=="string"?r=B1.string2buf(e.dictionary):dK.call(e.dictionary)==="[object ArrayBuffer]"?r=new Uint8Array(e.dictionary):r=e.dictionary,n=i1.deflateSetDictionary(this.strm,r),n!==Sk)throw new Error(ag[n]);this._dict_set=!0}}u4.prototype.push=function(t,e){const n=this.strm,r=this.options.chunkSize;let i,s;if(this.ended)return!1;for(e===~~e?s=e:s=e===!0?Exe:Axe,typeof t=="string"?n.input=B1.string2buf(t):dK.call(t)==="[object ArrayBuffer]"?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;){if(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(s===Ixe||s===_xe)&&n.avail_out<=6){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(i=i1.deflate(n,s),i===Txe)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),i=i1.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===Sk;if(n.avail_out===0){this.onData(n.output);continue}if(s>0&&n.next_out>0){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(n.avail_in===0)break}return!0};u4.prototype.onData=function(t){this.chunks.push(t)};u4.prototype.onEnd=function(t){t===Sk&&(this.result=yC.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};const ww=16209,Oxe=16191;var Dxe=function(e,n){let r,i,s,o,a,l,c,u,d,h,f,p,m,y,g,v,x,b,S,A,E,I,T,O;const $=e.state;r=e.next_in,T=e.input,i=r+(e.avail_in-5),s=e.next_out,O=e.output,o=s-(n-e.avail_out),a=s+(e.avail_out-257),l=$.dmax,c=$.wsize,u=$.whave,d=$.wnext,h=$.window,f=$.hold,p=$.bits,m=$.lencode,y=$.distcode,g=(1<<$.lenbits)-1,v=(1<<$.distbits)-1;e:do{p<15&&(f+=T[r++]<<p,p+=8,f+=T[r++]<<p,p+=8),x=m[f&g];t:for(;;){if(b=x>>>24,f>>>=b,p-=b,b=x>>>16&255,b===0)O[s++]=x&65535;else if(b&16){S=x&65535,b&=15,b&&(p<b&&(f+=T[r++]<<p,p+=8),S+=f&(1<<b)-1,f>>>=b,p-=b),p<15&&(f+=T[r++]<<p,p+=8,f+=T[r++]<<p,p+=8),x=y[f&v];n:for(;;){if(b=x>>>24,f>>>=b,p-=b,b=x>>>16&255,b&16){if(A=x&65535,b&=15,p<b&&(f+=T[r++]<<p,p+=8,p<b&&(f+=T[r++]<<p,p+=8)),A+=f&(1<<b)-1,A>l){e.msg="invalid distance too far back",$.mode=ww;break e}if(f>>>=b,p-=b,b=s-o,A>b){if(b=A-b,b>u&&$.sane){e.msg="invalid distance too far back",$.mode=ww;break e}if(E=0,I=h,d===0){if(E+=c-b,b<S){S-=b;do O[s++]=h[E++];while(--b);E=s-A,I=O}}else if(d<b){if(E+=c+d-b,b-=d,b<S){S-=b;do O[s++]=h[E++];while(--b);if(E=0,d<S){b=d,S-=b;do O[s++]=h[E++];while(--b);E=s-A,I=O}}}else if(E+=d-b,b<S){S-=b;do O[s++]=h[E++];while(--b);E=s-A,I=O}for(;S>2;)O[s++]=I[E++],O[s++]=I[E++],O[s++]=I[E++],S-=3;S&&(O[s++]=I[E++],S>1&&(O[s++]=I[E++]))}else{E=s-A;do O[s++]=O[E++],O[s++]=O[E++],O[s++]=O[E++],S-=3;while(S>2);S&&(O[s++]=O[E++],S>1&&(O[s++]=O[E++]))}}else if(b&64){e.msg="invalid distance code",$.mode=ww;break e}else{x=y[(x&65535)+(f&(1<<b)-1)];continue n}break}}else if(b&64)if(b&32){$.mode=Oxe;break e}else{e.msg="invalid literal/length code",$.mode=ww;break e}else{x=m[(x&65535)+(f&(1<<b)-1)];continue t}break}}while(r<i&&s<a);S=p>>3,r-=S,p-=S<<3,f&=(1<<p)-1,e.next_in=r,e.next_out=s,e.avail_in=r<i?5+(i-r):5-(r-i),e.avail_out=s<a?257+(a-s):257-(s-a),$.hold=f,$.bits=p};const tm=15,s8=852,o8=592,a8=0,TI=1,l8=2,Lxe=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Mxe=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Fxe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),jxe=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Bxe=(t,e,n,r,i,s,o,a)=>{const l=a.bits;let c=0,u=0,d=0,h=0,f=0,p=0,m=0,y=0,g=0,v=0,x,b,S,A,E,I=null,T;const O=new Uint16Array(tm+1),$=new Uint16Array(tm+1);let R=null,F,L,U;for(c=0;c<=tm;c++)O[c]=0;for(u=0;u<r;u++)O[e[n+u]]++;for(f=l,h=tm;h>=1&&O[h]===0;h--);if(f>h&&(f=h),h===0)return i[s++]=1<<24|64<<16|0,i[s++]=1<<24|64<<16|0,a.bits=1,0;for(d=1;d<h&&O[d]===0;d++);for(f<d&&(f=d),y=1,c=1;c<=tm;c++)if(y<<=1,y-=O[c],y<0)return-1;if(y>0&&(t===a8||h!==1))return-1;for($[1]=0,c=1;c<tm;c++)$[c+1]=$[c]+O[c];for(u=0;u<r;u++)e[n+u]!==0&&(o[$[e[n+u]]++]=u);if(t===a8?(I=R=o,T=20):t===TI?(I=Lxe,R=Mxe,T=257):(I=Fxe,R=jxe,T=0),v=0,u=0,c=d,E=s,p=f,m=0,S=-1,g=1<<f,A=g-1,t===TI&&g>s8||t===l8&&g>o8)return 1;for(;;){F=c-m,o[u]+1<T?(L=0,U=o[u]):o[u]>=T?(L=R[o[u]-T],U=I[o[u]-T]):(L=32+64,U=0),x=1<<c-m,b=1<<p,d=b;do b-=x,i[E+(v>>m)+b]=F<<24|L<<16|U|0;while(b!==0);for(x=1<<c-1;v&x;)x>>=1;if(x!==0?(v&=x-1,v+=x):v=0,u++,--O[c]===0){if(c===h)break;c=e[n+o[u]]}if(c>f&&(v&A)!==S){for(m===0&&(m=f),E+=d,p=c-m,y=1<<p;p+m<h&&(y-=O[p+m],!(y<=0));)p++,y<<=1;if(g+=1<<p,t===TI&&g>s8||t===l8&&g>o8)return 1;S=v&A,i[S]=f<<24|p<<16|E-s|0}}return v!==0&&(i[E+v]=c-m<<24|64<<16|0),a.bits=f,0};var s1=Bxe;const zxe=0,hK=1,fK=2,{Z_FINISH:c8,Z_BLOCK:Uxe,Z_TREES:kw,Z_OK:Yf,Z_STREAM_END:Vxe,Z_NEED_DICT:Wxe,Z_STREAM_ERROR:Ba,Z_DATA_ERROR:pK,Z_MEM_ERROR:mK,Z_BUF_ERROR:Gxe,Z_DEFLATED:u8}=Cv,vC=16180,d8=16181,h8=16182,f8=16183,p8=16184,m8=16185,g8=16186,y8=16187,v8=16188,x8=16189,Ck=16190,Kc=16191,$I=16192,b8=16193,PI=16194,w8=16195,k8=16196,S8=16197,C8=16198,Sw=16199,Cw=16200,N8=16201,A8=16202,I8=16203,_8=16204,E8=16205,RI=16206,T8=16207,$8=16208,lr=16209,gK=16210,yK=16211,qxe=852,Hxe=592,Kxe=15,Xxe=Kxe,P8=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function Yxe(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Cp=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<vC||e.mode>yK?1:0},vK=t=>{if(Cp(t))return Ba;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=vC,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(qxe),e.distcode=e.distdyn=new Int32Array(Hxe),e.sane=1,e.back=-1,Yf},xK=t=>{if(Cp(t))return Ba;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,vK(t)},bK=(t,e)=>{let n;if(Cp(t))return Ba;const r=t.state;return e<0?(n=0,e=-e):(n=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Ba:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,xK(t))},wK=(t,e)=>{if(!t)return Ba;const n=new Yxe;t.state=n,n.strm=t,n.window=null,n.mode=vC;const r=bK(t,e);return r!==Yf&&(t.state=null),r},Zxe=t=>wK(t,Xxe);let R8=!0,OI,DI;const Jxe=t=>{if(R8){OI=new Int32Array(512),DI=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(s1(hK,t.lens,0,288,OI,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;s1(fK,t.lens,0,32,DI,0,t.work,{bits:5}),R8=!1}t.lencode=OI,t.lenbits=9,t.distcode=DI,t.distbits=5},kK=(t,e,n,r)=>{let i;const s=t.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),r>=s.wsize?(s.window.set(e.subarray(n-s.wsize,n),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>r&&(i=r),s.window.set(e.subarray(n-r,n-r+i),s.wnext),r-=i,r?(s.window.set(e.subarray(n-r,n),0),s.wnext=r,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0},Qxe=(t,e)=>{let n,r,i,s,o,a,l,c,u,d,h,f,p,m,y=0,g,v,x,b,S,A,E,I;const T=new Uint8Array(4);let O,$;const R=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Cp(t)||!t.output||!t.input&&t.avail_in!==0)return Ba;n=t.state,n.mode===Kc&&(n.mode=$I),o=t.next_out,i=t.output,l=t.avail_out,s=t.next_in,r=t.input,a=t.avail_in,c=n.hold,u=n.bits,d=a,h=l,I=Yf;e:for(;;)switch(n.mode){case vC:if(n.wrap===0){n.mode=$I;break}for(;u<16;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if(n.wrap&2&&c===35615){n.wbits===0&&(n.wbits=15),n.check=0,T[0]=c&255,T[1]=c>>>8&255,n.check=Oi(n.check,T,2,0),c=0,u=0,n.mode=d8;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((c&255)<<8)+(c>>8))%31){t.msg="incorrect header check",n.mode=lr;break}if((c&15)!==u8){t.msg="unknown compression method",n.mode=lr;break}if(c>>>=4,u-=4,E=(c&15)+8,n.wbits===0&&(n.wbits=E),E>15||E>n.wbits){t.msg="invalid window size",n.mode=lr;break}n.dmax=1<<n.wbits,n.flags=0,t.adler=n.check=1,n.mode=c&512?x8:Kc,c=0,u=0;break;case d8:for(;u<16;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if(n.flags=c,(n.flags&255)!==u8){t.msg="unknown compression method",n.mode=lr;break}if(n.flags&57344){t.msg="unknown header flags set",n.mode=lr;break}n.head&&(n.head.text=c>>8&1),n.flags&512&&n.wrap&4&&(T[0]=c&255,T[1]=c>>>8&255,n.check=Oi(n.check,T,2,0)),c=0,u=0,n.mode=h8;case h8:for(;u<32;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}n.head&&(n.head.time=c),n.flags&512&&n.wrap&4&&(T[0]=c&255,T[1]=c>>>8&255,T[2]=c>>>16&255,T[3]=c>>>24&255,n.check=Oi(n.check,T,4,0)),c=0,u=0,n.mode=f8;case f8:for(;u<16;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}n.head&&(n.head.xflags=c&255,n.head.os=c>>8),n.flags&512&&n.wrap&4&&(T[0]=c&255,T[1]=c>>>8&255,n.check=Oi(n.check,T,2,0)),c=0,u=0,n.mode=p8;case p8:if(n.flags&1024){for(;u<16;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}n.length=c,n.head&&(n.head.extra_len=c),n.flags&512&&n.wrap&4&&(T[0]=c&255,T[1]=c>>>8&255,n.check=Oi(n.check,T,2,0)),c=0,u=0}else n.head&&(n.head.extra=null);n.mode=m8;case m8:if(n.flags&1024&&(f=n.length,f>a&&(f=a),f&&(n.head&&(E=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(s,s+f),E)),n.flags&512&&n.wrap&4&&(n.check=Oi(n.check,r,f,s)),a-=f,s+=f,n.length-=f),n.length))break e;n.length=0,n.mode=g8;case g8:if(n.flags&2048){if(a===0)break e;f=0;do E=r[s+f++],n.head&&E&&n.length<65536&&(n.head.name+=String.fromCharCode(E));while(E&&f<a);if(n.flags&512&&n.wrap&4&&(n.check=Oi(n.check,r,f,s)),a-=f,s+=f,E)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=y8;case y8:if(n.flags&4096){if(a===0)break e;f=0;do E=r[s+f++],n.head&&E&&n.length<65536&&(n.head.comment+=String.fromCharCode(E));while(E&&f<a);if(n.flags&512&&n.wrap&4&&(n.check=Oi(n.check,r,f,s)),a-=f,s+=f,E)break e}else n.head&&(n.head.comment=null);n.mode=v8;case v8:if(n.flags&512){for(;u<16;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if(n.wrap&4&&c!==(n.check&65535)){t.msg="header crc mismatch",n.mode=lr;break}c=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=Kc;break;case x8:for(;u<32;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}t.adler=n.check=P8(c),c=0,u=0,n.mode=Ck;case Ck:if(n.havedict===0)return t.next_out=o,t.avail_out=l,t.next_in=s,t.avail_in=a,n.hold=c,n.bits=u,Wxe;t.adler=n.check=1,n.mode=Kc;case Kc:if(e===Uxe||e===kw)break e;case $I:if(n.last){c>>>=u&7,u-=u&7,n.mode=RI;break}for(;u<3;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}switch(n.last=c&1,c>>>=1,u-=1,c&3){case 0:n.mode=b8;break;case 1:if(Jxe(n),n.mode=Sw,e===kw){c>>>=2,u-=2;break e}break;case 2:n.mode=k8;break;case 3:t.msg="invalid block type",n.mode=lr}c>>>=2,u-=2;break;case b8:for(c>>>=u&7,u-=u&7;u<32;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if((c&65535)!==(c>>>16^65535)){t.msg="invalid stored block lengths",n.mode=lr;break}if(n.length=c&65535,c=0,u=0,n.mode=PI,e===kw)break e;case PI:n.mode=w8;case w8:if(f=n.length,f){if(f>a&&(f=a),f>l&&(f=l),f===0)break e;i.set(r.subarray(s,s+f),o),a-=f,s+=f,l-=f,o+=f,n.length-=f;break}n.mode=Kc;break;case k8:for(;u<14;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if(n.nlen=(c&31)+257,c>>>=5,u-=5,n.ndist=(c&31)+1,c>>>=5,u-=5,n.ncode=(c&15)+4,c>>>=4,u-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=lr;break}n.have=0,n.mode=S8;case S8:for(;n.have<n.ncode;){for(;u<3;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}n.lens[R[n.have++]]=c&7,c>>>=3,u-=3}for(;n.have<19;)n.lens[R[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,O={bits:n.lenbits},I=s1(zxe,n.lens,0,19,n.lencode,0,n.work,O),n.lenbits=O.bits,I){t.msg="invalid code lengths set",n.mode=lr;break}n.have=0,n.mode=C8;case C8:for(;n.have<n.nlen+n.ndist;){for(;y=n.lencode[c&(1<<n.lenbits)-1],g=y>>>24,v=y>>>16&255,x=y&65535,!(g<=u);){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if(x<16)c>>>=g,u-=g,n.lens[n.have++]=x;else{if(x===16){for($=g+2;u<$;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if(c>>>=g,u-=g,n.have===0){t.msg="invalid bit length repeat",n.mode=lr;break}E=n.lens[n.have-1],f=3+(c&3),c>>>=2,u-=2}else if(x===17){for($=g+3;u<$;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}c>>>=g,u-=g,E=0,f=3+(c&7),c>>>=3,u-=3}else{for($=g+7;u<$;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}c>>>=g,u-=g,E=0,f=11+(c&127),c>>>=7,u-=7}if(n.have+f>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=lr;break}for(;f--;)n.lens[n.have++]=E}}if(n.mode===lr)break;if(n.lens[256]===0){t.msg="invalid code -- missing end-of-block",n.mode=lr;break}if(n.lenbits=9,O={bits:n.lenbits},I=s1(hK,n.lens,0,n.nlen,n.lencode,0,n.work,O),n.lenbits=O.bits,I){t.msg="invalid literal/lengths set",n.mode=lr;break}if(n.distbits=6,n.distcode=n.distdyn,O={bits:n.distbits},I=s1(fK,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,O),n.distbits=O.bits,I){t.msg="invalid distances set",n.mode=lr;break}if(n.mode=Sw,e===kw)break e;case Sw:n.mode=Cw;case Cw:if(a>=6&&l>=258){t.next_out=o,t.avail_out=l,t.next_in=s,t.avail_in=a,n.hold=c,n.bits=u,Dxe(t,h),o=t.next_out,i=t.output,l=t.avail_out,s=t.next_in,r=t.input,a=t.avail_in,c=n.hold,u=n.bits,n.mode===Kc&&(n.back=-1);break}for(n.back=0;y=n.lencode[c&(1<<n.lenbits)-1],g=y>>>24,v=y>>>16&255,x=y&65535,!(g<=u);){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if(v&&!(v&240)){for(b=g,S=v,A=x;y=n.lencode[A+((c&(1<<b+S)-1)>>b)],g=y>>>24,v=y>>>16&255,x=y&65535,!(b+g<=u);){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}c>>>=b,u-=b,n.back+=b}if(c>>>=g,u-=g,n.back+=g,n.length=x,v===0){n.mode=E8;break}if(v&32){n.back=-1,n.mode=Kc;break}if(v&64){t.msg="invalid literal/length code",n.mode=lr;break}n.extra=v&15,n.mode=N8;case N8:if(n.extra){for($=n.extra;u<$;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=A8;case A8:for(;y=n.distcode[c&(1<<n.distbits)-1],g=y>>>24,v=y>>>16&255,x=y&65535,!(g<=u);){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if(!(v&240)){for(b=g,S=v,A=x;y=n.distcode[A+((c&(1<<b+S)-1)>>b)],g=y>>>24,v=y>>>16&255,x=y&65535,!(b+g<=u);){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}c>>>=b,u-=b,n.back+=b}if(c>>>=g,u-=g,n.back+=g,v&64){t.msg="invalid distance code",n.mode=lr;break}n.offset=x,n.extra=v&15,n.mode=I8;case I8:if(n.extra){for($=n.extra;u<$;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=lr;break}n.mode=_8;case _8:if(l===0)break e;if(f=h-l,n.offset>f){if(f=n.offset-f,f>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=lr;break}f>n.wnext?(f-=n.wnext,p=n.wsize-f):p=n.wnext-f,f>n.length&&(f=n.length),m=n.window}else m=i,p=o-n.offset,f=n.length;f>l&&(f=l),l-=f,n.length-=f;do i[o++]=m[p++];while(--f);n.length===0&&(n.mode=Cw);break;case E8:if(l===0)break e;i[o++]=n.length,l--,n.mode=Cw;break;case RI:if(n.wrap){for(;u<32;){if(a===0)break e;a--,c|=r[s++]<<u,u+=8}if(h-=l,t.total_out+=h,n.total+=h,n.wrap&4&&h&&(t.adler=n.check=n.flags?Oi(n.check,i,h,o-h):F1(n.check,i,h,o-h)),h=l,n.wrap&4&&(n.flags?c:P8(c))!==n.check){t.msg="incorrect data check",n.mode=lr;break}c=0,u=0}n.mode=T8;case T8:if(n.wrap&&n.flags){for(;u<32;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if(n.wrap&4&&c!==(n.total&4294967295)){t.msg="incorrect length check",n.mode=lr;break}c=0,u=0}n.mode=$8;case $8:I=Vxe;break e;case lr:I=pK;break e;case gK:return mK;case yK:default:return Ba}return t.next_out=o,t.avail_out=l,t.next_in=s,t.avail_in=a,n.hold=c,n.bits=u,(n.wsize||h!==t.avail_out&&n.mode<lr&&(n.mode<RI||e!==c8))&&kK(t,t.output,t.next_out,h-t.avail_out),d-=t.avail_in,h-=t.avail_out,t.total_in+=d,t.total_out+=h,n.total+=h,n.wrap&4&&h&&(t.adler=n.check=n.flags?Oi(n.check,i,h,t.next_out-h):F1(n.check,i,h,t.next_out-h)),t.data_type=n.bits+(n.last?64:0)+(n.mode===Kc?128:0)+(n.mode===Sw||n.mode===PI?256:0),(d===0&&h===0||e===c8)&&I===Yf&&(I=Gxe),I},ebe=t=>{if(Cp(t))return Ba;let e=t.state;return e.window&&(e.window=null),t.state=null,Yf},tbe=(t,e)=>{if(Cp(t))return Ba;const n=t.state;return n.wrap&2?(n.head=e,e.done=!1,Yf):Ba},nbe=(t,e)=>{const n=e.length;let r,i,s;return Cp(t)||(r=t.state,r.wrap!==0&&r.mode!==Ck)?Ba:r.mode===Ck&&(i=1,i=F1(i,e,n,0),i!==r.check)?pK:(s=kK(t,e,n,n),s?(r.mode=gK,mK):(r.havedict=1,Yf))};var rbe=xK,ibe=bK,sbe=vK,obe=Zxe,abe=wK,lbe=Qxe,cbe=ebe,ube=tbe,dbe=nbe,hbe="pako inflate (from Nodeca project)",Jc={inflateReset:rbe,inflateReset2:ibe,inflateResetKeep:sbe,inflateInit:obe,inflateInit2:abe,inflate:lbe,inflateEnd:cbe,inflateGetHeader:ube,inflateSetDictionary:dbe,inflateInfo:hbe};function fbe(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var pbe=fbe;const SK=Object.prototype.toString,{Z_NO_FLUSH:mbe,Z_FINISH:gbe,Z_OK:z1,Z_STREAM_END:LI,Z_NEED_DICT:MI,Z_STREAM_ERROR:ybe,Z_DATA_ERROR:O8,Z_MEM_ERROR:vbe}=Cv;function Av(t){this.options=yC.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new uK,this.strm.avail_out=0;let n=Jc.inflateInit2(this.strm,e.windowBits);if(n!==z1)throw new Error(ag[n]);if(this.header=new pbe,Jc.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=B1.string2buf(e.dictionary):SK.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=Jc.inflateSetDictionary(this.strm,e.dictionary),n!==z1)))throw new Error(ag[n])}Av.prototype.push=function(t,e){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let s,o,a;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?gbe:mbe,SK.call(t)==="[object ArrayBuffer]"?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),s=Jc.inflate(n,o),s===MI&&i&&(s=Jc.inflateSetDictionary(n,i),s===z1?s=Jc.inflate(n,o):s===O8&&(s=MI));n.avail_in>0&&s===LI&&n.state.wrap>0&&t[n.next_in]!==0;)Jc.inflateReset(n),s=Jc.inflate(n,o);switch(s){case ybe:case O8:case MI:case vbe:return this.onEnd(s),this.ended=!0,!1}if(a=n.avail_out,n.next_out&&(n.avail_out===0||s===LI))if(this.options.to==="string"){let l=B1.utf8border(n.output,n.next_out),c=n.next_out-l,u=B1.buf2string(n.output,l);n.next_out=c,n.avail_out=r-c,c&&n.output.set(n.output.subarray(l,l+c),0),this.onData(u)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(s===z1&&a===0)){if(s===LI)return s=Jc.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};Av.prototype.onData=function(t){this.chunks.push(t)};Av.prototype.onEnd=function(t){t===z1&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=yC.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function d4(t,e){const n=new Av(e);if(n.push(t),n.err)throw n.msg||ag[n.err];return n.result}function xbe(t,e){return e=e||{},e.raw=!0,d4(t,e)}var bbe=Av,wbe=d4,kbe=xbe,Sbe=d4,Cbe=Cv,Nbe={Inflate:bbe,inflate:wbe,inflateRaw:kbe,ungzip:Sbe,constants:Cbe};const{Inflate:Abe,inflate:Ibe,inflateRaw:dat,ungzip:hat}=Nbe;var D8=Abe,_be=Ibe;const CK=[];for(let t=0;t<256;t++){let e=t;for(let n=0;n<8;n++)e&1?e=3988292384^e>>>1:e=e>>>1;CK[t]=e}const L8=4294967295;function Ebe(t,e,n){let r=t;for(let i=0;i<n;i++)r=CK[(r^e[i])&255]^r>>>8;return r}function Tbe(t,e){return(Ebe(L8,t,e)^L8)>>>0}function M8(t,e,n){const r=t.readUint32(),i=Tbe(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(i!==r)throw new Error(`CRC mismatch for chunk ${n}. Expected ${r}, found ${i}`)}function NK(t,e,n){for(let r=0;r<n;r++)e[r]=t[r]}function AK(t,e,n,r){let i=0;for(;i<r;i++)e[i]=t[i];for(;i<n;i++)e[i]=t[i]+e[i-r]&255}function IK(t,e,n,r){let i=0;if(n.length===0)for(;i<r;i++)e[i]=t[i];else for(;i<r;i++)e[i]=t[i]+n[i]&255}function _K(t,e,n,r,i){let s=0;if(n.length===0){for(;s<i;s++)e[s]=t[s];for(;s<r;s++)e[s]=t[s]+(e[s-i]>>1)&255}else{for(;s<i;s++)e[s]=t[s]+(n[s]>>1)&255;for(;s<r;s++)e[s]=t[s]+(e[s-i]+n[s]>>1)&255}}function EK(t,e,n,r,i){let s=0;if(n.length===0){for(;s<i;s++)e[s]=t[s];for(;s<r;s++)e[s]=t[s]+e[s-i]&255}else{for(;s<i;s++)e[s]=t[s]+n[s]&255;for(;s<r;s++)e[s]=t[s]+$be(e[s-i],n[s],n[s-i])&255}}function $be(t,e,n){const r=t+e-n,i=Math.abs(r-t),s=Math.abs(r-e),o=Math.abs(r-n);return i<=s&&i<=o?t:s<=o?e:n}function Pbe(t,e,n,r,i,s){switch(t){case 0:NK(e,n,i);break;case 1:AK(e,n,i,s);break;case 2:IK(e,n,r,i);break;case 3:_K(e,n,r,i,s);break;case 4:EK(e,n,r,i,s);break;default:throw new Error(`Unsupported filter: ${t}`)}}const Rbe=new Uint16Array([255]),Obe=new Uint8Array(Rbe.buffer),Dbe=Obe[0]===255;function Lbe(t){const{data:e,width:n,height:r,channels:i,depth:s}=t,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],a=Math.ceil(s/8)*i,l=new Uint8Array(r*n*a);let c=0;for(let u=0;u<7;u++){const d=o[u],h=Math.ceil((n-d.x)/d.xStep),f=Math.ceil((r-d.y)/d.yStep);if(h<=0||f<=0)continue;const p=h*a,m=new Uint8Array(p);for(let y=0;y<f;y++){const g=e[c++],v=e.subarray(c,c+p);c+=p;const x=new Uint8Array(p);Pbe(g,v,x,m,p,a),m.set(x);for(let b=0;b<h;b++){const S=d.x+b*d.xStep,A=d.y+y*d.yStep;if(!(S>=n||A>=r))for(let E=0;E<a;E++)l[(A*n+S)*a+E]=x[b*a+E]}}}if(s===16){const u=new Uint16Array(l.buffer);if(Dbe)for(let d=0;d<u.length;d++)u[d]=Mbe(u[d]);return u}else return l}function Mbe(t){return(t&255)<<8|t>>8&255}const Fbe=new Uint16Array([255]),jbe=new Uint8Array(Fbe.buffer),Bbe=jbe[0]===255,zbe=new Uint8Array(0);function F8(t){const{data:e,width:n,height:r,channels:i,depth:s}=t,o=Math.ceil(s/8)*i,a=Math.ceil(s/8*i*n),l=new Uint8Array(r*a);let c=zbe,u=0,d,h;for(let f=0;f<r;f++){switch(d=e.subarray(u+1,u+1+a),h=l.subarray(f*a,(f+1)*a),e[u]){case 0:NK(d,h,a);break;case 1:AK(d,h,a,o);break;case 2:IK(d,h,c,a);break;case 3:_K(d,h,c,a,o);break;case 4:EK(d,h,c,a,o);break;default:throw new Error(`Unsupported filter: ${e[u]}`)}c=h,u+=a+1}if(s===16){const f=new Uint16Array(l.buffer);if(Bbe)for(let p=0;p<f.length;p++)f[p]=Ube(f[p]);return f}else return l}function Ube(t){return(t&255)<<8|t>>8&255}const P2=Uint8Array.of(137,80,78,71,13,10,26,10);function j8(t){if(!Vbe(t.readBytes(P2.length)))throw new Error("wrong PNG signature")}function Vbe(t){if(t.length<P2.length)return!1;for(let e=0;e<P2.length;e++)if(t[e]!==P2[e])return!1;return!0}const Wbe="tEXt",Gbe=0,TK=new TextDecoder("latin1");function qbe(t){if(Kbe(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const Hbe=/^[\u0000-\u00FF]*$/;function Kbe(t){if(!Hbe.test(t))throw new Error("invalid latin1 text")}function Xbe(t,e,n){const r=$K(e);t[r]=Ybe(e,n-r.length-1)}function $K(t){for(t.mark();t.readByte()!==Gbe;);const e=t.offset;t.reset();const n=TK.decode(t.readBytes(e-t.offset-1));return t.skip(1),qbe(n),n}function Ybe(t,e){return TK.decode(t.readBytes(e))}const Ro={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},FI={UNKNOWN:-1,DEFLATE:0},B8={UNKNOWN:-1,ADAPTIVE:0},jI={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Nw={NONE:0,BACKGROUND:1,PREVIOUS:2},BI={SOURCE:0,OVER:1};class Zbe extends i4{constructor(n,r={}){super(n);Lt(this,"_checkCrc");Lt(this,"_inflator");Lt(this,"_png");Lt(this,"_apng");Lt(this,"_end");Lt(this,"_hasPalette");Lt(this,"_palette");Lt(this,"_hasTransparency");Lt(this,"_transparency");Lt(this,"_compressionMethod");Lt(this,"_filterMethod");Lt(this,"_interlaceMethod");Lt(this,"_colorType");Lt(this,"_isAnimated");Lt(this,"_numberOfFrames");Lt(this,"_numberOfPlays");Lt(this,"_frames");Lt(this,"_writingDataChunks");const{checkCrc:i=!1}=r;this._checkCrc=i,this._inflator=new D8,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=FI.UNKNOWN,this._filterMethod=B8.UNKNOWN,this._interlaceMethod=jI.UNKNOWN,this._colorType=Ro.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(j8(this);!this._end;){const n=this.readUint32(),r=this.readChars(4);this.decodeChunk(n,r)}return this.decodeImage(),this._png}decodeApng(){for(j8(this);!this._end;){const n=this.readUint32(),r=this.readChars(4);this.decodeApngChunk(n,r)}return this.decodeApngImage(),this._apng}decodeChunk(n,r){const i=this.offset;switch(r){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(n);break;case"IDAT":this.decodeIDAT(n);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(n);break;case"iCCP":this.decodeiCCP(n);break;case Wbe:Xbe(this._png.text,this,n);break;case"pHYs":this.decodepHYs();break;default:this.skip(n);break}if(this.offset-i!==n)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?M8(this,n+4,r):this.skip(4)}decodeApngChunk(n,r){const i=this.offset;switch(r!=="fdAT"&&r!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),r){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(n);break;default:this.decodeChunk(n,r),this.offset=i+n;break}if(this.offset-i!==n)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?M8(this,n+4,r):this.skip(4)}decodeIHDR(){const n=this._png;n.width=this.readUint32(),n.height=this.readUint32(),n.depth=Jbe(this.readUint8());const r=this.readUint8();this._colorType=r;let i;switch(r){case Ro.GREYSCALE:i=1;break;case Ro.TRUECOLOUR:i=3;break;case Ro.INDEXED_COLOUR:i=1;break;case Ro.GREYSCALE_ALPHA:i=2;break;case Ro.TRUECOLOUR_ALPHA:i=4;break;case Ro.UNKNOWN:default:throw new Error(`Unknown color type: ${r}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==FI.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const n={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(n)}decodePLTE(n){if(n%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${n}`);const r=n/3;this._hasPalette=!0;const i=[];this._palette=i;for(let s=0;s<r;s++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(n){this._writingDataChunks=!0;const r=n,i=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,i,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodeFDAT(n){this._writingDataChunks=!0;let r=n,i=this.offset+this.byteOffset;if(i+=4,r-=4,this._inflator.push(new Uint8Array(this.buffer,i,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodetRNS(n){switch(this._colorType){case Ro.GREYSCALE:case Ro.TRUECOLOUR:{if(n%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${n}`);if(n/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${n/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(n/2);for(let r=0;r<n/2;r++)this._transparency[r]=this.readUint16();break}case Ro.INDEXED_COLOUR:{if(n>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${n} vs ${this._palette.length})`);let r=0;for(;r<n;r++){const i=this.readByte();this._palette[r].push(i)}for(;r<this._palette.length;r++)this._palette[r].push(255);break}case Ro.UNKNOWN:case Ro.GREYSCALE_ALPHA:case Ro.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(n){const r=$K(this),i=this.readUint8();if(i!==FI.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);const s=this.readBytes(n-r.length-2);this._png.iccEmbeddedProfile={name:r,profile:_be(s)}}decodepHYs(){const n=this.readUint32(),r=this.readUint32(),i=this.readByte();this._png.resolution={x:n,y:r,unit:i}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let n=0;n<this._numberOfFrames;n++){const r={sequenceNumber:this._frames[n].sequenceNumber,delayNumber:this._frames[n].delayNumber,delayDenominator:this._frames[n].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},i=this._frames.at(n);if(i){if(i.data=F8({data:i.data,width:i.width,height:i.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),n===0||i.xOffset===0&&i.yOffset===0&&i.width===this._png.width&&i.height===this._png.height)r.data=i.data;else{const s=this._apng.frames.at(n-1);this.disposeFrame(i,s,r),this.addFrameDataToCanvas(r,i)}this._apng.frames.push(r)}}return this._apng}disposeFrame(n,r,i){switch(n.disposeOp){case Nw.NONE:break;case Nw.BACKGROUND:for(let s=0;s<this._png.height;s++)for(let o=0;o<this._png.width;o++){const a=(s*n.width+o)*this._png.channels;for(let l=0;l<this._png.channels;l++)i.data[a+l]=0}break;case Nw.PREVIOUS:i.data.set(r.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(n,r){const i=1<<this._png.depth,s=(o,a)=>{const l=((o+r.yOffset)*this._png.width+r.xOffset+a)*this._png.channels,c=(o*r.width+a)*this._png.channels;return{index:l,frameIndex:c}};switch(r.blendOp){case BI.SOURCE:for(let o=0;o<r.height;o++)for(let a=0;a<r.width;a++){const{index:l,frameIndex:c}=s(o,a);for(let u=0;u<this._png.channels;u++)n.data[l+u]=r.data[c+u]}break;case BI.OVER:for(let o=0;o<r.height;o++)for(let a=0;a<r.width;a++){const{index:l,frameIndex:c}=s(o,a);for(let u=0;u<this._png.channels;u++){const d=r.data[c+this._png.channels-1]/i,h=u%(this._png.channels-1)===0?1:r.data[c+u],f=Math.floor(d*h+(1-d)*n.data[l+u]);n.data[l+u]+=f}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var r;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const n=this._isAnimated?((r=this._frames)==null?void 0:r.at(0)).data:this._inflator.result;if(this._filterMethod!==B8.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===jI.NO_INTERLACE)this._png.data=F8({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===jI.ADAM7)this._png.data=Lbe({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const n=this._inflator.result,r=this._frames.at(-1);r?r.data=n:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Nw.NONE,blendOp:BI.SOURCE,data:n}),this._inflator=new D8,this._writingDataChunks=!1}}function Jbe(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var z8;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(z8||(z8={}));function Qbe(t,e){return new Zbe(t,e).decode()}var Ot=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function zI(){Ot.console&&typeof Ot.console.log=="function"&&Ot.console.log.apply(Ot.console,arguments)}var jn={log:zI,warn:function(t){Ot.console&&(typeof Ot.console.warn=="function"?Ot.console.warn.apply(Ot.console,arguments):zI.call(null,arguments))},error:function(t){Ot.console&&(typeof Ot.console.error=="function"?Ot.console.error.apply(Ot.console,arguments):zI(t))}};function UI(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){af(r.response,e,n)},r.onerror=function(){jn.error("could not download file")},r.send()}function U8(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Aw(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var af=Ot.saveAs||((typeof window>"u"?"undefined":En(window))!=="object"||window!==Ot?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=Ot.URL||Ot.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?U8(i.href)?UI(t,e,n):Aw(i,i.target="_blank"):Aw(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){Aw(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(U8(t))UI(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){Aw(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:En(s)!=="object"&&(jn.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob([String.fromCharCode(65279),i],{type:i.type}):i}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return UI(t,e,n);var i=t.type==="application/octet-stream",s=/constructor/i.test(Ot.HTMLElement)||Ot.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":En(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var u=a.result;u=o?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=u:location=u,r=null},a.readAsDataURL(t)}else{var l=Ot.URL||Ot.webkitURL,c=l.createObjectURL(t);r?r.location=c:location.href=c,r=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function PK(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,o=i.exec(t);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+a+l+c}}var R2=Ot.atob.bind(Ot),V8=Ot.btoa.bind(Ot);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function VI(t,e){var n=t[0],r=t[1],i=t[2],s=t[3];n=ys(n,r,i,s,e[0],7,-680876936),s=ys(s,n,r,i,e[1],12,-389564586),i=ys(i,s,n,r,e[2],17,606105819),r=ys(r,i,s,n,e[3],22,-1044525330),n=ys(n,r,i,s,e[4],7,-176418897),s=ys(s,n,r,i,e[5],12,1200080426),i=ys(i,s,n,r,e[6],17,-1473231341),r=ys(r,i,s,n,e[7],22,-45705983),n=ys(n,r,i,s,e[8],7,1770035416),s=ys(s,n,r,i,e[9],12,-1958414417),i=ys(i,s,n,r,e[10],17,-42063),r=ys(r,i,s,n,e[11],22,-1990404162),n=ys(n,r,i,s,e[12],7,1804603682),s=ys(s,n,r,i,e[13],12,-40341101),i=ys(i,s,n,r,e[14],17,-1502002290),n=vs(n,r=ys(r,i,s,n,e[15],22,1236535329),i,s,e[1],5,-165796510),s=vs(s,n,r,i,e[6],9,-1069501632),i=vs(i,s,n,r,e[11],14,643717713),r=vs(r,i,s,n,e[0],20,-373897302),n=vs(n,r,i,s,e[5],5,-701558691),s=vs(s,n,r,i,e[10],9,38016083),i=vs(i,s,n,r,e[15],14,-660478335),r=vs(r,i,s,n,e[4],20,-405537848),n=vs(n,r,i,s,e[9],5,568446438),s=vs(s,n,r,i,e[14],9,-1019803690),i=vs(i,s,n,r,e[3],14,-187363961),r=vs(r,i,s,n,e[8],20,1163531501),n=vs(n,r,i,s,e[13],5,-1444681467),s=vs(s,n,r,i,e[2],9,-51403784),i=vs(i,s,n,r,e[7],14,1735328473),n=xs(n,r=vs(r,i,s,n,e[12],20,-1926607734),i,s,e[5],4,-378558),s=xs(s,n,r,i,e[8],11,-2022574463),i=xs(i,s,n,r,e[11],16,1839030562),r=xs(r,i,s,n,e[14],23,-35309556),n=xs(n,r,i,s,e[1],4,-1530992060),s=xs(s,n,r,i,e[4],11,1272893353),i=xs(i,s,n,r,e[7],16,-155497632),r=xs(r,i,s,n,e[10],23,-1094730640),n=xs(n,r,i,s,e[13],4,681279174),s=xs(s,n,r,i,e[0],11,-358537222),i=xs(i,s,n,r,e[3],16,-722521979),r=xs(r,i,s,n,e[6],23,76029189),n=xs(n,r,i,s,e[9],4,-640364487),s=xs(s,n,r,i,e[12],11,-421815835),i=xs(i,s,n,r,e[15],16,530742520),n=bs(n,r=xs(r,i,s,n,e[2],23,-995338651),i,s,e[0],6,-198630844),s=bs(s,n,r,i,e[7],10,1126891415),i=bs(i,s,n,r,e[14],15,-1416354905),r=bs(r,i,s,n,e[5],21,-57434055),n=bs(n,r,i,s,e[12],6,1700485571),s=bs(s,n,r,i,e[3],10,-1894986606),i=bs(i,s,n,r,e[10],15,-1051523),r=bs(r,i,s,n,e[1],21,-2054922799),n=bs(n,r,i,s,e[8],6,1873313359),s=bs(s,n,r,i,e[15],10,-30611744),i=bs(i,s,n,r,e[6],15,-1560198380),r=bs(r,i,s,n,e[13],21,1309151649),n=bs(n,r,i,s,e[4],6,-145523070),s=bs(s,n,r,i,e[11],10,-1120210379),i=bs(i,s,n,r,e[2],15,718787259),r=bs(r,i,s,n,e[9],21,-343485551),t[0]=Id(n,t[0]),t[1]=Id(r,t[1]),t[2]=Id(i,t[2]),t[3]=Id(s,t[3])}function xC(t,e,n,r,i,s){return e=Id(Id(e,t),Id(r,s)),Id(e<<i|e>>>32-i,n)}function ys(t,e,n,r,i,s,o){return xC(e&n|~e&r,t,e,i,s,o)}function vs(t,e,n,r,i,s,o){return xC(e&r|n&~r,t,e,i,s,o)}function xs(t,e,n,r,i,s,o){return xC(e^n^r,t,e,i,s,o)}function bs(t,e,n,r,i,s,o){return xC(n^(e|~r),t,e,i,s,o)}function RK(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)VI(r,ewe(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(VI(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,VI(r,i),r}function ewe(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}var W8="0123456789abcdef".split("");function twe(t){for(var e="",n=0;n<4;n++)e+=W8[t>>8*n+4&15]+W8[t>>8*n&15];return e}function nwe(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function NT(t){return RK(t).map(nwe).join("")}var rwe=function(t){for(var e=0;e<t.length;e++)t[e]=twe(t[e]);return t.join("")}(RK("hello"))!="5d41402abc4b2a76b9719d911017c592";function Id(t,e){if(rwe){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function AT(t,e){var n,r,i,s;if(t!==n){for(var o=(i=t,s=1+(256/t.length|0),new Array(s+1).join(i)),a=[],l=0;l<256;l++)a[l]=l;var c=0;for(l=0;l<256;l++){var u=a[l];c=(c+u+o.charCodeAt(l))%256,a[l]=a[c],a[c]=u}n=t,r=a}else a=r;var d=e.length,h=0,f=0,p="";for(l=0;l<d;l++)f=(f+(u=a[h=(h+1)%256]))%256,a[h]=a[f],a[f]=u,o=a[(a[h]+a[f])%256],p+=String.fromCharCode(e.charCodeAt(l)^o);return p}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var G8={print:4,modify:8,copy:16,"annot-forms":32};function lm(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach(function(a){if(G8.perm!==void 0)throw new Error("Invalid permission: "+a);i+=G8[a]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(e+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=NT(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=AT(this.encryptionKey,this.padding)}function cm(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);e+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):t[r]}return e}function q8(t){if(En(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var s=Math.random().toString(35);return e[n][s]=[r,!!i],s},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[n]){var o=e[n][s];try{o[0].apply(t,r)}catch(a){Ot.console&&jn.error("jsPDF PubSub Error",a.message,a)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Nk(t){if(!(this instanceof Nk))return new Nk(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function OK(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function ff(t,e,n,r,i){if(!(this instanceof ff))return new ff(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,OK.call(this,r,i)}function Tm(t,e,n,r,i){if(!(this instanceof Tm))return new Tm(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,OK.call(this,r,i)}function kt(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],a=1,l=16,c="S",u=null;En(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,s=t.compress||t.compressPdf||s,(u=t.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),a=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),c=t.defaultPathOperation||"S"),o=t.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",n=(""+(n||"P")).toLowerCase();var d=t.putOnlyUsedFonts||!1,h={},f={internal:{},__private__:{}};f.__private__.PubSub=q8;var p="1.3",m=f.__private__.getPdfVersion=function(){return p};f.__private__.setPdfVersion=function(_){p=_};var y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return y};var g=f.__private__.getPageFormat=function(_){return y[_]};i=i||"a4";var v="compat",x="advanced",b=v;function S(){this.saveGraphicsState(),te(new Tt(_t,0,0,-_t,0,zh()*_t).toString()+" cm"),this.setFontSize(this.getFontSize()/_t),c="n",b=x}function A(){this.restoreGraphicsState(),c="S",b=v}var E=f.__private__.combineFontStyleAndFontWeight=function(_,B){if(_=="bold"&&B=="normal"||_=="bold"&&B==400||_=="normal"&&B=="italic"||_=="bold"&&B=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return B&&(_=B==400||B==="normal"?_==="italic"?"italic":"normal":B!=700&&B!=="bold"||_!=="normal"?(B==700?"bold":B)+""+_:"bold"),_};f.advancedAPI=function(_){var B=b===v;return B&&S.call(this),typeof _!="function"||(_(this),B&&A.call(this)),this},f.compatAPI=function(_){var B=b===x;return B&&A.call(this),typeof _!="function"||(_(this),B&&S.call(this)),this},f.isAdvancedAPI=function(){return b===x};var I,T=function(_){if(b!==x)throw new Error(_+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},O=f.roundToPrecision=f.__private__.roundToPrecision=function(_,B){var ie=e||B;if(isNaN(_)||isNaN(ie))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return _.toFixed(ie).replace(/0+$/,"")};I=f.hpf=f.__private__.hpf=typeof l=="number"?function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return O(_,l)}:l==="smart"?function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return O(_,_>-1&&_<1?16:5)}:function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return O(_,16)};var $=f.f2=f.__private__.f2=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.f2");return O(_,2)},R=f.__private__.f3=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.f3");return O(_,3)},F=f.scale=f.__private__.scale=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.scale");return b===v?_*_t:b===x?_:void 0},L=function(_){return F(function(B){return b===v?zh()-B:b===x?B:void 0}(_))};f.__private__.setPrecision=f.setPrecision=function(_){typeof parseInt(_,10)=="number"&&(e=parseInt(_,10))};var U,q="00000000000000000000000000000000",K=f.__private__.getFileId=function(){return q},j=f.__private__.setFileId=function(_){return q=_!==void 0&&/^[a-fA-F0-9]{32}$/.test(_)?_.toUpperCase():q.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(zr=new lm(u.userPermissions,u.userPassword,u.ownerPassword,q)),q};f.setFileId=function(_){return j(_),this},f.getFileId=function(){return K()};var Y=f.__private__.convertDateToPDFDate=function(_){var B=_.getTimezoneOffset(),ie=B<0?"+":"-",ue=Math.floor(Math.abs(B/60)),ke=Math.abs(B%60),Oe=[ie,H(ue),"'",H(ke),"'"].join("");return["D:",_.getFullYear(),H(_.getMonth()+1),H(_.getDate()),H(_.getHours()),H(_.getMinutes()),H(_.getSeconds()),Oe].join("")},ae=f.__private__.convertPDFDateToDate=function(_){var B=parseInt(_.substr(2,4),10),ie=parseInt(_.substr(6,2),10)-1,ue=parseInt(_.substr(8,2),10),ke=parseInt(_.substr(10,2),10),Oe=parseInt(_.substr(12,2),10),je=parseInt(_.substr(14,2),10);return new Date(B,ie,ue,ke,Oe,je,0)},le=f.__private__.setCreationDate=function(_){var B;if(_===void 0&&(_=new Date),_ instanceof Date)B=Y(_);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(_))throw new Error("Invalid argument passed to jsPDF.setCreationDate");B=_}return U=B},M=f.__private__.getCreationDate=function(_){var B=U;return _==="jsDate"&&(B=ae(U)),B};f.setCreationDate=function(_){return le(_),this},f.getCreationDate=function(_){return M(_)};var V,H=f.__private__.padd2=function(_){return("0"+parseInt(_)).slice(-2)},J=f.__private__.padd2Hex=function(_){return("00"+(_=_.toString())).substr(_.length)},oe=0,ce=[],ge=[],ee=0,fe=[],Se=[],me=!1,Le=ge;f.__private__.setCustomOutputDestination=function(_){me=!0,Le=_};var we=function(_){me||(Le=_)};f.__private__.resetCustomOutputDestination=function(){me=!1,Le=ge};var te=f.__private__.out=function(_){return _=_.toString(),ee+=_.length+1,Le.push(_),Le},He=f.__private__.write=function(_){return te(arguments.length===1?_.toString():Array.prototype.join.call(arguments," "))},Ze=f.__private__.getArrayBuffer=function(_){for(var B=_.length,ie=new ArrayBuffer(B),ue=new Uint8Array(ie);B--;)ue[B]=_.charCodeAt(B);return ie},Ge=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return Ge};var Be=t.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(_){return Be=b===x?_/_t:_,this};var Je,We=f.__private__.getFontSize=f.getFontSize=function(){return b===v?Be:Be*_t},Ct=t.R2L||!1;f.__private__.setR2L=f.setR2L=function(_){return Ct=_,this},f.__private__.getR2L=f.getR2L=function(){return Ct};var dt,Vt=f.__private__.setZoomMode=function(_){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(_))Je=_;else if(isNaN(_)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(_)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+_+'" is not recognized.');Je=_}else Je=parseInt(_,10)};f.__private__.getZoomMode=function(){return Je};var Nt,At=f.__private__.setPageMode=function(_){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(_)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+_+'" is not recognized.');dt=_};f.__private__.getPageMode=function(){return dt};var en=f.__private__.setLayoutMode=function(_){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(_)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+_+'" is not recognized.');Nt=_};f.__private__.getLayoutMode=function(){return Nt},f.__private__.setDisplayMode=f.setDisplayMode=function(_,B,ie){return Vt(_),en(B),At(ie),this};var It={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(_){if(Object.keys(It).indexOf(_)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return It[_]},f.__private__.getDocumentProperties=function(){return It},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(_){for(var B in It)It.hasOwnProperty(B)&&_[B]&&(It[B]=_[B]);return this},f.__private__.setDocumentProperty=function(_,B){if(Object.keys(It).indexOf(_)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return It[_]=B};var ht,_t,vt,Pn,nn,mt={},Mt={},Dn=[],Et={},rn={},Wt={},Br={},pi=null,Ln=0,Ft=[],kn=new q8(f),Eh=t.hotfixes||[],hs={},$c={},jl=[],Tt=function _(B,ie,ue,ke,Oe,je){if(!(this instanceof _))return new _(B,ie,ue,ke,Oe,je);isNaN(B)&&(B=1),isNaN(ie)&&(ie=0),isNaN(ue)&&(ue=0),isNaN(ke)&&(ke=1),isNaN(Oe)&&(Oe=0),isNaN(je)&&(je=0),this._matrix=[B,ie,ue,ke,Oe,je]};Object.defineProperty(Tt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(_){this._matrix[0]=_}}),Object.defineProperty(Tt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(_){this._matrix[1]=_}}),Object.defineProperty(Tt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(_){this._matrix[2]=_}}),Object.defineProperty(Tt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(_){this._matrix[3]=_}}),Object.defineProperty(Tt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(_){this._matrix[4]=_}}),Object.defineProperty(Tt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(_){this._matrix[5]=_}}),Object.defineProperty(Tt.prototype,"a",{get:function(){return this._matrix[0]},set:function(_){this._matrix[0]=_}}),Object.defineProperty(Tt.prototype,"b",{get:function(){return this._matrix[1]},set:function(_){this._matrix[1]=_}}),Object.defineProperty(Tt.prototype,"c",{get:function(){return this._matrix[2]},set:function(_){this._matrix[2]=_}}),Object.defineProperty(Tt.prototype,"d",{get:function(){return this._matrix[3]},set:function(_){this._matrix[3]=_}}),Object.defineProperty(Tt.prototype,"e",{get:function(){return this._matrix[4]},set:function(_){this._matrix[4]=_}}),Object.defineProperty(Tt.prototype,"f",{get:function(){return this._matrix[5]},set:function(_){this._matrix[5]=_}}),Object.defineProperty(Tt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Tt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Tt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Tt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Tt.prototype.join=function(_){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(I).join(_)},Tt.prototype.multiply=function(_){var B=_.sx*this.sx+_.shy*this.shx,ie=_.sx*this.shy+_.shy*this.sy,ue=_.shx*this.sx+_.sy*this.shx,ke=_.shx*this.shy+_.sy*this.sy,Oe=_.tx*this.sx+_.ty*this.shx+this.tx,je=_.tx*this.shy+_.ty*this.sy+this.ty;return new Tt(B,ie,ue,ke,Oe,je)},Tt.prototype.decompose=function(){var _=this.sx,B=this.shy,ie=this.shx,ue=this.sy,ke=this.tx,Oe=this.ty,je=Math.sqrt(_*_+B*B),ut=(_/=je)*ie+(B/=je)*ue;ie-=_*ut,ue-=B*ut;var xt=Math.sqrt(ie*ie+ue*ue);return ut/=xt,_*(ue/=xt)<B*(ie/=xt)&&(_=-_,B=-B,ut=-ut,je=-je),{scale:new Tt(je,0,0,xt,0,0),translate:new Tt(1,0,0,1,ke,Oe),rotate:new Tt(_,B,-B,_,0,0),skew:new Tt(1,0,ut,1,0,0)}},Tt.prototype.toString=function(_){return this.join(" ")},Tt.prototype.inversed=function(){var _=this.sx,B=this.shy,ie=this.shx,ue=this.sy,ke=this.tx,Oe=this.ty,je=1/(_*ue-B*ie),ut=ue*je,xt=-B*je,Dt=-ie*je,Bt=_*je;return new Tt(ut,xt,Dt,Bt,-ut*ke-Dt*Oe,-xt*ke-Bt*Oe)},Tt.prototype.applyToPoint=function(_){var B=_.x*this.sx+_.y*this.shx+this.tx,ie=_.x*this.shy+_.y*this.sy+this.ty;return new jh(B,ie)},Tt.prototype.applyToRectangle=function(_){var B=this.applyToPoint(_),ie=this.applyToPoint(new jh(_.x+_.w,_.y+_.h));return new P0(B.x,B.y,ie.x-B.x,ie.y-B.y)},Tt.prototype.clone=function(){var _=this.sx,B=this.shy,ie=this.shx,ue=this.sy,ke=this.tx,Oe=this.ty;return new Tt(_,B,ie,ue,ke,Oe)},f.Matrix=Tt;var Pc=f.matrixMult=function(_,B){return B.multiply(_)},Rc=new Tt(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=Rc;var sa=function(_,B){if(!rn[_]){var ie=(B instanceof ff?"Sh":"P")+(Object.keys(Et).length+1).toString(10);B.id=ie,rn[_]=ie,Et[ie]=B,kn.publish("addPattern",B)}};f.ShadingPattern=ff,f.TilingPattern=Tm,f.addShadingPattern=function(_,B){return T("addShadingPattern()"),sa(_,B),this},f.beginTilingPattern=function(_){T("beginTilingPattern()"),R0(_.boundingBox[0],_.boundingBox[1],_.boundingBox[2]-_.boundingBox[0],_.boundingBox[3]-_.boundingBox[1],_.matrix)},f.endTilingPattern=function(_,B){T("endTilingPattern()"),B.stream=Se[V].join(`
`),sa(_,B),kn.publish("endTilingPattern",B),jl.pop().restore()};var oa,Cr=f.__private__.newObject=function(){var _=Ri();return qi(_,!0),_},Ri=f.__private__.newObjectDeferred=function(){return oe++,ce[oe]=function(){return ee},oe},qi=function(_,B){return B=typeof B=="boolean"&&B,ce[_]=ee,B&&te(_+" 0 obj"),_},Th=f.__private__.newAdditionalObject=function(){var _={objId:Ri(),content:""};return fe.push(_),_},qu=Ri(),Qa=Ri(),Bl=f.__private__.decodeColorString=function(_){var B=_.split(" ");if(B.length!==2||B[1]!=="g"&&B[1]!=="G")B.length!==5||B[4]!=="k"&&B[4]!=="K"||(B=[(1-B[0])*(1-B[3]),(1-B[1])*(1-B[3]),(1-B[2])*(1-B[3]),"r"]);else{var ie=parseFloat(B[0]);B=[ie,ie,ie,"r"]}for(var ue="#",ke=0;ke<3;ke++)ue+=("0"+Math.floor(255*parseFloat(B[ke])).toString(16)).slice(-2);return ue},el=f.__private__.encodeColorString=function(_){var B;typeof _=="string"&&(_={ch1:_});var ie=_.ch1,ue=_.ch2,ke=_.ch3,Oe=_.ch4,je=_.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ie=="string"&&ie.charAt(0)!=="#"){var ut=new PK(ie);if(ut.ok)ie=ut.toHex();else if(!/^\d*\.?\d*$/.test(ie))throw new Error('Invalid color "'+ie+'" passed to jsPDF.encodeColorString.')}if(typeof ie=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ie)&&(ie="#"+ie[1]+ie[1]+ie[2]+ie[2]+ie[3]+ie[3]),typeof ie=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ie)){var xt=parseInt(ie.substr(1),16);ie=xt>>16&255,ue=xt>>8&255,ke=255&xt}if(ue===void 0||Oe===void 0&&ie===ue&&ue===ke)B=typeof ie=="string"?ie+" "+je[0]:_.precision===2?$(ie/255)+" "+je[0]:R(ie/255)+" "+je[0];else if(Oe===void 0||En(Oe)==="object"){if(Oe&&!isNaN(Oe.a)&&Oe.a===0)return["1.","1.","1.",je[1]].join(" ");B=typeof ie=="string"?[ie,ue,ke,je[1]].join(" "):_.precision===2?[$(ie/255),$(ue/255),$(ke/255),je[1]].join(" "):[R(ie/255),R(ue/255),R(ke/255),je[1]].join(" ")}else B=typeof ie=="string"?[ie,ue,ke,Oe,je[2]].join(" "):_.precision===2?[$(ie),$(ue),$(ke),$(Oe),je[2]].join(" "):[R(ie),R(ue),R(ke),R(Oe),je[2]].join(" ");return B},tl=f.__private__.getFilters=function(){return o},aa=f.__private__.putStream=function(_){var B=(_=_||{}).data||"",ie=_.filters||tl(),ue=_.alreadyAppliedFilters||[],ke=_.addLength1||!1,Oe=B.length,je=_.objectId,ut=function(mi){return mi};if(u!==null&&je===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(ut=zr.encryptor(je,0));var xt={};ie===!0&&(ie=["FlateEncode"]);var Dt=_.additionalKeyValues||[],Bt=(xt=kt.API.processDataByFilters!==void 0?kt.API.processDataByFilters(B,ie):{data:B,reverseChain:[]}).reverseChain+(Array.isArray(ue)?ue.join(" "):ue.toString());if(xt.data.length!==0&&(Dt.push({key:"Length",value:xt.data.length}),ke===!0&&Dt.push({key:"Length1",value:Oe})),Bt.length!=0)if(Bt.split("/").length-1==1)Dt.push({key:"Filter",value:Bt});else{Dt.push({key:"Filter",value:"["+Bt+"]"});for(var bn=0;bn<Dt.length;bn+=1)if(Dt[bn].key==="DecodeParms"){for(var vr=[],ei=0;ei<xt.reverseChain.split("/").length-1;ei+=1)vr.push("null");vr.push(Dt[bn].value),Dt[bn].value="["+vr.join(" ")+"]"}}te("<<");for(var qn=0;qn<Dt.length;qn++)te("/"+Dt[qn].key+" "+Dt[qn].value);te(">>"),xt.data.length!==0&&(te("stream"),te(ut(xt.data)),te("endstream"))},$h=f.__private__.putPage=function(_){var B=_.number,ie=_.data,ue=_.objId,ke=_.contentsObjId;qi(ue,!0),te("<</Type /Page"),te("/Parent "+_.rootDictionaryObjId+" 0 R"),te("/Resources "+_.resourceDictionaryObjId+" 0 R"),te("/MediaBox ["+parseFloat(I(_.mediaBox.bottomLeftX))+" "+parseFloat(I(_.mediaBox.bottomLeftY))+" "+I(_.mediaBox.topRightX)+" "+I(_.mediaBox.topRightY)+"]"),_.cropBox!==null&&te("/CropBox ["+I(_.cropBox.bottomLeftX)+" "+I(_.cropBox.bottomLeftY)+" "+I(_.cropBox.topRightX)+" "+I(_.cropBox.topRightY)+"]"),_.bleedBox!==null&&te("/BleedBox ["+I(_.bleedBox.bottomLeftX)+" "+I(_.bleedBox.bottomLeftY)+" "+I(_.bleedBox.topRightX)+" "+I(_.bleedBox.topRightY)+"]"),_.trimBox!==null&&te("/TrimBox ["+I(_.trimBox.bottomLeftX)+" "+I(_.trimBox.bottomLeftY)+" "+I(_.trimBox.topRightX)+" "+I(_.trimBox.topRightY)+"]"),_.artBox!==null&&te("/ArtBox ["+I(_.artBox.bottomLeftX)+" "+I(_.artBox.bottomLeftY)+" "+I(_.artBox.topRightX)+" "+I(_.artBox.topRightY)+"]"),typeof _.userUnit=="number"&&_.userUnit!==1&&te("/UserUnit "+_.userUnit),kn.publish("putPage",{objId:ue,pageContext:Ft[B],pageNumber:B,page:ie}),te("/Contents "+ke+" 0 R"),te(">>"),te("endobj");var Oe=ie.join(`
`);return b===x&&(Oe+=`
Q`),qi(ke,!0),aa({data:Oe,filters:tl(),objectId:ke}),te("endobj"),ue},zl=f.__private__.putPages=function(){var _,B,ie=[];for(_=1;_<=Ln;_++)Ft[_].objId=Ri(),Ft[_].contentsObjId=Ri();for(_=1;_<=Ln;_++)ie.push($h({number:_,data:Se[_],objId:Ft[_].objId,contentsObjId:Ft[_].contentsObjId,mediaBox:Ft[_].mediaBox,cropBox:Ft[_].cropBox,bleedBox:Ft[_].bleedBox,trimBox:Ft[_].trimBox,artBox:Ft[_].artBox,userUnit:Ft[_].userUnit,rootDictionaryObjId:qu,resourceDictionaryObjId:Qa}));qi(qu,!0),te("<</Type /Pages");var ue="/Kids [";for(B=0;B<Ln;B++)ue+=ie[B]+" 0 R ";te(ue+"]"),te("/Count "+Ln),te(">>"),te("endobj"),kn.publish("postPutPages")},Ph=function(_){kn.publish("putFont",{font:_,out:te,newObject:Cr,putStream:aa}),_.isAlreadyPutted!==!0&&(_.objectNumber=Cr(),te("<<"),te("/Type /Font"),te("/BaseFont /"+cm(_.postScriptName)),te("/Subtype /Type1"),typeof _.encoding=="string"&&te("/Encoding /"+_.encoding),te("/FirstChar 32"),te("/LastChar 255"),te(">>"),te("endobj"))},jp=function(_){_.objectNumber=Cr();var B=[];B.push({key:"Type",value:"/XObject"}),B.push({key:"Subtype",value:"/Form"}),B.push({key:"BBox",value:"["+[I(_.x),I(_.y),I(_.x+_.width),I(_.y+_.height)].join(" ")+"]"}),B.push({key:"Matrix",value:"["+_.matrix.toString()+"]"});var ie=_.pages[1].join(`
`);aa({data:ie,additionalKeyValues:B,objectId:_.objectNumber}),te("endobj")},Bp=function(_,B){B||(B=21);var ie=Cr(),ue=function(je,ut){var xt,Dt=[],Bt=1/(ut-1);for(xt=0;xt<1;xt+=Bt)Dt.push(xt);if(Dt.push(1),je[0].offset!=0){var bn={offset:0,color:je[0].color};je.unshift(bn)}if(je[je.length-1].offset!=1){var vr={offset:1,color:je[je.length-1].color};je.push(vr)}for(var ei="",qn=0,mi=0;mi<Dt.length;mi++){for(xt=Dt[mi];xt>je[qn+1].offset;)qn++;var ti=je[qn].offset,Hi=(xt-ti)/(je[qn+1].offset-ti),ca=je[qn].color,io=je[qn+1].color;ei+=J(Math.round((1-Hi)*ca[0]+Hi*io[0]).toString(16))+J(Math.round((1-Hi)*ca[1]+Hi*io[1]).toString(16))+J(Math.round((1-Hi)*ca[2]+Hi*io[2]).toString(16))}return ei.trim()}(_.colors,B),ke=[];ke.push({key:"FunctionType",value:"0"}),ke.push({key:"Domain",value:"[0.0 1.0]"}),ke.push({key:"Size",value:"["+B+"]"}),ke.push({key:"BitsPerSample",value:"8"}),ke.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ke.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),aa({data:ue,additionalKeyValues:ke,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ie}),te("endobj"),_.objectNumber=Cr(),te("<< /ShadingType "+_.type),te("/ColorSpace /DeviceRGB");var Oe="/Coords ["+I(parseFloat(_.coords[0]))+" "+I(parseFloat(_.coords[1]))+" ";_.type===2?Oe+=I(parseFloat(_.coords[2]))+" "+I(parseFloat(_.coords[3])):Oe+=I(parseFloat(_.coords[2]))+" "+I(parseFloat(_.coords[3]))+" "+I(parseFloat(_.coords[4]))+" "+I(parseFloat(_.coords[5])),te(Oe+="]"),_.matrix&&te("/Matrix ["+_.matrix.toString()+"]"),te("/Function "+ie+" 0 R"),te("/Extend [true true]"),te(">>"),te("endobj")},zp=function(_,B){var ie=Ri(),ue=Cr();B.push({resourcesOid:ie,objectOid:ue}),_.objectNumber=ue;var ke=[];ke.push({key:"Type",value:"/Pattern"}),ke.push({key:"PatternType",value:"1"}),ke.push({key:"PaintType",value:"1"}),ke.push({key:"TilingType",value:"1"}),ke.push({key:"BBox",value:"["+_.boundingBox.map(I).join(" ")+"]"}),ke.push({key:"XStep",value:I(_.xStep)}),ke.push({key:"YStep",value:I(_.yStep)}),ke.push({key:"Resources",value:ie+" 0 R"}),_.matrix&&ke.push({key:"Matrix",value:"["+_.matrix.toString()+"]"}),aa({data:_.stream,additionalKeyValues:ke,objectId:_.objectNumber}),te("endobj")},Y5=function(_){for(var B in _.objectNumber=Cr(),te("<<"),_)switch(B){case"opacity":te("/ca "+$(_[B]));break;case"stroke-opacity":te("/CA "+$(_[B]))}te(">>"),te("endobj")},k0=function(_){qi(_.resourcesOid,!0),te("<<"),te("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var B in te("/Font <<"),mt)mt.hasOwnProperty(B)&&(d===!1||d===!0&&h.hasOwnProperty(B))&&te("/"+B+" "+mt[B].objectNumber+" 0 R");te(">>")}(),function(){if(Object.keys(Et).length>0){for(var B in te("/Shading <<"),Et)Et.hasOwnProperty(B)&&Et[B]instanceof ff&&Et[B].objectNumber>=0&&te("/"+B+" "+Et[B].objectNumber+" 0 R");kn.publish("putShadingPatternDict"),te(">>")}}(),function(B){if(Object.keys(Et).length>0){for(var ie in te("/Pattern <<"),Et)Et.hasOwnProperty(ie)&&Et[ie]instanceof f.TilingPattern&&Et[ie].objectNumber>=0&&Et[ie].objectNumber<B&&te("/"+ie+" "+Et[ie].objectNumber+" 0 R");kn.publish("putTilingPatternDict"),te(">>")}}(_.objectOid),function(){if(Object.keys(Wt).length>0){var B;for(B in te("/ExtGState <<"),Wt)Wt.hasOwnProperty(B)&&Wt[B].objectNumber>=0&&te("/"+B+" "+Wt[B].objectNumber+" 0 R");kn.publish("putGStateDict"),te(">>")}}(),function(){for(var B in te("/XObject <<"),hs)hs.hasOwnProperty(B)&&hs[B].objectNumber>=0&&te("/"+B+" "+hs[B].objectNumber+" 0 R");kn.publish("putXobjectDict"),te(">>")}(),te(">>"),te("endobj")},db=function(_){Mt[_.fontName]=Mt[_.fontName]||{},Mt[_.fontName][_.fontStyle]=_.id},hb=function(_,B,ie,ue,ke){var Oe={id:"F"+(Object.keys(mt).length+1).toString(10),postScriptName:_,fontName:B,fontStyle:ie,encoding:ue,isStandardFont:ke||!1,metadata:{}};return kn.publish("addFont",{font:Oe,instance:this}),mt[Oe.id]=Oe,db(Oe),Oe.id},la=f.__private__.pdfEscape=f.pdfEscape=function(_,B){return function(ie,ue){var ke,Oe,je,ut,xt,Dt,Bt,bn,vr;if(je=(ue=ue||{}).sourceEncoding||"Unicode",xt=ue.outputEncoding,(ue.autoencode||xt)&&mt[ht].metadata&&mt[ht].metadata[je]&&mt[ht].metadata[je].encoding&&(ut=mt[ht].metadata[je].encoding,!xt&&mt[ht].encoding&&(xt=mt[ht].encoding),!xt&&ut.codePages&&(xt=ut.codePages[0]),typeof xt=="string"&&(xt=ut[xt]),xt)){for(Bt=!1,Dt=[],ke=0,Oe=ie.length;ke<Oe;ke++)(bn=xt[ie.charCodeAt(ke)])?Dt.push(String.fromCharCode(bn)):Dt.push(ie[ke]),Dt[ke].charCodeAt(0)>>8&&(Bt=!0);ie=Dt.join("")}for(ke=ie.length;Bt===void 0&&ke!==0;)ie.charCodeAt(ke-1)>>8&&(Bt=!0),ke--;if(!Bt)return ie;for(Dt=ue.noBOM?[]:[254,255],ke=0,Oe=ie.length;ke<Oe;ke++){if((vr=(bn=ie.charCodeAt(ke))>>8)>>8)throw new Error("Character at position "+ke+" of string '"+ie+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Dt.push(vr),Dt.push(bn-(vr<<8))}return String.fromCharCode.apply(void 0,Dt)}(_,B).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},S0=f.__private__.beginPage=function(_){Se[++Ln]=[],Ft[Ln]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(_[0]),topRightY:Number(_[1])}},pb(Ln),we(Se[V])},fb=function(_,B){var ie,ue,ke;switch(n=B||n,typeof _=="string"&&(ie=g(_.toLowerCase()),Array.isArray(ie)&&(ue=ie[0],ke=ie[1])),Array.isArray(_)&&(ue=_[0]*_t,ke=_[1]*_t),isNaN(ue)&&(ue=i[0],ke=i[1]),(ue>14400||ke>14400)&&(jn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ue=Math.min(14400,ue),ke=Math.min(14400,ke)),i=[ue,ke],n.substr(0,1)){case"l":ke>ue&&(i=[ke,ue]);break;case"p":ue>ke&&(i=[ke,ue])}S0(i),sA(_0),te(Vp),T0!==0&&te(T0+" J"),$0!==0&&te($0+" j"),kn.publish("addPage",{pageNumber:Ln})},C0=function(_){_>0&&_<=Ln&&(Se.splice(_,1),Ft.splice(_,1),Ln--,V>Ln&&(V=Ln),this.setPage(V))},pb=function(_){_>0&&_<=Ln&&(V=_)},mb=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return Se.length-1},gb=function(_,B,ie){var ue,ke=void 0;return ie=ie||{},_=_!==void 0?_:mt[ht].fontName,B=B!==void 0?B:mt[ht].fontStyle,ue=_.toLowerCase(),Mt[ue]!==void 0&&Mt[ue][B]!==void 0?ke=Mt[ue][B]:Mt[_]!==void 0&&Mt[_][B]!==void 0?ke=Mt[_][B]:ie.disableWarning===!1&&jn.warn("Unable to look up font label for font '"+_+"', '"+B+"'. Refer to getFontList() for available fonts."),ke||ie.noFallback||(ke=Mt.times[B])==null&&(ke=Mt.times.normal),ke},Up=f.__private__.putInfo=function(){var _=Cr(),B=function(ue){return ue};for(var ie in u!==null&&(B=zr.encryptor(_,0)),te("<<"),te("/Producer ("+la(B("jsPDF "+kt.version))+")"),It)It.hasOwnProperty(ie)&&It[ie]&&te("/"+ie.substr(0,1).toUpperCase()+ie.substr(1)+" ("+la(B(It[ie]))+")");te("/CreationDate ("+la(B(U))+")"),te(">>"),te("endobj")},Z5=f.__private__.putCatalog=function(_){var B=(_=_||{}).rootDictionaryObjId||qu;switch(Cr(),te("<<"),te("/Type /Catalog"),te("/Pages "+B+" 0 R"),Je||(Je="fullwidth"),Je){case"fullwidth":te("/OpenAction [3 0 R /FitH null]");break;case"fullheight":te("/OpenAction [3 0 R /FitV null]");break;case"fullpage":te("/OpenAction [3 0 R /Fit]");break;case"original":te("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ie=""+Je;ie.substr(ie.length-1)==="%"&&(Je=parseInt(Je)/100),typeof Je=="number"&&te("/OpenAction [3 0 R /XYZ null null "+$(Je)+"]")}switch(Nt||(Nt="continuous"),Nt){case"continuous":te("/PageLayout /OneColumn");break;case"single":te("/PageLayout /SinglePage");break;case"two":case"twoleft":te("/PageLayout /TwoColumnLeft");break;case"tworight":te("/PageLayout /TwoColumnRight")}dt&&te("/PageMode /"+dt),kn.publish("putCatalog"),te(">>"),te("endobj")},Qr=f.__private__.putTrailer=function(){te("trailer"),te("<<"),te("/Size "+(oe+1)),te("/Root "+oe+" 0 R"),te("/Info "+(oe-1)+" 0 R"),u!==null&&te("/Encrypt "+zr.oid+" 0 R"),te("/ID [ <"+q+"> <"+q+"> ]"),te(">>")},yb=f.__private__.putHeader=function(){te("%PDF-"+p),te("%ºß¬à")},vb=f.__private__.putXRef=function(){var _="0000000000";te("xref"),te("0 "+(oe+1)),te("0000000000 65535 f ");for(var B=1;B<=oe;B++)typeof ce[B]=="function"?te((_+ce[B]()).slice(-10)+" 00000 n "):ce[B]!==void 0?te((_+ce[B]).slice(-10)+" 00000 n "):te("0000000000 00000 n ")},Oc=f.__private__.buildDocument=function(){var _;oe=0,ee=0,ge=[],ce=[],fe=[],qu=Ri(),Qa=Ri(),we(ge),kn.publish("buildDocument"),yb(),zl(),function(){kn.publish("putAdditionalObjects");for(var ie=0;ie<fe.length;ie++){var ue=fe[ie];qi(ue.objId,!0),te(ue.content),te("endobj")}kn.publish("postPutAdditionalObjects")}(),_=[],function(){for(var ie in mt)mt.hasOwnProperty(ie)&&(d===!1||d===!0&&h.hasOwnProperty(ie))&&Ph(mt[ie])}(),function(){var ie;for(ie in Wt)Wt.hasOwnProperty(ie)&&Y5(Wt[ie])}(),function(){for(var ie in hs)hs.hasOwnProperty(ie)&&jp(hs[ie])}(),function(ie){var ue;for(ue in Et)Et.hasOwnProperty(ue)&&(Et[ue]instanceof ff?Bp(Et[ue]):Et[ue]instanceof Tm&&zp(Et[ue],ie))}(_),kn.publish("putResources"),_.forEach(k0),k0({resourcesOid:Qa,objectOid:Number.MAX_SAFE_INTEGER}),kn.publish("postPutResources"),u!==null&&(zr.oid=Cr(),te("<<"),te("/Filter /Standard"),te("/V "+zr.v),te("/R "+zr.r),te("/U <"+zr.toHexString(zr.U)+">"),te("/O <"+zr.toHexString(zr.O)+">"),te("/P "+zr.P),te(">>"),te("endobj")),Up(),Z5();var B=ee;return vb(),Qr(),te("startxref"),te(""+B),te("%%EOF"),we(Se[V]),ge.join(`
`)},Rh=f.__private__.getBlob=function(_){return new Blob([Ze(_)],{type:"application/pdf"})},nl=f.output=f.__private__.output=(oa=function(_,B){switch(typeof(B=B||{})=="string"?B={filename:B}:B.filename=B.filename||"generated.pdf",_){case void 0:return Oc();case"save":f.save(B.filename);break;case"arraybuffer":return Ze(Oc());case"blob":return Rh(Oc());case"bloburi":case"bloburl":if(Ot.URL!==void 0&&typeof Ot.URL.createObjectURL=="function")return Ot.URL&&Ot.URL.createObjectURL(Rh(Oc()))||void 0;jn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ie="",ue=Oc();try{ie=V8(ue)}catch{ie=V8(unescape(encodeURIComponent(ue)))}return"data:application/pdf;filename="+B.filename+";base64,"+ie;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Ot)==="[object Window]"){var ke="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Oe=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';B.pdfObjectUrl&&(ke=B.pdfObjectUrl,Oe="");var je='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ke+'"'+Oe+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(B)+");<\/script></body></html>",ut=Ot.open();return ut!==null&&ut.document.write(je),ut}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Ot)==="[object Window]"){var xt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(B.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+B.filename+'" width="500px" height="400px" /></body></html>',Dt=Ot.open();if(Dt!==null){Dt.document.write(xt);var Bt=this;Dt.document.documentElement.querySelector("#pdfViewer").onload=function(){Dt.document.title=B.filename,Dt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Bt.output("bloburl"))}}return Dt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Ot)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var bn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",B)+'"></iframe></body></html>',vr=Ot.open();if(vr!==null&&(vr.document.write(bn),vr.document.title=B.filename),vr||typeof safari>"u")return vr;break;case"datauri":case"dataurl":return Ot.document.location.href=this.output("datauristring",B);default:return null}},oa.foo=function(){try{return oa.apply(this,arguments)}catch(ie){var _=ie.stack||"";~_.indexOf(" at ")&&(_=_.split(" at ")[1]);var B="Error in function "+_.split(`
`)[0].split("<")[0]+": "+ie.message;if(!Ot.console)throw new Error(B);Ot.console.error(B,ie),Ot.alert&&alert(B)}},oa.foo.bar=oa,oa.foo),Oh=function(_){return Array.isArray(Eh)===!0&&Eh.indexOf(_)>-1};switch(r){case"pt":_t=1;break;case"mm":_t=72/25.4;break;case"cm":_t=72/2.54;break;case"in":_t=72;break;case"px":_t=Oh("px_scaling")==1?.75:96/72;break;case"pc":case"em":_t=12;break;case"ex":_t=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);_t=r}var zr=null;le(),j();var N0=f.__private__.getPageInfo=f.getPageInfo=function(_){if(isNaN(_)||_%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ft[_].objId,pageNumber:_,pageContext:Ft[_]}},J5=f.__private__.getPageInfoByObjId=function(_){if(isNaN(_)||_%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var B in Ft)if(Ft[B].objId===_)break;return N0(B)},Q5=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:Ft[V].objId,pageNumber:V,pageContext:Ft[V]}};f.addPage=function(){return fb.apply(this,arguments),this},f.setPage=function(){return pb.apply(this,arguments),we.call(this,Se[V]),this},f.insertPage=function(_){return this.addPage(),this.movePage(V,_),this},f.movePage=function(_,B){var ie,ue;if(_>B){ie=Se[_],ue=Ft[_];for(var ke=_;ke>B;ke--)Se[ke]=Se[ke-1],Ft[ke]=Ft[ke-1];Se[B]=ie,Ft[B]=ue,this.setPage(B)}else if(_<B){ie=Se[_],ue=Ft[_];for(var Oe=_;Oe<B;Oe++)Se[Oe]=Se[Oe+1],Ft[Oe]=Ft[Oe+1];Se[B]=ie,Ft[B]=ue,this.setPage(B)}return this},f.deletePage=function(){return C0.apply(this,arguments),this},f.__private__.text=f.text=function(_,B,ie,ue,ke){var Oe,je,ut,xt,Dt,Bt,bn,vr,ei,qn=(ue=ue||{}).scope||this;if(typeof _=="number"&&typeof B=="number"&&(typeof ie=="string"||Array.isArray(ie))){var mi=ie;ie=B,B=_,_=mi}if(arguments[3]instanceof Tt==0?(ut=arguments[4],xt=arguments[5],En(bn=arguments[3])==="object"&&bn!==null||(typeof ut=="string"&&(xt=ut,ut=null),typeof bn=="string"&&(xt=bn,bn=null),typeof bn=="number"&&(ut=bn,bn=null),ue={flags:bn,angle:ut,align:xt})):(T("The transform parameter of text() with a Matrix value"),ei=ke),isNaN(B)||isNaN(ie)||_==null)throw new Error("Invalid arguments passed to jsPDF.text");if(_.length===0)return qn;var ti,Hi="",ca=typeof ue.lineHeightFactor=="number"?ue.lineHeightFactor:Lh,io=qn.internal.scaleFactor;function Ab(Sn){return Sn=Sn.split("	").join(Array(ue.TabLen||9).join(" ")),la(Sn,bn)}function Hp(Sn){for(var Mn,Vr=Sn.concat(),gi=[],zc=Vr.length;zc--;)typeof(Mn=Vr.shift())=="string"?gi.push(Mn):Array.isArray(Sn)&&(Mn.length===1||Mn[1]===void 0&&Mn[2]===void 0)?gi.push(Mn[0]):gi.push([Mn[0],Mn[1],Mn[2]]);return gi}function Uh(Sn,Mn){var Vr;if(typeof Sn=="string")Vr=Mn(Sn)[0];else if(Array.isArray(Sn)){for(var gi,zc,V0=Sn.concat(),Yp=[],Eb=V0.length;Eb--;)typeof(gi=V0.shift())=="string"?Yp.push(Mn(gi)[0]):Array.isArray(gi)&&typeof gi[0]=="string"&&(zc=Mn(gi[0],gi[1],gi[2]),Yp.push([zc[0],zc[1],zc[2]]));Vr=Yp}return Vr}var Xu=!1,Vh=!0;if(typeof _=="string")Xu=!0;else if(Array.isArray(_)){var Wh=_.concat();je=[];for(var Gh,fs=Wh.length;fs--;)(typeof(Gh=Wh.shift())!="string"||Array.isArray(Gh)&&typeof Gh[0]!="string")&&(Vh=!1);Xu=Vh}if(Xu===!1)throw new Error('Type of text must be string or Array. "'+_+'" is not recognized.');typeof _=="string"&&(_=_.match(/[\r?\n]/)?_.split(/\r\n|\r|\n/g):[_]);var qh=Be/qn.internal.scaleFactor,Hh=qh*(ca-1);switch(ue.baseline){case"bottom":ie-=Hh;break;case"top":ie+=qh-Hh;break;case"hanging":ie+=qh-2*Hh;break;case"middle":ie+=qh/2-Hh}if((Bt=ue.maxWidth||0)>0&&(typeof _=="string"?_=qn.splitTextToSize(_,Bt):Object.prototype.toString.call(_)==="[object Array]"&&(_=_.reduce(function(Sn,Mn){return Sn.concat(qn.splitTextToSize(Mn,Bt))},[]))),Oe={text:_,x:B,y:ie,options:ue,mutex:{pdfEscape:la,activeFontKey:ht,fonts:mt,activeFontSize:Be}},kn.publish("preProcessText",Oe),_=Oe.text,ut=(ue=Oe.options).angle,ei instanceof Tt==0&&ut&&typeof ut=="number"){ut*=Math.PI/180,ue.rotationDirection===0&&(ut=-ut),b===x&&(ut=-ut);var O0=Math.cos(ut),D0=Math.sin(ut);ei=new Tt(O0,D0,-D0,O0,0,0)}else ut&&ut instanceof Tt&&(ei=ut);b!==x||ei||(ei=Rc),(Dt=ue.charSpace||Gp)!==void 0&&(Hi+=I(F(Dt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(vr=ue.horizontalScale)!==void 0&&(Hi+=I(100*vr)+` Tz
`),ue.lang;var Nr=-1,jc=ue.renderingMode!==void 0?ue.renderingMode:ue.stroke,Kp=qn.internal.getCurrentPageInfo().pageContext;switch(jc){case 0:case!1:case"fill":Nr=0;break;case 1:case!0:case"stroke":Nr=1;break;case 2:case"fillThenStroke":Nr=2;break;case 3:case"invisible":Nr=3;break;case 4:case"fillAndAddForClipping":Nr=4;break;case 5:case"strokeAndAddPathForClipping":Nr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Nr=6;break;case 7:case"addToPathForClipping":Nr=7}var Ib=Kp.usedRenderingMode!==void 0?Kp.usedRenderingMode:-1;Nr!==-1?Hi+=Nr+` Tr
`:Ib!==-1&&(Hi+=`0 Tr
`),Nr!==-1&&(Kp.usedRenderingMode=Nr),xt=ue.align||"left";var ua,Kh=Be*ca,L0=qn.internal.pageSize.getWidth(),M0=mt[ht];Dt=ue.charSpace||Gp,Bt=ue.maxWidth||0,bn=Object.assign({autoencode:!0,noBOM:!0},ue.flags);var Yu=[],Xh=function(Sn){return qn.getStringUnitWidth(Sn,{font:M0,charSpace:Dt,fontSize:Be,doKerning:!1})*Be/io};if(Object.prototype.toString.call(_)==="[object Array]"){var No;je=Hp(_),xt!=="left"&&(ua=je.map(Xh));var Ao,Zu=0;if(xt==="right"){B-=ua[0],_=[],fs=je.length;for(var Bc=0;Bc<fs;Bc++)Bc===0?(Ao=Dc(B),No=Lc(ie)):(Ao=F(Zu-ua[Bc]),No=-Kh),_.push([je[Bc],Ao,No]),Zu=ua[Bc]}else if(xt==="center"){B-=ua[0]/2,_=[],fs=je.length;for(var Ju=0;Ju<fs;Ju++)Ju===0?(Ao=Dc(B),No=Lc(ie)):(Ao=F((Zu-ua[Ju])/2),No=-Kh),_.push([je[Ju],Ao,No]),Zu=ua[Ju]}else if(xt==="left"){_=[],fs=je.length;for(var F0=0;F0<fs;F0++)_.push(je[F0])}else if(xt==="justify"&&M0.encoding==="Identity-H"){_=[],fs=je.length,Bt=Bt!==0?Bt:L0;for(var Xp=0,Ur=0;Ur<fs;Ur++)if(No=Ur===0?Lc(ie):-Kh,Ao=Ur===0?Dc(B):Xp,Ur<fs-1){var _b=F((Bt-ua[Ur])/(je[Ur].split(" ").length-1)),Vl=je[Ur].split(" ");_.push([Vl[0]+" ",Ao,No]),Xp=0;for(var Wl=1;Wl<Vl.length;Wl++){var j0=(Xh(Vl[Wl-1]+" "+Vl[Wl])-Xh(Vl[Wl]))*io+_b;Wl==Vl.length-1?_.push([Vl[Wl],j0,0]):_.push([Vl[Wl]+" ",j0,0]),Xp-=j0}}else _.push([je[Ur],Ao,No]);_.push(["",Xp,0])}else{if(xt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(_=[],fs=je.length,Bt=Bt!==0?Bt:L0,Ur=0;Ur<fs;Ur++){No=Ur===0?Lc(ie):-Kh,Ao=Ur===0?Dc(B):0;var B0=je[Ur].split(" ").length-1,z0=B0>0?(Bt-ua[Ur])/B0:0;Ur<fs-1?Yu.push(I(F(z0))):Yu.push(0),_.push([je[Ur],Ao,No])}}}(typeof ue.R2L=="boolean"?ue.R2L:Ct)===!0&&(_=Uh(_,function(Sn,Mn,Vr){return[Sn.split("").reverse().join(""),Mn,Vr]})),Oe={text:_,x:B,y:ie,options:ue,mutex:{pdfEscape:la,activeFontKey:ht,fonts:mt,activeFontSize:Be}},kn.publish("postProcessText",Oe),_=Oe.text,ti=Oe.mutex.isHex||!1;var U0=mt[ht].encoding;U0!=="WinAnsiEncoding"&&U0!=="StandardEncoding"||(_=Uh(_,function(Sn,Mn,Vr){return[Ab(Sn),Mn,Vr]})),je=Hp(_),_=[];for(var Qu,ed,td,Yh=Array.isArray(je[0])?1:0,nd="",Zh=function(Sn,Mn,Vr){var gi="";return Vr instanceof Tt?(Vr=typeof ue.angle=="number"?Pc(Vr,new Tt(1,0,0,1,Sn,Mn)):Pc(new Tt(1,0,0,1,Sn,Mn),Vr),b===x&&(Vr=Pc(new Tt(1,0,0,-1,0,0),Vr)),gi=Vr.join(" ")+` Tm
`):gi=I(Sn)+" "+I(Mn)+` Td
`,gi},da=0;da<je.length;da++){switch(nd="",Yh){case 1:td=(ti?"<":"(")+je[da][0]+(ti?">":")"),Qu=parseFloat(je[da][1]),ed=parseFloat(je[da][2]);break;case 0:td=(ti?"<":"(")+je[da]+(ti?">":")"),Qu=Dc(B),ed=Lc(ie)}Yu!==void 0&&Yu[da]!==void 0&&(nd=Yu[da]+` Tw
`),da===0?_.push(nd+Zh(Qu,ed,ei)+td):Yh===0?_.push(nd+td):Yh===1&&_.push(nd+Zh(Qu,ed,ei)+td)}_=Yh===0?_.join(` Tj
T* `):_.join(` Tj
`),_+=` Tj
`;var Gl=`BT
/`;return Gl+=ht+" "+Be+` Tf
`,Gl+=I(Be*ca)+` TL
`,Gl+=Mh+`
`,Gl+=Hi,Gl+=_,te(Gl+="ET"),h[ht]=!0,qn};var eA=f.__private__.clip=f.clip=function(_){return te(_==="evenodd"?"W*":"W"),this};f.clipEvenOdd=function(){return eA("evenodd")},f.__private__.discardPath=f.discardPath=function(){return te("n"),this};var Ul=f.__private__.isValidStyle=function(_){var B=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(_)!==-1&&(B=!0),B};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(_){return Ul(_)&&(c=_),this};var xb=f.__private__.getStyle=f.getStyle=function(_){var B=c;switch(_){case"D":case"S":B="S";break;case"F":B="f";break;case"FD":case"DF":B="B";break;case"f":case"f*":case"B":case"B*":B=_}return B},bb=f.close=function(){return te("h"),this};f.stroke=function(){return te("S"),this},f.fill=function(_){return Hu("f",_),this},f.fillEvenOdd=function(_){return Hu("f*",_),this},f.fillStroke=function(_){return Hu("B",_),this},f.fillStrokeEvenOdd=function(_){return Hu("B*",_),this};var Hu=function(_,B){En(B)==="object"?nA(B,_):te(_)},A0=function(_){_===null||b===x&&_===void 0||(_=xb(_),te(_))};function tA(_,B,ie,ue,ke){var Oe=new Tm(B||this.boundingBox,ie||this.xStep,ue||this.yStep,this.gState,ke||this.matrix);Oe.stream=this.stream;var je=_+"$$"+this.cloneIndex+++"$$";return sa(je,Oe),Oe}var nA=function(_,B){var ie=rn[_.key],ue=Et[ie];if(ue instanceof ff)te("q"),te(rA(B)),ue.gState&&f.setGState(ue.gState),te(_.matrix.toString()+" cm"),te("/"+ie+" sh"),te("Q");else if(ue instanceof Tm){var ke=new Tt(1,0,0,-1,0,zh());_.matrix&&(ke=ke.multiply(_.matrix||Rc),ie=tA.call(ue,_.key,_.boundingBox,_.xStep,_.yStep,ke).id),te("q"),te("/Pattern cs"),te("/"+ie+" scn"),ue.gState&&f.setGState(ue.gState),te(B),te("Q")}},rA=function(_){switch(_){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},I0=f.moveTo=function(_,B){return te(I(F(_))+" "+I(L(B))+" m"),this},Dh=f.lineTo=function(_,B){return te(I(F(_))+" "+I(L(B))+" l"),this},Ku=f.curveTo=function(_,B,ie,ue,ke,Oe){return te([I(F(_)),I(L(B)),I(F(ie)),I(L(ue)),I(F(ke)),I(L(Oe)),"c"].join(" ")),this};f.__private__.line=f.line=function(_,B,ie,ue,ke){if(isNaN(_)||isNaN(B)||isNaN(ie)||isNaN(ue)||!Ul(ke))throw new Error("Invalid arguments passed to jsPDF.line");return b===v?this.lines([[ie-_,ue-B]],_,B,[1,1],ke||"S"):this.lines([[ie-_,ue-B]],_,B,[1,1]).stroke()},f.__private__.lines=f.lines=function(_,B,ie,ue,ke,Oe){var je,ut,xt,Dt,Bt,bn,vr,ei,qn,mi,ti,Hi;if(typeof _=="number"&&(Hi=ie,ie=B,B=_,_=Hi),ue=ue||[1,1],Oe=Oe||!1,isNaN(B)||isNaN(ie)||!Array.isArray(_)||!Array.isArray(ue)||!Ul(ke)||typeof Oe!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(I0(B,ie),je=ue[0],ut=ue[1],Dt=_.length,mi=B,ti=ie,xt=0;xt<Dt;xt++)(Bt=_[xt]).length===2?(mi=Bt[0]*je+mi,ti=Bt[1]*ut+ti,Dh(mi,ti)):(bn=Bt[0]*je+mi,vr=Bt[1]*ut+ti,ei=Bt[2]*je+mi,qn=Bt[3]*ut+ti,mi=Bt[4]*je+mi,ti=Bt[5]*ut+ti,Ku(bn,vr,ei,qn,mi,ti));return Oe&&bb(),A0(ke),this},f.path=function(_){for(var B=0;B<_.length;B++){var ie=_[B],ue=ie.c;switch(ie.op){case"m":I0(ue[0],ue[1]);break;case"l":Dh(ue[0],ue[1]);break;case"c":Ku.apply(this,ue);break;case"h":bb()}}return this},f.__private__.rect=f.rect=function(_,B,ie,ue,ke){if(isNaN(_)||isNaN(B)||isNaN(ie)||isNaN(ue)||!Ul(ke))throw new Error("Invalid arguments passed to jsPDF.rect");return b===v&&(ue=-ue),te([I(F(_)),I(L(B)),I(F(ie)),I(F(ue)),"re"].join(" ")),A0(ke),this},f.__private__.triangle=f.triangle=function(_,B,ie,ue,ke,Oe,je){if(isNaN(_)||isNaN(B)||isNaN(ie)||isNaN(ue)||isNaN(ke)||isNaN(Oe)||!Ul(je))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ie-_,ue-B],[ke-ie,Oe-ue],[_-ke,B-Oe]],_,B,[1,1],je,!0),this},f.__private__.roundedRect=f.roundedRect=function(_,B,ie,ue,ke,Oe,je){if(isNaN(_)||isNaN(B)||isNaN(ie)||isNaN(ue)||isNaN(ke)||isNaN(Oe)||!Ul(je))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ut=4/3*(Math.SQRT2-1);return ke=Math.min(ke,.5*ie),Oe=Math.min(Oe,.5*ue),this.lines([[ie-2*ke,0],[ke*ut,0,ke,Oe-Oe*ut,ke,Oe],[0,ue-2*Oe],[0,Oe*ut,-ke*ut,Oe,-ke,Oe],[2*ke-ie,0],[-ke*ut,0,-ke,-Oe*ut,-ke,-Oe],[0,2*Oe-ue],[0,-Oe*ut,ke*ut,-Oe,ke,-Oe]],_+ke,B,[1,1],je,!0),this},f.__private__.ellipse=f.ellipse=function(_,B,ie,ue,ke){if(isNaN(_)||isNaN(B)||isNaN(ie)||isNaN(ue)||!Ul(ke))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Oe=4/3*(Math.SQRT2-1)*ie,je=4/3*(Math.SQRT2-1)*ue;return I0(_+ie,B),Ku(_+ie,B-je,_+Oe,B-ue,_,B-ue),Ku(_-Oe,B-ue,_-ie,B-je,_-ie,B),Ku(_-ie,B+je,_-Oe,B+ue,_,B+ue),Ku(_+Oe,B+ue,_+ie,B+je,_+ie,B),A0(ke),this},f.__private__.circle=f.circle=function(_,B,ie,ue){if(isNaN(_)||isNaN(B)||isNaN(ie)||!Ul(ue))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(_,B,ie,ie,ue)},f.setFont=function(_,B,ie){return ie&&(B=E(B,ie)),ht=gb(_,B,{disableWarning:!1}),this};var iA=f.__private__.getFont=f.getFont=function(){return mt[gb.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var _,B,ie={};for(_ in Mt)if(Mt.hasOwnProperty(_))for(B in ie[_]=[],Mt[_])Mt[_].hasOwnProperty(B)&&ie[_].push(B);return ie},f.addFont=function(_,B,ie,ue,ke){var Oe=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Oe.indexOf(arguments[3])!==-1?ke=arguments[3]:arguments[3]&&Oe.indexOf(arguments[3])==-1&&(ie=E(ie,ue)),hb.call(this,_,B,ie,ke=ke||"Identity-H")};var Lh,_0=t.lineWidth||.200025,jt=f.__private__.getLineWidth=f.getLineWidth=function(){return _0},sA=f.__private__.setLineWidth=f.setLineWidth=function(_){return _0=_,te(I(F(_))+" w"),this};f.__private__.setLineDash=kt.API.setLineDash=kt.API.setLineDashPattern=function(_,B){if(_=_||[],B=B||0,isNaN(B)||!Array.isArray(_))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return _=_.map(function(ie){return I(F(ie))}).join(" "),B=I(F(B)),te("["+_+"] "+B+" d"),this};var oA=f.__private__.getLineHeight=f.getLineHeight=function(){return Be*Lh};f.__private__.getLineHeight=f.getLineHeight=function(){return Be*Lh};var aA=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(_){return typeof(_=_||1.15)=="number"&&(Lh=_),this},lA=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return Lh};aA(t.lineHeight);var Dc=f.__private__.getHorizontalCoordinate=function(_){return F(_)},Lc=f.__private__.getVerticalCoordinate=function(_){return b===x?_:Ft[V].mediaBox.topRightY-Ft[V].mediaBox.bottomLeftY-F(_)},cA=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(_){return I(Dc(_))},uA=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(_){return I(Lc(_))},Vp=t.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return Bl(Vp)},f.__private__.setStrokeColor=f.setDrawColor=function(_,B,ie,ue){return Vp=el({ch1:_,ch2:B,ch3:ie,ch4:ue,pdfColorType:"draw",precision:2}),te(Vp),this};var E0=t.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return Bl(E0)},f.__private__.setFillColor=f.setFillColor=function(_,B,ie,ue){return E0=el({ch1:_,ch2:B,ch3:ie,ch4:ue,pdfColorType:"fill",precision:2}),te(E0),this};var Mh=t.textColor||"0 g",Wp=f.__private__.getTextColor=f.getTextColor=function(){return Bl(Mh)};f.__private__.setTextColor=f.setTextColor=function(_,B,ie,ue){return Mh=el({ch1:_,ch2:B,ch3:ie,ch4:ue,pdfColorType:"text",precision:3}),this};var Gp=t.charSpace,dA=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(Gp||0)};f.__private__.setCharSpace=f.setCharSpace=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Gp=_,this};var T0=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(_){var B=f.CapJoinStyles[_];if(B===void 0)throw new Error("Line cap style of '"+_+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return T0=B,te(B+" J"),this};var $0=0;f.__private__.setLineJoin=f.setLineJoin=function(_){var B=f.CapJoinStyles[_];if(B===void 0)throw new Error("Line join style of '"+_+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return $0=B,te(B+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(_){if(_=_||0,isNaN(_))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return te(I(F(_))+" M"),this},f.GState=Nk,f.setGState=function(_){(_=typeof _=="string"?Wt[Br[_]]:Fh(null,_)).equals(pi)||(te("/"+_.id+" gs"),pi=_)};var Fh=function(_,B){if(!_||!Br[_]){var ie=!1;for(var ue in Wt)if(Wt.hasOwnProperty(ue)&&Wt[ue].equals(B)){ie=!0;break}if(ie)B=Wt[ue];else{var ke="GS"+(Object.keys(Wt).length+1).toString(10);Wt[ke]=B,B.id=ke}return _&&(Br[_]=B.id),kn.publish("addGState",B),B}};f.addGState=function(_,B){return Fh(_,B),this},f.saveGraphicsState=function(){return te("q"),Dn.push({key:ht,size:Be,color:Mh}),this},f.restoreGraphicsState=function(){te("Q");var _=Dn.pop();return ht=_.key,Be=_.size,Mh=_.color,pi=null,this},f.setCurrentTransformationMatrix=function(_){return te(_.toString()+" cm"),this},f.comment=function(_){return te("#"+_),this};var jh=function(_,B){var ie=_||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ie},set:function(Oe){isNaN(Oe)||(ie=parseFloat(Oe))}});var ue=B||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ue},set:function(Oe){isNaN(Oe)||(ue=parseFloat(Oe))}});var ke="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ke},set:function(Oe){ke=Oe.toString()}}),this},P0=function(_,B,ie,ue){jh.call(this,_,B),this.type="rect";var ke=ie||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ke},set:function(je){isNaN(je)||(ke=parseFloat(je))}});var Oe=ue||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Oe},set:function(je){isNaN(je)||(Oe=parseFloat(je))}}),this},qp=function(){this.page=Ln,this.currentPage=V,this.pages=Se.slice(0),this.pagesContext=Ft.slice(0),this.x=vt,this.y=Pn,this.matrix=nn,this.width=wb(V),this.height=Mc(V),this.outputDestination=Le,this.id="",this.objectNumber=-1};qp.prototype.restore=function(){Ln=this.page,V=this.currentPage,Ft=this.pagesContext,Se=this.pages,vt=this.x,Pn=this.y,nn=this.matrix,kb(V,this.width),Fc(V,this.height),Le=this.outputDestination};var R0=function(_,B,ie,ue,ke){jl.push(new qp),Ln=V=0,Se=[],vt=_,Pn=B,nn=ke,S0([ie,ue])};for(var Bh in f.beginFormObject=function(_,B,ie,ue,ke){return R0(_,B,ie,ue,ke),this},f.endFormObject=function(_){return function(B){if($c[B])jl.pop().restore();else{var ie=new qp,ue="Xo"+(Object.keys(hs).length+1).toString(10);ie.id=ue,$c[B]=ue,hs[ue]=ie,kn.publish("addFormObject",ie),jl.pop().restore()}}(_),this},f.doFormObject=function(_,B){var ie=hs[$c[_]];return te("q"),te(B.toString()+" cm"),te("/"+ie.id+" Do"),te("Q"),this},f.getFormObject=function(_){var B=hs[$c[_]];return{x:B.x,y:B.y,width:B.width,height:B.height,matrix:B.matrix}},f.save=function(_,B){return _=_||"generated.pdf",(B=B||{}).returnPromise=B.returnPromise||!1,B.returnPromise===!1?(af(Rh(Oc()),_),typeof af.unload=="function"&&Ot.setTimeout&&setTimeout(af.unload,911),this):new Promise(function(ie,ue){try{var ke=af(Rh(Oc()),_);typeof af.unload=="function"&&Ot.setTimeout&&setTimeout(af.unload,911),ie(ke)}catch(Oe){ue(Oe.message)}})},kt.API)kt.API.hasOwnProperty(Bh)&&(Bh==="events"&&kt.API.events.length?function(_,B){var ie,ue,ke;for(ke=B.length-1;ke!==-1;ke--)ie=B[ke][0],ue=B[ke][1],_.subscribe.apply(_,[ie].concat(typeof ue=="function"?[ue]:ue))}(kn,kt.API.events):f[Bh]=kt.API[Bh]);function wb(_){return Ft[_].mediaBox.topRightX-Ft[_].mediaBox.bottomLeftX}function kb(_,B){Ft[_].mediaBox.topRightX=B+Ft[_].mediaBox.bottomLeftX}function Mc(_){return Ft[_].mediaBox.topRightY-Ft[_].mediaBox.bottomLeftY}function Fc(_,B){Ft[_].mediaBox.topRightY=B+Ft[_].mediaBox.bottomLeftY}var Sb=f.getPageWidth=function(_){return wb(_=_||V)/_t},Cb=f.setPageWidth=function(_,B){kb(_,B*_t)},zh=f.getPageHeight=function(_){return Mc(_=_||V)/_t},Nb=f.setPageHeight=function(_,B){Fc(_,B*_t)};return f.internal={pdfEscape:la,getStyle:xb,getFont:iA,getFontSize:We,getCharSpace:dA,getTextColor:Wp,getLineHeight:oA,getLineHeightFactor:lA,getLineWidth:jt,write:He,getHorizontalCoordinate:Dc,getVerticalCoordinate:Lc,getCoordinateString:cA,getVerticalCoordinateString:uA,collections:{},newObject:Cr,newAdditionalObject:Th,newObjectDeferred:Ri,newObjectDeferredBegin:qi,getFilters:tl,putStream:aa,events:kn,scaleFactor:_t,pageSize:{getWidth:function(){return Sb(V)},setWidth:function(_){Cb(V,_)},getHeight:function(){return zh(V)},setHeight:function(_){Nb(V,_)}},encryptionOptions:u,encryption:zr,getEncryptor:function(_){return u!==null?zr.encryptor(_,0):function(B){return B}},output:nl,getNumberOfPages:mb,pages:Se,out:te,f2:$,f3:R,getPageInfo:N0,getPageInfoByObjId:J5,getCurrentPageInfo:Q5,getPDFVersion:m,Point:jh,Rectangle:P0,Matrix:Tt,hasHotfix:Oh},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return Sb(V)},set:function(_){Cb(V,_)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return zh(V)},set:function(_){Nb(V,_)},enumerable:!0,configurable:!0}),(function(_){for(var B=0,ie=Ge.length;B<ie;B++){var ue=hb.call(this,_[B][0],_[B][1],_[B][2],Ge[B][3],!0);d===!1&&(h[ue]=!0);var ke=_[B][0].split("-");db({id:ue,fontName:ke[0],fontStyle:ke[1]||""})}kn.publish("addFonts",{fonts:mt,dictionary:Mt})}).call(f,Ge),ht="F1",fb(i,n),kn.publish("initialized"),f}lm.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},lm.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},lm.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},lm.prototype.processOwnerPassword=function(t,e){return AT(NT(e).substr(0,5),t)},lm.prototype.encryptor=function(t,e){var n=NT(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return AT(n,r)}},Nk.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||En(t)!==En(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},kt.API={events:[]},kt.version="3.0.3";var _r=kt.API,h4=1,Np=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},nm=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},zt=function(t){return t.toFixed(2)},hd=function(t){return t.toFixed(5)};_r.__acroform__={};var So=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},H8=function(t){return t*h4},Xl=function(t){var e=new LK,n=at.internal.getHeight(t)||0,r=at.internal.getWidth(t)||0;return e.BBox=[0,0,Number(zt(r)),Number(zt(n))],e},iwe=_r.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},swe=_r.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},owe=_r.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},Xr=_r.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return owe(t,e-1)},Yr=_r.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return iwe(t,e-1)},Zr=_r.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return swe(t,e-1)},awe=_r.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],s=t[1],o=t[2],a=t[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(s+a)||0,l.upperRight_X=n(i+o)||0,l.upperRight_Y=r(s)||0,[Number(zt(l.lowerLeft_X)),Number(zt(l.lowerLeft_Y)),Number(zt(l.upperRight_X)),Number(zt(l.upperRight_Y))]},lwe=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=IT(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+zt(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=Xl(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},IT=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function($){return $.split(`
`)}):i.map(function($){return[$]});var s=n,o=at.internal.getHeight(t)||0;o=o<0?-o:o;var a=at.internal.getWidth(t)||0;a=a<0?-a:a;var l=function($,R,F){if($+1<i.length){var L=R+" "+i[$+1][0];return Iw(L,t,F).width<=a-4}return!1};s++;e:for(;s>0;){e="",s--;var c,u,d=Iw("3",t,s).height,h=t.multiline?o-s:(o-d)/2,f=h+=2,p=0,m=0,y=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+Iw(e,t,s=12).width+", FieldWidth:"+a+`
`;break}for(var g="",v=0,x=0;x<i.length;x++)if(i.hasOwnProperty(x)){var b=!1;if(i[x].length!==1&&y!==i[x].length-1){if((d+2)*(v+2)+2>o)continue e;g+=i[x][y],b=!0,m=x,x--}else{g=(g+=i[x][y]+" ").substr(g.length-1)==" "?g.substr(0,g.length-1):g;var S=parseInt(x),A=l(S,g,s),E=x>=i.length-1;if(A&&!E){g+=" ",y=0;continue}if(A||E){if(E)m=S;else if(t.multiline&&(d+2)*(v+2)+2>o)continue e}else{if(!t.multiline||(d+2)*(v+2)+2>o)continue e;m=S}}for(var I="",T=p;T<=m;T++){var O=i[T];if(t.multiline){if(T===m){I+=O[y]+" ",y=(y+1)%O.length;continue}if(T===p){I+=O[O.length-1]+" ";continue}}I+=O[0]+" "}switch(I=I.substr(I.length-1)==" "?I.substr(0,I.length-1):I,u=Iw(I,t,s).width,t.textAlign){case"right":c=a-u-2;break;case"center":c=(a-u)/2;break;default:c=2}e+=zt(c)+" "+zt(f)+` Td
`,e+="("+Np(I)+`) Tj
`,e+=-zt(c)+` 0 Td
`,f=-(s+2),u=0,p=b?m:m+1,v++,g=""}break}return r.text=e,r.fontSize=s,r},Iw=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},cwe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},uwe=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},dwe=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Ol.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(cwe)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");h4=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new MK,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&uwe(s,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var a=r[o],l=[],c=a.Rect;if(a.Rect&&(a.Rect=awe(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=at.createDefaultAppearanceStream(a),En(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=c,a.hasAppearanceStream&&!a.appearanceStreamContent){var u=lwe(a);l.push({key:"AP",value:"<</N "+u+">>"}),i.internal.acroformPlugin.xForms.push(u)}if(a.appearanceStreamContent){var d="";for(var h in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(h)){var f=a.appearanceStreamContent[h];if(d+="/"+h+" ",d+="<<",Object.keys(f).length>=1||Array.isArray(f)){for(var o in f)if(f.hasOwnProperty(o)){var p=f[o];typeof p=="function"&&(p=p.call(i,a)),d+="/"+o+" "+p+" ",i.internal.acroformPlugin.xForms.indexOf(p)>=0||i.internal.acroformPlugin.xForms.push(p)}}else typeof(p=f)=="function"&&(p=p.call(i,a)),d+="/"+o+" "+p,i.internal.acroformPlugin.xForms.indexOf(p)>=0||i.internal.acroformPlugin.xForms.push(p);d+=">>"}l.push({key:"AP",value:`<<
`+d+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:a.objId}),i.internal.out("endobj")}s&&function(m,y){for(var g in m)if(m.hasOwnProperty(g)){var v=g,x=m[g];y.internal.newObjectDeferredBegin(x.objId,!0),En(x)==="object"&&typeof x.putStream=="function"&&x.putStream(),delete m[v]}}(i.internal.acroformPlugin.xForms,i)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},DK=_r.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(o){return o};if(Array.isArray(t)){for(var i="[",s=0;s<t.length;s++)switch(s!==0&&(i+=" "),En(t[s])){case"boolean":case"number":case"object":i+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+Np(r(t[s].toString()))+")"):i+=t[s].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},WI=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),"("+Np(r(t))+")"},sc=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};sc.prototype.toString=function(){return this.objId+" 0 R"},sc.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},sc.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:DK(i,this.objId,this.scope)}):i instanceof sc?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var LK=function(){sc.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};So(LK,sc);var MK=function(){sc.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Np(n(t))+")"}},set:function(n){t=n}})};So(MK,sc);var Ol=function t(){sc.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(g){if(isNaN(g))throw new Error('Invalid value "'+g+'" for attribute F supplied.');e=g}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Xr(e,3)},set:function(g){g?this.F=Yr(e,3):this.F=Zr(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(g){if(isNaN(g))throw new Error('Invalid value "'+g+'" for attribute Ff supplied.');n=g}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(g){r=g!==void 0?g:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(g){r[0]=g}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(g){r[1]=g}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(g){r[2]=g}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(g){r[3]=g}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(g){switch(g){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=g;break;default:throw new Error('Invalid value "'+g+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Ak)return;s="FieldObject"+t.FieldNum++}var g=function(v){return v};return this.scope&&(g=this.scope.internal.getEncryptor(this.objId)),"("+Np(g(s))+")"},set:function(g){s=g.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(g){s=g}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(g){o=g}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(g){a=g}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(g){l=g}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/h4:c},set:function(g){c=g}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(g){u=g}});var d="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!d||this instanceof Ak||this instanceof Df))return WI(d,this.objId,this.scope)},set:function(g){g=g.toString(),d=g}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Mi==0?WI(h,this.objId,this.scope):h},set:function(g){g=g.toString(),h=this instanceof Mi==0?g.substr(0,1)==="("?nm(g.substr(1,g.length-2)):nm(g):g}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Mi==1?nm(h.substr(1,h.length-1)):h},set:function(g){g=g.toString(),h=this instanceof Mi==1?"/"+g:g}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(g){this.V=g}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof Mi==0?WI(f,this.objId,this.scope):f},set:function(g){g=g.toString(),f=this instanceof Mi==0?g.substr(0,1)==="("?nm(g.substr(1,g.length-2)):nm(g):g}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Mi==1?nm(f.substr(1,f.length-1)):f},set:function(g){g=g.toString(),f=this instanceof Mi==1?"/"+g:g}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var p,m=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return m},set:function(g){g=!!g,m=g}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(p)return p},set:function(g){p=g}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Xr(this.Ff,1)},set:function(g){g?this.Ff=Yr(this.Ff,1):this.Ff=Zr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Xr(this.Ff,2)},set:function(g){g?this.Ff=Yr(this.Ff,2):this.Ff=Zr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Xr(this.Ff,3)},set:function(g){g?this.Ff=Yr(this.Ff,3):this.Ff=Zr(this.Ff,3)}});var y=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(y!==null)return y},set:function(g){if([0,1,2].indexOf(g)===-1)throw new Error('Invalid value "'+g+'" for attribute Q supplied.');y=g}}),Object.defineProperty(this,"textAlign",{get:function(){var g;switch(y){case 0:default:g="left";break;case 1:g="center";break;case 2:g="right"}return g},configurable:!0,enumerable:!0,set:function(g){switch(g){case"right":case 2:y=2;break;case"center":case 1:y=1;break;default:y=0}}})};So(Ol,sc);var zm=function(){Ol.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return DK(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(s,o,a){a||(a=1);for(var l,c=[];l=o.exec(s);)c.push(l[a]);return c}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Xr(this.Ff,18)},set:function(n){n?this.Ff=Yr(this.Ff,18):this.Ff=Zr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Xr(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Yr(this.Ff,19):this.Ff=Zr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Xr(this.Ff,20)},set:function(n){n?(this.Ff=Yr(this.Ff,20),e.sort()):this.Ff=Zr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Xr(this.Ff,22)},set:function(n){n?this.Ff=Yr(this.Ff,22):this.Ff=Zr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Xr(this.Ff,23)},set:function(n){n?this.Ff=Yr(this.Ff,23):this.Ff=Zr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Xr(this.Ff,27)},set:function(n){n?this.Ff=Yr(this.Ff,27):this.Ff=Zr(this.Ff,27)}}),this.hasAppearanceStream=!1};So(zm,Ol);var Um=function(){zm.call(this),this.fontName="helvetica",this.combo=!1};So(Um,zm);var Vm=function(){Um.call(this),this.combo=!0};So(Vm,Um);var O2=function(){Vm.call(this),this.edit=!0};So(O2,Vm);var Mi=function(){Ol.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Xr(this.Ff,15)},set:function(n){n?this.Ff=Yr(this.Ff,15):this.Ff=Zr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Xr(this.Ff,16)},set:function(n){n?this.Ff=Yr(this.Ff,16):this.Ff=Zr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Xr(this.Ff,17)},set:function(n){n?this.Ff=Yr(this.Ff,17):this.Ff=Zr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Xr(this.Ff,26)},set:function(n){n?this.Ff=Yr(this.Ff,26):this.Ff=Zr(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+Np(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){En(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};So(Mi,Ol);var D2=function(){Mi.call(this),this.pushButton=!0};So(D2,Mi);var Wm=function(){Mi.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};So(Wm,Mi);var Ak=function(){var t,e;Ol.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+Np(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){En(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=at.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};So(Ak,Ol),Wm.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},Wm.prototype.createOption=function(t){var e=new Ak;return e.Parent=this,e.optionName=t,this.Kids.push(e),hwe.call(this.scope,e),e};var L2=function(){Mi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=at.CheckBox.createAppearanceStream()};So(L2,Mi);var Df=function(){Ol.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Xr(this.Ff,13)},set:function(e){e?this.Ff=Yr(this.Ff,13):this.Ff=Zr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Xr(this.Ff,21)},set:function(e){e?this.Ff=Yr(this.Ff,21):this.Ff=Zr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Xr(this.Ff,23)},set:function(e){e?this.Ff=Yr(this.Ff,23):this.Ff=Zr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Xr(this.Ff,24)},set:function(e){e?this.Ff=Yr(this.Ff,24):this.Ff=Zr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Xr(this.Ff,25)},set:function(e){e?this.Ff=Yr(this.Ff,25):this.Ff=Zr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Xr(this.Ff,26)},set:function(e){e?this.Ff=Yr(this.Ff,26):this.Ff=Zr(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};So(Df,Ol);var M2=function(){Df.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Xr(this.Ff,14)},set:function(t){t?this.Ff=Yr(this.Ff,14):this.Ff=Zr(this.Ff,14)}}),this.password=!0};So(M2,Df);var at={CheckBox:{createAppearanceStream:function(){return{N:{On:at.CheckBox.YesNormal},D:{On:at.CheckBox.YesPushDown,Off:at.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Xl(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),s=IT(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+zt(at.internal.getWidth(t))+" "+zt(at.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+zt(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=Xl(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],s=at.internal.getHeight(t),o=at.internal.getWidth(t),a=IT(t,t.caption);return i.push("1 g"),i.push("0 0 "+zt(o)+" "+zt(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+zt(o-1)+" "+zt(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+zt(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=Xl(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+zt(at.internal.getWidth(t))+" "+zt(at.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:at.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=at.RadioButton.Circle.YesNormal,e.D[t]=at.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Xl(t);e.scope=t.scope;var n=[],r=at.internal.getWidth(t)<=at.internal.getHeight(t)?at.internal.getWidth(t)/4:at.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=at.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+hd(at.internal.getWidth(t)/2)+" "+hd(at.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Xl(t);e.scope=t.scope;var n=[],r=at.internal.getWidth(t)<=at.internal.getHeight(t)?at.internal.getWidth(t)/4:at.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*at.internal.Bezier_C).toFixed(5)),o=Number((r*at.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+hd(at.internal.getWidth(t)/2)+" "+hd(at.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+hd(at.internal.getWidth(t)/2)+" "+hd(at.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Xl(t);e.scope=t.scope;var n=[],r=at.internal.getWidth(t)<=at.internal.getHeight(t)?at.internal.getWidth(t)/4:at.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*at.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+hd(at.internal.getWidth(t)/2)+" "+hd(at.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:at.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=at.RadioButton.Cross.YesNormal,e.D[t]=at.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Xl(t);e.scope=t.scope;var n=[],r=at.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+zt(at.internal.getWidth(t)-2)+" "+zt(at.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(zt(r.x1.x)+" "+zt(r.x1.y)+" m"),n.push(zt(r.x2.x)+" "+zt(r.x2.y)+" l"),n.push(zt(r.x4.x)+" "+zt(r.x4.y)+" m"),n.push(zt(r.x3.x)+" "+zt(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Xl(t);e.scope=t.scope;var n=at.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+zt(at.internal.getWidth(t))+" "+zt(at.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+zt(at.internal.getWidth(t)-2)+" "+zt(at.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(zt(n.x1.x)+" "+zt(n.x1.y)+" m"),r.push(zt(n.x2.x)+" "+zt(n.x2.y)+" l"),r.push(zt(n.x4.x)+" "+zt(n.x4.y)+" m"),r.push(zt(n.x3.x)+" "+zt(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Xl(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+zt(at.internal.getWidth(t))+" "+zt(at.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};at.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=at.internal.getWidth(t),n=at.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},at.internal.getWidth=function(t){var e=0;return En(t)==="object"&&(e=H8(t.Rect[2])),e},at.internal.getHeight=function(t){var e=0;return En(t)==="object"&&(e=H8(t.Rect[3])),e};var hwe=_r.addField=function(t){if(dwe(this,t),!(t instanceof Ol))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};_r.AcroFormChoiceField=zm,_r.AcroFormListBox=Um,_r.AcroFormComboBox=Vm,_r.AcroFormEditBox=O2,_r.AcroFormButton=Mi,_r.AcroFormPushButton=D2,_r.AcroFormRadioButton=Wm,_r.AcroFormCheckBox=L2,_r.AcroFormTextField=Df,_r.AcroFormPasswordField=M2,_r.AcroFormAppearance=at,_r.AcroForm={ChoiceField:zm,ListBox:Um,ComboBox:Vm,EditBox:O2,Button:Mi,PushButton:D2,RadioButton:Wm,CheckBox:L2,TextField:Df,PasswordField:M2,Appearance:at},kt.AcroForm={ChoiceField:zm,ListBox:Um,ComboBox:Vm,EditBox:O2,Button:Mi,PushButton:D2,RadioButton:Wm,CheckBox:L2,TextField:Df,PasswordField:M2,Appearance:at};function FK(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){var e="addImage_";t.__addimage__={};var n="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=t.__addimage__.getImageFileTypeByImageData=function($,R){var F,L,U,q,K,j=n;if((R=R||n)==="RGBA"||$.data!==void 0&&$.data instanceof Uint8ClampedArray&&"height"in $&&"width"in $)return"RGBA";if(A($))for(K in r)for(U=r[K],F=0;F<U.length;F+=1){for(q=!0,L=0;L<U[F].length;L+=1)if(U[F][L]!==void 0&&U[F][L]!==$[L]){q=!1;break}if(q===!0){j=K;break}}else for(K in r)for(U=r[K],F=0;F<U.length;F+=1){for(q=!0,L=0;L<U[F].length;L+=1)if(U[F][L]!==void 0&&U[F][L]!==$.charCodeAt(L)){q=!1;break}if(q===!0){j=K;break}}return j===n&&R!==n&&(j=R),j},s=function $(R){for(var F=this.internal.write,L=this.internal.putStream,U=(0,this.internal.getFilters)();U.indexOf("FlateEncode")!==-1;)U.splice(U.indexOf("FlateEncode"),1);R.objectId=this.internal.newObject();var q=[];if(q.push({key:"Type",value:"/XObject"}),q.push({key:"Subtype",value:"/Image"}),q.push({key:"Width",value:R.width}),q.push({key:"Height",value:R.height}),R.colorSpace===g.INDEXED?q.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(R.palette.length/3-1)+" "+("sMask"in R&&R.sMask!==void 0?R.objectId+2:R.objectId+1)+" 0 R]"}):(q.push({key:"ColorSpace",value:"/"+R.colorSpace}),R.colorSpace===g.DEVICE_CMYK&&q.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),q.push({key:"BitsPerComponent",value:R.bitsPerComponent}),"decodeParameters"in R&&R.decodeParameters!==void 0&&q.push({key:"DecodeParms",value:"<<"+R.decodeParameters+">>"}),"transparency"in R&&Array.isArray(R.transparency)&&R.transparency.length>0){for(var K="",j=0,Y=R.transparency.length;j<Y;j++)K+=R.transparency[j]+" "+R.transparency[j]+" ";q.push({key:"Mask",value:"["+K+"]"})}R.sMask!==void 0&&q.push({key:"SMask",value:R.objectId+1+" 0 R"});var ae=R.filter!==void 0?["/"+R.filter]:void 0;if(L({data:R.data,additionalKeyValues:q,alreadyAppliedFilters:ae,objectId:R.objectId}),F("endobj"),"sMask"in R&&R.sMask!==void 0){var le,M=(le=R.sMaskBitsPerComponent)!==null&&le!==void 0?le:R.bitsPerComponent,V={width:R.width,height:R.height,colorSpace:"DeviceGray",bitsPerComponent:M,data:R.sMask};"filter"in R&&(V.decodeParameters="/Predictor ".concat(R.predictor," /Colors 1 /BitsPerComponent ").concat(M," /Columns ").concat(R.width),V.filter=R.filter),$.call(this,V)}if(R.colorSpace===g.INDEXED){var H=this.internal.newObject();L({data:I(new Uint8Array(R.palette)),objectId:H}),F("endobj")}},o=function(){var $=this.internal.collections[e+"images"];for(var R in $)s.call(this,$[R])},a=function(){var $,R=this.internal.collections[e+"images"],F=this.internal.write;for(var L in R)F("/I"+($=R[L]).index,$.objectId,"0","R")},l=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",a))},c=function(){var $=this.internal.collections[e+"images"];return l.call(this),$},u=function(){return Object.keys(this.internal.collections[e+"images"]).length},d=function($){return typeof t["process"+$.toUpperCase()]=="function"},h=function($){return En($)==="object"&&$.nodeType===1},f=function($,R){if($.nodeName==="IMG"&&$.hasAttribute("src")){var F=""+$.getAttribute("src");if(F.indexOf("data:image/")===0)return R2(unescape(F).split("base64,").pop());var L=t.loadFile(F,!0);if(L!==void 0)return L}if($.nodeName==="CANVAS"){if($.width===0||$.height===0)throw new Error("Given canvas must have data. Canvas width: "+$.width+", height: "+$.height);var U;switch(R){case"PNG":U="image/png";break;case"WEBP":U="image/webp";break;default:U="image/jpeg"}return R2($.toDataURL(U,1).split("base64,").pop())}},p=function($){var R=this.internal.collections[e+"images"];if(R){for(var F in R)if($===R[F].alias)return R[F]}},m=function($,R,F){return $||R||($=-96,R=-96),$<0&&($=-1*F.width*72/$/this.internal.scaleFactor),R<0&&(R=-1*F.height*72/R/this.internal.scaleFactor),$===0&&($=R*F.width/F.height),R===0&&(R=$*F.height/F.width),[$,R]},y=function($,R,F,L,U,q){var K=m.call(this,F,L,U),j=this.internal.getCoordinateString,Y=this.internal.getVerticalCoordinateString,ae=c.call(this);if(F=K[0],L=K[1],ae[U.index]=U,q){q*=Math.PI/180;var le=Math.cos(q),M=Math.sin(q),V=function(J){return J.toFixed(4)},H=[V(le),V(M),V(-1*M),V(le),0,0,"cm"]}this.internal.write("q"),q?(this.internal.write([1,"0","0",1,j($),Y(R+L),"cm"].join(" ")),this.internal.write(H.join(" ")),this.internal.write([j(F),"0","0",j(L),"0","0","cm"].join(" "))):this.internal.write([j(F),"0","0",j(L),j($),Y(R+L),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+U.index+" Do"),this.internal.write("Q")},g=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var v=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},x=t.__addimage__.sHashCode=function($){var R,F,L=0;if(typeof $=="string")for(F=$.length,R=0;R<F;R++)L=(L<<5)-L+$.charCodeAt(R),L|=0;else if(A($))for(F=$.byteLength/2,R=0;R<F;R++)L=(L<<5)-L+$[R],L|=0;return L},b=t.__addimage__.validateStringAsBase64=function($){($=$||"").toString().trim();var R=!0;return $.length===0&&(R=!1),$.length%4!=0&&(R=!1),/^[A-Za-z0-9+/]+$/.test($.substr(0,$.length-2))===!1&&(R=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test($.substr(-2))===!1&&(R=!1),R},S=t.__addimage__.extractImageFromDataUrl=function($){if($==null||!($=$.trim()).startsWith("data:"))return null;var R=$.indexOf(",");return R<0?null:$.substring(0,R).trim().endsWith("base64")?$.substring(R+1):null};t.__addimage__.isArrayBuffer=function($){return $ instanceof ArrayBuffer};var A=t.__addimage__.isArrayBufferView=function($){return $ instanceof Int8Array||$ instanceof Uint8Array||$ instanceof Uint8ClampedArray||$ instanceof Int16Array||$ instanceof Uint16Array||$ instanceof Int32Array||$ instanceof Uint32Array||$ instanceof Float32Array||$ instanceof Float64Array},E=t.__addimage__.binaryStringToUint8Array=function($){for(var R=$.length,F=new Uint8Array(R),L=0;L<R;L++)F[L]=$.charCodeAt(L);return F},I=t.__addimage__.arrayBufferToBinaryString=function($){for(var R="",F=A($)?$:new Uint8Array($),L=0;L<F.length;L+=8192)R+=String.fromCharCode.apply(null,F.subarray(L,L+8192));return R};t.addImage=function(){var $,R,F,L,U,q,K,j,Y;if(typeof arguments[1]=="number"?(R=n,F=arguments[1],L=arguments[2],U=arguments[3],q=arguments[4],K=arguments[5],j=arguments[6],Y=arguments[7]):(R=arguments[1],F=arguments[2],L=arguments[3],U=arguments[4],q=arguments[5],K=arguments[6],j=arguments[7],Y=arguments[8]),En($=arguments[0])==="object"&&!h($)&&"imageData"in $){var ae=$;$=ae.imageData,R=ae.format||R||n,F=ae.x||F||0,L=ae.y||L||0,U=ae.w||ae.width||U,q=ae.h||ae.height||q,K=ae.alias||K,j=ae.compression||j,Y=ae.rotation||ae.angle||Y}var le=this.internal.getFilters();if(j===void 0&&le.indexOf("FlateEncode")!==-1&&(j="SLOW"),isNaN(F)||isNaN(L))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var M=T.call(this,$,R,K,j);return y.call(this,F,L,U,q,M,Y),this};var T=function($,R,F,L){var U,q,K;if(typeof $=="string"&&i($)===n){$=unescape($);var j=O($,!1);(j!==""||(j=t.loadFile($,!0))!==void 0)&&($=j)}if(h($)&&($=f($,R)),R=i($,R),!d(R))throw new Error("addImage does not support files of type '"+R+"', please ensure that a plugin for '"+R+"' support is added.");if(((K=F)==null||K.length===0)&&(F=function(Y){return typeof Y=="string"||A(Y)?x(Y):A(Y.data)?x(Y.data):null}($)),(U=p.call(this,F))||($ instanceof Uint8Array||R==="RGBA"||(q=$,$=E($)),U=this["process"+R.toUpperCase()]($,u.call(this),F,function(Y){return Y&&typeof Y=="string"&&(Y=Y.toUpperCase()),Y in t.image_compression?Y:v.NONE}(L),q)),!U)throw new Error("An unknown error occurred whilst processing the image.");return U},O=t.__addimage__.convertBase64ToBinaryString=function($,R){R=typeof R!="boolean"||R;var F,L="";if(typeof $=="string"){var U;F=(U=S($))!==null&&U!==void 0?U:$;try{L=R2(F)}catch(q){if(R)throw b(F)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+q.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return L};t.getImageProperties=function($){var R,F,L="";if(h($)&&($=f($)),typeof $=="string"&&i($)===n&&((L=O($,!1))===""&&(L=t.loadFile($)||""),$=L),F=i($),!d(F))throw new Error("addImage does not support files of type '"+F+"', please ensure that a plugin for '"+F+"' support is added.");if($ instanceof Uint8Array||($=E($)),!(R=this["process"+F.toUpperCase()]($)))throw new Error("An unknown error occurred whilst processing the image");return R.fileType=F,R}})(kt.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};kt.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,s,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),c=n.pageContext.annotations,u=!1,d=0;d<c.length&&!u;d++)switch((r=c[d]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var h=0;h<c.length;h++){r=c[h];var f=this.internal.pdfEscape,p=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var m=this.internal.newAdditionalObject(),y=this.internal.newAdditionalObject(),g=this.internal.getEncryptor(m.objId),v=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+f(g(r.contents))+")",s+=" /Popup "+y.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+f(g(v))+") >>",m.content=s;var x=m.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+x,r.open&&(s+=" /Open true"),s+=" >>",y.content=s,this.internal.write(m.objId,"0 R",y.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var b=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+f(p(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+b+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var S=this.annotations._nameMap[r.options.name];r.options.pageNumber=S.page,r.options.top=S.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+f(p(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;default:var A=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+A+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,s,o){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(n),y:c(r),w:l(n+i),h:c(r+s)},options:o,type:"link"})},t.textWithLink=function(n,r,i,s){var o,a,l=this.getTextWidth(n),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var u=this.splitTextToSize(n,a).length;o=Math.ceil(c*u)}else a=l,o=c;return this.text(n,r,i,s),i+=.2*c,s.align==="center"&&(r-=l/2),s.align==="right"&&(r-=l),this.link(r,i-c,a,o,s),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(kt.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(m){return e[m.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(m){return typeof m=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(m)},a=t.__arabicParser__.isArabicEndLetter=function(m){return o(m)&&s(m)&&e[m.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(m){return o(m)&&i.indexOf(m.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(m){return o(m)&&s(m)&&e[m.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(m){return o(m)&&s(m)&&e[m.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(m){return o(m)&&s(m)&&e[m.charCodeAt(0)].length>=3};var u=t.__arabicParser__.arabicLetterHasMedialForm=function(m){return o(m)&&s(m)&&e[m.charCodeAt(0)].length==4},d=t.__arabicParser__.resolveLigatures=function(m){var y=0,g=n,v="",x=0;for(y=0;y<m.length;y+=1)g[m.charCodeAt(y)]!==void 0?(x++,typeof(g=g[m.charCodeAt(y)])=="number"&&(v+=String.fromCharCode(g),g=n,x=0),y===m.length-1&&(g=n,v+=m.charAt(y-(x-1)),y-=x-1,x=0)):(g=n,v+=m.charAt(y-x),y-=x,x=0);return v};t.__arabicParser__.isArabicDiacritic=function(m){return m!==void 0&&r[m.charCodeAt(0)]!==void 0};var h=t.__arabicParser__.getCorrectForm=function(m,y,g){return o(m)?s(m)===!1?-1:!c(m)||!o(y)&&!o(g)||!o(g)&&a(y)||a(m)&&!o(y)||a(m)&&l(y)||a(m)&&a(y)?0:u(m)&&o(y)&&!a(y)&&o(g)&&c(g)?3:a(m)||!o(g)?1:2:-1},f=function(m){var y=0,g=0,v=0,x="",b="",S="",A=(m=m||"").split("\\s+"),E=[];for(y=0;y<A.length;y+=1){for(E.push(""),g=0;g<A[y].length;g+=1)x=A[y][g],b=A[y][g-1],S=A[y][g+1],o(x)?(v=h(x,b,S),E[y]+=v!==-1?String.fromCharCode(e[x.charCodeAt(0)][v]):x):E[y]+=x;E[y]=d(E[y])}return E.join(" ")},p=t.__arabicParser__.processArabic=t.processArabic=function(){var m,y=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,g=[];if(Array.isArray(y)){var v=0;for(g=[],v=0;v<y.length;v+=1)Array.isArray(y[v])?g.push([f(y[v][0]),y[v][1],y[v][2]]):g.push([f(y[v])]);m=g}else m=f(y);return typeof arguments[0]=="string"?m:(arguments[0].text=m,arguments[0])};t.events.push(["preProcessText",p])}(kt.API),kt.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(a){n=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(kt.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(m){l=m}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(m){c=m}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(m){u=m}});var d=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return d},set:function(m){d=m}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(m){h=m}});var f=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return f},set:function(m){f=m}});var p=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return p},set:function(m){p=m}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,c){r.call(this);var u=(c=c||{}).fontSize||this.getFontSize(),d=c.font||this.getFont(),h=c.scaleFactor||this.internal.scaleFactor,f=0,p=0,m=0,y=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var g=c.maxWidth;g>0?typeof l=="string"?l=this.splitTextToSize(l,g):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(x,b){return x.concat(y.splitTextToSize(b,g))},[])):l=Array.isArray(l)?l:[l];for(var v=0;v<l.length;v++)f<(m=this.getStringUnitWidth(l[v],{font:d})*u)&&(f=m);return f!==0&&(p=l.length),{w:f/=h,h:Math.max((p*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/h,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var c=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,d=this.internal.__cell__.margins||e,h=this.internal.__cell__.tableHeaderRow,f=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+d.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=d.top,f&&h&&(this.printHeaderRow(l.lineNumber,!0),l.y+=h[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-u,l.y+u,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+u,{align:"center",baseline:"top",maxWidth:l.width-u-u}):this.text(l.text,l.x+u,l.y+u,{align:"left",baseline:"top",maxWidth:l.width-u-u})),this.internal.__cell__.lastCell=l,this};t.table=function(l,c,u,d,h){if(r.call(this),!u)throw new Error("No data for PDF table.");var f,p,m,y,g=[],v=[],x=[],b={},S={},A=[],E=[],I=(h=h||{}).autoSize||!1,T=h.printHeaders!==!1,O=h.css&&h.css["font-size"]!==void 0?16*h.css["font-size"]:h.fontSize||12,$=h.margins||Object.assign({width:this.getPageWidth()},e),R=typeof h.padding=="number"?h.padding:3,F=h.headerBackgroundColor||"#c8c8c8",L=h.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=T,this.internal.__cell__.margins=$,this.internal.__cell__.table_font_size=O,this.internal.__cell__.padding=R,this.internal.__cell__.headerBackgroundColor=F,this.internal.__cell__.headerTextColor=L,this.setFontSize(O),d==null)v=g=Object.keys(u[0]),x=g.map(function(){return"left"});else if(Array.isArray(d)&&En(d[0])==="object")for(g=d.map(function(ae){return ae.name}),v=d.map(function(ae){return ae.prompt||ae.name||""}),x=d.map(function(ae){return ae.align||"left"}),f=0;f<d.length;f+=1)S[d[f].name]=.7499990551181103*d[f].width;else Array.isArray(d)&&typeof d[0]=="string"&&(v=g=d,x=g.map(function(){return"left"}));if(I||Array.isArray(d)&&typeof d[0]=="string")for(f=0;f<g.length;f+=1){for(b[y=g[f]]=u.map(function(ae){return ae[y]}),this.setFont(void 0,"bold"),A.push(this.getTextDimensions(v[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),p=b[y],this.setFont(void 0,"normal"),m=0;m<p.length;m+=1)A.push(this.getTextDimensions(p[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);S[y]=Math.max.apply(null,A)+R+R,A=[]}if(T){var U={};for(f=0;f<g.length;f+=1)U[g[f]]={},U[g[f]].text=v[f],U[g[f]].align=x[f];var q=a.call(this,U,S);E=g.map(function(ae){return new s(l,c,S[ae],q,U[ae].text,void 0,U[ae].align)}),this.setTableHeaderRow(E),this.printHeaderRow(1,!1)}var K=d.reduce(function(ae,le){return ae[le.name]=le.align,ae},{});for(f=0;f<u.length;f+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:f,data:u[f]},this);var j=a.call(this,u[f],S);for(m=0;m<g.length;m+=1){var Y=u[f][g[m]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:f,col:m,data:Y},this),o.call(this,new s(l,c,S[g[m]],j,Y,f+2,K[g[m]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var a=function(l,c){var u=this.internal.__cell__.padding,d=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(l).map(function(f){var p=l[f];return this.splitTextToSize(p.hasOwnProperty("text")?p.text:p,c[f]-u-u)},this).map(function(f){return this.getLineHeightFactor()*f.length*d/h+u+u},this).reduce(function(f,p){return Math.max(f,p)},0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,c){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var d=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(d[0],d[1],d[2],d[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],f=0;f<this.internal.__cell__.tableHeaderRow.length;f+=1){u=this.internal.__cell__.tableHeaderRow[f].clone(),c&&(u.y=this.internal.__cell__.margins.top||0,h.push(u)),u.lineNumber=l;var p=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,u),this.setTextColor(p)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),n=!1}}(kt.API);var jK={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},BK=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],_T=FK(BK),zK=[100,200,300,400,500,600,700,800,900],fwe=FK(zK);function GI(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return jK[s=s||"normal"]?s:"normal"}(t.style),r=function(s){return s?typeof s=="number"?s>=100&&s<=900&&s%100==0?s:400:/^\d00$/.test(s)?parseInt(s):s==="bold"?700:400:400}(t.weight),i=function(s){return typeof _T[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function K8(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var pwe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},X8={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Y8(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function Z8(t){return t.trimLeft()}function mwe(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function gwe(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var _w,J8,Q8,rm,Ew,eB,tB,nB,qI=["times"];function rB(t,e,n,r,i){var s=4,o=sB;switch(i){case kt.API.image_compression.FAST:s=1,o=iB;break;case kt.API.image_compression.MEDIUM:s=6,o=oB;break;case kt.API.image_compression.SLOW:s=9,o=aB}t=function(l,c,u,d){for(var h,f=l.length/c,p=new Uint8Array(l.length+f),m=[ywe,iB,sB,oB,aB],y=0;y<f;y+=1){var g=y*c,v=l.subarray(g,g+c);if(d)p.set(d(v,u,h),g+y);else{for(var x=m.length,b=[],S=0;S<x;S+=1)b[S]=m[S](v,u,h);var A=xwe(b.concat());p.set(b[A],g+y)}h=v}return p}(t,e,Math.ceil(n*r/8),o);var a=mT(t,{level:s});return kt.API.__addimage__.arrayBufferToBinaryString(a)}function ywe(t){var e=Array.apply([],t);return e.unshift(0),e}function iB(t,e){var n=t.length,r=[];r[0]=1;for(var i=0;i<n;i+=1){var s=t[i-e]||0;r[i+1]=t[i]-s+256&255}return r}function sB(t,e,n){var r=t.length,i=[];i[0]=2;for(var s=0;s<r;s+=1){var o=n&&n[s]||0;i[s+1]=t[s]-o+256&255}return i}function oB(t,e,n){var r=t.length,i=[];i[0]=3;for(var s=0;s<r;s+=1){var o=t[s-e]||0,a=n&&n[s]||0;i[s+1]=t[s]+256-(o+a>>>1)&255}return i}function aB(t,e,n){var r=t.length,i=[];i[0]=4;for(var s=0;s<r;s+=1){var o=vwe(t[s-e]||0,n&&n[s]||0,n&&n[s-e]||0);i[s+1]=t[s]-o+256&255}return i}function vwe(t,e,n){if(t===e&&e===n)return t;var r=Math.abs(e-n),i=Math.abs(t-n),s=Math.abs(t+e-n-n);return r<=i&&r<=s?t:i<=s?e:n}function xwe(t){var e=t.map(function(n){return n.reduce(function(r,i){return r+Math.abs(i)},0)});return e.indexOf(Math.min.apply(null,e))}function HI(t,e,n){var r=e*n,i=Math.floor(r/8),s=16-(r-8*i+n),o=(1<<n)-1;return UK(t,i)>>s&o}function lB(t,e,n,r){var i=n*r,s=Math.floor(i/8),o=16-(i-8*s+r),a=(1<<r)-1,l=(e&a)<<o;(function(c,u,d){if(u+1<c.byteLength)c.setUint16(u,d,!1);else{var h=d>>8&255;c.setUint8(u,h)}})(t,s,UK(t,s)&~(a<<o)&65535|l)}function UK(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function bwe(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],s=i>>7,o=1<<1+(7&i);t[e++],t[e++];var a=null,l=null;s&&(a=e,l=o,e+=3*o);var c=!0,u=[],d=0,h=null,f=0,p=null;for(this.width=n,this.height=r;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,p=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!(($=t[e++])>=0))throw Error("Invalid block size");if($===0)break;e+=$}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var m=t[e++];d=t[e++]|t[e++]<<8,h=t[e++],1&m||(h=null),f=m>>2&7,e++;break;case 254:for(;;){if(!(($=t[e++])>=0))throw Error("Invalid block size");if($===0)break;e+=$}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var y=t[e++]|t[e++]<<8,g=t[e++]|t[e++]<<8,v=t[e++]|t[e++]<<8,x=t[e++]|t[e++]<<8,b=t[e++],S=b>>6&1,A=1<<1+(7&b),E=a,I=l,T=!1;b>>7&&(T=!0,E=e,I=A,e+=3*A);var O=e;for(e++;;){var $;if(!(($=t[e++])>=0))throw Error("Invalid block size");if($===0)break;e+=$}u.push({x:y,y:g,width:v,height:x,has_local_palette:T,palette_offset:E,palette_size:I,data_offset:O,data_length:e-O,transparent_index:h,interlaced:!!S,delay:d,disposal:f});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return p},this.frameInfo=function(R){if(R<0||R>=u.length)throw new Error("Frame index out of range.");return u[R]},this.decodeAndBlitFrameBGRA=function(R,F){var L=this.frameInfo(R),U=L.width*L.height,q=new Uint8Array(U);cB(t,L.data_offset,q,U);var K=L.palette_offset,j=L.transparent_index;j===null&&(j=256);var Y=L.width,ae=n-Y,le=Y,M=4*(L.y*n+L.x),V=4*((L.y+L.height)*n+L.x),H=M,J=4*ae;L.interlaced===!0&&(J+=4*n*7);for(var oe=8,ce=0,ge=q.length;ce<ge;++ce){var ee=q[ce];if(le===0&&(le=Y,(H+=J)>=V&&(J=4*ae+4*n*(oe-1),H=M+(Y+ae)*(oe<<1),oe>>=1)),ee===j)H+=4;else{var fe=t[K+3*ee],Se=t[K+3*ee+1],me=t[K+3*ee+2];F[H++]=me,F[H++]=Se,F[H++]=fe,F[H++]=255}--le}},this.decodeAndBlitFrameRGBA=function(R,F){var L=this.frameInfo(R),U=L.width*L.height,q=new Uint8Array(U);cB(t,L.data_offset,q,U);var K=L.palette_offset,j=L.transparent_index;j===null&&(j=256);var Y=L.width,ae=n-Y,le=Y,M=4*(L.y*n+L.x),V=4*((L.y+L.height)*n+L.x),H=M,J=4*ae;L.interlaced===!0&&(J+=4*n*7);for(var oe=8,ce=0,ge=q.length;ce<ge;++ce){var ee=q[ce];if(le===0&&(le=Y,(H+=J)>=V&&(J=4*ae+4*n*(oe-1),H=M+(Y+ae)*(oe<<1),oe>>=1)),ee===j)H+=4;else{var fe=t[K+3*ee],Se=t[K+3*ee+1],me=t[K+3*ee+2];F[H++]=fe,F[H++]=Se,F[H++]=me,F[H++]=255}--le}}}function cB(t,e,n,r){for(var i=t[e++],s=1<<i,o=s+1,a=o+1,l=i+1,c=(1<<l)-1,u=0,d=0,h=0,f=t[e++],p=new Int32Array(4096),m=null;;){for(;u<16&&f!==0;)d|=t[e++]<<u,u+=8,f===1?f=t[e++]:--f;if(u<l)break;var y=d&c;if(d>>=l,u-=l,y!==s){if(y===o)break;for(var g=y<a?y:m,v=0,x=g;x>s;)x=p[x]>>8,++v;var b=x;if(h+v+(g!==y?1:0)>r)return void jn.log("Warning, gif stream longer than expected.");n[h++]=b;var S=h+=v;for(g!==y&&(n[h++]=b),x=g;v--;)x=p[x],n[--S]=255&x,x>>=8;m!==null&&a<4096&&(p[a++]=m<<8|b,a>=c+1&&l<12&&(++l,c=c<<1|1)),m=y}else a=o+1,c=(1<<(l=i+1))-1,m=null}return h!==r&&jn.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function KI(t){var e,n,r,i,s,o=Math.floor,a=new Array(64),l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(65535),h=new Array(65535),f=new Array(64),p=new Array(64),m=[],y=0,g=7,v=new Array(64),x=new Array(64),b=new Array(64),S=new Array(256),A=new Array(2048),E=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],I=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],T=[0,1,2,3,4,5,6,7,8,9,10,11],O=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],$=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],R=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],F=[0,1,2,3,4,5,6,7,8,9,10,11],L=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],U=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function q(M,V){for(var H=0,J=0,oe=new Array,ce=1;ce<=16;ce++){for(var ge=1;ge<=M[ce];ge++)oe[V[J]]=[],oe[V[J]][0]=H,oe[V[J]][1]=ce,J++,H++;H*=2}return oe}function K(M){for(var V=M[0],H=M[1]-1;H>=0;)V&1<<H&&(y|=1<<g),H--,--g<0&&(y==255?(j(255),j(0)):j(y),g=7,y=0)}function j(M){m.push(M)}function Y(M){j(M>>8&255),j(255&M)}function ae(M,V,H,J,oe){for(var ce,ge=oe[0],ee=oe[240],fe=function(Be,Je){var We,Ct,dt,Vt,Nt,At,en,It,ht,_t,vt=0;for(ht=0;ht<8;++ht){We=Be[vt],Ct=Be[vt+1],dt=Be[vt+2],Vt=Be[vt+3],Nt=Be[vt+4],At=Be[vt+5],en=Be[vt+6];var Pn=We+(It=Be[vt+7]),nn=We-It,mt=Ct+en,Mt=Ct-en,Dn=dt+At,Et=dt-At,rn=Vt+Nt,Wt=Vt-Nt,Br=Pn+rn,pi=Pn-rn,Ln=mt+Dn,Ft=mt-Dn;Be[vt]=Br+Ln,Be[vt+4]=Br-Ln;var kn=.707106781*(Ft+pi);Be[vt+2]=pi+kn,Be[vt+6]=pi-kn;var Eh=.382683433*((Br=Wt+Et)-(Ft=Mt+nn)),hs=.5411961*Br+Eh,$c=1.306562965*Ft+Eh,jl=.707106781*(Ln=Et+Mt),Tt=nn+jl,Pc=nn-jl;Be[vt+5]=Pc+hs,Be[vt+3]=Pc-hs,Be[vt+1]=Tt+$c,Be[vt+7]=Tt-$c,vt+=8}for(vt=0,ht=0;ht<8;++ht){We=Be[vt],Ct=Be[vt+8],dt=Be[vt+16],Vt=Be[vt+24],Nt=Be[vt+32],At=Be[vt+40],en=Be[vt+48];var Rc=We+(It=Be[vt+56]),sa=We-It,oa=Ct+en,Cr=Ct-en,Ri=dt+At,qi=dt-At,Th=Vt+Nt,qu=Vt-Nt,Qa=Rc+Th,Bl=Rc-Th,el=oa+Ri,tl=oa-Ri;Be[vt]=Qa+el,Be[vt+32]=Qa-el;var aa=.707106781*(tl+Bl);Be[vt+16]=Bl+aa,Be[vt+48]=Bl-aa;var $h=.382683433*((Qa=qu+qi)-(tl=Cr+sa)),zl=.5411961*Qa+$h,Ph=1.306562965*tl+$h,jp=.707106781*(el=qi+Cr),Bp=sa+jp,zp=sa-jp;Be[vt+40]=zp+zl,Be[vt+24]=zp-zl,Be[vt+8]=Bp+Ph,Be[vt+56]=Bp-Ph,vt++}for(ht=0;ht<64;++ht)_t=Be[ht]*Je[ht],f[ht]=_t>0?_t+.5|0:_t-.5|0;return f}(M,V),Se=0;Se<64;++Se)p[E[Se]]=fe[Se];var me=p[0]-H;H=p[0],me==0?K(J[0]):(K(J[h[ce=32767+me]]),K(d[ce]));for(var Le=63;Le>0&&p[Le]==0;)Le--;if(Le==0)return K(ge),H;for(var we,te=1;te<=Le;){for(var He=te;p[te]==0&&te<=Le;)++te;var Ze=te-He;if(Ze>=16){we=Ze>>4;for(var Ge=1;Ge<=we;++Ge)K(ee);Ze&=15}ce=32767+p[te],K(oe[(Ze<<4)+h[ce]]),K(d[ce]),te++}return Le!=63&&K(ge),H}function le(M){M=Math.min(Math.max(M,1),100),s!=M&&(function(V){for(var H=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],J=0;J<64;J++){var oe=o((H[J]*V+50)/100);oe=Math.min(Math.max(oe,1),255),a[E[J]]=oe}for(var ce=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ge=0;ge<64;ge++){var ee=o((ce[ge]*V+50)/100);ee=Math.min(Math.max(ee,1),255),l[E[ge]]=ee}for(var fe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Se=0,me=0;me<8;me++)for(var Le=0;Le<8;Le++)c[Se]=1/(a[E[Se]]*fe[me]*fe[Le]*8),u[Se]=1/(l[E[Se]]*fe[me]*fe[Le]*8),Se++}(M<50?Math.floor(5e3/M):Math.floor(200-2*M)),s=M)}this.encode=function(M,V){V&&le(V),m=new Array,y=0,g=7,Y(65496),Y(65504),Y(16),j(74),j(70),j(73),j(70),j(0),j(1),j(1),j(0),Y(1),Y(1),j(0),j(0),function(){Y(65499),Y(132),j(0);for(var Ct=0;Ct<64;Ct++)j(a[Ct]);j(1);for(var dt=0;dt<64;dt++)j(l[dt])}(),function(Ct,dt){Y(65472),Y(17),j(8),Y(dt),Y(Ct),j(3),j(1),j(17),j(0),j(2),j(17),j(1),j(3),j(17),j(1)}(M.width,M.height),function(){Y(65476),Y(418),j(0);for(var Ct=0;Ct<16;Ct++)j(I[Ct+1]);for(var dt=0;dt<=11;dt++)j(T[dt]);j(16);for(var Vt=0;Vt<16;Vt++)j(O[Vt+1]);for(var Nt=0;Nt<=161;Nt++)j($[Nt]);j(1);for(var At=0;At<16;At++)j(R[At+1]);for(var en=0;en<=11;en++)j(F[en]);j(17);for(var It=0;It<16;It++)j(L[It+1]);for(var ht=0;ht<=161;ht++)j(U[ht])}(),Y(65498),Y(12),j(3),j(1),j(0),j(2),j(17),j(3),j(17),j(0),j(63),j(0);var H=0,J=0,oe=0;y=0,g=7,this.encode.displayName="_encode_";for(var ce,ge,ee,fe,Se,me,Le,we,te,He=M.data,Ze=M.width,Ge=M.height,Be=4*Ze,Je=0;Je<Ge;){for(ce=0;ce<Be;){for(Se=Be*Je+ce,Le=-1,we=0,te=0;te<64;te++)me=Se+(we=te>>3)*Be+(Le=4*(7&te)),Je+we>=Ge&&(me-=Be*(Je+1+we-Ge)),ce+Le>=Be&&(me-=ce+Le-Be+4),ge=He[me++],ee=He[me++],fe=He[me++],v[te]=(A[ge]+A[ee+256|0]+A[fe+512|0]>>16)-128,x[te]=(A[ge+768|0]+A[ee+1024|0]+A[fe+1280|0]>>16)-128,b[te]=(A[ge+1280|0]+A[ee+1536|0]+A[fe+1792|0]>>16)-128;H=ae(v,c,H,e,r),J=ae(x,u,J,n,i),oe=ae(b,u,oe,n,i),ce+=32}Je+=8}if(g>=0){var We=[];We[1]=g+1,We[0]=(1<<g+1)-1,K(We)}return Y(65497),new Uint8Array(m)},t=t||50,function(){for(var M=String.fromCharCode,V=0;V<256;V++)S[V]=M(V)}(),e=q(I,T),n=q(R,F),r=q(O,$),i=q(L,U),function(){for(var M=1,V=2,H=1;H<=15;H++){for(var J=M;J<V;J++)h[32767+J]=H,d[32767+J]=[],d[32767+J][1]=H,d[32767+J][0]=J;for(var oe=-(V-1);oe<=-M;oe++)h[32767+oe]=H,d[32767+oe]=[],d[32767+oe][1]=H,d[32767+oe][0]=V-1+oe;M<<=1,V<<=1}}(),function(){for(var M=0;M<256;M++)A[M]=19595*M,A[M+256|0]=38470*M,A[M+512|0]=7471*M+32768,A[M+768|0]=-11059*M,A[M+1024|0]=-21709*M,A[M+1280|0]=32768*M+8421375,A[M+1536|0]=-27439*M,A[M+1792|0]=-5329*M}(),le(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function al(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function uB(t){function e(T){if(!T)throw Error("assert :P")}function n(T,O,$){for(var R=0;4>R;R++)if(T[O+R]!=$.charCodeAt(R))return!0;return!1}function r(T,O,$,R,F){for(var L=0;L<F;L++)T[O+L]=$[R+L]}function i(T,O,$,R){for(var F=0;F<R;F++)T[O+F]=$}function s(T){return new Int32Array(T)}function o(T,O){for(var $=[],R=0;R<T;R++)$.push(new O);return $}function a(T,O){var $=[];return function R(F,L,U){for(var q=U[L],K=0;K<q&&(F.push(U.length>L+1?[]:new O),!(U.length<L+1));K++)R(F[K],L+1,U)}($,0,T),$}var l=function(){var T=this;function O(w,C){for(var P=1<<C-1>>>0;w&P;)P>>>=1;return P?(w&P-1)+P:w}function $(w,C,P,D,z){e(!(D%P));do w[C+(D-=P)]=z;while(0<D)}function R(w,C,P,D,z){if(e(2328>=z),512>=z)var W=s(512);else if((W=s(z))==null)return 0;return function(G,X,Q,ne,pe,Ie){var re,ve,Ce=X,Pe=1<<Q,Ae=s(16),Re=s(16);for(e(pe!=0),e(ne!=null),e(G!=null),e(0<Q),ve=0;ve<pe;++ve){if(15<ne[ve])return 0;++Ae[ne[ve]]}if(Ae[0]==pe)return 0;for(Re[1]=0,re=1;15>re;++re){if(Ae[re]>1<<re)return 0;Re[re+1]=Re[re]+Ae[re]}for(ve=0;ve<pe;++ve)re=ne[ve],0<ne[ve]&&(Ie[Re[re]++]=ve);if(Re[15]==1)return(ne=new F).g=0,ne.value=Ie[0],$(G,Ce,1,Pe,ne),Pe;var De,Ue=-1,Me=Pe-1,bt=0,rt=1,Ht=1,ft=1<<Q;for(ve=0,re=1,pe=2;re<=Q;++re,pe<<=1){if(rt+=Ht<<=1,0>(Ht-=Ae[re]))return 0;for(;0<Ae[re];--Ae[re])(ne=new F).g=re,ne.value=Ie[ve++],$(G,Ce+bt,pe,ft,ne),bt=O(bt,re)}for(re=Q+1,pe=2;15>=re;++re,pe<<=1){if(rt+=Ht<<=1,0>(Ht-=Ae[re]))return 0;for(;0<Ae[re];--Ae[re]){if(ne=new F,(bt&Me)!=Ue){for(Ce+=ft,De=1<<(Ue=re)-Q;15>Ue&&!(0>=(De-=Ae[Ue]));)++Ue,De<<=1;Pe+=ft=1<<(De=Ue-Q),G[X+(Ue=bt&Me)].g=De+Q,G[X+Ue].value=Ce-X-Ue}ne.g=re-Q,ne.value=Ie[ve++],$(G,Ce+(bt>>Q),pe,ft,ne),bt=O(bt,re)}}return rt!=2*Re[15]-1?0:Pe}(w,C,P,D,z,W)}function F(){this.value=this.g=0}function L(){this.value=this.g=0}function U(){this.G=o(5,F),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Xh,L)}function q(w,C,P,D){e(w!=null),e(C!=null),e(2147483648>D),w.Ca=254,w.I=0,w.b=-8,w.Ka=0,w.oa=C,w.pa=P,w.Jd=C,w.Yc=P+D,w.Zc=4<=D?P+D-4+1:P,ge(w)}function K(w,C){for(var P=0;0<C--;)P|=fe(w,128)<<C;return P}function j(w,C){var P=K(w,C);return ee(w)?-P:P}function Y(w,C,P,D){var z,W=0;for(e(w!=null),e(C!=null),e(4294967288>D),w.Sb=D,w.Ra=0,w.u=0,w.h=0,4<D&&(D=4),z=0;z<D;++z)W+=C[P+z]<<8*z;w.Ra=W,w.bb=D,w.oa=C,w.pa=P}function ae(w){for(;8<=w.u&&w.bb<w.Sb;)w.Ra>>>=8,w.Ra+=w.oa[w.pa+w.bb]<<Zu-8>>>0,++w.bb,w.u-=8;J(w)&&(w.h=1,w.u=0)}function le(w,C){if(e(0<=C),!w.h&&C<=Ao){var P=H(w)&No[C];return w.u+=C,ae(w),P}return w.h=1,w.u=0}function M(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function V(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function H(w){return w.Ra>>>(w.u&Zu-1)>>>0}function J(w){return e(w.bb<=w.Sb),w.h||w.bb==w.Sb&&w.u>Zu}function oe(w,C){w.u=C,w.h=J(w)}function ce(w){w.u>=Bc&&(e(w.u>=Bc),ae(w))}function ge(w){e(w!=null&&w.oa!=null),w.pa<w.Zc?(w.I=(w.oa[w.pa++]|w.I<<8)>>>0,w.b+=8):(e(w!=null&&w.oa!=null),w.pa<w.Yc?(w.b+=8,w.I=w.oa[w.pa++]|w.I<<8):w.Ka?w.b=0:(w.I<<=8,w.b+=8,w.Ka=1))}function ee(w){return K(w,1)}function fe(w,C){var P=w.Ca;0>w.b&&ge(w);var D=w.b,z=P*C>>>8,W=(w.I>>>D>z)+0;for(W?(P-=z,w.I-=z+1<<D>>>0):P=z+1,D=P,z=0;256<=D;)z+=8,D>>=8;return D=7^z+Ju[D],w.b-=D,w.Ca=(P<<D)-1,W}function Se(w,C,P){w[C+0]=P>>24&255,w[C+1]=P>>16&255,w[C+2]=P>>8&255,w[C+3]=255&P}function me(w,C){return w[C+0]|w[C+1]<<8}function Le(w,C){return me(w,C)|w[C+2]<<16}function we(w,C){return me(w,C)|me(w,C+2)<<16}function te(w,C){var P=1<<C;return e(w!=null),e(0<C),w.X=s(P),w.X==null?0:(w.Mb=32-C,w.Xa=C,1)}function He(w,C){e(w!=null),e(C!=null),e(w.Xa==C.Xa),r(C.X,0,w.X,0,1<<C.Xa)}function Ze(){this.X=[],this.Xa=this.Mb=0}function Ge(w,C,P,D){e(P!=null),e(D!=null);var z=P[0],W=D[0];return z==0&&(z=(w*W+C/2)/C),W==0&&(W=(C*z+w/2)/w),0>=z||0>=W?0:(P[0]=z,D[0]=W,1)}function Be(w,C){return w+(1<<C)-1>>>C}function Je(w,C){return((4278255360&w)+(4278255360&C)>>>0&4278255360)+((16711935&w)+(16711935&C)>>>0&16711935)>>>0}function We(w,C){T[C]=function(P,D,z,W,G,X,Q){var ne;for(ne=0;ne<G;++ne){var pe=T[w](X[Q+ne-1],z,W+ne);X[Q+ne]=Je(P[D+ne],pe)}}}function Ct(){this.ud=this.hd=this.jd=0}function dt(w,C){return((4278124286&(w^C))>>>1)+(w&C)>>>0}function Vt(w){return 0<=w&&256>w?w:0>w?0:255<w?255:void 0}function Nt(w,C){return Vt(w+(w-C+.5>>1))}function At(w,C,P){return Math.abs(C-P)-Math.abs(w-P)}function en(w,C,P,D,z,W,G){for(D=W[G-1],P=0;P<z;++P)W[G+P]=D=Je(w[C+P],D)}function It(w,C,P,D,z){var W;for(W=0;W<P;++W){var G=w[C+W],X=G>>8&255,Q=16711935&(Q=(Q=16711935&G)+((X<<16)+X));D[z+W]=(4278255360&G)+Q>>>0}}function ht(w,C){C.jd=255&w,C.hd=w>>8&255,C.ud=w>>16&255}function _t(w,C,P,D,z,W){var G;for(G=0;G<D;++G){var X=C[P+G],Q=X>>>8,ne=X,pe=255&(pe=(pe=X>>>16)+((w.jd<<24>>24)*(Q<<24>>24)>>>5));ne=255&(ne=(ne+=(w.hd<<24>>24)*(Q<<24>>24)>>>5)+((w.ud<<24>>24)*(pe<<24>>24)>>>5)),z[W+G]=(4278255360&X)+(pe<<16)+ne}}function vt(w,C,P,D,z){T[C]=function(W,G,X,Q,ne,pe,Ie,re,ve){for(Q=Ie;Q<re;++Q)for(Ie=0;Ie<ve;++Ie)ne[pe++]=z(X[D(W[G++])])},T[w]=function(W,G,X,Q,ne,pe,Ie){var re=8>>W.b,ve=W.Ea,Ce=W.K[0],Pe=W.w;if(8>re)for(W=(1<<W.b)-1,Pe=(1<<re)-1;G<X;++G){var Ae,Re=0;for(Ae=0;Ae<ve;++Ae)Ae&W||(Re=D(Q[ne++])),pe[Ie++]=z(Ce[Re&Pe]),Re>>=re}else T["VP8LMapColor"+P](Q,ne,Ce,Pe,pe,Ie,G,X,ve)}}function Pn(w,C,P,D,z){for(P=C+P;C<P;){var W=w[C++];D[z++]=W>>16&255,D[z++]=W>>8&255,D[z++]=255&W}}function nn(w,C,P,D,z){for(P=C+P;C<P;){var W=w[C++];D[z++]=W>>16&255,D[z++]=W>>8&255,D[z++]=255&W,D[z++]=W>>24&255}}function mt(w,C,P,D,z){for(P=C+P;C<P;){var W=(G=w[C++])>>16&240|G>>12&15,G=240&G|G>>28&15;D[z++]=W,D[z++]=G}}function Mt(w,C,P,D,z){for(P=C+P;C<P;){var W=(G=w[C++])>>16&248|G>>13&7,G=G>>5&224|G>>3&31;D[z++]=W,D[z++]=G}}function Dn(w,C,P,D,z){for(P=C+P;C<P;){var W=w[C++];D[z++]=255&W,D[z++]=W>>8&255,D[z++]=W>>16&255}}function Et(w,C,P,D,z,W){if(W==0)for(P=C+P;C<P;)Se(D,((W=w[C++])[0]>>24|W[1]>>8&65280|W[2]<<8&16711680|W[3]<<24)>>>0),z+=32;else r(D,z,w,C,P)}function rn(w,C){T[C][0]=T[w+"0"],T[C][1]=T[w+"1"],T[C][2]=T[w+"2"],T[C][3]=T[w+"3"],T[C][4]=T[w+"4"],T[C][5]=T[w+"5"],T[C][6]=T[w+"6"],T[C][7]=T[w+"7"],T[C][8]=T[w+"8"],T[C][9]=T[w+"9"],T[C][10]=T[w+"10"],T[C][11]=T[w+"11"],T[C][12]=T[w+"12"],T[C][13]=T[w+"13"],T[C][14]=T[w+"0"],T[C][15]=T[w+"0"]}function Wt(w){return w==pA||w==mA||w==Db||w==gA}function Br(){this.eb=[],this.size=this.A=this.fb=0}function pi(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Ln(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Br,this.f.kb=new pi,this.sd=null}function Ft(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function kn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Eh(w){return alert("todo:WebPSamplerProcessPlane"),w.T}function hs(w,C){var P=w.T,D=C.ba.f.RGBA,z=D.eb,W=D.fb+w.ka*D.A,G=fa[C.ba.S],X=w.y,Q=w.O,ne=w.f,pe=w.N,Ie=w.ea,re=w.W,ve=C.cc,Ce=C.dc,Pe=C.Mc,Ae=C.Nc,Re=w.ka,De=w.ka+w.T,Ue=w.U,Me=Ue+1>>1;for(Re==0?G(X,Q,null,null,ne,pe,Ie,re,ne,pe,Ie,re,z,W,null,null,Ue):(G(C.ec,C.fc,X,Q,ve,Ce,Pe,Ae,ne,pe,Ie,re,z,W-D.A,z,W,Ue),++P);Re+2<De;Re+=2)ve=ne,Ce=pe,Pe=Ie,Ae=re,pe+=w.Rc,re+=w.Rc,W+=2*D.A,G(X,(Q+=2*w.fa)-w.fa,X,Q,ve,Ce,Pe,Ae,ne,pe,Ie,re,z,W-D.A,z,W,Ue);return Q+=w.fa,w.j+De<w.o?(r(C.ec,C.fc,X,Q,Ue),r(C.cc,C.dc,ne,pe,Me),r(C.Mc,C.Nc,Ie,re,Me),P--):1&De||G(X,Q,null,null,ne,pe,Ie,re,ne,pe,Ie,re,z,W+D.A,null,null,Ue),P}function $c(w,C,P){var D=w.F,z=[w.J];if(D!=null){var W=w.U,G=C.ba.S,X=G==Ob||G==Db;C=C.ba.f.RGBA;var Q=[0],ne=w.ka;Q[0]=w.T,w.Kb&&(ne==0?--Q[0]:(--ne,z[0]-=w.width),w.j+w.ka+w.T==w.o&&(Q[0]=w.o-w.j-ne));var pe=C.eb;ne=C.fb+ne*C.A,w=gM(D,z[0],w.width,W,Q,pe,ne+(X?0:3),C.A),e(P==Q),w&&Wt(G)&&W0(pe,ne,X,W,Q,C.A)}return 0}function jl(w){var C=w.ma,P=C.ba.S,D=11>P,z=P==Pb||P==Rb||P==Ob||P==fA||P==12||Wt(P);if(C.memory=null,C.Ib=null,C.Jb=null,C.Nd=null,!L0(C.Oa,w,z?11:12))return 0;if(z&&Wt(P)&&Ab(),w.da)alert("todo:use_scaling");else{if(D){if(C.Ib=Eh,w.Kb){if(P=w.U+1>>1,C.memory=s(w.U+2*P),C.memory==null)return 0;C.ec=C.memory,C.fc=0,C.cc=C.ec,C.dc=C.fc+w.U,C.Mc=C.cc,C.Nc=C.dc+P,C.Ib=hs,Ab()}}else alert("todo:EmitYUV");z&&(C.Jb=$c,D&&ca())}if(D&&!RM){for(w=0;256>w;++w)pae[w]=89858*(w-128)+Mb>>Lb,yae[w]=-22014*(w-128)+Mb,gae[w]=-45773*(w-128),mae[w]=113618*(w-128)+Mb>>Lb;for(w=q0;w<xA;++w)C=76283*(w-16)+Mb>>Lb,vae[w-q0]=Nr(C,255),xae[w-q0]=Nr(C+8>>4,15);RM=1}return 1}function Tt(w){var C=w.ma,P=w.U,D=w.T;return e(!(1&w.ka)),0>=P||0>=D?0:(P=C.Ib(w,C),C.Jb!=null&&C.Jb(w,C,P),C.Dc+=P,1)}function Pc(w){w.ma.memory=null}function Rc(w,C,P,D){return le(w,8)!=47?0:(C[0]=le(w,14)+1,P[0]=le(w,14)+1,D[0]=le(w,1),le(w,3)!=0?0:!w.h)}function sa(w,C){if(4>w)return w+1;var P=w-2>>1;return(2+(1&w)<<P)+le(C,P)+1}function oa(w,C){return 120<C?C-120:1<=(P=((P=eae[C-1])>>4)*w+(8-(15&P)))?P:1;var P}function Cr(w,C,P){var D=H(P),z=w[C+=255&D].g-8;return 0<z&&(oe(P,P.u+8),D=H(P),C+=w[C].value,C+=D&(1<<z)-1),oe(P,P.u+w[C].g),w[C].value}function Ri(w,C,P){return P.g+=w.g,P.value+=w.value<<C>>>0,e(8>=P.g),w.g}function qi(w,C,P){var D=w.xc;return e((C=D==0?0:w.vc[w.md*(P>>D)+(C>>D)])<w.Wb),w.Ya[C]}function Th(w,C,P,D){var z=w.ab,W=w.c*C,G=w.C;C=G+C;var X=P,Q=D;for(D=w.Ta,P=w.Ua;0<z--;){var ne=w.gc[z],pe=G,Ie=C,re=X,ve=Q,Ce=(Q=D,X=P,ne.Ea);switch(e(pe<Ie),e(Ie<=ne.nc),ne.hc){case 2:Ur(re,ve,(Ie-pe)*Ce,Q,X);break;case 0:var Pe=pe,Ae=Ie,Re=Q,De=X,Ue=(ft=ne).Ea;Pe==0&&(F0(re,ve,null,null,1,Re,De),en(re,ve+1,0,0,Ue-1,Re,De+1),ve+=Ue,De+=Ue,++Pe);for(var Me=1<<ft.b,bt=Me-1,rt=Be(Ue,ft.b),Ht=ft.K,ft=ft.w+(Pe>>ft.b)*rt;Pe<Ae;){var sn=Ht,yi=ft,Kt=1;for(Xp(re,ve,Re,De-Ue,1,Re,De);Kt<Ue;){var pt=(Kt&~bt)+Me;pt>Ue&&(pt=Ue),(0,B0[sn[yi++]>>8&15])(re,ve+ +Kt,Re,De+Kt-Ue,pt-Kt,Re,De+Kt),Kt=pt}ve+=Ue,De+=Ue,++Pe&bt||(ft+=rt)}Ie!=ne.nc&&r(Q,X-Ce,Q,X+(Ie-pe-1)*Ce,Ce);break;case 1:for(Ce=re,Ae=ve,Ue=(re=ne.Ea)-(De=re&~(Re=(ve=1<<ne.b)-1)),Pe=Be(re,ne.b),Me=ne.K,ne=ne.w+(pe>>ne.b)*Pe;pe<Ie;){for(bt=Me,rt=ne,Ht=new Ct,ft=Ae+De,sn=Ae+re;Ae<ft;)ht(bt[rt++],Ht),z0(Ht,Ce,Ae,ve,Q,X),Ae+=ve,X+=ve;Ae<sn&&(ht(bt[rt++],Ht),z0(Ht,Ce,Ae,Ue,Q,X),Ae+=Ue,X+=Ue),++pe&Re||(ne+=Pe)}break;case 3:if(re==Q&&ve==X&&0<ne.b){for(Ae=Q,re=Ce=X+(Ie-pe)*Ce-(De=(Ie-pe)*Be(ne.Ea,ne.b)),ve=Q,Re=X,Pe=[],De=(Ue=De)-1;0<=De;--De)Pe[De]=ve[Re+De];for(De=Ue-1;0<=De;--De)Ae[re+De]=Pe[De];_b(ne,pe,Ie,Q,Ce,Q,X)}else _b(ne,pe,Ie,re,ve,Q,X)}X=D,Q=P}Q!=P&&r(D,P,X,Q,W)}function qu(w,C){var P=w.V,D=w.Ba+w.c*w.C,z=C-w.C;if(e(C<=w.l.o),e(16>=z),0<z){var W=w.l,G=w.Ta,X=w.Ua,Q=W.width;if(Th(w,z,P,D),z=X=[X],e((P=w.C)<(D=C)),e(W.v<W.va),D>W.o&&(D=W.o),P<W.j){var ne=W.j-P;P=W.j,z[0]+=ne*Q}if(P>=D?P=0:(z[0]+=4*W.v,W.ka=P-W.j,W.U=W.va-W.v,W.T=D-P,P=1),P){if(X=X[0],11>(P=w.ca).S){var pe=P.f.RGBA,Ie=(D=P.S,z=W.U,W=W.T,ne=pe.eb,pe.A),re=W;for(pe=pe.fb+w.Ma*pe.A;0<re--;){var ve=G,Ce=X,Pe=z,Ae=ne,Re=pe;switch(D){case $b:U0(ve,Ce,Pe,Ae,Re);break;case Pb:Qu(ve,Ce,Pe,Ae,Re);break;case pA:Qu(ve,Ce,Pe,Ae,Re),W0(Ae,Re,0,Pe,1,0);break;case SM:Yh(ve,Ce,Pe,Ae,Re);break;case Rb:Et(ve,Ce,Pe,Ae,Re,1);break;case mA:Et(ve,Ce,Pe,Ae,Re,1),W0(Ae,Re,0,Pe,1,0);break;case Ob:Et(ve,Ce,Pe,Ae,Re,0);break;case Db:Et(ve,Ce,Pe,Ae,Re,0),W0(Ae,Re,1,Pe,1,0);break;case fA:ed(ve,Ce,Pe,Ae,Re);break;case gA:ed(ve,Ce,Pe,Ae,Re),mM(Ae,Re,Pe,1,0);break;case CM:td(ve,Ce,Pe,Ae,Re);break;default:e(0)}X+=Q,pe+=Ie}w.Ma+=W}else alert("todo:EmitRescaledRowsYUVA");e(w.Ma<=P.height)}}w.C=C,e(w.C<=w.i)}function Qa(w){var C;if(0<w.ua)return 0;for(C=0;C<w.Wb;++C){var P=w.Ya[C].G,D=w.Ya[C].H;if(0<P[1][D[1]+0].g||0<P[2][D[2]+0].g||0<P[3][D[3]+0].g)return 0}return 1}function Bl(w,C,P,D,z,W){if(w.Z!=0){var G=w.qd,X=w.rd;for(e(id[w.Z]!=null);C<P;++C)id[w.Z](G,X,D,z,D,z,W),G=D,X=z,z+=W;w.qd=G,w.rd=X}}function el(w,C){var P=w.l.ma,D=P.Z==0||P.Z==1?w.l.j:w.C;if(D=w.C<D?D:w.C,e(C<=w.l.o),C>D){var z=w.l.width,W=P.ca,G=P.tb+z*D,X=w.V,Q=w.Ba+w.c*D,ne=w.gc;e(w.ab==1),e(ne[0].hc==3),Wl(ne[0],D,C,X,Q,W,G),Bl(P,D,C,W,G,z)}w.C=w.Ma=C}function tl(w,C,P,D,z,W,G){var X=w.$/D,Q=w.$%D,ne=w.m,pe=w.s,Ie=P+w.$,re=Ie;z=P+D*z;var ve=P+D*W,Ce=280+pe.ua,Pe=w.Pb?X:16777216,Ae=0<pe.ua?pe.Wa:null,Re=pe.wc,De=Ie<ve?qi(pe,Q,X):null;e(w.C<W),e(ve<=z);var Ue=!1;e:for(;;){for(;Ue||Ie<ve;){var Me=0;if(X>=Pe){var bt=Ie-P;e((Pe=w).Pb),Pe.wd=Pe.m,Pe.xd=bt,0<Pe.s.ua&&He(Pe.s.Wa,Pe.s.vb),Pe=X+nae}if(Q&Re||(De=qi(pe,Q,X)),e(De!=null),De.Qb&&(C[Ie]=De.qb,Ue=!0),!Ue)if(ce(ne),De.jc){Me=ne,bt=C;var rt=Ie,Ht=De.pd[H(Me)&Xh-1];e(De.jc),256>Ht.g?(oe(Me,Me.u+Ht.g),bt[rt]=Ht.value,Me=0):(oe(Me,Me.u+Ht.g-256),e(256<=Ht.value),Me=Ht.value),Me==0&&(Ue=!0)}else Me=Cr(De.G[0],De.H[0],ne);if(ne.h)break;if(Ue||256>Me){if(!Ue)if(De.nd)C[Ie]=(De.qb|Me<<8)>>>0;else{if(ce(ne),Ue=Cr(De.G[1],De.H[1],ne),ce(ne),bt=Cr(De.G[2],De.H[2],ne),rt=Cr(De.G[3],De.H[3],ne),ne.h)break;C[Ie]=(rt<<24|Ue<<16|Me<<8|bt)>>>0}if(Ue=!1,++Ie,++Q>=D&&(Q=0,++X,G!=null&&X<=W&&!(X%16)&&G(w,X),Ae!=null))for(;re<Ie;)Me=C[re++],Ae.X[(506832829*Me&4294967295)>>>Ae.Mb]=Me}else if(280>Me){if(Me=sa(Me-256,ne),bt=Cr(De.G[4],De.H[4],ne),ce(ne),bt=oa(D,bt=sa(bt,ne)),ne.h)break;if(Ie-P<bt||z-Ie<Me)break e;for(rt=0;rt<Me;++rt)C[Ie+rt]=C[Ie+rt-bt];for(Ie+=Me,Q+=Me;Q>=D;)Q-=D,++X,G!=null&&X<=W&&!(X%16)&&G(w,X);if(e(Ie<=z),Q&Re&&(De=qi(pe,Q,X)),Ae!=null)for(;re<Ie;)Me=C[re++],Ae.X[(506832829*Me&4294967295)>>>Ae.Mb]=Me}else{if(!(Me<Ce))break e;for(Ue=Me-280,e(Ae!=null);re<Ie;)Me=C[re++],Ae.X[(506832829*Me&4294967295)>>>Ae.Mb]=Me;Me=Ie,e(!(Ue>>>(bt=Ae).Xa)),C[Me]=bt.X[Ue],Ue=!0}Ue||e(ne.h==J(ne))}if(w.Pb&&ne.h&&Ie<z)e(w.m.h),w.a=5,w.m=w.wd,w.$=w.xd,0<w.s.ua&&He(w.s.vb,w.s.Wa);else{if(ne.h)break e;G!=null&&G(w,X>W?W:X),w.a=0,w.$=Ie-P}return 1}return w.a=3,0}function aa(w){e(w!=null),w.vc=null,w.yc=null,w.Ya=null;var C=w.Wa;C!=null&&(C.X=null),w.vb=null,e(w!=null)}function $h(){var w=new xt;return w==null?null:(w.a=0,w.xb=IM,rn("Predictor","VP8LPredictors"),rn("Predictor","VP8LPredictors_C"),rn("PredictorAdd","VP8LPredictorsAdd"),rn("PredictorAdd","VP8LPredictorsAdd_C"),Ur=It,z0=_t,U0=Pn,Qu=nn,ed=mt,td=Mt,Yh=Dn,T.VP8LMapColor32b=Vl,T.VP8LMapColor8b=j0,w)}function zl(w,C,P,D,z){var W=1,G=[w],X=[C],Q=D.m,ne=D.s,pe=null,Ie=0;e:for(;;){if(P)for(;W&&le(Q,1);){var re=G,ve=X,Ce=D,Pe=1,Ae=Ce.m,Re=Ce.gc[Ce.ab],De=le(Ae,2);if(Ce.Oc&1<<De)W=0;else{switch(Ce.Oc|=1<<De,Re.hc=De,Re.Ea=re[0],Re.nc=ve[0],Re.K=[null],++Ce.ab,e(4>=Ce.ab),De){case 0:case 1:Re.b=le(Ae,3)+2,Pe=zl(Be(Re.Ea,Re.b),Be(Re.nc,Re.b),0,Ce,Re.K),Re.K=Re.K[0];break;case 3:var Ue,Me=le(Ae,8)+1,bt=16<Me?0:4<Me?1:2<Me?2:3;if(re[0]=Be(Re.Ea,bt),Re.b=bt,Ue=Pe=zl(Me,1,0,Ce,Re.K)){var rt,Ht=Me,ft=Re,sn=1<<(8>>ft.b),yi=s(sn);if(yi==null)Ue=0;else{var Kt=ft.K[0],pt=ft.w;for(yi[0]=ft.K[0][0],rt=1;rt<1*Ht;++rt)yi[rt]=Je(Kt[pt+rt],yi[rt-1]);for(;rt<4*sn;++rt)yi[rt]=0;ft.K[0]=null,ft.K[0]=yi,Ue=1}}Pe=Ue;break;case 2:break;default:e(0)}W=Pe}}if(G=G[0],X=X[0],W&&le(Q,1)&&!(W=1<=(Ie=le(Q,4))&&11>=Ie)){D.a=3;break e}var Xe;if(Xe=W)t:{var Wr,Gt,dn,er=D,Ki=G,Ds=X,Ar=Ie,ps=P,Ls=er.m,vi=er.s,pn=[null],An=1,Ir=0,In=tae[Ar];n:for(;;){if(ps&&le(Ls,1)){var Xi=le(Ls,3)+2,il=Be(Ki,Xi),Gr=Be(Ds,Xi),so=il*Gr;if(!zl(il,Gr,0,er,pn))break n;for(pn=pn[0],vi.xc=Xi,Wr=0;Wr<so;++Wr){var Fn=pn[Wr]>>8&65535;pn[Wr]=Fn,Fn>=An&&(An=Fn+1)}}if(Ls.h)break n;for(Gt=0;5>Gt;++Gt){var xi=NM[Gt];!Gt&&0<Ar&&(xi+=1<<Ar),Ir<xi&&(Ir=xi)}var _o=o(An*In,F),Ms=An,Eo=o(Ms,U);if(Eo==null)var To=null;else e(65536>=Ms),To=Eo;var oo=s(Ir);if(To==null||oo==null||_o==null){er.a=1;break n}var $o=_o;for(Wr=dn=0;Wr<An;++Wr){var Hn=To[Wr],Po=Hn.G,sl=Hn.H,Jh=0,Vc=1,Yi=0;for(Gt=0;5>Gt;++Gt){xi=NM[Gt],Po[Gt]=$o,sl[Gt]=dn,!Gt&&0<Ar&&(xi+=1<<Ar);i:{var jb,bA=xi,Bb=er,H0=oo,kae=$o,Sae=dn,wA=0,sd=Bb.m,Cae=le(sd,1);if(i(H0,0,0,bA),Cae){var Nae=le(sd,1)+1,Aae=le(sd,1),LM=le(sd,Aae==0?1:8);H0[LM]=1,Nae==2&&(H0[LM=le(sd,8)]=1);var zb=1}else{var MM=s(19),FM=le(sd,4)+4;if(19<FM){Bb.a=3;var Ub=0;break i}for(jb=0;jb<FM;++jb)MM[Qoe[jb]]=le(sd,3);var kA=void 0,K0=void 0,jM=Bb,Iae=MM,Vb=bA,BM=H0,SA=0,od=jM.m,zM=8,UM=o(128,F);r:for(;R(UM,0,7,Iae,19);){if(le(od,1)){var _ae=2+2*le(od,3);if((kA=2+le(od,_ae))>Vb)break r}else kA=Vb;for(K0=0;K0<Vb&&kA--;){ce(od);var VM=UM[0+(127&H(od))];oe(od,od.u+VM.g);var Zp=VM.value;if(16>Zp)BM[K0++]=Zp,Zp!=0&&(zM=Zp);else{var Eae=Zp==16,WM=Zp-16,Tae=Zoe[WM],GM=le(od,Yoe[WM])+Tae;if(K0+GM>Vb)break r;for(var $ae=Eae?zM:0;0<GM--;)BM[K0++]=$ae}}SA=1;break r}SA||(jM.a=3),zb=SA}(zb=zb&&!sd.h)&&(wA=R(kae,Sae,8,H0,bA)),zb&&wA!=0?Ub=wA:(Bb.a=3,Ub=0)}if(Ub==0)break n;if(Vc&&Joe[Gt]==1&&(Vc=$o[dn].g==0),Jh+=$o[dn].g,dn+=Ub,3>=Gt){var X0,CA=oo[0];for(X0=1;X0<xi;++X0)oo[X0]>CA&&(CA=oo[X0]);Yi+=CA}}if(Hn.nd=Vc,Hn.Qb=0,Vc&&(Hn.qb=(Po[3][sl[3]+0].value<<24|Po[1][sl[1]+0].value<<16|Po[2][sl[2]+0].value)>>>0,Jh==0&&256>Po[0][sl[0]+0].value&&(Hn.Qb=1,Hn.qb+=Po[0][sl[0]+0].value<<8)),Hn.jc=!Hn.Qb&&6>Yi,Hn.jc){var Wb,Wc=Hn;for(Wb=0;Wb<Xh;++Wb){var ad=Wb,ld=Wc.pd[ad],Gb=Wc.G[0][Wc.H[0]+ad];256<=Gb.value?(ld.g=Gb.g+256,ld.value=Gb.value):(ld.g=0,ld.value=0,ad>>=Ri(Gb,8,ld),ad>>=Ri(Wc.G[1][Wc.H[1]+ad],16,ld),ad>>=Ri(Wc.G[2][Wc.H[2]+ad],0,ld),Ri(Wc.G[3][Wc.H[3]+ad],24,ld))}}}vi.vc=pn,vi.Wb=An,vi.Ya=To,vi.yc=_o,Xe=1;break t}Xe=0}if(!(W=Xe)){D.a=3;break e}if(0<Ie){if(ne.ua=1<<Ie,!te(ne.Wa,Ie)){D.a=1,W=0;break e}}else ne.ua=0;var NA=D,qM=G,Pae=X,AA=NA.s,IA=AA.xc;if(NA.c=qM,NA.i=Pae,AA.md=Be(qM,IA),AA.wc=IA==0?-1:(1<<IA)-1,P){D.xb=cae;break e}if((pe=s(G*X))==null){D.a=1,W=0;break e}W=(W=tl(D,pe,0,G,X,X,null))&&!Q.h;break e}return W?(z!=null?z[0]=pe:(e(pe==null),e(P)),D.$=0,P||aa(ne)):aa(ne),W}function Ph(w,C){var P=w.c*w.i,D=P+C+16*C;return e(w.c<=C),w.V=s(D),w.V==null?(w.Ta=null,w.Ua=0,w.a=1,0):(w.Ta=w.V,w.Ua=w.Ba+P+C,1)}function jp(w,C){var P=w.C,D=C-P,z=w.V,W=w.Ba+w.c*P;for(e(C<=w.l.o);0<D;){var G=16<D?16:D,X=w.l.ma,Q=w.l.width,ne=Q*G,pe=X.ca,Ie=X.tb+Q*P,re=w.Ta,ve=w.Ua;Th(w,G,z,W),yM(re,ve,pe,Ie,ne),Bl(X,P,P+G,pe,Ie,Q),D-=G,z+=G*w.c,P+=G}e(P==C),w.C=w.Ma=C}function Bp(){this.ub=this.yd=this.td=this.Rb=0}function zp(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Y5(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function k0(){this.Yb=function(){var w=[];return function C(P,D,z){for(var W=z[D],G=0;G<W&&(P.push(z.length>D+1?[]:0),!(z.length<D+1));G++)C(P[G],D+1,z)}(w,0,[3,11]),w}()}function db(){this.jb=s(3),this.Wc=a([4,8],k0),this.Xc=a([4,17],k0)}function hb(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function la(){this.ld=this.La=this.dd=this.tc=0}function S0(){this.Na=this.la=0}function fb(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function C0(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function pb(){this.uc=this.M=this.Nb=0,this.wa=Array(new la),this.Y=0,this.ya=Array(new C0),this.aa=0,this.l=new Up}function mb(){this.y=s(16),this.f=s(8),this.ea=s(8)}function gb(){this.cb=this.a=0,this.sc="",this.m=new M,this.Od=new Bp,this.Kc=new zp,this.ed=new hb,this.Qa=new Y5,this.Ic=this.$c=this.Aa=0,this.D=new pb,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,M),this.ia=0,this.pb=o(4,fb),this.Pa=new db,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new mb),this.Hd=0,this.rb=Array(new S0),this.sb=0,this.wa=Array(new la),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new C0),this.L=this.aa=0,this.gd=a([4,2],la),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Up(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Z5(){var w=new gb;return w!=null&&(w.a=0,w.sc="OK",w.cb=0,w.Xb=0,G0||(G0=Oc)),w}function Qr(w,C,P){return w.a==0&&(w.a=C,w.sc=P,w.cb=0),0}function yb(w,C,P){return 3<=P&&w[C+0]==157&&w[C+1]==1&&w[C+2]==42}function vb(w,C){if(w==null)return 0;if(w.a=0,w.sc="OK",C==null)return Qr(w,2,"null VP8Io passed to VP8GetHeaders()");var P=C.data,D=C.w,z=C.ha;if(4>z)return Qr(w,7,"Truncated header.");var W=P[D+0]|P[D+1]<<8|P[D+2]<<16,G=w.Od;if(G.Rb=!(1&W),G.td=W>>1&7,G.yd=W>>4&1,G.ub=W>>5,3<G.td)return Qr(w,3,"Incorrect keyframe parameters.");if(!G.yd)return Qr(w,4,"Frame not displayable.");D+=3,z-=3;var X=w.Kc;if(G.Rb){if(7>z)return Qr(w,7,"cannot parse picture header");if(!yb(P,D,z))return Qr(w,3,"Bad code word");X.c=16383&(P[D+4]<<8|P[D+3]),X.Td=P[D+4]>>6,X.i=16383&(P[D+6]<<8|P[D+5]),X.Ud=P[D+6]>>6,D+=7,z-=7,w.za=X.c+15>>4,w.Ub=X.i+15>>4,C.width=X.c,C.height=X.i,C.Da=0,C.j=0,C.v=0,C.va=C.width,C.o=C.height,C.da=0,C.ib=C.width,C.hb=C.height,C.U=C.width,C.T=C.height,i((W=w.Pa).jb,0,255,W.jb.length),e((W=w.Qa)!=null),W.Cb=0,W.Bb=0,W.Fb=1,i(W.Zb,0,0,W.Zb.length),i(W.Lb,0,0,W.Lb)}if(G.ub>z)return Qr(w,7,"bad partition length");q(W=w.m,P,D,G.ub),D+=G.ub,z-=G.ub,G.Rb&&(X.Ld=ee(W),X.Kd=ee(W)),X=w.Qa;var Q,ne=w.Pa;if(e(W!=null),e(X!=null),X.Cb=ee(W),X.Cb){if(X.Bb=ee(W),ee(W)){for(X.Fb=ee(W),Q=0;4>Q;++Q)X.Zb[Q]=ee(W)?j(W,7):0;for(Q=0;4>Q;++Q)X.Lb[Q]=ee(W)?j(W,6):0}if(X.Bb)for(Q=0;3>Q;++Q)ne.jb[Q]=ee(W)?K(W,8):255}else X.Bb=0;if(W.Ka)return Qr(w,3,"cannot parse segment header");if((X=w.ed).zd=ee(W),X.Tb=K(W,6),X.wb=K(W,3),X.Pc=ee(W),X.Pc&&ee(W)){for(ne=0;4>ne;++ne)ee(W)&&(X.vd[ne]=j(W,6));for(ne=0;4>ne;++ne)ee(W)&&(X.od[ne]=j(W,6))}if(w.L=X.Tb==0?0:X.zd?1:2,W.Ka)return Qr(w,3,"cannot parse filter header");var pe=z;if(z=Q=D,D=Q+pe,X=pe,w.Xb=(1<<K(w.m,2))-1,pe<3*(ne=w.Xb))P=7;else{for(Q+=3*ne,X-=3*ne,pe=0;pe<ne;++pe){var Ie=P[z+0]|P[z+1]<<8|P[z+2]<<16;Ie>X&&(Ie=X),q(w.Jc[+pe],P,Q,Ie),Q+=Ie,X-=Ie,z+=3}q(w.Jc[+ne],P,Q,X),P=Q<D?0:5}if(P!=0)return Qr(w,P,"cannot parse partitions");for(P=K(Q=w.m,7),z=ee(Q)?j(Q,4):0,D=ee(Q)?j(Q,4):0,X=ee(Q)?j(Q,4):0,ne=ee(Q)?j(Q,4):0,Q=ee(Q)?j(Q,4):0,pe=w.Qa,Ie=0;4>Ie;++Ie){if(pe.Cb){var re=pe.Zb[Ie];pe.Fb||(re+=P)}else{if(0<Ie){w.pb[Ie]=w.pb[0];continue}re=P}var ve=w.pb[Ie];ve.Sc[0]=yA[Nr(re+z,127)],ve.Sc[1]=vA[Nr(re+0,127)],ve.Eb[0]=2*yA[Nr(re+D,127)],ve.Eb[1]=101581*vA[Nr(re+X,127)]>>16,8>ve.Eb[1]&&(ve.Eb[1]=8),ve.Qc[0]=yA[Nr(re+ne,117)],ve.Qc[1]=vA[Nr(re+Q,127)],ve.lc=re+Q}if(!G.Rb)return Qr(w,4,"Not a key frame.");for(ee(W),G=w.Pa,P=0;4>P;++P){for(z=0;8>z;++z)for(D=0;3>D;++D)for(X=0;11>X;++X)ne=fe(W,aae[P][z][D][X])?K(W,8):sae[P][z][D][X],G.Wc[P][z].Yb[D][X]=ne;for(z=0;17>z;++z)G.Xc[P][z]=G.Wc[P][lae[z]]}return w.kc=ee(W),w.kc&&(w.Bd=K(W,8)),w.cb=1}function Oc(w,C,P,D,z,W,G){var X=C[z].Yb[P];for(P=0;16>z;++z){if(!fe(w,X[P+0]))return z;for(;!fe(w,X[P+1]);)if(X=C[++z].Yb[0],P=0,z==16)return 16;var Q=C[z+1].Yb;if(fe(w,X[P+2])){var ne=w,pe=0;if(fe(ne,(re=X)[(Ie=P)+3]))if(fe(ne,re[Ie+6])){for(X=0,Ie=2*(pe=fe(ne,re[Ie+8]))+(re=fe(ne,re[Ie+9+pe])),pe=0,re=rae[Ie];re[X];++X)pe+=pe+fe(ne,re[X]);pe+=3+(8<<Ie)}else fe(ne,re[Ie+7])?(pe=7+2*fe(ne,165),pe+=fe(ne,145)):pe=5+fe(ne,159);else pe=fe(ne,re[Ie+4])?3+fe(ne,re[Ie+5]):2;X=Q[2]}else pe=1,X=Q[1];Q=G+iae[z],0>(ne=w).b&&ge(ne);var Ie,re=ne.b,ve=(Ie=ne.Ca>>1)-(ne.I>>re)>>31;--ne.b,ne.Ca+=ve,ne.Ca|=1,ne.I-=(Ie+1&ve)<<re,W[Q]=((pe^ve)-ve)*D[(0<z)+0]}return 16}function Rh(w){var C=w.rb[w.sb-1];C.la=0,C.Na=0,i(w.zc,0,0,w.zc.length),w.ja=0}function nl(w,C,P,D,z){z=w[C+P+32*D]+(z>>3),w[C+P+32*D]=-256&z?0>z?0:255:z}function Oh(w,C,P,D,z,W){nl(w,C,0,P,D+z),nl(w,C,1,P,D+W),nl(w,C,2,P,D-W),nl(w,C,3,P,D-z)}function zr(w){return(20091*w>>16)+w}function N0(w,C,P,D){var z,W=0,G=s(16);for(z=0;4>z;++z){var X=w[C+0]+w[C+8],Q=w[C+0]-w[C+8],ne=(35468*w[C+4]>>16)-zr(w[C+12]),pe=zr(w[C+4])+(35468*w[C+12]>>16);G[W+0]=X+pe,G[W+1]=Q+ne,G[W+2]=Q-ne,G[W+3]=X-pe,W+=4,C++}for(z=W=0;4>z;++z)X=(w=G[W+0]+4)+G[W+8],Q=w-G[W+8],ne=(35468*G[W+4]>>16)-zr(G[W+12]),nl(P,D,0,0,X+(pe=zr(G[W+4])+(35468*G[W+12]>>16))),nl(P,D,1,0,Q+ne),nl(P,D,2,0,Q-ne),nl(P,D,3,0,X-pe),W++,D+=32}function J5(w,C,P,D){var z=w[C+0]+4,W=35468*w[C+4]>>16,G=zr(w[C+4]),X=35468*w[C+1]>>16;Oh(P,D,0,z+G,w=zr(w[C+1]),X),Oh(P,D,1,z+W,w,X),Oh(P,D,2,z-W,w,X),Oh(P,D,3,z-G,w,X)}function Q5(w,C,P,D,z){N0(w,C,P,D),z&&N0(w,C+16,P,D+4)}function eA(w,C,P,D){Zh(w,C+0,P,D,1),Zh(w,C+32,P,D+128,1)}function Ul(w,C,P,D){var z;for(w=w[C+0]+4,z=0;4>z;++z)for(C=0;4>C;++C)nl(P,D,C,z,w)}function xb(w,C,P,D){w[C+0]&&Sn(w,C+0,P,D),w[C+16]&&Sn(w,C+16,P,D+4),w[C+32]&&Sn(w,C+32,P,D+128),w[C+48]&&Sn(w,C+48,P,D+128+4)}function bb(w,C,P,D){var z,W=s(16);for(z=0;4>z;++z){var G=w[C+0+z]+w[C+12+z],X=w[C+4+z]+w[C+8+z],Q=w[C+4+z]-w[C+8+z],ne=w[C+0+z]-w[C+12+z];W[0+z]=G+X,W[8+z]=G-X,W[4+z]=ne+Q,W[12+z]=ne-Q}for(z=0;4>z;++z)G=(w=W[0+4*z]+3)+W[3+4*z],X=W[1+4*z]+W[2+4*z],Q=W[1+4*z]-W[2+4*z],ne=w-W[3+4*z],P[D+0]=G+X>>3,P[D+16]=ne+Q>>3,P[D+32]=G-X>>3,P[D+48]=ne-Q>>3,D+=64}function Hu(w,C,P){var D,z=C-32,W=Io,G=255-w[z-1];for(D=0;D<P;++D){var X,Q=W,ne=G+w[C-1];for(X=0;X<P;++X)w[C+X]=Q[ne+w[z+X]];C+=32}}function A0(w,C){Hu(w,C,4)}function tA(w,C){Hu(w,C,8)}function nA(w,C){Hu(w,C,16)}function rA(w,C){var P;for(P=0;16>P;++P)r(w,C+32*P,w,C-32,16)}function I0(w,C){var P;for(P=16;0<P;--P)i(w,C,w[C-1],16),C+=32}function Dh(w,C,P){var D;for(D=0;16>D;++D)i(C,P+32*D,w,16)}function Ku(w,C){var P,D=16;for(P=0;16>P;++P)D+=w[C-1+32*P]+w[C+P-32];Dh(D>>5,w,C)}function iA(w,C){var P,D=8;for(P=0;16>P;++P)D+=w[C-1+32*P];Dh(D>>4,w,C)}function Lh(w,C){var P,D=8;for(P=0;16>P;++P)D+=w[C+P-32];Dh(D>>4,w,C)}function _0(w,C){Dh(128,w,C)}function jt(w,C,P){return w+2*C+P+2>>2}function sA(w,C){var P,D=C-32;for(D=new Uint8Array([jt(w[D-1],w[D+0],w[D+1]),jt(w[D+0],w[D+1],w[D+2]),jt(w[D+1],w[D+2],w[D+3]),jt(w[D+2],w[D+3],w[D+4])]),P=0;4>P;++P)r(w,C+32*P,D,0,D.length)}function oA(w,C){var P=w[C-1],D=w[C-1+32],z=w[C-1+64],W=w[C-1+96];Se(w,C+0,16843009*jt(w[C-1-32],P,D)),Se(w,C+32,16843009*jt(P,D,z)),Se(w,C+64,16843009*jt(D,z,W)),Se(w,C+96,16843009*jt(z,W,W))}function aA(w,C){var P,D=4;for(P=0;4>P;++P)D+=w[C+P-32]+w[C-1+32*P];for(D>>=3,P=0;4>P;++P)i(w,C+32*P,D,4)}function lA(w,C){var P=w[C-1+0],D=w[C-1+32],z=w[C-1+64],W=w[C-1-32],G=w[C+0-32],X=w[C+1-32],Q=w[C+2-32],ne=w[C+3-32];w[C+0+96]=jt(D,z,w[C-1+96]),w[C+1+96]=w[C+0+64]=jt(P,D,z),w[C+2+96]=w[C+1+64]=w[C+0+32]=jt(W,P,D),w[C+3+96]=w[C+2+64]=w[C+1+32]=w[C+0+0]=jt(G,W,P),w[C+3+64]=w[C+2+32]=w[C+1+0]=jt(X,G,W),w[C+3+32]=w[C+2+0]=jt(Q,X,G),w[C+3+0]=jt(ne,Q,X)}function Dc(w,C){var P=w[C+1-32],D=w[C+2-32],z=w[C+3-32],W=w[C+4-32],G=w[C+5-32],X=w[C+6-32],Q=w[C+7-32];w[C+0+0]=jt(w[C+0-32],P,D),w[C+1+0]=w[C+0+32]=jt(P,D,z),w[C+2+0]=w[C+1+32]=w[C+0+64]=jt(D,z,W),w[C+3+0]=w[C+2+32]=w[C+1+64]=w[C+0+96]=jt(z,W,G),w[C+3+32]=w[C+2+64]=w[C+1+96]=jt(W,G,X),w[C+3+64]=w[C+2+96]=jt(G,X,Q),w[C+3+96]=jt(X,Q,Q)}function Lc(w,C){var P=w[C-1+0],D=w[C-1+32],z=w[C-1+64],W=w[C-1-32],G=w[C+0-32],X=w[C+1-32],Q=w[C+2-32],ne=w[C+3-32];w[C+0+0]=w[C+1+64]=W+G+1>>1,w[C+1+0]=w[C+2+64]=G+X+1>>1,w[C+2+0]=w[C+3+64]=X+Q+1>>1,w[C+3+0]=Q+ne+1>>1,w[C+0+96]=jt(z,D,P),w[C+0+64]=jt(D,P,W),w[C+0+32]=w[C+1+96]=jt(P,W,G),w[C+1+32]=w[C+2+96]=jt(W,G,X),w[C+2+32]=w[C+3+96]=jt(G,X,Q),w[C+3+32]=jt(X,Q,ne)}function cA(w,C){var P=w[C+0-32],D=w[C+1-32],z=w[C+2-32],W=w[C+3-32],G=w[C+4-32],X=w[C+5-32],Q=w[C+6-32],ne=w[C+7-32];w[C+0+0]=P+D+1>>1,w[C+1+0]=w[C+0+64]=D+z+1>>1,w[C+2+0]=w[C+1+64]=z+W+1>>1,w[C+3+0]=w[C+2+64]=W+G+1>>1,w[C+0+32]=jt(P,D,z),w[C+1+32]=w[C+0+96]=jt(D,z,W),w[C+2+32]=w[C+1+96]=jt(z,W,G),w[C+3+32]=w[C+2+96]=jt(W,G,X),w[C+3+64]=jt(G,X,Q),w[C+3+96]=jt(X,Q,ne)}function uA(w,C){var P=w[C-1+0],D=w[C-1+32],z=w[C-1+64],W=w[C-1+96];w[C+0+0]=P+D+1>>1,w[C+2+0]=w[C+0+32]=D+z+1>>1,w[C+2+32]=w[C+0+64]=z+W+1>>1,w[C+1+0]=jt(P,D,z),w[C+3+0]=w[C+1+32]=jt(D,z,W),w[C+3+32]=w[C+1+64]=jt(z,W,W),w[C+3+64]=w[C+2+64]=w[C+0+96]=w[C+1+96]=w[C+2+96]=w[C+3+96]=W}function Vp(w,C){var P=w[C-1+0],D=w[C-1+32],z=w[C-1+64],W=w[C-1+96],G=w[C-1-32],X=w[C+0-32],Q=w[C+1-32],ne=w[C+2-32];w[C+0+0]=w[C+2+32]=P+G+1>>1,w[C+0+32]=w[C+2+64]=D+P+1>>1,w[C+0+64]=w[C+2+96]=z+D+1>>1,w[C+0+96]=W+z+1>>1,w[C+3+0]=jt(X,Q,ne),w[C+2+0]=jt(G,X,Q),w[C+1+0]=w[C+3+32]=jt(P,G,X),w[C+1+32]=w[C+3+64]=jt(D,P,G),w[C+1+64]=w[C+3+96]=jt(z,D,P),w[C+1+96]=jt(W,z,D)}function E0(w,C){var P;for(P=0;8>P;++P)r(w,C+32*P,w,C-32,8)}function Mh(w,C){var P;for(P=0;8>P;++P)i(w,C,w[C-1],8),C+=32}function Wp(w,C,P){var D;for(D=0;8>D;++D)i(C,P+32*D,w,8)}function Gp(w,C){var P,D=8;for(P=0;8>P;++P)D+=w[C+P-32]+w[C-1+32*P];Wp(D>>4,w,C)}function dA(w,C){var P,D=4;for(P=0;8>P;++P)D+=w[C+P-32];Wp(D>>3,w,C)}function T0(w,C){var P,D=4;for(P=0;8>P;++P)D+=w[C-1+32*P];Wp(D>>3,w,C)}function $0(w,C){Wp(128,w,C)}function Fh(w,C,P){var D=w[C-P],z=w[C+0],W=3*(z-D)+hA[1020+w[C-2*P]-w[C+P]],G=Tb[112+(W+4>>3)];w[C-P]=Io[255+D+Tb[112+(W+3>>3)]],w[C+0]=Io[255+z-G]}function jh(w,C,P,D){var z=w[C+0],W=w[C+P];return ha[255+w[C-2*P]-w[C-P]]>D||ha[255+W-z]>D}function P0(w,C,P,D){return 4*ha[255+w[C-P]-w[C+0]]+ha[255+w[C-2*P]-w[C+P]]<=D}function qp(w,C,P,D,z){var W=w[C-3*P],G=w[C-2*P],X=w[C-P],Q=w[C+0],ne=w[C+P],pe=w[C+2*P],Ie=w[C+3*P];return 4*ha[255+X-Q]+ha[255+G-ne]>D?0:ha[255+w[C-4*P]-W]<=z&&ha[255+W-G]<=z&&ha[255+G-X]<=z&&ha[255+Ie-pe]<=z&&ha[255+pe-ne]<=z&&ha[255+ne-Q]<=z}function R0(w,C,P,D){var z=2*D+1;for(D=0;16>D;++D)P0(w,C+D,P,z)&&Fh(w,C+D,P)}function Bh(w,C,P,D){var z=2*D+1;for(D=0;16>D;++D)P0(w,C+D*P,1,z)&&Fh(w,C+D*P,1)}function wb(w,C,P,D){var z;for(z=3;0<z;--z)R0(w,C+=4*P,P,D)}function kb(w,C,P,D){var z;for(z=3;0<z;--z)Bh(w,C+=4,P,D)}function Mc(w,C,P,D,z,W,G,X){for(W=2*W+1;0<z--;){if(qp(w,C,P,W,G))if(jh(w,C,P,X))Fh(w,C,P);else{var Q=w,ne=C,pe=P,Ie=Q[ne-2*pe],re=Q[ne-pe],ve=Q[ne+0],Ce=Q[ne+pe],Pe=Q[ne+2*pe],Ae=27*(De=hA[1020+3*(ve-re)+hA[1020+Ie-Ce]])+63>>7,Re=18*De+63>>7,De=9*De+63>>7;Q[ne-3*pe]=Io[255+Q[ne-3*pe]+De],Q[ne-2*pe]=Io[255+Ie+Re],Q[ne-pe]=Io[255+re+Ae],Q[ne+0]=Io[255+ve-Ae],Q[ne+pe]=Io[255+Ce-Re],Q[ne+2*pe]=Io[255+Pe-De]}C+=D}}function Fc(w,C,P,D,z,W,G,X){for(W=2*W+1;0<z--;){if(qp(w,C,P,W,G))if(jh(w,C,P,X))Fh(w,C,P);else{var Q=w,ne=C,pe=P,Ie=Q[ne-pe],re=Q[ne+0],ve=Q[ne+pe],Ce=Tb[112+(4+(Pe=3*(re-Ie))>>3)],Pe=Tb[112+(Pe+3>>3)],Ae=Ce+1>>1;Q[ne-2*pe]=Io[255+Q[ne-2*pe]+Ae],Q[ne-pe]=Io[255+Ie+Pe],Q[ne+0]=Io[255+re-Ce],Q[ne+pe]=Io[255+ve-Ae]}C+=D}}function Sb(w,C,P,D,z,W){Mc(w,C,P,1,16,D,z,W)}function Cb(w,C,P,D,z,W){Mc(w,C,1,P,16,D,z,W)}function zh(w,C,P,D,z,W){var G;for(G=3;0<G;--G)Fc(w,C+=4*P,P,1,16,D,z,W)}function Nb(w,C,P,D,z,W){var G;for(G=3;0<G;--G)Fc(w,C+=4,1,P,16,D,z,W)}function _(w,C,P,D,z,W,G,X){Mc(w,C,z,1,8,W,G,X),Mc(P,D,z,1,8,W,G,X)}function B(w,C,P,D,z,W,G,X){Mc(w,C,1,z,8,W,G,X),Mc(P,D,1,z,8,W,G,X)}function ie(w,C,P,D,z,W,G,X){Fc(w,C+4*z,z,1,8,W,G,X),Fc(P,D+4*z,z,1,8,W,G,X)}function ue(w,C,P,D,z,W,G,X){Fc(w,C+4,1,z,8,W,G,X),Fc(P,D+4,1,z,8,W,G,X)}function ke(){this.ba=new Ln,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new kn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Oe(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function je(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function ut(){this.ua=0,this.Wa=new Ze,this.vb=new Ze,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new U,this.yc=new F}function xt(){this.xb=this.a=0,this.l=new Up,this.ca=new Ln,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new V,this.Pb=0,this.wd=new V,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new ut,this.ab=0,this.gc=o(4,je),this.Oc=0}function Dt(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Up,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Bt(w,C,P,D,z,W,G){for(w=w==null?0:w[C+0],C=0;C<G;++C)z[W+C]=w+P[D+C]&255,w=z[W+C]}function bn(w,C,P,D,z,W,G){var X;if(w==null)Bt(null,null,P,D,z,W,G);else for(X=0;X<G;++X)z[W+X]=w[C+X]+P[D+X]&255}function vr(w,C,P,D,z,W,G){if(w==null)Bt(null,null,P,D,z,W,G);else{var X,Q=w[C+0],ne=Q,pe=Q;for(X=0;X<G;++X)ne=pe+(Q=w[C+X])-ne,pe=P[D+X]+(-256&ne?0>ne?0:255:ne)&255,ne=Q,z[W+X]=pe}}function ei(w,C,P,D){var z=C.width,W=C.o;if(e(w!=null&&C!=null),0>P||0>=D||P+D>W)return null;if(!w.Cc){if(w.ga==null){var G;if(w.ga=new Dt,(G=w.ga==null)||(G=C.width*C.o,e(w.Gb.length==0),w.Gb=s(G),w.Uc=0,w.Gb==null?G=0:(w.mb=w.Gb,w.nb=w.Uc,w.rc=null,G=1),G=!G),!G){G=w.ga;var X=w.Fa,Q=w.P,ne=w.qc,pe=w.mb,Ie=w.nb,re=Q+1,ve=ne-1,Ce=G.l;if(e(X!=null&&pe!=null&&C!=null),id[0]=null,id[1]=Bt,id[2]=bn,id[3]=vr,G.ca=pe,G.tb=Ie,G.c=C.width,G.i=C.height,e(0<G.c&&0<G.i),1>=ne)C=0;else if(G.$a=3&X[Q+0],G.Z=X[Q+0]>>2&3,G.Lc=X[Q+0]>>4&3,Q=X[Q+0]>>6&3,0>G.$a||1<G.$a||4<=G.Z||1<G.Lc||Q)C=0;else if(Ce.put=Tt,Ce.ac=jl,Ce.bc=Pc,Ce.ma=G,Ce.width=C.width,Ce.height=C.height,Ce.Da=C.Da,Ce.v=C.v,Ce.va=C.va,Ce.j=C.j,Ce.o=C.o,G.$a)e:{e(G.$a==1),C=$h();t:for(;;){if(C==null){C=0;break e}if(e(G!=null),G.mc=C,C.c=G.c,C.i=G.i,C.l=G.l,C.l.ma=G,C.l.width=G.c,C.l.height=G.i,C.a=0,Y(C.m,X,re,ve),!zl(G.c,G.i,1,C,null)||(C.ab==1&&C.gc[0].hc==3&&Qa(C.s)?(G.ic=1,X=C.c*C.i,C.Ta=null,C.Ua=0,C.V=s(X),C.Ba=0,C.V==null?(C.a=1,C=0):C=1):(G.ic=0,C=Ph(C,G.c)),!C))break t;C=1;break e}G.mc=null,C=0}else C=ve>=G.c*G.i;G=!C}if(G)return null;w.ga.Lc!=1?w.Ga=0:D=W-P}e(w.ga!=null),e(P+D<=W);e:{if(C=(X=w.ga).c,W=X.l.o,X.$a==0){if(re=w.rc,ve=w.Vc,Ce=w.Fa,Q=w.P+1+P*C,ne=w.mb,pe=w.nb+P*C,e(Q<=w.P+w.qc),X.Z!=0)for(e(id[X.Z]!=null),G=0;G<D;++G)id[X.Z](re,ve,Ce,Q,ne,pe,C),re=ne,ve=pe,pe+=C,Q+=C;else for(G=0;G<D;++G)r(ne,pe,Ce,Q,C),re=ne,ve=pe,pe+=C,Q+=C;w.rc=re,w.Vc=ve}else{if(e(X.mc!=null),C=P+D,e((G=X.mc)!=null),e(C<=G.i),G.C>=C)C=1;else if(X.ic||ca(),X.ic){X=G.V,re=G.Ba,ve=G.c;var Pe=G.i,Ae=(Ce=1,Q=G.$/ve,ne=G.$%ve,pe=G.m,Ie=G.s,G.$),Re=ve*Pe,De=ve*C,Ue=Ie.wc,Me=Ae<De?qi(Ie,ne,Q):null;e(Ae<=Re),e(C<=Pe),e(Qa(Ie));t:for(;;){for(;!pe.h&&Ae<De;){if(ne&Ue||(Me=qi(Ie,ne,Q)),e(Me!=null),ce(pe),256>(Pe=Cr(Me.G[0],Me.H[0],pe)))X[re+Ae]=Pe,++Ae,++ne>=ve&&(ne=0,++Q<=C&&!(Q%16)&&el(G,Q));else{if(!(280>Pe)){Ce=0;break t}Pe=sa(Pe-256,pe);var bt,rt=Cr(Me.G[4],Me.H[4],pe);if(ce(pe),!(Ae>=(rt=oa(ve,rt=sa(rt,pe)))&&Re-Ae>=Pe)){Ce=0;break t}for(bt=0;bt<Pe;++bt)X[re+Ae+bt]=X[re+Ae+bt-rt];for(Ae+=Pe,ne+=Pe;ne>=ve;)ne-=ve,++Q<=C&&!(Q%16)&&el(G,Q);Ae<De&&ne&Ue&&(Me=qi(Ie,ne,Q))}e(pe.h==J(pe))}el(G,Q>C?C:Q);break t}!Ce||pe.h&&Ae<Re?(Ce=0,G.a=pe.h?5:3):G.$=Ae,C=Ce}else C=tl(G,G.V,G.Ba,G.c,G.i,C,jp);if(!C){D=0;break e}}P+D>=W&&(w.Cc=1),D=1}if(!D)return null;if(w.Cc&&((D=w.ga)!=null&&(D.mc=null),w.ga=null,0<w.Ga))return alert("todo:WebPDequantizeLevels"),null}return w.nb+P*z}function qn(w,C,P,D,z,W){for(;0<z--;){var G,X=w,Q=C+(P?1:0),ne=w,pe=C+(P?0:3);for(G=0;G<D;++G){var Ie=ne[pe+4*G];Ie!=255&&(Ie*=32897,X[Q+4*G+0]=X[Q+4*G+0]*Ie>>23,X[Q+4*G+1]=X[Q+4*G+1]*Ie>>23,X[Q+4*G+2]=X[Q+4*G+2]*Ie>>23)}C+=W}}function mi(w,C,P,D,z){for(;0<D--;){var W;for(W=0;W<P;++W){var G=w[C+2*W+0],X=15&(ne=w[C+2*W+1]),Q=4369*X,ne=(240&ne|ne>>4)*Q>>16;w[C+2*W+0]=(240&G|G>>4)*Q>>16&240|(15&G|G<<4)*Q>>16>>4&15,w[C+2*W+1]=240&ne|X}C+=z}}function ti(w,C,P,D,z,W,G,X){var Q,ne,pe=255;for(ne=0;ne<z;++ne){for(Q=0;Q<D;++Q){var Ie=w[C+Q];W[G+4*Q]=Ie,pe&=Ie}C+=P,G+=X}return pe!=255}function Hi(w,C,P,D,z){var W;for(W=0;W<z;++W)P[D+W]=w[C+W]>>8}function ca(){W0=qn,mM=mi,gM=ti,yM=Hi}function io(w,C,P){T[w]=function(D,z,W,G,X,Q,ne,pe,Ie,re,ve,Ce,Pe,Ae,Re,De,Ue){var Me,bt=Ue-1>>1,rt=X[Q+0]|ne[pe+0]<<16,Ht=Ie[re+0]|ve[Ce+0]<<16;e(D!=null);var ft=3*rt+Ht+131074>>2;for(C(D[z+0],255&ft,ft>>16,Pe,Ae),W!=null&&(ft=3*Ht+rt+131074>>2,C(W[G+0],255&ft,ft>>16,Re,De)),Me=1;Me<=bt;++Me){var sn=X[Q+Me]|ne[pe+Me]<<16,yi=Ie[re+Me]|ve[Ce+Me]<<16,Kt=rt+sn+Ht+yi+524296,pt=Kt+2*(sn+Ht)>>3;ft=pt+rt>>1,rt=(Kt=Kt+2*(rt+yi)>>3)+sn>>1,C(D[z+2*Me-1],255&ft,ft>>16,Pe,Ae+(2*Me-1)*P),C(D[z+2*Me-0],255&rt,rt>>16,Pe,Ae+(2*Me-0)*P),W!=null&&(ft=Kt+Ht>>1,rt=pt+yi>>1,C(W[G+2*Me-1],255&ft,ft>>16,Re,De+(2*Me-1)*P),C(W[G+2*Me+0],255&rt,rt>>16,Re,De+(2*Me+0)*P)),rt=sn,Ht=yi}1&Ue||(ft=3*rt+Ht+131074>>2,C(D[z+Ue-1],255&ft,ft>>16,Pe,Ae+(Ue-1)*P),W!=null&&(ft=3*Ht+rt+131074>>2,C(W[G+Ue-1],255&ft,ft>>16,Re,De+(Ue-1)*P)))}}function Ab(){fa[$b]=uae,fa[Pb]=_M,fa[SM]=dae,fa[Rb]=EM,fa[Ob]=TM,fa[fA]=$M,fa[CM]=hae,fa[pA]=_M,fa[mA]=EM,fa[Db]=TM,fa[gA]=$M}function Hp(w){return w&~fae?0>w?0:255:w>>PM}function Uh(w,C){return Hp((19077*w>>8)+(26149*C>>8)-14234)}function Xu(w,C,P){return Hp((19077*w>>8)-(6419*C>>8)-(13320*P>>8)+8708)}function Vh(w,C){return Hp((19077*w>>8)+(33050*C>>8)-17685)}function Wh(w,C,P,D,z){D[z+0]=Uh(w,P),D[z+1]=Xu(w,C,P),D[z+2]=Vh(w,C)}function Gh(w,C,P,D,z){D[z+0]=Vh(w,C),D[z+1]=Xu(w,C,P),D[z+2]=Uh(w,P)}function fs(w,C,P,D,z){var W=Xu(w,C,P);C=W<<3&224|Vh(w,C)>>3,D[z+0]=248&Uh(w,P)|W>>5,D[z+1]=C}function qh(w,C,P,D,z){var W=240&Vh(w,C)|15;D[z+0]=240&Uh(w,P)|Xu(w,C,P)>>4,D[z+1]=W}function Hh(w,C,P,D,z){D[z+0]=255,Wh(w,C,P,D,z+1)}function O0(w,C,P,D,z){Gh(w,C,P,D,z),D[z+3]=255}function D0(w,C,P,D,z){Wh(w,C,P,D,z),D[z+3]=255}function Nr(w,C){return 0>w?0:w>C?C:w}function jc(w,C,P){T[w]=function(D,z,W,G,X,Q,ne,pe,Ie){for(var re=pe+(-2&Ie)*P;pe!=re;)C(D[z+0],W[G+0],X[Q+0],ne,pe),C(D[z+1],W[G+0],X[Q+0],ne,pe+P),z+=2,++G,++Q,pe+=2*P;1&Ie&&C(D[z+0],W[G+0],X[Q+0],ne,pe)}}function Kp(w,C,P){return P==0?w==0?C==0?6:5:C==0?4:0:P}function Ib(w,C,P,D,z){switch(w>>>30){case 3:Zh(C,P,D,z,0);break;case 2:da(C,P,D,z);break;case 1:Sn(C,P,D,z)}}function ua(w,C){var P,D,z=C.M,W=C.Nb,G=w.oc,X=w.pc+40,Q=w.oc,ne=w.pc+584,pe=w.oc,Ie=w.pc+600;for(P=0;16>P;++P)G[X+32*P-1]=129;for(P=0;8>P;++P)Q[ne+32*P-1]=129,pe[Ie+32*P-1]=129;for(0<z?G[X-1-32]=Q[ne-1-32]=pe[Ie-1-32]=129:(i(G,X-32-1,127,21),i(Q,ne-32-1,127,9),i(pe,Ie-32-1,127,9)),D=0;D<w.za;++D){var re=C.ya[C.aa+D];if(0<D){for(P=-1;16>P;++P)r(G,X+32*P-4,G,X+32*P+12,4);for(P=-1;8>P;++P)r(Q,ne+32*P-4,Q,ne+32*P+4,4),r(pe,Ie+32*P-4,pe,Ie+32*P+4,4)}var ve=w.Gd,Ce=w.Hd+D,Pe=re.ad,Ae=re.Hc;if(0<z&&(r(G,X-32,ve[Ce].y,0,16),r(Q,ne-32,ve[Ce].f,0,8),r(pe,Ie-32,ve[Ce].ea,0,8)),re.Za){var Re=G,De=X-32+16;for(0<z&&(D>=w.za-1?i(Re,De,ve[Ce].y[15],4):r(Re,De,ve[Ce+1].y,0,4)),P=0;4>P;P++)Re[De+128+P]=Re[De+256+P]=Re[De+384+P]=Re[De+0+P];for(P=0;16>P;++P,Ae<<=2)Re=G,De=X+OM[P],rl[re.Ob[P]](Re,De),Ib(Ae,Pe,16*+P,Re,De)}else if(Re=Kp(D,z,re.Ob[0]),rd[Re](G,X),Ae!=0)for(P=0;16>P;++P,Ae<<=2)Ib(Ae,Pe,16*+P,G,X+OM[P]);for(P=re.Gc,Re=Kp(D,z,re.Dd),Uc[Re](Q,ne),Uc[Re](pe,Ie),Ae=Pe,Re=Q,De=ne,255&(re=0|P)&&(170&re?Gl(Ae,256,Re,De):Mn(Ae,256,Re,De)),re=pe,Ae=Ie,255&(P>>=8)&&(170&P?Gl(Pe,320,re,Ae):Mn(Pe,320,re,Ae)),z<w.Ub-1&&(r(ve[Ce].y,0,G,X+480,16),r(ve[Ce].f,0,Q,ne+224,8),r(ve[Ce].ea,0,pe,Ie+224,8)),P=8*W*w.B,ve=w.sa,Ce=w.ta+16*D+16*W*w.R,Pe=w.qa,re=w.ra+8*D+P,Ae=w.Ha,Re=w.Ia+8*D+P,P=0;16>P;++P)r(ve,Ce+P*w.R,G,X+32*P,16);for(P=0;8>P;++P)r(Pe,re+P*w.B,Q,ne+32*P,8),r(Ae,Re+P*w.B,pe,Ie+32*P,8)}}function Kh(w,C,P,D,z,W,G,X,Q){var ne=[0],pe=[0],Ie=0,re=Q!=null?Q.kd:0,ve=Q??new Oe;if(w==null||12>P)return 7;ve.data=w,ve.w=C,ve.ha=P,C=[C],P=[P],ve.gb=[ve.gb];e:{var Ce=C,Pe=P,Ae=ve.gb;if(e(w!=null),e(Pe!=null),e(Ae!=null),Ae[0]=0,12<=Pe[0]&&!n(w,Ce[0],"RIFF")){if(n(w,Ce[0]+8,"WEBP")){Ae=3;break e}var Re=we(w,Ce[0]+4);if(12>Re||4294967286<Re){Ae=3;break e}if(re&&Re>Pe[0]-8){Ae=7;break e}Ae[0]=Re,Ce[0]+=12,Pe[0]-=12}Ae=0}if(Ae!=0)return Ae;for(Re=0<ve.gb[0],P=P[0];;){e:{var De=w;Pe=C,Ae=P;var Ue=ne,Me=pe,bt=Ce=[0];if((ft=Ie=[Ie])[0]=0,8>Ae[0])Ae=7;else{if(!n(De,Pe[0],"VP8X")){if(we(De,Pe[0]+4)!=10){Ae=3;break e}if(18>Ae[0]){Ae=7;break e}var rt=we(De,Pe[0]+8),Ht=1+Le(De,Pe[0]+12);if(2147483648<=Ht*(De=1+Le(De,Pe[0]+15))){Ae=3;break e}bt!=null&&(bt[0]=rt),Ue!=null&&(Ue[0]=Ht),Me!=null&&(Me[0]=De),Pe[0]+=18,Ae[0]-=18,ft[0]=1}Ae=0}}if(Ie=Ie[0],Ce=Ce[0],Ae!=0)return Ae;if(Pe=!!(2&Ce),!Re&&Ie)return 3;if(W!=null&&(W[0]=!!(16&Ce)),G!=null&&(G[0]=Pe),X!=null&&(X[0]=0),G=ne[0],Ce=pe[0],Ie&&Pe&&Q==null){Ae=0;break}if(4>P){Ae=7;break}if(Re&&Ie||!Re&&!Ie&&!n(w,C[0],"ALPH")){P=[P],ve.na=[ve.na],ve.P=[ve.P],ve.Sa=[ve.Sa];e:{rt=w,Ae=C,Re=P;var ft=ve.gb;Ue=ve.na,Me=ve.P,bt=ve.Sa,Ht=22,e(rt!=null),e(Re!=null),De=Ae[0];var sn=Re[0];for(e(Ue!=null),e(bt!=null),Ue[0]=null,Me[0]=null,bt[0]=0;;){if(Ae[0]=De,Re[0]=sn,8>sn){Ae=7;break e}var yi=we(rt,De+4);if(4294967286<yi){Ae=3;break e}var Kt=8+yi+1&-2;if(Ht+=Kt,0<ft&&Ht>ft){Ae=3;break e}if(!n(rt,De,"VP8 ")||!n(rt,De,"VP8L")){Ae=0;break e}if(sn[0]<Kt){Ae=7;break e}n(rt,De,"ALPH")||(Ue[0]=rt,Me[0]=De+8,bt[0]=yi),De+=Kt,sn-=Kt}}if(P=P[0],ve.na=ve.na[0],ve.P=ve.P[0],ve.Sa=ve.Sa[0],Ae!=0)break}P=[P],ve.Ja=[ve.Ja],ve.xa=[ve.xa];e:if(ft=w,Ae=C,Re=P,Ue=ve.gb[0],Me=ve.Ja,bt=ve.xa,rt=Ae[0],De=!n(ft,rt,"VP8 "),Ht=!n(ft,rt,"VP8L"),e(ft!=null),e(Re!=null),e(Me!=null),e(bt!=null),8>Re[0])Ae=7;else{if(De||Ht){if(ft=we(ft,rt+4),12<=Ue&&ft>Ue-12){Ae=3;break e}if(re&&ft>Re[0]-8){Ae=7;break e}Me[0]=ft,Ae[0]+=8,Re[0]-=8,bt[0]=Ht}else bt[0]=5<=Re[0]&&ft[rt+0]==47&&!(ft[rt+4]>>5),Me[0]=Re[0];Ae=0}if(P=P[0],ve.Ja=ve.Ja[0],ve.xa=ve.xa[0],C=C[0],Ae!=0)break;if(4294967286<ve.Ja)return 3;if(X==null||Pe||(X[0]=ve.xa?2:1),G=[G],Ce=[Ce],ve.xa){if(5>P){Ae=7;break}X=G,re=Ce,Pe=W,w==null||5>P?w=0:5<=P&&w[C+0]==47&&!(w[C+4]>>5)?(Re=[0],ft=[0],Ue=[0],Y(Me=new V,w,C,P),Rc(Me,Re,ft,Ue)?(X!=null&&(X[0]=Re[0]),re!=null&&(re[0]=ft[0]),Pe!=null&&(Pe[0]=Ue[0]),w=1):w=0):w=0}else{if(10>P){Ae=7;break}X=Ce,w==null||10>P||!yb(w,C+3,P-3)?w=0:(re=w[C+0]|w[C+1]<<8|w[C+2]<<16,Pe=16383&(w[C+7]<<8|w[C+6]),w=16383&(w[C+9]<<8|w[C+8]),1&re||3<(re>>1&7)||!(re>>4&1)||re>>5>=ve.Ja||!Pe||!w?w=0:(G&&(G[0]=Pe),X&&(X[0]=w),w=1))}if(!w||(G=G[0],Ce=Ce[0],Ie&&(ne[0]!=G||pe[0]!=Ce)))return 3;Q!=null&&(Q[0]=ve,Q.offset=C-Q.w,e(4294967286>C-Q.w),e(Q.offset==Q.ha-P));break}return Ae==0||Ae==7&&Ie&&Q==null?(W!=null&&(W[0]|=ve.na!=null&&0<ve.na.length),D!=null&&(D[0]=G),z!=null&&(z[0]=Ce),0):Ae}function L0(w,C,P){var D=C.width,z=C.height,W=0,G=0,X=D,Q=z;if(C.Da=w!=null&&0<w.Da,C.Da&&(X=w.cd,Q=w.bd,W=w.v,G=w.j,11>P||(W&=-2,G&=-2),0>W||0>G||0>=X||0>=Q||W+X>D||G+Q>z))return 0;if(C.v=W,C.j=G,C.va=W+X,C.o=G+Q,C.U=X,C.T=Q,C.da=w!=null&&0<w.da,C.da){if(!Ge(X,Q,P=[w.ib],W=[w.hb]))return 0;C.ib=P[0],C.hb=W[0]}return C.ob=w!=null&&w.ob,C.Kb=w==null||!w.Sd,C.da&&(C.ob=C.ib<3*D/4&&C.hb<3*z/4,C.Kb=0),1}function M0(w){if(w==null)return 2;if(11>w.S){var C=w.f.RGBA;C.fb+=(w.height-1)*C.A,C.A=-C.A}else C=w.f.kb,w=w.height,C.O+=(w-1)*C.fa,C.fa=-C.fa,C.N+=(w-1>>1)*C.Ab,C.Ab=-C.Ab,C.W+=(w-1>>1)*C.Db,C.Db=-C.Db,C.F!=null&&(C.J+=(w-1)*C.lb,C.lb=-C.lb);return 0}function Yu(w,C,P,D){if(D==null||0>=w||0>=C)return 2;if(P!=null){if(P.Da){var z=P.cd,W=P.bd,G=-2&P.v,X=-2&P.j;if(0>G||0>X||0>=z||0>=W||G+z>w||X+W>C)return 2;w=z,C=W}if(P.da){if(!Ge(w,C,z=[P.ib],W=[P.hb]))return 2;w=z[0],C=W[0]}}D.width=w,D.height=C;e:{var Q=D.width,ne=D.height;if(w=D.S,0>=Q||0>=ne||!(w>=$b&&13>w))w=2;else{if(0>=D.Rd&&D.sd==null){G=W=z=C=0;var pe=(X=Q*DM[w])*ne;if(11>w||(W=(ne+1)/2*(C=(Q+1)/2),w==12&&(G=(z=Q)*ne)),(ne=s(pe+2*W+G))==null){w=1;break e}D.sd=ne,11>w?((Q=D.f.RGBA).eb=ne,Q.fb=0,Q.A=X,Q.size=pe):((Q=D.f.kb).y=ne,Q.O=0,Q.fa=X,Q.Fd=pe,Q.f=ne,Q.N=0+pe,Q.Ab=C,Q.Cd=W,Q.ea=ne,Q.W=0+pe+W,Q.Db=C,Q.Ed=W,w==12&&(Q.F=ne,Q.J=0+pe+2*W),Q.Tc=G,Q.lb=z)}if(C=1,z=D.S,W=D.width,G=D.height,z>=$b&&13>z)if(11>z)w=D.f.RGBA,C&=(X=Math.abs(w.A))*(G-1)+W<=w.size,C&=X>=W*DM[z],C&=w.eb!=null;else{w=D.f.kb,X=(W+1)/2,pe=(G+1)/2,Q=Math.abs(w.fa),ne=Math.abs(w.Ab);var Ie=Math.abs(w.Db),re=Math.abs(w.lb),ve=re*(G-1)+W;C&=Q*(G-1)+W<=w.Fd,C&=ne*(pe-1)+X<=w.Cd,C=(C&=Ie*(pe-1)+X<=w.Ed)&Q>=W&ne>=X&Ie>=X,C&=w.y!=null,C&=w.f!=null,C&=w.ea!=null,z==12&&(C&=re>=W,C&=ve<=w.Tc,C&=w.F!=null)}else C=0;w=C?0:2}}return w!=0||P!=null&&P.fd&&(w=M0(D)),w}var Xh=64,No=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ao=24,Zu=32,Bc=8,Ju=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];We("Predictor0","PredictorAdd0"),T.Predictor0=function(){return 4278190080},T.Predictor1=function(w){return w},T.Predictor2=function(w,C,P){return C[P+0]},T.Predictor3=function(w,C,P){return C[P+1]},T.Predictor4=function(w,C,P){return C[P-1]},T.Predictor5=function(w,C,P){return dt(dt(w,C[P+1]),C[P+0])},T.Predictor6=function(w,C,P){return dt(w,C[P-1])},T.Predictor7=function(w,C,P){return dt(w,C[P+0])},T.Predictor8=function(w,C,P){return dt(C[P-1],C[P+0])},T.Predictor9=function(w,C,P){return dt(C[P+0],C[P+1])},T.Predictor10=function(w,C,P){return dt(dt(w,C[P-1]),dt(C[P+0],C[P+1]))},T.Predictor11=function(w,C,P){var D=C[P+0];return 0>=At(D>>24&255,w>>24&255,(C=C[P-1])>>24&255)+At(D>>16&255,w>>16&255,C>>16&255)+At(D>>8&255,w>>8&255,C>>8&255)+At(255&D,255&w,255&C)?D:w},T.Predictor12=function(w,C,P){var D=C[P+0];return(Vt((w>>24&255)+(D>>24&255)-((C=C[P-1])>>24&255))<<24|Vt((w>>16&255)+(D>>16&255)-(C>>16&255))<<16|Vt((w>>8&255)+(D>>8&255)-(C>>8&255))<<8|Vt((255&w)+(255&D)-(255&C)))>>>0},T.Predictor13=function(w,C,P){var D=C[P-1];return(Nt((w=dt(w,C[P+0]))>>24&255,D>>24&255)<<24|Nt(w>>16&255,D>>16&255)<<16|Nt(w>>8&255,D>>8&255)<<8|Nt(255&w,255&D))>>>0};var F0=T.PredictorAdd0;T.PredictorAdd1=en,We("Predictor2","PredictorAdd2"),We("Predictor3","PredictorAdd3"),We("Predictor4","PredictorAdd4"),We("Predictor5","PredictorAdd5"),We("Predictor6","PredictorAdd6"),We("Predictor7","PredictorAdd7"),We("Predictor8","PredictorAdd8"),We("Predictor9","PredictorAdd9"),We("Predictor10","PredictorAdd10"),We("Predictor11","PredictorAdd11"),We("Predictor12","PredictorAdd12"),We("Predictor13","PredictorAdd13");var Xp=T.PredictorAdd2;vt("ColorIndexInverseTransform","MapARGB","32b",function(w){return w>>8&255},function(w){return w}),vt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(w){return w},function(w){return w>>8&255});var Ur,_b=T.ColorIndexInverseTransform,Vl=T.MapARGB,Wl=T.VP8LColorIndexInverseTransformAlpha,j0=T.MapAlpha,B0=T.VP8LPredictorsAdd=[];B0.length=16,(T.VP8LPredictors=[]).length=16,(T.VP8LPredictorsAdd_C=[]).length=16,(T.VP8LPredictors_C=[]).length=16;var z0,U0,Qu,ed,td,Yh,nd,Zh,da,Gl,Sn,Mn,Vr,gi,zc,V0,Yp,Eb,cM,uM,dM,hM,fM,pM,W0,mM,gM,yM,vM=s(511),xM=s(2041),bM=s(225),wM=s(767),kM=0,hA=xM,Tb=bM,Io=wM,ha=vM,$b=0,Pb=1,SM=2,Rb=3,Ob=4,fA=5,CM=6,pA=7,mA=8,Db=9,gA=10,Yoe=[2,3,7],Zoe=[3,3,11],NM=[280,256,256,256,40],Joe=[0,1,1,1,0],Qoe=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],eae=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],tae=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],nae=8,yA=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],vA=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],G0=null,rae=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],iae=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],AM=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],sae=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],oae=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],aae=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],lae=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],rd=[],rl=[],Uc=[],cae=1,IM=2,id=[],fa=[];io("UpsampleRgbLinePair",Wh,3),io("UpsampleBgrLinePair",Gh,3),io("UpsampleRgbaLinePair",D0,4),io("UpsampleBgraLinePair",O0,4),io("UpsampleArgbLinePair",Hh,4),io("UpsampleRgba4444LinePair",qh,2),io("UpsampleRgb565LinePair",fs,2);var uae=T.UpsampleRgbLinePair,dae=T.UpsampleBgrLinePair,_M=T.UpsampleRgbaLinePair,EM=T.UpsampleBgraLinePair,TM=T.UpsampleArgbLinePair,$M=T.UpsampleRgba4444LinePair,hae=T.UpsampleRgb565LinePair,Lb=16,Mb=1<<Lb-1,q0=-227,xA=482,PM=6,fae=(256<<PM)-1,RM=0,pae=s(256),mae=s(256),gae=s(256),yae=s(256),vae=s(xA-q0),xae=s(xA-q0);jc("YuvToRgbRow",Wh,3),jc("YuvToBgrRow",Gh,3),jc("YuvToRgbaRow",D0,4),jc("YuvToBgraRow",O0,4),jc("YuvToArgbRow",Hh,4),jc("YuvToRgba4444Row",qh,2),jc("YuvToRgb565Row",fs,2);var OM=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Fb=[0,2,8],bae=[8,7,6,4,4,2,2,2,1,1,1,1],wae=1;this.WebPDecodeRGBA=function(w,C,P,D,z){var W=Pb,G=new ke,X=new Ln;G.ba=X,X.S=W,X.width=[X.width],X.height=[X.height];var Q=X.width,ne=X.height,pe=new Ft;if(pe==null||w==null)var Ie=2;else e(pe!=null),Ie=Kh(w,C,P,pe.width,pe.height,pe.Pd,pe.Qd,pe.format,null);if(Ie!=0?Q=0:(Q!=null&&(Q[0]=pe.width[0]),ne!=null&&(ne[0]=pe.height[0]),Q=1),Q){X.width=X.width[0],X.height=X.height[0],D!=null&&(D[0]=X.width),z!=null&&(z[0]=X.height);e:{if(D=new Up,(z=new Oe).data=w,z.w=C,z.ha=P,z.kd=1,C=[0],e(z!=null),((w=Kh(z.data,z.w,z.ha,null,null,null,C,null,z))==0||w==7)&&C[0]&&(w=4),(C=w)==0){if(e(G!=null),D.data=z.data,D.w=z.w+z.offset,D.ha=z.ha-z.offset,D.put=Tt,D.ac=jl,D.bc=Pc,D.ma=G,z.xa){if((w=$h())==null){G=1;break e}if(function(re,ve){var Ce=[0],Pe=[0],Ae=[0];t:for(;;){if(re==null)return 0;if(ve==null)return re.a=2,0;if(re.l=ve,re.a=0,Y(re.m,ve.data,ve.w,ve.ha),!Rc(re.m,Ce,Pe,Ae)){re.a=3;break t}if(re.xb=IM,ve.width=Ce[0],ve.height=Pe[0],!zl(Ce[0],Pe[0],1,re,null))break t;return 1}return e(re.a!=0),0}(w,D)){if(D=(C=Yu(D.width,D.height,G.Oa,G.ba))==0){t:{D=w;n:for(;;){if(D==null){D=0;break t}if(e(D.s.yc!=null),e(D.s.Ya!=null),e(0<D.s.Wb),e((P=D.l)!=null),e((z=P.ma)!=null),D.xb!=0){if(D.ca=z.ba,D.tb=z.tb,e(D.ca!=null),!L0(z.Oa,P,Rb)){D.a=2;break n}if(!Ph(D,P.width)||P.da)break n;if((P.da||Wt(D.ca.S))&&ca(),11>D.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),D.ca.f.kb.F!=null&&ca()),D.Pb&&0<D.s.ua&&D.s.vb.X==null&&!te(D.s.vb,D.s.Wa.Xa)){D.a=1;break n}D.xb=0}if(!tl(D,D.V,D.Ba,D.c,D.i,P.o,qu))break n;z.Dc=D.Ma,D=1;break t}e(D.a!=0),D=0}D=!D}D&&(C=w.a)}else C=w.a}else{if((w=new Z5)==null){G=1;break e}if(w.Fa=z.na,w.P=z.P,w.qc=z.Sa,vb(w,D)){if((C=Yu(D.width,D.height,G.Oa,G.ba))==0){if(w.Aa=0,P=G.Oa,e((z=w)!=null),P!=null){if(0<(Q=0>(Q=P.Md)?0:100<Q?255:255*Q/100)){for(ne=pe=0;4>ne;++ne)12>(Ie=z.pb[ne]).lc&&(Ie.ia=Q*bae[0>Ie.lc?0:Ie.lc]>>3),pe|=Ie.ia;pe&&(alert("todo:VP8InitRandom"),z.ia=1)}z.Ga=P.Id,100<z.Ga?z.Ga=100:0>z.Ga&&(z.Ga=0)}(function(re,ve){if(re==null)return 0;if(ve==null)return Qr(re,2,"NULL VP8Io parameter in VP8Decode().");if(!re.cb&&!vb(re,ve))return 0;if(e(re.cb),ve.ac==null||ve.ac(ve)){ve.ob&&(re.L=0);var Ce=Fb[re.L];if(re.L==2?(re.yb=0,re.zb=0):(re.yb=ve.v-Ce>>4,re.zb=ve.j-Ce>>4,0>re.yb&&(re.yb=0),0>re.zb&&(re.zb=0)),re.Va=ve.o+15+Ce>>4,re.Hb=ve.va+15+Ce>>4,re.Hb>re.za&&(re.Hb=re.za),re.Va>re.Ub&&(re.Va=re.Ub),0<re.L){var Pe=re.ed;for(Ce=0;4>Ce;++Ce){var Ae;if(re.Qa.Cb){var Re=re.Qa.Lb[Ce];re.Qa.Fb||(Re+=Pe.Tb)}else Re=Pe.Tb;for(Ae=0;1>=Ae;++Ae){var De=re.gd[Ce][Ae],Ue=Re;if(Pe.Pc&&(Ue+=Pe.vd[0],Ae&&(Ue+=Pe.od[0])),0<(Ue=0>Ue?0:63<Ue?63:Ue)){var Me=Ue;0<Pe.wb&&(Me=4<Pe.wb?Me>>2:Me>>1)>9-Pe.wb&&(Me=9-Pe.wb),1>Me&&(Me=1),De.dd=Me,De.tc=2*Ue+Me,De.ld=40<=Ue?2:15<=Ue?1:0}else De.tc=0;De.La=Ae}}}Ce=0}else Qr(re,6,"Frame setup failed"),Ce=re.a;if(Ce=Ce==0){if(Ce){re.$c=0,0<re.Aa||(re.Ic=wae);t:{Ce=re.Ic,Pe=4*(Me=re.za);var bt=32*Me,rt=Me+1,Ht=0<re.L?Me*(0<re.Aa?2:1):0,ft=(re.Aa==2?2:1)*Me;if((De=Pe+832+(Ae=3*(16*Ce+Fb[re.L])/2*bt)+(Re=re.Fa!=null&&0<re.Fa.length?re.Kc.c*re.Kc.i:0))!=De)Ce=0;else{if(De>re.Vb){if(re.Vb=0,re.Ec=s(De),re.Fc=0,re.Ec==null){Ce=Qr(re,1,"no memory during frame initialization.");break t}re.Vb=De}De=re.Ec,Ue=re.Fc,re.Ac=De,re.Bc=Ue,Ue+=Pe,re.Gd=o(bt,mb),re.Hd=0,re.rb=o(rt+1,S0),re.sb=1,re.wa=Ht?o(Ht,la):null,re.Y=0,re.D.Nb=0,re.D.wa=re.wa,re.D.Y=re.Y,0<re.Aa&&(re.D.Y+=Me),e(!0),re.oc=De,re.pc=Ue,Ue+=832,re.ya=o(ft,C0),re.aa=0,re.D.ya=re.ya,re.D.aa=re.aa,re.Aa==2&&(re.D.aa+=Me),re.R=16*Me,re.B=8*Me,Me=(bt=Fb[re.L])*re.R,bt=bt/2*re.B,re.sa=De,re.ta=Ue+Me,re.qa=re.sa,re.ra=re.ta+16*Ce*re.R+bt,re.Ha=re.qa,re.Ia=re.ra+8*Ce*re.B+bt,re.$c=0,Ue+=Ae,re.mb=Re?De:null,re.nb=Re?Ue:null,e(Ue+Re<=re.Fc+re.Vb),Rh(re),i(re.Ac,re.Bc,0,Pe),Ce=1}}if(Ce){if(ve.ka=0,ve.y=re.sa,ve.O=re.ta,ve.f=re.qa,ve.N=re.ra,ve.ea=re.Ha,ve.Vd=re.Ia,ve.fa=re.R,ve.Rc=re.B,ve.F=null,ve.J=0,!kM){for(Ce=-255;255>=Ce;++Ce)vM[255+Ce]=0>Ce?-Ce:Ce;for(Ce=-1020;1020>=Ce;++Ce)xM[1020+Ce]=-128>Ce?-128:127<Ce?127:Ce;for(Ce=-112;112>=Ce;++Ce)bM[112+Ce]=-16>Ce?-16:15<Ce?15:Ce;for(Ce=-255;510>=Ce;++Ce)wM[255+Ce]=0>Ce?0:255<Ce?255:Ce;kM=1}nd=bb,Zh=Q5,Gl=eA,Sn=Ul,Mn=xb,da=J5,Vr=Sb,gi=Cb,zc=_,V0=B,Yp=zh,Eb=Nb,cM=ie,uM=ue,dM=R0,hM=Bh,fM=wb,pM=kb,rl[0]=aA,rl[1]=A0,rl[2]=sA,rl[3]=oA,rl[4]=lA,rl[5]=Lc,rl[6]=Dc,rl[7]=cA,rl[8]=Vp,rl[9]=uA,rd[0]=Ku,rd[1]=nA,rd[2]=rA,rd[3]=I0,rd[4]=iA,rd[5]=Lh,rd[6]=_0,Uc[0]=Gp,Uc[1]=tA,Uc[2]=E0,Uc[3]=Mh,Uc[4]=T0,Uc[5]=dA,Uc[6]=$0,Ce=1}else Ce=0}Ce&&(Ce=function(sn,yi){for(sn.M=0;sn.M<sn.Va;++sn.M){var Kt,pt=sn.Jc[sn.M&sn.Xb],Xe=sn.m,Wr=sn;for(Kt=0;Kt<Wr.za;++Kt){var Gt=Xe,dn=Wr,er=dn.Ac,Ki=dn.Bc+4*Kt,Ds=dn.zc,Ar=dn.ya[dn.aa+Kt];if(dn.Qa.Bb?Ar.$b=fe(Gt,dn.Pa.jb[0])?2+fe(Gt,dn.Pa.jb[2]):fe(Gt,dn.Pa.jb[1]):Ar.$b=0,dn.kc&&(Ar.Ad=fe(Gt,dn.Bd)),Ar.Za=!fe(Gt,145)+0,Ar.Za){var ps=Ar.Ob,Ls=0;for(dn=0;4>dn;++dn){var vi,pn=Ds[0+dn];for(vi=0;4>vi;++vi){pn=oae[er[Ki+vi]][pn];for(var An=AM[fe(Gt,pn[0])];0<An;)An=AM[2*An+fe(Gt,pn[An])];pn=-An,er[Ki+vi]=pn}r(ps,Ls,er,Ki,4),Ls+=4,Ds[0+dn]=pn}}else pn=fe(Gt,156)?fe(Gt,128)?1:3:fe(Gt,163)?2:0,Ar.Ob[0]=pn,i(er,Ki,pn,4),i(Ds,0,pn,4);Ar.Dd=fe(Gt,142)?fe(Gt,114)?fe(Gt,183)?1:3:2:0}if(Wr.m.Ka)return Qr(sn,7,"Premature end-of-partition0 encountered.");for(;sn.ja<sn.za;++sn.ja){if(Wr=pt,Gt=(Xe=sn).rb[Xe.sb-1],er=Xe.rb[Xe.sb+Xe.ja],Kt=Xe.ya[Xe.aa+Xe.ja],Ki=Xe.kc?Kt.Ad:0)Gt.la=er.la=0,Kt.Za||(Gt.Na=er.Na=0),Kt.Hc=0,Kt.Gc=0,Kt.ia=0;else{var Ir,In;if(Gt=er,er=Wr,Ki=Xe.Pa.Xc,Ds=Xe.ya[Xe.aa+Xe.ja],Ar=Xe.pb[Ds.$b],dn=Ds.ad,ps=0,Ls=Xe.rb[Xe.sb-1],pn=vi=0,i(dn,ps,0,384),Ds.Za)var Xi=0,il=Ki[3];else{An=s(16);var Gr=Gt.Na+Ls.Na;if(Gr=G0(er,Ki[1],Gr,Ar.Eb,0,An,0),Gt.Na=Ls.Na=(0<Gr)+0,1<Gr)nd(An,0,dn,ps);else{var so=An[0]+3>>3;for(An=0;256>An;An+=16)dn[ps+An]=so}Xi=1,il=Ki[0]}var Fn=15&Gt.la,xi=15&Ls.la;for(An=0;4>An;++An){var _o=1&xi;for(so=In=0;4>so;++so)Fn=Fn>>1|(_o=(Gr=G0(er,il,Gr=_o+(1&Fn),Ar.Sc,Xi,dn,ps))>Xi)<<7,In=In<<2|(3<Gr?3:1<Gr?2:dn[ps+0]!=0),ps+=16;Fn>>=4,xi=xi>>1|_o<<7,vi=(vi<<8|In)>>>0}for(il=Fn,Xi=xi>>4,Ir=0;4>Ir;Ir+=2){for(In=0,Fn=Gt.la>>4+Ir,xi=Ls.la>>4+Ir,An=0;2>An;++An){for(_o=1&xi,so=0;2>so;++so)Gr=_o+(1&Fn),Fn=Fn>>1|(_o=0<(Gr=G0(er,Ki[2],Gr,Ar.Qc,0,dn,ps)))<<3,In=In<<2|(3<Gr?3:1<Gr?2:dn[ps+0]!=0),ps+=16;Fn>>=2,xi=xi>>1|_o<<5}pn|=In<<4*Ir,il|=Fn<<4<<Ir,Xi|=(240&xi)<<Ir}Gt.la=il,Ls.la=Xi,Ds.Hc=vi,Ds.Gc=pn,Ds.ia=43690&pn?0:Ar.ia,Ki=!(vi|pn)}if(0<Xe.L&&(Xe.wa[Xe.Y+Xe.ja]=Xe.gd[Kt.$b][Kt.Za],Xe.wa[Xe.Y+Xe.ja].La|=!Ki),Wr.Ka)return Qr(sn,7,"Premature end-of-file encountered.")}if(Rh(sn),Xe=yi,Wr=1,Kt=(pt=sn).D,Gt=0<pt.L&&pt.M>=pt.zb&&pt.M<=pt.Va,pt.Aa==0)t:{if(Kt.M=pt.M,Kt.uc=Gt,ua(pt,Kt),Wr=1,Kt=(In=pt.D).Nb,Gt=(pn=Fb[pt.L])*pt.R,er=pn/2*pt.B,An=16*Kt*pt.R,so=8*Kt*pt.B,Ki=pt.sa,Ds=pt.ta-Gt+An,Ar=pt.qa,dn=pt.ra-er+so,ps=pt.Ha,Ls=pt.Ia-er+so,xi=(Fn=In.M)==0,vi=Fn>=pt.Va-1,pt.Aa==2&&ua(pt,In),In.uc)for(_o=(Gr=pt).D.M,e(Gr.D.uc),In=Gr.yb;In<Gr.Hb;++In){Xi=In,il=_o;var Ms=(Eo=(Yi=Gr).D).Nb;Ir=Yi.R;var Eo=Eo.wa[Eo.Y+Xi],To=Yi.sa,oo=Yi.ta+16*Ms*Ir+16*Xi,$o=Eo.dd,Hn=Eo.tc;if(Hn!=0)if(e(3<=Hn),Yi.L==1)0<Xi&&hM(To,oo,Ir,Hn+4),Eo.La&&pM(To,oo,Ir,Hn),0<il&&dM(To,oo,Ir,Hn+4),Eo.La&&fM(To,oo,Ir,Hn);else{var Po=Yi.B,sl=Yi.qa,Jh=Yi.ra+8*Ms*Po+8*Xi,Vc=Yi.Ha,Yi=Yi.Ia+8*Ms*Po+8*Xi;Ms=Eo.ld,0<Xi&&(gi(To,oo,Ir,Hn+4,$o,Ms),V0(sl,Jh,Vc,Yi,Po,Hn+4,$o,Ms)),Eo.La&&(Eb(To,oo,Ir,Hn,$o,Ms),uM(sl,Jh,Vc,Yi,Po,Hn,$o,Ms)),0<il&&(Vr(To,oo,Ir,Hn+4,$o,Ms),zc(sl,Jh,Vc,Yi,Po,Hn+4,$o,Ms)),Eo.La&&(Yp(To,oo,Ir,Hn,$o,Ms),cM(sl,Jh,Vc,Yi,Po,Hn,$o,Ms))}}if(pt.ia&&alert("todo:DitherRow"),Xe.put!=null){if(In=16*Fn,Fn=16*(Fn+1),xi?(Xe.y=pt.sa,Xe.O=pt.ta+An,Xe.f=pt.qa,Xe.N=pt.ra+so,Xe.ea=pt.Ha,Xe.W=pt.Ia+so):(In-=pn,Xe.y=Ki,Xe.O=Ds,Xe.f=Ar,Xe.N=dn,Xe.ea=ps,Xe.W=Ls),vi||(Fn-=pn),Fn>Xe.o&&(Fn=Xe.o),Xe.F=null,Xe.J=null,pt.Fa!=null&&0<pt.Fa.length&&In<Fn&&(Xe.J=ei(pt,Xe,In,Fn-In),Xe.F=pt.mb,Xe.F==null&&Xe.F.length==0)){Wr=Qr(pt,3,"Could not decode alpha data.");break t}In<Xe.j&&(pn=Xe.j-In,In=Xe.j,e(!(1&pn)),Xe.O+=pt.R*pn,Xe.N+=pt.B*(pn>>1),Xe.W+=pt.B*(pn>>1),Xe.F!=null&&(Xe.J+=Xe.width*pn)),In<Fn&&(Xe.O+=Xe.v,Xe.N+=Xe.v>>1,Xe.W+=Xe.v>>1,Xe.F!=null&&(Xe.J+=Xe.v),Xe.ka=In-Xe.j,Xe.U=Xe.va-Xe.v,Xe.T=Fn-In,Wr=Xe.put(Xe))}Kt+1!=pt.Ic||vi||(r(pt.sa,pt.ta-Gt,Ki,Ds+16*pt.R,Gt),r(pt.qa,pt.ra-er,Ar,dn+8*pt.B,er),r(pt.Ha,pt.Ia-er,ps,Ls+8*pt.B,er))}if(!Wr)return Qr(sn,6,"Output aborted.")}return 1}(re,ve)),ve.bc!=null&&ve.bc(ve),Ce&=1}return Ce?(re.cb=0,Ce):0})(w,D)||(C=w.a)}}else C=w.a}C==0&&G.Oa!=null&&G.Oa.fd&&(C=M0(G.ba))}G=C}W=G!=0?null:11>W?X.f.RGBA.eb:X.f.kb.y}else W=null;return W};var DM=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(T,O){for(var $="",R=0;R<4;R++)$+=String.fromCharCode(T[O++]);return $}function u(T,O){return T[O+0]|T[O+1]<<8}function d(T,O){return(T[O+0]|T[O+1]<<8|T[O+2]<<16)>>>0}function h(T,O){return(T[O+0]|T[O+1]<<8|T[O+2]<<16|T[O+3]<<24)>>>0}new l;var f=[0],p=[0],m=[],y=new l,g=t,v=function(T,O){var $={},R=0,F=!1,L=0,U=0;if($.frames=[],!function(M,V){for(var H=0;H<4;H++)if(M[V+H]!="RIFF".charCodeAt(H))return!0;return!1}(T,O)){for(h(T,O+=4),O+=8;O<T.length;){var q=c(T,O),K=h(T,O+=4);O+=4;var j=K+(1&K);switch(q){case"VP8 ":case"VP8L":$.frames[R]===void 0&&($.frames[R]={}),(le=$.frames[R]).src_off=F?U:O-8,le.src_size=L+K+8,R++,F&&(F=!1,L=0,U=0);break;case"VP8X":(le=$.header={}).feature_flags=T[O];var Y=O+4;le.canvas_width=1+d(T,Y),Y+=3,le.canvas_height=1+d(T,Y),Y+=3;break;case"ALPH":F=!0,L=j+8,U=O-8;break;case"ANIM":(le=$.header).bgcolor=h(T,O),Y=O+4,le.loop_count=u(T,Y),Y+=2;break;case"ANMF":var ae,le;(le=$.frames[R]={}).offset_x=2*d(T,O),O+=3,le.offset_y=2*d(T,O),O+=3,le.width=1+d(T,O),O+=3,le.height=1+d(T,O),O+=3,le.duration=d(T,O),O+=3,ae=T[O++],le.dispose=1&ae,le.blend=ae>>1&1}q!="ANMF"&&(O+=j)}return $}}(g,0);v.response=g,v.rgbaoutput=!0,v.dataurl=!1;var x=v.header?v.header:null,b=v.frames?v.frames:null;if(x){x.loop_counter=x.loop_count,f=[x.canvas_height],p=[x.canvas_width];for(var S=0;S<b.length&&b[S].blend!=0;S++);}var A=b[0],E=y.WebPDecodeRGBA(g,A.src_off,A.src_size,p,f);A.rgba=E,A.imgwidth=p[0],A.imgheight=f[0];for(var I=0;I<p[0]*f[0]*4;I++)m[I]=E[I];return this.width=p,this.height=f,this.data=m,this}(function(t){var e,n,r,i,s,o,a,l,c,u=function(M){return M=M||{},this.isStrokeTransparent=M.isStrokeTransparent||!1,this.strokeOpacity=M.strokeOpacity||1,this.strokeStyle=M.strokeStyle||"#000000",this.fillStyle=M.fillStyle||"#000000",this.isFillTransparent=M.isFillTransparent||!1,this.fillOpacity=M.fillOpacity||1,this.font=M.font||"10px sans-serif",this.textBaseline=M.textBaseline||"alphabetic",this.textAlign=M.textAlign||"left",this.lineWidth=M.lineWidth||1,this.lineJoin=M.lineJoin||"miter",this.lineCap=M.lineCap||"butt",this.path=M.path||[],this.transform=M.transform!==void 0?M.transform.clone():new l,this.globalCompositeOperation=M.globalCompositeOperation||"normal",this.globalAlpha=M.globalAlpha||1,this.clip_path=M.clip_path||[],this.currentPoint=M.currentPoint||new o,this.miterLimit=M.miterLimit||10,this.lastPoint=M.lastPoint||new o,this.lineDashOffset=M.lineDashOffset||0,this.lineDash=M.lineDash||[],this.margin=M.margin||[0,0,0,0],this.prevPageLastElemOffset=M.prevPageLastElemOffset||0,this.ignoreClearRect=typeof M.ignoreClearRect!="boolean"||M.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new d(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,c=new u}]);var d=function(M){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var V=M;Object.defineProperty(this,"pdf",{get:function(){return V}});var H=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return H},set:function(we){H=!!we}});var J=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return J},set:function(we){J=!!we}});var oe=0;Object.defineProperty(this,"posX",{get:function(){return oe},set:function(we){isNaN(we)||(oe=we)}});var ce=0;Object.defineProperty(this,"posY",{get:function(){return ce},set:function(we){isNaN(we)||(ce=we)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(we){var te;typeof we=="number"?te=[we,we,we,we]:((te=new Array(4))[0]=we[0],te[1]=we.length>=2?we[1]:te[0],te[2]=we.length>=3?we[2]:te[0],te[3]=we.length>=4?we[3]:te[1]),c.margin=te}});var ge=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ge},set:function(we){ge=we}});var ee=0;Object.defineProperty(this,"lastBreak",{get:function(){return ee},set:function(we){ee=we}});var fe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return fe},set:function(we){fe=we}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(we){we instanceof u&&(c=we)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(we){c.path=we}});var Se=[];Object.defineProperty(this,"ctxStack",{get:function(){return Se},set:function(we){Se=we}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(we){var te;te=h(we),this.ctx.fillStyle=te.style,this.ctx.isFillTransparent=te.a===0,this.ctx.fillOpacity=te.a,this.pdf.setFillColor(te.r,te.g,te.b,{a:te.a}),this.pdf.setTextColor(te.r,te.g,te.b,{a:te.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(we){var te=h(we);this.ctx.strokeStyle=te.style,this.ctx.isStrokeTransparent=te.a===0,this.ctx.strokeOpacity=te.a,te.a===0?this.pdf.setDrawColor(255,255,255):(te.a,this.pdf.setDrawColor(te.r,te.g,te.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(we){["butt","round","square"].indexOf(we)!==-1&&(this.ctx.lineCap=we,this.pdf.setLineCap(we))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(we){isNaN(we)||(this.ctx.lineWidth=we,this.pdf.setLineWidth(we))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(we){["bevel","round","miter"].indexOf(we)!==-1&&(this.ctx.lineJoin=we,this.pdf.setLineJoin(we))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(we){isNaN(we)||(this.ctx.miterLimit=we,this.pdf.setMiterLimit(we))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(we){this.ctx.textBaseline=we}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(we){["right","end","center","left","start"].indexOf(we)!==-1&&(this.ctx.textAlign=we)}});var me=null,Le=null;Object.defineProperty(this,"fontFaces",{get:function(){return Le},set:function(we){me=null,Le=we}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(we){var te;if(this.ctx.font=we,(te=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(we))!==null){var He=te[1];te[2];var Ze=te[3],Ge=te[4];te[5];var Be=te[6],Je=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ge)[2];Ge=Math.floor(Je==="px"?parseFloat(Ge)*this.pdf.internal.scaleFactor:Je==="em"?parseFloat(Ge)*this.pdf.getFontSize():parseFloat(Ge)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ge);var We=function(_t){var vt,Pn,nn=[],mt=_t.trim();if(mt==="")return qI;if(mt in X8)return[X8[mt]];for(;mt!=="";){switch(Pn=null,vt=(mt=Z8(mt)).charAt(0)){case'"':case"'":Pn=mwe(mt.substring(1),vt);break;default:Pn=gwe(mt)}if(Pn===null||(nn.push(Pn[0]),(mt=Z8(Pn[1]))!==""&&mt.charAt(0)!==","))return qI;mt=mt.replace(/^,/,"")}return nn}(Be);if(this.fontFaces){var Ct=function(_t,vt){if(me===null){var Pn=function(nn){var mt=[];return Object.keys(nn).forEach(function(Mt){nn[Mt].forEach(function(Dn){var Et=null;switch(Dn){case"bold":Et={family:Mt,weight:"bold"};break;case"italic":Et={family:Mt,style:"italic"};break;case"bolditalic":Et={family:Mt,weight:"bold",style:"italic"};break;case"":case"normal":Et={family:Mt}}Et!==null&&(Et.ref={name:Mt,style:Dn},mt.push(Et))})}),mt}(_t.getFontList());me=function(nn){for(var mt={},Mt=0;Mt<nn.length;++Mt){var Dn=GI(nn[Mt]),Et=Dn.family,rn=Dn.stretch,Wt=Dn.style,Br=Dn.weight;mt[Et]=mt[Et]||{},mt[Et][rn]=mt[Et][rn]||{},mt[Et][rn][Wt]=mt[Et][rn][Wt]||{},mt[Et][rn][Wt][Br]=Dn}return mt}(Pn.concat(vt))}return me}(this.pdf,this.fontFaces),dt=We.map(function(_t){return{family:_t,stretch:"normal",weight:Ze,style:He}}),Vt=function(_t,vt,Pn){for(var nn=(Pn=Pn||{}).defaultFontFamily||"times",mt=Object.assign({},pwe,Pn.genericFontFamilies||{}),Mt=null,Dn=null,Et=0;Et<vt.length;++Et)if(mt[(Mt=GI(vt[Et])).family]&&(Mt.family=mt[Mt.family]),_t.hasOwnProperty(Mt.family)){Dn=_t[Mt.family];break}if(!(Dn=Dn||_t[nn]))throw new Error("Could not find a font-family for the rule '"+Y8(Mt)+"' and default family '"+nn+"'.");if(Dn=function(rn,Wt){if(Wt[rn])return Wt[rn];var Br=_T[rn],pi=Br<=_T.normal?-1:1,Ln=K8(Wt,BK,Br,pi);if(!Ln)throw new Error("Could not find a matching font-stretch value for "+rn);return Ln}(Mt.stretch,Dn),Dn=function(rn,Wt){if(Wt[rn])return Wt[rn];for(var Br=jK[rn],pi=0;pi<Br.length;++pi)if(Wt[Br[pi]])return Wt[Br[pi]];throw new Error("Could not find a matching font-style for "+rn)}(Mt.style,Dn),!(Dn=function(rn,Wt){if(Wt[rn])return Wt[rn];if(rn===400&&Wt[500])return Wt[500];if(rn===500&&Wt[400])return Wt[400];var Br=fwe[rn],pi=K8(Wt,zK,Br,rn<400?-1:1);if(!pi)throw new Error("Could not find a matching font-weight for value "+rn);return pi}(Mt.weight,Dn)))throw new Error("Failed to resolve a font for the rule '"+Y8(Mt)+"'.");return Dn}(Ct,dt);this.pdf.setFont(Vt.ref.name,Vt.ref.style)}else{var Nt="";(Ze==="bold"||parseInt(Ze,10)>=700||He==="bold")&&(Nt="bold"),He==="italic"&&(Nt+="italic"),Nt.length===0&&(Nt="normal");for(var At="",en={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},It=0;It<We.length;It++){if(this.pdf.internal.getFont(We[It],Nt,{noFallback:!0,disableWarning:!0})!==void 0){At=We[It];break}if(Nt==="bolditalic"&&this.pdf.internal.getFont(We[It],"bold",{noFallback:!0,disableWarning:!0})!==void 0)At=We[It],Nt="bold";else if(this.pdf.internal.getFont(We[It],"normal",{noFallback:!0,disableWarning:!0})!==void 0){At=We[It],Nt="normal";break}}if(At===""){for(var ht=0;ht<We.length;ht++)if(en[We[ht]]){At=en[We[ht]];break}}At=At===""?"Times":At,this.pdf.setFont(At,Nt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(we){this.ctx.globalCompositeOperation=we}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(we){this.ctx.globalAlpha=we}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(we){this.ctx.lineDashOffset=we,le.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(we){this.ctx.lineDash=we,le.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(we){this.ctx.ignoreClearRect=!!we}})};d.prototype.setLineDash=function(M){this.lineDash=M},d.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},d.prototype.fill=function(){b.call(this,"fill",!1)},d.prototype.stroke=function(){b.call(this,"stroke",!1)},d.prototype.beginPath=function(){this.path=[{type:"begin"}]},d.prototype.moveTo=function(M,V){if(isNaN(M)||isNaN(V))throw jn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var H=this.ctx.transform.applyToPoint(new o(M,V));this.path.push({type:"mt",x:H.x,y:H.y}),this.ctx.lastPoint=new o(M,V)},d.prototype.closePath=function(){var M=new o(0,0),V=0;for(V=this.path.length-1;V!==-1;V--)if(this.path[V].type==="begin"&&En(this.path[V+1])==="object"&&typeof this.path[V+1].x=="number"){M=new o(this.path[V+1].x,this.path[V+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(M.x,M.y)},d.prototype.lineTo=function(M,V){if(isNaN(M)||isNaN(V))throw jn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var H=this.ctx.transform.applyToPoint(new o(M,V));this.path.push({type:"lt",x:H.x,y:H.y}),this.ctx.lastPoint=new o(H.x,H.y)},d.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),b.call(this,null,!0)},d.prototype.quadraticCurveTo=function(M,V,H,J){if(isNaN(H)||isNaN(J)||isNaN(M)||isNaN(V))throw jn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var oe=this.ctx.transform.applyToPoint(new o(H,J)),ce=this.ctx.transform.applyToPoint(new o(M,V));this.path.push({type:"qct",x1:ce.x,y1:ce.y,x:oe.x,y:oe.y}),this.ctx.lastPoint=new o(oe.x,oe.y)},d.prototype.bezierCurveTo=function(M,V,H,J,oe,ce){if(isNaN(oe)||isNaN(ce)||isNaN(M)||isNaN(V)||isNaN(H)||isNaN(J))throw jn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ge=this.ctx.transform.applyToPoint(new o(oe,ce)),ee=this.ctx.transform.applyToPoint(new o(M,V)),fe=this.ctx.transform.applyToPoint(new o(H,J));this.path.push({type:"bct",x1:ee.x,y1:ee.y,x2:fe.x,y2:fe.y,x:ge.x,y:ge.y}),this.ctx.lastPoint=new o(ge.x,ge.y)},d.prototype.arc=function(M,V,H,J,oe,ce){if(isNaN(M)||isNaN(V)||isNaN(H)||isNaN(J)||isNaN(oe))throw jn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ce=!!ce,!this.ctx.transform.isIdentity){var ge=this.ctx.transform.applyToPoint(new o(M,V));M=ge.x,V=ge.y;var ee=this.ctx.transform.applyToPoint(new o(0,H)),fe=this.ctx.transform.applyToPoint(new o(0,0));H=Math.sqrt(Math.pow(ee.x-fe.x,2)+Math.pow(ee.y-fe.y,2))}Math.abs(oe-J)>=2*Math.PI&&(J=0,oe=2*Math.PI),this.path.push({type:"arc",x:M,y:V,radius:H,startAngle:J,endAngle:oe,counterclockwise:ce})},d.prototype.arcTo=function(M,V,H,J,oe){throw new Error("arcTo not implemented.")},d.prototype.rect=function(M,V,H,J){if(isNaN(M)||isNaN(V)||isNaN(H)||isNaN(J))throw jn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(M,V),this.lineTo(M+H,V),this.lineTo(M+H,V+J),this.lineTo(M,V+J),this.lineTo(M,V),this.lineTo(M+H,V),this.lineTo(M,V)},d.prototype.fillRect=function(M,V,H,J){if(isNaN(M)||isNaN(V)||isNaN(H)||isNaN(J))throw jn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var oe={};this.lineCap!=="butt"&&(oe.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(oe.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(M,V,H,J),this.fill(),oe.hasOwnProperty("lineCap")&&(this.lineCap=oe.lineCap),oe.hasOwnProperty("lineJoin")&&(this.lineJoin=oe.lineJoin)}},d.prototype.strokeRect=function(M,V,H,J){if(isNaN(M)||isNaN(V)||isNaN(H)||isNaN(J))throw jn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");p.call(this)||(this.beginPath(),this.rect(M,V,H,J),this.stroke())},d.prototype.clearRect=function(M,V,H,J){if(isNaN(M)||isNaN(V)||isNaN(H)||isNaN(J))throw jn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(M,V,H,J))},d.prototype.save=function(M){M=typeof M!="boolean"||M;for(var V=this.pdf.internal.getCurrentPageInfo().pageNumber,H=0;H<this.pdf.internal.getNumberOfPages();H++)this.pdf.setPage(H+1),this.pdf.internal.out("q");if(this.pdf.setPage(V),M){this.ctx.fontSize=this.pdf.internal.getFontSize();var J=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=J}},d.prototype.restore=function(M){M=typeof M!="boolean"||M;for(var V=this.pdf.internal.getCurrentPageInfo().pageNumber,H=0;H<this.pdf.internal.getNumberOfPages();H++)this.pdf.setPage(H+1),this.pdf.internal.out("Q");this.pdf.setPage(V),M&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},d.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(M){var V,H,J,oe;if(M.isCanvasGradient===!0&&(M=M.getColor()),!M)return{r:0,g:0,b:0,a:0,style:M};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(M))V=0,H=0,J=0,oe=0;else{var ce=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(M);if(ce!==null)V=parseInt(ce[1]),H=parseInt(ce[2]),J=parseInt(ce[3]),oe=1;else if((ce=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(M))!==null)V=parseInt(ce[1]),H=parseInt(ce[2]),J=parseInt(ce[3]),oe=parseFloat(ce[4]);else{if(oe=1,typeof M=="string"&&M.charAt(0)!=="#"){var ge=new PK(M);M=ge.ok?ge.toHex():"#000000"}M.length===4?(V=M.substring(1,2),V+=V,H=M.substring(2,3),H+=H,J=M.substring(3,4),J+=J):(V=M.substring(1,3),H=M.substring(3,5),J=M.substring(5,7)),V=parseInt(V,16),H=parseInt(H,16),J=parseInt(J,16)}}return{r:V,g:H,b:J,a:oe,style:M}},f=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},p=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};d.prototype.fillText=function(M,V,H,J){if(isNaN(V)||isNaN(H)||typeof M!="string")throw jn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(J=isNaN(J)?void 0:J,!f.call(this)){var oe=j(this.ctx.transform.rotation),ce=this.ctx.transform.scaleX;R.call(this,{text:M,x:V,y:H,scale:ce,angle:oe,align:this.textAlign,maxWidth:J})}},d.prototype.strokeText=function(M,V,H,J){if(isNaN(V)||isNaN(H)||typeof M!="string")throw jn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!p.call(this)){J=isNaN(J)?void 0:J;var oe=j(this.ctx.transform.rotation),ce=this.ctx.transform.scaleX;R.call(this,{text:M,x:V,y:H,scale:ce,renderingMode:"stroke",angle:oe,align:this.textAlign,maxWidth:J})}},d.prototype.measureText=function(M){if(typeof M!="string")throw jn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var V=this.pdf,H=this.pdf.internal.scaleFactor,J=V.internal.getFontSize(),oe=V.getStringUnitWidth(M)*J/V.internal.scaleFactor;return new function(ce){var ge=(ce=ce||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ge}}),this}({width:oe*=Math.round(96*H/72*1e4)/1e4})},d.prototype.scale=function(M,V){if(isNaN(M)||isNaN(V))throw jn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var H=new l(M,0,0,V,0,0);this.ctx.transform=this.ctx.transform.multiply(H)},d.prototype.rotate=function(M){if(isNaN(M))throw jn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var V=new l(Math.cos(M),Math.sin(M),-Math.sin(M),Math.cos(M),0,0);this.ctx.transform=this.ctx.transform.multiply(V)},d.prototype.translate=function(M,V){if(isNaN(M)||isNaN(V))throw jn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var H=new l(1,0,0,1,M,V);this.ctx.transform=this.ctx.transform.multiply(H)},d.prototype.transform=function(M,V,H,J,oe,ce){if(isNaN(M)||isNaN(V)||isNaN(H)||isNaN(J)||isNaN(oe)||isNaN(ce))throw jn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ge=new l(M,V,H,J,oe,ce);this.ctx.transform=this.ctx.transform.multiply(ge)},d.prototype.setTransform=function(M,V,H,J,oe,ce){M=isNaN(M)?1:M,V=isNaN(V)?0:V,H=isNaN(H)?0:H,J=isNaN(J)?1:J,oe=isNaN(oe)?0:oe,ce=isNaN(ce)?0:ce,this.ctx.transform=new l(M,V,H,J,oe,ce)};var m=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};d.prototype.drawImage=function(M,V,H,J,oe,ce,ge,ee,fe){var Se=this.pdf.getImageProperties(M),me=1,Le=1,we=1,te=1;J!==void 0&&ee!==void 0&&(we=ee/J,te=fe/oe,me=Se.width/J*ee/J,Le=Se.height/oe*fe/oe),ce===void 0&&(ce=V,ge=H,V=0,H=0),J!==void 0&&ee===void 0&&(ee=J,fe=oe),J===void 0&&ee===void 0&&(ee=Se.width,fe=Se.height);for(var He,Ze=this.ctx.transform.decompose(),Ge=j(Ze.rotate.shx),Be=new l,Je=(Be=(Be=(Be=Be.multiply(Ze.translate)).multiply(Ze.skew)).multiply(Ze.scale)).applyToRectangle(new a(ce-V*we,ge-H*te,J*me,oe*Le)),We=y.call(this,Je),Ct=[],dt=0;dt<We.length;dt+=1)Ct.indexOf(We[dt])===-1&&Ct.push(We[dt]);if(x(Ct),this.autoPaging)for(var Vt=Ct[0],Nt=Ct[Ct.length-1],At=Vt;At<Nt+1;At++){this.pdf.setPage(At);var en=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],It=At===1?this.posY+this.margin[0]:this.margin[0],ht=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],_t=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],vt=At===1?0:ht+(At-2)*_t;if(this.ctx.clip_path.length!==0){var Pn=this.path;He=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(He,this.posX+this.margin[3],-vt+It+this.ctx.prevPageLastElemOffset),S.call(this,"fill",!0),this.path=Pn}var nn=JSON.parse(JSON.stringify(Je));nn=v([nn],this.posX+this.margin[3],-vt+It+this.ctx.prevPageLastElemOffset)[0];var mt=(At>Vt||At<Nt)&&m.call(this);mt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],en,_t,null).clip().discardPath()),this.pdf.addImage(M,"JPEG",nn.x,nn.y,nn.w,nn.h,null,null,Ge),mt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(M,"JPEG",Je.x,Je.y,Je.w,Je.h,null,null,Ge)};var y=function(M,V,H){var J=[];V=V||this.pdf.internal.pageSize.width,H=H||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var oe=this.posY+this.ctx.prevPageLastElemOffset;switch(M.type){default:case"mt":case"lt":J.push(Math.floor((M.y+oe)/H)+1);break;case"arc":J.push(Math.floor((M.y+oe-M.radius)/H)+1),J.push(Math.floor((M.y+oe+M.radius)/H)+1);break;case"qct":var ce=Y(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x,M.y);J.push(Math.floor((ce.y+oe)/H)+1),J.push(Math.floor((ce.y+ce.h+oe)/H)+1);break;case"bct":var ge=ae(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x2,M.y2,M.x,M.y);J.push(Math.floor((ge.y+oe)/H)+1),J.push(Math.floor((ge.y+ge.h+oe)/H)+1);break;case"rect":J.push(Math.floor((M.y+oe)/H)+1),J.push(Math.floor((M.y+M.h+oe)/H)+1)}for(var ee=0;ee<J.length;ee+=1)for(;this.pdf.internal.getNumberOfPages()<J[ee];)g.call(this);return J},g=function(){var M=this.fillStyle,V=this.strokeStyle,H=this.font,J=this.lineCap,oe=this.lineWidth,ce=this.lineJoin;this.pdf.addPage(),this.fillStyle=M,this.strokeStyle=V,this.font=H,this.lineCap=J,this.lineWidth=oe,this.lineJoin=ce},v=function(M,V,H){for(var J=0;J<M.length;J++)switch(M[J].type){case"bct":M[J].x2+=V,M[J].y2+=H;case"qct":M[J].x1+=V,M[J].y1+=H;default:M[J].x+=V,M[J].y+=H}return M},x=function(M){return M.sort(function(V,H){return V-H})},b=function(M,V){for(var H,J,oe=this.fillStyle,ce=this.strokeStyle,ge=this.lineCap,ee=this.lineWidth,fe=Math.abs(ee*this.ctx.transform.scaleX),Se=this.lineJoin,me=JSON.parse(JSON.stringify(this.path)),Le=JSON.parse(JSON.stringify(this.path)),we=[],te=0;te<Le.length;te++)if(Le[te].x!==void 0)for(var He=y.call(this,Le[te]),Ze=0;Ze<He.length;Ze+=1)we.indexOf(He[Ze])===-1&&we.push(He[Ze]);for(var Ge=0;Ge<we.length;Ge++)for(;this.pdf.internal.getNumberOfPages()<we[Ge];)g.call(this);if(x(we),this.autoPaging)for(var Be=we[0],Je=we[we.length-1],We=Be;We<Je+1;We++){this.pdf.setPage(We),this.fillStyle=oe,this.strokeStyle=ce,this.lineCap=ge,this.lineWidth=fe,this.lineJoin=Se;var Ct=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],dt=We===1?this.posY+this.margin[0]:this.margin[0],Vt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Nt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],At=We===1?0:Vt+(We-2)*Nt;if(this.ctx.clip_path.length!==0){var en=this.path;H=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(H,this.posX+this.margin[3],-At+dt+this.ctx.prevPageLastElemOffset),S.call(this,M,!0),this.path=en}if(J=JSON.parse(JSON.stringify(me)),this.path=v(J,this.posX+this.margin[3],-At+dt+this.ctx.prevPageLastElemOffset),V===!1||We===0){var It=(We>Be||We<Je)&&m.call(this);It&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ct,Nt,null).clip().discardPath()),S.call(this,M,V),It&&this.pdf.restoreGraphicsState()}this.lineWidth=ee}else this.lineWidth=fe,S.call(this,M,V),this.lineWidth=ee;this.path=me},S=function(M,V){if((M!=="stroke"||V||!p.call(this))&&(M==="stroke"||V||!f.call(this))){for(var H,J,oe=[],ce=this.path,ge=0;ge<ce.length;ge++){var ee=ce[ge];switch(ee.type){case"begin":oe.push({begin:!0});break;case"close":oe.push({close:!0});break;case"mt":oe.push({start:ee,deltas:[],abs:[]});break;case"lt":var fe=oe.length;if(ce[ge-1]&&!isNaN(ce[ge-1].x)&&(H=[ee.x-ce[ge-1].x,ee.y-ce[ge-1].y],fe>0)){for(;fe>=0;fe--)if(oe[fe-1].close!==!0&&oe[fe-1].begin!==!0){oe[fe-1].deltas.push(H),oe[fe-1].abs.push(ee);break}}break;case"bct":H=[ee.x1-ce[ge-1].x,ee.y1-ce[ge-1].y,ee.x2-ce[ge-1].x,ee.y2-ce[ge-1].y,ee.x-ce[ge-1].x,ee.y-ce[ge-1].y],oe[oe.length-1].deltas.push(H);break;case"qct":var Se=ce[ge-1].x+2/3*(ee.x1-ce[ge-1].x),me=ce[ge-1].y+2/3*(ee.y1-ce[ge-1].y),Le=ee.x+2/3*(ee.x1-ee.x),we=ee.y+2/3*(ee.y1-ee.y),te=ee.x,He=ee.y;H=[Se-ce[ge-1].x,me-ce[ge-1].y,Le-ce[ge-1].x,we-ce[ge-1].y,te-ce[ge-1].x,He-ce[ge-1].y],oe[oe.length-1].deltas.push(H);break;case"arc":oe.push({deltas:[],abs:[],arc:!0}),Array.isArray(oe[oe.length-1].abs)&&oe[oe.length-1].abs.push(ee)}}J=V?null:M==="stroke"?"stroke":"fill";for(var Ze=!1,Ge=0;Ge<oe.length;Ge++)if(oe[Ge].arc)for(var Be=oe[Ge].abs,Je=0;Je<Be.length;Je++){var We=Be[Je];We.type==="arc"?I.call(this,We.x,We.y,We.radius,We.startAngle,We.endAngle,We.counterclockwise,void 0,V,!Ze):F.call(this,We.x,We.y),Ze=!0}else if(oe[Ge].close===!0)this.pdf.internal.out("h"),Ze=!1;else if(oe[Ge].begin!==!0){var Ct=oe[Ge].start.x,dt=oe[Ge].start.y;L.call(this,oe[Ge].deltas,Ct,dt),Ze=!0}J&&T.call(this,J),V&&O.call(this)}},A=function(M){var V=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,H=V*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return M-H;case"top":return M+V-H;case"hanging":return M+V-2*H;case"middle":return M+V/2-H;default:return M}},E=function(M){return M+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};d.prototype.createLinearGradient=function(){var M=function(){};return M.colorStops=[],M.addColorStop=function(V,H){this.colorStops.push([V,H])},M.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},M.isCanvasGradient=!0,M},d.prototype.createPattern=function(){return this.createLinearGradient()},d.prototype.createRadialGradient=function(){return this.createLinearGradient()};var I=function(M,V,H,J,oe,ce,ge,ee,fe){for(var Se=q.call(this,H,J,oe,ce),me=0;me<Se.length;me++){var Le=Se[me];me===0&&(fe?$.call(this,Le.x1+M,Le.y1+V):F.call(this,Le.x1+M,Le.y1+V)),U.call(this,M,V,Le.x2,Le.y2,Le.x3,Le.y3,Le.x4,Le.y4)}ee?O.call(this):T.call(this,ge)},T=function(M){switch(M){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},O=function(){this.pdf.clip(),this.pdf.discardPath()},$=function(M,V){this.pdf.internal.out(n(M)+" "+r(V)+" m")},R=function(M){var V;switch(M.align){case"right":case"end":V="right";break;case"center":V="center";break;default:V="left"}var H=this.pdf.getTextDimensions(M.text),J=A.call(this,M.y),oe=E.call(this,J)-H.h,ce=this.ctx.transform.applyToPoint(new o(M.x,J)),ge=this.ctx.transform.decompose(),ee=new l;ee=(ee=(ee=ee.multiply(ge.translate)).multiply(ge.skew)).multiply(ge.scale);for(var fe,Se,me,Le=this.ctx.transform.applyToRectangle(new a(M.x,J,H.w,H.h)),we=ee.applyToRectangle(new a(M.x,oe,H.w,H.h)),te=y.call(this,we),He=[],Ze=0;Ze<te.length;Ze+=1)He.indexOf(te[Ze])===-1&&He.push(te[Ze]);if(x(He),this.autoPaging)for(var Ge=He[0],Be=He[He.length-1],Je=Ge;Je<Be+1;Je++){this.pdf.setPage(Je);var We=Je===1?this.posY+this.margin[0]:this.margin[0],Ct=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],dt=this.pdf.internal.pageSize.height-this.margin[2],Vt=dt-this.margin[0],Nt=this.pdf.internal.pageSize.width-this.margin[1],At=Nt-this.margin[3],en=Je===1?0:Ct+(Je-2)*Vt;if(this.ctx.clip_path.length!==0){var It=this.path;fe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(fe,this.posX+this.margin[3],-1*en+We),S.call(this,"fill",!0),this.path=It}var ht=v([JSON.parse(JSON.stringify(we))],this.posX+this.margin[3],-en+We+this.ctx.prevPageLastElemOffset)[0];M.scale>=.01&&(Se=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Se*M.scale),me=this.lineWidth,this.lineWidth=me*M.scale);var _t=this.autoPaging!=="text";if(_t||ht.y+ht.h<=dt){if(_t||ht.y>=We&&ht.x<=Nt){var vt=_t?M.text:this.pdf.splitTextToSize(M.text,M.maxWidth||Nt-ht.x)[0],Pn=v([JSON.parse(JSON.stringify(Le))],this.posX+this.margin[3],-en+We+this.ctx.prevPageLastElemOffset)[0],nn=_t&&(Je>Ge||Je<Be)&&m.call(this);nn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],At,Vt,null).clip().discardPath()),this.pdf.text(vt,Pn.x,Pn.y,{angle:M.angle,align:V,renderingMode:M.renderingMode}),nn&&this.pdf.restoreGraphicsState()}}else ht.y<dt&&(this.ctx.prevPageLastElemOffset+=dt-ht.y);M.scale>=.01&&(this.pdf.setFontSize(Se),this.lineWidth=me)}else M.scale>=.01&&(Se=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Se*M.scale),me=this.lineWidth,this.lineWidth=me*M.scale),this.pdf.text(M.text,ce.x+this.posX,ce.y+this.posY,{angle:M.angle,align:V,renderingMode:M.renderingMode,maxWidth:M.maxWidth}),M.scale>=.01&&(this.pdf.setFontSize(Se),this.lineWidth=me)},F=function(M,V,H,J){H=H||0,J=J||0,this.pdf.internal.out(n(M+H)+" "+r(V+J)+" l")},L=function(M,V,H){return this.pdf.lines(M,V,H,null,null)},U=function(M,V,H,J,oe,ce,ge,ee){this.pdf.internal.out([e(i(H+M)),e(s(J+V)),e(i(oe+M)),e(s(ce+V)),e(i(ge+M)),e(s(ee+V)),"c"].join(" "))},q=function(M,V,H,J){for(var oe=2*Math.PI,ce=Math.PI/2;V>H;)V-=oe;var ge=Math.abs(H-V);ge<oe&&J&&(ge=oe-ge);for(var ee=[],fe=J?-1:1,Se=V;ge>1e-5;){var me=Se+fe*Math.min(ge,ce);ee.push(K.call(this,M,Se,me)),ge-=Math.abs(me-Se),Se=me}return ee},K=function(M,V,H){var J=(H-V)/2,oe=M*Math.cos(J),ce=M*Math.sin(J),ge=oe,ee=-ce,fe=ge*ge+ee*ee,Se=fe+ge*oe+ee*ce,me=4/3*(Math.sqrt(2*fe*Se)-Se)/(ge*ce-ee*oe),Le=ge-me*ee,we=ee+me*ge,te=Le,He=-we,Ze=J+V,Ge=Math.cos(Ze),Be=Math.sin(Ze);return{x1:M*Math.cos(V),y1:M*Math.sin(V),x2:Le*Ge-we*Be,y2:Le*Be+we*Ge,x3:te*Ge-He*Be,y3:te*Be+He*Ge,x4:M*Math.cos(H),y4:M*Math.sin(H)}},j=function(M){return 180*M/Math.PI},Y=function(M,V,H,J,oe,ce){var ge=M+.5*(H-M),ee=V+.5*(J-V),fe=oe+.5*(H-oe),Se=ce+.5*(J-ce),me=Math.min(M,oe,ge,fe),Le=Math.max(M,oe,ge,fe),we=Math.min(V,ce,ee,Se),te=Math.max(V,ce,ee,Se);return new a(me,we,Le-me,te-we)},ae=function(M,V,H,J,oe,ce,ge,ee){var fe,Se,me,Le,we,te,He,Ze,Ge,Be,Je,We,Ct,dt,Vt=H-M,Nt=J-V,At=oe-H,en=ce-J,It=ge-oe,ht=ee-ce;for(Se=0;Se<41;Se++)Ge=(He=(me=M+(fe=Se/40)*Vt)+fe*((we=H+fe*At)-me))+fe*(we+fe*(oe+fe*It-we)-He),Be=(Ze=(Le=V+fe*Nt)+fe*((te=J+fe*en)-Le))+fe*(te+fe*(ce+fe*ht-te)-Ze),Se==0?(Je=Ge,We=Be,Ct=Ge,dt=Be):(Je=Math.min(Je,Ge),We=Math.min(We,Be),Ct=Math.max(Ct,Ge),dt=Math.max(dt,Be));return new a(Math.round(Je),Math.round(We),Math.round(Ct-Je),Math.round(dt-We))},le=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var M,V,H=(M=this.ctx.lineDash,V=this.ctx.lineDashOffset,JSON.stringify({lineDash:M,lineDashOffset:V}));this.prevLineDash!==H&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=H)}}})(kt.API),function(t){var e=function(o){var a,l,c,u,d,h,f,p,m,y;for(l=[],c=0,u=(o+=a="\0\0\0\0".slice(o.length%4||4)).length;u>c;c+=4)(d=(o.charCodeAt(c)<<24)+(o.charCodeAt(c+1)<<16)+(o.charCodeAt(c+2)<<8)+o.charCodeAt(c+3))!==0?(h=(d=((d=((d=((d=(d-(y=d%85))/85)-(m=d%85))/85)-(p=d%85))/85)-(f=d%85))/85)%85,l.push(h+33,f+33,p+33,m+33,y+33)):l.push(122);return function(g,v){for(var x=v;x>0;x--)g.pop()}(l,a.length),String.fromCharCode.apply(String,l)+"~>"},n=function(o){var a,l,c,u,d,h=String,f="length",p=255,m="charCodeAt",y="slice",g="replace";for(o[y](-2),o=o[y](0,-2)[g](/\s/g,"")[g]("z","!!!!!"),c=[],u=0,d=(o+=a="uuuuu"[y](o[f]%5||5))[f];d>u;u+=5)l=52200625*(o[m](u)-33)+614125*(o[m](u+1)-33)+7225*(o[m](u+2)-33)+85*(o[m](u+3)-33)+(o[m](u+4)-33),c.push(p&l>>24,p&l>>16,p&l>>8,p&l);return function(v,x){for(var b=x;b>0;b--)v.pop()}(c,a[f]),h.fromCharCode.apply(h,c)},r=function(o){return o.split("").map(function(a){return("0"+a.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(o){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),a.test(o)===!1)return"";for(var l="",c=0;c<o.length;c+=2)l+=String.fromCharCode("0x"+(o[c]+o[c+1]));return l},s=function(o){for(var a=new Uint8Array(o.length),l=o.length;l--;)a[l]=o.charCodeAt(l);return(a=mT(a)).reduce(function(c,u){return c+String.fromCharCode(u)},"")};t.processDataByFilters=function(o,a){var l=0,c=o||"",u=[];for(typeof(a=a||[])=="string"&&(a=[a]),l=0;l<a.length;l+=1)switch(a[l]){case"ASCII85Decode":case"/ASCII85Decode":c=n(c),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=e(c),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=i(c),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=r(c),u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=s(c),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[l]+'" is not implemented')}return{data:c,reverseChain:u.reverse().join(" ")}}}(kt.API),function(t){t.loadFile=function(e,n,r){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(l,c,u){var d=new XMLHttpRequest,h=0,f=function(p){var m=p.length,y=[],g=String.fromCharCode;for(h=0;h<m;h+=1)y.push(g(255&p.charCodeAt(h)));return y.join("")};if(d.open("GET",l,!c),d.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(d.onload=function(){d.status===200?u(f(this.responseText)):u(void 0)}),d.send(null),c&&d.status===200)return f(d.responseText)}(i,s,o)}catch{}return a}(e,n,r)},t.loadImageFile=t.loadFile}(kt.API),function(t){function e(){return(Ot.html2canvas?Promise.resolve(Ot.html2canvas):Yy(()=>import("./html2canvas.esm-e0a7d97b.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function n(){return(Ot.DOMPurify?Promise.resolve(Ot.DOMPurify):Yy(()=>import("./purify.es-96e69d58.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var r=function(a){var l=En(a);return l==="undefined"?"undefined":l==="string"||a instanceof String?"string":l==="number"||a instanceof Number?"number":l==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":l==="object"?"object":"unknown"},i=function(a,l){var c=document.createElement(a);for(var u in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[u]=l.style[u];return c},s=function a(l,c){for(var u=l.nodeType===3?document.createTextNode(l.nodeValue):l.cloneNode(!1),d=l.firstChild;d;d=d.nextSibling)c!==!0&&d.nodeType===1&&d.nodeName==="SCRIPT"||u.appendChild(a(d,c));return l.nodeType===1&&(l.nodeName==="CANVAS"?(u.width=l.width,u.height=l.height,u.getContext("2d").drawImage(l,0,0)):l.nodeName!=="TEXTAREA"&&l.nodeName!=="SELECT"||(u.value=l.value),u.addEventListener("load",function(){u.scrollTop=l.scrollTop,u.scrollLeft=l.scrollLeft},!0)),u},o=function a(l){var c=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),u=a.convert(Promise.resolve(),c);return(u=u.setProgress(1,a,1,[a])).set(l)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(a,l){return a.__proto__=l||o.prototype,a},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(a,l){return this.then(function(){switch(l=l||function(c){switch(r(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a),l){case"string":return this.then(n).then(function(c){return this.set({src:i("div",{innerHTML:a,dompurify:c})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},o.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(l){var c=this.opt.jsPDF,u=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=u,u)for(var f=0;f<u.length;++f){var p=u[f],m=p.src.find(function(y){return y.format==="truetype"});m&&c.addFont(m.url,p.ref.name,p.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,c.context2d.save(!0),l(this.prop.container,h)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(a,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(a,l):this.outputPdf(a,l)},o.prototype.outputPdf=function(a,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,l)})},o.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},o.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(a){if(r(a)!=="object")return this;var l=Object.keys(a||{}).map(function(c){if(c in o.template.prop)return function(){this.prop[c]=a[c]};switch(c){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[c]=a[c]}}},this);return this.then(function(){return this.thenList(l)})},o.prototype.get=function(a,l){return this.then(function(){var c=a in o.template.prop?this.prop[a]:this.opt[a];return l?l(c):c})},o.prototype.setMargin=function(a){return this.then(function(){switch(r(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},o.prototype.setPageSize=function(a){function l(c,u){return Math.floor(c*u/72*96)}return this.then(function(){(a=a||kt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:l(a.inner.width,a.k),height:l(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},o.prototype.setProgress=function(a,l,c,u){return a!=null&&(this.progress.val=a),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(a,l,c,u){return this.setProgress(a?this.progress.val+a:null,l||null,c?this.progress.n+c:null,u?this.progress.stack.concat(u):null)},o.prototype.then=function(a,l){var c=this;return this.thenCore(a,l,function(u,d){return c.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(h){return c.updateProgress(null,u),h}).then(u,d).then(function(h){return c.updateProgress(1),h})})},o.prototype.thenCore=function(a,l,c){c=c||Promise.prototype.then;var u=this;a&&(a=a.bind(u)),l&&(l=l.bind(u));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?u:o.convert(Object.assign({},u),Promise.prototype),h=c.call(d,a,l);return o.convert(h,u.__proto__)},o.prototype.thenExternal=function(a,l){return Promise.prototype.then.call(this,a,l)},o.prototype.thenList=function(a){var l=this;return a.forEach(function(c){l=l.thenCore(c)}),l},o.prototype.catch=function(a){a&&(a=a.bind(this));var l=Promise.prototype.catch.call(this,a);return o.convert(l,this)},o.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},o.prototype.error=function(a){return this.then(function(){throw new Error(a)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,kt.getPageSize=function(a,l,c){if(En(a)==="object"){var u=a;a=u.orientation,l=u.unit||l,c=u.format||c}l=l||"mm",c=c||"a4",a=(""+(a||"P")).toLowerCase();var d,h=(""+c).toLowerCase(),f={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+l}var p,m=0,y=0;if(f.hasOwnProperty(h))m=f[h][1]/d,y=f[h][0]/d;else try{m=c[1],y=c[0]}catch{throw new Error("Invalid format: "+c)}if(a==="p"||a==="portrait")a="p",y>m&&(p=y,y=m,m=p);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",m>y&&(p=y,y=m,m=p)}return{width:y,height:m,unit:l,k:d,orientation:a}},t.html=function(a,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(GI):null;var c=new o(l);return l.worker?c:c.from(a).doCallback()}}(kt.API),kt.API.addJS=function(t){return Q8=t,this.internal.events.subscribe("postPutResources",function(){_w=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(_w+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),J8=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Q8+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){_w!==void 0&&J8!==void 0&&this.internal.out("/Names <</JavaScript "+_w+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],a=r.exec(o);if(a!=null){var l=a[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,u=[];for(s=0;s<c;s++){var d=n.internal.newObject();u.push(d);var h=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var f=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<u.length;s++)n.internal.write("(page_"+(s+1)+")"+u[s]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+f+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var n=this;n.outline.root.children.length>0&&(n.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&n.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var l=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var c=0;c<r.children.length;c++)this.renderItems(r.children[c])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(kt.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,s,o,a){var l,c=this.decode.DCT_DECODE,u=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,l=function(d){for(var h,f=256*d.charCodeAt(4)+d.charCodeAt(5),p=d.length,m={width:0,height:0,numcomponents:1},y=4;y<p;y+=2){if(y+=f,e.indexOf(d.charCodeAt(y+1))!==-1){h=256*d.charCodeAt(y+5)+d.charCodeAt(y+6),m={width:256*d.charCodeAt(y+7)+d.charCodeAt(y+8),height:h,numcomponents:d.charCodeAt(y+9)};break}f=256*d.charCodeAt(y+2)+d.charCodeAt(y+3)}return m}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n),l.numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}u={data:n,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:c,index:r,alias:i}}return u}}(kt.API),kt.API.processPNG=function(t,e,n,r){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var i,s=Qbe(t,{checkCrc:!0}),o=s.width,a=s.height,l=s.channels,c=s.palette,u=s.depth;i=c&&l===1?function(I){for(var T=I.width,O=I.height,$=I.data,R=I.palette,F=I.depth,L=!1,U=[],q=[],K=void 0,j=!1,Y=0,ae=0;ae<R.length;ae++){var le=Hj(R[ae],4),M=le[0],V=le[1],H=le[2],J=le[3];U.push(M,V,H),J!=null&&(J===0?(Y++,q.length<1&&q.push(ae)):J<255&&(j=!0))}if(j||Y>1){L=!0,q=void 0;var oe=T*O;K=new Uint8Array(oe);for(var ce=new DataView($.buffer),ge=0;ge<oe;ge++){var ee=HI(ce,ge,F),fe=Hj(R[ee],4)[3];K[ge]=fe}}else Y===0&&(q=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:L?8:void 0,colorBytes:$,alphaBytes:K,needSMask:L,palette:U,mask:q}}(s):l===2||l===4?function(I){for(var T=I.data,O=I.width,$=I.height,R=I.channels,F=I.depth,L=R===2?"DeviceGray":"DeviceRGB",U=R-1,q=O*$,K=U,j=q*K,Y=1*q,ae=Math.ceil(j*F/8),le=Math.ceil(Y*F/8),M=new Uint8Array(ae),V=new Uint8Array(le),H=new DataView(T.buffer),J=new DataView(M.buffer),oe=new DataView(V.buffer),ce=!1,ge=0;ge<q;ge++){for(var ee=ge*R,fe=0;fe<K;fe++)lB(J,HI(H,ee+fe,F),ge*K+fe,F);var Se=HI(H,ee+K,F);Se<(1<<F)-1&&(ce=!0),lB(oe,Se,1*ge,F)}return{colorSpace:L,colorsPerPixel:U,sMaskBitsPerComponent:ce?F:void 0,colorBytes:M,alphaBytes:V,needSMask:ce}}(s):function(I){var T=I.data,O=I.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:O,colorsPerPixel:O==="DeviceGray"?1:3,colorBytes:T instanceof Uint16Array?function($){for(var R=$.length,F=new Uint8Array(2*R),L=new DataView(F.buffer,F.byteOffset,F.byteLength),U=0;U<R;U++)L.setUint16(2*U,$[U],!1);return F}(T):T,needSMask:!1}}(s);var d,h,f,p=i,m=p.colorSpace,y=p.colorsPerPixel,g=p.sMaskBitsPerComponent,v=p.colorBytes,x=p.alphaBytes,b=p.needSMask,S=p.palette,A=p.mask,E=null;return r!==kt.API.image_compression.NONE&&typeof mT=="function"?(E=function(I){var T;switch(I){case kt.API.image_compression.FAST:T=11;break;case kt.API.image_compression.MEDIUM:T=13;break;case kt.API.image_compression.SLOW:T=14;break;default:T=12}return T}(r),d=this.decode.FLATE_DECODE,h="/Predictor ".concat(E," /Colors ").concat(y," /BitsPerComponent ").concat(u," /Columns ").concat(o),t=rB(v,Math.ceil(o*y*u/8),y,u,r),b&&(f=rB(x,Math.ceil(o*g/8),1,g,r))):(d=void 0,h=void 0,t=v,b&&(f=x)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(f&&this.__addimage__.isArrayBuffer(f)||this.__addimage__.isArrayBufferView(f))&&(f=this.__addimage__.arrayBufferToBinaryString(f)),{alias:n,data:t,index:e,filter:d,decodeParameters:h,transparency:A,palette:S,sMask:f,predictor:E,width:o,height:a,bitsPerComponent:u,sMaskBitsPerComponent:g,colorSpace:m}}},function(t){t.processGIF89A=function(e,n,r,i){var s=new bwe(e),o=s.width,a=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:o,height:a},u=new KI(100).encode(c,100);return t.processJPEG.call(this,u,n,r,i)},t.processGIF87A=t.processGIF89A}(kt.API),al.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},al.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){jn.log("bit decode error:"+n)}},al.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[s>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}n!==0&&(this.pos+=4-n)}},al.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,a=s>>4,l=15&s,c=this.palette[a];if(this.data[o]=c.blue,this.data[o+1]=c.green,this.data[o+2]=c.red,this.data[o+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[o+4]=c.blue,this.data[o+4+1]=c.green,this.data[o+4+2]=c.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},al.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},al.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,c=s>>15?255:0,u=r*this.width*4+4*i;this.data[u]=l,this.data[u+1]=a,this.data[u+2]=o,this.data[u+3]=c}this.pos+=t}},al.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,l=(o>>5&n)/n*255|0,c=(o>>11)/e*255|0,u=i*this.width*4+4*s;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=a,this.data[u+3]=255}this.pos+=t}},al.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},al.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=o}},al.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,i){var s=new al(e,!1),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new KI(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}}(kt.API),uB.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,i){var s=new uB(e),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new KI(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}}(kt.API),kt.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),a=0,l=0,c=0;c<i;c+=4){var u=r[c],d=r[c+1],h=r[c+2],f=r[c+3];s[a++]=u,s[a++]=d,s[a++]=h,o[l++]=f}var p=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:p,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},kt.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},rm=kt.API,Ew=rm.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,l=a.fof?a.fof:1,c=e.kerning?e.kerning:i.metadata.Unicode.kerning,u=c.fof?c.fof:1,d=e.doKerning!==!1,h=0,f=t.length,p=0,m=a[0]||l,y=[];for(n=0;n<f;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?y.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(h=d&&En(c[r])==="object"&&!isNaN(parseInt(c[r][p],10))?c[r][p]/u:0,y.push((a[r]||m)/l+h)),p=r;return y},eB=rm.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return rm.processArabic&&(t=rm.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:Ew.apply(this,arguments).reduce(function(s,o){return s+o},0)},tB=function(t,e,n,r){for(var i=[],s=0,o=t.length,a=0;s!==o&&a+e[s]<n;)a+=e[s],s++;i.push(t.slice(0,s));var l=s;for(a=0;s!==o;)a+e[s]>r&&(i.push(t.slice(l,s)),a=0,l=s),a+=e[s],s++;return l!==s&&i.push(t.slice(l,s)),i},nB=function(t,e,n){n||(n={});var r,i,s,o,a,l,c,u=[],d=[u],h=n.textIndent||0,f=0,p=0,m=t.split(" "),y=Ew.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?m[0].length+2:n.lineIndent||0){var g=Array(l).join(" "),v=[];m.map(function(b){(b=b.split(/\s*\n/)).length>1?v=v.concat(b.map(function(S,A){return(A&&S.length?`
`:"")+S})):v.push(b[0])}),m=v,l=eB.apply(this,[g,n])}for(s=0,o=m.length;s<o;s++){var x=0;if(r=m[s],l&&r[0]==`
`&&(r=r.substr(1),x=1),h+f+(p=(i=Ew.apply(this,[r,n])).reduce(function(b,S){return b+S},0))>e||x){if(p>e){for(a=tB.apply(this,[r,i,e-(h+f),e]),u.push(a.shift()),u=[a.pop()];a.length;)d.push([a.shift()]);p=i.slice(r.length-(u[0]?u[0].length:0)).reduce(function(b,S){return b+S},0)}else u=[r];d.push(u),h=p+l,f=y}else u.push(r),h+=f+p,f=y}return c=l?function(b,S){return(S?g:"")+b.join(" ")}:function(b){return b.join(" ")},d.map(c)},rm.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var d=this.internal.getFont(u.fontName,u.fontStyle),h="Unicode";return d.metadata[h]?{widths:d.metadata[h].widths||{0:1},kerning:d.metadata[h].kerning||{}}:{font:d.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var a,l,c=[];for(a=0,l=r.length;a<l;a++)c=c.concat(nB.apply(this,[r[a],o,s]));return c},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",n="klmnopqrstuvwxyz",r={},i={},s=0;s<16;s++)r[n[s]]=e[s],i[e[s]]=n[s];var o=function(h){return"0x"+parseInt(h,10).toString(16)},a=t.__fontmetrics__.compress=function(h){var f,p,m,y,g=["{"];for(var v in h){if(f=h[v],isNaN(parseInt(v,10))?p="'"+v+"'":(v=parseInt(v,10),p=(p=o(v).slice(2)).slice(0,-1)+i[p.slice(-1)]),typeof f=="number")f<0?(m=o(f).slice(3),y="-"):(m=o(f).slice(2),y=""),m=y+m.slice(0,-1)+i[m.slice(-1)];else{if(En(f)!=="object")throw new Error("Don't know what to do with value type "+En(f)+".");m=a(f)}g.push(p+m)}return g.push("}"),g.join("")},l=t.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var f,p,m,y,g={},v=1,x=g,b=[],S="",A="",E=h.length-1,I=1;I<E;I+=1)(y=h[I])=="'"?f?(m=f.join(""),f=void 0):f=[]:f?f.push(y):y=="{"?(b.push([x,m]),x={},m=void 0):y=="}"?((p=b.pop())[0][p[1]]=x,m=void 0,x=p[0]):y=="-"?v=-1:m===void 0?r.hasOwnProperty(y)?(S+=r[y],m=parseInt(S,16)*v,v=1,S=""):S+=y:r.hasOwnProperty(y)?(A+=r[y],x[m]=parseInt(A,16)*v,v=1,m=void 0,A=""):A+=y;return g},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},d={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(h){var f=h.font,p=d.Unicode[f.postScriptName];p&&(f.metadata.Unicode={},f.metadata.Unicode.widths=p.widths,f.metadata.Unicode.kerning=p.kerning);var m=u.Unicode[f.postScriptName];m&&(f.metadata.Unicode.encoding=m,f.encoding=m.codePages[0])}])}(kt.API),function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=n.charCodeAt(s);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(R2(a)),o.metadata=t.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(kt),kt.API.addSvgAsImage=function(t,e,n,r,i,s,o,a){if(isNaN(e)||isNaN(n))throw jn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(i))throw jn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var l=document.createElement("canvas");l.width=r,l.height=i;var c=l.getContext("2d");c.fillStyle="#fff",c.fillRect(0,0,l.width,l.height);var u={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},d=this;return(Ot.canvg?Promise.resolve(Ot.canvg):Yy(()=>import("./index.es-37e01665.js"),[])).catch(function(h){return Promise.reject(new Error("Could not load canvg: "+h))}).then(function(h){return h.default?h.default:h}).then(function(h){return h.fromString(c,t,u)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(h){return h.render(u)}).then(function(){d.addImage(l.toDataURL("image/jpeg",1),e,n,r,i,o,a)})},kt.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},kt.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],c=0,u=0,d=0;function h(p,m){var y,g=!1;for(y=0;y<p.length;y+=1)p[y]===m&&(g=!0);return g}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var f=a.length;for(d=0;d<f;d+=1)n[a[d]].value=n[a[d]].defaultValue,n[a[d]].explicitSet=!1}if(En(t)==="object"){for(i in t)if(s=t[i],h(a,i)&&s!==void 0){if(n[i].type==="boolean"&&typeof s=="boolean")n[i].value=s;else if(n[i].type==="name"&&h(n[i].valueSet,s))n[i].value=s;else if(n[i].type==="integer"&&Number.isInteger(s))n[i].value=s;else if(n[i].type==="array"){for(c=0;c<s.length;c+=1)if(r=!0,s[c].length===1&&typeof s[c][0]=="number")l.push(String(s[c]-1));else if(s[c].length>1){for(u=0;u<s[c].length;u+=1)typeof s[c][u]!="number"&&(r=!1);r===!0&&l.push([s[c][0]-1,s[c][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var p,m=[];for(p in n)n[p].explicitSet===!0&&(n[p].type==="name"?m.push("/"+p+" /"+n[p].value):m.push("/"+p+" "+n[p].value));m.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+m.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=s.length+o.length+a.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+a+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(kt.API),function(t){var e=t.API,n=e.pdfEscape16=function(s,o){for(var a,l=o.metadata.Unicode.widths,c=["","0","00","000","0000"],u=[""],d=0,h=s.length;d<h;++d){if(a=o.metadata.characterToGlyph(s.charCodeAt(d)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=s.charCodeAt(d),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return u.join("");a=a.toString(16),u.push(c[4-a.length],a)}return u.join("")},r=function(s){var o,a,l,c,u,d,h;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],d=0,h=(a=Object.keys(s).sort(function(f,p){return f-p})).length;d<h;d++)o=a[d],l.length>=100&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(c=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+c+">"));return l.length&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),u+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,c=o.newObject,u=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="Identity-H"){for(var d=a.metadata.Unicode.widths,h=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),f="",p=0;p<h.length;p++)f+=String.fromCharCode(h[p]);var m=c();u({data:f,addLength1:!0,objectId:m}),l("endobj");var y=c();u({data:r(a.metadata.toUnicode),addLength1:!0,objectId:y}),l("endobj");var g=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+cm(a.fontName)),l("/FontFile2 "+m+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var v=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+cm(a.fontName)),l("/FontDescriptor "+g+" 0 R"),l("/W "+t.API.PDFObject.convert(d)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+y+" 0 R"),l("/BaseFont /"+cm(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+v+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,c=o.newObject,u=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var d=a.metadata.rawData,h="",f=0;f<d.length;f++)h+=String.fromCharCode(d[f]);var p=c();u({data:h,addLength1:!0,objectId:p}),l("endobj");var m=c();u({data:r(a.metadata.toUnicode),addLength1:!0,objectId:m}),l("endobj");var y=c();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+p+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+cm(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=c();for(var g=0;g<a.metadata.hmtx.widths.length;g++)a.metadata.hmtx.widths[g]=parseInt(a.metadata.hmtx.widths[g]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+m+" 0 R/BaseFont/"+cm(a.fontName)+"/FontDescriptor "+y+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,a=s.text||"",l=s.x,c=s.y,u=s.options||{},d=s.mutex||{},h=d.pdfEscape,f=d.activeFontKey,p=d.fonts,m=f,y="",g=0,v="",x=p[m].encoding;if(p[m].encoding!=="Identity-H")return{text:a,x:l,y:c,options:u,mutex:d};for(v=a,m=f,Array.isArray(a)&&(v=a[0]),g=0;g<v.length;g+=1)p[m].metadata.hasOwnProperty("cmap")&&(o=p[m].metadata.cmap.unicode.codeMap[v[g].charCodeAt(0)]),o||v[g].charCodeAt(0)<256&&p[m].metadata.hasOwnProperty("Unicode")?y+=v[g]:y+="";var b="";return parseInt(m.slice(1))<14||x==="WinAnsiEncoding"?b=h(y,m).split("").map(function(S){return S.charCodeAt(0).toString(16)}).join(""):x==="Identity-H"&&(b=n(y,p[m])),d.isHex=!0,{text:b,x:l,y:c,options:u,mutex:d}};e.events.push(["postProcessText",function(s){var o=s.text||"",a=[],l={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var c=0;for(c=0;c<o.length;c+=1)Array.isArray(o[c])&&o[c].length===3?a.push([i(Object.assign({},l,{text:o[c][0]})).text,o[c][1],o[c][2]]):a.push(i(Object.assign({},l,{text:o[c]})).text);s.text=a}else s.text=i(Object.assign({},l,{text:o})).text}])}(kt),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(kt.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,s,o,a,l,c,u,d=e,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],f=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],p={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},m={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},y=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],g=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),v=!1,x=0;this.__bidiEngine__={};var b=function($){var R=$.charCodeAt(),F=R>>8,L=m[F];return L!==void 0?d[256*L+(255&R)]:F===252||F===253?"AL":g.test(F)?"L":F===8?"R":"N"},S=function($){for(var R,F=0;F<$.length;F++){if((R=b($.charAt(F)))==="L")return!1;if(R==="R")return!0}return!1},A=function($,R,F,L){var U,q,K,j,Y=R[L];switch(Y){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":v=!1;break;case"N":case"AN":break;case"EN":v&&(Y="AN");break;case"AL":v=!0,Y="R";break;case"WS":case"BN":Y="N";break;case"CS":L<1||L+1>=R.length||(U=F[L-1])!=="EN"&&U!=="AN"||(q=R[L+1])!=="EN"&&q!=="AN"?Y="N":v&&(q="AN"),Y=q===U?q:"N";break;case"ES":Y=(U=L>0?F[L-1]:"B")==="EN"&&L+1<R.length&&R[L+1]==="EN"?"EN":"N";break;case"ET":if(L>0&&F[L-1]==="EN"){Y="EN";break}if(v){Y="N";break}for(K=L+1,j=R.length;K<j&&R[K]==="ET";)K++;Y=K<j&&R[K]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(j=R.length,K=L+1;K<j&&R[K]==="NSM";)K++;if(K<j){var ae=$[L],le=ae>=1425&&ae<=2303||ae===64286;if(U=R[K],le&&(U==="R"||U==="AL")){Y="R";break}}}Y=L<1||(U=R[L-1])==="B"?"N":F[L-1];break;case"B":v=!1,i=!0,Y=x;break;case"S":s=!0,Y="N"}return Y},E=function($,R,F){var L=$.split("");return F&&I(L,F,{hiLevel:x}),L.reverse(),R&&R.reverse(),L.join("")},I=function($,R,F){var L,U,q,K,j,Y=-1,ae=$.length,le=0,M=[],V=x?f:h,H=[];for(v=!1,i=!1,s=!1,U=0;U<ae;U++)H[U]=b($[U]);for(q=0;q<ae;q++){if(j=le,M[q]=A($,H,M,q),L=240&(le=V[j][p[M[q]]]),le&=15,R[q]=K=V[le][5],L>0)if(L===16){for(U=Y;U<q;U++)R[U]=1;Y=-1}else Y=-1;if(V[le][6])Y===-1&&(Y=q);else if(Y>-1){for(U=Y;U<q;U++)R[U]=K;Y=-1}H[q]==="B"&&(R[q]=0),F.hiLevel|=K}s&&function(J,oe,ce){for(var ge=0;ge<ce;ge++)if(J[ge]==="S"){oe[ge]=x;for(var ee=ge-1;ee>=0&&J[ee]==="WS";ee--)oe[ee]=x}}(H,R,ae)},T=function($,R,F,L,U){if(!(U.hiLevel<$)){if($===1&&x===1&&!i)return R.reverse(),void(F&&F.reverse());for(var q,K,j,Y,ae=R.length,le=0;le<ae;){if(L[le]>=$){for(j=le+1;j<ae&&L[j]>=$;)j++;for(Y=le,K=j-1;Y<K;Y++,K--)q=R[Y],R[Y]=R[K],R[K]=q,F&&(q=F[Y],F[Y]=F[K],F[K]=q);le=j}le++}}},O=function($,R,F){var L=$.split(""),U={hiLevel:x};return F||(F=[]),I(L,F,U),function(q,K,j){if(j.hiLevel!==0&&u)for(var Y,ae=0;ae<q.length;ae++)K[ae]===1&&(Y=y.indexOf(q[ae]))>=0&&(q[ae]=y[Y+1])}(L,F,U),T(2,L,R,F,U),T(1,L,R,F,U),L.join("")};return this.__bidiEngine__.doBidiReorder=function($,R,F){if(function(U,q){if(q)for(var K=0;K<U.length;K++)q[K]=K;a===void 0&&(a=S(U)),c===void 0&&(c=S(U))}($,R),o||!l||c)if(o&&l&&a^c)x=a?1:0,$=E($,R,F);else if(!o&&l&&c)x=a?1:0,$=O($,R,F),$=E($,R);else if(!o||a||l||c){if(o&&!l&&a^c)$=E($,R),a?(x=0,$=O($,R,F)):(x=1,$=O($,R,F),$=E($,R));else if(o&&a&&!l&&c)x=1,$=O($,R,F),$=E($,R);else if(!o&&!l&&a^c){var L=u;a?(x=1,$=O($,R,F),x=0,u=!1,$=O($,R,F),u=L):(x=0,$=O($,R,F),$=E($,R),x=1,u=!1,$=O($,R,F),u=L,$=E($,R))}}else x=0,$=O($,R,F);else x=a?1:0,$=O($,R,F);return $},this.__bidiEngine__.setOptions=function($){$&&(o=$.isInputVisual,l=$.isOutputVisual,a=$.isInputRtl,c=$.isOutputRtl,u=$.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var s=r.options||{};r.mutex,s.lang;var o=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(o=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?o.push([n.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):o.push([n.doBidiReorder(i[a])]);r.text=o}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(kt),kt.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new Jd(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new Dwe(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new wwe(this.contents),this.head=new Swe(this),this.name=new _we(this),this.cmap=new VK(this),this.toUnicode={},this.hhea=new Cwe(this),this.maxp=new Ewe(this),this.hmtx=new Twe(this),this.post=new Awe(this),this.os2=new Nwe(this),this.loca=new Owe(this),this.glyf=new $we(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,a,l,c;for(c=[],o=0,a=(l=this.bbox).length;o<a;o++)e=l[o],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,s,o,a;for(o=0,s=0,a=(e=""+e).length;0<=a?s<a:s>a;s=0<=a?++s:--s)i=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return o*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var Dl,Jd=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,s,o,a,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*s+65536*o+256*a+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)n=e[r],s.push(this.writeByte(n));return s},t}(),wwe=function(){var t;function e(n){var r,i,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,s,o,a,l,c,u,d,h,f,p,m;for(m in f=Object.keys(n).length,l=Math.log(2),d=16*Math.floor(Math.log(f)/l),o=Math.floor(d/l),u=16*f-d,(i=new Jd).writeInt(this.scalarType),i.writeShort(f),i.writeShort(d),i.writeShort(o),i.writeShort(u),s=16*f,c=i.pos+s,a=null,p=[],n)for(h=n[m],i.writeString(m),i.writeInt(t(h)),i.writeInt(c),i.writeInt(h.length),p=p.concat(h),m==="head"&&(a=c),c+=h.length;c%4;)p.push(0),c++;return i.write(p),r=2981146554-t(i.data),i.pos=a+8,i.writeUInt32(r),i.data},t=function(n){var r,i,s,o;for(n=WK.call(n);n.length%4;)n.push(0);for(s=new Jd(n),i=0,r=0,o=n.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),kwe={}.hasOwnProperty,Ec=function(t,e){for(var n in e)kwe.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};Dl=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var Swe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ec(t,Dl),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var n;return(n=new Jd).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(e),n.writeShort(this.glyphDataFormat),n.data},t}(),dB=function(){function t(e,n){var r,i,s,o,a,l,c,u,d,h,f,p,m,y,g,v,x;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),d=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(f=e.readUInt16(),h=f/2,e.pos+=6,s=function(){var b,S;for(S=[],l=b=0;0<=h?b<h:b>h;l=0<=h?++b:--b)S.push(e.readUInt16());return S}(),e.pos+=2,m=function(){var b,S;for(S=[],l=b=0;0<=h?b<h:b>h;l=0<=h?++b:--b)S.push(e.readUInt16());return S}(),c=function(){var b,S;for(S=[],l=b=0;0<=h?b<h:b>h;l=0<=h?++b:--b)S.push(e.readUInt16());return S}(),u=function(){var b,S;for(S=[],l=b=0;0<=h?b<h:b>h;l=0<=h?++b:--b)S.push(e.readUInt16());return S}(),i=(this.length-e.pos+this.offset)/2,a=function(){var b,S;for(S=[],l=b=0;0<=i?b<i:b>i;l=0<=i?++b:--b)S.push(e.readUInt16());return S}(),l=g=0,x=s.length;g<x;l=++g)for(y=s[l],r=v=p=m[l];p<=y?v<=y:v>=y;r=p<=y?++v:--v)u[l]===0?o=r+c[l]:(o=a[u[l]/2+(r-p)-(h-l)]||0)!==0&&(o+=c[l]),this.codeMap[r]=65535&o}e.pos=d}return t.encode=function(e,n){var r,i,s,o,a,l,c,u,d,h,f,p,m,y,g,v,x,b,S,A,E,I,T,O,$,R,F,L,U,q,K,j,Y,ae,le,M,V,H,J,oe,ce,ge,ee,fe,Se,me;switch(L=new Jd,o=Object.keys(e).sort(function(Le,we){return Le-we}),n){case"macroman":for(m=0,y=function(){var Le=[];for(p=0;p<256;++p)Le.push(0);return Le}(),v={0:0},s={},U=0,Y=o.length;U<Y;U++)v[ee=e[i=o[U]]]==null&&(v[ee]=++m),s[i]={old:e[i],new:v[e[i]]},y[i]=v[e[i]];return L.writeUInt16(1),L.writeUInt16(0),L.writeUInt32(12),L.writeUInt16(0),L.writeUInt16(262),L.writeUInt16(0),L.write(y),{charMap:s,subtable:L.data,maxGlyphID:m+1};case"unicode":for(R=[],d=[],x=0,v={},r={},g=c=null,q=0,ae=o.length;q<ae;q++)v[S=e[i=o[q]]]==null&&(v[S]=++x),r[i]={old:S,new:v[S]},a=v[S]-i,g!=null&&a===c||(g&&d.push(g),R.push(i),c=a),g=i;for(g&&d.push(g),d.push(65535),R.push(65535),O=2*(T=R.length),I=2*Math.pow(Math.log(T)/Math.LN2,2),h=Math.log(I/2)/Math.LN2,E=2*T-I,l=[],A=[],f=[],p=K=0,le=R.length;K<le;p=++K){if($=R[p],u=d[p],$===65535){l.push(0),A.push(0);break}if($-(F=r[$].new)>=32768)for(l.push(0),A.push(2*(f.length+T-p)),i=j=$;$<=u?j<=u:j>=u;i=$<=u?++j:--j)f.push(r[i].new);else l.push(F-$),A.push(0)}for(L.writeUInt16(3),L.writeUInt16(1),L.writeUInt32(12),L.writeUInt16(4),L.writeUInt16(16+8*T+2*f.length),L.writeUInt16(0),L.writeUInt16(O),L.writeUInt16(I),L.writeUInt16(h),L.writeUInt16(E),ce=0,M=d.length;ce<M;ce++)i=d[ce],L.writeUInt16(i);for(L.writeUInt16(0),ge=0,V=R.length;ge<V;ge++)i=R[ge],L.writeUInt16(i);for(fe=0,H=l.length;fe<H;fe++)a=l[fe],L.writeUInt16(a);for(Se=0,J=A.length;Se<J;Se++)b=A[Se],L.writeUInt16(b);for(me=0,oe=f.length;me<oe;me++)m=f[me],L.writeUInt16(m);return{charMap:r,subtable:L.data,maxGlyphID:x+1}}},t}(),VK=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ec(t,Dl),t.prototype.tag="cmap",t.prototype.parse=function(e){var n,r,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=i?r<i:r>i;r=0<=i?++r:--r)n=new dB(e,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(e,n){var r,i;return n==null&&(n="macroman"),r=dB.encode(e,n),(i=new Jd).writeUInt16(0),i.writeUInt16(1),r.table=i.data.concat(r.subtable),r},t}(),Cwe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ec(t,Dl),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),Nwe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ec(t,Dl),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var n,r;for(r=[],n=0;n<10;++n)r.push(e.readByte());return r}(),this.charRange=function(){var n,r;for(r=[],n=0;n<4;++n)r.push(e.readInt());return r}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var n,r;for(r=[],n=0;n<2;n=++n)r.push(e.readInt());return r}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),Awe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ec(t,Dl),t.prototype.tag="post",t.prototype.parse=function(e){var n,r,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(r=e.readUInt16(),this.glyphNameIndex=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)n=e.readByte(),i.push(this.names.push(e.readString(n)));return i;case 151552:return r=e.readUInt16(),this.offsets=e.read(r);case 262144:return this.map=(function(){var o,a,l;for(l=[],s=o=0,a=this.file.maxp.numGlyphs;0<=a?o<a:o>a;s=0<=a?++o:--o)l.push(e.readUInt32());return l}).call(this)}},t}(),Iwe=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},_we=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ec(t,Dl),t.prototype.tag="name",t.prototype.parse=function(e){var n,r,i,s,o,a,l,c,u,d,h;for(e.pos=this.offset,e.readShort(),n=e.readShort(),a=e.readShort(),r=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)r.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+a+e.readShort()});for(l={},s=u=0,d=r.length;u<d;s=++u)i=r[s],e.pos=i.offset,c=e.readString(i.length),o=new Iwe(c,i),l[h=i.nameID]==null&&(l[h]=[]),l[i.nameID].push(o);this.strings=l,this.copyright=l[0],this.fontFamily=l[1],this.fontSubfamily=l[2],this.uniqueSubfamily=l[3],this.fontName=l[4],this.version=l[5];try{this.postscriptName=l[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=l[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=l[7],this.manufacturer=l[8],this.designer=l[9],this.description=l[10],this.vendorUrl=l[11],this.designerUrl=l[12],this.license=l[13],this.licenseUrl=l[14],this.preferredFamily=l[15],this.preferredSubfamily=l[17],this.compatibleFull=l[18],this.sampleText=l[19]},t}(),Ewe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ec(t,Dl),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),Twe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ec(t,Dl),t.prototype.tag="hmtx",t.prototype.parse=function(e){var n,r,i,s,o,a,l;for(e.pos=this.offset,this.metrics=[],n=0,a=this.file.hhea.numberOfMetrics;0<=a?n<a:n>a;n=0<=a?++n:--n)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var c,u;for(u=[],n=c=0;0<=i?c<i:c>i;n=0<=i?++c:--c)u.push(e.readInt16());return u}(),this.widths=(function(){var c,u,d,h;for(h=[],c=0,u=(d=this.metrics).length;c<u;c++)s=d[c],h.push(s.advance);return h}).call(this),r=this.widths[this.widths.length-1],l=[],n=o=0;0<=i?o<i:o>i;n=0<=i?++o:--o)l.push(this.widths.push(r));return l},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),WK=[].slice,$we=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ec(t,Dl),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var n,r,i,s,o,a,l,c,u,d;return e in this.cache?this.cache[e]:(s=this.file.loca,n=this.file.contents,r=s.indexOf(e),(i=s.lengthOf(e))===0?this.cache[e]=null:(n.pos=this.offset+r,o=(a=new Jd(n.read(i))).readShort(),c=a.readShort(),d=a.readShort(),l=a.readShort(),u=a.readShort(),this.cache[e]=o===-1?new Rwe(a,c,d,l,u):new Pwe(a,o,c,d,l,u),this.cache[e]))},t.prototype.encode=function(e,n,r){var i,s,o,a,l;for(o=[],s=[],a=0,l=n.length;a<l;a++)i=e[n[a]],s.push(o.length),i&&(o=o.concat(i.encode(r)));return s.push(o.length),{table:o,offsets:s}},t}(),Pwe=function(){function t(e,n,r,i,s,o){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),Rwe=function(){function t(e,n,r,i,s){var o,a;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new Jd(WK.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),Owe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ec(t,Dl),t.prototype.tag="loca",t.prototype.parse=function(e){var n,r;return e.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var i,s;for(s=[],r=0,i=this.length;r<i;r+=2)s.push(2*e.readUInt16());return s}).call(this):(function(){var i,s;for(s=[],r=0,i=this.length;r<i;r+=4)s.push(e.readUInt32());return s}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,n){for(var r=new Uint32Array(this.offsets.length),i=0,s=0,o=0;o<r.length;++o)if(r[o]=i,s<n.length&&n[s]==o){++s,r[o]=i;var a=this.offsets[o],l=this.offsets[o+1]-a;l>0&&(i+=l)}for(var c=new Array(4*r.length),u=0;u<r.length;++u)c[4*u+3]=255&r[u],c[4*u+2]=(65280&r[u])>>8,c[4*u+1]=(16711680&r[u])>>16,c[4*u]=(4278190080&r[u])>>24;return c},t}(),Dwe=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,s;for(n in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,s,o,a,l;for(i={},o=0,a=e.length;o<a;o++)i[s=e[o]]=this.font.glyf.glyphFor(s);for(s in n=[],i)(r=i[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in l=this.glyphsFor(n))r=l[s],i[s]=r;return i},t.prototype.encode=function(e,n){var r,i,s,o,a,l,c,u,d,h,f,p,m,y,g;for(i in r=VK.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),f={0:0},g=r.charMap)f[(l=g[i]).old]=l.new;for(p in h=r.maxGlyphID,o)p in f||(f[p]=h++);return u=function(v){var x,b;for(x in b={},v)b[v[x]]=x;return b}(f),d=Object.keys(u).sort(function(v,x){return v-x}),m=function(){var v,x,b;for(b=[],v=0,x=d.length;v<x;v++)a=d[v],b.push(u[a]);return b}(),s=this.font.glyf.encode(o,m,f),c=this.font.loca.encode(s.offsets,m),y={cmap:this.font.cmap.raw(),glyf:s.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(y["OS/2"]=this.font.os2.raw()),this.font.directory.encode(y)},t}();kt.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,s,o;if(Array.isArray(n))return"["+function(){var a,l,c;for(c=[],a=0,l=n.length;a<l;a++)r=n[a],c.push(e.convert(r));return c}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in s=["<<"],n)o=n[i],s.push("/"+i+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+n},e}();const Lwe=(t,e="ai-insights")=>{const n=["Category","Title","Value","Trend","Description"],r=t.map(l=>[l.category,l.title,l.value,l.trend,l.description]),i=[n.join(","),...r.map(l=>l.map(c=>`"${c}"`).join(","))].join(`
`),s=new Blob([i],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a"),a=URL.createObjectURL(s);o.setAttribute("href",a),o.setAttribute("download",`${e}-${new Date().toISOString().split("T")[0]}.csv`),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o)},Mwe=(t,e="ai-insights")=>{const n=new kt,r=n.internal.pageSize.getWidth(),i=n.internal.pageSize.getHeight();let s=20;n.setFontSize(20),n.setTextColor(40,40,40),n.text("AI Insights Dashboard Report",r/2,s,{align:"center"}),s+=15,n.setFontSize(10),n.setTextColor(100,100,100),n.text(`Generated on: ${new Date().toLocaleDateString()}`,r/2,s,{align:"center"}),s+=20,n.setFontSize(14),n.setTextColor(40,40,40),n.text("Summary Statistics",20,s),s+=10;const o=t.length,a=t.reduce((c,u)=>c+(u.trend||0),0)/t.length,l=t.filter(c=>(c.trend||0)>0).length;n.setFontSize(10),n.text(`Total Insights: ${o}`,20,s),s+=6,n.text(`Average Trend: ${a.toFixed(1)}%`,20,s),s+=6,n.text(`Positive Trends: ${l}`,20,s),s+=15,n.setFontSize(14),n.setTextColor(40,40,40),n.text("Detailed Insights",20,s),s+=10,n.setFillColor(240,240,240),n.rect(20,s,r-40,8,"F"),n.setFontSize(10),n.setTextColor(40,40,40),n.text("Category",22,s+6),n.text("Title",60,s+6),n.text("Value",120,s+6),n.text("Trend",150,s+6),s+=12,t.forEach((c,u)=>{s>i-20&&(n.addPage(),s=20),u%2===0&&(n.setFillColor(250,250,250),n.rect(20,s-4,r-40,8,"F")),n.setTextColor(40,40,40),n.text(c.category.charAt(0).toUpperCase()+c.category.slice(1),22,s),n.text(c.title,60,s),n.text(String(c.value),120,s);const d=c.trend||0;d>0?n.setTextColor(34,197,94):d<0?n.setTextColor(239,68,68):n.setTextColor(100,100,100),n.text(`${d>0?"+":""}${d}%`,150,s),s+=8}),s+=10,n.setFontSize(8),n.setTextColor(150,150,150),n.text("Generated by Mbarie FMS AI Dashboard",r/2,i-10,{align:"center"}),n.save(`${e}-${new Date().toISOString().split("T")[0]}.pdf`)},Fwe=({title:t="AI Insights Dashboard",range:e="week",onRangeChange:n,onRefresh:r,insights:i=[],isLive:s=!1})=>{const o=[{value:"today",label:"Today"},{value:"week",label:"This Week"},{value:"month",label:"This Month"},{value:"custom",label:"Custom"}],a=()=>{i.length>0&&Mwe(i)},l=()=>{i.length>0&&Lwe(i)},c=i.length,u=i.filter(f=>f.category==="workflow"&&typeof f.value=="string").map(f=>{const p=f.value.toString().match(/(\d+(\.\d+)?)/);return p?parseFloat(p[1]):0}).filter(f=>!isNaN(f)).reduce((f,p,m,y)=>f+p/y.length,0)||87,d=i.filter(f=>(f.trend||0)>0).length,h=i.filter(f=>(f.trend||0)<-10).length;return k.jsxs(ml.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.3},className:"glass-card p-6 rounded-xl border border-white/10 backdrop-blur-sm mb-6",children:[k.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[k.jsxs("div",{className:"flex items-center space-x-4",children:[k.jsxs("div",{className:"relative",children:[k.jsx("div",{className:"w-3 h-3 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full animate-pulse"}),k.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full animate-ping opacity-75"})]}),k.jsxs("div",{children:[k.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t}),k.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Real-time AI-powered operational insights and analytics"})]})]}),k.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center space-y-3 sm:space-y-0 sm:space-x-4",children:[s&&k.jsxs("div",{className:"flex items-center space-x-2 bg-emerald-500/10 border border-emerald-500/20 text-emerald-600 dark:text-emerald-400 px-3 py-1 rounded-full",children:[k.jsx(u1e,{className:"w-2 h-2 fill-emerald-500 animate-pulse"}),k.jsx("span",{className:"text-xs font-medium",children:"LIVE DATA"})]}),k.jsxs("div",{className:"flex items-center space-x-2",children:[k.jsx(o1e,{className:"w-4 h-4 text-gray-500"}),k.jsx("select",{value:e,onChange:f=>n==null?void 0:n(f.target.value),className:"bg-white/50 dark:bg-gray-800/50 border border-gray-200 dark:border-gray-700 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:o.map(f=>k.jsx("option",{value:f.value,children:f.label},f.value))})]}),k.jsxs("div",{className:"relative group",children:[k.jsxs("button",{className:"flex items-center space-x-2 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 px-3 py-2 rounded-lg transition-colors duration-200",children:[k.jsx(h1e,{className:"w-4 h-4"}),k.jsx("span",{className:"text-sm font-medium",children:"Export"})]}),k.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-10",children:k.jsxs("div",{className:"py-1",children:[k.jsx("button",{onClick:a,disabled:i.length===0,className:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Export as PDF"}),k.jsx("button",{onClick:l,disabled:i.length===0,className:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Export as CSV"})]})})]}),k.jsxs("button",{onClick:r,className:"flex items-center space-x-2 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-colors duration-200",children:[k.jsx(RH,{className:"w-4 h-4"}),k.jsx("span",{className:"text-sm font-medium",children:"Refresh"})]}),k.jsx("button",{className:"flex items-center space-x-2 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 px-3 py-2 rounded-lg transition-colors duration-200",children:k.jsx(k1e,{className:"w-4 h-4"})})]})]}),k.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:[k.jsxs("div",{className:"text-center",children:[k.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c}),k.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Active Insights"})]}),k.jsxs("div",{className:"text-center",children:[k.jsxs("div",{className:"text-2xl font-bold text-emerald-500",children:[u.toFixed(0),"%"]}),k.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Avg. Efficiency"})]}),k.jsxs("div",{className:"text-center",children:[k.jsx("div",{className:"text-2xl font-bold text-blue-500",children:d}),k.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Trending Up"})]}),k.jsxs("div",{className:"text-center",children:[k.jsx("div",{className:"text-2xl font-bold text-rose-500",children:h}),k.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Needs Attention"})]})]})]})},jwe=({title:t,value:e,icon:n,trend:r,color:i="blue"})=>{const s=()=>r?r>0?k.jsx(DH,{className:"w-4 h-4 text-emerald-500"}):r<0?k.jsx(OH,{className:"w-4 h-4 text-rose-500"}):k.jsx(PH,{className:"w-4 h-4 text-gray-500"}):null,o=()=>r?r>0?"text-emerald-500":r<0?"text-rose-500":"text-gray-500":"text-gray-500",a=()=>k.jsx("div",{className:`w-12 h-12 rounded-full bg-${i}-500/10 flex items-center justify-center`,children:k.jsx("div",{className:`w-6 h-6 bg-${i}-500 rounded-full`})});return k.jsxs(ml.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"glass-card p-6 rounded-xl border border-white/10 backdrop-blur-sm",children:[k.jsxs("div",{className:"flex items-start justify-between mb-4",children:[k.jsxs("div",{className:"flex-1",children:[k.jsx("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:t}),k.jsxs("div",{className:"flex items-baseline space-x-2",children:[k.jsx("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e}),r!==void 0&&k.jsxs("div",{className:"flex items-center space-x-1",children:[s(),k.jsxs("span",{className:`text-sm font-medium ${o()}`,children:[Math.abs(r),"%"]})]})]})]}),n&&a()]}),r!==void 0&&k.jsx("div",{className:"mt-2",children:k.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:k.jsx("div",{className:`h-2 rounded-full ${r>0?"bg-emerald-500":r<0?"bg-rose-500":"bg-gray-500"}`,style:{width:`${Math.min(Math.abs(r),100)}%`}})})})]})};var Bwe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function f4(t){if(typeof t!="string")return!1;var e=Bwe;return e.includes(t)}var zwe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function GK(t){if(typeof t!="string")return!1;var e=zwe;return e.includes(t)}function qK(t){return typeof t=="string"&&t.startsWith("data-")}function Yo(t){var e=Object.entries(t).filter(n=>{var[r]=n;return GK(r)||qK(r)});return Object.fromEntries(e)}function Zf(t){if(t==null)return null;if(N.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return Yo(e)}return typeof t=="object"&&!Array.isArray(t)?Yo(t):null}function Zs(t){var e=Object.entries(t).filter(n=>{var[r]=n;return GK(r)||qK(r)||f4(r)});return Object.fromEntries(e)}function Uwe(t){return t==null?null:N.isValidElement(t)?Zs(t.props):typeof t=="object"&&!Array.isArray(t)?Zs(t):null}var Vwe=["children","width","height","viewBox","className","style","title","desc"];function ET(){return ET=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ET.apply(null,arguments)}function Wwe(t,e){if(t==null)return{};var n,r,i=Gwe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Gwe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var HK=N.forwardRef((t,e)=>{var{children:n,width:r,height:i,viewBox:s,className:o,style:a,title:l,desc:c}=t,u=Wwe(t,Vwe),d=s||{width:r,height:i,x:0,y:0},h=yn("recharts-surface",o);return N.createElement("svg",ET({},Zs(u),{className:h,width:r,height:i,style:a,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height),ref:e}),N.createElement("title",null,l),N.createElement("desc",null,c),n)}),qwe=["children","className"];function TT(){return TT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},TT.apply(null,arguments)}function Hwe(t,e){if(t==null)return{};var n,r,i=Kwe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Kwe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var is=N.forwardRef((t,e)=>{var{children:n,className:r}=t,i=Hwe(t,qwe),s=yn("recharts-layer",r);return N.createElement("g",TT({className:s},Zs(i),{ref:e}),n)}),Xwe=N.createContext(null);function Kn(t){return function(){return t}}const KK=Math.cos,Ik=Math.sin,Ll=Math.sqrt,_k=Math.PI,bC=2*_k,$T=Math.PI,PT=2*$T,lf=1e-6,Ywe=PT-lf;function XK(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Zwe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return XK;const n=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Jwe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?XK:Zwe(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,s,o){this._append`C${+e},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(e,n,r,i,s){if(e=+e,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,l=r-e,c=i-n,u=o-e,d=a-n,h=u*u+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(h>lf)if(!(Math.abs(d*l-c*u)>lf)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let f=r-o,p=i-a,m=l*l+c*c,y=f*f+p*p,g=Math.sqrt(m),v=Math.sqrt(h),x=s*Math.tan(($T-Math.acos((m+h-y)/(2*g*v)))/2),b=x/v,S=x/g;Math.abs(b-1)>lf&&this._append`L${e+b*u},${n+b*d}`,this._append`A${s},${s},0,0,${+(d*f>u*p)},${this._x1=e+S*l},${this._y1=n+S*c}`}}arc(e,n,r,i,s,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),l=r*Math.sin(i),c=e+a,u=n+l,d=1^o,h=o?i-s:s-i;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>lf||Math.abs(this._y1-u)>lf)&&this._append`L${c},${u}`,r&&(h<0&&(h=h%PT+PT),h>Ywe?this._append`A${r},${r},0,1,${d},${e-a},${n-l}A${r},${r},0,1,${d},${this._x1=c},${this._y1=u}`:h>lf&&this._append`A${r},${r},0,${+(h>=$T)},${d},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function p4(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new Jwe(e)}function m4(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function YK(t){this._context=t}YK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function wC(t){return new YK(t)}function ZK(t){return t[0]}function JK(t){return t[1]}function QK(t,e){var n=Kn(!0),r=null,i=wC,s=null,o=p4(a);t=typeof t=="function"?t:t===void 0?ZK:Kn(t),e=typeof e=="function"?e:e===void 0?JK:Kn(e);function a(l){var c,u=(l=m4(l)).length,d,h=!1,f;for(r==null&&(s=i(f=o())),c=0;c<=u;++c)!(c<u&&n(d=l[c],c,l))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+t(d,c,l),+e(d,c,l));if(f)return s=null,f+""||null}return a.x=function(l){return arguments.length?(t=typeof l=="function"?l:Kn(+l),a):t},a.y=function(l){return arguments.length?(e=typeof l=="function"?l:Kn(+l),a):e},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:Kn(!!l),a):n},a.curve=function(l){return arguments.length?(i=l,r!=null&&(s=i(r)),a):i},a.context=function(l){return arguments.length?(l==null?r=s=null:s=i(r=l),a):r},a}function Tw(t,e,n){var r=null,i=Kn(!0),s=null,o=wC,a=null,l=p4(c);t=typeof t=="function"?t:t===void 0?ZK:Kn(+t),e=typeof e=="function"?e:Kn(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?JK:Kn(+n);function c(d){var h,f,p,m=(d=m4(d)).length,y,g=!1,v,x=new Array(m),b=new Array(m);for(s==null&&(a=o(v=l())),h=0;h<=m;++h){if(!(h<m&&i(y=d[h],h,d))===g)if(g=!g)f=h,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=h-1;p>=f;--p)a.point(x[p],b[p]);a.lineEnd(),a.areaEnd()}g&&(x[h]=+t(y,h,d),b[h]=+e(y,h,d),a.point(r?+r(y,h,d):x[h],n?+n(y,h,d):b[h]))}if(v)return a=null,v+""||null}function u(){return QK().defined(i).curve(o).context(s)}return c.x=function(d){return arguments.length?(t=typeof d=="function"?d:Kn(+d),r=null,c):t},c.x0=function(d){return arguments.length?(t=typeof d=="function"?d:Kn(+d),c):t},c.x1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:Kn(+d),c):r},c.y=function(d){return arguments.length?(e=typeof d=="function"?d:Kn(+d),n=null,c):e},c.y0=function(d){return arguments.length?(e=typeof d=="function"?d:Kn(+d),c):e},c.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:Kn(+d),c):n},c.lineX0=c.lineY0=function(){return u().x(t).y(e)},c.lineY1=function(){return u().x(t).y(n)},c.lineX1=function(){return u().x(r).y(e)},c.defined=function(d){return arguments.length?(i=typeof d=="function"?d:Kn(!!d),c):i},c.curve=function(d){return arguments.length?(o=d,s!=null&&(a=o(s)),c):o},c.context=function(d){return arguments.length?(d==null?s=a=null:a=o(s=d),c):s},c}class eX{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function Qwe(t){return new eX(t,!0)}function e2e(t){return new eX(t,!1)}const g4={draw(t,e){const n=Ll(e/_k);t.moveTo(n,0),t.arc(0,0,n,0,bC)}},t2e={draw(t,e){const n=Ll(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},tX=Ll(1/3),n2e=tX*2,r2e={draw(t,e){const n=Ll(e/n2e),r=n*tX;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},i2e={draw(t,e){const n=Ll(e),r=-n/2;t.rect(r,r,n,n)}},s2e=.8908130915292852,nX=Ik(_k/10)/Ik(7*_k/10),o2e=Ik(bC/10)*nX,a2e=-KK(bC/10)*nX,l2e={draw(t,e){const n=Ll(e*s2e),r=o2e*n,i=a2e*n;t.moveTo(0,-n),t.lineTo(r,i);for(let s=1;s<5;++s){const o=bC*s/5,a=KK(o),l=Ik(o);t.lineTo(l*n,-a*n),t.lineTo(a*r-l*i,l*r+a*i)}t.closePath()}},XI=Ll(3),c2e={draw(t,e){const n=-Ll(e/(XI*3));t.moveTo(0,n*2),t.lineTo(-XI*n,-n),t.lineTo(XI*n,-n),t.closePath()}},ma=-.5,ga=Ll(3)/2,RT=1/Ll(12),u2e=(RT/2+1)*3,d2e={draw(t,e){const n=Ll(e/u2e),r=n/2,i=n*RT,s=r,o=n*RT+n,a=-s,l=o;t.moveTo(r,i),t.lineTo(s,o),t.lineTo(a,l),t.lineTo(ma*r-ga*i,ga*r+ma*i),t.lineTo(ma*s-ga*o,ga*s+ma*o),t.lineTo(ma*a-ga*l,ga*a+ma*l),t.lineTo(ma*r+ga*i,ma*i-ga*r),t.lineTo(ma*s+ga*o,ma*o-ga*s),t.lineTo(ma*a+ga*l,ma*l-ga*a),t.closePath()}};function h2e(t,e){let n=null,r=p4(i);t=typeof t=="function"?t:Kn(t||g4),e=typeof e=="function"?e:Kn(e===void 0?64:+e);function i(){let s;if(n||(n=s=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(t=typeof s=="function"?s:Kn(s),i):t},i.size=function(s){return arguments.length?(e=typeof s=="function"?s:Kn(+s),i):e},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function Ek(){}function Tk(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function rX(t){this._context=t}rX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Tk(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Tk(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function f2e(t){return new rX(t)}function iX(t){this._context=t}iX.prototype={areaStart:Ek,areaEnd:Ek,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Tk(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function p2e(t){return new iX(t)}function sX(t){this._context=t}sX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Tk(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function m2e(t){return new sX(t)}function oX(t){this._context=t}oX.prototype={areaStart:Ek,areaEnd:Ek,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function g2e(t){return new oX(t)}function hB(t){return t<0?-1:1}function fB(t,e,n){var r=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(hB(s)+hB(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function pB(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function YI(t,e,n){var r=t._x0,i=t._y0,s=t._x1,o=t._y1,a=(s-r)/3;t._context.bezierCurveTo(r+a,i+a*e,s-a,o-a*n,s,o)}function $k(t){this._context=t}$k.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:YI(this,this._t0,pB(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,YI(this,pB(this,n=fB(this,t,e)),n);break;default:YI(this,this._t0,n=fB(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function aX(t){this._context=new lX(t)}(aX.prototype=Object.create($k.prototype)).point=function(t,e){$k.prototype.point.call(this,e,t)};function lX(t){this._context=t}lX.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,s){this._context.bezierCurveTo(e,t,r,n,s,i)}};function y2e(t){return new $k(t)}function v2e(t){return new aX(t)}function cX(t){this._context=t}cX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=mB(t),i=mB(e),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function mB(t){var e,n=t.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/s[e-1],s[e]-=r,o[e]-=r*o[e-1];for(i[n-1]=o[n-1]/s[n-1],e=n-2;e>=0;--e)i[e]=(o[e]-i[e+1])/s[e];for(s[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function x2e(t){return new cX(t)}function kC(t,e){this._context=t,this._t=e}kC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function b2e(t){return new kC(t,.5)}function w2e(t){return new kC(t,0)}function k2e(t){return new kC(t,1)}function ug(t,e){if((o=t.length)>1)for(var n=1,r,i,s=t[e[0]],o,a=s.length;n<o;++n)for(i=s,s=t[e[n]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function OT(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function S2e(t,e){return t[e]}function C2e(t){const e=[];return e.key=t,e}function N2e(){var t=Kn([]),e=OT,n=ug,r=S2e;function i(s){var o=Array.from(t.apply(this,arguments),C2e),a,l=o.length,c=-1,u;for(const d of s)for(a=0,++c;a<l;++a)(o[a][c]=[0,+r(d,o[a].key,c,s)]).data=d;for(a=0,u=m4(e(o));a<l;++a)o[u[a]].index=a;return n(o,u),o}return i.keys=function(s){return arguments.length?(t=typeof s=="function"?s:Kn(Array.from(s)),i):t},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:Kn(+s),i):r},i.order=function(s){return arguments.length?(e=s==null?OT:typeof s=="function"?s:Kn(Array.from(s)),i):e},i.offset=function(s){return arguments.length?(n=s??ug,i):n},i}function A2e(t,e){if((r=t.length)>0){for(var n,r,i=0,s=t[0].length,o;i<s;++i){for(o=n=0;n<r;++n)o+=t[n][i][1]||0;if(o)for(n=0;n<r;++n)t[n][i][1]/=o}ug(t,e)}}function I2e(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,s=r.length;n<s;++n){for(var o=0,a=0;o<i;++o)a+=t[o][n][1]||0;r[n][1]+=r[n][0]=-a/2}ug(t,e)}}function _2e(t,e){if(!(!((o=t.length)>0)||!((s=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,s,o;r<s;++r){for(var a=0,l=0,c=0;a<o;++a){for(var u=t[e[a]],d=u[r][1]||0,h=u[r-1][1]||0,f=(d-h)/2,p=0;p<a;++p){var m=t[e[p]],y=m[r][1]||0,g=m[r-1][1]||0;f+=y-g}l+=d,c+=f*d}i[r-1][1]+=i[r-1][0]=n,l&&(n-=c/l)}i[r-1][1]+=i[r-1][0]=n,ug(t,e)}}var SC={},uX={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(uX);var y4={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(y4);var CC={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var r;return typeof n=="string"||typeof n=="symbol"?n:Object.is((r=n==null?void 0:n.valueOf)==null?void 0:r.call(n),-0)?"-0":String(n)}t.toKey=e})(CC);var NC={},dX={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(e).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}t.toString=e})(dX);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=dX,n=CC;function r(i){if(Array.isArray(i))return i.map(n.toKey);if(typeof i=="symbol")return[i];i=e.toString(i);const s=[],o=i.length;if(o===0)return s;let a=0,l="",c="",u=!1;for(i.charCodeAt(0)===46&&(s.push(""),a++);a<o;){const d=i[a];c?d==="\\"&&a+1<o?(a++,l+=i[a]):d===c?c="":l+=d:u?d==='"'||d==="'"?c=d:d==="]"?(u=!1,s.push(l),l=""):l+=d:d==="["?(u=!0,l&&(s.push(l),l="")):d==="."?l&&(s.push(l),l=""):l+=d,a++}return l&&s.push(l),s}t.toPath=r})(NC);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=uX,n=y4,r=CC,i=NC;function s(a,l,c){if(a==null)return c;switch(typeof l){case"string":{if(e.isUnsafeProperty(l))return c;const u=a[l];return u===void 0?n.isDeepKey(l)?s(a,i.toPath(l),c):c:u}case"number":case"symbol":{typeof l=="number"&&(l=r.toKey(l));const u=a[l];return u===void 0?c:u}default:{if(Array.isArray(l))return o(a,l,c);if(Object.is(l==null?void 0:l.valueOf(),-0)?l="-0":l=String(l),e.isUnsafeProperty(l))return c;const u=a[l];return u===void 0?c:u}}}function o(a,l,c){if(l.length===0)return c;let u=a;for(let d=0;d<l.length;d++){if(u==null||e.isUnsafeProperty(l[d]))return c;u=u[l[d]]}return u===void 0?c:u}t.get=s})(SC);var E2e=SC.get;const Jf=Ic(E2e);var ji=t=>t===0?0:t>0?1:-1,za=t=>typeof t=="number"&&t!=+t,wu=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,St=t=>(typeof t=="number"||t instanceof Number)&&!za(t),kc=t=>St(t)||typeof t=="string",T2e=0,U1=t=>{var e=++T2e;return"".concat(t||"").concat(e)},Es=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!St(e)&&typeof e!="string")return r;var s;if(wu(e)){if(n==null)return r;var o=e.indexOf("%");s=n*parseFloat(e.slice(0,o))/100}else s=+e;return za(s)&&(s=r),i&&n!=null&&s>n&&(s=n),s},hX=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[t[r]])n[t[r]]=!0;else return!0;return!1};function $r(t,e,n){return St(t)&&St(e)?t+n*(e-t):e}function fX(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):Jf(r,e))===n)}var mr=t=>t===null||typeof t>"u",Iv=t=>mr(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1)),$2e=["type","size","sizeType"];function DT(){return DT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},DT.apply(null,arguments)}function gB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gB(Object(n),!0).forEach(function(r){P2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function P2e(t,e,n){return(e=R2e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function R2e(t){var e=O2e(t,"string");return typeof e=="symbol"?e:e+""}function O2e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function D2e(t,e){if(t==null)return{};var n,r,i=L2e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function L2e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var pX={symbolCircle:g4,symbolCross:t2e,symbolDiamond:r2e,symbolSquare:i2e,symbolStar:l2e,symbolTriangle:c2e,symbolWye:d2e},M2e=Math.PI/180,F2e=t=>{var e="symbol".concat(Iv(t));return pX[e]||g4},j2e=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var r=18*M2e;return 1.25*t*t*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},B2e=(t,e)=>{pX["symbol".concat(Iv(t))]=e},mX=t=>{var{type:e="circle",size:n=64,sizeType:r="area"}=t,i=D2e(t,$2e),s=yB(yB({},i),{},{type:e,size:n,sizeType:r}),o="circle";typeof e=="string"&&(o=e);var a=()=>{var h=F2e(o),f=h2e().type(h).size(j2e(n,r,o)),p=f();if(p!==null)return p},{className:l,cx:c,cy:u}=s,d=Zs(s);return c===+c&&u===+u&&n===+n?N.createElement("path",DT({},d,{className:yn("recharts-symbols",l),transform:"translate(".concat(c,", ").concat(u,")"),d:a()})):null};mX.registerSymbol=B2e;var v4=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(N.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{f4(i)&&(r[i]=e||(s=>n[i](n,s)))}),r},z2e=(t,e,n)=>r=>(t(e,n,r),null),AC=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(i=>{var s=t[i];f4(i)&&typeof s=="function"&&(r||(r={}),r[i]=z2e(s,e,n))}),r},gX={},yX={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const i=new Map;for(let s=0;s<n.length;s++){const o=n[s],a=r(o);i.has(a)||i.set(a,o)}return Array.from(i.values())}t.uniqBy=e})(yX);var x4={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(x4);var vX={},IC={},xX={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(xX);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=xX;function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n})(IC);var bX={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(bX);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=IC,n=bX;function r(i){return n.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=r})(vX);var wX={},kX={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=SC;function n(r){return function(i){return e.get(i,r)}}t.property=n})(kX);var SX={},b4={},CX={},w4={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(w4);var k4={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(k4);var S4={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.eq=e})(S4);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=w4,n=k4,r=S4;function i(u,d,h){return typeof h!="function"?i(u,d,()=>{}):s(u,d,function f(p,m,y,g,v,x){const b=h(p,m,y,g,v,x);return b!==void 0?!!b:s(p,m,f,x)},new Map)}function s(u,d,h,f){if(d===u)return!0;switch(typeof d){case"object":return o(u,d,h,f);case"function":return Object.keys(d).length>0?s(u,{...d},h,f):r.eq(u,d);default:return e.isObject(u)?typeof d=="string"?d==="":!0:r.eq(u,d)}}function o(u,d,h,f){if(d==null)return!0;if(Array.isArray(d))return l(u,d,h,f);if(d instanceof Map)return a(u,d,h,f);if(d instanceof Set)return c(u,d,h,f);const p=Object.keys(d);if(u==null)return p.length===0;if(p.length===0)return!0;if(f!=null&&f.has(d))return f.get(d)===u;f==null||f.set(d,u);try{for(let m=0;m<p.length;m++){const y=p[m];if(!n.isPrimitive(u)&&!(y in u)||d[y]===void 0&&u[y]!==void 0||d[y]===null&&u[y]!==null||!h(u[y],d[y],y,u,d,f))return!1}return!0}finally{f==null||f.delete(d)}}function a(u,d,h,f){if(d.size===0)return!0;if(!(u instanceof Map))return!1;for(const[p,m]of d.entries()){const y=u.get(p);if(h(y,m,p,u,d,f)===!1)return!1}return!0}function l(u,d,h,f){if(d.length===0)return!0;if(!Array.isArray(u))return!1;const p=new Set;for(let m=0;m<d.length;m++){const y=d[m];let g=!1;for(let v=0;v<u.length;v++){if(p.has(v))continue;const x=u[v];let b=!1;if(h(x,y,m,u,d,f)&&(b=!0),b){p.add(v),g=!0;break}}if(!g)return!1}return!0}function c(u,d,h,f){return d.size===0?!0:u instanceof Set?l([...u],[...d],h,f):!1}t.isMatchWith=i,t.isSetMatch=c})(CX);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=CX;function n(r,i){return e.isMatchWith(r,i,()=>{})}t.isMatch=n})(b4);var NX={},C4={},AX={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e})(AX);var N4={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(N4);var A4={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",s="[object Arguments]",o="[object Symbol]",a="[object Date]",l="[object Map]",c="[object Set]",u="[object Array]",d="[object Function]",h="[object ArrayBuffer]",f="[object Object]",p="[object Error]",m="[object DataView]",y="[object Uint8Array]",g="[object Uint8ClampedArray]",v="[object Uint16Array]",x="[object Uint32Array]",b="[object BigUint64Array]",S="[object Int8Array]",A="[object Int16Array]",E="[object Int32Array]",I="[object BigInt64Array]",T="[object Float32Array]",O="[object Float64Array]";t.argumentsTag=s,t.arrayBufferTag=h,t.arrayTag=u,t.bigInt64ArrayTag=I,t.bigUint64ArrayTag=b,t.booleanTag=i,t.dataViewTag=m,t.dateTag=a,t.errorTag=p,t.float32ArrayTag=T,t.float64ArrayTag=O,t.functionTag=d,t.int16ArrayTag=A,t.int32ArrayTag=E,t.int8ArrayTag=S,t.mapTag=l,t.numberTag=r,t.objectTag=f,t.regexpTag=e,t.setTag=c,t.stringTag=n,t.symbolTag=o,t.uint16ArrayTag=v,t.uint32ArrayTag=x,t.uint8ArrayTag=y,t.uint8ClampedArrayTag=g})(A4);var IX={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(IX);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=AX,n=N4,r=A4,i=k4,s=IX;function o(u,d){return a(u,void 0,u,new Map,d)}function a(u,d,h,f=new Map,p=void 0){const m=p==null?void 0:p(u,d,h,f);if(m!==void 0)return m;if(i.isPrimitive(u))return u;if(f.has(u))return f.get(u);if(Array.isArray(u)){const y=new Array(u.length);f.set(u,y);for(let g=0;g<u.length;g++)y[g]=a(u[g],g,h,f,p);return Object.hasOwn(u,"index")&&(y.index=u.index),Object.hasOwn(u,"input")&&(y.input=u.input),y}if(u instanceof Date)return new Date(u.getTime());if(u instanceof RegExp){const y=new RegExp(u.source,u.flags);return y.lastIndex=u.lastIndex,y}if(u instanceof Map){const y=new Map;f.set(u,y);for(const[g,v]of u)y.set(g,a(v,g,h,f,p));return y}if(u instanceof Set){const y=new Set;f.set(u,y);for(const g of u)y.add(a(g,void 0,h,f,p));return y}if(typeof Buffer<"u"&&Buffer.isBuffer(u))return u.subarray();if(s.isTypedArray(u)){const y=new(Object.getPrototypeOf(u)).constructor(u.length);f.set(u,y);for(let g=0;g<u.length;g++)y[g]=a(u[g],g,h,f,p);return y}if(u instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&u instanceof SharedArrayBuffer)return u.slice(0);if(u instanceof DataView){const y=new DataView(u.buffer.slice(0),u.byteOffset,u.byteLength);return f.set(u,y),l(y,u,h,f,p),y}if(typeof File<"u"&&u instanceof File){const y=new File([u],u.name,{type:u.type});return f.set(u,y),l(y,u,h,f,p),y}if(typeof Blob<"u"&&u instanceof Blob){const y=new Blob([u],{type:u.type});return f.set(u,y),l(y,u,h,f,p),y}if(u instanceof Error){const y=new u.constructor;return f.set(u,y),y.message=u.message,y.name=u.name,y.stack=u.stack,y.cause=u.cause,l(y,u,h,f,p),y}if(u instanceof Boolean){const y=new Boolean(u.valueOf());return f.set(u,y),l(y,u,h,f,p),y}if(u instanceof Number){const y=new Number(u.valueOf());return f.set(u,y),l(y,u,h,f,p),y}if(u instanceof String){const y=new String(u.valueOf());return f.set(u,y),l(y,u,h,f,p),y}if(typeof u=="object"&&c(u)){const y=Object.create(Object.getPrototypeOf(u));return f.set(u,y),l(y,u,h,f,p),y}return u}function l(u,d,h=u,f,p){const m=[...Object.keys(d),...e.getSymbols(d)];for(let y=0;y<m.length;y++){const g=m[y],v=Object.getOwnPropertyDescriptor(u,g);(v==null||v.writable)&&(u[g]=a(d[g],g,h,f,p))}}function c(u){switch(n.getTag(u)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=o,t.cloneDeepWithImpl=a,t.copyProperties=l})(C4);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=C4;function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n})(NX);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=b4,n=NX;function r(i){return i=n.cloneDeep(i),s=>e.isMatch(s,i)}t.matches=r})(SX);var _X={},EX={},TX={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=C4,n=A4;function r(i,s){return e.cloneDeepWith(i,(o,a,l,c)=>{const u=s==null?void 0:s(o,a,l,c);if(u!==void 0)return u;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const d=new i.constructor(i==null?void 0:i.valueOf());return e.copyProperties(d,i),d}case n.argumentsTag:{const d={};return e.copyProperties(d,i),d.length=i.length,d[Symbol.iterator]=i[Symbol.iterator],d}default:return}})}t.cloneDeepWith=r})(TX);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=TX;function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n})(EX);var $X={},I4={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n})(I4);var PX={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=N4;function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n})(PX);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=y4,n=I4,r=PX,i=NC;function s(o,a){let l;if(Array.isArray(a)?l=a:typeof a=="string"&&e.isDeepKey(a)&&(o==null?void 0:o[a])==null?l=i.toPath(a):l=[a],l.length===0)return!1;let c=o;for(let u=0;u<l.length;u++){const d=l[u];if((c==null||!Object.hasOwn(c,d))&&!((Array.isArray(c)||r.isArguments(c))&&n.isIndex(d)&&d<c.length))return!1;c=c[d]}return!0}t.has=s})($X);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=b4,n=CC,r=EX,i=SC,s=$X;function o(a,l){switch(typeof a){case"object":{Object.is(a==null?void 0:a.valueOf(),-0)&&(a="-0");break}case"number":{a=n.toKey(a);break}}return l=r.cloneDeep(l),function(c){const u=i.get(c,a);return u===void 0?s.has(c,a):l===void 0?u===void 0:e.isMatch(u,l)}}t.matchesProperty=o})(_X);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=x4,n=kX,r=SX,i=_X;function s(o){if(o==null)return e.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?i.matchesProperty(o[0],o[1]):r.matches(o);case"string":case"symbol":case"number":return n.property(o)}}t.iteratee=s})(wX);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=yX,n=x4,r=vX,i=wX;function s(o,a=n.identity){return r.isArrayLikeObject(o)?e.uniqBy(Array.from(o),i.iteratee(a)):[]}t.uniqBy=s})(gX);var U2e=gX.uniqBy;const vB=Ic(U2e);function V2e(t,e,n){return e===!0?vB(t,n):typeof e=="function"?vB(t,e):t}var RX={exports:{}},OX={},DX={exports:{}},LX={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dg=N;function W2e(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var G2e=typeof Object.is=="function"?Object.is:W2e,q2e=dg.useState,H2e=dg.useEffect,K2e=dg.useLayoutEffect,X2e=dg.useDebugValue;function Y2e(t,e){var n=e(),r=q2e({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return K2e(function(){i.value=n,i.getSnapshot=e,ZI(i)&&s({inst:i})},[t,n,e]),H2e(function(){return ZI(i)&&s({inst:i}),t(function(){ZI(i)&&s({inst:i})})},[t]),X2e(n),n}function ZI(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!G2e(t,n)}catch{return!0}}function Z2e(t,e){return e()}var J2e=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Z2e:Y2e;LX.useSyncExternalStore=dg.useSyncExternalStore!==void 0?dg.useSyncExternalStore:J2e;DX.exports=LX;var Q2e=DX.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _C=N,eke=Q2e;function tke(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var nke=typeof Object.is=="function"?Object.is:tke,rke=eke.useSyncExternalStore,ike=_C.useRef,ske=_C.useEffect,oke=_C.useMemo,ake=_C.useDebugValue;OX.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=ike(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=oke(function(){function l(f){if(!c){if(c=!0,u=f,f=r(f),i!==void 0&&o.hasValue){var p=o.value;if(i(p,f))return d=p}return d=f}if(p=d,nke(u,f))return p;var m=r(f);return i!==void 0&&i(p,m)?(u=f,p):(u=f,d=m)}var c=!1,u,d,h=n===void 0?null:n;return[function(){return l(e())},h===null?void 0:function(){return l(h())}]},[e,n,r,i]);var a=rke(t,s[0],s[1]);return ske(function(){o.hasValue=!0,o.value=a},[a]),ake(a),a};RX.exports=OX;var lke=RX.exports,_4=N.createContext(null),cke=t=>t,Lr=()=>{var t=N.useContext(_4);return t?t.store.dispatch:cke},F2=()=>{},uke=()=>F2,dke=(t,e)=>t===e;function gt(t){var e=N.useContext(_4);return lke.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:uke,e?e.store.getState:F2,e?e.store.getState:F2,e?t:F2,dke)}function hke(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function fke(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function pke(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var xB=t=>Array.isArray(t)?t:[t];function mke(t){const e=Array.isArray(t[0])?t[0]:t;return pke(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function gke(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var yke=class{constructor(t){this.value=t}deref(){return this.value}},vke=typeof WeakRef<"u"?WeakRef:yke,xke=0,bB=1;function $w(){return{s:xke,v:void 0,o:null,p:null}}function MX(t,e={}){let n=$w();const{resultEqualityCheck:r}=e;let i,s=0;function o(){var d;let a=n;const{length:l}=arguments;for(let h=0,f=l;h<f;h++){const p=arguments[h];if(typeof p=="function"||typeof p=="object"&&p!==null){let m=a.o;m===null&&(a.o=m=new WeakMap);const y=m.get(p);y===void 0?(a=$w(),m.set(p,a)):a=y}else{let m=a.p;m===null&&(a.p=m=new Map);const y=m.get(p);y===void 0?(a=$w(),m.set(p,a)):a=y}}const c=a;let u;if(a.s===bB)u=a.v;else if(u=t.apply(null,arguments),s++,r){const h=((d=i==null?void 0:i.deref)==null?void 0:d.call(i))??i;h!=null&&r(h,u)&&(u=h,s!==0&&s--),i=typeof u=="object"&&u!==null||typeof u=="function"?new vke(u):u}return c.s=bB,c.v=u,u}return o.clearCache=()=>{n=$w(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function bke(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let s=0,o=0,a,l={},c=i.pop();typeof c=="object"&&(l=c,c=i.pop()),hke(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);const u={...n,...l},{memoize:d,memoizeOptions:h=[],argsMemoize:f=MX,argsMemoizeOptions:p=[],devModeChecks:m={}}=u,y=xB(h),g=xB(p),v=mke(i),x=d(function(){return s++,c.apply(null,arguments)},...y),b=f(function(){o++;const A=gke(v,arguments);return a=x.apply(null,A),a},...g);return Object.assign(b,{resultFunc:c,memoizedResultFunc:x,dependencies:v,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:d,argsMemoize:f})};return Object.assign(r,{withTypes:()=>r}),r}var _e=bke(MX),wke=Object.assign((t,e=_e)=>{fke(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(s=>t[s]);return e(r,(...s)=>s.reduce((o,a,l)=>(o[n[l]]=a,o),{}))},{withTypes:()=>wke}),FX={},jX={},BX={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,s)=>{if(r!==i){const o=e(r),a=e(i);if(o===a&&o===0){if(r<i)return s==="desc"?1:-1;if(r>i)return s==="desc"?-1:1}return s==="desc"?a-o:o-a}return 0};t.compareValues=n})(BX);var zX={},E4={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(E4);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=E4,n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,o){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||e.isSymbol(s)?!0:typeof s=="string"&&(r.test(s)||!n.test(s))||o!=null&&Object.hasOwn(o,s)}t.isKey=i})(zX);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=BX,n=zX,r=NC;function i(s,o,a,l){if(s==null)return[];a=l?void 0:a,Array.isArray(s)||(s=Object.values(s)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(a)||(a=a==null?[]:[a]),a=a.map(f=>String(f));const c=(f,p)=>{let m=f;for(let y=0;y<p.length&&m!=null;++y)m=m[p[y]];return m},u=(f,p)=>p==null||f==null?p:typeof f=="object"&&"key"in f?Object.hasOwn(p,f.key)?p[f.key]:c(p,f.path):typeof f=="function"?f(p):Array.isArray(f)?c(p,f):typeof p=="object"?p[f]:p,d=o.map(f=>(Array.isArray(f)&&f.length===1&&(f=f[0]),f==null||typeof f=="function"||Array.isArray(f)||n.isKey(f)?f:{key:f,path:r.toPath(f)}));return s.map(f=>({original:f,criteria:d.map(p=>u(p,f))})).slice().sort((f,p)=>{for(let m=0;m<d.length;m++){const y=e.compareValues(f.criteria[m],p.criteria[m],a[m]);if(y!==0)return y}return 0}).map(f=>f.original)}t.orderBy=i})(jX);var UX={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const i=[],s=Math.floor(r),o=(a,l)=>{for(let c=0;c<a.length;c++){const u=a[c];Array.isArray(u)&&l<s?o(u,l+1):i.push(u)}};return o(n,0),i}t.flatten=e})(UX);var T4={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=I4,n=IC,r=w4,i=S4;function s(o,a,l){return r.isObject(l)&&(typeof a=="number"&&n.isArrayLike(l)&&e.isIndex(a)&&a<l.length||typeof a=="string"&&a in l)?i.eq(l[a],o):!1}t.isIterateeCall=s})(T4);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=jX,n=UX,r=T4;function i(s,...o){const a=o.length;return a>1&&r.isIterateeCall(s,o[0],o[1])?o=[]:a>2&&r.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),e.orderBy(s,n.flatten(o),["asc"])}t.sortBy=i})(FX);var kke=FX.sortBy;const EC=Ic(kke);var VX=t=>t.legend.settings,Ske=t=>t.legend.size,Cke=t=>t.legend.payload;_e([Cke,VX],(t,e)=>{var{itemSorter:n}=e,r=t.flat(1);return n?EC(r,n):r});var Pw=1;function Nke(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=N.useState({height:0,left:0,top:0,width:0}),r=N.useCallback(i=>{if(i!=null){var s=i.getBoundingClientRect(),o={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(o.height-e.height)>Pw||Math.abs(o.left-e.left)>Pw||Math.abs(o.top-e.top)>Pw||Math.abs(o.width-e.width)>Pw)&&n({height:o.height,left:o.left,top:o.top,width:o.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function Zi(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var Ake=(()=>typeof Symbol=="function"&&Symbol.observable||"@@observable")(),wB=Ake,JI=()=>Math.random().toString(36).substring(7).split("").join("."),Ike={INIT:`@@redux/INIT${JI()}`,REPLACE:`@@redux/REPLACE${JI()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${JI()}`},Pk=Ike;function $4(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function WX(t,e,n){if(typeof t!="function")throw new Error(Zi(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Zi(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Zi(1));return n(WX)(t,e)}let r=t,i=e,s=new Map,o=s,a=0,l=!1;function c(){o===s&&(o=new Map,s.forEach((y,g)=>{o.set(g,y)}))}function u(){if(l)throw new Error(Zi(3));return i}function d(y){if(typeof y!="function")throw new Error(Zi(4));if(l)throw new Error(Zi(5));let g=!0;c();const v=a++;return o.set(v,y),function(){if(g){if(l)throw new Error(Zi(6));g=!1,c(),o.delete(v),s=null}}}function h(y){if(!$4(y))throw new Error(Zi(7));if(typeof y.type>"u")throw new Error(Zi(8));if(typeof y.type!="string")throw new Error(Zi(17));if(l)throw new Error(Zi(9));try{l=!0,i=r(i,y)}finally{l=!1}return(s=o).forEach(v=>{v()}),y}function f(y){if(typeof y!="function")throw new Error(Zi(10));r=y,h({type:Pk.REPLACE})}function p(){const y=d;return{subscribe(g){if(typeof g!="object"||g===null)throw new Error(Zi(11));function v(){const b=g;b.next&&b.next(u())}return v(),{unsubscribe:y(v)}},[wB](){return this}}}return h({type:Pk.INIT}),{dispatch:h,subscribe:d,getState:u,replaceReducer:f,[wB]:p}}function _ke(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:Pk.INIT})>"u")throw new Error(Zi(12));if(typeof n(void 0,{type:Pk.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Zi(13))})}function GX(t){const e=Object.keys(t),n={};for(let s=0;s<e.length;s++){const o=e[s];typeof t[o]=="function"&&(n[o]=t[o])}const r=Object.keys(n);let i;try{_ke(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let l=!1;const c={};for(let u=0;u<r.length;u++){const d=r[u],h=n[d],f=o[d],p=h(f,a);if(typeof p>"u")throw a&&a.type,new Error(Zi(14));c[d]=p,l=l||p!==f}return l=l||r.length!==Object.keys(o).length,l?c:o}}function Rk(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function Eke(...t){return e=>(n,r)=>{const i=e(n,r);let s=()=>{throw new Error(Zi(15))};const o={getState:i.getState,dispatch:(l,...c)=>s(l,...c)},a=t.map(l=>l(o));return s=Rk(...a)(i.dispatch),{...i,dispatch:s}}}function qX(t){return $4(t)&&"type"in t&&typeof t.type=="string"}var HX=Symbol.for("immer-nothing"),kB=Symbol.for("immer-draftable"),Zo=Symbol.for("immer-state");function vl(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var hg=Object.getPrototypeOf;function Qf(t){return!!t&&!!t[Zo]}function ku(t){var e;return t?KX(t)||Array.isArray(t)||!!t[kB]||!!((e=t.constructor)!=null&&e[kB])||_v(t)||$C(t):!1}var Tke=Object.prototype.constructor.toString();function KX(t){if(!t||typeof t!="object")return!1;const e=hg(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Tke}function Ok(t,e){TC(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,r)=>e(r,n,t))}function TC(t){const e=t[Zo];return e?e.type_:Array.isArray(t)?1:_v(t)?2:$C(t)?3:0}function LT(t,e){return TC(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function XX(t,e,n){const r=TC(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function $ke(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function _v(t){return t instanceof Map}function $C(t){return t instanceof Set}function cf(t){return t.copy_||t.base_}function MT(t,e){if(_v(t))return new Map(t);if($C(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=KX(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[Zo];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:t[o]})}return Object.create(hg(t),r)}else{const r=hg(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function P4(t,e=!1){return PC(t)||Qf(t)||!ku(t)||(TC(t)>1&&Object.defineProperties(t,{set:{value:Rw},add:{value:Rw},clear:{value:Rw},delete:{value:Rw}}),Object.freeze(t),e&&Object.values(t).forEach(n=>P4(n,!0))),t}function Rw(){vl(2)}function PC(t){return Object.isFrozen(t)}var Pke={};function ep(t){const e=Pke[t];return e||vl(0,t),e}var V1;function YX(){return V1}function Rke(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function SB(t,e){e&&(ep("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function FT(t){jT(t),t.drafts_.forEach(Oke),t.drafts_=null}function jT(t){t===V1&&(V1=t.parent_)}function CB(t){return V1=Rke(V1,t)}function Oke(t){const e=t[Zo];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function NB(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[Zo].modified_&&(FT(e),vl(4)),ku(t)&&(t=Dk(e,t),e.parent_||Lk(e,t)),e.patches_&&ep("Patches").generateReplacementPatches_(n[Zo].base_,t,e.patches_,e.inversePatches_)):t=Dk(e,n,[]),FT(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==HX?t:void 0}function Dk(t,e,n){if(PC(e))return e;const r=e[Zo];if(!r)return Ok(e,(i,s)=>AB(t,r,e,i,s,n)),e;if(r.scope_!==t)return e;if(!r.modified_)return Lk(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),Ok(s,(a,l)=>AB(t,r,i,a,l,n,o)),Lk(t,i,!1),n&&t.patches_&&ep("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function AB(t,e,n,r,i,s,o){if(Qf(i)){const a=s&&e&&e.type_!==3&&!LT(e.assigned_,r)?s.concat(r):void 0,l=Dk(t,i,a);if(XX(n,r,l),Qf(l))t.canAutoFreeze_=!1;else return}else o&&n.add(i);if(ku(i)&&!PC(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;Dk(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(_v(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&Lk(t,i)}}function Lk(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&P4(e,n)}function Dke(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:YX(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=R4;n&&(i=[r],s=W1);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var R4={get(t,e){if(e===Zo)return t;const n=cf(t);if(!LT(n,e))return Lke(t,n,e);const r=n[e];return t.finalized_||!ku(r)?r:r===QI(t.base_,e)?(e_(t),t.copy_[e]=zT(r,t)):r},has(t,e){return e in cf(t)},ownKeys(t){return Reflect.ownKeys(cf(t))},set(t,e,n){const r=ZX(cf(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=QI(cf(t),e),s=i==null?void 0:i[Zo];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if($ke(n,i)&&(n!==void 0||LT(t.base_,e)))return!0;e_(t),BT(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return QI(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,e_(t),BT(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=cf(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){vl(11)},getPrototypeOf(t){return hg(t.base_)},setPrototypeOf(){vl(12)}},W1={};Ok(R4,(t,e)=>{W1[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});W1.deleteProperty=function(t,e){return W1.set.call(this,t,e,void 0)};W1.set=function(t,e,n){return R4.set.call(this,t[0],e,n,t[0])};function QI(t,e){const n=t[Zo];return(n?cf(n):t)[e]}function Lke(t,e,n){var i;const r=ZX(e,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function ZX(t,e){if(!(e in t))return;let n=hg(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=hg(n)}}function BT(t){t.modified_||(t.modified_=!0,t.parent_&&BT(t.parent_))}function e_(t){t.copy_||(t.copy_=MT(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var Mke=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const s=n;n=e;const o=this;return function(l=s,...c){return o.produce(l,u=>n.call(this,u,...c))}}typeof n!="function"&&vl(6),r!==void 0&&typeof r!="function"&&vl(7);let i;if(ku(e)){const s=CB(this),o=zT(e,void 0);let a=!0;try{i=n(o),a=!1}finally{a?FT(s):jT(s)}return SB(s,r),NB(i,s)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===HX&&(i=void 0),this.autoFreeze_&&P4(i,!0),r){const s=[],o=[];ep("Patches").generateReplacementPatches_(e,i,s,o),r(s,o)}return i}else vl(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(o,...a)=>this.produceWithPatches(o,l=>e(l,...a));let r,i;return[this.produce(e,n,(o,a)=>{r=o,i=a}),r,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){ku(t)||vl(8),Qf(t)&&(t=uu(t));const e=CB(this),n=zT(t,void 0);return n[Zo].isManual_=!0,jT(e),n}finishDraft(t,e){const n=t&&t[Zo];(!n||!n.isManual_)&&vl(9);const{scope_:r}=n;return SB(r,e),NB(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=ep("Patches").applyPatches_;return Qf(t)?r(t,e):this.produce(t,i=>r(i,e))}};function zT(t,e){const n=_v(t)?ep("MapSet").proxyMap_(t,e):$C(t)?ep("MapSet").proxySet_(t,e):Dke(t,e);return(e?e.scope_:YX()).drafts_.push(n),n}function uu(t){return Qf(t)||vl(10,t),JX(t)}function JX(t){if(!ku(t)||PC(t))return t;const e=t[Zo];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=MT(t,e.scope_.immer_.useStrictShallowCopy_)}else n=MT(t,!0);return Ok(n,(r,i)=>{XX(n,r,JX(i))}),e&&(e.finalized_=!1),n}var Fke=new Mke,QX=Fke.produce;function eY(t){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,t):i(s)}var jke=eY(),Bke=eY,zke=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Rk:Rk.apply(null,arguments)};function Ua(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(Ho(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>qX(r)&&r.type===t,n}var tY=class Ry extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Ry.prototype)}static get[Symbol.species](){return Ry}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Ry(...e[0].concat(this)):new Ry(...e.concat(this))}};function IB(t){return ku(t)?QX(t,()=>{}):t}function Ow(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function Uke(t){return typeof t=="boolean"}var Vke=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=e??{};let o=new tY;return n&&(Uke(n)?o.push(jke):o.push(Bke(n.extraArgument))),o},nY="RTK_autoBatch",Bs=()=>t=>({payload:t,meta:{[nY]:!0}}),_B=t=>e=>{setTimeout(e,t)},rY=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,s=!1,o=!1;const a=new Set,l=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:_B(10):t.type==="callback"?t.queueNotification:_B(t.timeout),c=()=>{o=!1,s&&(s=!1,a.forEach(u=>u()))};return Object.assign({},r,{subscribe(u){const d=()=>i&&u(),h=r.subscribe(d);return a.add(u),()=>{h(),a.delete(u)}},dispatch(u){var d;try{return i=!((d=u==null?void 0:u.meta)!=null&&d[nY]),s=!i,s&&(o||(o=!0,l(c))),r.dispatch(u)}finally{i=!0}}})},Wke=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new tY(t);return r&&i.push(rY(typeof r=="object"?r:void 0)),i};function Gke(t){const e=Vke(),{reducer:n=void 0,middleware:r,devTools:i=!0,duplicateMiddlewareCheck:s=!0,preloadedState:o=void 0,enhancers:a=void 0}=t||{};let l;if(typeof n=="function")l=n;else if($4(n))l=GX(n);else throw new Error(Ho(1));let c;typeof r=="function"?c=r(e):c=e();let u=Rk;i&&(u=zke({trace:!1,...typeof i=="object"&&i}));const d=Eke(...c),h=Wke(d);let f=typeof a=="function"?a(h):h();const p=u(...f);return WX(l,o,p)}function iY(t){const e={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(Ho(28));if(a in e)throw new Error(Ho(29));return e[a]=o,i},addAsyncThunk(s,o){return o.pending&&(e[s.pending.type]=o.pending),o.rejected&&(e[s.rejected.type]=o.rejected),o.fulfilled&&(e[s.fulfilled.type]=o.fulfilled),o.settled&&n.push({matcher:s.settled,reducer:o.settled}),i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return t(i),[e,n,r]}function qke(t){return typeof t=="function"}function Hke(t,e){let[n,r,i]=iY(e),s;if(qke(t))s=()=>IB(t());else{const a=IB(t);s=()=>a}function o(a=s(),l){let c=[n[l.type],...r.filter(({matcher:u})=>u(l)).map(({reducer:u})=>u)];return c.filter(u=>!!u).length===0&&(c=[i]),c.reduce((u,d)=>{if(d)if(Qf(u)){const f=d(u,l);return f===void 0?u:f}else{if(ku(u))return QX(u,h=>d(h,l));{const h=d(u,l);if(h===void 0){if(u===null)return u;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return u},a)}return o.getInitialState=s,o}var Kke="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Xke=(t=21)=>{let e="",n=t;for(;n--;)e+=Kke[Math.random()*64|0];return e},Yke=Symbol.for("rtk-slice-createasyncthunk");function Zke(t,e){return`${t}/${e}`}function Jke({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[Yke];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(Ho(11));typeof process<"u";const a=(typeof i.reducers=="function"?i.reducers(eSe()):i.reducers)||{},l=Object.keys(a),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(b,S){const A=typeof b=="string"?b:b.type;if(!A)throw new Error(Ho(12));if(A in c.sliceCaseReducersByType)throw new Error(Ho(13));return c.sliceCaseReducersByType[A]=S,u},addMatcher(b,S){return c.sliceMatchers.push({matcher:b,reducer:S}),u},exposeAction(b,S){return c.actionCreators[b]=S,u},exposeCaseReducer(b,S){return c.sliceCaseReducersByName[b]=S,u}};l.forEach(b=>{const S=a[b],A={reducerName:b,type:Zke(s,b),createNotation:typeof i.reducers=="function"};nSe(S)?iSe(A,S,u,e):tSe(A,S,u)});function d(){const[b={},S=[],A=void 0]=typeof i.extraReducers=="function"?iY(i.extraReducers):[i.extraReducers],E={...b,...c.sliceCaseReducersByType};return Hke(i.initialState,I=>{for(let T in E)I.addCase(T,E[T]);for(let T of c.sliceMatchers)I.addMatcher(T.matcher,T.reducer);for(let T of S)I.addMatcher(T.matcher,T.reducer);A&&I.addDefaultCase(A)})}const h=b=>b,f=new Map,p=new WeakMap;let m;function y(b,S){return m||(m=d()),m(b,S)}function g(){return m||(m=d()),m.getInitialState()}function v(b,S=!1){function A(I){let T=I[b];return typeof T>"u"&&S&&(T=Ow(p,A,g)),T}function E(I=h){const T=Ow(f,S,()=>new WeakMap);return Ow(T,I,()=>{const O={};for(const[$,R]of Object.entries(i.selectors??{}))O[$]=Qke(R,I,()=>Ow(p,I,g),S);return O})}return{reducerPath:b,getSelectors:E,get selectors(){return E(A)},selectSlice:A}}const x={name:s,reducer:y,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:g,...v(o),injectInto(b,{reducerPath:S,...A}={}){const E=S??o;return b.inject({reducerPath:E,reducer:y},A),{...x,...v(E,!0)}}};return x}}function Qke(t,e,n,r){function i(s,...o){let a=e(s);return typeof a>"u"&&r&&(a=n()),t(a,...o)}return i.unwrapped=t,i}var na=Jke();function eSe(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function tSe({type:t,reducerName:e,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!rSe(r))throw new Error(Ho(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(t,s).exposeCaseReducer(e,s).exposeAction(e,o?Ua(t,o):Ua(t))}function nSe(t){return t._reducerDefinitionType==="asyncThunk"}function rSe(t){return t._reducerDefinitionType==="reducerWithPrepare"}function iSe({type:t,reducerName:e},n,r,i){if(!i)throw new Error(Ho(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:l,settled:c,options:u}=n,d=i(t,s,u);r.exposeAction(e,d),o&&r.addCase(d.fulfilled,o),a&&r.addCase(d.pending,a),l&&r.addCase(d.rejected,l),c&&r.addMatcher(d.settled,c),r.exposeCaseReducer(e,{fulfilled:o||Dw,pending:a||Dw,rejected:l||Dw,settled:c||Dw})}function Dw(){}var sSe="task",sY="listener",oY="completed",O4="cancelled",oSe=`task-${O4}`,aSe=`task-${oY}`,UT=`${sY}-${O4}`,lSe=`${sY}-${oY}`,RC=class{constructor(t){Lt(this,"name","TaskAbortError");Lt(this,"message");this.code=t,this.message=`${sSe} ${O4} (reason: ${t})`}},D4=(t,e)=>{if(typeof t!="function")throw new TypeError(Ho(32))},Mk=()=>{},aY=(t,e=Mk)=>(t.catch(e),t),lY=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),Lf=(t,e)=>{const n=t.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:e,configurable:!0,writable:!0}),t.abort(e))},Mf=t=>{if(t.aborted){const{reason:e}=t;throw new RC(e)}};function cY(t,e){let n=Mk;return new Promise((r,i)=>{const s=()=>i(new RC(t.reason));if(t.aborted){s();return}n=lY(t,s),e.finally(()=>n()).then(r,i)}).finally(()=>{n=Mk})}var cSe=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof RC?"cancelled":"rejected",error:n}}finally{e==null||e()}},Fk=t=>e=>aY(cY(t,e).then(n=>(Mf(t),n))),uY=t=>{const e=Fk(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:Gm}=Object,EB={},OC="listenerMiddleware",uSe=(t,e)=>{const n=r=>lY(t,()=>Lf(r,t.reason));return(r,i)=>{D4(r);const s=new AbortController;n(s);const o=cSe(async()=>{Mf(t),Mf(s.signal);const a=await r({pause:Fk(s.signal),delay:uY(s.signal),signal:s.signal});return Mf(s.signal),a},()=>Lf(s,aSe));return i!=null&&i.autoJoin&&e.push(o.catch(Mk)),{result:Fk(t)(o),cancel(){Lf(s,oSe)}}}},dSe=(t,e)=>{const n=async(r,i)=>{Mf(e);let s=()=>{};const a=[new Promise((l,c)=>{let u=t({predicate:r,effect:(d,h)=>{h.unsubscribe(),l([d,h.getState(),h.getOriginalState()])}});s=()=>{u(),c()}})];i!=null&&a.push(new Promise(l=>setTimeout(l,i,null)));try{const l=await cY(e,Promise.race(a));return Mf(e),l}finally{s()}};return(r,i)=>aY(n(r,i))},dY=t=>{let{type:e,actionCreator:n,matcher:r,predicate:i,effect:s}=t;if(e)i=Ua(e).match;else if(n)e=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(Ho(21));return D4(s),{predicate:i,type:e,effect:s}},hY=Gm(t=>{const{type:e,predicate:n,effect:r}=dY(t);return{id:Xke(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Ho(22))}}},{withTypes:()=>hY}),TB=(t,e)=>{const{type:n,effect:r,predicate:i}=dY(e);return Array.from(t.values()).find(s=>(typeof n=="string"?s.type===n:s.predicate===i)&&s.effect===r)},VT=t=>{t.pending.forEach(e=>{Lf(e,UT)})},hSe=(t,e)=>()=>{for(const n of e.keys())VT(n);t.clear()},$B=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},fY=Gm(Ua(`${OC}/add`),{withTypes:()=>fY}),fSe=Ua(`${OC}/removeAll`),pY=Gm(Ua(`${OC}/remove`),{withTypes:()=>pY}),pSe=(...t)=>{console.error(`${OC}/error`,...t)},Ev=(t={})=>{const e=new Map,n=new Map,r=f=>{const p=n.get(f)??0;n.set(f,p+1)},i=f=>{const p=n.get(f)??1;p===1?n.delete(f):n.set(f,p-1)},{extra:s,onError:o=pSe}=t;D4(o);const a=f=>(f.unsubscribe=()=>e.delete(f.id),e.set(f.id,f),p=>{f.unsubscribe(),p!=null&&p.cancelActive&&VT(f)}),l=f=>{const p=TB(e,f)??hY(f);return a(p)};Gm(l,{withTypes:()=>l});const c=f=>{const p=TB(e,f);return p&&(p.unsubscribe(),f.cancelActive&&VT(p)),!!p};Gm(c,{withTypes:()=>c});const u=async(f,p,m,y)=>{const g=new AbortController,v=dSe(l,g.signal),x=[];try{f.pending.add(g),r(f),await Promise.resolve(f.effect(p,Gm({},m,{getOriginalState:y,condition:(b,S)=>v(b,S).then(Boolean),take:v,delay:uY(g.signal),pause:Fk(g.signal),extra:s,signal:g.signal,fork:uSe(g.signal,x),unsubscribe:f.unsubscribe,subscribe:()=>{e.set(f.id,f)},cancelActiveListeners:()=>{f.pending.forEach((b,S,A)=>{b!==g&&(Lf(b,UT),A.delete(b))})},cancel:()=>{Lf(g,UT),f.pending.delete(g)},throwIfCancelled:()=>{Mf(g.signal)}})))}catch(b){b instanceof RC||$B(o,b,{raisedBy:"effect"})}finally{await Promise.all(x),Lf(g,lSe),i(f),f.pending.delete(g)}},d=hSe(e,n);return{middleware:f=>p=>m=>{if(!qX(m))return p(m);if(fY.match(m))return l(m.payload);if(fSe.match(m)){d();return}if(pY.match(m))return c(m.payload);let y=f.getState();const g=()=>{if(y===EB)throw new Error(Ho(23));return y};let v;try{if(v=p(m),e.size>0){const x=f.getState(),b=Array.from(e.values());for(const S of b){let A=!1;try{A=S.predicate(m,x,y)}catch(E){A=!1,$B(o,E,{raisedBy:"predicate"})}A&&u(S,m,f,g)}}}finally{y=EB}return v},startListening:l,stopListening:c,clearListeners:d}};function Ho(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var mSe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},mY=na({name:"chartLayout",initialState:mSe,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,r,i,s;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(r=e.payload.right)!==null&&r!==void 0?r:0,t.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,t.margin.left=(s=e.payload.left)!==null&&s!==void 0?s:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:gSe,setLayout:ySe,setChartSize:vSe,setScale:xSe}=mY.actions,bSe=mY.reducer;function PB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function RB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PB(Object(n),!0).forEach(function(r){wSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wSe(t,e,n){return(e=kSe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kSe(t){var e=SSe(t,"string");return typeof e=="symbol"?e:e+""}function SSe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var jk=Math.PI/180,CSe=t=>t*180/Math.PI,oi=(t,e,n,r)=>({x:t+Math.cos(-jk*r)*n,y:e+Math.sin(-jk*r)*n}),gY=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0,width:0,height:0,brushBottom:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},NSe=(t,e)=>{var{x:n,y:r}=t,{x:i,y:s}=e;return Math.sqrt((n-i)**2+(r-s)**2)},ASe=(t,e)=>{var{x:n,y:r}=t,{cx:i,cy:s}=e,o=NSe({x:n,y:r},{x:i,y:s});if(o<=0)return{radius:o,angle:0};var a=(n-i)/o,l=Math.acos(a);return r>s&&(l=2*Math.PI-l),{radius:o,angle:CSe(l),angleInRadian:l}},ISe=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),i=Math.floor(n/360),s=Math.min(r,i);return{startAngle:e-s*360,endAngle:n-s*360}},_Se=(t,e)=>{var{startAngle:n,endAngle:r}=e,i=Math.floor(n/360),s=Math.floor(r/360),o=Math.min(i,s);return t+o*360},ESe=(t,e)=>{var{x:n,y:r}=t,{radius:i,angle:s}=ASe({x:n,y:r},e),{innerRadius:o,outerRadius:a}=e;if(i<o||i>a||i===0)return null;var{startAngle:l,endAngle:c}=ISe(e),u=s,d;if(l<=c){for(;u>c;)u-=360;for(;u<l;)u+=360;d=u>=l&&u<=c}else{for(;u>l;)u-=360;for(;u<c;)u+=360;d=u>=c&&u<=l}return d?RB(RB({},e),{},{radius:i,angle:_Se(u,e)}):null};function yY(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function OB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Na(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OB(Object(n),!0).forEach(function(r){TSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function TSe(t,e,n){return(e=$Se(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $Se(t){var e=PSe(t,"string");return typeof e=="symbol"?e:e+""}function PSe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Zn(t,e,n){return mr(t)||mr(e)?n:kc(e)?Jf(t,e,n):typeof e=="function"?e(t):n}var RSe=(t,e,n,r,i)=>{var s,o=-1,a=(s=e==null?void 0:e.length)!==null&&s!==void 0?s:0;if(a<=1||t==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var l=0;l<a;l++){var c=l>0?n[l-1].coordinate:n[a-1].coordinate,u=n[l].coordinate,d=l>=a-1?n[0].coordinate:n[l+1].coordinate,h=void 0;if(ji(u-c)!==ji(d-u)){var f=[];if(ji(d-u)===ji(i[1]-i[0])){h=d;var p=u+i[1]-i[0];f[0]=Math.min(p,(p+c)/2),f[1]=Math.max(p,(p+c)/2)}else{h=c;var m=d+i[1]-i[0];f[0]=Math.min(u,(m+u)/2),f[1]=Math.max(u,(m+u)/2)}var y=[Math.min(u,(h+u)/2),Math.max(u,(h+u)/2)];if(t>y[0]&&t<=y[1]||t>=f[0]&&t<=f[1]){({index:o}=n[l]);break}}else{var g=Math.min(c,d),v=Math.max(c,d);if(t>(g+u)/2&&t<=(v+u)/2){({index:o}=n[l]);break}}}else if(e){for(var x=0;x<a;x++)if(x===0&&t<=(e[x].coordinate+e[x+1].coordinate)/2||x>0&&x<a-1&&t>(e[x].coordinate+e[x-1].coordinate)/2&&t<=(e[x].coordinate+e[x+1].coordinate)/2||x===a-1&&t>(e[x].coordinate+e[x-1].coordinate)/2){({index:o}=e[x]);break}}return o},OSe=(t,e,n)=>{if(e&&n){var{width:r,height:i}=n,{align:s,verticalAlign:o,layout:a}=e;if((a==="vertical"||a==="horizontal"&&o==="middle")&&s!=="center"&&St(t[s]))return Na(Na({},t),{},{[s]:t[s]+(r||0)});if((a==="horizontal"||a==="vertical"&&s==="center")&&o!=="middle"&&St(t[o]))return Na(Na({},t),{},{[o]:t[o]+(i||0)})}return t},mh=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",vY=(t,e,n,r)=>{if(r)return t.map(a=>a.coordinate);var i,s,o=t.map(a=>(a.coordinate===e&&(i=!0),a.coordinate===n&&(s=!0),a.coordinate));return i||o.push(e),s||o.push(n),o},xY=(t,e,n)=>{if(!t)return null;var{duplicateDomain:r,type:i,range:s,scale:o,realScaleType:a,isCategorical:l,categoricalDomain:c,tickCount:u,ticks:d,niceTicks:h,axisType:f}=t;if(!o)return null;var p=a==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,m=(e||n)&&i==="category"&&o.bandwidth?o.bandwidth()/p:0;if(m=f==="angleAxis"&&s&&s.length>=2?ji(s[0]-s[1])*2*m:m,e&&(d||h)){var y=(d||h||[]).map((g,v)=>{var x=r?r.indexOf(g):g;return{coordinate:o(x)+m,value:g,offset:m,index:v}});return y.filter(g=>!za(g.coordinate))}return l&&c?c.map((g,v)=>({coordinate:o(g)+m,value:g,index:v,offset:m})):o.ticks&&!n&&u!=null?o.ticks(u).map((g,v)=>({coordinate:o(g)+m,value:g,offset:m,index:v})):o.domain().map((g,v)=>({coordinate:o(g)+m,value:r?r[g]:g,index:v,offset:m}))},DB=1e-4,DSe=t=>{var e=t.domain();if(!(!e||e.length<=2)){var n=e.length,r=t.range(),i=Math.min(r[0],r[1])-DB,s=Math.max(r[0],r[1])+DB,o=t(e[0]),a=t(e[n-1]);(o<i||o>s||a<i||a>s)&&t.domain([e[0],e[n-1]])}},LSe=(t,e)=>{if(!e||e.length!==2||!St(e[0])||!St(e[1]))return t;var n=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]),i=[t[0],t[1]];return(!St(t[0])||t[0]<n)&&(i[0]=n),(!St(t[1])||t[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},MSe=t=>{var e=t.length;if(!(e<=0))for(var n=0,r=t[0].length;n<r;++n)for(var i=0,s=0,o=0;o<e;++o){var a=za(t[o][n][1])?t[o][n][0]:t[o][n][1];a>=0?(t[o][n][0]=i,t[o][n][1]=i+a,i=t[o][n][1]):(t[o][n][0]=s,t[o][n][1]=s+a,s=t[o][n][1])}},FSe=t=>{var e=t.length;if(!(e<=0))for(var n=0,r=t[0].length;n<r;++n)for(var i=0,s=0;s<e;++s){var o=za(t[s][n][1])?t[s][n][0]:t[s][n][1];o>=0?(t[s][n][0]=i,t[s][n][1]=i+o,i=t[s][n][1]):(t[s][n][0]=0,t[s][n][1]=0)}},jSe={sign:MSe,expand:A2e,none:ug,silhouette:I2e,wiggle:_2e,positive:FSe},BSe=(t,e,n)=>{var r=jSe[n],i=N2e().keys(e).value((s,o)=>+Zn(s,o,0)).order(OT).offset(r);return i(t)};function zSe(t){return t==null?void 0:String(t)}function LB(t){var{axis:e,ticks:n,bandSize:r,entry:i,index:s,dataKey:o}=t;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!mr(i[e.dataKey])){var a=fX(n,"value",i[e.dataKey]);if(a)return a.coordinate+r/2}return n[s]?n[s].coordinate+r/2:null}var l=Zn(i,mr(o)?e.dataKey:o);return mr(l)?null:e.scale(l)}var MB=t=>{var{axis:e,ticks:n,offset:r,bandSize:i,entry:s,index:o}=t;if(e.type==="category")return n[o]?n[o].coordinate+r:null;var a=Zn(s,e.dataKey,e.scale.domain()[o]);return mr(a)?null:e.scale(a)-i/2+r},USe=t=>{var{numericAxis:e}=t,n=e.scale.domain();if(e.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},VSe=t=>{var e=t.flat(2).filter(St);return[Math.min(...e),Math.max(...e)]},WSe=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],GSe=(t,e,n)=>{if(t!=null)return WSe(Object.keys(t).reduce((r,i)=>{var s=t[i],{stackedData:o}=s,a=o.reduce((l,c)=>{var u=yY(c,e,n),d=VSe(u);return[Math.min(l[0],d[0]),Math.max(l[1],d[1])]},[1/0,-1/0]);return[Math.min(a[0],r[0]),Math.max(a[1],r[1])]},[1/0,-1/0]))},FB=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,jB=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,G1=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var i=EC(e,u=>u.coordinate),s=1/0,o=1,a=i.length;o<a;o++){var l=i[o],c=i[o-1];s=Math.min((l.coordinate||0)-(c.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0};function BB(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:i,name:s}=t;return Na(Na({},e),{},{dataKey:n,payload:r,value:i,name:s})}function Kg(t,e){if(t)return String(t);if(typeof e=="string")return e}function qSe(t,e,n,r,i){if(n==="horizontal"||n==="vertical"){var s=t>=i.left&&t<=i.left+i.width&&e>=i.top&&e<=i.top+i.height;return s?{x:t,y:e}:null}return r?ESe({x:t,y:e},r):null}var HSe=(t,e,n,r)=>{var i=e.find(c=>c&&c.index===n);if(i){if(t==="horizontal")return{x:i.coordinate,y:r.y};if(t==="vertical")return{x:r.x,y:i.coordinate};if(t==="centric"){var s=i.coordinate,{radius:o}=r;return Na(Na(Na({},r),oi(r.cx,r.cy,o,s)),{},{angle:s,radius:o})}var a=i.coordinate,{angle:l}=r;return Na(Na(Na({},r),oi(r.cx,r.cy,a,l)),{},{angle:l,radius:a})}return{x:0,y:0}},KSe=(t,e)=>e==="horizontal"?t.x:e==="vertical"?t.y:e==="centric"?t.angle:t.radius,Ru=t=>t.layout.width,Ou=t=>t.layout.height,XSe=t=>t.layout.scale,bY=t=>t.layout.margin,DC=_e(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),LC=_e(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),wY="data-recharts-item-index",kY="data-recharts-item-data-key",Tv=60;function zB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Lw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zB(Object(n),!0).forEach(function(r){YSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function YSe(t,e,n){return(e=ZSe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ZSe(t){var e=JSe(t,"string");return typeof e=="symbol"?e:e+""}function JSe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var QSe=t=>t.brush.height;function eCe(t){var e=LC(t);return e.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Tv;return n+i}return n},0)}function tCe(t){var e=LC(t);return e.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Tv;return n+i}return n},0)}function nCe(t){var e=DC(t);return e.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function rCe(t){var e=DC(t);return e.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var _i=_e([Ru,Ou,bY,QSe,eCe,tCe,nCe,rCe,VX,Ske],(t,e,n,r,i,s,o,a,l,c)=>{var u={left:(n.left||0)+i,right:(n.right||0)+s},d={top:(n.top||0)+o,bottom:(n.bottom||0)+a},h=Lw(Lw({},d),u),f=h.bottom;h.bottom+=r,h=OSe(h,l,c);var p=t-h.left-h.right,m=e-h.top-h.bottom;return Lw(Lw({brushBottom:f},h),{},{width:Math.max(p,0),height:Math.max(m,0)})}),iCe=_e(_i,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),L4=_e(Ru,Ou,(t,e)=>({x:0,y:0,width:t,height:e})),sCe=N.createContext(null),no=()=>N.useContext(sCe)!=null,MC=t=>t.brush,FC=_e([MC,_i,bY],(t,e,n)=>({height:t.height,x:St(t.x)?t.x:e.left,y:St(t.y)?t.y:e.top+e.height+e.brushBottom-((n==null?void 0:n.bottom)||0),width:St(t.width)?t.width:e.width})),SY={},CY={},NY={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:i,edges:s}={}){let o,a=null;const l=s!=null&&s.includes("leading"),c=s==null||s.includes("trailing"),u=()=>{a!==null&&(n.apply(o,a),o=void 0,a=null)},d=()=>{c&&u(),m()};let h=null;const f=()=>{h!=null&&clearTimeout(h),h=setTimeout(()=>{h=null,d()},r)},p=()=>{h!==null&&(clearTimeout(h),h=null)},m=()=>{p(),o=void 0,a=null},y=()=>{u()},g=function(...v){if(i!=null&&i.aborted)return;o=this,a=v;const x=h==null;f(),l&&x&&u()};return g.schedule=f,g.cancel=m,g.flush=y,i==null||i.addEventListener("abort",m,{once:!0}),g}t.debounce=e})(NY);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=NY;function n(r,i=0,s={}){typeof s!="object"&&(s={});const{leading:o=!1,trailing:a=!0,maxWait:l}=s,c=Array(2);o&&(c[0]="leading"),a&&(c[1]="trailing");let u,d=null;const h=e.debounce(function(...m){u=r.apply(this,m),d=null},i,{edges:c}),f=function(...m){return l!=null&&(d===null&&(d=Date.now()),Date.now()-d>=l)?(u=r.apply(this,m),d=Date.now(),h.cancel(),h.schedule(),u):(h.apply(this,m),u)},p=()=>(h.flush(),u);return f.cancel=h.cancel,f.flush=p,f}t.debounce=n})(CY);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=CY;function n(r,i=0,s={}){const{leading:o=!0,trailing:a=!0}=s;return e.debounce(r,i,{leading:o,maxWait:i,trailing:a})}t.throttle=n})(SY);var oCe=SY.throttle;const aCe=Ic(oCe);var Bk=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s]},AY=(t,e,n)=>{var{width:r="100%",height:i="100%",aspect:s,maxHeight:o}=n,a=wu(r)?t:Number(r),l=wu(i)?e:Number(i);return s&&s>0&&(a?l=a/s:l&&(a=l*s),o&&l>o&&(l=o)),{calculatedWidth:a,calculatedHeight:l}},lCe={width:0,height:0,overflow:"visible"},cCe={width:0,overflowX:"visible"},uCe={height:0,overflowY:"visible"},dCe={},hCe=t=>{var{width:e,height:n}=t,r=wu(e),i=wu(n);return r&&i?lCe:r?cCe:i?uCe:dCe};function fCe(t){var{width:e,height:n,aspect:r}=t,i=e,s=n;return i===void 0&&s===void 0?(i="100%",s="100%"):i===void 0?i=r&&r>0?void 0:"100%":s===void 0&&(s=r&&r>0?void 0:"100%"),{width:i,height:s}}function Ps(t){return Number.isFinite(t)}function fg(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function WT(){return WT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},WT.apply(null,arguments)}function UB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function VB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UB(Object(n),!0).forEach(function(r){pCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pCe(t,e,n){return(e=mCe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mCe(t){var e=gCe(t,"string");return typeof e=="symbol"?e:e+""}function gCe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var IY=N.createContext({width:-1,height:-1});function _Y(t){var{children:e,width:n,height:r}=t,i=N.useMemo(()=>({width:n,height:r}),[n,r]);return n<=0||r<=0?null:N.createElement(IY.Provider,{value:i},e)}var M4=()=>N.useContext(IY),yCe=N.forwardRef((t,e)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i,height:s,minWidth:o=0,minHeight:a,maxHeight:l,children:c,debounce:u=0,id:d,className:h,onResize:f,style:p={}}=t,m=N.useRef(null),y=N.useRef();y.current=f,N.useImperativeHandle(e,()=>m.current);var[g,v]=N.useState({containerWidth:r.width,containerHeight:r.height}),x=N.useCallback((I,T)=>{v(O=>{var $=Math.round(I),R=Math.round(T);return O.containerWidth===$&&O.containerHeight===R?O:{containerWidth:$,containerHeight:R}})},[]);N.useEffect(()=>{var I=R=>{var F,{width:L,height:U}=R[0].contentRect;x(L,U),(F=y.current)===null||F===void 0||F.call(y,L,U)};u>0&&(I=aCe(I,u,{trailing:!0,leading:!1}));var T=new ResizeObserver(I),{width:O,height:$}=m.current.getBoundingClientRect();return x(O,$),T.observe(m.current),()=>{T.disconnect()}},[x,u]);var{containerWidth:b,containerHeight:S}=g;Bk(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:A,calculatedHeight:E}=AY(b,S,{width:i,height:s,aspect:n,maxHeight:l});return Bk(A>0||E>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,A,E,i,s,o,a,n),N.createElement("div",{id:d?"".concat(d):void 0,className:yn("recharts-responsive-container",h),style:VB(VB({},p),{},{width:i,height:s,minWidth:o,minHeight:a,maxHeight:l}),ref:m},N.createElement("div",{style:hCe({width:i,height:s})},N.createElement(_Y,{width:A,height:E},c)))}),t_=N.forwardRef((t,e)=>{var n=M4();if(fg(n.width)&&fg(n.height))return t.children;var{width:r,height:i}=fCe({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:s,calculatedHeight:o}=AY(void 0,void 0,{width:r,height:i,aspect:t.aspect,maxHeight:t.maxHeight});return St(s)&&St(o)?N.createElement(_Y,{width:s,height:o},t.children):N.createElement(yCe,WT({},t,{width:r,height:i,ref:e}))}),jC=()=>{var t,e=no(),n=gt(iCe),r=gt(FC),i=(t=gt(MC))===null||t===void 0?void 0:t.padding;return!e||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},vCe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},EY=()=>{var t;return(t=gt(_i))!==null&&t!==void 0?t:vCe},TY=()=>gt(Ru),$Y=()=>gt(Ou),fn=t=>t.layout.layoutType,BC=()=>gt(fn),zC=t=>{var e=Lr(),n=no(),{width:r,height:i}=t,s=M4(),o=r,a=i;return s&&(o=s.width>0?s.width:r,a=s.height>0?s.height:i),N.useEffect(()=>{!n&&fg(o)&&fg(a)&&e(vSe({width:o,height:a}))},[e,n,o,a]),null},xCe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},PY=na({name:"legend",initialState:xCe,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:Bs()},removeLegendPayload:{reducer(t,e){var n=uu(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)},prepare:Bs()}}}),{setLegendSize:fat,setLegendSettings:pat,addLegendPayload:RY,removeLegendPayload:OY}=PY.actions,bCe=PY.reducer;function GT(){return GT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},GT.apply(null,arguments)}function WB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function n_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WB(Object(n),!0).forEach(function(r){wCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wCe(t,e,n){return(e=kCe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kCe(t){var e=SCe(t,"string");return typeof e=="symbol"?e:e+""}function SCe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function CCe(t){return Array.isArray(t)&&kc(t[0])&&kc(t[1])?t.join(" ~ "):t}var NCe=t=>{var{separator:e=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:s,formatter:o,itemSorter:a,wrapperClassName:l,labelClassName:c,label:u,labelFormatter:d,accessibilityLayer:h=!1}=t,f=()=>{if(s&&s.length){var S={padding:0,margin:0},A=(a?EC(s,a):s).map((E,I)=>{if(E.type==="none")return null;var T=E.formatter||o||CCe,{value:O,name:$}=E,R=O,F=$;if(T){var L=T(O,$,E,I,s);if(Array.isArray(L))[R,F]=L;else if(L!=null)R=L;else return null}var U=n_({display:"block",paddingTop:4,paddingBottom:4,color:E.color||"#000"},r);return N.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(I),style:U},kc(F)?N.createElement("span",{className:"recharts-tooltip-item-name"},F):null,kc(F)?N.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,N.createElement("span",{className:"recharts-tooltip-item-value"},R),N.createElement("span",{className:"recharts-tooltip-item-unit"},E.unit||""))});return N.createElement("ul",{className:"recharts-tooltip-item-list",style:S},A)}return null},p=n_({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),m=n_({margin:0},i),y=!mr(u),g=y?u:"",v=yn("recharts-default-tooltip",l),x=yn("recharts-tooltip-label",c);y&&d&&s!==void 0&&s!==null&&(g=d(u,s));var b=h?{role:"status","aria-live":"assertive"}:{};return N.createElement("div",GT({className:v,style:p},b),N.createElement("p",{className:x,style:m},N.isValidElement(g)?g:"".concat(g)),f())},dy="recharts-tooltip-wrapper",ACe={visibility:"hidden"};function ICe(t){var{coordinate:e,translateX:n,translateY:r}=t;return yn(dy,{["".concat(dy,"-right")]:St(n)&&e&&St(e.x)&&n>=e.x,["".concat(dy,"-left")]:St(n)&&e&&St(e.x)&&n<e.x,["".concat(dy,"-bottom")]:St(r)&&e&&St(e.y)&&r>=e.y,["".concat(dy,"-top")]:St(r)&&e&&St(e.y)&&r<e.y})}function GB(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offsetTopLeft:i,position:s,reverseDirection:o,tooltipDimension:a,viewBox:l,viewBoxDimension:c}=t;if(s&&St(s[r]))return s[r];var u=n[r]-a-(i>0?i:0),d=n[r]+i;if(e[r])return o[r]?u:d;var h=l[r];if(h==null)return 0;if(o[r]){var f=u,p=h;return f<p?Math.max(d,h):Math.max(u,h)}if(c==null)return 0;var m=d+a,y=h+c;return m>y?Math.max(u,h):Math.max(d,h)}function _Ce(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function ECe(t){var{allowEscapeViewBox:e,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:s,tooltipBox:o,useTranslate3d:a,viewBox:l}=t,c,u,d;return o.height>0&&o.width>0&&n?(u=GB({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:o.width,viewBox:l,viewBoxDimension:l.width}),d=GB({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:o.height,viewBox:l,viewBoxDimension:l.height}),c=_Ce({translateX:u,translateY:d,useTranslate3d:a})):c=ACe,{cssProperties:c,cssClasses:ICe({translateX:u,translateY:d,coordinate:n})}}function qB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Mw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qB(Object(n),!0).forEach(function(r){qT(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qT(t,e,n){return(e=TCe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function TCe(t){var e=$Ce(t,"string");return typeof e=="symbol"?e:e+""}function $Ce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class PCe extends N.PureComponent{constructor(){super(...arguments),qT(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),qT(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,i,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:s,coordinate:o,hasPayload:a,isAnimationActive:l,offset:c,position:u,reverseDirection:d,useTranslate3d:h,viewBox:f,wrapperStyle:p,lastBoundingBox:m,innerRef:y,hasPortalFromProps:g}=this.props,{cssClasses:v,cssProperties:x}=ECe({allowEscapeViewBox:n,coordinate:o,offsetTopLeft:c,position:u,reverseDirection:d,tooltipBox:{height:m.height,width:m.width},useTranslate3d:h,viewBox:f}),b=g?{}:Mw(Mw({transition:l&&e?"transform ".concat(r,"ms ").concat(i):void 0},x),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&a?"visible":"hidden",position:"absolute",top:0,left:0}),S=Mw(Mw({},b),{},{visibility:!this.state.dismissed&&e&&a?"visible":"hidden"},p);return N.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:v,style:S,ref:y},s)}}var RCe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),gh={devToolsEnabled:!1,isSsr:RCe()},DY=()=>gt(t=>t.rootProps.accessibilityLayer);function HT(){return HT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},HT.apply(null,arguments)}function HB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function KB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HB(Object(n),!0).forEach(function(r){OCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function OCe(t,e,n){return(e=DCe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function DCe(t){var e=LCe(t,"string");return typeof e=="symbol"?e:e+""}function LCe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var XB={curveBasisClosed:p2e,curveBasisOpen:m2e,curveBasis:f2e,curveBumpX:Qwe,curveBumpY:e2e,curveLinearClosed:g2e,curveLinear:wC,curveMonotoneX:y2e,curveMonotoneY:v2e,curveNatural:x2e,curveStep:b2e,curveStepAfter:k2e,curveStepBefore:w2e},Fw=t=>Ps(t.x)&&Ps(t.y),hy=t=>t.x,fy=t=>t.y,MCe=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(Iv(t));return(n==="curveMonotone"||n==="curveBump")&&e?XB["".concat(n).concat(e==="vertical"?"Y":"X")]:XB[n]||wC},FCe=t=>{var{type:e="linear",points:n=[],baseLine:r,layout:i,connectNulls:s=!1}=t,o=MCe(e,i),a=s?n.filter(Fw):n,l;if(Array.isArray(r)){var c=s?r.filter(d=>Fw(d)):r,u=a.map((d,h)=>KB(KB({},d),{},{base:c[h]}));return i==="vertical"?l=Tw().y(fy).x1(hy).x0(d=>d.base.x):l=Tw().x(hy).y1(fy).y0(d=>d.base.y),l.defined(Fw).curve(o),l(u)}return i==="vertical"&&St(r)?l=Tw().y(fy).x1(hy).x0(r):St(r)?l=Tw().x(hy).y1(fy).y0(r):l=QK().x(hy).y(fy),l.defined(Fw).curve(o),l(a)},F4=t=>{var{className:e,points:n,path:r,pathRef:i}=t;if((!n||!n.length)&&!r)return null;var s=n&&n.length?FCe(t):r;return N.createElement("path",HT({},Yo(t),v4(t),{className:yn("recharts-curve",e),d:s===null?void 0:s,ref:i}))},jCe=["x","y","top","left","width","height","className"];function KT(){return KT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},KT.apply(null,arguments)}function YB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function BCe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YB(Object(n),!0).forEach(function(r){zCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zCe(t,e,n){return(e=UCe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function UCe(t){var e=VCe(t,"string");return typeof e=="symbol"?e:e+""}function VCe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function WCe(t,e){if(t==null)return{};var n,r,i=GCe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function GCe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var qCe=(t,e,n,r,i,s)=>"M".concat(t,",").concat(i,"v").concat(r,"M").concat(s,",").concat(e,"h").concat(n),HCe=t=>{var{x:e=0,y:n=0,top:r=0,left:i=0,width:s=0,height:o=0,className:a}=t,l=WCe(t,jCe),c=BCe({x:e,y:n,top:r,left:i,width:s,height:o},l);return!St(e)||!St(n)||!St(s)||!St(o)||!St(r)||!St(i)?null:N.createElement("path",KT({},Zs(c),{className:yn("recharts-cross",a),d:qCe(e,n,s,o,r,i)}))};function KCe(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function ZB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function XCe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZB(Object(n),!0).forEach(function(r){YCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function YCe(t,e,n){return(e=ZCe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ZCe(t){var e=JCe(t,"string");return typeof e=="symbol"?e:e+""}function JCe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ls(t,e){var n=XCe({},t),r=e,i=Object.keys(e),s=i.reduce((o,a)=>(o[a]===void 0&&r[a]!==void 0&&(o[a]=r[a]),o),n);return s}function QCe(){}function eNe(t){return t!=null}function JB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function QB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JB(Object(n),!0).forEach(function(r){tNe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tNe(t,e,n){return(e=nNe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nNe(t){var e=rNe(t,"string");return typeof e=="symbol"?e:e+""}function rNe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var iNe=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),LY=(t,e,n)=>t.map(r=>"".concat(iNe(r)," ").concat(e,"ms ").concat(n)).join(","),sNe=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(i=>r.includes(i))),q1=(t,e)=>Object.keys(e).reduce((n,r)=>QB(QB({},n),{},{[r]:t(r,e[r])}),{});function ez(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ts(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ez(Object(n),!0).forEach(function(r){oNe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ez(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function oNe(t,e,n){return(e=aNe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aNe(t){var e=lNe(t,"string");return typeof e=="symbol"?e:e+""}function lNe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var zk=(t,e,n)=>t+(e-t)*n,XT=t=>{var{from:e,to:n}=t;return e!==n},MY=(t,e,n)=>{var r=q1((i,s)=>{if(XT(s)){var[o,a]=t(s.from,s.to,s.velocity);return ts(ts({},s),{},{from:o,velocity:a})}return s},e);return n<1?q1((i,s)=>XT(s)?ts(ts({},s),{},{velocity:zk(s.velocity,r[i].velocity,n),from:zk(s.from,r[i].from,n)}):s,e):MY(t,r,n-1)};function cNe(t,e,n,r,i,s){var o,a=r.reduce((h,f)=>ts(ts({},h),{},{[f]:{from:t[f],velocity:0,to:e[f]}}),{}),l=()=>q1((h,f)=>f.from,a),c=()=>!Object.values(a).filter(XT).length,u=null,d=h=>{o||(o=h);var f=h-o,p=f/n.dt;a=MY(n,a,p),i(ts(ts(ts({},t),e),l())),o=h,c()||(u=s.setTimeout(d))};return()=>(u=s.setTimeout(d),()=>{u()})}function uNe(t,e,n,r,i,s,o){var a=null,l=i.reduce((d,h)=>ts(ts({},d),{},{[h]:[t[h],e[h]]}),{}),c,u=d=>{c||(c=d);var h=(d-c)/r,f=q1((m,y)=>zk(...y,n(h)),l);if(s(ts(ts(ts({},t),e),f)),h<1)a=o.setTimeout(u);else{var p=q1((m,y)=>zk(...y,n(1)),l);s(ts(ts(ts({},t),e),p))}};return()=>(a=o.setTimeout(u),()=>{a()})}const dNe=(t,e,n,r,i,s)=>{var o=sNe(t,e);return n.isStepper===!0?cNe(t,e,n,o,i,s):uNe(t,e,n,r,o,i,s)};var Uk=1e-4,FY=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],jY=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),tz=(t,e)=>n=>{var r=FY(t,e);return jY(r,n)},hNe=(t,e)=>n=>{var r=FY(t,e),i=[...r.map((s,o)=>s*o).slice(1),0];return jY(i,n)},nz=function(){for(var e,n,r,i,s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];if(o.length===1)switch(o[0]){case"linear":[e,r,n,i]=[0,0,1,1];break;case"ease":[e,r,n,i]=[.25,.1,.25,1];break;case"ease-in":[e,r,n,i]=[.42,0,1,1];break;case"ease-out":[e,r,n,i]=[.42,0,.58,1];break;case"ease-in-out":[e,r,n,i]=[0,0,.58,1];break;default:{var l=o[0].split("(");l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4&&([e,r,n,i]=l[1].split(")")[0].split(",").map(p=>parseFloat(p)))}}else o.length===4&&([e,r,n,i]=o);var c=tz(e,n),u=tz(r,i),d=hNe(e,n),h=p=>p>1?1:p<0?0:p,f=p=>{for(var m=p>1?1:p,y=m,g=0;g<8;++g){var v=c(y)-m,x=d(y);if(Math.abs(v-m)<Uk||x<Uk)return u(y);y=h(y-v/x)}return u(y)};return f.isStepper=!1,f},fNe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=e,s=(o,a,l)=>{var c=-(o-a)*n,u=l*r,d=l+(c-u)*i/1e3,h=l*i/1e3+o;return Math.abs(h-a)<Uk&&Math.abs(d)<Uk?[a,0]:[h,d]};return s.isStepper=!0,s.dt=i,s},pNe=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return nz(t);case"spring":return fNe();default:if(t.split("(")[0]==="cubic-bezier")return nz(t)}return typeof t=="function"?t:null};function mNe(t){var e,n=()=>null,r=!1,i=null,s=o=>{if(!r){if(Array.isArray(o)){if(!o.length)return;var a=o,[l,...c]=a;if(typeof l=="number"){i=t.setTimeout(s.bind(null,c),l);return}s(l),i=t.setTimeout(s.bind(null,c));return}typeof o=="string"&&(e=o,n(e)),typeof o=="object"&&(e=o,n(e)),typeof o=="function"&&o()}};return{stop:()=>{r=!0},start:o=>{r=!1,i&&(i(),i=null),s(o)},subscribe:o=>(n=o,()=>{n=()=>null}),getTimeoutController:()=>t}}class gNe{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,s=o=>{o-r>=n?e(o):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(s))};return i=requestAnimationFrame(s),()=>{cancelAnimationFrame(i)}}}function yNe(){return mNe(new gNe)}var vNe=N.createContext(yNe);function xNe(t,e){var n=N.useContext(vNe);return N.useMemo(()=>e??n(t),[t,e,n])}var bNe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},rz={t:0},r_={t:1};function $v(t){var e=ls(t,bNe),{isActive:n,canBegin:r,duration:i,easing:s,begin:o,onAnimationEnd:a,onAnimationStart:l,children:c}=e,u=xNe(e.animationId,e.animationManager),[d,h]=N.useState(n?rz:r_),f=N.useRef(null);return N.useEffect(()=>{n||h(r_)},[n]),N.useEffect(()=>{if(!n||!r)return QCe;var p=dNe(rz,r_,pNe(s),i,h,u.getTimeoutController()),m=()=>{f.current=p()};return u.start([l,o,m,i,a]),()=>{u.stop(),f.current&&f.current(),a()}},[n,r,i,s,o,l,a,u]),c(d.t)}function Pv(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=N.useRef(U1(e)),r=N.useRef(t);return r.current!==t&&(n.current=U1(e),r.current=t),n.current}var wNe=["radius"],kNe=["radius"];function iz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function sz(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iz(Object(n),!0).forEach(function(r){SNe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function SNe(t,e,n){return(e=CNe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function CNe(t){var e=NNe(t,"string");return typeof e=="symbol"?e:e+""}function NNe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vk(){return Vk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vk.apply(null,arguments)}function oz(t,e){if(t==null)return{};var n,r,i=ANe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function ANe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var az=(t,e,n,r,i)=>{var s=Math.min(Math.abs(n)/2,Math.abs(r)/2),o=r>=0?1:-1,a=n>=0?1:-1,l=r>=0&&n>=0||r<0&&n<0?1:0,c;if(s>0&&i instanceof Array){for(var u=[0,0,0,0],d=0,h=4;d<h;d++)u[d]=i[d]>s?s:i[d];c="M".concat(t,",").concat(e+o*u[0]),u[0]>0&&(c+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(l,",").concat(t+a*u[0],",").concat(e)),c+="L ".concat(t+n-a*u[1],",").concat(e),u[1]>0&&(c+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(l,`,
        `).concat(t+n,",").concat(e+o*u[1])),c+="L ".concat(t+n,",").concat(e+r-o*u[2]),u[2]>0&&(c+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(l,`,
        `).concat(t+n-a*u[2],",").concat(e+r)),c+="L ".concat(t+a*u[3],",").concat(e+r),u[3]>0&&(c+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(l,`,
        `).concat(t,",").concat(e+r-o*u[3])),c+="Z"}else if(s>0&&i===+i&&i>0){var f=Math.min(s,i);c="M ".concat(t,",").concat(e+o*f,`
            A `).concat(f,",").concat(f,",0,0,").concat(l,",").concat(t+a*f,",").concat(e,`
            L `).concat(t+n-a*f,",").concat(e,`
            A `).concat(f,",").concat(f,",0,0,").concat(l,",").concat(t+n,",").concat(e+o*f,`
            L `).concat(t+n,",").concat(e+r-o*f,`
            A `).concat(f,",").concat(f,",0,0,").concat(l,",").concat(t+n-a*f,",").concat(e+r,`
            L `).concat(t+a*f,",").concat(e+r,`
            A `).concat(f,",").concat(f,",0,0,").concat(l,",").concat(t,",").concat(e+r-o*f," Z")}else c="M ".concat(t,",").concat(e," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return c},INe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},BY=t=>{var e=ls(t,INe),n=N.useRef(null),[r,i]=N.useState(-1);N.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var q=n.current.getTotalLength();q&&i(q)}catch{}},[]);var{x:s,y:o,width:a,height:l,radius:c,className:u}=e,{animationEasing:d,animationDuration:h,animationBegin:f,isAnimationActive:p,isUpdateAnimationActive:m}=e,y=N.useRef(a),g=N.useRef(l),v=N.useRef(s),x=N.useRef(o),b=N.useMemo(()=>({x:s,y:o,width:a,height:l,radius:c}),[s,o,a,l,c]),S=Pv(b,"rectangle-");if(s!==+s||o!==+o||a!==+a||l!==+l||a===0||l===0)return null;var A=yn("recharts-rectangle",u);if(!m){var E=Zs(e),I=oz(E,wNe);return N.createElement("path",Vk({},I,{radius:typeof c=="number"?c:void 0,className:A,d:az(s,o,a,l,c)}))}var T=y.current,O=g.current,$=v.current,R=x.current,F="0px ".concat(r===-1?1:r,"px"),L="".concat(r,"px 0px"),U=LY(["strokeDasharray"],h,typeof d=="string"?d:void 0);return N.createElement($v,{animationId:S,key:S,canBegin:r>0,duration:h,easing:d,isActive:m,begin:f},q=>{var K=$r(T,a,q),j=$r(O,l,q),Y=$r($,s,q),ae=$r(R,o,q);n.current&&(y.current=K,g.current=j,v.current=Y,x.current=ae);var le;p?q>0?le={transition:U,strokeDasharray:L}:le={strokeDasharray:F}:le={strokeDasharray:L};var M=Zs(e),V=oz(M,kNe);return N.createElement("path",Vk({},V,{radius:typeof c=="number"?c:void 0,className:A,d:az(Y,ae,K,j,c),ref:n,style:sz(sz({},le),e.style)}))})};function zY(t){var{cx:e,cy:n,radius:r,startAngle:i,endAngle:s}=t,o=oi(e,n,r,i),a=oi(e,n,r,s);return{points:[o,a],cx:e,cy:n,radius:r,startAngle:i,endAngle:s}}function YT(){return YT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},YT.apply(null,arguments)}var _Ne=(t,e)=>{var n=ji(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},jw=t=>{var{cx:e,cy:n,radius:r,angle:i,sign:s,isExternal:o,cornerRadius:a,cornerIsExternal:l}=t,c=a*(o?1:-1)+r,u=Math.asin(a/c)/jk,d=l?i:i+s*u,h=oi(e,n,c,d),f=oi(e,n,r,d),p=l?i-s*u:i,m=oi(e,n,c*Math.cos(u*jk),p);return{center:h,circleTangency:f,lineTangency:m,theta:u}},UY=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:s,endAngle:o}=t,a=_Ne(s,o),l=s+a,c=oi(e,n,i,s),u=oi(e,n,i,l),d="M ".concat(c.x,",").concat(c.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(a)>180),",").concat(+(s>l),`,
    `).concat(u.x,",").concat(u.y,`
  `);if(r>0){var h=oi(e,n,r,s),f=oi(e,n,r,l);d+="L ".concat(f.x,",").concat(f.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(a)>180),",").concat(+(s<=l),`,
            `).concat(h.x,",").concat(h.y," Z")}else d+="L ".concat(e,",").concat(n," Z");return d},ENe=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:a,startAngle:l,endAngle:c}=t,u=ji(c-l),{circleTangency:d,lineTangency:h,theta:f}=jw({cx:e,cy:n,radius:i,angle:l,sign:u,cornerRadius:s,cornerIsExternal:a}),{circleTangency:p,lineTangency:m,theta:y}=jw({cx:e,cy:n,radius:i,angle:c,sign:-u,cornerRadius:s,cornerIsExternal:a}),g=a?Math.abs(l-c):Math.abs(l-c)-f-y;if(g<0)return o?"M ".concat(h.x,",").concat(h.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):UY({cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:l,endAngle:c});var v="M ".concat(h.x,",").concat(h.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(u<0),",").concat(d.x,",").concat(d.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(g>180),",").concat(+(u<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(u<0),",").concat(m.x,",").concat(m.y,`
  `);if(r>0){var{circleTangency:x,lineTangency:b,theta:S}=jw({cx:e,cy:n,radius:r,angle:l,sign:u,isExternal:!0,cornerRadius:s,cornerIsExternal:a}),{circleTangency:A,lineTangency:E,theta:I}=jw({cx:e,cy:n,radius:r,angle:c,sign:-u,isExternal:!0,cornerRadius:s,cornerIsExternal:a}),T=a?Math.abs(l-c):Math.abs(l-c)-S-I;if(T<0&&s===0)return"".concat(v,"L").concat(e,",").concat(n,"Z");v+="L".concat(E.x,",").concat(E.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(u<0),",").concat(A.x,",").concat(A.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(T>180),",").concat(+(u>0),",").concat(x.x,",").concat(x.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(u<0),",").concat(b.x,",").concat(b.y,"Z")}else v+="L".concat(e,",").concat(n,"Z");return v},TNe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},VY=t=>{var e=ls(t,TNe),{cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:o,forceCornerRadius:a,cornerIsExternal:l,startAngle:c,endAngle:u,className:d}=e;if(s<i||c===u)return null;var h=yn("recharts-sector",d),f=s-i,p=Es(o,f,0,!0),m;return p>0&&Math.abs(c-u)<360?m=ENe({cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:Math.min(p,f/2),forceCornerRadius:a,cornerIsExternal:l,startAngle:c,endAngle:u}):m=UY({cx:n,cy:r,innerRadius:i,outerRadius:s,startAngle:c,endAngle:u}),N.createElement("path",YT({},Zs(e),{className:h,d:m}))};function $Ne(t,e,n){var r,i,s,o;if(t==="horizontal")r=e.x,s=r,i=n.top,o=n.top+n.height;else if(t==="vertical")i=e.y,o=i,r=n.left,s=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var{cx:a,cy:l,innerRadius:c,outerRadius:u,angle:d}=e,h=oi(a,l,c,d),f=oi(a,l,u,d);r=h.x,i=h.y,s=f.x,o=f.y}else return zY(e);return[{x:r,y:i},{x:s,y:o}]}var WY={},GY={},qY={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=E4;function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n})(qY);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=qY;function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n})(GY);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=T4,n=GY;function r(i,s,o){o&&typeof o!="number"&&e.isIterateeCall(i,s,o)&&(s=o=void 0),i=n.toFinite(i),s===void 0?(s=i,i=0):s=n.toFinite(s),o=o===void 0?i<s?1:-1:n.toFinite(o);const a=Math.max(Math.ceil((s-i)/(o||1)),0),l=new Array(a);for(let c=0;c<a;c++)l[c]=i,i+=o;return l}t.range=r})(WY);var PNe=WY.range;const HY=Ic(PNe);function Vd(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function RNe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function j4(t){let e,n,r;t.length!==2?(e=Vd,n=(a,l)=>Vd(t(a),l),r=(a,l)=>t(a)-l):(e=t===Vd||t===RNe?t:ONe,n=t,r=t);function i(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const d=c+u>>>1;n(a[d],l)<0?c=d+1:u=d}while(c<u)}return c}function s(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const d=c+u>>>1;n(a[d],l)<=0?c=d+1:u=d}while(c<u)}return c}function o(a,l,c=0,u=a.length){const d=i(a,l,c,u-1);return d>c&&r(a[d-1],l)>-r(a[d],l)?d-1:d}return{left:i,center:o,right:s}}function ONe(){return 0}function KY(t){return t===null?NaN:+t}function*DNe(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of t)(r=e(r,++n,t))!=null&&(r=+r)>=r&&(yield r)}}const LNe=j4(Vd),MNe=LNe.right;j4(KY).center;const Rv=MNe;class lz extends Map{constructor(e,n=BNe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(cz(this,e))}has(e){return super.has(cz(this,e))}set(e,n){return super.set(FNe(this,e),n)}delete(e){return super.delete(jNe(this,e))}}function cz({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function FNe({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function jNe({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function BNe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function zNe(t=Vd){if(t===Vd)return XY;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function XY(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const UNe=Math.sqrt(50),VNe=Math.sqrt(10),WNe=Math.sqrt(2);function Wk(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=UNe?10:s>=VNe?5:s>=WNe?2:1;let a,l,c;return i<0?(c=Math.pow(10,-i)/o,a=Math.round(t*c),l=Math.round(e*c),a/c<t&&++a,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*o,a=Math.round(t/c),l=Math.round(e/c),a*c<t&&++a,l*c>e&&--l),l<a&&.5<=n&&n<2?Wk(t,e,n*2):[a,l,c]}function ZT(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,o]=r?Wk(e,t,n):Wk(t,e,n);if(!(s>=i))return[];const a=s-i+1,l=new Array(a);if(r)if(o<0)for(let c=0;c<a;++c)l[c]=(s-c)/-o;else for(let c=0;c<a;++c)l[c]=(s-c)*o;else if(o<0)for(let c=0;c<a;++c)l[c]=(i+c)/-o;else for(let c=0;c<a;++c)l[c]=(i+c)*o;return l}function JT(t,e,n){return e=+e,t=+t,n=+n,Wk(t,e,n)[2]}function QT(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?JT(e,t,n):JT(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function uz(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function dz(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function YY(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?XY:zNe(i);r>n;){if(r-n>600){const l=r-n+1,c=e-n+1,u=Math.log(l),d=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*d*(l-d)/l)*(c-l/2<0?-1:1),f=Math.max(n,Math.floor(e-c*d/l+h)),p=Math.min(r,Math.floor(e+(l-c)*d/l+h));YY(t,e,f,p,i)}const s=t[e];let o=n,a=r;for(py(t,n,e),i(t[r],s)>0&&py(t,n,r);o<a;){for(py(t,o,a),++o,--a;i(t[o],s)<0;)++o;for(;i(t[a],s)>0;)--a}i(t[n],s)===0?py(t,n,a):(++a,py(t,a,r)),a<=e&&(n=a+1),e<=a&&(r=a-1)}return t}function py(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function GNe(t,e,n){if(t=Float64Array.from(DNe(t,n)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return dz(t);if(e>=1)return uz(t);var r,i=(r-1)*e,s=Math.floor(i),o=uz(YY(t,s).subarray(0,s+1)),a=dz(t.subarray(s+1));return o+(a-o)*(i-s)}}function qNe(t,e,n=KY){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,s=Math.floor(i),o=+n(t[s],s,t),a=+n(t[s+1],s+1,t);return o+(a-o)*(i-s)}}function HNe(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}function Ha(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Du(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const e3=Symbol("implicit");function B4(){var t=new lz,e=[],n=[],r=e3;function i(s){let o=t.get(s);if(o===void 0){if(r!==e3)return r;t.set(s,o=e.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new lz;for(const o of s)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return B4(e,n).unknown(r)},Ha.apply(i,arguments),i}function z4(){var t=B4().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,s,o,a=!1,l=0,c=0,u=.5;delete t.unknown;function d(){var h=e().length,f=i<r,p=f?i:r,m=f?r:i;s=(m-p)/Math.max(1,h-l+c*2),a&&(s=Math.floor(s)),p+=(m-p-s*(h-l))*u,o=s*(1-l),a&&(p=Math.round(p),o=Math.round(o));var y=HNe(h).map(function(g){return p+s*g});return n(f?y.reverse():y)}return t.domain=function(h){return arguments.length?(e(h),d()):e()},t.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,d()):[r,i]},t.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,a=!0,d()},t.bandwidth=function(){return o},t.step=function(){return s},t.round=function(h){return arguments.length?(a=!!h,d()):a},t.padding=function(h){return arguments.length?(l=Math.min(1,c=+h),d()):l},t.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),d()):l},t.paddingOuter=function(h){return arguments.length?(c=+h,d()):c},t.align=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),d()):u},t.copy=function(){return z4(e(),[r,i]).round(a).paddingInner(l).paddingOuter(c).align(u)},Ha.apply(d(),arguments)}function ZY(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return ZY(e())},t}function KNe(){return ZY(z4.apply(null,arguments).paddingInner(1))}function U4(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function JY(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Ov(){}var H1=.7,Gk=1/H1,qm="\\s*([+-]?\\d+)\\s*",K1="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",mc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",XNe=/^#([0-9a-f]{3,8})$/,YNe=new RegExp(`^rgb\\(${qm},${qm},${qm}\\)$`),ZNe=new RegExp(`^rgb\\(${mc},${mc},${mc}\\)$`),JNe=new RegExp(`^rgba\\(${qm},${qm},${qm},${K1}\\)$`),QNe=new RegExp(`^rgba\\(${mc},${mc},${mc},${K1}\\)$`),e5e=new RegExp(`^hsl\\(${K1},${mc},${mc}\\)$`),t5e=new RegExp(`^hsla\\(${K1},${mc},${mc},${K1}\\)$`),hz={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};U4(Ov,X1,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:fz,formatHex:fz,formatHex8:n5e,formatHsl:r5e,formatRgb:pz,toString:pz});function fz(){return this.rgb().formatHex()}function n5e(){return this.rgb().formatHex8()}function r5e(){return QY(this).formatHsl()}function pz(){return this.rgb().formatRgb()}function X1(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=XNe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?mz(e):n===3?new mo(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Bw(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Bw(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=YNe.exec(t))?new mo(e[1],e[2],e[3],1):(e=ZNe.exec(t))?new mo(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=JNe.exec(t))?Bw(e[1],e[2],e[3],e[4]):(e=QNe.exec(t))?Bw(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=e5e.exec(t))?vz(e[1],e[2]/100,e[3]/100,1):(e=t5e.exec(t))?vz(e[1],e[2]/100,e[3]/100,e[4]):hz.hasOwnProperty(t)?mz(hz[t]):t==="transparent"?new mo(NaN,NaN,NaN,0):null}function mz(t){return new mo(t>>16&255,t>>8&255,t&255,1)}function Bw(t,e,n,r){return r<=0&&(t=e=n=NaN),new mo(t,e,n,r)}function i5e(t){return t instanceof Ov||(t=X1(t)),t?(t=t.rgb(),new mo(t.r,t.g,t.b,t.opacity)):new mo}function t3(t,e,n,r){return arguments.length===1?i5e(t):new mo(t,e,n,r??1)}function mo(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}U4(mo,t3,JY(Ov,{brighter(t){return t=t==null?Gk:Math.pow(Gk,t),new mo(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?H1:Math.pow(H1,t),new mo(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new mo(Ff(this.r),Ff(this.g),Ff(this.b),qk(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:gz,formatHex:gz,formatHex8:s5e,formatRgb:yz,toString:yz}));function gz(){return`#${Nf(this.r)}${Nf(this.g)}${Nf(this.b)}`}function s5e(){return`#${Nf(this.r)}${Nf(this.g)}${Nf(this.b)}${Nf((isNaN(this.opacity)?1:this.opacity)*255)}`}function yz(){const t=qk(this.opacity);return`${t===1?"rgb(":"rgba("}${Ff(this.r)}, ${Ff(this.g)}, ${Ff(this.b)}${t===1?")":`, ${t})`}`}function qk(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ff(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Nf(t){return t=Ff(t),(t<16?"0":"")+t.toString(16)}function vz(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new xl(t,e,n,r)}function QY(t){if(t instanceof xl)return new xl(t.h,t.s,t.l,t.opacity);if(t instanceof Ov||(t=X1(t)),!t)return new xl;if(t instanceof xl)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(e===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-e)/a+2:o=(e-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new xl(o,a,l,t.opacity)}function o5e(t,e,n,r){return arguments.length===1?QY(t):new xl(t,e,n,r??1)}function xl(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}U4(xl,o5e,JY(Ov,{brighter(t){return t=t==null?Gk:Math.pow(Gk,t),new xl(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?H1:Math.pow(H1,t),new xl(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new mo(i_(t>=240?t-240:t+120,i,r),i_(t,i,r),i_(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new xl(xz(this.h),zw(this.s),zw(this.l),qk(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=qk(this.opacity);return`${t===1?"hsl(":"hsla("}${xz(this.h)}, ${zw(this.s)*100}%, ${zw(this.l)*100}%${t===1?")":`, ${t})`}`}}));function xz(t){return t=(t||0)%360,t<0?t+360:t}function zw(t){return Math.max(0,Math.min(1,t||0))}function i_(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const V4=t=>()=>t;function a5e(t,e){return function(n){return t+n*e}}function l5e(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function c5e(t){return(t=+t)==1?eZ:function(e,n){return n-e?l5e(e,n,t):V4(isNaN(e)?n:e)}}function eZ(t,e){var n=e-t;return n?a5e(t,n):V4(isNaN(t)?e:t)}const bz=function t(e){var n=c5e(e);function r(i,s){var o=n((i=t3(i)).r,(s=t3(s)).r),a=n(i.g,s.g),l=n(i.b,s.b),c=eZ(i.opacity,s.opacity);return function(u){return i.r=o(u),i.g=a(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=t,r}(1);function u5e(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function d5e(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function h5e(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Xg(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function f5e(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Hk(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function p5e(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Xg(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var n3=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,s_=new RegExp(n3.source,"g");function m5e(t){return function(){return t}}function g5e(t){return function(e){return t(e)+""}}function y5e(t,e){var n=n3.lastIndex=s_.lastIndex=0,r,i,s,o=-1,a=[],l=[];for(t=t+"",e=e+"";(r=n3.exec(t))&&(i=s_.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:Hk(r,i)})),n=s_.lastIndex;return n<e.length&&(s=e.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?g5e(l[0].x):m5e(e):(e=l.length,function(c){for(var u=0,d;u<e;++u)a[(d=l[u]).i]=d.x(c);return a.join("")})}function Xg(t,e){var n=typeof e,r;return e==null||n==="boolean"?V4(e):(n==="number"?Hk:n==="string"?(r=X1(e))?(e=r,bz):y5e:e instanceof X1?bz:e instanceof Date?f5e:d5e(e)?u5e:Array.isArray(e)?h5e:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?p5e:Hk)(t,e)}function W4(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function v5e(t,e){e===void 0&&(e=t,t=Xg);for(var n=0,r=e.length-1,i=e[0],s=new Array(r<0?0:r);n<r;)s[n]=t(i,i=e[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function x5e(t){return function(){return t}}function Kk(t){return+t}var wz=[0,1];function Hs(t){return t}function r3(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:x5e(isNaN(e)?NaN:.5)}function b5e(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function w5e(t,e,n){var r=t[0],i=t[1],s=e[0],o=e[1];return i<r?(r=r3(i,r),s=n(o,s)):(r=r3(r,i),s=n(s,o)),function(a){return s(r(a))}}function k5e(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=r3(t[o],t[o+1]),s[o]=n(e[o],e[o+1]);return function(a){var l=Rv(t,a,1,r)-1;return s[l](i[l](a))}}function Dv(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function UC(){var t=wz,e=wz,n=Xg,r,i,s,o=Hs,a,l,c;function u(){var h=Math.min(t.length,e.length);return o!==Hs&&(o=b5e(t[0],t[h-1])),a=h>2?k5e:w5e,l=c=null,d}function d(h){return h==null||isNaN(h=+h)?s:(l||(l=a(t.map(r),e,n)))(r(o(h)))}return d.invert=function(h){return o(i((c||(c=a(e,t.map(r),Hk)))(h)))},d.domain=function(h){return arguments.length?(t=Array.from(h,Kk),u()):t.slice()},d.range=function(h){return arguments.length?(e=Array.from(h),u()):e.slice()},d.rangeRound=function(h){return e=Array.from(h),n=W4,u()},d.clamp=function(h){return arguments.length?(o=h?!0:Hs,u()):o!==Hs},d.interpolate=function(h){return arguments.length?(n=h,u()):n},d.unknown=function(h){return arguments.length?(s=h,d):s},function(h,f){return r=h,i=f,u()}}function G4(){return UC()(Hs,Hs)}function S5e(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Xk(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function pg(t){return t=Xk(Math.abs(t)),t?t[1]:NaN}function C5e(t,e){return function(n,r){for(var i=n.length,s=[],o=0,a=t[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),s.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=t[o=(o+1)%t.length];return s.reverse().join(e)}}function N5e(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var A5e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Y1(t){if(!(e=A5e.exec(t)))throw new Error("invalid format: "+t);var e;return new q4({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Y1.prototype=q4.prototype;function q4(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}q4.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function I5e(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var tZ;function _5e(t,e){var n=Xk(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(tZ=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Xk(t,Math.max(0,e+s-1))[0]}function kz(t,e){var n=Xk(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Sz={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:S5e,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>kz(t*100,e),r:kz,s:_5e,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Cz(t){return t}var Nz=Array.prototype.map,Az=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function E5e(t){var e=t.grouping===void 0||t.thousands===void 0?Cz:C5e(Nz.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?Cz:N5e(Nz.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"−":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(d){d=Y1(d);var h=d.fill,f=d.align,p=d.sign,m=d.symbol,y=d.zero,g=d.width,v=d.comma,x=d.precision,b=d.trim,S=d.type;S==="n"?(v=!0,S="g"):Sz[S]||(x===void 0&&(x=12),b=!0,S="g"),(y||h==="0"&&f==="=")&&(y=!0,h="0",f="=");var A=m==="$"?n:m==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",E=m==="$"?r:/[%p]/.test(S)?o:"",I=Sz[S],T=/[defgprs%]/.test(S);x=x===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function O($){var R=A,F=E,L,U,q;if(S==="c")F=I($)+F,$="";else{$=+$;var K=$<0||1/$<0;if($=isNaN($)?l:I(Math.abs($),x),b&&($=I5e($)),K&&+$==0&&p!=="+"&&(K=!1),R=(K?p==="("?p:a:p==="-"||p==="("?"":p)+R,F=(S==="s"?Az[8+tZ/3]:"")+F+(K&&p==="("?")":""),T){for(L=-1,U=$.length;++L<U;)if(q=$.charCodeAt(L),48>q||q>57){F=(q===46?i+$.slice(L+1):$.slice(L))+F,$=$.slice(0,L);break}}}v&&!y&&($=e($,1/0));var j=R.length+$.length+F.length,Y=j<g?new Array(g-j+1).join(h):"";switch(v&&y&&($=e(Y+$,Y.length?g-F.length:1/0),Y=""),f){case"<":$=R+$+F+Y;break;case"=":$=R+Y+$+F;break;case"^":$=Y.slice(0,j=Y.length>>1)+R+$+F+Y.slice(j);break;default:$=Y+R+$+F;break}return s($)}return O.toString=function(){return d+""},O}function u(d,h){var f=c((d=Y1(d),d.type="f",d)),p=Math.max(-8,Math.min(8,Math.floor(pg(h)/3)))*3,m=Math.pow(10,-p),y=Az[8+p/3];return function(g){return f(m*g)+y}}return{format:c,formatPrefix:u}}var Uw,H4,nZ;T5e({thousands:",",grouping:[3],currency:["$",""]});function T5e(t){return Uw=E5e(t),H4=Uw.format,nZ=Uw.formatPrefix,Uw}function $5e(t){return Math.max(0,-pg(Math.abs(t)))}function P5e(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(pg(e)/3)))*3-pg(Math.abs(t)))}function R5e(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,pg(e)-pg(t))+1}function rZ(t,e,n,r){var i=QT(t,e,n),s;switch(r=Y1(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=P5e(i,o))&&(r.precision=s),nZ(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=R5e(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=$5e(i))&&(r.precision=s-(r.type==="%")*2);break}}return H4(r)}function yh(t){var e=t.domain;return t.ticks=function(n){var r=e();return ZT(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return rZ(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,o=r[i],a=r[s],l,c,u=10;for(a<o&&(c=o,o=a,a=c,c=i,i=s,s=c);u-- >0;){if(c=JT(o,a,n),c===l)return r[i]=o,r[s]=a,e(r);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return t},t}function iZ(){var t=G4();return t.copy=function(){return Dv(t,iZ())},Ha.apply(t,arguments),yh(t)}function sZ(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,Kk),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return sZ(t).unknown(e)},t=arguments.length?Array.from(t,Kk):[0,1],yh(n)}function oZ(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],s=t[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),t[n]=e.floor(i),t[r]=e.ceil(s),t}function Iz(t){return Math.log(t)}function _z(t){return Math.exp(t)}function O5e(t){return-Math.log(-t)}function D5e(t){return-Math.exp(-t)}function L5e(t){return isFinite(t)?+("1e"+t):t<0?0:t}function M5e(t){return t===10?L5e:t===Math.E?Math.exp:e=>Math.pow(t,e)}function F5e(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function Ez(t){return(e,n)=>-t(-e,n)}function K4(t){const e=t(Iz,_z),n=e.domain;let r=10,i,s;function o(){return i=F5e(r),s=M5e(r),n()[0]<0?(i=Ez(i),s=Ez(s),t(O5e,D5e)):t(Iz,_z),e}return e.base=function(a){return arguments.length?(r=+a,o()):r},e.domain=function(a){return arguments.length?(n(a),o()):n()},e.ticks=a=>{const l=n();let c=l[0],u=l[l.length-1];const d=u<c;d&&([c,u]=[u,c]);let h=i(c),f=i(u),p,m;const y=a==null?10:+a;let g=[];if(!(r%1)&&f-h<y){if(h=Math.floor(h),f=Math.ceil(f),c>0){for(;h<=f;++h)for(p=1;p<r;++p)if(m=h<0?p/s(-h):p*s(h),!(m<c)){if(m>u)break;g.push(m)}}else for(;h<=f;++h)for(p=r-1;p>=1;--p)if(m=h>0?p/s(-h):p*s(h),!(m<c)){if(m>u)break;g.push(m)}g.length*2<y&&(g=ZT(c,u,y))}else g=ZT(h,f,Math.min(f-h,y)).map(s);return d?g.reverse():g},e.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=Y1(l)).precision==null&&(l.trim=!0),l=H4(l)),a===1/0)return l;const c=Math.max(1,r*a/e.ticks().length);return u=>{let d=u/s(Math.round(i(u)));return d*r<r-.5&&(d*=r),d<=c?l(u):""}},e.nice=()=>n(oZ(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),e}function aZ(){const t=K4(UC()).domain([1,10]);return t.copy=()=>Dv(t,aZ()).base(t.base()),Ha.apply(t,arguments),t}function Tz(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function $z(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function X4(t){var e=1,n=t(Tz(e),$z(e));return n.constant=function(r){return arguments.length?t(Tz(e=+r),$z(e)):e},yh(n)}function lZ(){var t=X4(UC());return t.copy=function(){return Dv(t,lZ()).constant(t.constant())},Ha.apply(t,arguments)}function Pz(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function j5e(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function B5e(t){return t<0?-t*t:t*t}function Y4(t){var e=t(Hs,Hs),n=1;function r(){return n===1?t(Hs,Hs):n===.5?t(j5e,B5e):t(Pz(n),Pz(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},yh(e)}function Z4(){var t=Y4(UC());return t.copy=function(){return Dv(t,Z4()).exponent(t.exponent())},Ha.apply(t,arguments),t}function z5e(){return Z4.apply(null,arguments).exponent(.5)}function Rz(t){return Math.sign(t)*t*t}function U5e(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function cZ(){var t=G4(),e=[0,1],n=!1,r;function i(s){var o=U5e(t(s));return isNaN(o)?r:n?Math.round(o):o}return i.invert=function(s){return t.invert(Rz(s))},i.domain=function(s){return arguments.length?(t.domain(s),i):t.domain()},i.range=function(s){return arguments.length?(t.range((e=Array.from(s,Kk)).map(Rz)),i):e.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(n=!!s,i):n},i.clamp=function(s){return arguments.length?(t.clamp(s),i):t.clamp()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return cZ(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Ha.apply(i,arguments),yh(i)}function uZ(){var t=[],e=[],n=[],r;function i(){var o=0,a=Math.max(1,e.length);for(n=new Array(a-1);++o<a;)n[o-1]=qNe(t,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:e[Rv(n,o)]}return s.invertExtent=function(o){var a=e.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:t[0],a<n.length?n[a]:t[t.length-1]]},s.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let a of o)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(Vd),i()},s.range=function(o){return arguments.length?(e=Array.from(o),i()):e.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return uZ().domain(t).range(e).unknown(r)},Ha.apply(s,arguments)}function dZ(){var t=0,e=1,n=1,r=[.5],i=[0,1],s;function o(l){return l!=null&&l<=l?i[Rv(r,l,0,n)]:s}function a(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return o}return o.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,a()):[t,e]},o.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,a()):i.slice()},o.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[t,r[0]]:c>=n?[r[n-1],e]:[r[c-1],r[c]]},o.unknown=function(l){return arguments.length&&(s=l),o},o.thresholds=function(){return r.slice()},o.copy=function(){return dZ().domain([t,e]).range(i).unknown(s)},Ha.apply(yh(o),arguments)}function hZ(){var t=[.5],e=[0,1],n,r=1;function i(s){return s!=null&&s<=s?e[Rv(t,s,0,r)]:n}return i.domain=function(s){return arguments.length?(t=Array.from(s),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(s){return arguments.length?(e=Array.from(s),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(s){var o=e.indexOf(s);return[t[o-1],t[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return hZ().domain(t).range(e).unknown(n)},Ha.apply(i,arguments)}const o_=new Date,a_=new Date;function Ei(t,e,n,r){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const l=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;let c;do l.push(c=new Date(+s)),e(s,a),t(s);while(c<s&&s<o);return l},i.filter=s=>Ei(o=>{if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;e(o,-1),!s(o););else for(;--a>=0;)for(;e(o,1),!s(o););}),n&&(i.count=(s,o)=>(o_.setTime(+s),a_.setTime(+o),t(o_),t(a_),Math.floor(n(o_,a_))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const Yk=Ei(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Yk.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Ei(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Yk);Yk.range;const su=1e3,Ta=su*60,ou=Ta*60,Su=ou*24,J4=Su*7,Oz=Su*30,l_=Su*365,Af=Ei(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*su)},(t,e)=>(e-t)/su,t=>t.getUTCSeconds());Af.range;const Q4=Ei(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*su)},(t,e)=>{t.setTime(+t+e*Ta)},(t,e)=>(e-t)/Ta,t=>t.getMinutes());Q4.range;const eR=Ei(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Ta)},(t,e)=>(e-t)/Ta,t=>t.getUTCMinutes());eR.range;const tR=Ei(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*su-t.getMinutes()*Ta)},(t,e)=>{t.setTime(+t+e*ou)},(t,e)=>(e-t)/ou,t=>t.getHours());tR.range;const nR=Ei(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*ou)},(t,e)=>(e-t)/ou,t=>t.getUTCHours());nR.range;const Lv=Ei(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ta)/Su,t=>t.getDate()-1);Lv.range;const VC=Ei(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Su,t=>t.getUTCDate()-1);VC.range;const fZ=Ei(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Su,t=>Math.floor(t/Su));fZ.range;function Ap(t){return Ei(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Ta)/J4)}const WC=Ap(0),Zk=Ap(1),V5e=Ap(2),W5e=Ap(3),mg=Ap(4),G5e=Ap(5),q5e=Ap(6);WC.range;Zk.range;V5e.range;W5e.range;mg.range;G5e.range;q5e.range;function Ip(t){return Ei(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/J4)}const GC=Ip(0),Jk=Ip(1),H5e=Ip(2),K5e=Ip(3),gg=Ip(4),X5e=Ip(5),Y5e=Ip(6);GC.range;Jk.range;H5e.range;K5e.range;gg.range;X5e.range;Y5e.range;const rR=Ei(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());rR.range;const iR=Ei(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());iR.range;const Cu=Ei(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Cu.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ei(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Cu.range;const Nu=Ei(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Nu.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ei(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Nu.range;function pZ(t,e,n,r,i,s){const o=[[Af,1,su],[Af,5,5*su],[Af,15,15*su],[Af,30,30*su],[s,1,Ta],[s,5,5*Ta],[s,15,15*Ta],[s,30,30*Ta],[i,1,ou],[i,3,3*ou],[i,6,6*ou],[i,12,12*ou],[r,1,Su],[r,2,2*Su],[n,1,J4],[e,1,Oz],[e,3,3*Oz],[t,1,l_]];function a(c,u,d){const h=u<c;h&&([c,u]=[u,c]);const f=d&&typeof d.range=="function"?d:l(c,u,d),p=f?f.range(c,+u+1):[];return h?p.reverse():p}function l(c,u,d){const h=Math.abs(u-c)/d,f=j4(([,,y])=>y).right(o,h);if(f===o.length)return t.every(QT(c/l_,u/l_,d));if(f===0)return Yk.every(Math.max(QT(c,u,d),1));const[p,m]=o[h/o[f-1][2]<o[f][2]/h?f-1:f];return p.every(m)}return[a,l]}const[Z5e,J5e]=pZ(Nu,iR,GC,fZ,nR,eR),[Q5e,eAe]=pZ(Cu,rR,WC,Lv,tR,Q4);function c_(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function u_(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function my(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function tAe(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,s=t.days,o=t.shortDays,a=t.months,l=t.shortMonths,c=gy(i),u=yy(i),d=gy(s),h=yy(s),f=gy(o),p=yy(o),m=gy(a),y=yy(a),g=gy(l),v=yy(l),x={a:K,A:j,b:Y,B:ae,c:null,d:Bz,e:Bz,f:CAe,g:OAe,G:LAe,H:wAe,I:kAe,j:SAe,L:mZ,m:NAe,M:AAe,p:le,q:M,Q:Vz,s:Wz,S:IAe,u:_Ae,U:EAe,V:TAe,w:$Ae,W:PAe,x:null,X:null,y:RAe,Y:DAe,Z:MAe,"%":Uz},b={a:V,A:H,b:J,B:oe,c:null,d:zz,e:zz,f:zAe,g:ZAe,G:QAe,H:FAe,I:jAe,j:BAe,L:yZ,m:UAe,M:VAe,p:ce,q:ge,Q:Vz,s:Wz,S:WAe,u:GAe,U:qAe,V:HAe,w:KAe,W:XAe,x:null,X:null,y:YAe,Y:JAe,Z:eIe,"%":Uz},S={a:O,A:$,b:R,B:F,c:L,d:Fz,e:Fz,f:yAe,g:Mz,G:Lz,H:jz,I:jz,j:fAe,L:gAe,m:hAe,M:pAe,p:T,q:dAe,Q:xAe,s:bAe,S:mAe,u:oAe,U:aAe,V:lAe,w:sAe,W:cAe,x:U,X:q,y:Mz,Y:Lz,Z:uAe,"%":vAe};x.x=A(n,x),x.X=A(r,x),x.c=A(e,x),b.x=A(n,b),b.X=A(r,b),b.c=A(e,b);function A(ee,fe){return function(Se){var me=[],Le=-1,we=0,te=ee.length,He,Ze,Ge;for(Se instanceof Date||(Se=new Date(+Se));++Le<te;)ee.charCodeAt(Le)===37&&(me.push(ee.slice(we,Le)),(Ze=Dz[He=ee.charAt(++Le)])!=null?He=ee.charAt(++Le):Ze=He==="e"?" ":"0",(Ge=fe[He])&&(He=Ge(Se,Ze)),me.push(He),we=Le+1);return me.push(ee.slice(we,Le)),me.join("")}}function E(ee,fe){return function(Se){var me=my(1900,void 0,1),Le=I(me,ee,Se+="",0),we,te;if(Le!=Se.length)return null;if("Q"in me)return new Date(me.Q);if("s"in me)return new Date(me.s*1e3+("L"in me?me.L:0));if(fe&&!("Z"in me)&&(me.Z=0),"p"in me&&(me.H=me.H%12+me.p*12),me.m===void 0&&(me.m="q"in me?me.q:0),"V"in me){if(me.V<1||me.V>53)return null;"w"in me||(me.w=1),"Z"in me?(we=u_(my(me.y,0,1)),te=we.getUTCDay(),we=te>4||te===0?Jk.ceil(we):Jk(we),we=VC.offset(we,(me.V-1)*7),me.y=we.getUTCFullYear(),me.m=we.getUTCMonth(),me.d=we.getUTCDate()+(me.w+6)%7):(we=c_(my(me.y,0,1)),te=we.getDay(),we=te>4||te===0?Zk.ceil(we):Zk(we),we=Lv.offset(we,(me.V-1)*7),me.y=we.getFullYear(),me.m=we.getMonth(),me.d=we.getDate()+(me.w+6)%7)}else("W"in me||"U"in me)&&("w"in me||(me.w="u"in me?me.u%7:"W"in me?1:0),te="Z"in me?u_(my(me.y,0,1)).getUTCDay():c_(my(me.y,0,1)).getDay(),me.m=0,me.d="W"in me?(me.w+6)%7+me.W*7-(te+5)%7:me.w+me.U*7-(te+6)%7);return"Z"in me?(me.H+=me.Z/100|0,me.M+=me.Z%100,u_(me)):c_(me)}}function I(ee,fe,Se,me){for(var Le=0,we=fe.length,te=Se.length,He,Ze;Le<we;){if(me>=te)return-1;if(He=fe.charCodeAt(Le++),He===37){if(He=fe.charAt(Le++),Ze=S[He in Dz?fe.charAt(Le++):He],!Ze||(me=Ze(ee,Se,me))<0)return-1}else if(He!=Se.charCodeAt(me++))return-1}return me}function T(ee,fe,Se){var me=c.exec(fe.slice(Se));return me?(ee.p=u.get(me[0].toLowerCase()),Se+me[0].length):-1}function O(ee,fe,Se){var me=f.exec(fe.slice(Se));return me?(ee.w=p.get(me[0].toLowerCase()),Se+me[0].length):-1}function $(ee,fe,Se){var me=d.exec(fe.slice(Se));return me?(ee.w=h.get(me[0].toLowerCase()),Se+me[0].length):-1}function R(ee,fe,Se){var me=g.exec(fe.slice(Se));return me?(ee.m=v.get(me[0].toLowerCase()),Se+me[0].length):-1}function F(ee,fe,Se){var me=m.exec(fe.slice(Se));return me?(ee.m=y.get(me[0].toLowerCase()),Se+me[0].length):-1}function L(ee,fe,Se){return I(ee,e,fe,Se)}function U(ee,fe,Se){return I(ee,n,fe,Se)}function q(ee,fe,Se){return I(ee,r,fe,Se)}function K(ee){return o[ee.getDay()]}function j(ee){return s[ee.getDay()]}function Y(ee){return l[ee.getMonth()]}function ae(ee){return a[ee.getMonth()]}function le(ee){return i[+(ee.getHours()>=12)]}function M(ee){return 1+~~(ee.getMonth()/3)}function V(ee){return o[ee.getUTCDay()]}function H(ee){return s[ee.getUTCDay()]}function J(ee){return l[ee.getUTCMonth()]}function oe(ee){return a[ee.getUTCMonth()]}function ce(ee){return i[+(ee.getUTCHours()>=12)]}function ge(ee){return 1+~~(ee.getUTCMonth()/3)}return{format:function(ee){var fe=A(ee+="",x);return fe.toString=function(){return ee},fe},parse:function(ee){var fe=E(ee+="",!1);return fe.toString=function(){return ee},fe},utcFormat:function(ee){var fe=A(ee+="",b);return fe.toString=function(){return ee},fe},utcParse:function(ee){var fe=E(ee+="",!0);return fe.toString=function(){return ee},fe}}}var Dz={"-":"",_:" ",0:"0"},Ui=/^\s*\d+/,nAe=/^%/,rAe=/[\\^$*+?|[\]().{}]/g;function vn(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(e)+i:i)}function iAe(t){return t.replace(rAe,"\\$&")}function gy(t){return new RegExp("^(?:"+t.map(iAe).join("|")+")","i")}function yy(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function sAe(t,e,n){var r=Ui.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function oAe(t,e,n){var r=Ui.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function aAe(t,e,n){var r=Ui.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function lAe(t,e,n){var r=Ui.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function cAe(t,e,n){var r=Ui.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Lz(t,e,n){var r=Ui.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Mz(t,e,n){var r=Ui.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function uAe(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function dAe(t,e,n){var r=Ui.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function hAe(t,e,n){var r=Ui.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Fz(t,e,n){var r=Ui.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function fAe(t,e,n){var r=Ui.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function jz(t,e,n){var r=Ui.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function pAe(t,e,n){var r=Ui.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function mAe(t,e,n){var r=Ui.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function gAe(t,e,n){var r=Ui.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function yAe(t,e,n){var r=Ui.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function vAe(t,e,n){var r=nAe.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function xAe(t,e,n){var r=Ui.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function bAe(t,e,n){var r=Ui.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function Bz(t,e){return vn(t.getDate(),e,2)}function wAe(t,e){return vn(t.getHours(),e,2)}function kAe(t,e){return vn(t.getHours()%12||12,e,2)}function SAe(t,e){return vn(1+Lv.count(Cu(t),t),e,3)}function mZ(t,e){return vn(t.getMilliseconds(),e,3)}function CAe(t,e){return mZ(t,e)+"000"}function NAe(t,e){return vn(t.getMonth()+1,e,2)}function AAe(t,e){return vn(t.getMinutes(),e,2)}function IAe(t,e){return vn(t.getSeconds(),e,2)}function _Ae(t){var e=t.getDay();return e===0?7:e}function EAe(t,e){return vn(WC.count(Cu(t)-1,t),e,2)}function gZ(t){var e=t.getDay();return e>=4||e===0?mg(t):mg.ceil(t)}function TAe(t,e){return t=gZ(t),vn(mg.count(Cu(t),t)+(Cu(t).getDay()===4),e,2)}function $Ae(t){return t.getDay()}function PAe(t,e){return vn(Zk.count(Cu(t)-1,t),e,2)}function RAe(t,e){return vn(t.getFullYear()%100,e,2)}function OAe(t,e){return t=gZ(t),vn(t.getFullYear()%100,e,2)}function DAe(t,e){return vn(t.getFullYear()%1e4,e,4)}function LAe(t,e){var n=t.getDay();return t=n>=4||n===0?mg(t):mg.ceil(t),vn(t.getFullYear()%1e4,e,4)}function MAe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+vn(e/60|0,"0",2)+vn(e%60,"0",2)}function zz(t,e){return vn(t.getUTCDate(),e,2)}function FAe(t,e){return vn(t.getUTCHours(),e,2)}function jAe(t,e){return vn(t.getUTCHours()%12||12,e,2)}function BAe(t,e){return vn(1+VC.count(Nu(t),t),e,3)}function yZ(t,e){return vn(t.getUTCMilliseconds(),e,3)}function zAe(t,e){return yZ(t,e)+"000"}function UAe(t,e){return vn(t.getUTCMonth()+1,e,2)}function VAe(t,e){return vn(t.getUTCMinutes(),e,2)}function WAe(t,e){return vn(t.getUTCSeconds(),e,2)}function GAe(t){var e=t.getUTCDay();return e===0?7:e}function qAe(t,e){return vn(GC.count(Nu(t)-1,t),e,2)}function vZ(t){var e=t.getUTCDay();return e>=4||e===0?gg(t):gg.ceil(t)}function HAe(t,e){return t=vZ(t),vn(gg.count(Nu(t),t)+(Nu(t).getUTCDay()===4),e,2)}function KAe(t){return t.getUTCDay()}function XAe(t,e){return vn(Jk.count(Nu(t)-1,t),e,2)}function YAe(t,e){return vn(t.getUTCFullYear()%100,e,2)}function ZAe(t,e){return t=vZ(t),vn(t.getUTCFullYear()%100,e,2)}function JAe(t,e){return vn(t.getUTCFullYear()%1e4,e,4)}function QAe(t,e){var n=t.getUTCDay();return t=n>=4||n===0?gg(t):gg.ceil(t),vn(t.getUTCFullYear()%1e4,e,4)}function eIe(){return"+0000"}function Uz(){return"%"}function Vz(t){return+t}function Wz(t){return Math.floor(+t/1e3)}var im,xZ,bZ;tIe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function tIe(t){return im=tAe(t),xZ=im.format,im.parse,bZ=im.utcFormat,im.utcParse,im}function nIe(t){return new Date(t)}function rIe(t){return t instanceof Date?+t:+new Date(+t)}function sR(t,e,n,r,i,s,o,a,l,c){var u=G4(),d=u.invert,h=u.domain,f=c(".%L"),p=c(":%S"),m=c("%I:%M"),y=c("%I %p"),g=c("%a %d"),v=c("%b %d"),x=c("%B"),b=c("%Y");function S(A){return(l(A)<A?f:a(A)<A?p:o(A)<A?m:s(A)<A?y:r(A)<A?i(A)<A?g:v:n(A)<A?x:b)(A)}return u.invert=function(A){return new Date(d(A))},u.domain=function(A){return arguments.length?h(Array.from(A,rIe)):h().map(nIe)},u.ticks=function(A){var E=h();return t(E[0],E[E.length-1],A??10)},u.tickFormat=function(A,E){return E==null?S:c(E)},u.nice=function(A){var E=h();return(!A||typeof A.range!="function")&&(A=e(E[0],E[E.length-1],A??10)),A?h(oZ(E,A)):u},u.copy=function(){return Dv(u,sR(t,e,n,r,i,s,o,a,l,c))},u}function iIe(){return Ha.apply(sR(Q5e,eAe,Cu,rR,WC,Lv,tR,Q4,Af,xZ).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function sIe(){return Ha.apply(sR(Z5e,J5e,Nu,iR,GC,VC,nR,eR,Af,bZ).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function qC(){var t=0,e=1,n,r,i,s,o=Hs,a=!1,l;function c(d){return d==null||isNaN(d=+d)?l:o(i===0?.5:(d=(s(d)-n)*i,a?Math.max(0,Math.min(1,d)):d))}c.domain=function(d){return arguments.length?([t,e]=d,n=s(t=+t),r=s(e=+e),i=n===r?0:1/(r-n),c):[t,e]},c.clamp=function(d){return arguments.length?(a=!!d,c):a},c.interpolator=function(d){return arguments.length?(o=d,c):o};function u(d){return function(h){var f,p;return arguments.length?([f,p]=h,o=d(f,p),c):[o(0),o(1)]}}return c.range=u(Xg),c.rangeRound=u(W4),c.unknown=function(d){return arguments.length?(l=d,c):l},function(d){return s=d,n=d(t),r=d(e),i=n===r?0:1/(r-n),c}}function vh(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function wZ(){var t=yh(qC()(Hs));return t.copy=function(){return vh(t,wZ())},Du.apply(t,arguments)}function kZ(){var t=K4(qC()).domain([1,10]);return t.copy=function(){return vh(t,kZ()).base(t.base())},Du.apply(t,arguments)}function SZ(){var t=X4(qC());return t.copy=function(){return vh(t,SZ()).constant(t.constant())},Du.apply(t,arguments)}function oR(){var t=Y4(qC());return t.copy=function(){return vh(t,oR()).exponent(t.exponent())},Du.apply(t,arguments)}function oIe(){return oR.apply(null,arguments).exponent(.5)}function CZ(){var t=[],e=Hs;function n(r){if(r!=null&&!isNaN(r=+r))return e((Rv(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Vd),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,s)=>GNe(t,s/r))},n.copy=function(){return CZ(e).domain(t)},Du.apply(n,arguments)}function HC(){var t=0,e=.5,n=1,r=1,i,s,o,a,l,c=Hs,u,d=!1,h;function f(m){return isNaN(m=+m)?h:(m=.5+((m=+u(m))-s)*(r*m<r*s?a:l),c(d?Math.max(0,Math.min(1,m)):m))}f.domain=function(m){return arguments.length?([t,e,n]=m,i=u(t=+t),s=u(e=+e),o=u(n=+n),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,f):[t,e,n]},f.clamp=function(m){return arguments.length?(d=!!m,f):d},f.interpolator=function(m){return arguments.length?(c=m,f):c};function p(m){return function(y){var g,v,x;return arguments.length?([g,v,x]=y,c=v5e(m,[g,v,x]),f):[c(0),c(.5),c(1)]}}return f.range=p(Xg),f.rangeRound=p(W4),f.unknown=function(m){return arguments.length?(h=m,f):h},function(m){return u=m,i=m(t),s=m(e),o=m(n),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,f}}function NZ(){var t=yh(HC()(Hs));return t.copy=function(){return vh(t,NZ())},Du.apply(t,arguments)}function AZ(){var t=K4(HC()).domain([.1,1,10]);return t.copy=function(){return vh(t,AZ()).base(t.base())},Du.apply(t,arguments)}function IZ(){var t=X4(HC());return t.copy=function(){return vh(t,IZ()).constant(t.constant())},Du.apply(t,arguments)}function aR(){var t=Y4(HC());return t.copy=function(){return vh(t,aR()).exponent(t.exponent())},Du.apply(t,arguments)}function aIe(){return aR.apply(null,arguments).exponent(.5)}const Oy=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:z4,scaleDiverging:NZ,scaleDivergingLog:AZ,scaleDivergingPow:aR,scaleDivergingSqrt:aIe,scaleDivergingSymlog:IZ,scaleIdentity:sZ,scaleImplicit:e3,scaleLinear:iZ,scaleLog:aZ,scaleOrdinal:B4,scalePoint:KNe,scalePow:Z4,scaleQuantile:uZ,scaleQuantize:dZ,scaleRadial:cZ,scaleSequential:wZ,scaleSequentialLog:kZ,scaleSequentialPow:oR,scaleSequentialQuantile:CZ,scaleSequentialSqrt:oIe,scaleSequentialSymlog:SZ,scaleSqrt:z5e,scaleSymlog:lZ,scaleThreshold:hZ,scaleTime:iIe,scaleUtc:sIe,tickFormat:rZ},Symbol.toStringTag,{value:"Module"}));var xh=t=>t.chartData,lR=_e([xh],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),KC=(t,e,n,r)=>r?lR(t):xh(t);function tp(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(Ps(e)&&Ps(n))return!0}return!1}function Gz(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function _Z(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,i,s;if(Ps(n))i=n;else if(typeof n=="function")return;if(Ps(r))s=r;else if(typeof r=="function")return;var o=[i,s];if(tp(o))return o}}function lIe(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(tp(r))return Gz(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[i,s]=t,o,a;if(i==="auto")e!=null&&(o=Math.min(...e));else if(St(i))o=i;else if(typeof i=="function")try{e!=null&&(o=i(e==null?void 0:e[0]))}catch{}else if(typeof i=="string"&&FB.test(i)){var l=FB.exec(i);if(l==null||e==null)o=void 0;else{var c=+l[1];o=e[0]-c}}else o=e==null?void 0:e[0];if(s==="auto")e!=null&&(a=Math.max(...e));else if(St(s))a=s;else if(typeof s=="function")try{e!=null&&(a=s(e==null?void 0:e[1]))}catch{}else if(typeof s=="string"&&jB.test(s)){var u=jB.exec(s);if(u==null||e==null)a=void 0;else{var d=+u[1];a=e[1]+d}}else a=e==null?void 0:e[1];var h=[o,a];if(tp(h))return e==null?h:Gz(h,e,n)}}}var Yg=1e9,cIe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},uR,hr=!0,Va="[DecimalError] ",jf=Va+"Invalid argument: ",cR=Va+"Exponent out of range: ",Zg=Math.floor,uf=Math.pow,uIe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Bo,Di=1e7,nr=7,EZ=9007199254740991,Qk=Zg(EZ/nr),tt={};tt.absoluteValue=tt.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};tt.comparedTo=tt.cmp=function(t){var e,n,r,i,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(r=s.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};tt.decimalPlaces=tt.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*nr;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};tt.dividedBy=tt.div=function(t){return du(this,new this.constructor(t))};tt.dividedToIntegerBy=tt.idiv=function(t){var e=this,n=e.constructor;return Un(du(e,new n(t),0,1),n.precision)};tt.equals=tt.eq=function(t){return!this.cmp(t)};tt.exponent=function(){return ci(this)};tt.greaterThan=tt.gt=function(t){return this.cmp(t)>0};tt.greaterThanOrEqualTo=tt.gte=function(t){return this.cmp(t)>=0};tt.isInteger=tt.isint=function(){return this.e>this.d.length-2};tt.isNegative=tt.isneg=function(){return this.s<0};tt.isPositive=tt.ispos=function(){return this.s>0};tt.isZero=function(){return this.s===0};tt.lessThan=tt.lt=function(t){return this.cmp(t)<0};tt.lessThanOrEqualTo=tt.lte=function(t){return this.cmp(t)<1};tt.logarithm=tt.log=function(t){var e,n=this,r=n.constructor,i=r.precision,s=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(Bo))throw Error(Va+"NaN");if(n.s<1)throw Error(Va+(n.s?"NaN":"-Infinity"));return n.eq(Bo)?new r(0):(hr=!1,e=du(Z1(n,s),Z1(t,s),s),hr=!0,Un(e,i))};tt.minus=tt.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?PZ(e,t):TZ(e,(t.s=-t.s,t))};tt.modulo=tt.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(Va+"NaN");return n.s?(hr=!1,e=du(n,t,0,1).times(t),hr=!0,n.minus(e)):Un(new r(n),i)};tt.naturalExponential=tt.exp=function(){return $Z(this)};tt.naturalLogarithm=tt.ln=function(){return Z1(this)};tt.negated=tt.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};tt.plus=tt.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?TZ(e,t):PZ(e,(t.s=-t.s,t))};tt.precision=tt.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(jf+t);if(e=ci(i)+1,r=i.d.length-1,n=r*nr+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};tt.squareRoot=tt.sqrt=function(){var t,e,n,r,i,s,o,a=this,l=a.constructor;if(a.s<1){if(!a.s)return new l(0);throw Error(Va+"NaN")}for(t=ci(a),hr=!1,i=Math.sqrt(+a),i==0||i==1/0?(e=oc(a.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Zg((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(i.toString()),n=l.precision,i=o=n+3;;)if(s=r,r=s.plus(du(a,s,o+2)).times(.5),oc(s.d).slice(0,o)===(e=oc(r.d)).slice(0,o)){if(e=e.slice(o-3,o+1),i==o&&e=="4999"){if(Un(s,n+1,0),s.times(s).eq(a)){r=s;break}}else if(e!="9999")break;o+=4}return hr=!0,Un(r,n)};tt.times=tt.mul=function(t){var e,n,r,i,s,o,a,l,c,u=this,d=u.constructor,h=u.d,f=(t=new d(t)).d;if(!u.s||!t.s)return new d(0);for(t.s*=u.s,n=u.e+t.e,l=h.length,c=f.length,l<c&&(s=h,h=f,f=s,o=l,l=c,c=o),s=[],o=l+c,r=o;r--;)s.push(0);for(r=c;--r>=0;){for(e=0,i=l+r;i>r;)a=s[i]+f[r]*h[i-r-1]+e,s[i--]=a%Di|0,e=a/Di|0;s[i]=(s[i]+e)%Di|0}for(;!s[--o];)s.pop();return e?++n:s.shift(),t.d=s,t.e=n,hr?Un(t,d.precision):t};tt.toDecimalPlaces=tt.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Sc(t,0,Yg),e===void 0?e=r.rounding:Sc(e,0,8),Un(n,t+ci(n)+1,e))};tt.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=np(r,!0):(Sc(t,0,Yg),e===void 0?e=i.rounding:Sc(e,0,8),r=Un(new i(r),t+1,e),n=np(r,!0,t+1)),n};tt.toFixed=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?np(i):(Sc(t,0,Yg),e===void 0?e=s.rounding:Sc(e,0,8),r=Un(new s(i),t+ci(i)+1,e),n=np(r.abs(),!1,t+ci(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};tt.toInteger=tt.toint=function(){var t=this,e=t.constructor;return Un(new e(t),ci(t)+1,e.rounding)};tt.toNumber=function(){return+this};tt.toPower=tt.pow=function(t){var e,n,r,i,s,o,a=this,l=a.constructor,c=12,u=+(t=new l(t));if(!t.s)return new l(Bo);if(a=new l(a),!a.s){if(t.s<1)throw Error(Va+"Infinity");return a}if(a.eq(Bo))return a;if(r=l.precision,t.eq(Bo))return Un(a,r);if(e=t.e,n=t.d.length-1,o=e>=n,s=a.s,o){if((n=u<0?-u:u)<=EZ){for(i=new l(Bo),e=Math.ceil(r/nr+4),hr=!1;n%2&&(i=i.times(a),Hz(i.d,e)),n=Zg(n/2),n!==0;)a=a.times(a),Hz(a.d,e);return hr=!0,t.s<0?new l(Bo).div(i):Un(i,r)}}else if(s<0)throw Error(Va+"NaN");return s=s<0&&t.d[Math.max(e,n)]&1?-1:1,a.s=1,hr=!1,i=t.times(Z1(a,r+c)),hr=!0,i=$Z(i),i.s=s,i};tt.toPrecision=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?(n=ci(i),r=np(i,n<=s.toExpNeg||n>=s.toExpPos)):(Sc(t,1,Yg),e===void 0?e=s.rounding:Sc(e,0,8),i=Un(new s(i),t,e),n=ci(i),r=np(i,t<=n||n<=s.toExpNeg,t)),r};tt.toSignificantDigits=tt.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Sc(t,1,Yg),e===void 0?e=r.rounding:Sc(e,0,8)),Un(new r(n),t,e)};tt.toString=tt.valueOf=tt.val=tt.toJSON=tt[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=ci(t),n=t.constructor;return np(t,e<=n.toExpNeg||e>=n.toExpPos)};function TZ(t,e){var n,r,i,s,o,a,l,c,u=t.constructor,d=u.precision;if(!t.s||!e.s)return e.s||(e=new u(t)),hr?Un(e,d):e;if(l=t.d,c=e.d,o=t.e,i=e.e,l=l.slice(),s=o-i,s){for(s<0?(r=l,s=-s,a=c.length):(r=c,i=o,a=l.length),o=Math.ceil(d/nr),a=o>a?o+1:a+1,s>a&&(s=a,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(a=l.length,s=c.length,a-s<0&&(s=a,r=c,c=l,l=r),n=0;s;)n=(l[--s]=l[s]+c[s]+n)/Di|0,l[s]%=Di;for(n&&(l.unshift(n),++i),a=l.length;l[--a]==0;)l.pop();return e.d=l,e.e=i,hr?Un(e,d):e}function Sc(t,e,n){if(t!==~~t||t<e||t>n)throw Error(jf+t)}function oc(t){var e,n,r,i=t.length-1,s="",o=t[0];if(i>0){for(s+=o,e=1;e<i;e++)r=t[e]+"",n=nr-r.length,n&&(s+=gd(n)),s+=r;o=t[e],r=o+"",n=nr-r.length,n&&(s+=gd(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var du=function(){function t(r,i){var s,o=0,a=r.length;for(r=r.slice();a--;)s=r[a]*i+o,r[a]=s%Di|0,o=s/Di|0;return o&&r.unshift(o),r}function e(r,i,s,o){var a,l;if(s!=o)l=s>o?1:-1;else for(a=l=0;a<s;a++)if(r[a]!=i[a]){l=r[a]>i[a]?1:-1;break}return l}function n(r,i,s){for(var o=0;s--;)r[s]-=o,o=r[s]<i[s]?1:0,r[s]=o*Di+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,o){var a,l,c,u,d,h,f,p,m,y,g,v,x,b,S,A,E,I,T=r.constructor,O=r.s==i.s?1:-1,$=r.d,R=i.d;if(!r.s)return new T(r);if(!i.s)throw Error(Va+"Division by zero");for(l=r.e-i.e,E=R.length,S=$.length,f=new T(O),p=f.d=[],c=0;R[c]==($[c]||0);)++c;if(R[c]>($[c]||0)&&--l,s==null?v=s=T.precision:o?v=s+(ci(r)-ci(i))+1:v=s,v<0)return new T(0);if(v=v/nr+2|0,c=0,E==1)for(u=0,R=R[0],v++;(c<S||u)&&v--;c++)x=u*Di+($[c]||0),p[c]=x/R|0,u=x%R|0;else{for(u=Di/(R[0]+1)|0,u>1&&(R=t(R,u),$=t($,u),E=R.length,S=$.length),b=E,m=$.slice(0,E),y=m.length;y<E;)m[y++]=0;I=R.slice(),I.unshift(0),A=R[0],R[1]>=Di/2&&++A;do u=0,a=e(R,m,E,y),a<0?(g=m[0],E!=y&&(g=g*Di+(m[1]||0)),u=g/A|0,u>1?(u>=Di&&(u=Di-1),d=t(R,u),h=d.length,y=m.length,a=e(d,m,h,y),a==1&&(u--,n(d,E<h?I:R,h))):(u==0&&(a=u=1),d=R.slice()),h=d.length,h<y&&d.unshift(0),n(m,d,y),a==-1&&(y=m.length,a=e(R,m,E,y),a<1&&(u++,n(m,E<y?I:R,y))),y=m.length):a===0&&(u++,m=[0]),p[c++]=u,a&&m[0]?m[y++]=$[b]||0:(m=[$[b]],y=1);while((b++<S||m[0]!==void 0)&&v--)}return p[0]||p.shift(),f.e=l,Un(f,o?s+ci(f)+1:s)}}();function $Z(t,e){var n,r,i,s,o,a,l=0,c=0,u=t.constructor,d=u.precision;if(ci(t)>16)throw Error(cR+ci(t));if(!t.s)return new u(Bo);for(e==null?(hr=!1,a=d):a=e,o=new u(.03125);t.abs().gte(.1);)t=t.times(o),c+=5;for(r=Math.log(uf(2,c))/Math.LN10*2+5|0,a+=r,n=i=s=new u(Bo),u.precision=a;;){if(i=Un(i.times(t),a),n=n.times(++l),o=s.plus(du(i,n,a)),oc(o.d).slice(0,a)===oc(s.d).slice(0,a)){for(;c--;)s=Un(s.times(s),a);return u.precision=d,e==null?(hr=!0,Un(s,d)):s}s=o}}function ci(t){for(var e=t.e*nr,n=t.d[0];n>=10;n/=10)e++;return e}function d_(t,e,n){if(e>t.LN10.sd())throw hr=!0,n&&(t.precision=n),Error(Va+"LN10 precision limit exceeded");return Un(new t(t.LN10),e)}function gd(t){for(var e="";t--;)e+="0";return e}function Z1(t,e){var n,r,i,s,o,a,l,c,u,d=1,h=10,f=t,p=f.d,m=f.constructor,y=m.precision;if(f.s<1)throw Error(Va+(f.s?"NaN":"-Infinity"));if(f.eq(Bo))return new m(0);if(e==null?(hr=!1,c=y):c=e,f.eq(10))return e==null&&(hr=!0),d_(m,c);if(c+=h,m.precision=c,n=oc(p),r=n.charAt(0),s=ci(f),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)f=f.times(t),n=oc(f.d),r=n.charAt(0),d++;s=ci(f),r>1?(f=new m("0."+n),s++):f=new m(r+"."+n.slice(1))}else return l=d_(m,c+2,y).times(s+""),f=Z1(new m(r+"."+n.slice(1)),c-h).plus(l),m.precision=y,e==null?(hr=!0,Un(f,y)):f;for(a=o=f=du(f.minus(Bo),f.plus(Bo),c),u=Un(f.times(f),c),i=3;;){if(o=Un(o.times(u),c),l=a.plus(du(o,new m(i),c)),oc(l.d).slice(0,c)===oc(a.d).slice(0,c))return a=a.times(2),s!==0&&(a=a.plus(d_(m,c+2,y).times(s+""))),a=du(a,new m(d),c),m.precision=y,e==null?(hr=!0,Un(a,y)):a;a=l,i+=2}}function qz(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=Zg(n/nr),t.d=[],r=(n+1)%nr,n<0&&(r+=nr),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=nr;r<i;)t.d.push(+e.slice(r,r+=nr));e=e.slice(r),r=nr-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),hr&&(t.e>Qk||t.e<-Qk))throw Error(cR+n)}else t.s=0,t.e=0,t.d=[0];return t}function Un(t,e,n){var r,i,s,o,a,l,c,u,d=t.d;for(o=1,s=d[0];s>=10;s/=10)o++;if(r=e-o,r<0)r+=nr,i=e,c=d[u=0];else{if(u=Math.ceil((r+1)/nr),s=d.length,u>=s)return t;for(c=s=d[u],o=1;s>=10;s/=10)o++;r%=nr,i=r-nr+o}if(n!==void 0&&(s=uf(10,o-i-1),a=c/s%10|0,l=e<0||d[u+1]!==void 0||c%s,l=n<4?(a||l)&&(n==0||n==(t.s<0?3:2)):a>5||a==5&&(n==4||l||n==6&&(r>0?i>0?c/uf(10,o-i):0:d[u-1])%10&1||n==(t.s<0?8:7))),e<1||!d[0])return l?(s=ci(t),d.length=1,e=e-s-1,d[0]=uf(10,(nr-e%nr)%nr),t.e=Zg(-e/nr)||0):(d.length=1,d[0]=t.e=t.s=0),t;if(r==0?(d.length=u,s=1,u--):(d.length=u+1,s=uf(10,nr-r),d[u]=i>0?(c/uf(10,o-i)%uf(10,i)|0)*s:0),l)for(;;)if(u==0){(d[0]+=s)==Di&&(d[0]=1,++t.e);break}else{if(d[u]+=s,d[u]!=Di)break;d[u--]=0,s=1}for(r=d.length;d[--r]===0;)d.pop();if(hr&&(t.e>Qk||t.e<-Qk))throw Error(cR+ci(t));return t}function PZ(t,e){var n,r,i,s,o,a,l,c,u,d,h=t.constructor,f=h.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new h(t),hr?Un(e,f):e;if(l=t.d,d=e.d,r=e.e,c=t.e,l=l.slice(),o=c-r,o){for(u=o<0,u?(n=l,o=-o,a=d.length):(n=d,r=c,a=l.length),i=Math.max(Math.ceil(f/nr),a)+2,o>i&&(o=i,n.length=1),n.reverse(),i=o;i--;)n.push(0);n.reverse()}else{for(i=l.length,a=d.length,u=i<a,u&&(a=i),i=0;i<a;i++)if(l[i]!=d[i]){u=l[i]<d[i];break}o=0}for(u&&(n=l,l=d,d=n,e.s=-e.s),a=l.length,i=d.length-a;i>0;--i)l[a++]=0;for(i=d.length;i>o;){if(l[--i]<d[i]){for(s=i;s&&l[--s]===0;)l[s]=Di-1;--l[s],l[i]+=Di}l[i]-=d[i]}for(;l[--a]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,hr?Un(e,f):e):new h(0)}function np(t,e,n){var r,i=ci(t),s=oc(t.d),o=s.length;return e?(n&&(r=n-o)>0?s=s.charAt(0)+"."+s.slice(1)+gd(r):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+gd(-i-1)+s,n&&(r=n-o)>0&&(s+=gd(r))):i>=o?(s+=gd(i+1-o),n&&(r=n-i-1)>0&&(s=s+"."+gd(r))):((r=i+1)<o&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(s+="."),s+=gd(r))),t.s<0?"-"+s:s}function Hz(t,e){if(t.length>e)return t.length=e,!0}function RZ(t){var e,n,r;function i(s){var o=this;if(!(o instanceof i))return new i(s);if(o.constructor=i,s instanceof i){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(jf+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return qz(o,s.toString())}else if(typeof s!="string")throw Error(jf+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,uIe.test(s))qz(o,s);else throw Error(jf+s)}if(i.prototype=tt,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=RZ,i.config=i.set=dIe,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function dIe(t){if(!t||typeof t!="object")throw Error(Va+"Object expected");var e,n,r,i=["precision",1,Yg,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(Zg(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(jf+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(jf+n+": "+r);return this}var uR=RZ(cIe);Bo=new uR(1);const _n=uR;var hIe=t=>t,OZ={"@@functional/placeholder":!0},DZ=t=>t===OZ,Kz=t=>function e(){return arguments.length===0||arguments.length===1&&DZ(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},LZ=(t,e)=>t===1?e:Kz(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=r.filter(o=>o!==OZ).length;return s>=t?e(...r):LZ(t-s,Kz(function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];var c=r.map(u=>DZ(u)?a.shift():u);return e(...c,...a)}))}),XC=t=>LZ(t.length,t),i3=(t,e)=>{for(var n=[],r=t;r<e;++r)n[r-t]=r;return n},fIe=XC((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(n=>e[n]).map(t)),pIe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return hIe;var i=n.reverse(),s=i[0],o=i.slice(1);return function(){return o.reduce((a,l)=>l(a),s(...arguments))}},s3=t=>Array.isArray(t)?t.reverse():t.split("").reverse().join(""),MZ=t=>{var e=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return e&&i.every((o,a)=>{var l;return o===((l=e)===null||l===void 0?void 0:l[a])})||(e=i,n=t(...i)),n}};function FZ(t){var e;return t===0?e=1:e=Math.floor(new _n(t).abs().log(10).toNumber())+1,e}function jZ(t,e,n){for(var r=new _n(t),i=0,s=[];r.lt(e)&&i<1e5;)s.push(r.toNumber()),r=r.add(n),i++;return s}XC((t,e,n)=>{var r=+t,i=+e;return r+n*(i-r)});XC((t,e,n)=>{var r=e-+t;return r=r||1/0,(n-t)/r});XC((t,e,n)=>{var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});var BZ=t=>{var[e,n]=t,[r,i]=[e,n];return e>n&&([r,i]=[n,e]),[r,i]},zZ=(t,e,n)=>{if(t.lte(0))return new _n(0);var r=FZ(t.toNumber()),i=new _n(10).pow(r),s=t.div(i),o=r!==1?.05:.1,a=new _n(Math.ceil(s.div(o).toNumber())).add(n).mul(o),l=a.mul(i);return e?new _n(l.toNumber()):new _n(Math.ceil(l.toNumber()))},mIe=(t,e,n)=>{var r=new _n(1),i=new _n(t);if(!i.isint()&&n){var s=Math.abs(t);s<1?(r=new _n(10).pow(FZ(t)-1),i=new _n(Math.floor(i.div(r).toNumber())).mul(r)):s>1&&(i=new _n(Math.floor(t)))}else t===0?i=new _n(Math.floor((e-1)/2)):n||(i=new _n(Math.floor(t)));var o=Math.floor((e-1)/2),a=pIe(fIe(l=>i.add(new _n(l-o).mul(r)).toNumber()),i3);return a(0,e)},UZ=function(e,n,r,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new _n(0),tickMin:new _n(0),tickMax:new _n(0)};var o=zZ(new _n(n).sub(e).div(r-1),i,s),a;e<=0&&n>=0?a=new _n(0):(a=new _n(e).add(n).div(2),a=a.sub(new _n(a).mod(o)));var l=Math.ceil(a.sub(e).div(o).toNumber()),c=Math.ceil(new _n(n).sub(a).div(o).toNumber()),u=l+c+1;return u>r?UZ(e,n,r,i,s+1):(u<r&&(c=n>0?c+(r-u):c,l=n>0?l:l+(r-u)),{step:o,tickMin:a.sub(new _n(l).mul(o)),tickMax:a.add(new _n(c).mul(o))})};function gIe(t){var[e,n]=t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(r,2),[o,a]=BZ([e,n]);if(o===-1/0||a===1/0){var l=a===1/0?[o,...i3(0,r-1).map(()=>1/0)]:[...i3(0,r-1).map(()=>-1/0),a];return e>n?s3(l):l}if(o===a)return mIe(o,r,i);var{step:c,tickMin:u,tickMax:d}=UZ(o,a,s,i,0),h=jZ(u,d.add(new _n(.1).mul(c)),c);return e>n?s3(h):h}function yIe(t,e){var[n,r]=t,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,o]=BZ([n,r]);if(s===-1/0||o===1/0)return[n,r];if(s===o)return[s];var a=Math.max(e,2),l=zZ(new _n(o).sub(s).div(a-1),i,0),c=[...jZ(new _n(s),new _n(o),l),o];return i===!1&&(c=c.map(u=>Math.round(u))),n>r?s3(c):c}var vIe=MZ(gIe),xIe=MZ(yIe),VZ=t=>t.rootProps.maxBarSize,bIe=t=>t.rootProps.barGap,WZ=t=>t.rootProps.barCategoryGap,wIe=t=>t.rootProps.barSize,Mv=t=>t.rootProps.stackOffset,dR=t=>t.options.chartName,hR=t=>t.rootProps.syncId,GZ=t=>t.rootProps.syncMethod,fR=t=>t.options.eventEmitter,eu={allowDuplicatedCategory:!0,angleAxisId:0,axisLine:!0,cx:0,cy:0,orientation:"outer",reversed:!1,scale:"auto",tick:!0,tickLine:!0,tickSize:8,type:"category"},Fo={allowDataOverflow:!1,allowDuplicatedCategory:!0,angle:0,axisLine:!0,cx:0,cy:0,orientation:"right",radiusAxisId:0,scale:"auto",stroke:"#ccc",tick:!0,tickCount:5,type:"number"},YC=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},kIe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:eu.angleAxisId,includeHidden:!1,name:void 0,reversed:eu.reversed,scale:eu.scale,tick:eu.tick,tickCount:void 0,ticks:void 0,type:eu.type,unit:void 0},SIe={allowDataOverflow:Fo.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Fo.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Fo.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Fo.scale,tick:Fo.tick,tickCount:Fo.tickCount,ticks:void 0,type:Fo.type,unit:void 0},CIe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:eu.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:eu.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:eu.scale,tick:eu.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},NIe={allowDataOverflow:Fo.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Fo.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Fo.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Fo.scale,tick:Fo.tick,tickCount:Fo.tickCount,ticks:void 0,type:"category",unit:void 0},pR=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?CIe:kIe,mR=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?NIe:SIe,ZC=t=>t.polarOptions,gR=_e([Ru,Ou,_i],gY),qZ=_e([ZC,gR],(t,e)=>{if(t!=null)return Es(t.innerRadius,e,0)}),HZ=_e([ZC,gR],(t,e)=>{if(t!=null)return Es(t.outerRadius,e,e*.8)}),AIe=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},KZ=_e([ZC],AIe);_e([pR,KZ],YC);var XZ=_e([gR,qZ,HZ],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});_e([mR,XZ],YC);var YZ=_e([fn,ZC,qZ,HZ,Ru,Ou],(t,e,n,r,i,s)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:o,cy:a,startAngle:l,endAngle:c}=e;return{cx:Es(o,i,i/2),cy:Es(a,s,s/2),innerRadius:n,outerRadius:r,startAngle:l,endAngle:c,clockWise:!1}}}),gr=(t,e)=>e,Fv=(t,e,n)=>n;function yR(t){return t==null?void 0:t.id}var Ti=t=>{var e=fn(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},Jg=t=>t.tooltip.settings.axisId,$i=t=>{var e=Ti(t),n=Jg(t);return jv(t,e,n)},ZZ=_e([$i],t=>t==null?void 0:t.dataKey);function JZ(t,e,n){var{chartData:r=[]}=e,{allowDuplicatedCategory:i,dataKey:s}=n,o=new Map;return t.forEach(a=>{var l,c=(l=a.data)!==null&&l!==void 0?l:r;if(!(c==null||c.length===0)){var u=yR(a);c.forEach((d,h)=>{var f=s==null||i?h:String(Zn(d,s,null)),p=Zn(d,a.dataKey,0),m;o.has(f)?m=o.get(f):m={},Object.assign(m,{[u]:p}),o.set(f,m)})}}),Array.from(o.values())}function JC(t){return t.stackId!=null&&t.dataKey!=null}var QC=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function eN(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function Xz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function eS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Xz(Object(n),!0).forEach(function(r){IIe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function IIe(t,e,n){return(e=_Ie(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _Ie(t){var e=EIe(t,"string");return typeof e=="symbol"?e:e+""}function EIe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var o3=[0,"auto"],Oo={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},QZ=(t,e)=>t.cartesianAxis.xAxis[e],Lu=(t,e)=>{var n=QZ(t,e);return n??Oo},Do={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:o3,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Tv},eJ=(t,e)=>t.cartesianAxis.yAxis[e],Mu=(t,e)=>{var n=eJ(t,e);return n??Do},TIe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},vR=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??TIe},Sr=(t,e,n)=>{switch(e){case"xAxis":return Lu(t,n);case"yAxis":return Mu(t,n);case"zAxis":return vR(t,n);case"angleAxis":return pR(t,n);case"radiusAxis":return mR(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},$Ie=(t,e,n)=>{switch(e){case"xAxis":return Lu(t,n);case"yAxis":return Mu(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},jv=(t,e,n)=>{switch(e){case"xAxis":return Lu(t,n);case"yAxis":return Mu(t,n);case"angleAxis":return pR(t,n);case"radiusAxis":return mR(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},tJ=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function xR(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var tN=t=>t.graphicalItems.cartesianItems,PIe=_e([gr,Fv],xR),bR=(t,e,n)=>t.filter(n).filter(r=>(e==null?void 0:e.includeHidden)===!0?!0:!r.hide),Bv=_e([tN,Sr,PIe],bR,{memoizeOptions:{resultEqualityCheck:eN}}),nJ=_e([Bv],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(JC)),rJ=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),RIe=_e([Bv],rJ),wR=t=>t.map(e=>e.data).filter(Boolean).flat(1),OIe=_e([Bv],wR,{memoizeOptions:{resultEqualityCheck:eN}}),kR=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=e;return t.length>0?t:n.slice(r,i+1)},SR=_e([OIe,KC],kR),CR=(t,e,n)=>(e==null?void 0:e.dataKey)!=null?t.map(r=>({value:Zn(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(i=>({value:Zn(i,r)}))):t.map(r=>({value:r})),nN=_e([SR,Sr,Bv],CR);function iJ(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function j2(t){if(kc(t)||t instanceof Date){var e=Number(t);if(Ps(e))return e}}function Yz(t){if(Array.isArray(t)){var e=[j2(t[0]),j2(t[1])];return tp(e)?e:void 0}var n=j2(t);if(n!=null)return[n,n]}function Qg(t){return t.map(j2).filter(eNe)}function DIe(t,e,n){return!n||typeof e!="number"||za(e)?[]:n.length?Qg(n.flatMap(r=>{var i=Zn(t,r.dataKey),s,o;if(Array.isArray(i)?[s,o]=i:s=o=i,!(!Ps(s)||!Ps(o)))return[e-s,e+o]})):[]}var LIe=_e([nJ,KC,$i],JZ),sJ=(t,e,n)=>{var r={},i=e.reduce((s,o)=>(o.stackId==null||(s[o.stackId]==null&&(s[o.stackId]=[]),s[o.stackId].push(o)),s),r);return Object.fromEntries(Object.entries(i).map(s=>{var[o,a]=s,l=a.map(yR);return[o,{stackedData:BSe(t,l,n),graphicalItems:a}]}))},a3=_e([LIe,nJ,Mv],sJ),oJ=(t,e,n,r)=>{var{dataStartIndex:i,dataEndIndex:s}=e;if(r==null&&n!=="zAxis"){var o=GSe(t,i,s);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},MIe=_e([Sr],t=>t.allowDataOverflow),NR=t=>{var e;if(t==null||!("domain"in t))return o3;if(t.domain!=null)return t.domain;if(t.ticks!=null){if(t.type==="number"){var n=Qg(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t==null?void 0:t.domain)!==null&&e!==void 0?e:o3},AR=_e([Sr],NR),IR=_e([AR,MIe],_Z),FIe=_e([a3,xh,gr,IR],oJ,{memoizeOptions:{resultEqualityCheck:QC}}),rN=t=>t.errorBars,jIe=(t,e,n)=>t.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>iJ(n,r)),tS=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var s=i.flat(),o=Math.min(...s),a=Math.max(...s);return[o,a]}},_R=(t,e,n,r,i)=>{var s,o;if(n.length>0&&t.forEach(a=>{n.forEach(l=>{var c,u,d=(c=r[l.id])===null||c===void 0?void 0:c.filter(g=>iJ(i,g)),h=Zn(a,(u=e.dataKey)!==null&&u!==void 0?u:l.dataKey),f=DIe(a,h,d);if(f.length>=2){var p=Math.min(...f),m=Math.max(...f);(s==null||p<s)&&(s=p),(o==null||m>o)&&(o=m)}var y=Yz(h);y!=null&&(s=s==null?y[0]:Math.min(s,y[0]),o=o==null?y[1]:Math.max(o,y[1]))})}),(e==null?void 0:e.dataKey)!=null&&t.forEach(a=>{var l=Yz(Zn(a,e.dataKey));l!=null&&(s=s==null?l[0]:Math.min(s,l[0]),o=o==null?l[1]:Math.max(o,l[1]))}),Ps(s)&&Ps(o))return[s,o]},BIe=_e([SR,Sr,RIe,rN,gr],_R,{memoizeOptions:{resultEqualityCheck:QC}});function zIe(t){var{value:e}=t;if(kc(e)||e instanceof Date)return e}var UIe=(t,e,n)=>{var r=t.map(zIe).filter(i=>i!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&hX(r))?HY(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},aJ=t=>t.referenceElements.dots,e0=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),VIe=_e([aJ,gr,Fv],e0),lJ=t=>t.referenceElements.areas,WIe=_e([lJ,gr,Fv],e0),cJ=t=>t.referenceElements.lines,GIe=_e([cJ,gr,Fv],e0),uJ=(t,e)=>{var n=Qg(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},qIe=_e(VIe,gr,uJ),dJ=(t,e)=>{var n=Qg(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},HIe=_e([WIe,gr],dJ),hJ=(t,e)=>{var n=Qg(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},KIe=_e(GIe,gr,hJ),XIe=_e(qIe,KIe,HIe,(t,e,n)=>tS(t,n,e)),ER=(t,e,n,r,i,s,o,a)=>{if(n!=null)return n;var l=o==="vertical"&&a==="xAxis"||o==="horizontal"&&a==="yAxis",c=l?tS(r,s,i):tS(s,i);return lIe(e,c,t.allowDataOverflow)},YIe=_e([Sr,AR,IR,FIe,BIe,XIe,fn,gr],ER,{memoizeOptions:{resultEqualityCheck:QC}}),ZIe=[0,1],TR=(t,e,n,r,i,s,o)=>{if(!((t==null||n==null||n.length===0)&&o===void 0)){var{dataKey:a,type:l}=t,c=mh(e,s);return c&&a==null?HY(0,n.length):l==="category"?UIe(r,t,c):i==="expand"?ZIe:o}},$R=_e([Sr,fn,SR,nN,Mv,gr,YIe],TR),fJ=(t,e,n,r,i)=>{if(t!=null){var{scale:s,type:o}=t;if(s==="auto")return e==="radial"&&i==="radiusAxis"?"band":e==="radial"&&i==="angleAxis"?"linear":o==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":o==="category"?"band":"linear";if(typeof s=="string"){var a="scale".concat(Iv(s));return a in Oy?a:"point"}}},t0=_e([Sr,fn,tJ,dR,gr],fJ);function JIe(t){if(t!=null){if(t in Oy)return Oy[t]();var e="scale".concat(Iv(t));if(e in Oy)return Oy[e]()}}function PR(t,e,n,r){if(!(n==null||r==null)){if(typeof t.scale=="function")return t.scale.copy().domain(n).range(r);var i=JIe(e);if(i!=null){var s=i.domain(n).range(r);return DSe(s),s}}}var RR=(t,e,n)=>{var r=NR(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&tp(t))return vIe(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&tp(t))return xIe(t,e.tickCount,e.allowDecimals)}},OR=_e([$R,jv,t0],RR),DR=(t,e,n,r)=>{if(r!=="angleAxis"&&(t==null?void 0:t.type)==="number"&&tp(e)&&Array.isArray(n)&&n.length>0){var i=e[0],s=n[0],o=e[1],a=n[n.length-1];return[Math.min(i,s),Math.max(o,a)]}return e},QIe=_e([Sr,$R,OR,gr],DR),e_e=_e(nN,Sr,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from(Qg(t.map(a=>a.value))).sort((a,l)=>a-l);if(r.length<2)return 1/0;var i=r[r.length-1]-r[0];if(i===0)return 1/0;for(var s=0;s<r.length-1;s++){var o=r[s+1]-r[s];n=Math.min(n,o)}return n/i}}),pJ=_e(e_e,fn,WZ,_i,(t,e,n,r)=>r,(t,e,n,r,i)=>{if(!Ps(t))return 0;var s=e==="vertical"?r.height:r.width;if(i==="gap")return t*s/2;if(i==="no-gap"){var o=Es(n,t*s),a=t*s/2;return a-o-(a-o)/s*o}return 0}),t_e=(t,e)=>{var n=Lu(t,e);return n==null||typeof n.padding!="string"?0:pJ(t,"xAxis",e,n.padding)},n_e=(t,e)=>{var n=Mu(t,e);return n==null||typeof n.padding!="string"?0:pJ(t,"yAxis",e,n.padding)},r_e=_e(Lu,t_e,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((n=i.left)!==null&&n!==void 0?n:0)+e,right:((r=i.right)!==null&&r!==void 0?r:0)+e}}),i_e=_e(Mu,n_e,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((n=i.top)!==null&&n!==void 0?n:0)+e,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+e}}),s_e=_e([_i,r_e,FC,MC,(t,e,n)=>n],(t,e,n,r,i)=>{var{padding:s}=r;return i?[s.left,n.width-s.right]:[t.left+e.left,t.left+t.width-e.right]}),o_e=_e([_i,fn,i_e,FC,MC,(t,e,n)=>n],(t,e,n,r,i,s)=>{var{padding:o}=i;return s?[r.height-o.bottom,o.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),zv=(t,e,n,r)=>{var i;switch(e){case"xAxis":return s_e(t,n,r);case"yAxis":return o_e(t,n,r);case"zAxis":return(i=vR(t,n))===null||i===void 0?void 0:i.range;case"angleAxis":return KZ(t);case"radiusAxis":return XZ(t,n);default:return}},mJ=_e([Sr,zv],YC),n0=_e([Sr,t0,QIe,mJ],PR);_e([Bv,rN,gr],jIe);function gJ(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var iN=(t,e)=>e,sN=(t,e,n)=>n,a_e=_e(DC,iN,sN,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(gJ)),l_e=_e(LC,iN,sN,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(gJ)),yJ=(t,e)=>({width:t.width,height:e.height}),c_e=(t,e)=>{var n=typeof e.width=="number"?e.width:Tv;return{width:n,height:t.height}},vJ=_e(_i,Lu,yJ),u_e=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},d_e=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},h_e=_e(Ou,_i,a_e,iN,sN,(t,e,n,r,i)=>{var s={},o;return n.forEach(a=>{var l=yJ(e,a);o==null&&(o=u_e(e,r,t));var c=r==="top"&&!i||r==="bottom"&&i;s[a.id]=o-Number(c)*l.height,o+=(c?-1:1)*l.height}),s}),f_e=_e(Ru,_i,l_e,iN,sN,(t,e,n,r,i)=>{var s={},o;return n.forEach(a=>{var l=c_e(e,a);o==null&&(o=d_e(e,r,t));var c=r==="left"&&!i||r==="right"&&i;s[a.id]=o-Number(c)*l.width,o+=(c?-1:1)*l.width}),s}),p_e=(t,e)=>{var n=Lu(t,e);if(n!=null)return h_e(t,n.orientation,n.mirror)},m_e=_e([_i,Lu,p_e,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n==null?void 0:n[r];return i==null?{x:t.left,y:0}:{x:t.left,y:i}}}),g_e=(t,e)=>{var n=Mu(t,e);if(n!=null)return f_e(t,n.orientation,n.mirror)},y_e=_e([_i,Mu,g_e,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n==null?void 0:n[r];return i==null?{x:0,y:t.top}:{x:i,y:t.top}}}),xJ=_e(_i,Mu,(t,e)=>{var n=typeof e.width=="number"?e.width:Tv;return{width:n,height:t.height}}),Zz=(t,e,n)=>{switch(e){case"xAxis":return vJ(t,n).width;case"yAxis":return xJ(t,n).height;default:return}},bJ=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:s,dataKey:o}=n,a=mh(t,r),l=e.map(c=>c.value);if(o&&a&&s==="category"&&i&&hX(l))return l}},LR=_e([fn,nN,Sr,gr],bJ),wJ=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:s}=n,o=mh(t,r);if(o&&(i==="number"||s!=="auto"))return e.map(a=>a.value)}},MR=_e([fn,nN,jv,gr],wJ),Jz=_e([fn,$Ie,t0,n0,LR,MR,zv,OR,gr],(t,e,n,r,i,s,o,a,l)=>{if(e==null)return null;var c=mh(t,l);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:l,categoricalDomain:s,duplicateDomain:i,isCategorical:c,niceTicks:a,range:o,realScaleType:n,scale:r}}),v_e=(t,e,n,r,i,s,o,a,l)=>{if(!(e==null||r==null)){var c=mh(t,l),{type:u,ticks:d,tickCount:h}=e,f=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,p=u==="category"&&r.bandwidth?r.bandwidth()/f:0;p=l==="angleAxis"&&s!=null&&s.length>=2?ji(s[0]-s[1])*2*p:p;var m=d||i;if(m){var y=m.map((g,v)=>{var x=o?o.indexOf(g):g;return{index:v,coordinate:r(x)+p,value:g,offset:p}});return y.filter(g=>!za(g.coordinate))}return c&&a?a.map((g,v)=>({coordinate:r(g)+p,value:g,index:v,offset:p})):r.ticks?r.ticks(h).map(g=>({coordinate:r(g)+p,value:g,offset:p})):r.domain().map((g,v)=>({coordinate:r(g)+p,value:o?o[g]:g,index:v,offset:p}))}},kJ=_e([fn,jv,t0,n0,OR,zv,LR,MR,gr],v_e),x_e=(t,e,n,r,i,s,o)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var a=mh(t,o),{tickCount:l}=e,c=0;return c=o==="angleAxis"&&(r==null?void 0:r.length)>=2?ji(r[0]-r[1])*2*c:c,a&&s?s.map((u,d)=>({coordinate:n(u)+c,value:u,index:d,offset:c})):n.ticks?n.ticks(l).map(u=>({coordinate:n(u)+c,value:u,offset:c})):n.domain().map((u,d)=>({coordinate:n(u)+c,value:i?i[u]:u,index:d,offset:c}))}},Qd=_e([fn,jv,n0,zv,LR,MR,gr],x_e),eh=_e(Sr,n0,(t,e)=>{if(!(t==null||e==null))return eS(eS({},t),{},{scale:e})}),b_e=_e([Sr,t0,$R,mJ],PR);_e((t,e,n)=>vR(t,n),b_e,(t,e)=>{if(!(t==null||e==null))return eS(eS({},t),{},{scale:e})});var w_e=_e([fn,DC,LC],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),SJ=t=>t.options.defaultTooltipEventType,CJ=t=>t.options.validateTooltipEventTypes;function NJ(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function FR(t,e){var n=SJ(t),r=CJ(t);return NJ(e,n,r)}function k_e(t){return gt(e=>FR(e,t))}var AJ=(t,e)=>{var n,r=Number(e);if(!(za(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},S_e=t=>t.tooltip.settings,Sd={active:!1,index:null,dataKey:void 0,coordinate:void 0},C_e={itemInteraction:{click:Sd,hover:Sd},axisInteraction:{click:Sd,hover:Sd},keyboardInteraction:Sd,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},IJ=na({name:"tooltip",initialState:C_e,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:Bs()},removeTooltipEntrySettings:{reducer(t,e){var n=uu(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},prepare:Bs()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate,t.keyboardInteraction.dataKey=e.payload.activeDataKey}}}),{addTooltipEntrySettings:N_e,removeTooltipEntrySettings:A_e,setTooltipSettingsState:I_e,setActiveMouseOverItemIndex:_J,mouseLeaveItem:__e,mouseLeaveChart:EJ,setActiveClickItemIndex:E_e,setMouseOverAxisIndex:TJ,setMouseClickAxisIndex:T_e,setSyncInteraction:l3,setKeyboardInteraction:c3}=IJ.actions,$_e=IJ.reducer;function Qz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Vw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Qz(Object(n),!0).forEach(function(r){P_e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Qz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function P_e(t,e,n){return(e=R_e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function R_e(t){var e=O_e(t,"string");return typeof e=="symbol"?e:e+""}function O_e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function D_e(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function L_e(t){return t.index!=null}var $J=(t,e,n,r)=>{if(e==null)return Sd;var i=D_e(t,e,n);if(i==null)return Sd;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var s=t.settings.active===!0;if(L_e(i)){if(s)return Vw(Vw({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r};return Vw(Vw({},Sd),{},{coordinate:i.coordinate})},jR=(t,e)=>{var n=t==null?void 0:t.index;if(n==null)return null;var r=Number(n);if(!Ps(r))return n;var i=0,s=1/0;return e.length>0&&(s=e.length-1),String(Math.max(i,Math.min(r,s)))},PJ=(t,e,n,r,i,s,o,a)=>{if(!(s==null||a==null)){var l=o[0],c=l==null?void 0:a(l.positions,s);if(c!=null)return c;var u=i==null?void 0:i[Number(s)];if(u)switch(n){case"horizontal":return{x:u.coordinate,y:(r.top+e)/2};default:return{x:(r.left+t)/2,y:u.coordinate}}}},RJ=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;return n==="hover"?i=t.itemInteraction.hover.dataKey:i=t.itemInteraction.click.dataKey,i==null&&r!=null?[t.tooltipItemPayloads[0]]:t.tooltipItemPayloads.filter(s=>{var o;return((o=s.settings)===null||o===void 0?void 0:o.dataKey)===i})},Uv=t=>t.options.tooltipPayloadSearcher,r0=t=>t.tooltip;function e7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function t7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?e7(Object(n),!0).forEach(function(r){M_e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function M_e(t,e,n){return(e=F_e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function F_e(t){var e=j_e(t,"string");return typeof e=="symbol"?e:e+""}function j_e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function B_e(t,e){return t??e}var OJ=(t,e,n,r,i,s,o)=>{if(!(e==null||s==null)){var{chartData:a,computedData:l,dataStartIndex:c,dataEndIndex:u}=n,d=[];return t.reduce((h,f)=>{var p,{dataDefinedOnItem:m,settings:y}=f,g=B_e(m,a),v=Array.isArray(g)?yY(g,c,u):g,x=(p=y==null?void 0:y.dataKey)!==null&&p!==void 0?p:r,b=y==null?void 0:y.nameKey,S;if(r&&Array.isArray(v)&&!Array.isArray(v[0])&&o==="axis"?S=fX(v,r,i):S=s(v,e,l,b),Array.isArray(S))S.forEach(E=>{var I=t7(t7({},y),{},{name:E.name,unit:E.unit,color:void 0,fill:void 0});h.push(BB({tooltipEntrySettings:I,dataKey:E.dataKey,payload:E.payload,value:Zn(E.payload,E.dataKey),name:E.name}))});else{var A;h.push(BB({tooltipEntrySettings:y,dataKey:x,payload:S,value:Zn(S,x),name:(A=Zn(S,b))!==null&&A!==void 0?A:y==null?void 0:y.name}))}return h},d)}},BR=_e([$i,fn,tJ,dR,Ti],fJ),z_e=_e([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),U_e=_e([Ti,Jg],xR),Vv=_e([z_e,$i,U_e],bR,{memoizeOptions:{resultEqualityCheck:eN}}),V_e=_e([Vv],t=>t.filter(JC)),W_e=_e([Vv],wR,{memoizeOptions:{resultEqualityCheck:eN}}),i0=_e([W_e,xh],kR),G_e=_e([V_e,xh,$i],JZ),zR=_e([i0,$i,Vv],CR),DJ=_e([$i],NR),q_e=_e([$i],t=>t.allowDataOverflow),LJ=_e([DJ,q_e],_Z),H_e=_e([Vv],t=>t.filter(JC)),K_e=_e([G_e,H_e,Mv],sJ),X_e=_e([K_e,xh,Ti,LJ],oJ),Y_e=_e([Vv],rJ),Z_e=_e([i0,$i,Y_e,rN,Ti],_R,{memoizeOptions:{resultEqualityCheck:QC}}),J_e=_e([aJ,Ti,Jg],e0),Q_e=_e([J_e,Ti],uJ),eEe=_e([lJ,Ti,Jg],e0),tEe=_e([eEe,Ti],dJ),nEe=_e([cJ,Ti,Jg],e0),rEe=_e([nEe,Ti],hJ),iEe=_e([Q_e,rEe,tEe],tS),sEe=_e([$i,DJ,LJ,X_e,Z_e,iEe,fn,Ti],ER),MJ=_e([$i,fn,i0,zR,Mv,Ti,sEe],TR),oEe=_e([MJ,$i,BR],RR),aEe=_e([$i,MJ,oEe,Ti],DR),FJ=t=>{var e=Ti(t),n=Jg(t),r=!1;return zv(t,e,n,r)},jJ=_e([$i,FJ],YC),BJ=_e([$i,BR,aEe,jJ],PR),lEe=_e([fn,zR,$i,Ti],bJ),cEe=_e([fn,zR,$i,Ti],wJ),uEe=(t,e,n,r,i,s,o,a)=>{if(e){var{type:l}=e,c=mh(t,a);if(r){var u=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,d=l==="category"&&r.bandwidth?r.bandwidth()/u:0;return d=a==="angleAxis"&&i!=null&&(i==null?void 0:i.length)>=2?ji(i[0]-i[1])*2*d:d,c&&o?o.map((h,f)=>({coordinate:r(h)+d,value:h,index:f,offset:d})):r.domain().map((h,f)=>({coordinate:r(h)+d,value:s?s[h]:h,index:f,offset:d}))}}},Fu=_e([fn,$i,BR,BJ,FJ,lEe,cEe,Ti],uEe),UR=_e([SJ,CJ,S_e],(t,e,n)=>NJ(n.shared,t,e)),zJ=t=>t.tooltip.settings.trigger,VR=t=>t.tooltip.settings.defaultIndex,oN=_e([r0,UR,zJ,VR],$J),th=_e([oN,i0],jR),UJ=_e([Fu,th],AJ),VJ=_e([oN],t=>{if(t)return t.dataKey}),WJ=_e([r0,UR,zJ,VR],RJ),dEe=_e([Ru,Ou,fn,_i,Fu,VR,WJ,Uv],PJ),hEe=_e([oN,dEe],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),fEe=_e([oN],t=>t.active),pEe=_e([WJ,th,xh,ZZ,UJ,Uv,UR],OJ),mEe=_e([pEe],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function n7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function r7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?n7(Object(n),!0).forEach(function(r){gEe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):n7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gEe(t,e,n){return(e=yEe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yEe(t){var e=vEe(t,"string");return typeof e=="symbol"?e:e+""}function vEe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var xEe=()=>gt($i),bEe=()=>{var t=xEe(),e=gt(Fu),n=gt(BJ);return G1(r7(r7({},t),{},{scale:n}),e)},wEe=()=>gt(dR),WR=(t,e)=>e,GJ=(t,e,n)=>n,GR=(t,e,n,r)=>r,kEe=_e(Fu,t=>EC(t,e=>e.coordinate)),qR=_e([r0,WR,GJ,GR],$J),qJ=_e([qR,i0],jR),SEe=(t,e,n)=>{if(e!=null){var r=r0(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},HJ=_e([r0,WR,GJ,GR],RJ),nS=_e([Ru,Ou,fn,_i,Fu,GR,HJ,Uv],PJ),CEe=_e([qR,nS],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),KJ=_e(Fu,qJ,AJ),NEe=_e([HJ,qJ,xh,ZZ,KJ,Uv,WR],OJ),AEe=_e([qR],t=>({isActive:t.active,activeIndex:t.index})),IEe=(t,e,n,r,i,s,o,a)=>{if(!(!t||!e||!r||!i||!s)){var l=qSe(t.chartX,t.chartY,e,n,a);if(l){var c=KSe(l,e),u=RSe(c,o,s,r,i),d=HSe(e,s,u,l);return{activeIndex:String(u),activeCoordinate:d}}}};function u3(){return u3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u3.apply(null,arguments)}function i7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ww(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?i7(Object(n),!0).forEach(function(r){_Ee(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _Ee(t,e,n){return(e=EEe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function EEe(t){var e=TEe(t,"string");return typeof e=="symbol"?e:e+""}function TEe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $Ee(t){var{coordinate:e,payload:n,index:r,offset:i,tooltipAxisBandSize:s,layout:o,cursor:a,tooltipEventType:l,chartName:c}=t,u=e,d=n,h=r;if(!a||!u||c!=="ScatterChart"&&l!=="axis")return null;var f,p;if(c==="ScatterChart")f=u,p=HCe;else if(c==="BarChart")f=KCe(o,u,i,s),p=BY;else if(o==="radial"){var{cx:m,cy:y,radius:g,startAngle:v,endAngle:x}=zY(u);f={cx:m,cy:y,startAngle:v,endAngle:x,innerRadius:g,outerRadius:g},p=VY}else f={points:$Ne(o,u,i)},p=F4;var b=typeof a=="object"&&"className"in a?a.className:void 0,S=Ww(Ww(Ww(Ww({stroke:"#ccc",pointerEvents:"none"},i),f),Zf(a)),{},{payload:d,payloadIndex:h,className:yn("recharts-tooltip-cursor",b)});return N.isValidElement(a)?N.cloneElement(a,S):N.createElement(p,S)}function PEe(t){var e=bEe(),n=EY(),r=BC(),i=wEe();return N.createElement($Ee,u3({},t,{coordinate:t.coordinate,index:t.index,payload:t.payload,offset:n,layout:r,tooltipAxisBandSize:e,chartName:i}))}var XJ=N.createContext(null),REe=()=>N.useContext(XJ),YJ={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function s(l,c,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new i(u,d||l,h),p=n?n+c:c;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],f]:l._events[p].push(f):(l._events[p]=f,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],u,d;if(this._eventsCount===0)return c;for(d in u=this._events)e.call(u,d)&&c.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},a.prototype.listeners=function(c){var u=n?n+c:c,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,p=new Array(f);h<f;h++)p[h]=d[h].fn;return p},a.prototype.listenerCount=function(c){var u=n?n+c:c,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(c,u,d,h,f,p){var m=n?n+c:c;if(!this._events[m])return!1;var y=this._events[m],g=arguments.length,v,x;if(y.fn){switch(y.once&&this.removeListener(c,y.fn,void 0,!0),g){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,u),!0;case 3:return y.fn.call(y.context,u,d),!0;case 4:return y.fn.call(y.context,u,d,h),!0;case 5:return y.fn.call(y.context,u,d,h,f),!0;case 6:return y.fn.call(y.context,u,d,h,f,p),!0}for(x=1,v=new Array(g-1);x<g;x++)v[x-1]=arguments[x];y.fn.apply(y.context,v)}else{var b=y.length,S;for(x=0;x<b;x++)switch(y[x].once&&this.removeListener(c,y[x].fn,void 0,!0),g){case 1:y[x].fn.call(y[x].context);break;case 2:y[x].fn.call(y[x].context,u);break;case 3:y[x].fn.call(y[x].context,u,d);break;case 4:y[x].fn.call(y[x].context,u,d,h);break;default:if(!v)for(S=1,v=new Array(g-1);S<g;S++)v[S-1]=arguments[S];y[x].fn.apply(y[x].context,v)}}return!0},a.prototype.on=function(c,u,d){return s(this,c,u,d,!1)},a.prototype.once=function(c,u,d){return s(this,c,u,d,!0)},a.prototype.removeListener=function(c,u,d,h){var f=n?n+c:c;if(!this._events[f])return this;if(!u)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===u&&(!h||p.once)&&(!d||p.context===d)&&o(this,f);else{for(var m=0,y=[],g=p.length;m<g;m++)(p[m].fn!==u||h&&!p[m].once||d&&p[m].context!==d)&&y.push(p[m]);y.length?this._events[f]=y.length===1?y[0]:y:o(this,f)}return this},a.prototype.removeAllListeners=function(c){var u;return c?(u=n?n+c:c,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(YJ);var OEe=YJ.exports;const DEe=Ic(OEe);var J1=new DEe,d3="recharts.syncEvent.tooltip",s7="recharts.syncEvent.brush";function HR(t,e){if(e){var n=Number.parseInt(e,10);if(!za(n))return t==null?void 0:t[n]}}var LEe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},ZJ=na({name:"options",initialState:LEe,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),MEe=ZJ.reducer,{createEventEmitter:FEe}=ZJ.actions;function jEe(t){return t.tooltip.syncInteraction}var BEe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},JJ=na({name:"chartData",initialState:BEe,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:o7,setDataStartEndIndexes:zEe,setComputedData:mat}=JJ.actions,UEe=JJ.reducer,VEe=["x","y"];function a7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function sm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?a7(Object(n),!0).forEach(function(r){WEe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function WEe(t,e,n){return(e=GEe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GEe(t){var e=qEe(t,"string");return typeof e=="symbol"?e:e+""}function qEe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function HEe(t,e){if(t==null)return{};var n,r,i=KEe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function KEe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var QJ=()=>{};function XEe(){var t=gt(hR),e=gt(fR),n=Lr(),r=gt(GZ),i=gt(Fu),s=BC(),o=jC(),a=gt(l=>l.rootProps.className);N.useEffect(()=>{if(t==null)return QJ;var l=(c,u,d)=>{if(e!==d&&t===c){if(r==="index"){var h;if(o&&u!==null&&u!==void 0&&(h=u.payload)!==null&&h!==void 0&&h.coordinate&&u.payload.sourceViewBox){var f=u.payload.coordinate,{x:p,y:m}=f,y=HEe(f,VEe),{x:g,y:v,width:x,height:b}=u.payload.sourceViewBox,S=sm(sm({},y),{},{x:o.x+(x?(p-g)/x:0)*o.width,y:o.y+(b?(m-v)/b:0)*o.height});n(sm(sm({},u),{},{payload:sm(sm({},u.payload),{},{coordinate:S})}))}else n(u);return}if(i!=null){var A;if(typeof r=="function"){var E={activeTooltipIndex:u.payload.index==null?void 0:Number(u.payload.index),isTooltipActive:u.payload.active,activeIndex:u.payload.index==null?void 0:Number(u.payload.index),activeLabel:u.payload.label,activeDataKey:u.payload.dataKey,activeCoordinate:u.payload.coordinate},I=r(i,E);A=i[I]}else r==="value"&&(A=i.find(q=>String(q.value)===u.payload.label));var{coordinate:T}=u.payload;if(A==null||u.payload.active===!1||T==null||o==null){n(l3({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0}));return}var{x:O,y:$}=T,R=Math.min(O,o.x+o.width),F=Math.min($,o.y+o.height),L={x:s==="horizontal"?A.coordinate:R,y:s==="horizontal"?F:A.coordinate},U=l3({active:u.payload.active,coordinate:L,dataKey:u.payload.dataKey,index:String(A.index),label:u.payload.label,sourceViewBox:u.payload.sourceViewBox});n(U)}}};return J1.on(d3,l),()=>{J1.off(d3,l)}},[a,n,e,t,r,i,s,o])}function YEe(){var t=gt(hR),e=gt(fR),n=Lr();N.useEffect(()=>{if(t==null)return QJ;var r=(i,s,o)=>{e!==o&&t===i&&n(zEe(s))};return J1.on(s7,r),()=>{J1.off(s7,r)}},[n,e,t])}function ZEe(){var t=Lr();N.useEffect(()=>{t(FEe())},[t]),XEe(),YEe()}function JEe(t,e,n,r,i,s){var o=gt(f=>SEe(f,t,e)),a=gt(fR),l=gt(hR),c=gt(GZ),u=gt(jEe),d=u==null?void 0:u.active,h=jC();N.useEffect(()=>{if(!d&&l!=null&&a!=null){var f=l3({active:s,coordinate:n,dataKey:o,index:i,label:typeof r=="number"?String(r):r,sourceViewBox:h});J1.emit(d3,l,f,a)}},[d,n,o,i,r,a,l,c,s,h])}function l7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function c7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?l7(Object(n),!0).forEach(function(r){QEe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function QEe(t,e,n){return(e=eTe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eTe(t){var e=tTe(t,"string");return typeof e=="symbol"?e:e+""}function tTe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nTe(t){return t.dataKey}function rTe(t,e){return N.isValidElement(t)?N.cloneElement(t,e):typeof t=="function"?N.createElement(t,e):N.createElement(NCe,e)}var u7=[],iTe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!gh.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function h_(t){var e=ls(t,iTe),{active:n,allowEscapeViewBox:r,animationDuration:i,animationEasing:s,content:o,filterNull:a,isAnimationActive:l,offset:c,payloadUniqBy:u,position:d,reverseDirection:h,useTranslate3d:f,wrapperStyle:p,cursor:m,shared:y,trigger:g,defaultIndex:v,portal:x,axisId:b}=e,S=Lr(),A=typeof v=="number"?String(v):v;N.useEffect(()=>{S(I_e({shared:y,trigger:g,axisId:b,active:n,defaultIndex:A}))},[S,y,g,b,n,A]);var E=jC(),I=DY(),T=k_e(y),{activeIndex:O,isActive:$}=gt(J=>AEe(J,T,g,A)),R=gt(J=>NEe(J,T,g,A)),F=gt(J=>KJ(J,T,g,A)),L=gt(J=>CEe(J,T,g,A)),U=R,q=REe(),K=n??$,[j,Y]=Nke([U,K]),ae=T==="axis"?F:void 0;JEe(T,g,L,ae,O,K);var le=x??q;if(le==null)return null;var M=U??u7;K||(M=u7),a&&M.length&&(M=V2e(U.filter(J=>J.value!=null&&(J.hide!==!0||e.includeHidden)),u,nTe));var V=M.length>0,H=N.createElement(PCe,{allowEscapeViewBox:r,animationDuration:i,animationEasing:s,isAnimationActive:l,active:K,coordinate:L,hasPayload:V,offset:c,position:d,reverseDirection:h,useTranslate3d:f,viewBox:E,wrapperStyle:p,lastBoundingBox:j,innerRef:Y,hasPortalFromProps:!!x},rTe(o,c7(c7({},e),{},{payload:M,label:ae,active:K,coordinate:L,accessibilityLayer:I})));return N.createElement(N.Fragment,null,J9.createPortal(H,le),K&&N.createElement(PEe,{cursor:m,tooltipEventType:T,coordinate:L,payload:U,index:O}))}var Wv=t=>null;Wv.displayName="Cell";function sTe(t,e,n){return(e=oTe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oTe(t){var e=aTe(t,"string");return typeof e=="symbol"?e:e+""}function aTe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class lTe{constructor(e){sTe(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function d7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function cTe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?d7(Object(n),!0).forEach(function(r){uTe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uTe(t,e,n){return(e=dTe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dTe(t){var e=hTe(t,"string");return typeof e=="symbol"?e:e+""}function hTe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var fTe={cacheSize:2e3,enableCache:!0},eQ=cTe({},fTe),h7=new lTe(eQ.cacheSize),pTe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},f7="recharts_measurement_span";function mTe(t,e){var n=e.fontSize||"",r=e.fontFamily||"",i=e.fontWeight||"",s=e.fontStyle||"",o=e.letterSpacing||"",a=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(s,"|").concat(o,"|").concat(a)}var p7=(t,e)=>{try{var n=document.getElementById(f7);n||(n=document.createElement("span"),n.setAttribute("id",f7),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,pTe,e),n.textContent="".concat(t);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},o1=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||gh.isSsr)return{width:0,height:0};if(!eQ.enableCache)return p7(e,n);var r=mTe(e,n),i=h7.get(r);if(i)return i;var s=p7(e,n);return h7.set(r,s),s},m7=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,g7=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,gTe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,yTe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,tQ={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},vTe=Object.keys(tQ),$m="NaN";function xTe(t,e){return t*tQ[e]}class lo{static parse(e){var n,[,r,i]=(n=yTe.exec(e))!==null&&n!==void 0?n:[];return new lo(parseFloat(r),i??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,za(e)&&(this.unit=""),n!==""&&!gTe.test(n)&&(this.num=NaN,this.unit=""),vTe.includes(n)&&(this.num=xTe(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new lo(NaN,""):new lo(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new lo(NaN,""):new lo(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new lo(NaN,""):new lo(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new lo(NaN,""):new lo(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return za(this.num)}}function nQ(t){if(t.includes($m))return $m;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,i,s]=(n=m7.exec(e))!==null&&n!==void 0?n:[],o=lo.parse(r??""),a=lo.parse(s??""),l=i==="*"?o.multiply(a):o.divide(a);if(l.isNaN())return $m;e=e.replace(m7,l.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var c,[,u,d,h]=(c=g7.exec(e))!==null&&c!==void 0?c:[],f=lo.parse(u??""),p=lo.parse(h??""),m=d==="+"?f.add(p):f.subtract(p);if(m.isNaN())return $m;e=e.replace(g7,m.toString())}return e}var y7=/\(([^()]*)\)/;function bTe(t){for(var e=t,n;(n=y7.exec(e))!=null;){var[,r]=n;e=e.replace(y7,nQ(r))}return e}function wTe(t){var e=t.replace(/\s+/g,"");return e=bTe(e),e=nQ(e),e}function kTe(t){try{return wTe(t)}catch{return $m}}function f_(t){var e=kTe(t.slice(5,-1));return e===$m?"":e}var STe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],CTe=["dx","dy","angle","className","breakAll"];function h3(){return h3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},h3.apply(null,arguments)}function v7(t,e){if(t==null)return{};var n,r,i=NTe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function NTe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var rQ=/[ \f\n\r\t\v\u2028\u2029]+/,iQ=t=>{var{children:e,breakAll:n,style:r}=t;try{var i=[];mr(e)||(n?i=e.toString().split(""):i=e.toString().split(rQ));var s=i.map(a=>({word:a,width:o1(a,r).width})),o=n?0:o1(" ",r).width;return{wordsWithComputedWidth:s,spaceWidth:o}}catch{return null}},ATe=(t,e,n,r,i)=>{var{maxLines:s,children:o,style:a,breakAll:l}=t,c=St(s),u=o,d=function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return $.reduce((R,F)=>{var{word:L,width:U}=F,q=R[R.length-1];if(q&&(r==null||i||q.width+U+n<Number(r)))q.words.push(L),q.width+=U+n;else{var K={words:[L],width:U};R.push(K)}return R},[])},h=d(e),f=O=>O.reduce(($,R)=>$.width>R.width?$:R);if(!c||i)return h;var p=h.length>s||f(h).width>Number(r);if(!p)return h;for(var m="…",y=O=>{var $=u.slice(0,O),R=iQ({breakAll:l,style:a,children:$+m}).wordsWithComputedWidth,F=d(R),L=F.length>s||f(F).width>Number(r);return[L,F]},g=0,v=u.length-1,x=0,b;g<=v&&x<=u.length-1;){var S=Math.floor((g+v)/2),A=S-1,[E,I]=y(A),[T]=y(S);if(!E&&!T&&(g=S+1),E&&T&&(v=S-1),!E&&T){b=I;break}x++}return b||h},x7=t=>{var e=mr(t)?[]:t.toString().split(rQ);return[{words:e}]},ITe=t=>{var{width:e,scaleToFit:n,children:r,style:i,breakAll:s,maxLines:o}=t;if((e||n)&&!gh.isSsr){var a,l,c=iQ({breakAll:s,children:r,style:i});if(c){var{wordsWithComputedWidth:u,spaceWidth:d}=c;a=u,l=d}else return x7(r);return ATe({breakAll:s,children:r,maxLines:o,style:i},a,l,e,n)}return x7(r)},b7="#808080",aN=N.forwardRef((t,e)=>{var{x:n=0,y:r=0,lineHeight:i="1em",capHeight:s="0.71em",scaleToFit:o=!1,textAnchor:a="start",verticalAnchor:l="end",fill:c=b7}=t,u=v7(t,STe),d=N.useMemo(()=>ITe({breakAll:u.breakAll,children:u.children,maxLines:u.maxLines,scaleToFit:o,style:u.style,width:u.width}),[u.breakAll,u.children,u.maxLines,o,u.style,u.width]),{dx:h,dy:f,angle:p,className:m,breakAll:y}=u,g=v7(u,CTe);if(!kc(n)||!kc(r)||d.length===0)return null;var v=n+(St(h)?h:0),x=r+(St(f)?f:0),b;switch(l){case"start":b=f_("calc(".concat(s,")"));break;case"middle":b=f_("calc(".concat((d.length-1)/2," * -").concat(i," + (").concat(s," / 2))"));break;default:b=f_("calc(".concat(d.length-1," * -").concat(i,")"));break}var S=[];if(o){var A=d[0].width,{width:E}=u;S.push("scale(".concat(St(E)?E/A:1,")"))}return p&&S.push("rotate(".concat(p,", ").concat(v,", ").concat(x,")")),S.length&&(g.transform=S.join(" ")),N.createElement("text",h3({},Zs(g),{ref:e,x:v,y:x,className:yn("recharts-text",m),textAnchor:a,fill:c.includes("url")?b7:c}),d.map((I,T)=>{var O=I.words.join(y?"":" ");return N.createElement("tspan",{x:v,dy:T===0?b:i,key:"".concat(O,"-").concat(T)},O)}))});aN.displayName="Text";var _Te=["labelRef"];function ETe(t,e){if(t==null)return{};var n,r,i=TTe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function TTe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function w7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?w7(Object(n),!0).forEach(function(r){$Te(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $Te(t,e,n){return(e=PTe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function PTe(t){var e=RTe(t,"string");return typeof e=="symbol"?e:e+""}function RTe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tu(){return tu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tu.apply(null,arguments)}var sQ=N.createContext(null),OTe=t=>{var{x:e,y:n,width:r,height:i,children:s}=t,o=N.useMemo(()=>({x:e,y:n,width:r,height:i}),[e,n,r,i]);return N.createElement(sQ.Provider,{value:o},s)},oQ=()=>{var t=N.useContext(sQ),e=jC();return t||e},DTe=N.createContext(null),LTe=()=>{var t=N.useContext(DTe),e=gt(YZ);return t||e},MTe=t=>{var{value:e,formatter:n}=t,r=mr(t.children)?e:t.children;return typeof n=="function"?n(r):r},KR=t=>t!=null&&typeof t=="function",FTe=(t,e)=>{var n=ji(e-t),r=Math.min(Math.abs(e-t),360);return n*r},jTe=(t,e,n,r,i)=>{var{offset:s,className:o}=t,{cx:a,cy:l,innerRadius:c,outerRadius:u,startAngle:d,endAngle:h,clockWise:f}=i,p=(c+u)/2,m=FTe(d,h),y=m>=0?1:-1,g,v;switch(e){case"insideStart":g=d+y*s,v=f;break;case"insideEnd":g=h-y*s,v=!f;break;case"end":g=h+y*s,v=f;break;default:throw new Error("Unsupported position ".concat(e))}v=m<=0?v:!v;var x=oi(a,l,p,g),b=oi(a,l,p,g+(v?1:-1)*359),S="M".concat(x.x,",").concat(x.y,`
    A`).concat(p,",").concat(p,",0,1,").concat(v?0:1,`,
    `).concat(b.x,",").concat(b.y),A=mr(t.id)?U1("recharts-radial-line-"):t.id;return N.createElement("text",tu({},r,{dominantBaseline:"central",className:yn("recharts-radial-bar-label",o)}),N.createElement("defs",null,N.createElement("path",{id:A,d:S})),N.createElement("textPath",{xlinkHref:"#".concat(A)},n))},BTe=(t,e,n)=>{var{cx:r,cy:i,innerRadius:s,outerRadius:o,startAngle:a,endAngle:l}=t,c=(a+l)/2;if(n==="outside"){var{x:u,y:d}=oi(r,i,o+e,c);return{x:u,y:d,textAnchor:u>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var h=(s+o)/2,{x:f,y:p}=oi(r,i,h,c);return{x:f,y:p,textAnchor:"middle",verticalAnchor:"middle"}},aQ=t=>"cx"in t&&St(t.cx),zTe=(t,e)=>{var{parentViewBox:n,offset:r,position:i}=t,s;n!=null&&!aQ(n)&&(s=n);var{x:o,y:a,width:l,height:c}=e,u=c>=0?1:-1,d=u*r,h=u>0?"end":"start",f=u>0?"start":"end",p=l>=0?1:-1,m=p*r,y=p>0?"end":"start",g=p>0?"start":"end";if(i==="top"){var v={x:o+l/2,y:a-u*r,textAnchor:"middle",verticalAnchor:h};return qr(qr({},v),s?{height:Math.max(a-s.y,0),width:l}:{})}if(i==="bottom"){var x={x:o+l/2,y:a+c+d,textAnchor:"middle",verticalAnchor:f};return qr(qr({},x),s?{height:Math.max(s.y+s.height-(a+c),0),width:l}:{})}if(i==="left"){var b={x:o-m,y:a+c/2,textAnchor:y,verticalAnchor:"middle"};return qr(qr({},b),s?{width:Math.max(b.x-s.x,0),height:c}:{})}if(i==="right"){var S={x:o+l+m,y:a+c/2,textAnchor:g,verticalAnchor:"middle"};return qr(qr({},S),s?{width:Math.max(s.x+s.width-S.x,0),height:c}:{})}var A=s?{width:l,height:c}:{};return i==="insideLeft"?qr({x:o+m,y:a+c/2,textAnchor:g,verticalAnchor:"middle"},A):i==="insideRight"?qr({x:o+l-m,y:a+c/2,textAnchor:y,verticalAnchor:"middle"},A):i==="insideTop"?qr({x:o+l/2,y:a+d,textAnchor:"middle",verticalAnchor:f},A):i==="insideBottom"?qr({x:o+l/2,y:a+c-d,textAnchor:"middle",verticalAnchor:h},A):i==="insideTopLeft"?qr({x:o+m,y:a+d,textAnchor:g,verticalAnchor:f},A):i==="insideTopRight"?qr({x:o+l-m,y:a+d,textAnchor:y,verticalAnchor:f},A):i==="insideBottomLeft"?qr({x:o+m,y:a+c-d,textAnchor:g,verticalAnchor:h},A):i==="insideBottomRight"?qr({x:o+l-m,y:a+c-d,textAnchor:y,verticalAnchor:h},A):i&&typeof i=="object"&&(St(i.x)||wu(i.x))&&(St(i.y)||wu(i.y))?qr({x:o+Es(i.x,l),y:a+Es(i.y,c),textAnchor:"end",verticalAnchor:"end"},A):qr({x:o+l/2,y:a+c/2,textAnchor:"middle",verticalAnchor:"middle"},A)},UTe={offset:5};function yd(t){var e=ls(t,UTe),{viewBox:n,position:r,value:i,children:s,content:o,className:a="",textBreakAll:l,labelRef:c}=e,u=LTe(),d=oQ(),h=r==="center"?d:u??d,f=n||h;if(!f||mr(i)&&mr(s)&&!N.isValidElement(o)&&typeof o!="function")return null;var p=qr(qr({},e),{},{viewBox:f});if(N.isValidElement(o)){var m=ETe(p,_Te);return N.cloneElement(o,m)}var y;if(typeof o=="function"){if(y=N.createElement(o,p),N.isValidElement(y))return y}else y=MTe(e);var g=aQ(f),v=Zs(e);if(g&&(r==="insideStart"||r==="insideEnd"||r==="end"))return jTe(e,r,y,v,f);var x=g?BTe(f,e.offset,e.position):zTe(e,f);return N.createElement(aN,tu({ref:c,className:yn("recharts-label",a)},v,x,{breakAll:l}),y)}yd.displayName="Label";var VTe=(t,e,n)=>{if(!t)return null;var r={viewBox:e,labelRef:n};return t===!0?N.createElement(yd,tu({key:"label-implicit"},r)):kc(t)?N.createElement(yd,tu({key:"label-implicit",value:t},r)):N.isValidElement(t)?t.type===yd?N.cloneElement(t,qr({key:"label-implicit"},r)):N.createElement(yd,tu({key:"label-implicit",content:t},r)):KR(t)?N.createElement(yd,tu({key:"label-implicit",content:t},r)):t&&typeof t=="object"?N.createElement(yd,tu({},t,{key:"label-implicit"},r)):null};function WTe(t){var{label:e,labelRef:n}=t,r=oQ();return VTe(e,r,n)||null}var lQ={},cQ={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(cQ);var uQ={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(uQ);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=cQ,n=uQ,r=IC;function i(s){if(r.isArrayLike(s))return e.last(n.toArray(s))}t.last=i})(lQ);var GTe=lQ.last;const qTe=Ic(GTe);var HTe=["valueAccessor"],KTe=["dataKey","clockWise","id","textBreakAll"];function rS(){return rS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rS.apply(null,arguments)}function k7(t,e){if(t==null)return{};var n,r,i=XTe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function XTe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var YTe=t=>Array.isArray(t.value)?qTe(t.value):t.value,dQ=N.createContext(void 0),hQ=dQ.Provider,fQ=N.createContext(void 0),ZTe=fQ.Provider;function JTe(){return N.useContext(dQ)}function QTe(){return N.useContext(fQ)}function B2(t){var{valueAccessor:e=YTe}=t,n=k7(t,HTe),{dataKey:r,clockWise:i,id:s,textBreakAll:o}=n,a=k7(n,KTe),l=JTe(),c=QTe(),u=l||c;return!u||!u.length?null:N.createElement(is,{className:"recharts-label-list"},u.map((d,h)=>{var f,p=mr(r)?e(d,h):Zn(d&&d.payload,r),m=mr(s)?{}:{id:"".concat(s,"-").concat(h)};return N.createElement(yd,rS({key:"label-".concat(h)},Zs(d),a,m,{fill:(f=n.fill)!==null&&f!==void 0?f:d.fill,parentViewBox:d.parentViewBox,value:p,textBreakAll:o,viewBox:d.viewBox,index:h}))}))}B2.displayName="LabelList";function XR(t){var{label:e}=t;return e?e===!0?N.createElement(B2,{key:"labelList-implicit"}):N.isValidElement(e)||KR(e)?N.createElement(B2,{key:"labelList-implicit",content:e}):typeof e=="object"?N.createElement(B2,rS({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function f3(){return f3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},f3.apply(null,arguments)}var pQ=t=>{var{cx:e,cy:n,r,className:i}=t,s=yn("recharts-dot",i);return e===+e&&n===+n&&r===+r?N.createElement("circle",f3({},Yo(t),v4(t),{className:s,cx:e,cy:n,r})):null},mQ=t=>t.graphicalItems.polarItems,e3e=_e([gr,Fv],xR),lN=_e([mQ,Sr,e3e],bR),t3e=_e([lN],wR),cN=_e([t3e,lR],kR),n3e=_e([cN,Sr,lN],CR);_e([cN,Sr,lN],(t,e,n)=>n.length>0?t.flatMap(r=>n.flatMap(i=>{var s,o=Zn(r,(s=e.dataKey)!==null&&s!==void 0?s:i.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):(e==null?void 0:e.dataKey)!=null?t.map(r=>({value:Zn(r,e.dataKey),errorDomain:[]})):t.map(r=>({value:r,errorDomain:[]})));var S7=()=>{},r3e=_e([cN,Sr,lN,rN,gr],_R),i3e=_e([Sr,AR,IR,S7,r3e,S7,fn,gr],ER),gQ=_e([Sr,fn,cN,n3e,Mv,gr,i3e],TR),s3e=_e([gQ,Sr,t0],RR);_e([Sr,gQ,s3e,gr],DR);var o3e={radiusAxis:{},angleAxis:{}},yQ=na({name:"polarAxis",initialState:o3e,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}});yQ.actions;var a3e=yQ.reducer;function C7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function N7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?C7(Object(n),!0).forEach(function(r){l3e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function l3e(t,e,n){return(e=c3e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c3e(t){var e=u3e(t,"string");return typeof e=="symbol"?e:e+""}function u3e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var d3e=(t,e)=>e,YR=_e([mQ,d3e],(t,e)=>t.filter(n=>n.type==="pie").find(n=>n.id===e)),h3e=[],ZR=(t,e,n)=>(n==null?void 0:n.length)===0?h3e:n,vQ=_e([lR,YR,ZR],(t,e,n)=>{var{chartData:r}=t;if(e!=null){var i;if((e==null?void 0:e.data)!=null&&e.data.length>0?i=e.data:i=r,(!i||!i.length)&&n!=null&&(i=n.map(s=>N7(N7({},e.presentationProps),s.props))),i!=null)return i}}),f3e=_e([vQ,YR,ZR],(t,e,n)=>{if(!(t==null||e==null))return t.map((r,i)=>{var s,o=Zn(r,e.nameKey,e.name),a;return n!=null&&(s=n[i])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?a=n[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?a=r.fill:a=e.fill,{value:Kg(o,e.dataKey),color:a,payload:r,type:e.legendType}})}),p3e=_e([vQ,YR,ZR,_i],(t,e,n,r)=>{if(!(e==null||t==null))return h$e({offset:r,pieSettings:e,displayedData:t,cells:n})}),xQ={exports:{}},Gn={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JR=Symbol.for("react.transitional.element"),QR=Symbol.for("react.portal"),uN=Symbol.for("react.fragment"),dN=Symbol.for("react.strict_mode"),hN=Symbol.for("react.profiler"),fN=Symbol.for("react.consumer"),pN=Symbol.for("react.context"),mN=Symbol.for("react.forward_ref"),gN=Symbol.for("react.suspense"),yN=Symbol.for("react.suspense_list"),vN=Symbol.for("react.memo"),xN=Symbol.for("react.lazy"),m3e=Symbol.for("react.view_transition"),g3e=Symbol.for("react.client.reference");function Ka(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case JR:switch(t=t.type,t){case uN:case hN:case dN:case gN:case yN:case m3e:return t;default:switch(t=t&&t.$$typeof,t){case pN:case mN:case xN:case vN:return t;case fN:return t;default:return e}}case QR:return e}}}Gn.ContextConsumer=fN;Gn.ContextProvider=pN;Gn.Element=JR;Gn.ForwardRef=mN;Gn.Fragment=uN;Gn.Lazy=xN;Gn.Memo=vN;Gn.Portal=QR;Gn.Profiler=hN;Gn.StrictMode=dN;Gn.Suspense=gN;Gn.SuspenseList=yN;Gn.isContextConsumer=function(t){return Ka(t)===fN};Gn.isContextProvider=function(t){return Ka(t)===pN};Gn.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===JR};Gn.isForwardRef=function(t){return Ka(t)===mN};Gn.isFragment=function(t){return Ka(t)===uN};Gn.isLazy=function(t){return Ka(t)===xN};Gn.isMemo=function(t){return Ka(t)===vN};Gn.isPortal=function(t){return Ka(t)===QR};Gn.isProfiler=function(t){return Ka(t)===hN};Gn.isStrictMode=function(t){return Ka(t)===dN};Gn.isSuspense=function(t){return Ka(t)===gN};Gn.isSuspenseList=function(t){return Ka(t)===yN};Gn.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===uN||t===hN||t===dN||t===gN||t===yN||typeof t=="object"&&t!==null&&(t.$$typeof===xN||t.$$typeof===vN||t.$$typeof===pN||t.$$typeof===fN||t.$$typeof===mN||t.$$typeof===g3e||t.getModuleId!==void 0)};Gn.typeOf=Ka;xQ.exports=Gn;var y3e=xQ.exports,A7=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",I7=null,p_=null,bQ=t=>{if(t===I7&&Array.isArray(p_))return p_;var e=[];return N.Children.forEach(t,n=>{mr(n)||(y3e.isFragment(n)?e=e.concat(bQ(n.props.children)):e.push(n))}),p_=e,I7=t,e};function eO(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(i=>A7(i)):r=[A7(e)],bQ(t).forEach(i=>{var s=Jf(i,"type.displayName")||Jf(i,"type.name");r.indexOf(s)!==-1&&n.push(i)}),n}var wQ=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0,kQ={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var i;if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const s=n[Symbol.toStringTag];return s==null||!((i=Object.getOwnPropertyDescriptor(n,Symbol.toStringTag))!=null&&i.writable)?!1:n.toString()===`[object ${s}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}t.isPlainObject=e})(kQ);var v3e=kQ.isPlainObject;const x3e=Ic(v3e);function _7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function E7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_7(Object(n),!0).forEach(function(r){b3e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function b3e(t,e,n){return(e=w3e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function w3e(t){var e=k3e(t,"string");return typeof e=="symbol"?e:e+""}function k3e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function iS(){return iS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},iS.apply(null,arguments)}var T7=(t,e,n,r,i)=>{var s=n-r,o;return o="M ".concat(t,",").concat(e),o+="L ".concat(t+n,",").concat(e),o+="L ".concat(t+n-s/2,",").concat(e+i),o+="L ".concat(t+n-s/2-r,",").concat(e+i),o+="L ".concat(t,",").concat(e," Z"),o},S3e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},C3e=t=>{var e=ls(t,S3e),{x:n,y:r,upperWidth:i,lowerWidth:s,height:o,className:a}=e,{animationEasing:l,animationDuration:c,animationBegin:u,isUpdateAnimationActive:d}=e,h=N.useRef(null),[f,p]=N.useState(-1),m=N.useRef(i),y=N.useRef(s),g=N.useRef(o),v=N.useRef(n),x=N.useRef(r),b=Pv(t,"trapezoid-");if(N.useEffect(()=>{if(h.current&&h.current.getTotalLength)try{var L=h.current.getTotalLength();L&&p(L)}catch{}},[]),n!==+n||r!==+r||i!==+i||s!==+s||o!==+o||i===0&&s===0||o===0)return null;var S=yn("recharts-trapezoid",a);if(!d)return N.createElement("g",null,N.createElement("path",iS({},Zs(e),{className:S,d:T7(n,r,i,s,o)})));var A=m.current,E=y.current,I=g.current,T=v.current,O=x.current,$="0px ".concat(f===-1?1:f,"px"),R="".concat(f,"px 0px"),F=LY(["strokeDasharray"],c,l);return N.createElement($v,{animationId:b,key:b,canBegin:f>0,duration:c,easing:l,isActive:d,begin:u},L=>{var U=$r(A,i,L),q=$r(E,s,L),K=$r(I,o,L),j=$r(T,n,L),Y=$r(O,r,L);h.current&&(m.current=U,y.current=q,g.current=K,v.current=j,x.current=Y);var ae=L>0?{transition:F,strokeDasharray:R}:{strokeDasharray:$};return N.createElement("path",iS({},Zs(e),{className:S,d:T7(j,Y,U,q,K),ref:h,style:E7(E7({},ae),e.style)}))})},N3e=["option","shapeType","propTransformer","activeClassName","isActive"];function A3e(t,e){if(t==null)return{};var n,r,i=I3e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function I3e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function $7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function sS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$7(Object(n),!0).forEach(function(r){_3e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _3e(t,e,n){return(e=E3e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function E3e(t){var e=T3e(t,"string");return typeof e=="symbol"?e:e+""}function T3e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $3e(t,e){return sS(sS({},e),t)}function P3e(t,e){return t==="symbols"}function P7(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return N.createElement(BY,n);case"trapezoid":return N.createElement(C3e,n);case"sector":return N.createElement(VY,n);case"symbols":if(P3e(e))return N.createElement(mX,n);break;default:return null}}function R3e(t){return N.isValidElement(t)?t.props:t}function SQ(t){var{option:e,shapeType:n,propTransformer:r=$3e,activeClassName:i="recharts-active-shape",isActive:s}=t,o=A3e(t,N3e),a;if(N.isValidElement(e))a=N.cloneElement(e,sS(sS({},o),R3e(e)));else if(typeof e=="function")a=e(o);else if(x3e(e)&&typeof e!="boolean"){var l=r(e,o);a=N.createElement(P7,{shapeType:n,elementProps:l})}else{var c=o;a=N.createElement(P7,{shapeType:n,elementProps:c})}return s?N.createElement(is,{className:i},a):a}var tO=(t,e)=>{var n=Lr();return(r,i)=>s=>{t==null||t(r,i,s),n(_J({activeIndex:String(i),activeDataKey:e,activeCoordinate:r.tooltipPosition}))}},nO=t=>{var e=Lr();return(n,r)=>i=>{t==null||t(n,r,i),e(__e())}},rO=(t,e)=>{var n=Lr();return(r,i)=>s=>{t==null||t(r,i,s),n(E_e({activeIndex:String(i),activeDataKey:e,activeCoordinate:r.tooltipPosition}))}};function iO(t){var{fn:e,args:n}=t,r=Lr(),i=no();return N.useLayoutEffect(()=>{if(!i){var s=e(n);return r(N_e(s)),()=>{r(A_e(s))}}},[e,n,r,i]),null}var CQ=()=>{};function NQ(t){var{legendPayload:e}=t,n=Lr(),r=no();return N.useLayoutEffect(()=>r?CQ:(n(RY(e)),()=>{n(OY(e))}),[n,r,e]),null}function O3e(t){var{legendPayload:e}=t,n=Lr(),r=gt(fn);return N.useLayoutEffect(()=>r!=="centric"&&r!=="radial"?CQ:(n(RY(e)),()=>{n(OY(e))}),[n,r,e]),null}var m_,D3e=()=>{var[t]=N.useState(()=>U1("uid-"));return t},L3e=(m_=Zae["useId".toString()])!==null&&m_!==void 0?m_:D3e;function M3e(t,e){var n=L3e();return e||(t?"".concat(t,"-").concat(n):n)}var F3e=N.createContext(void 0),sO=t=>{var{id:e,type:n,children:r}=t,i=M3e("recharts-".concat(n),e);return N.createElement(F3e.Provider,{value:i},r(i))},j3e={cartesianItems:[],polarItems:[]},AQ=na({name:"graphicalItems",initialState:j3e,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:Bs()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:n,next:r}=e.payload,i=uu(t).cartesianItems.indexOf(n);i>-1&&(t.cartesianItems[i]=r)},prepare:Bs()},removeCartesianGraphicalItem:{reducer(t,e){var n=uu(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},prepare:Bs()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:Bs()},removePolarGraphicalItem:{reducer(t,e){var n=uu(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)},prepare:Bs()}}}),{addCartesianGraphicalItem:B3e,replaceCartesianGraphicalItem:z3e,removeCartesianGraphicalItem:U3e,addPolarGraphicalItem:V3e,removePolarGraphicalItem:W3e}=AQ.actions,G3e=AQ.reducer;function IQ(t){var e=Lr(),n=N.useRef(null);return N.useLayoutEffect(()=>{n.current===null?e(B3e(t)):n.current!==t&&e(z3e({prev:n.current,next:t})),n.current=t},[e,t]),N.useLayoutEffect(()=>()=>{n.current&&(e(U3e(n.current)),n.current=null)},[e]),null}function q3e(t){var e=Lr();return N.useLayoutEffect(()=>(e(V3e(t)),()=>{e(W3e(t))}),[e,t]),null}var H3e=["onMouseEnter","onClick","onMouseLeave"],K3e=["id"],X3e=["id"];function oO(t,e){if(t==null)return{};var n,r,i=Y3e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Y3e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function R7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function cr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?R7(Object(n),!0).forEach(function(r){Z3e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Z3e(t,e,n){return(e=J3e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function J3e(t){var e=Q3e(t,"string");return typeof e=="symbol"?e:e+""}function Q3e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nh(){return nh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nh.apply(null,arguments)}function e$e(t){var e=N.useMemo(()=>eO(t.children,Wv),[t.children]),n=gt(r=>f3e(r,t.id,e));return n==null?null:N.createElement(O3e,{legendPayload:n})}function t$e(t){var{dataKey:e,nameKey:n,sectors:r,stroke:i,strokeWidth:s,fill:o,name:a,hide:l,tooltipType:c}=t;return{dataDefinedOnItem:r.map(u=>u.tooltipPayload),positions:r.map(u=>u.tooltipPosition),settings:{stroke:i,strokeWidth:s,fill:o,dataKey:e,nameKey:n,name:Kg(a,e),hide:l,type:c,color:o,unit:""}}}var n$e=(t,e)=>t>e?"start":t<e?"end":"middle",r$e=(t,e,n)=>Es(typeof e=="function"?e(t):e,n,n*.8),i$e=(t,e,n)=>{var{top:r,left:i,width:s,height:o}=e,a=gY(s,o),l=i+Es(t.cx,s,s/2),c=r+Es(t.cy,o,o/2),u=Es(t.innerRadius,a,0),d=r$e(n,t.outerRadius,a),h=t.maxRadius||Math.sqrt(s*s+o*o)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:d,maxRadius:h}},s$e=(t,e)=>{var n=ji(e-t),r=Math.min(Math.abs(e-t),360);return n*r};function o$e(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var a$e=(t,e)=>{if(N.isValidElement(t))return N.cloneElement(t,e);if(typeof t=="function")return t(e);var n=yn("recharts-pie-label-line",typeof t!="boolean"?t.className:"");return N.createElement(F4,nh({},e,{type:"linear",className:n}))},l$e=(t,e,n)=>{if(N.isValidElement(t))return N.cloneElement(t,e);var r=n;if(typeof t=="function"&&(r=t(e),N.isValidElement(r)))return r;var i=yn("recharts-pie-label-text",o$e(t));return N.createElement(aN,nh({},e,{alignmentBaseline:"middle",className:i}),r)};function c$e(t){var{sectors:e,props:n,showLabels:r}=t,{label:i,labelLine:s,dataKey:o}=n;if(!r||!i||!e)return null;var a=Yo(n),l=Zf(i),c=Zf(s),u=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,d=e.map((h,f)=>{var p=(h.startAngle+h.endAngle)/2,m=oi(h.cx,h.cy,h.outerRadius+u,p),y=cr(cr(cr(cr({},a),h),{},{stroke:"none"},l),{},{index:f,textAnchor:n$e(m.x,h.cx)},m),g=cr(cr(cr(cr({},a),h),{},{fill:"none",stroke:h.fill},c),{},{index:f,points:[oi(h.cx,h.cy,h.outerRadius,p),m],key:"line"});return N.createElement(is,{key:"label-".concat(h.startAngle,"-").concat(h.endAngle,"-").concat(h.midAngle,"-").concat(f)},s&&a$e(s,g),l$e(i,y,Zn(h,o)))});return N.createElement(is,{className:"recharts-pie-labels"},d)}function u$e(t){var{sectors:e,props:n,showLabels:r}=t,{label:i}=n;return typeof i=="object"&&i!=null&&"position"in i?N.createElement(XR,{label:i}):N.createElement(c$e,{sectors:e,props:n,showLabels:r})}function d$e(t){var{sectors:e,activeShape:n,inactiveShape:r,allOtherPieProps:i}=t,s=gt(th),{onMouseEnter:o,onClick:a,onMouseLeave:l}=i,c=oO(i,H3e),u=tO(o,i.dataKey),d=nO(l),h=rO(a,i.dataKey);return e==null||e.length===0?null:N.createElement(N.Fragment,null,e.map((f,p)=>{if((f==null?void 0:f.startAngle)===0&&(f==null?void 0:f.endAngle)===0&&e.length!==1)return null;var m=n&&String(p)===s,y=s?r:null,g=m?n:y,v=cr(cr({},f),{},{stroke:f.stroke,tabIndex:-1,[wY]:p,[kY]:i.dataKey});return N.createElement(is,nh({key:"sector-".concat(f==null?void 0:f.startAngle,"-").concat(f==null?void 0:f.endAngle,"-").concat(f.midAngle,"-").concat(p),tabIndex:-1,className:"recharts-pie-sector"},AC(c,f,p),{onMouseEnter:u(f,p),onMouseLeave:d(f,p),onClick:h(f,p)}),N.createElement(SQ,nh({option:g,isActive:m,shapeType:"sector"},v)))}))}function h$e(t){var e,{pieSettings:n,displayedData:r,cells:i,offset:s}=t,{cornerRadius:o,startAngle:a,endAngle:l,dataKey:c,nameKey:u,tooltipType:d}=n,h=Math.abs(n.minAngle),f=s$e(a,l),p=Math.abs(f),m=r.length<=1?0:(e=n.paddingAngle)!==null&&e!==void 0?e:0,y=r.filter(A=>Zn(A,c,0)!==0).length,g=(p>=360?y:y-1)*m,v=p-y*h-g,x=r.reduce((A,E)=>{var I=Zn(E,c,0);return A+(St(I)?I:0)},0),b;if(x>0){var S;b=r.map((A,E)=>{var I=Zn(A,c,0),T=Zn(A,u,E),O=i$e(n,s,A),$=(St(I)?I:0)/x,R,F=cr(cr({},A),i&&i[E]&&i[E].props);E?R=S.endAngle+ji(f)*m*(I!==0?1:0):R=a;var L=R+ji(f)*((I!==0?h:0)+$*v),U=(R+L)/2,q=(O.innerRadius+O.outerRadius)/2,K=[{name:T,value:I,payload:F,dataKey:c,type:d}],j=oi(O.cx,O.cy,q,U);return S=cr(cr(cr(cr({},n.presentationProps),{},{percent:$,cornerRadius:o,name:T,tooltipPayload:K,midAngle:U,middleRadius:q,tooltipPosition:j},F),O),{},{value:I,startAngle:R,endAngle:L,payload:F,paddingAngle:ji(f)*m}),S})}return b}function f$e(t){var{showLabels:e,sectors:n,children:r}=t,i=N.useMemo(()=>!e||!n?[]:n.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[n,e]);return N.createElement(ZTe,{value:e?i:void 0},r)}function p$e(t){var{props:e,previousSectorsRef:n}=t,{sectors:r,isAnimationActive:i,animationBegin:s,animationDuration:o,animationEasing:a,activeShape:l,inactiveShape:c,onAnimationStart:u,onAnimationEnd:d}=e,h=Pv(e,"recharts-pie-"),f=n.current,[p,m]=N.useState(!1),y=N.useCallback(()=>{typeof d=="function"&&d(),m(!1)},[d]),g=N.useCallback(()=>{typeof u=="function"&&u(),m(!0)},[u]);return N.createElement(f$e,{showLabels:!p,sectors:r},N.createElement($v,{animationId:h,begin:s,duration:o,isActive:i,easing:a,onAnimationStart:g,onAnimationEnd:y,key:h},v=>{var x=[],b=r&&r[0],S=b==null?void 0:b.startAngle;return r==null||r.forEach((A,E)=>{var I=f&&f[E],T=E>0?Jf(A,"paddingAngle",0):0;if(I){var O=$r(I.endAngle-I.startAngle,A.endAngle-A.startAngle,v),$=cr(cr({},A),{},{startAngle:S+T,endAngle:S+O+T});x.push($),S=$.endAngle}else{var{endAngle:R,startAngle:F}=A,L=$r(0,R-F,v),U=cr(cr({},A),{},{startAngle:S+T,endAngle:S+L+T});x.push(U),S=U.endAngle}}),n.current=x,N.createElement(is,null,N.createElement(d$e,{sectors:x,activeShape:l,inactiveShape:c,allOtherPieProps:e}))}),N.createElement(u$e,{showLabels:!p,sectors:r,props:e}),e.children)}var m$e={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!gh.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function g$e(t){var{id:e}=t,n=oO(t,K3e),{hide:r,className:i,rootTabIndex:s}=t,o=N.useMemo(()=>eO(t.children,Wv),[t.children]),a=gt(u=>p3e(u,e,o)),l=N.useRef(null),c=yn("recharts-pie",i);return r||a==null?(l.current=null,N.createElement(is,{tabIndex:s,className:c})):N.createElement(N.Fragment,null,N.createElement(iO,{fn:t$e,args:cr(cr({},t),{},{sectors:a})}),N.createElement(is,{tabIndex:s,className:c},N.createElement(p$e,{props:cr(cr({},n),{},{sectors:a}),previousSectorsRef:l})))}function _Q(t){var e=ls(t,m$e),{id:n}=e,r=oO(e,X3e),i=Yo(r);return N.createElement(sO,{id:n,type:"pie"},s=>N.createElement(N.Fragment,null,N.createElement(q3e,{type:"pie",id:s,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:i,maxRadius:e.maxRadius}),N.createElement(e$e,nh({},r,{id:s})),N.createElement(g$e,nh({},r,{id:s}))))}_Q.displayName="Pie";function O7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function D7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?O7(Object(n),!0).forEach(function(r){y$e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function y$e(t,e,n){return(e=v$e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v$e(t){var e=x$e(t,"string");return typeof e=="symbol"?e:e+""}function x$e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var b$e={xAxis:{},yAxis:{},zAxis:{}},EQ=na({name:"cartesianAxis",initialState:b$e,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:Bs()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:Bs()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:Bs()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:Bs()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:Bs()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:Bs()},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload,i=t.yAxis[n];if(i){var s=i.widthHistory||[];if(s.length===3&&s[0]===s[2]&&r===s[1]&&r!==i.width&&Math.abs(r-s[0])<=1)return;var o=[...s,r].slice(-3);t.yAxis[n]=D7(D7({},t.yAxis[n]),{},{width:r,widthHistory:o})}}}}),{addXAxis:w$e,removeXAxis:k$e,addYAxis:S$e,removeYAxis:C$e,addZAxis:gat,removeZAxis:yat,updateYAxisWidth:N$e}=EQ.actions,A$e=EQ.reducer,I$e=_e([_i],t=>{if(t)return{top:t.top,bottom:t.bottom,left:t.left,right:t.right}}),_$e=_e([I$e,Ru,Ou],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),aO=()=>gt(_$e),E$e=()=>gt(mEe);function L7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function M7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?L7(Object(n),!0).forEach(function(r){T$e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function T$e(t,e,n){return(e=$$e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $$e(t){var e=P$e(t,"string");return typeof e=="symbol"?e:e+""}function P$e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var R$e=t=>{var{point:e,childIndex:n,mainColor:r,activeDot:i,dataKey:s}=t;if(i===!1||e.x==null||e.y==null)return null;var o=M7(M7({index:n,dataKey:s,cx:e.x,cy:e.y,r:4,fill:r??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},Zf(i)),v4(i)),a;return N.isValidElement(i)?a=N.cloneElement(i,o):typeof i=="function"?a=i(o):a=N.createElement(pQ,o),N.createElement(is,{className:"recharts-active-dot"},a)};function O$e(t){var{points:e,mainColor:n,activeDot:r,itemDataKey:i}=t,s=gt(th),o=E$e();if(e==null||o==null)return null;var a=e.find(l=>o.includes(l.payload));return mr(a)?null:R$e({point:a,childIndex:Number(s),mainColor:n,dataKey:i,activeDot:r})}var D$e=!0,g_="Invariant failed";function L$e(t,e){if(!t){if(D$e)throw new Error(g_);var n=typeof e=="function"?e():e,r=n?"".concat(g_,": ").concat(n):g_;throw new Error(r)}}var M$e=["x","y"];function p3(){return p3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},p3.apply(null,arguments)}function F7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?F7(Object(n),!0).forEach(function(r){F$e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function F$e(t,e,n){return(e=j$e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function j$e(t){var e=B$e(t,"string");return typeof e=="symbol"?e:e+""}function B$e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function z$e(t,e){if(t==null)return{};var n,r,i=U$e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function U$e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function V$e(t,e){var{x:n,y:r}=t,i=z$e(t,M$e),s="".concat(n),o=parseInt(s,10),a="".concat(r),l=parseInt(a,10),c="".concat(e.height||i.height),u=parseInt(c,10),d="".concat(e.width||i.width),h=parseInt(d,10);return vy(vy(vy(vy(vy({},e),i),o?{x:o}:{}),l?{y:l}:{}),{},{height:u,width:h,name:e.name,radius:e.radius})}function lO(t){return N.createElement(SQ,p3({shapeType:"rectangle",propTransformer:V$e,activeClassName:"recharts-active-bar"},t))}var W$e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(St(e))return e;var s=St(r)||mr(r);return s?e(r,i):(s||L$e(!1),n)}},G$e={},TQ=na({name:"errorBars",initialState:G$e,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]||(t[n]=[]),t[n].push(r)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:r,next:i}=e.payload;t[n]&&(t[n]=t[n].map(s=>s.dataKey===r.dataKey&&s.direction===r.direction?i:s))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]&&(t[n]=t[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}});TQ.actions;var q$e=TQ.reducer,H$e=["children"];function K$e(t,e){if(t==null)return{};var n,r,i=X$e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function X$e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Y$e={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},Z$e=N.createContext(Y$e);function $Q(t){var{children:e}=t,n=K$e(t,H$e);return N.createElement(Z$e.Provider,{value:n},e)}function cO(t,e){var n,r,i=gt(c=>Lu(c,t)),s=gt(c=>Mu(c,e)),o=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:Oo.allowDataOverflow,a=(r=s==null?void 0:s.allowDataOverflow)!==null&&r!==void 0?r:Do.allowDataOverflow,l=o||a;return{needClip:l,needClipX:o,needClipY:a}}function PQ(t){var{xAxisId:e,yAxisId:n,clipPathId:r}=t,i=aO(),{needClipX:s,needClipY:o,needClip:a}=cO(e,n);if(!a)return null;var{x:l,y:c,width:u,height:d}=i;return N.createElement("clipPath",{id:"clipPath-".concat(r)},N.createElement("rect",{x:s?l:l-u/2,y:o?c:c-d/2,width:s?u:u*2,height:o?d:d*2}))}var J$e=["onMouseEnter","onMouseLeave","onClick"],Q$e=["value","background","tooltipPosition"],ePe=["id"],tPe=["onMouseEnter","onClick","onMouseLeave"];function rh(){return rh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rh.apply(null,arguments)}function j7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?j7(Object(n),!0).forEach(function(r){nPe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nPe(t,e,n){return(e=rPe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rPe(t){var e=iPe(t,"string");return typeof e=="symbol"?e:e+""}function iPe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function oS(t,e){if(t==null)return{};var n,r,i=sPe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function sPe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var oPe=t=>{var{dataKey:e,name:n,fill:r,legendType:i,hide:s}=t;return[{inactive:s,dataKey:e,type:i,color:r,value:Kg(n,e),payload:t}]};function aPe(t){var{dataKey:e,stroke:n,strokeWidth:r,fill:i,name:s,hide:o,unit:a}=t;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:e,nameKey:void 0,name:Kg(s,e),hide:o,type:t.tooltipType,color:t.fill,unit:a}}}function lPe(t){var e=gt(th),{data:n,dataKey:r,background:i,allOtherBarProps:s}=t,{onMouseEnter:o,onMouseLeave:a,onClick:l}=s,c=oS(s,J$e),u=tO(o,r),d=nO(a),h=rO(l,r);if(!i||n==null)return null;var f=Zf(i);return N.createElement(N.Fragment,null,n.map((p,m)=>{var{value:y,background:g,tooltipPosition:v}=p,x=oS(p,Q$e);if(!g)return null;var b=u(p,m),S=d(p,m),A=h(p,m),E=zs(zs(zs(zs(zs({option:i,isActive:String(m)===e},x),{},{fill:"#eee"},g),f),AC(c,p,m)),{},{onMouseEnter:b,onMouseLeave:S,onClick:A,dataKey:r,index:m,className:"recharts-bar-background-rectangle"});return N.createElement(lO,rh({key:"background-bar-".concat(m)},E))}))}function cPe(t){var{showLabels:e,children:n,rects:r}=t,i=r==null?void 0:r.map(s=>{var o={x:s.x,y:s.y,width:s.width,height:s.height};return zs(zs({},o),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:o,fill:s.fill})});return N.createElement(hQ,{value:e?i:void 0},n)}function uPe(t){var{shape:e,activeBar:n,baseProps:r,entry:i,index:s,dataKey:o}=t,a=gt(th),l=gt(VJ),c=n&&String(s)===a&&(l==null||o===l),u=c?n:e;return N.createElement(lO,rh({},r,{name:String(r.name)},i,{isActive:c,option:u,index:s,dataKey:o}))}function dPe(t){var{shape:e,baseProps:n,entry:r,index:i,dataKey:s}=t;return N.createElement(lO,rh({},n,{name:String(n.name)},r,{isActive:!1,option:e,index:i,dataKey:s}))}function hPe(t){var{data:e,props:n}=t,r=Yo(n),i=oS(r,ePe),{shape:s,dataKey:o,activeBar:a}=n,{onMouseEnter:l,onClick:c,onMouseLeave:u}=n,d=oS(n,tPe),h=tO(l,o),f=nO(u),p=rO(c,o);return e?N.createElement(N.Fragment,null,e.map((m,y)=>N.createElement(is,rh({key:"rectangle-".concat(m==null?void 0:m.x,"-").concat(m==null?void 0:m.y,"-").concat(m==null?void 0:m.value,"-").concat(y),className:"recharts-bar-rectangle"},AC(d,m,y),{onMouseEnter:h(m,y),onMouseLeave:f(m,y),onClick:p(m,y)}),a?N.createElement(uPe,{shape:s,activeBar:a,baseProps:i,entry:m,index:y,dataKey:o}):N.createElement(dPe,{shape:s,baseProps:i,entry:m,index:y,dataKey:o})))):null}function fPe(t){var{props:e,previousRectanglesRef:n}=t,{data:r,layout:i,isAnimationActive:s,animationBegin:o,animationDuration:a,animationEasing:l,onAnimationEnd:c,onAnimationStart:u}=e,d=n.current,h=Pv(e,"recharts-bar-"),[f,p]=N.useState(!1),m=!f,y=N.useCallback(()=>{typeof c=="function"&&c(),p(!1)},[c]),g=N.useCallback(()=>{typeof u=="function"&&u(),p(!0)},[u]);return N.createElement(cPe,{showLabels:m,rects:r},N.createElement($v,{animationId:h,begin:o,duration:a,isActive:s,easing:l,onAnimationEnd:y,onAnimationStart:g,key:h},v=>{var x=v===1?r:r==null?void 0:r.map((b,S)=>{var A=d&&d[S];if(A)return zs(zs({},b),{},{x:$r(A.x,b.x,v),y:$r(A.y,b.y,v),width:$r(A.width,b.width,v),height:$r(A.height,b.height,v)});if(i==="horizontal"){var E=$r(0,b.height,v);return zs(zs({},b),{},{y:b.y+b.height-E,height:E})}var I=$r(0,b.width,v);return zs(zs({},b),{},{width:I})});return v>0&&(n.current=x??null),x==null?null:N.createElement(is,null,N.createElement(hPe,{props:e,data:x}))}),N.createElement(XR,{label:e.label}),e.children)}function pPe(t){var e=N.useRef(null);return N.createElement(fPe,{previousRectanglesRef:e,props:t})}var RQ=0,mPe=(t,e)=>{var n=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:n,errorVal:Zn(t,e)}};class gPe extends N.PureComponent{render(){var{hide:e,data:n,dataKey:r,className:i,xAxisId:s,yAxisId:o,needClip:a,background:l,id:c}=this.props;if(e||n==null)return null;var u=yn("recharts-bar",i),d=c;return N.createElement(is,{className:u,id:c},a&&N.createElement("defs",null,N.createElement(PQ,{clipPathId:d,xAxisId:s,yAxisId:o})),N.createElement(is,{className:"recharts-bar-rectangles",clipPath:a?"url(#clipPath-".concat(d,")"):void 0},N.createElement(lPe,{data:n,dataKey:r,background:l,allOtherBarProps:this.props}),N.createElement(pPe,this.props)))}}var yPe={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!gh.isSsr,legendType:"rect",minPointSize:RQ,xAxisId:0,yAxisId:0};function vPe(t){var{xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:s,activeBar:o,animationBegin:a,animationDuration:l,animationEasing:c,isAnimationActive:u}=t,{needClip:d}=cO(e,n),h=BC(),f=no(),p=eO(t.children,Wv),m=gt(v=>qPe(v,e,n,f,t.id,p));if(h!=="vertical"&&h!=="horizontal")return null;var y,g=m==null?void 0:m[0];return g==null||g.height==null||g.width==null?y=0:y=h==="vertical"?g.height/2:g.width/2,N.createElement($Q,{xAxisId:e,yAxisId:n,data:m,dataPointFormatter:mPe,errorBarOffset:y},N.createElement(gPe,rh({},t,{layout:h,needClip:d,data:m,xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:s,activeBar:o,animationBegin:a,animationDuration:l,animationEasing:c,isAnimationActive:u})))}function xPe(t){var{layout:e,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:s,xAxis:o,yAxis:a,xAxisTicks:l,yAxisTicks:c,stackedData:u,displayedData:d,offset:h,cells:f,parentViewBox:p}=t,m=e==="horizontal"?a:o,y=u?m.scale.domain():null,g=USe({numericAxis:m});return d.map((v,x)=>{var b,S,A,E,I,T;u?b=LSe(u[x],y):(b=Zn(v,n),Array.isArray(b)||(b=[g,b]));var O=W$e(r,RQ)(b[1],x);if(e==="horizontal"){var $,[R,F]=[a.scale(b[0]),a.scale(b[1])];S=MB({axis:o,ticks:l,bandSize:s,offset:i.offset,entry:v,index:x}),A=($=F??R)!==null&&$!==void 0?$:void 0,E=i.size;var L=R-F;if(I=za(L)?0:L,T={x:S,y:h.top,width:E,height:h.height},Math.abs(O)>0&&Math.abs(I)<Math.abs(O)){var U=ji(I||O)*(Math.abs(O)-Math.abs(I));A-=U,I+=U}}else{var[q,K]=[o.scale(b[0]),o.scale(b[1])];if(S=q,A=MB({axis:a,ticks:c,bandSize:s,offset:i.offset,entry:v,index:x}),E=K-q,I=i.size,T={x:h.left,y:A,width:h.width,height:I},Math.abs(O)>0&&Math.abs(E)<Math.abs(O)){var j=ji(E||O)*(Math.abs(O)-Math.abs(E));E+=j}}if(S==null||A==null||E==null||I==null)return null;var Y=zs(zs({},v),{},{x:S,y:A,width:E,height:I,value:u?b:b[1],payload:v,background:T,tooltipPosition:{x:S+E/2,y:A+I/2},parentViewBox:p},f&&f[x]&&f[x].props);return Y}).filter(Boolean)}function bPe(t){var e=ls(t,yPe),n=no();return N.createElement(sO,{id:e.id,type:"bar"},r=>N.createElement(N.Fragment,null,N.createElement(NQ,{legendPayload:oPe(e)}),N.createElement(iO,{fn:aPe,args:e}),N.createElement(IQ,{type:"bar",id:r,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:zSe(e.stackId),hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:n}),N.createElement(vPe,rh({},e,{id:r}))))}var OQ=N.memo(bPe);OQ.displayName="Bar";function B7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Gw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?B7(Object(n),!0).forEach(function(r){wPe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wPe(t,e,n){return(e=kPe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kPe(t){var e=SPe(t,"string");return typeof e=="symbol"?e:e+""}function SPe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var CPe=(t,e)=>e,NPe=(t,e,n)=>n,APe=(t,e,n,r)=>r,IPe=(t,e,n,r,i)=>i,Gv=_e([tN,IPe],(t,e)=>t.filter(n=>n.type==="bar").find(n=>n.id===e)),_Pe=_e([Gv],t=>t==null?void 0:t.maxBarSize),EPe=(t,e,n,r,i,s)=>s,z7=(t,e,n)=>{var r=n??t;if(!mr(r))return Es(r,e,0)},TPe=_e([fn,tN,CPe,NPe,APe],(t,e,n,r,i)=>e.filter(s=>t==="horizontal"?s.xAxisId===n:s.yAxisId===r).filter(s=>s.isPanorama===i).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),$Pe=(t,e,n,r)=>{var i=fn(t);return i==="horizontal"?a3(t,"yAxis",n,r):a3(t,"xAxis",e,r)},PPe=(t,e,n)=>{var r=fn(t);return r==="horizontal"?Zz(t,"xAxis",e):Zz(t,"yAxis",n)},RPe=(t,e,n)=>{var r={},i=t.filter(JC),s=t.filter(c=>c.stackId==null),o=i.reduce((c,u)=>(c[u.stackId]||(c[u.stackId]=[]),c[u.stackId].push(u),c),r),a=Object.entries(o).map(c=>{var[u,d]=c,h=d.map(p=>p.dataKey),f=z7(e,n,d[0].barSize);return{stackId:u,dataKeys:h,barSize:f}}),l=s.map(c=>{var u=[c.dataKey].filter(h=>h!=null),d=z7(e,n,c.barSize);return{stackId:void 0,dataKeys:u,barSize:d}});return[...a,...l]},OPe=_e([TPe,wIe,PPe],RPe),DPe=(t,e,n,r,i)=>{var s,o,a=Gv(t,e,n,r,i);if(a!=null){var l=fn(t),c=VZ(t),{maxBarSize:u}=a,d=mr(u)?c:u,h,f;return l==="horizontal"?(h=eh(t,"xAxis",e,r),f=Qd(t,"xAxis",e,r)):(h=eh(t,"yAxis",n,r),f=Qd(t,"yAxis",n,r)),(s=(o=G1(h,f,!0))!==null&&o!==void 0?o:d)!==null&&s!==void 0?s:0}},DQ=(t,e,n,r)=>{var i=fn(t),s,o;return i==="horizontal"?(s=eh(t,"xAxis",e,r),o=Qd(t,"xAxis",e,r)):(s=eh(t,"yAxis",n,r),o=Qd(t,"yAxis",n,r)),G1(s,o)};function LPe(t,e,n,r,i){var s=r.length;if(!(s<1)){var o=Es(t,n,0,!0),a,l=[];if(Ps(r[0].barSize)){var c=!1,u=n/s,d=r.reduce((g,v)=>g+(v.barSize||0),0);d+=(s-1)*o,d>=n&&(d-=(s-1)*o,o=0),d>=n&&u>0&&(c=!0,u*=.9,d=s*u);var h=(n-d)/2>>0,f={offset:h-o,size:0};a=r.reduce((g,v)=>{var x,b={stackId:v.stackId,dataKeys:v.dataKeys,position:{offset:f.offset+f.size+o,size:c?u:(x=v.barSize)!==null&&x!==void 0?x:0}},S=[...g,b];return f=S[S.length-1].position,S},l)}else{var p=Es(e,n,0,!0);n-2*p-(s-1)*o<=0&&(o=0);var m=(n-2*p-(s-1)*o)/s;m>1&&(m>>=0);var y=Ps(i)?Math.min(m,i):m;a=r.reduce((g,v,x)=>[...g,{stackId:v.stackId,dataKeys:v.dataKeys,position:{offset:p+(m+o)*x+(m-y)/2,size:y}}],l)}return a}}var MPe=(t,e,n,r,i,s,o)=>{var a=mr(o)?e:o,l=LPe(n,r,i!==s?i:s,t,a);return i!==s&&l!=null&&(l=l.map(c=>Gw(Gw({},c),{},{position:Gw(Gw({},c.position),{},{offset:c.position.offset-i/2})}))),l},FPe=_e([OPe,VZ,bIe,WZ,DPe,DQ,_Pe],MPe),jPe=(t,e,n,r)=>eh(t,"xAxis",e,r),BPe=(t,e,n,r)=>eh(t,"yAxis",n,r),zPe=(t,e,n,r)=>Qd(t,"xAxis",e,r),UPe=(t,e,n,r)=>Qd(t,"yAxis",n,r),VPe=_e([FPe,Gv],(t,e)=>{if(!(t==null||e==null)){var n=t.find(r=>r.stackId===e.stackId&&e.dataKey!=null&&r.dataKeys.includes(e.dataKey));if(n!=null)return n.position}}),WPe=(t,e)=>{var n=yR(e);if(!(!t||n==null||e==null)){var{stackId:r}=e;if(r!=null){var i=t[r];if(i){var{stackedData:s}=i;if(s)return s.find(o=>o.key===n)}}}},GPe=_e([$Pe,Gv],WPe),qPe=_e([_i,L4,jPe,BPe,zPe,UPe,VPe,fn,KC,DQ,GPe,Gv,EPe],(t,e,n,r,i,s,o,a,l,c,u,d,h)=>{var{chartData:f,dataStartIndex:p,dataEndIndex:m}=l;if(!(d==null||o==null||e==null||a!=="horizontal"&&a!=="vertical"||n==null||r==null||i==null||s==null||c==null)){var{data:y}=d,g;if(y!=null&&y.length>0?g=y:g=f==null?void 0:f.slice(p,m+1),g!=null)return xPe({layout:a,barSettings:d,pos:o,parentViewBox:e,bandSize:c,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:s,stackedData:u,displayedData:g,offset:t,cells:h})}}),LQ=t=>{var{chartData:e}=t,n=Lr(),r=no();return N.useEffect(()=>r?()=>{}:(n(o7(e)),()=>{n(o7(void 0))}),[e,n,r]),null},U7={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},MQ=na({name:"brush",initialState:U7,reducers:{setBrushSettings(t,e){return e.payload==null?U7:e.payload}}});MQ.actions;var HPe=MQ.reducer;function KPe(t,e,n){return(e=XPe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function XPe(t){var e=YPe(t,"string");return typeof e=="symbol"?e:e+""}function YPe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class uO{static create(e){return new uO(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(r)switch(r){case"start":return this.scale(e);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(e)+s}default:return this.scale(e)}if(n){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+o}return this.scale(e)}}isInRange(e){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?e>=r&&e<=i:e>=i&&e<=r}}KPe(uO,"EPS",1e-4);function ZPe(t){return(t%180+180)%180}var JPe=function(e){var{width:n,height:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=ZPe(i),o=s*Math.PI/180,a=Math.atan(r/n),l=o>a&&o<Math.PI-a?r/Math.sin(o):n/Math.cos(o);return Math.abs(l)},QPe={dots:[],areas:[],lines:[]},FQ=na({name:"referenceElements",initialState:QPe,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=uu(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=uu(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=uu(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}});FQ.actions;var e4e=FQ.reducer,t4e=N.createContext(void 0),n4e=t=>{var{children:e}=t,[n]=N.useState("".concat(U1("recharts"),"-clip")),r=aO();if(r==null)return null;var{x:i,y:s,width:o,height:a}=r;return N.createElement(t4e.Provider,{value:n},N.createElement("defs",null,N.createElement("clipPath",{id:n},N.createElement("rect",{x:i,y:s,height:a,width:o}))),e)};function yg(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function jQ(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)if(n===void 0||n(t[i])===!0)r.push(t[i]);else return;return r}function r4e(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return JPe(r,n)}function i4e(t,e,n){var r=n==="width",{x:i,y:s,width:o,height:a}=t;return e===1?{start:r?i:s,end:r?i+o:s+a}:{start:r?i+o:s+a,end:r?i:s}}function aS(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var s=n();return t*(e-t*s/2-r)>=0&&t*(e+t*s/2-i)<=0}function s4e(t,e){return jQ(t,e+1)}function o4e(t,e,n,r,i){for(var s=(r||[]).slice(),{start:o,end:a}=e,l=0,c=1,u=o,d=function(){var p=r==null?void 0:r[l];if(p===void 0)return{v:jQ(r,c)};var m=l,y,g=()=>(y===void 0&&(y=n(p,m)),y),v=p.coordinate,x=l===0||aS(t,v,g,u,a);x||(l=0,u=o,c+=1),x&&(u=v+t*(g()/2+i),l+=c)},h;c<=s.length;)if(h=d(),h)return h.v;return[]}function V7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ks(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?V7(Object(n),!0).forEach(function(r){a4e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function a4e(t,e,n){return(e=l4e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l4e(t){var e=c4e(t,"string");return typeof e=="symbol"?e:e+""}function c4e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function u4e(t,e,n,r,i){for(var s=(r||[]).slice(),o=s.length,{start:a}=e,{end:l}=e,c=function(h){var f=s[h],p,m=()=>(p===void 0&&(p=n(f,h)),p);if(h===o-1){var y=t*(f.coordinate+t*m()/2-l);s[h]=f=ks(ks({},f),{},{tickCoord:y>0?f.coordinate-y*t:f.coordinate})}else s[h]=f=ks(ks({},f),{},{tickCoord:f.coordinate});var g=aS(t,f.tickCoord,m,a,l);g&&(l=f.tickCoord-t*(m()/2+i),s[h]=ks(ks({},f),{},{isShow:!0}))},u=o-1;u>=0;u--)c(u);return s}function d4e(t,e,n,r,i,s){var o=(r||[]).slice(),a=o.length,{start:l,end:c}=e;if(s){var u=r[a-1],d=n(u,a-1),h=t*(u.coordinate+t*d/2-c);o[a-1]=u=ks(ks({},u),{},{tickCoord:h>0?u.coordinate-h*t:u.coordinate});var f=aS(t,u.tickCoord,()=>d,l,c);f&&(c=u.tickCoord-t*(d/2+i),o[a-1]=ks(ks({},u),{},{isShow:!0}))}for(var p=s?a-1:a,m=function(v){var x=o[v],b,S=()=>(b===void 0&&(b=n(x,v)),b);if(v===0){var A=t*(x.coordinate-t*S()/2-l);o[v]=x=ks(ks({},x),{},{tickCoord:A<0?x.coordinate-A*t:x.coordinate})}else o[v]=x=ks(ks({},x),{},{tickCoord:x.coordinate});var E=aS(t,x.tickCoord,S,l,c);E&&(l=x.tickCoord+t*(S()/2+i),o[v]=ks(ks({},x),{},{isShow:!0}))},y=0;y<p;y++)m(y);return o}function dO(t,e,n){var{tick:r,ticks:i,viewBox:s,minTickGap:o,orientation:a,interval:l,tickFormatter:c,unit:u,angle:d}=t;if(!i||!i.length||!r)return[];if(St(l)||gh.isSsr){var h;return(h=s4e(i,St(l)?l:0))!==null&&h!==void 0?h:[]}var f=[],p=a==="top"||a==="bottom"?"width":"height",m=u&&p==="width"?o1(u,{fontSize:e,letterSpacing:n}):{width:0,height:0},y=(x,b)=>{var S=typeof c=="function"?c(x.value,b):x.value;return p==="width"?r4e(o1(S,{fontSize:e,letterSpacing:n}),m,d):o1(S,{fontSize:e,letterSpacing:n})[p]},g=i.length>=2?ji(i[1].coordinate-i[0].coordinate):1,v=i4e(s,g,p);return l==="equidistantPreserveStart"?o4e(g,v,y,i,o):(l==="preserveStart"||l==="preserveStartEnd"?f=d4e(g,v,y,i,o,l==="preserveStartEnd"):f=u4e(g,v,y,i,o),f.filter(x=>x.isShow))}var h4e=t=>{var{ticks:e,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:s=0}=t,o=0;if(e){Array.from(e).forEach(u=>{if(u){var d=u.getBoundingClientRect();d.width>o&&(o=d.width)}});var a=n?n.getBoundingClientRect().width:0,l=i+s,c=o+l+a+(n?r:0);return Math.round(c)}return 0},f4e=["axisLine","width","height","className","hide","ticks"],p4e=["viewBox"],m4e=["viewBox"];function m3(t,e){if(t==null)return{};var n,r,i=g4e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function g4e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function rp(){return rp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rp.apply(null,arguments)}function W7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ki(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?W7(Object(n),!0).forEach(function(r){y4e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function y4e(t,e,n){return(e=v4e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v4e(t){var e=x4e(t,"string");return typeof e=="symbol"?e:e+""}function x4e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hO={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"};function b4e(t){var{x:e,y:n,width:r,height:i,orientation:s,mirror:o,axisLine:a,otherSvgProps:l}=t;if(!a)return null;var c=ki(ki(ki({},l),Yo(a)),{},{fill:"none"});if(s==="top"||s==="bottom"){var u=+(s==="top"&&!o||s==="bottom"&&o);c=ki(ki({},c),{},{x1:e,y1:n+u*i,x2:e+r,y2:n+u*i})}else{var d=+(s==="left"&&!o||s==="right"&&o);c=ki(ki({},c),{},{x1:e+d*r,y1:n,x2:e+d*r,y2:n+i})}return N.createElement("line",rp({},c,{className:yn("recharts-cartesian-axis-line",Jf(a,"className"))}))}function w4e(t,e,n,r,i,s,o,a,l){var c,u,d,h,f,p,m=a?-1:1,y=t.tickSize||o,g=St(t.tickCoord)?t.tickCoord:t.coordinate;switch(s){case"top":c=u=t.coordinate,h=n+ +!a*i,d=h-m*y,p=d-m*l,f=g;break;case"left":d=h=t.coordinate,u=e+ +!a*r,c=u-m*y,f=c-m*l,p=g;break;case"right":d=h=t.coordinate,u=e+ +a*r,c=u+m*y,f=c+m*l,p=g;break;default:c=u=t.coordinate,h=n+ +a*i,d=h+m*y,p=d+m*l,f=g;break}return{line:{x1:c,y1:d,x2:u,y2:h},tick:{x:f,y:p}}}function k4e(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function S4e(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function C4e(t){var{option:e,tickProps:n,value:r}=t,i,s=yn(n.className,"recharts-cartesian-axis-tick-value");if(N.isValidElement(e))i=N.cloneElement(e,ki(ki({},n),{},{className:s}));else if(typeof e=="function")i=e(ki(ki({},n),{},{className:s}));else{var o="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(o=yn(o,e==null?void 0:e.className)),i=N.createElement(aN,rp({},n,{className:o}),r)}return i}function N4e(t){var{ticks:e=[],tick:n,tickLine:r,stroke:i,tickFormatter:s,unit:o,padding:a,tickTextProps:l,orientation:c,mirror:u,x:d,y:h,width:f,height:p,tickSize:m,tickMargin:y,fontSize:g,letterSpacing:v,getTicksConfig:x,events:b}=t,S=dO(ki(ki({},x),{},{ticks:e}),g,v),A=k4e(c,u),E=S4e(c,u),I=Yo(x),T=Zf(n),O={};typeof r=="object"&&(O=r);var $=ki(ki({},I),{},{fill:"none"},O),R=S.map((F,L)=>{var{line:U,tick:q}=w4e(F,d,h,f,p,c,m,u,y),K=ki(ki(ki(ki({textAnchor:A,verticalAnchor:E},I),{},{stroke:"none",fill:i},T),q),{},{index:L,payload:F,visibleTicksCount:S.length,tickFormatter:s,padding:a},l);return N.createElement(is,rp({className:"recharts-cartesian-axis-tick",key:"tick-".concat(F.value,"-").concat(F.coordinate,"-").concat(F.tickCoord)},AC(b,F,L)),r&&N.createElement("line",rp({},$,U,{className:yn("recharts-cartesian-axis-tick-line",Jf(r,"className"))})),n&&N.createElement(C4e,{option:n,tickProps:K,value:"".concat(typeof s=="function"?s(F.value,L):F.value).concat(o||"")}))});return R.length>0?N.createElement("g",{className:"recharts-cartesian-axis-ticks"},R):null}var A4e=N.forwardRef((t,e)=>{var{axisLine:n,width:r,height:i,className:s,hide:o,ticks:a}=t,l=m3(t,f4e),[c,u]=N.useState(""),[d,h]=N.useState(""),f=N.useRef(null);N.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var m;return h4e({ticks:f.current,label:(m=t.labelRef)===null||m===void 0?void 0:m.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var p=N.useCallback(m=>{if(m){var y=m.getElementsByClassName("recharts-cartesian-axis-tick-value");f.current=y;var g=y[0];if(g){var v=window.getComputedStyle(g),x=v.fontSize,b=v.letterSpacing;(x!==c||b!==d)&&(u(x),h(b))}}},[c,d]);return o||r!=null&&r<=0||i!=null&&i<=0?null:N.createElement(is,{className:yn("recharts-cartesian-axis",s),ref:p},N.createElement(b4e,{x:t.x,y:t.y,width:r,height:i,orientation:t.orientation,mirror:t.mirror,axisLine:n,otherSvgProps:Yo(t)}),N.createElement(N4e,{ticks:a,tick:t.tick,tickLine:t.tickLine,stroke:t.stroke,tickFormatter:t.tickFormatter,unit:t.unit,padding:t.padding,tickTextProps:t.tickTextProps,orientation:t.orientation,mirror:t.mirror,x:t.x,y:t.y,width:t.width,height:t.height,tickSize:t.tickSize,tickMargin:t.tickMargin,fontSize:c,letterSpacing:d,getTicksConfig:t,events:l}),N.createElement(OTe,{x:t.x,y:t.y,width:t.width,height:t.height},N.createElement(WTe,{label:t.label,labelRef:t.labelRef}),t.children))}),I4e=N.memo(A4e,(t,e)=>{var{viewBox:n}=t,r=m3(t,p4e),{viewBox:i}=e,s=m3(e,m4e);return yg(n,i)&&yg(r,s)}),fO=N.forwardRef((t,e)=>{var n=ls(t,hO);return N.createElement(I4e,rp({},n,{ref:e}))});fO.displayName="CartesianAxis";var _4e=["x1","y1","x2","y2","key"],E4e=["offset"],T4e=["xAxisId","yAxisId"],$4e=["xAxisId","yAxisId"];function G7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ns(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?G7(Object(n),!0).forEach(function(r){P4e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):G7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function P4e(t,e,n){return(e=R4e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function R4e(t){var e=O4e(t,"string");return typeof e=="symbol"?e:e+""}function O4e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function If(){return If=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},If.apply(null,arguments)}function lS(t,e){if(t==null)return{};var n,r,i=D4e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function D4e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var L4e=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:n,x:r,y:i,width:s,height:o,ry:a}=t;return N.createElement("rect",{x:r,y:i,ry:a,width:s,height:o,stroke:"none",fill:e,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function BQ(t,e){var n;if(N.isValidElement(t))n=N.cloneElement(t,e);else if(typeof t=="function")n=t(e);else{var{x1:r,y1:i,x2:s,y2:o,key:a}=e,l=lS(e,_4e),c=Yo(l),u=lS(c,E4e);n=N.createElement("line",If({},u,{x1:r,y1:i,x2:s,y2:o,fill:"none",key:a}))}return n}function M4e(t){var{x:e,width:n,horizontal:r=!0,horizontalPoints:i}=t;if(!r||!i||!i.length)return null;var s=lS(t,T4e),o=i.map((a,l)=>{var c=Ns(Ns({},s),{},{x1:e,y1:a,x2:e+n,y2:a,key:"line-".concat(l),index:l});return BQ(r,c)});return N.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function F4e(t){var{y:e,height:n,vertical:r=!0,verticalPoints:i}=t;if(!r||!i||!i.length)return null;var s=lS(t,$4e),o=i.map((a,l)=>{var c=Ns(Ns({},s),{},{x1:a,y1:e,x2:a,y2:e+n,key:"line-".concat(l),index:l});return BQ(r,c)});return N.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function j4e(t){var{horizontalFill:e,fillOpacity:n,x:r,y:i,width:s,height:o,horizontalPoints:a,horizontal:l=!0}=t;if(!l||!e||!e.length)return null;var c=a.map(d=>Math.round(d+i-i)).sort((d,h)=>d-h);i!==c[0]&&c.unshift(0);var u=c.map((d,h)=>{var f=!c[h+1],p=f?i+o-d:c[h+1]-d;if(p<=0)return null;var m=h%e.length;return N.createElement("rect",{key:"react-".concat(h),y:d,x:r,height:p,width:s,stroke:"none",fill:e[m],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return N.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function B4e(t){var{vertical:e=!0,verticalFill:n,fillOpacity:r,x:i,y:s,width:o,height:a,verticalPoints:l}=t;if(!e||!n||!n.length)return null;var c=l.map(d=>Math.round(d+i-i)).sort((d,h)=>d-h);i!==c[0]&&c.unshift(0);var u=c.map((d,h)=>{var f=!c[h+1],p=f?i+o-d:c[h+1]-d;if(p<=0)return null;var m=h%n.length;return N.createElement("rect",{key:"react-".concat(h),x:d,y:s,width:p,height:a,stroke:"none",fill:n[m],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return N.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var z4e=(t,e)=>{var{xAxis:n,width:r,height:i,offset:s}=t;return vY(dO(Ns(Ns(Ns({},hO),n),{},{ticks:xY(n,!0),viewBox:{x:0,y:0,width:r,height:i}})),s.left,s.left+s.width,e)},U4e=(t,e)=>{var{yAxis:n,width:r,height:i,offset:s}=t;return vY(dO(Ns(Ns(Ns({},hO),n),{},{ticks:xY(n,!0),viewBox:{x:0,y:0,width:r,height:i}})),s.top,s.top+s.height,e)},V4e={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function g3(t){var e=TY(),n=$Y(),r=EY(),i=Ns(Ns({},ls(t,V4e)),{},{x:St(t.x)?t.x:r.left,y:St(t.y)?t.y:r.top,width:St(t.width)?t.width:r.width,height:St(t.height)?t.height:r.height}),{xAxisId:s,yAxisId:o,x:a,y:l,width:c,height:u,syncWithTicks:d,horizontalValues:h,verticalValues:f}=i,p=no(),m=gt(T=>Jz(T,"xAxis",s,p)),y=gt(T=>Jz(T,"yAxis",o,p));if(!St(c)||c<=0||!St(u)||u<=0||!St(a)||a!==+a||!St(l)||l!==+l)return null;var g=i.verticalCoordinatesGenerator||z4e,v=i.horizontalCoordinatesGenerator||U4e,{horizontalPoints:x,verticalPoints:b}=i;if((!x||!x.length)&&typeof v=="function"){var S=h&&h.length,A=v({yAxis:y?Ns(Ns({},y),{},{ticks:S?h:y.ticks}):void 0,width:e,height:n,offset:r},S?!0:d);Bk(Array.isArray(A),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof A,"]")),Array.isArray(A)&&(x=A)}if((!b||!b.length)&&typeof g=="function"){var E=f&&f.length,I=g({xAxis:m?Ns(Ns({},m),{},{ticks:E?f:m.ticks}):void 0,width:e,height:n,offset:r},E?!0:d);Bk(Array.isArray(I),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof I,"]")),Array.isArray(I)&&(b=I)}return N.createElement("g",{className:"recharts-cartesian-grid"},N.createElement(L4e,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),N.createElement(j4e,If({},i,{horizontalPoints:x})),N.createElement(B4e,If({},i,{verticalPoints:b})),N.createElement(M4e,If({},i,{offset:r,horizontalPoints:x,xAxis:m,yAxis:y})),N.createElement(F4e,If({},i,{offset:r,verticalPoints:b,xAxis:m,yAxis:y})))}g3.displayName="CartesianGrid";var zQ=(t,e,n,r)=>eh(t,"xAxis",e,r),UQ=(t,e,n,r)=>Qd(t,"xAxis",e,r),VQ=(t,e,n,r)=>eh(t,"yAxis",n,r),WQ=(t,e,n,r)=>Qd(t,"yAxis",n,r),W4e=_e([fn,zQ,VQ,UQ,WQ],(t,e,n,r,i)=>mh(t,"xAxis")?G1(e,r,!1):G1(n,i,!1)),G4e=(t,e,n,r,i)=>i;function q4e(t){return t.type==="line"}var H4e=_e([tN,G4e],(t,e)=>t.filter(q4e).find(n=>n.id===e)),K4e=_e([fn,zQ,VQ,UQ,WQ,H4e,W4e,KC],(t,e,n,r,i,s,o,a)=>{var{chartData:l,dataStartIndex:c,dataEndIndex:u}=a;if(!(s==null||e==null||n==null||r==null||i==null||r.length===0||i.length===0||o==null)){var{dataKey:d,data:h}=s,f;if(h!=null&&h.length>0?f=h:f=l==null?void 0:l.slice(c,u+1),f!=null)return yRe({layout:t,xAxis:e,yAxis:n,xAxisTicks:r,yAxisTicks:i,dataKey:d,bandSize:o,displayedData:f})}});function X4e(t){var e=Zf(t),n=3,r=2;if(e!=null){var{r:i,strokeWidth:s}=e,o=Number(i),a=Number(s);return(Number.isNaN(o)||o<0)&&(o=n),(Number.isNaN(a)||a<0)&&(a=r),{r:o,strokeWidth:a}}return{r:n,strokeWidth:r}}var Y4e=["id"],Z4e=["type","layout","connectNulls","needClip"],J4e=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function q7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?q7(Object(n),!0).forEach(function(r){Q4e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Q4e(t,e,n){return(e=eRe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eRe(t){var e=tRe(t,"string");return typeof e=="symbol"?e:e+""}function tRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pO(t,e){if(t==null)return{};var n,r,i=nRe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function nRe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function ip(){return ip=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ip.apply(null,arguments)}var rRe=t=>{var{dataKey:e,name:n,stroke:r,legendType:i,hide:s}=t;return[{inactive:s,dataKey:e,type:i,color:r,value:Kg(n,e),payload:t}]};function iRe(t){var{dataKey:e,data:n,stroke:r,strokeWidth:i,fill:s,name:o,hide:a,unit:l}=t;return{dataDefinedOnItem:n,positions:void 0,settings:{stroke:r,strokeWidth:i,fill:s,dataKey:e,nameKey:void 0,name:Kg(o,e),hide:a,type:t.tooltipType,color:t.stroke,unit:l}}}var GQ=(t,e)=>"".concat(e,"px ").concat(t-e,"px");function sRe(t,e){for(var n=t.length%2!==0?[...t,0]:t,r=[],i=0;i<e;++i)r=[...r,...n];return r}var oRe=(t,e,n)=>{var r=n.reduce((d,h)=>d+h);if(!r)return GQ(e,t);for(var i=Math.floor(t/r),s=t%r,o=e-t,a=[],l=0,c=0;l<n.length;c+=n[l],++l)if(c+n[l]>s){a=[...n.slice(0,l),s-c];break}var u=a.length%2===0?[0,o]:[o];return[...sRe(n,i),...a,...u].map(d=>"".concat(d,"px")).join(", ")};function aRe(t,e){var n;if(N.isValidElement(t))n=N.cloneElement(t,e);else if(typeof t=="function")n=t(e);else{var r=yn("recharts-line-dot",typeof t!="boolean"?t.className:"");n=N.createElement(pQ,ip({},e,{className:r}))}return n}function lRe(t,e){return t==null?!1:e?!0:t.length===1}function cRe(t){var{clipPathId:e,points:n,props:r}=t,{dot:i,dataKey:s,needClip:o}=r;if(!lRe(n,i))return null;var a=pO(r,Y4e),l=wQ(i),c=Yo(a),u=Uwe(i),d=n.map((f,p)=>{var m=jo(jo(jo({key:"dot-".concat(p),r:3},c),u),{},{index:p,cx:f.x,cy:f.y,dataKey:s,value:f.value,payload:f.payload,points:n});return aRe(i,m)}),h={clipPath:o?"url(#clipPath-".concat(l?"":"dots-").concat(e,")"):void 0};return N.createElement(is,ip({className:"recharts-line-dots",key:"dots"},h),d)}function uRe(t){var{showLabels:e,children:n,points:r}=t,i=N.useMemo(()=>r==null?void 0:r.map(s=>{var o={x:s.x,y:s.y,width:0,height:0};return jo(jo({},o),{},{value:s.value,payload:s.payload,viewBox:o,parentViewBox:void 0,fill:void 0})}),[r]);return N.createElement(hQ,{value:e?i:null},n)}function H7(t){var{clipPathId:e,pathRef:n,points:r,strokeDasharray:i,props:s}=t,{type:o,layout:a,connectNulls:l,needClip:c}=s,u=pO(s,Z4e),d=jo(jo({},Zs(u)),{},{fill:"none",className:"recharts-line-curve",clipPath:c?"url(#clipPath-".concat(e,")"):void 0,points:r,type:o,layout:a,connectNulls:l,strokeDasharray:i??s.strokeDasharray});return N.createElement(N.Fragment,null,(r==null?void 0:r.length)>1&&N.createElement(F4,ip({},d,{pathRef:n})),N.createElement(cRe,{points:r,clipPathId:e,props:s}))}function dRe(t){try{return t&&t.getTotalLength&&t.getTotalLength()||0}catch{return 0}}function hRe(t){var{clipPathId:e,props:n,pathRef:r,previousPointsRef:i,longestAnimatedLengthRef:s}=t,{points:o,strokeDasharray:a,isAnimationActive:l,animationBegin:c,animationDuration:u,animationEasing:d,animateNewValues:h,width:f,height:p,onAnimationEnd:m,onAnimationStart:y}=n,g=i.current,v=Pv(n,"recharts-line-"),[x,b]=N.useState(!1),S=!x,A=N.useCallback(()=>{typeof m=="function"&&m(),b(!1)},[m]),E=N.useCallback(()=>{typeof y=="function"&&y(),b(!0)},[y]),I=dRe(r.current),T=s.current;return N.createElement(uRe,{points:o,showLabels:S},n.children,N.createElement($v,{animationId:v,begin:c,duration:u,isActive:l,easing:d,onAnimationEnd:A,onAnimationStart:E,key:v},O=>{var $=$r(T,I+T,O),R=Math.min($,I),F;if(l)if(a){var L="".concat(a).split(/[,\s]+/gim).map(K=>parseFloat(K));F=oRe(R,I,L)}else F=GQ(I,R);else F=a==null?void 0:String(a);if(g){var U=g.length/o.length,q=O===1?o:o.map((K,j)=>{var Y=Math.floor(j*U);if(g[Y]){var ae=g[Y];return jo(jo({},K),{},{x:$r(ae.x,K.x,O),y:$r(ae.y,K.y,O)})}return h?jo(jo({},K),{},{x:$r(f*2,K.x,O),y:$r(p/2,K.y,O)}):jo(jo({},K),{},{x:K.x,y:K.y})});return i.current=q,N.createElement(H7,{props:n,points:q,clipPathId:e,pathRef:r,strokeDasharray:F})}return O>0&&I>0&&(i.current=o,s.current=R),N.createElement(H7,{props:n,points:o,clipPathId:e,pathRef:r,strokeDasharray:F})}),N.createElement(XR,{label:n.label}))}function fRe(t){var{clipPathId:e,props:n}=t,r=N.useRef(null),i=N.useRef(0),s=N.useRef(null);return N.createElement(hRe,{props:n,clipPathId:e,previousPointsRef:r,longestAnimatedLengthRef:i,pathRef:s})}var pRe=(t,e)=>({x:t.x,y:t.y,value:t.value,errorVal:Zn(t.payload,e)});class mRe extends N.Component{render(){var{hide:e,dot:n,points:r,className:i,xAxisId:s,yAxisId:o,top:a,left:l,width:c,height:u,id:d,needClip:h}=this.props;if(e)return null;var f=yn("recharts-line",i),p=d,{r:m,strokeWidth:y}=X4e(n),g=wQ(n),v=m*2+y;return N.createElement(N.Fragment,null,N.createElement(is,{className:f},h&&N.createElement("defs",null,N.createElement(PQ,{clipPathId:p,xAxisId:s,yAxisId:o}),!g&&N.createElement("clipPath",{id:"clipPath-dots-".concat(p)},N.createElement("rect",{x:l-v/2,y:a-v/2,width:c+v,height:u+v}))),N.createElement($Q,{xAxisId:s,yAxisId:o,data:r,dataPointFormatter:pRe,errorBarOffset:0},N.createElement(fRe,{props:this.props,clipPathId:p}))),N.createElement(O$e,{activeDot:this.props.activeDot,points:r,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var qQ={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!gh.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function gRe(t){var e=ls(t,qQ),{activeDot:n,animateNewValues:r,animationBegin:i,animationDuration:s,animationEasing:o,connectNulls:a,dot:l,hide:c,isAnimationActive:u,label:d,legendType:h,xAxisId:f,yAxisId:p,id:m}=e,y=pO(e,J4e),{needClip:g}=cO(f,p),v=aO(),x=BC(),b=no(),S=gt(O=>K4e(O,f,p,b,m));if(x!=="horizontal"&&x!=="vertical"||S==null||v==null)return null;var{height:A,width:E,x:I,y:T}=v;return N.createElement(mRe,ip({},y,{id:m,connectNulls:a,dot:l,activeDot:n,animateNewValues:r,animationBegin:i,animationDuration:s,animationEasing:o,isAnimationActive:u,hide:c,label:d,legendType:h,xAxisId:f,yAxisId:p,points:S,layout:x,height:A,width:E,left:I,top:T,needClip:g}))}function yRe(t){var{layout:e,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:s,dataKey:o,bandSize:a,displayedData:l}=t;return l.map((c,u)=>{var d=Zn(c,o);if(e==="horizontal"){var h=LB({axis:n,ticks:i,bandSize:a,entry:c,index:u}),f=mr(d)?null:r.scale(d);return{x:h,y:f,value:d,payload:c}}var p=mr(d)?null:n.scale(d),m=LB({axis:r,ticks:s,bandSize:a,entry:c,index:u});return p==null||m==null?null:{x:p,y:m,value:d,payload:c}}).filter(Boolean)}function vRe(t){var e=ls(t,qQ),n=no();return N.createElement(sO,{id:e.id,type:"line"},r=>N.createElement(N.Fragment,null,N.createElement(NQ,{legendPayload:rRe(e)}),N.createElement(iO,{fn:iRe,args:e}),N.createElement(IQ,{type:"line",id:r,data:e.data,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,hide:e.hide,isPanorama:n}),N.createElement(gRe,ip({},e,{id:r}))))}var y3=N.memo(vRe);y3.displayName="Line";var xRe=["dangerouslySetInnerHTML","ticks"],bRe=["id"],wRe=["domain"],kRe=["domain"];function v3(){return v3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},v3.apply(null,arguments)}function cS(t,e){if(t==null)return{};var n,r,i=SRe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function SRe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function CRe(t){var e=Lr();return N.useLayoutEffect(()=>(e(w$e(t)),()=>{e(k$e(t))}),[t,e]),null}var NRe=t=>{var{xAxisId:e,className:n}=t,r=gt(L4),i=no(),s="xAxis",o=gt(f=>n0(f,s,e,i)),a=gt(f=>kJ(f,s,e,i)),l=gt(f=>vJ(f,e)),c=gt(f=>m_e(f,e)),u=gt(f=>QZ(f,e));if(l==null||c==null||u==null)return null;var d=cS(t,xRe),h=cS(u,bRe);return N.createElement(fO,v3({},d,h,{scale:o,x:c.x,y:c.y,width:l.width,height:l.height,className:yn("recharts-".concat(s," ").concat(s),n),viewBox:r,ticks:a}))},ARe={allowDataOverflow:Oo.allowDataOverflow,allowDecimals:Oo.allowDecimals,allowDuplicatedCategory:Oo.allowDuplicatedCategory,height:Oo.height,hide:!1,mirror:Oo.mirror,orientation:Oo.orientation,padding:Oo.padding,reversed:Oo.reversed,scale:Oo.scale,tickCount:Oo.tickCount,type:Oo.type,xAxisId:0},IRe=t=>{var e,n,r,i,s,o=ls(t,ARe);return N.createElement(N.Fragment,null,N.createElement(CRe,{interval:(e=o.interval)!==null&&e!==void 0?e:"preserveEnd",id:o.xAxisId,scale:o.scale,type:o.type,padding:o.padding,allowDataOverflow:o.allowDataOverflow,domain:o.domain,dataKey:o.dataKey,allowDuplicatedCategory:o.allowDuplicatedCategory,allowDecimals:o.allowDecimals,tickCount:o.tickCount,includeHidden:(n=o.includeHidden)!==null&&n!==void 0?n:!1,reversed:o.reversed,ticks:o.ticks,height:o.height,orientation:o.orientation,mirror:o.mirror,hide:o.hide,unit:o.unit,name:o.name,angle:(r=o.angle)!==null&&r!==void 0?r:0,minTickGap:(i=o.minTickGap)!==null&&i!==void 0?i:5,tick:(s=o.tick)!==null&&s!==void 0?s:!0,tickFormatter:o.tickFormatter}),N.createElement(NRe,o))},_Re=(t,e)=>{var{domain:n}=t,r=cS(t,wRe),{domain:i}=e,s=cS(e,kRe);return yg(r,s)?Array.isArray(n)&&n.length===2&&Array.isArray(i)&&i.length===2?n[0]===i[0]&&n[1]===i[1]:yg({domain:n},{domain:i}):!1},x3=N.memo(IRe,_Re);x3.displayName="XAxis";var ERe=["dangerouslySetInnerHTML","ticks"],TRe=["id"],$Re=["domain"],PRe=["domain"];function b3(){return b3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},b3.apply(null,arguments)}function uS(t,e){if(t==null)return{};var n,r,i=RRe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function RRe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function ORe(t){var e=Lr();return N.useLayoutEffect(()=>(e(S$e(t)),()=>{e(C$e(t))}),[t,e]),null}var DRe=t=>{var{yAxisId:e,className:n,width:r,label:i}=t,s=N.useRef(null),o=N.useRef(null),a=gt(L4),l=no(),c=Lr(),u="yAxis",d=gt(v=>n0(v,u,e,l)),h=gt(v=>xJ(v,e)),f=gt(v=>y_e(v,e)),p=gt(v=>kJ(v,u,e,l)),m=gt(v=>eJ(v,e));if(N.useLayoutEffect(()=>{if(!(r!=="auto"||!h||KR(i)||N.isValidElement(i)||m==null)){var v=s.current;if(v){var x=v.getCalculatedWidth();Math.round(h.width)!==Math.round(x)&&c(N$e({id:e,width:x}))}}},[p,h,c,i,e,r,m]),h==null||f==null||m==null)return null;var y=uS(t,ERe),g=uS(m,TRe);return N.createElement(fO,b3({},y,g,{ref:s,labelRef:o,scale:d,x:f.x,y:f.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:h.width,height:h.height,className:yn("recharts-".concat(u," ").concat(u),n),viewBox:a,ticks:p}))},LRe={allowDataOverflow:Do.allowDataOverflow,allowDecimals:Do.allowDecimals,allowDuplicatedCategory:Do.allowDuplicatedCategory,hide:!1,mirror:Do.mirror,orientation:Do.orientation,padding:Do.padding,reversed:Do.reversed,scale:Do.scale,tickCount:Do.tickCount,type:Do.type,width:Do.width,yAxisId:0},MRe=t=>{var e,n,r,i,s,o=ls(t,LRe);return N.createElement(N.Fragment,null,N.createElement(ORe,{interval:(e=o.interval)!==null&&e!==void 0?e:"preserveEnd",id:o.yAxisId,scale:o.scale,type:o.type,domain:o.domain,allowDataOverflow:o.allowDataOverflow,dataKey:o.dataKey,allowDuplicatedCategory:o.allowDuplicatedCategory,allowDecimals:o.allowDecimals,tickCount:o.tickCount,padding:o.padding,includeHidden:(n=o.includeHidden)!==null&&n!==void 0?n:!1,reversed:o.reversed,ticks:o.ticks,width:o.width,orientation:o.orientation,mirror:o.mirror,hide:o.hide,unit:o.unit,name:o.name,angle:(r=o.angle)!==null&&r!==void 0?r:0,minTickGap:(i=o.minTickGap)!==null&&i!==void 0?i:5,tick:(s=o.tick)!==null&&s!==void 0?s:!0,tickFormatter:o.tickFormatter}),N.createElement(DRe,o))},FRe=(t,e)=>{var{domain:n}=t,r=uS(t,$Re),{domain:i}=e,s=uS(e,PRe);return yg(r,s)?Array.isArray(n)&&n.length===2&&Array.isArray(i)&&i.length===2?n[0]===i[0]&&n[1]===i[1]:yg({domain:n},{domain:i}):!1},w3=N.memo(MRe,FRe);w3.displayName="YAxis";var jRe={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qv=N;function BRe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var zRe=typeof Object.is=="function"?Object.is:BRe,URe=qv.useSyncExternalStore,VRe=qv.useRef,WRe=qv.useEffect,GRe=qv.useMemo,qRe=qv.useDebugValue;jRe.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=VRe(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=GRe(function(){function l(f){if(!c){if(c=!0,u=f,f=r(f),i!==void 0&&o.hasValue){var p=o.value;if(i(p,f))return d=p}return d=f}if(p=d,zRe(u,f))return p;var m=r(f);return i!==void 0&&i(p,m)?(u=f,p):(u=f,d=m)}var c=!1,u,d,h=n===void 0?null:n;return[function(){return l(e())},h===null?void 0:function(){return l(h())}]},[e,n,r,i]);var a=URe(t,s[0],s[1]);return WRe(function(){o.hasValue=!0,o.value=a},[a]),qRe(a),a};function HRe(t){t()}function KRe(){let t=null,e=null;return{clear(){t=null,e=null},notify(){HRe(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var K7={notify(){},get:()=>[]};function XRe(t,e){let n,r=K7,i=0,s=!1;function o(m){u();const y=r.subscribe(m);let g=!1;return()=>{g||(g=!0,y(),d())}}function a(){r.notify()}function l(){p.onStateChange&&p.onStateChange()}function c(){return s}function u(){i++,n||(n=e?e.addNestedSub(l):t.subscribe(l),r=KRe())}function d(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=K7)}function h(){s||(s=!0,u())}function f(){s&&(s=!1,d())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:c,trySubscribe:h,tryUnsubscribe:f,getListeners:()=>r};return p}var YRe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ZRe=YRe(),JRe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",QRe=JRe(),eOe=()=>ZRe||QRe?N.useLayoutEffect:N.useEffect,tOe=eOe(),y_=Symbol.for("react-redux-context"),v_=typeof globalThis<"u"?globalThis:{};function nOe(){if(!N.createContext)return{};const t=v_[y_]??(v_[y_]=new Map);let e=t.get(N.createContext);return e||(e=N.createContext(null),t.set(N.createContext,e)),e}var rOe=nOe();function iOe(t){const{children:e,context:n,serverState:r,store:i}=t,s=N.useMemo(()=>{const l=XRe(i);return{store:i,subscription:l,getServerState:r?()=>r:void 0}},[i,r]),o=N.useMemo(()=>i.getState(),[i]);tOe(()=>{const{subscription:l}=s;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),o!==i.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[s,o]);const a=n||rOe;return N.createElement(a.Provider,{value:s},e)}var sOe=iOe,oOe=(t,e)=>e,mO=_e([oOe,fn,YZ,Ti,jJ,Fu,kEe,_i],IEe),gO=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},HQ=Ua("mouseClick"),KQ=Ev();KQ.startListening({actionCreator:HQ,effect:(t,e)=>{var n=t.payload,r=mO(e.getState(),gO(n));(r==null?void 0:r.activeIndex)!=null&&e.dispatch(T_e({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var k3=Ua("mouseMove"),XQ=Ev();XQ.startListening({actionCreator:k3,effect:(t,e)=>{var n=t.payload,r=e.getState(),i=FR(r,r.tooltip.settings.shared),s=mO(r,gO(n));i==="axis"&&((s==null?void 0:s.activeIndex)!=null?e.dispatch(TJ({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):e.dispatch(EJ()))}});var X7={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},YQ=na({name:"rootProps",initialState:X7,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:X7.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className}}}),aOe=YQ.reducer,{updateOptions:lOe}=YQ.actions,ZQ=na({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:cOe}=ZQ.actions,uOe=ZQ.reducer,JQ=Ua("keyDown"),QQ=Ua("focus"),yO=Ev();yO.startListening({actionCreator:JQ,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,s=t.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var o=Number(jR(i,i0(n))),a=Fu(n);if(s==="Enter"){var l=nS(n,"axis","hover",String(i.index));e.dispatch(c3({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:l}));return}var c=w_e(n),u=c==="left-to-right"?1:-1,d=s==="ArrowRight"?1:-1,h=o+d*u;if(!(a==null||h>=a.length||h<0)){var f=nS(n,"axis","hover",String(h));e.dispatch(c3({active:!0,activeIndex:h.toString(),activeDataKey:void 0,activeCoordinate:f}))}}}}});yO.startListening({actionCreator:QQ,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var s="0",o=nS(n,"axis","hover",String(s));e.dispatch(c3({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:o}))}}}});var xa=Ua("externalEvent"),eee=Ev();eee.startListening({actionCreator:xa,effect:(t,e)=>{if(t.payload.handler!=null){var n=e.getState(),r={activeCoordinate:hEe(n),activeDataKey:VJ(n),activeIndex:th(n),activeLabel:UJ(n),activeTooltipIndex:th(n),isTooltipActive:fEe(n)};t.payload.handler(r,t.payload.reactEvent)}}});var dOe=_e([r0],t=>t.tooltipItemPayloads),hOe=_e([dOe,Uv,(t,e,n)=>e,(t,e,n)=>n],(t,e,n,r)=>{var i=t.find(a=>a.settings.dataKey===r);if(i!=null){var{positions:s}=i;if(s!=null){var o=e(s,n);return o}}}),tee=Ua("touchMove"),nee=Ev();nee.startListening({actionCreator:tee,effect:(t,e)=>{var n=t.payload,r=e.getState(),i=FR(r,r.tooltip.settings.shared);if(i==="axis"){var s=mO(r,gO({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));(s==null?void 0:s.activeIndex)!=null&&e.dispatch(TJ({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(i==="item"){var o,a=n.touches[0],l=document.elementFromPoint(a.clientX,a.clientY);if(!l||!l.getAttribute)return;var c=l.getAttribute(wY),u=(o=l.getAttribute(kY))!==null&&o!==void 0?o:void 0,d=hOe(e.getState(),c,u);e.dispatch(_J({activeDataKey:u,activeIndex:c,activeCoordinate:d}))}}});var fOe=GX({brush:HPe,cartesianAxis:A$e,chartData:UEe,errorBars:q$e,graphicalItems:G3e,layout:bSe,legend:bCe,options:MEe,polarAxis:a3e,polarOptions:uOe,referenceElements:e4e,rootProps:aOe,tooltip:$_e}),pOe=function(e){return Gke({reducer:fOe,preloadedState:e,middleware:n=>n({serializableCheck:!1}).concat([KQ.middleware,XQ.middleware,yO.middleware,eee.middleware,nee.middleware]),enhancers:n=>{var r=n;return typeof n=="function"&&(r=n()),r.concat(rY({type:"raf"}))},devTools:gh.devToolsEnabled})};function ree(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,i=no(),s=N.useRef(null);if(i)return n;s.current==null&&(s.current=pOe(e));var o=_4;return N.createElement(sOe,{context:o,store:s.current},n)}function iee(t){var{layout:e,margin:n}=t,r=Lr(),i=no();return N.useEffect(()=>{i||(r(ySe(e)),r(gSe(n)))},[r,i,e,n]),null}function see(t){var e=Lr();return N.useEffect(()=>{e(lOe(t))},[e,t]),null}var mOe=["children"];function gOe(t,e){if(t==null)return{};var n,r,i=yOe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function yOe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function dS(){return dS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dS.apply(null,arguments)}var vOe={width:"100%",height:"100%",display:"block"},xOe=N.forwardRef((t,e)=>{var n=TY(),r=$Y(),i=DY();if(!fg(n)||!fg(r))return null;var{children:s,otherAttributes:o,title:a,desc:l}=t,c,u;return typeof o.tabIndex=="number"?c=o.tabIndex:c=i?0:void 0,typeof o.role=="string"?u=o.role:u=i?"application":void 0,N.createElement(HK,dS({},o,{title:a,desc:l,role:u,tabIndex:c,width:n,height:r,style:vOe,ref:e}),s)}),bOe=t=>{var{children:e}=t,n=gt(FC);if(!n)return null;var{width:r,height:i,y:s,x:o}=n;return N.createElement(HK,{width:r,height:i,x:o,y:s},e)},Y7=N.forwardRef((t,e)=>{var{children:n}=t,r=gOe(t,mOe),i=no();return i?N.createElement(bOe,null,n):N.createElement(xOe,dS({ref:e},r),n)});function wOe(){var t=Lr(),[e,n]=N.useState(null),r=gt(XSe);return N.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),s=i.width/e.offsetWidth;Ps(s)&&s!==r&&t(xSe(s))}},[e,t,r]),n}function Z7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kOe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Z7(Object(n),!0).forEach(function(r){SOe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function SOe(t,e,n){return(e=COe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function COe(t){var e=NOe(t,"string");return typeof e=="symbol"?e:e+""}function NOe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sp(){return sp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sp.apply(null,arguments)}var AOe=()=>(ZEe(),null);function hS(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var IOe=N.forwardRef((t,e)=>{var n,r,i=N.useRef(null),[s,o]=N.useState({containerWidth:hS((n=t.style)===null||n===void 0?void 0:n.width),containerHeight:hS((r=t.style)===null||r===void 0?void 0:r.height)}),a=N.useCallback((c,u)=>{o(d=>{var h=Math.round(c),f=Math.round(u);return d.containerWidth===h&&d.containerHeight===f?d:{containerWidth:h,containerHeight:f}})},[]),l=N.useCallback(c=>{if(typeof e=="function"&&e(c),c!=null){var{width:u,height:d}=c.getBoundingClientRect();a(u,d);var h=p=>{var{width:m,height:y}=p[0].contentRect;a(m,y)},f=new ResizeObserver(h);f.observe(c),i.current=f}},[e,a]);return N.useEffect(()=>()=>{var c=i.current;c!=null&&c.disconnect()},[a]),N.createElement(N.Fragment,null,N.createElement(zC,{width:s.containerWidth,height:s.containerHeight}),N.createElement("div",sp({ref:l},t)))}),_Oe=N.forwardRef((t,e)=>{var{width:n,height:r}=t,[i,s]=N.useState({containerWidth:hS(n),containerHeight:hS(r)}),o=N.useCallback((l,c)=>{s(u=>{var d=Math.round(l),h=Math.round(c);return u.containerWidth===d&&u.containerHeight===h?u:{containerWidth:d,containerHeight:h}})},[]),a=N.useCallback(l=>{if(typeof e=="function"&&e(l),l!=null){var{width:c,height:u}=l.getBoundingClientRect();o(c,u)}},[e,o]);return N.createElement(N.Fragment,null,N.createElement(zC,{width:i.containerWidth,height:i.containerHeight}),N.createElement("div",sp({ref:a},t)))}),EOe=N.forwardRef((t,e)=>{var{width:n,height:r}=t;return N.createElement(N.Fragment,null,N.createElement(zC,{width:n,height:r}),N.createElement("div",sp({ref:e},t)))}),TOe=N.forwardRef((t,e)=>{var{width:n,height:r}=t;return wu(n)||wu(r)?N.createElement(_Oe,sp({},t,{ref:e})):N.createElement(EOe,sp({},t,{ref:e}))});function $Oe(t){return t===!0?IOe:TOe}var POe=N.forwardRef((t,e)=>{var{children:n,className:r,height:i,onClick:s,onContextMenu:o,onDoubleClick:a,onMouseDown:l,onMouseEnter:c,onMouseLeave:u,onMouseMove:d,onMouseUp:h,onTouchEnd:f,onTouchMove:p,onTouchStart:m,style:y,width:g,responsive:v,dispatchTouchEvents:x=!0}=t,b=N.useRef(null),S=Lr(),[A,E]=N.useState(null),[I,T]=N.useState(null),O=wOe(),$=M4(),R=($==null?void 0:$.width)>0?$.width:g,F=($==null?void 0:$.height)>0?$.height:i,L=N.useCallback(ee=>{O(ee),typeof e=="function"&&e(ee),E(ee),T(ee),ee!=null&&(b.current=ee)},[O,e,E,T]),U=N.useCallback(ee=>{S(HQ(ee)),S(xa({handler:s,reactEvent:ee}))},[S,s]),q=N.useCallback(ee=>{S(k3(ee)),S(xa({handler:c,reactEvent:ee}))},[S,c]),K=N.useCallback(ee=>{S(EJ()),S(xa({handler:u,reactEvent:ee}))},[S,u]),j=N.useCallback(ee=>{S(k3(ee)),S(xa({handler:d,reactEvent:ee}))},[S,d]),Y=N.useCallback(()=>{S(QQ())},[S]),ae=N.useCallback(ee=>{S(JQ(ee.key))},[S]),le=N.useCallback(ee=>{S(xa({handler:o,reactEvent:ee}))},[S,o]),M=N.useCallback(ee=>{S(xa({handler:a,reactEvent:ee}))},[S,a]),V=N.useCallback(ee=>{S(xa({handler:l,reactEvent:ee}))},[S,l]),H=N.useCallback(ee=>{S(xa({handler:h,reactEvent:ee}))},[S,h]),J=N.useCallback(ee=>{S(xa({handler:m,reactEvent:ee}))},[S,m]),oe=N.useCallback(ee=>{x&&S(tee(ee)),S(xa({handler:p,reactEvent:ee}))},[S,x,p]),ce=N.useCallback(ee=>{S(xa({handler:f,reactEvent:ee}))},[S,f]),ge=$Oe(v);return N.createElement(XJ.Provider,{value:A},N.createElement(Xwe.Provider,{value:I},N.createElement(ge,{width:R??(y==null?void 0:y.width),height:F??(y==null?void 0:y.height),className:yn("recharts-wrapper",r),style:kOe({position:"relative",cursor:"default",width:R,height:F},y),onClick:U,onContextMenu:le,onDoubleClick:M,onFocus:Y,onKeyDown:ae,onMouseDown:V,onMouseEnter:q,onMouseLeave:K,onMouseMove:j,onMouseUp:H,onTouchEnd:ce,onTouchMove:oe,onTouchStart:J,ref:L},N.createElement(AOe,null),n)))}),ROe=["width","height","responsive","children","className","style","compact","title","desc"];function OOe(t,e){if(t==null)return{};var n,r,i=DOe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function DOe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var oee=N.forwardRef((t,e)=>{var{width:n,height:r,responsive:i,children:s,className:o,style:a,compact:l,title:c,desc:u}=t,d=OOe(t,ROe),h=Yo(d);return l?N.createElement(N.Fragment,null,N.createElement(zC,{width:n,height:r}),N.createElement(Y7,{otherAttributes:h,title:c,desc:u},s)):N.createElement(POe,{className:o,style:a,width:n,height:r,responsive:i,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},N.createElement(Y7,{otherAttributes:h,title:c,desc:u,ref:e},N.createElement(n4e,null,s)))});function S3(){return S3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},S3.apply(null,arguments)}var LOe={top:5,right:5,bottom:5,left:5},MOe={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:LOe,reverseStackOrder:!1,syncMethod:"index",responsive:!1},aee=N.forwardRef(function(e,n){var r,i=ls(e.categoricalChartProps,MOe),{chartName:s,defaultTooltipEventType:o,validateTooltipEventTypes:a,tooltipPayloadSearcher:l,categoricalChartProps:c}=e,u={chartName:s,defaultTooltipEventType:o,validateTooltipEventTypes:a,tooltipPayloadSearcher:l,eventEmitter:void 0};return N.createElement(ree,{preloadedState:{options:u},reduxStoreName:(r=c.id)!==null&&r!==void 0?r:s},N.createElement(LQ,{chartData:c.data}),N.createElement(iee,{layout:i.layout,margin:i.margin}),N.createElement(see,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),N.createElement(oee,S3({},i,{ref:n})))}),FOe=["axis"],jOe=N.forwardRef((t,e)=>N.createElement(aee,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:FOe,tooltipPayloadSearcher:HR,categoricalChartProps:t,ref:e})),BOe=["axis","item"],zOe=N.forwardRef((t,e)=>N.createElement(aee,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:BOe,tooltipPayloadSearcher:HR,categoricalChartProps:t,ref:e}));function UOe(t){var e=Lr();return N.useEffect(()=>{e(cOe(t))},[e,t]),null}var VOe=["layout"];function C3(){return C3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},C3.apply(null,arguments)}function WOe(t,e){if(t==null)return{};var n,r,i=GOe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function GOe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var qOe={top:5,right:5,bottom:5,left:5},HOe={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:qOe,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1},KOe=N.forwardRef(function(e,n){var r,i=ls(e.categoricalChartProps,HOe),{layout:s}=i,o=WOe(i,VOe),{chartName:a,defaultTooltipEventType:l,validateTooltipEventTypes:c,tooltipPayloadSearcher:u}=e,d={chartName:a,defaultTooltipEventType:l,validateTooltipEventTypes:c,tooltipPayloadSearcher:u,eventEmitter:void 0};return N.createElement(ree,{preloadedState:{options:d},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:a},N.createElement(LQ,{chartData:i.data}),N.createElement(iee,{layout:s,margin:i.margin}),N.createElement(see,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),N.createElement(UOe,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),N.createElement(oee,C3({},o,{ref:n})))}),XOe=["item"],YOe={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},ZOe=N.forwardRef((t,e)=>{var n=ls(t,YOe);return N.createElement(KOe,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:XOe,tooltipPayloadSearcher:HR,categoricalChartProps:n,ref:e})});const J7=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8","#82CA9D"],qw=({title:t,type:e,data:n,showPredictions:r=!1})=>{const i=()=>{switch(e){case"line":return k.jsx(t_,{width:"100%",height:200,children:k.jsxs(jOe,{data:n,children:[k.jsx(g3,{strokeDasharray:"3 3",className:"opacity-30"}),k.jsx(x3,{dataKey:"label",className:"text-xs",tick:{fill:"currentColor"}}),k.jsx(w3,{className:"text-xs",tick:{fill:"currentColor"}}),k.jsx(h_,{contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.9)",border:"none",borderRadius:"8px",backdropFilter:"blur(10px)"},formatter:(s,o,a)=>a.payload.predicted?[`${s}% (Predicted)`,`Confidence: ${(a.payload.confidence*100).toFixed(0)}%`]:[`${s}%`,"Actual"]}),k.jsx(y3,{type:"monotone",dataKey:"value",stroke:"#0088FE",strokeWidth:2,dot:{fill:"#0088FE",strokeWidth:2,r:4},name:"Actual"}),r&&k.jsx(y3,{type:"monotone",dataKey:"value",stroke:"#FF8042",strokeWidth:2,strokeDasharray:"5 5",dot:{fill:"#FF8042",strokeWidth:2,r:3},name:"Predicted",data:n.filter(s=>s.predicted)})]})});case"bar":return k.jsx(t_,{width:"100%",height:200,children:k.jsxs(zOe,{data:n,children:[k.jsx(g3,{strokeDasharray:"3 3",className:"opacity-30"}),k.jsx(x3,{dataKey:"label",className:"text-xs",tick:{fill:"currentColor"}}),k.jsx(w3,{className:"text-xs",tick:{fill:"currentColor"}}),k.jsx(h_,{contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.9)",border:"none",borderRadius:"8px",backdropFilter:"blur(10px)"}}),k.jsx(OQ,{dataKey:"value",fill:"#8884D8",radius:[4,4,0,0]})]})});case"pie":return k.jsx(t_,{width:"100%",height:200,children:k.jsxs(ZOe,{children:[k.jsx(_Q,{data:n,cx:"50%",cy:"50%",labelLine:!1,label:({payload:s,percent:o})=>`${s.label} ${(o*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:n.map((s,o)=>k.jsx(Wv,{fill:J7[o%J7.length]},`cell-${o}`))}),k.jsx(h_,{contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.9)",border:"none",borderRadius:"8px",backdropFilter:"blur(10px)"}})]})});default:return k.jsx("div",{className:"flex items-center justify-center h-32 text-gray-500",children:"Chart type not supported"})}};return k.jsxs(ml.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},className:"glass-card p-6 rounded-xl border border-white/10 backdrop-blur-sm",children:[k.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:t}),n&&n.length>0?i():k.jsx("div",{className:"flex items-center justify-center h-32 text-gray-500",children:"No data available"})]})},lee=Tu.forwardRef(({className:t,variant:e="default",size:n="default",...r},i)=>{const s="inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-white",o={default:"bg-blue-600 text-white hover:bg-blue-700",destructive:"bg-red-600 text-white hover:bg-red-700",outline:"border border-gray-300 hover:bg-gray-100 text-gray-900",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300",ghost:"hover:bg-gray-100 text-gray-900",link:"text-blue-600 hover:underline underline-offset-4"},a={default:"h-10 py-2 px-4",sm:"h-9 px-3 rounded-md",lg:"h-11 px-8 rounded-md",icon:"h-10 w-10"},l=[s,o[e],a[n],t].filter(Boolean).join(" ");return k.jsx("button",{className:l,ref:i,...r})});lee.displayName="Button";const cee=Tu.forwardRef(({className:t,...e},n)=>k.jsx("div",{ref:n,className:`rounded-lg border bg-white shadow-sm ${t||""}`,...e}));cee.displayName="Card";const JOe=Tu.forwardRef(({className:t,...e},n)=>k.jsx("div",{ref:n,className:`flex flex-col space-y-1.5 p-6 ${t||""}`,...e}));JOe.displayName="CardHeader";const QOe=Tu.forwardRef(({className:t,...e},n)=>k.jsx("h3",{ref:n,className:`text-2xl font-semibold leading-none tracking-tight ${t||""}`,...e}));QOe.displayName="CardTitle";const eDe=Tu.forwardRef(({className:t,...e},n)=>k.jsx("p",{ref:n,className:`text-sm text-gray-500 ${t||""}`,...e}));eDe.displayName="CardDescription";const tDe=Tu.forwardRef(({className:t,...e},n)=>k.jsx("div",{ref:n,className:`p-6 pt-0 ${t||""}`,...e}));tDe.displayName="CardContent";const nDe=Tu.forwardRef(({className:t,...e},n)=>k.jsx("div",{ref:n,className:`flex items-center p-6 pt-0 ${t||""}`,...e}));nDe.displayName="CardFooter";function rDe(t,e,n,r,i,s){const o={category:t,text:e,reasoning:n,timestamp:new Date().toISOString(),actionType:r,departmentId:i,confidence:s};try{const a=iDe();a.push(o);const l=a.slice(-100);localStorage.setItem("ai_insight_logs",JSON.stringify(l)),console.log("AI Insight logged:",{category:t,text:e.substring(0,50)+"...",timestamp:o.timestamp})}catch(a){console.error("Failed to log AI insight:",a)}}function iDe(){try{const t=localStorage.getItem("ai_insight_logs");return t?JSON.parse(t):[]}catch(t){return console.error("Failed to retrieve insight logs:",t),[]}}const Q7={"Performance Optimization":k.jsx(bk,{className:"w-4 h-4 text-green-500"}),"Risk Mitigation":k.jsx(_1e,{className:"w-4 h-4 text-yellow-500"}),"Compliance & Safety":k.jsx(C1e,{className:"w-4 h-4 text-blue-500"}),"Maintenance Scheduling":k.jsx(P1e,{className:"w-4 h-4 text-orange-500"}),General:k.jsx(bk,{className:"w-4 h-4 text-gray-500"})};function sDe({insights:t,onExecuteAction:e}){const[n,r]=N.useState(null),i=a=>{rDe(a.category,a.text,a.reasoning||"No reasoning provided"),e&&e(a),alert(`Action executed: ${a.text}`)},s=a=>{r(n===a?null:a)},o=a=>a>=80?"bg-green-100 text-green-800":a>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800";return!t||t.length===0?k.jsxs("div",{className:"glass-card p-8 rounded-xl border border-white/10 backdrop-blur-sm text-center",children:[k.jsx(bk,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),k.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No Recommendations Available"}),k.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"AI recommendations will appear here based on your operational data and trends."})]}):k.jsxs("div",{className:"space-y-4",children:[k.jsxs("div",{className:"flex items-center justify-between",children:[k.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"AI Recommendations"}),k.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[t.length," actionable insights"]})]}),k.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.map((a,l)=>k.jsx(ml.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:l*.1},children:k.jsxs(cee,{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-md p-4 border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-md transition-all duration-300",children:[k.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[Q7[a.category]||Q7.General,k.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:a.category}),k.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[k.jsxs("span",{className:`text-xs px-2 py-1 rounded-full ${o(a.confidence)}`,children:[a.confidence,"%"]}),k.jsx("button",{onClick:()=>s(l),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors",title:"Show reasoning",children:k.jsx(p1e,{className:"w-3 h-3 text-gray-500"})})]})]}),k.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mb-3 leading-relaxed",children:a.text}),n===l&&a.reasoning&&k.jsx(ml.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mb-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:k.jsxs("p",{className:"text-xs text-blue-800 dark:text-blue-200 leading-relaxed",children:[k.jsx("strong",{children:"AI Reasoning:"})," ",a.reasoning]})}),k.jsxs("div",{className:"flex items-center justify-between",children:[k.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:a.departmentId&&k.jsxs("span",{children:["Target: ",a.departmentId]})}),k.jsxs(lee,{size:"sm",variant:"outline",onClick:()=>i(a),className:"flex items-center gap-1",children:[k.jsx(x1e,{className:"w-3 h-3"}),"Execute"]})]})]})},l))}),k.jsxs("div",{className:"flex items-center justify-center gap-6 text-xs text-gray-500 dark:text-gray-400 mt-4",children:[k.jsxs("div",{className:"flex items-center gap-1",children:[k.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),k.jsxs("span",{children:["High Confidence (",t.filter(a=>a.confidence>=80).length,")"]})]}),k.jsxs("div",{className:"flex items-center gap-1",children:[k.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),k.jsxs("span",{children:["Medium Confidence (",t.filter(a=>a.confidence>=60&&a.confidence<80).length,")"]})]}),k.jsxs("div",{className:"flex items-center gap-1",children:[k.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),k.jsxs("span",{children:["Low Confidence (",t.filter(a=>a.confidence<60).length,")"]})]})]})]})}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oDe=1e-7,aDe=1e-4;class uee{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class vO{refCount(e){return ao("refCount")}incRef(e){return ao("incRef")}timerAvailable(){return!0}time(e){return ao("time")}read(e){return ao("read")}readSync(e){return ao("readSync")}readToGPU(e,n){return ao("readToGPU")}numDataIds(){return ao("numDataIds")}disposeData(e,n){return ao("disposeData")}write(e,n,r){return ao("write")}move(e,n,r,i,s){return ao("move")}createTensorFromGPUData(e,n,r){return ao("createTensorFromGPUData")}memory(){return ao("memory")}floatPrecision(){return ao("floatPrecision")}epsilon(){return this.floatPrecision()===32?oDe:aDe}dispose(){return ao("dispose")}}function ao(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lDe(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,um(t,e,n)}function op(t,e,n){return Math.max(t,Math.min(e,n))}function xO(t){return t%2===0?t:t+1}function um(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function cDe(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function Z(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function Xa(t,e,n=""){Z(xn(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function dee(t){Z(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function $e(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function xn(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function vg(t){return t%1===0}function N3(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function Hm(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function eU(t,e=i=>0,n,r){return new Promise((i,s)=>{let o=0;const a=()=>{if(t()){i();return}o++;const l=e(o);if(n!=null&&o>=n){s();return}r!=null?r(a,l):setTimeout(a,l)};a()})}function hee(t,e){let n=1,r=-1;for(let s=0;s<t.length;++s)if(t[s]>=0)n*=t[s];else if(t[s]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${s}`);r=s}else if(t[s]<0)throw Error(`Shapes can not be < 0. Found ${t[s]} at dim ${s}`);if(r===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const i=t.slice();return i[r]=e/n,i}function Yt(t,e){const n=e.length;return t=t==null?e.map((r,i)=>i):[].concat(t),Z(t.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),Z(t.every(r=>vg(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?n+r:r)}function bh(t,e){const n=[],r=[],i=e!=null&&Array.isArray(e)&&e.length===0,s=e==null||i?null:Yt(e,t).sort();let o=0;for(let a=0;a<t.length;++a){if(s!=null){if(s[o]===a&&t[a]!==1)throw new Error(`Can't squeeze axis ${a} since its dim '${t[a]}' is not 1`);(s[o]==null||s[o]>a)&&t[a]===1&&(n.push(t[a]),r.push(a)),s[o]<=a&&o++}t[a]!==1&&(n.push(t[a]),r.push(a))}return{newShape:n,keptDims:r}}function ss(t,e){return Rr(t,e)}function Rr(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function uDe(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function dDe(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function fee(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function fS(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function hDe(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function Hv(t){return typeof t=="string"||t instanceof String}function fDe(t){return typeof t=="boolean"}function A3(t){return typeof t=="number"}function s0(t){return Array.isArray(t)?s0(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":A3(t)?"float32":Hv(t)?"string":fDe(t)?"bool":"float32"}function I3(t){return!!(t&&t.constructor&&t.call&&t.apply)}function _3(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function wt(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function pee(t,e,n,r=!1){const i=new Array;if(e.length===1){const s=e[0]*(r?2:1);for(let o=0;o<s;o++)i[o]=n[t+o]}else{const s=e[0],o=e.slice(1),a=o.reduce((l,c)=>l*c)*(r?2:1);for(let l=0;l<s;l++)i[l]=pee(t+l*a,o,n,r)}return i}function Cl(t,e,n=!1){if(t.length===0)return e[0];const r=t.reduce((i,s)=>i*s)*(n?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return pee(0,t,e,n)}function pDe(t,e){if(Array.isArray(t))return t;if(e==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(e==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${e}`)}function bO(t,e){const n=os(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function os(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function mee(t,e){const n=t.reduce((r,i)=>r*i,1);if(e==null||e==="float32")return Cl(t,new Float32Array(n));if(e==="int32")return Cl(t,new Int32Array(n));if(e==="bool")return Cl(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function ju(t){t.forEach(e=>{Z(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function gc(t,e,n){if(e===0)return 0;if(e===1)return t[0];let r=t[t.length-1];for(let i=0;i<t.length-1;++i)r+=n[i]*t[i];return r}function o0(t,e,n){if(e===0)return[];if(e===1)return[t];const r=new Array(e);for(let i=0;i<r.length-1;++i)r[i]=Math.floor(t/n[i]),t-=r[i]*n[i];return r[r.length-1]=t,r}function wO(t){return t&&t.then&&typeof t.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tU="tfjsflags";class mDe{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=gDe,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(Ee().getBool("IS_TEST")||Ee().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){const i=this.urlFlags[e];Ee().getBool("IS_TEST")||Ee().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${i}.`),this.set(e,i)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(wO(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);tU in e&&e[tU].split(",").forEach(r=>{const[i,s]=r.split(":");this.urlFlags[i]=vDe(i,s)})}}function gDe(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(yDe(e,r[0],r[1]),r.join("="))),e}function yDe(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function vDe(t,e){const n=e.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:e}function Ee(){return gee}let gee=null;function xDe(t){gee=t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let x_;function yee(){if(x_==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");x_=t}return x_}function bDe(){const t=yee();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function kO(t,e){const n=bDe();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}const bN="Abs",Kv="Acos",Xv="Acosh",a0="Add",SO="AddN",CO="All",NO="Any",wN="ArgMax",kN="ArgMin",Yv="Asin",Zv="Asinh",Jv="Atan",Qv="Atanh",ex="Atan2",SN="AvgPool",AO="AvgPoolGrad",CN="AvgPool3D",IO="AvgPool3DGrad",NN="BatchMatMul",AN="BatchToSpaceND",_O="Bincount",EO="BitwiseAnd",wDe="BroadcastTo",vee="BroadcastArgs",tx="Cast",nx="Ceil",rx="ClipByValue",TO="Complex",IN="ComplexAbs",_N="Concat",EN="Conv2D",$O="Conv2DBackpropFilter",TN="Conv2DBackpropInput",$N="Conv3D",PO="Conv3DBackpropFilterV2",RO="Conv3DBackpropInputV2",ix="Cos",sx="Cosh",OO="Cumprod",PN="Cumsum",DO="CropAndResize",LO="DenseBincount",MO="DepthToSpace",RN="DepthwiseConv2dNative",FO="DepthwiseConv2dNativeBackpropFilter",jO="DepthwiseConv2dNativeBackpropInput",xee="Diag",ON="Dilation2D",E3="Dilation2DBackpropInput",T3="Dilation2DBackpropFilter",kDe="Draw",ox="RealDiv",BO="Einsum",ax="Elu",zO="EluGrad",lx="Erf",DN="Equal",cx="Exp",LN="ExpandDims",ux="Expm1",UO="FFT",VO="Fill",WO="FlipLeftRight",dx="Floor",hx="FloorDiv",MN="FusedBatchNorm",FN="GatherV2",bee="GatherNd",jN="Greater",fx="GreaterEqual",px="Identity",GO="IFFT",qO="Imag",mx="IsFinite",gx="IsInf",yx="IsNan",BN="LeakyRelu",zN="Less",UN="LessEqual",wee="LinSpace",vx="Log",xx="Log1p",VN="LogicalAnd",WN="LogicalNot",GN="LogicalOr",SDe="LogSoftmax",qN="LRN",HO="LRNGrad",HN="Max",bx="Maximum",KN="MaxPool",KO="MaxPoolGrad",XN="MaxPool3D",XO="MaxPool3DGrad",kee="MaxPoolWithArgmax",YN="Mean",ZN="Min",wx="Minimum",JN="MirrorPad",kx="Mod",See="Multinomial",Sx="Multiply",QN="Neg",e5="NotEqual",YO="NonMaxSuppressionV3",ZO="NonMaxSuppressionV4",JO="NonMaxSuppressionV5",t5="OnesLike",n5="OneHot",r5="Pack",i5="PadV2",Cx="Pow",s5="Prelu",o5="Prod",Cee="RaggedGather",Nee="RaggedRange",Aee="RaggedTensorToTensor",QO="Range",eD="Real",Nx="Reciprocal",Ax="Relu",a5="Reshape",l5="ResizeNearestNeighbor",tD="ResizeNearestNeighborGrad",c5="ResizeBilinear",nD="ResizeBilinearGrad",Ix="Relu6",u5="Reverse",_x="Round",Ex="Rsqrt",Iee="ScatterNd",_ee="TensorScatterUpdate",Eee="SearchSorted",d5="Select",Tx="Selu",h5="Slice",$x="Sin",Px="Sinh",Rx="Sign",Ox="Sigmoid",Dx="Softplus",Lx="Sqrt",f5="Sum",p5="SpaceToBatchND",m5="SplitV",g5="Softmax",Tee="SparseFillEmptyRows",$ee="SparseReshape",Pee="SparseSegmentMean",Ree="SparseSegmentSum",Oee="SparseToDense",Mx="SquaredDifference",rD="Square",iD="StaticRegexReplace",sD="StridedSlice",Dee="StringNGrams",Lee="StringSplit",Mee="StringToHashBucketFast",Fx="Sub",jx="Tan",Bx="Tanh",zx="Tile",oD="TopK",aD="Transform",Km="Transpose",lD="Unique",y5="Unpack",v5="UnsortedSegmentSum",x5="ZerosLike",Ux="Step",CDe="FromPixels",cD="RotateWithOffset",pS="_FusedMatMul",mS="FusedConv2D",Fee="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zo(...t){Ee().getBool("IS_TEST")||Ee().getBool("PROD")||console.warn(...t)}function NDe(...t){Ee().getBool("IS_TEST")||Ee().getBool("PROD")||console.log(...t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gS=kO("kernelRegistry",()=>new Map),$3=kO("gradRegistry",()=>new Map);function nU(t,e){const n=Bee(t,e);return gS.get(n)}function rU(t){return $3.get(t)}function iU(t){const e=gS.entries(),n=[];for(;;){const{done:r,value:i}=e.next();if(r)break;const[s,o]=i,[a]=s.split("_");a===t&&n.push(o)}return n}function jee(t){const{kernelName:e,backendName:n}=t,r=Bee(e,n);gS.has(r)&&zo(`The kernel '${e}' for backend '${n}' is already registered`),gS.set(r,t)}function ADe(t){const{kernelName:e}=t;$3.has(e)&&Ee().getBool("DEBUG")&&zo(`Overriding the gradient for '${e}'`),$3.set(e,t)}function Bee(t,e){return`${e}_${t}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zee(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var Uee=Jn,$a=null;try{$a=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Jn(t,e,n){this.low=t|0,this.high=e|0,this.unsigned=!!n}Jn.prototype.__isLong__;Object.defineProperty(Jn.prototype,"__isLong__",{value:!0});function Co(t){return(t&&t.__isLong__)===!0}Jn.isLong=Co;var sU={},oU={};function _p(t,e){var n,r,i;return e?(t>>>=0,(i=0<=t&&t<256)&&(r=oU[t],r)?r:(n=Qn(t,(t|0)<0?-1:0,!0),i&&(oU[t]=n),n)):(t|=0,(i=-128<=t&&t<128)&&(r=sU[t],r)?r:(n=Qn(t,t<0?-1:0,!1),i&&(sU[t]=n),n))}Jn.fromInt=_p;function Pa(t,e){if(isNaN(t))return e?_f:Ra;if(e){if(t<0)return _f;if(t>=Vee)return qee}else{if(t<=-lU)return go;if(t+1>=lU)return Gee}return t<0?Pa(-t,e).neg():Qn(t%xg|0,t/xg|0,e)}Jn.fromNumber=Pa;function Qn(t,e,n){return new Jn(t,e,n)}Jn.fromBits=Qn;var yS=Math.pow;function uD(t,e,n){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return Ra;if(typeof e=="number"?(n=e,e=!1):e=!!e,n=n||10,n<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return uD(t.substring(1),e,n).neg();for(var i=Pa(yS(n,8)),s=Ra,o=0;o<t.length;o+=8){var a=Math.min(8,t.length-o),l=parseInt(t.substring(o,o+a),n);if(a<8){var c=Pa(yS(n,a));s=s.mul(c).add(Pa(l))}else s=s.mul(i),s=s.add(Pa(l))}return s.unsigned=e,s}Jn.fromString=uD;function Ml(t,e){return typeof t=="number"?Pa(t,e):typeof t=="string"?uD(t,e):Qn(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}Jn.fromValue=Ml;var aU=65536,IDe=1<<24,xg=aU*aU,Vee=xg*xg,lU=Vee/2,cU=_p(IDe),Ra=_p(0);Jn.ZERO=Ra;var _f=_p(0,!0);Jn.UZERO=_f;var Pm=_p(1);Jn.ONE=Pm;var Wee=_p(1,!0);Jn.UONE=Wee;var P3=_p(-1);Jn.NEG_ONE=P3;var Gee=Qn(-1,2147483647,!1);Jn.MAX_VALUE=Gee;var qee=Qn(-1,-1,!0);Jn.MAX_UNSIGNED_VALUE=qee;var go=Qn(0,-2147483648,!1);Jn.MIN_VALUE=go;var Ke=Jn.prototype;Ke.toInt=function(){return this.unsigned?this.low>>>0:this.low};Ke.toNumber=function(){return this.unsigned?(this.high>>>0)*xg+(this.low>>>0):this.high*xg+(this.low>>>0)};Ke.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(go)){var n=Pa(e),r=this.div(n),i=r.mul(n).sub(this);return r.toString(e)+i.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var s=Pa(yS(e,6),this.unsigned),o=this,a="";;){var l=o.div(s),c=o.sub(l.mul(s)).toInt()>>>0,u=c.toString(e);if(o=l,o.isZero())return u+a;for(;u.length<6;)u="0"+u;a=""+u+a}};Ke.getHighBits=function(){return this.high};Ke.getHighBitsUnsigned=function(){return this.high>>>0};Ke.getLowBits=function(){return this.low};Ke.getLowBitsUnsigned=function(){return this.low>>>0};Ke.getNumBitsAbs=function(){if(this.isNegative())return this.eq(go)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,n=31;n>0&&!(e&1<<n);n--);return this.high!=0?n+33:n+1};Ke.isZero=function(){return this.high===0&&this.low===0};Ke.eqz=Ke.isZero;Ke.isNegative=function(){return!this.unsigned&&this.high<0};Ke.isPositive=function(){return this.unsigned||this.high>=0};Ke.isOdd=function(){return(this.low&1)===1};Ke.isEven=function(){return(this.low&1)===0};Ke.equals=function(e){return Co(e)||(e=Ml(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};Ke.eq=Ke.equals;Ke.notEquals=function(e){return!this.eq(e)};Ke.neq=Ke.notEquals;Ke.ne=Ke.notEquals;Ke.lessThan=function(e){return this.comp(e)<0};Ke.lt=Ke.lessThan;Ke.lessThanOrEqual=function(e){return this.comp(e)<=0};Ke.lte=Ke.lessThanOrEqual;Ke.le=Ke.lessThanOrEqual;Ke.greaterThan=function(e){return this.comp(e)>0};Ke.gt=Ke.greaterThan;Ke.greaterThanOrEqual=function(e){return this.comp(e)>=0};Ke.gte=Ke.greaterThanOrEqual;Ke.ge=Ke.greaterThanOrEqual;Ke.compare=function(e){if(Co(e)||(e=Ml(e)),this.eq(e))return 0;var n=this.isNegative(),r=e.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};Ke.comp=Ke.compare;Ke.negate=function(){return!this.unsigned&&this.eq(go)?go:this.not().add(Pm)};Ke.neg=Ke.negate;Ke.add=function(e){Co(e)||(e=Ml(e));var n=this.high>>>16,r=this.high&65535,i=this.low>>>16,s=this.low&65535,o=e.high>>>16,a=e.high&65535,l=e.low>>>16,c=e.low&65535,u=0,d=0,h=0,f=0;return f+=s+c,h+=f>>>16,f&=65535,h+=i+l,d+=h>>>16,h&=65535,d+=r+a,u+=d>>>16,d&=65535,u+=n+o,u&=65535,Qn(h<<16|f,u<<16|d,this.unsigned)};Ke.subtract=function(e){return Co(e)||(e=Ml(e)),this.add(e.neg())};Ke.sub=Ke.subtract;Ke.multiply=function(e){if(this.isZero())return Ra;if(Co(e)||(e=Ml(e)),$a){var n=$a.mul(this.low,this.high,e.low,e.high);return Qn(n,$a.get_high(),this.unsigned)}if(e.isZero())return Ra;if(this.eq(go))return e.isOdd()?go:Ra;if(e.eq(go))return this.isOdd()?go:Ra;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(cU)&&e.lt(cU))return Pa(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,i=this.high&65535,s=this.low>>>16,o=this.low&65535,a=e.high>>>16,l=e.high&65535,c=e.low>>>16,u=e.low&65535,d=0,h=0,f=0,p=0;return p+=o*u,f+=p>>>16,p&=65535,f+=s*u,h+=f>>>16,f&=65535,f+=o*c,h+=f>>>16,f&=65535,h+=i*u,d+=h>>>16,h&=65535,h+=s*c,d+=h>>>16,h&=65535,h+=o*l,d+=h>>>16,h&=65535,d+=r*u+i*c+s*l+o*a,d&=65535,Qn(f<<16|p,d<<16|h,this.unsigned)};Ke.mul=Ke.multiply;Ke.divide=function(e){if(Co(e)||(e=Ml(e)),e.isZero())throw Error("division by zero");if($a){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var n=(this.unsigned?$a.div_u:$a.div_s)(this.low,this.high,e.low,e.high);return Qn(n,$a.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?_f:Ra;var r,i,s;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return _f;if(e.gt(this.shru(1)))return Wee;s=_f}else{if(this.eq(go)){if(e.eq(Pm)||e.eq(P3))return go;if(e.eq(go))return Pm;var o=this.shr(1);return r=o.div(e).shl(1),r.eq(Ra)?e.isNegative()?Pm:P3:(i=this.sub(e.mul(r)),s=r.add(i.div(e)),s)}else if(e.eq(go))return this.unsigned?_f:Ra;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=Ra}for(i=this;i.gte(e);){r=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),l=a<=48?1:yS(2,a-48),c=Pa(r),u=c.mul(e);u.isNegative()||u.gt(i);)r-=l,c=Pa(r,this.unsigned),u=c.mul(e);c.isZero()&&(c=Pm),s=s.add(c),i=i.sub(u)}return s};Ke.div=Ke.divide;Ke.modulo=function(e){if(Co(e)||(e=Ml(e)),$a){var n=(this.unsigned?$a.rem_u:$a.rem_s)(this.low,this.high,e.low,e.high);return Qn(n,$a.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};Ke.mod=Ke.modulo;Ke.rem=Ke.modulo;Ke.not=function(){return Qn(~this.low,~this.high,this.unsigned)};Ke.and=function(e){return Co(e)||(e=Ml(e)),Qn(this.low&e.low,this.high&e.high,this.unsigned)};Ke.or=function(e){return Co(e)||(e=Ml(e)),Qn(this.low|e.low,this.high|e.high,this.unsigned)};Ke.xor=function(e){return Co(e)||(e=Ml(e)),Qn(this.low^e.low,this.high^e.high,this.unsigned)};Ke.shiftLeft=function(e){return Co(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?Qn(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):Qn(0,this.low<<e-32,this.unsigned)};Ke.shl=Ke.shiftLeft;Ke.shiftRight=function(e){return Co(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?Qn(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):Qn(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};Ke.shr=Ke.shiftRight;Ke.shiftRightUnsigned=function(e){if(Co(e)&&(e=e.toInt()),e&=63,e===0)return this;var n=this.high;if(e<32){var r=this.low;return Qn(r>>>e|n<<32-e,n>>>e,this.unsigned)}else return e===32?Qn(n,0,this.unsigned):Qn(n>>>e-32,0,this.unsigned)};Ke.shru=Ke.shiftRightUnsigned;Ke.shr_u=Ke.shiftRightUnsigned;Ke.toSigned=function(){return this.unsigned?Qn(this.low,this.high,!1):this};Ke.toUnsigned=function(){return this.unsigned?this:Qn(this.low,this.high,!0)};Ke.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};Ke.toBytesLE=function(){var e=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};Ke.toBytesBE=function(){var e=this.high,n=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};Jn.fromBytes=function(e,n,r){return r?Jn.fromBytesLE(e,n):Jn.fromBytesBE(e,n)};Jn.fromBytesLE=function(e,n){return new Jn(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,n)};Jn.fromBytesBE=function(e,n){return new Jn(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],n)};const Hee=Ic(Uee),_De=jV({__proto__:null,default:Hee},[Uee]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pf=Hee||_De;function b5(t){return pf.fromString(t,!0,16)}const Kee=b5("c3a5c85c97cb3127"),df=b5("b492b66fbe98f273"),As=b5("9ae16a3b2f90404f");function R3(t){return t.xor(t.shru(47))}function Xee(t,e,n){const r=t.slice(e,e+n);return pf.fromBytes(Array.from(r),!0,!0)}function Bn(t,e){return Xee(t,e,8)}function uU(t,e){return Xee(t,e,4)}function Ci(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function Wd(t,e,n=b5("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let i=e.xor(r).mul(n);return i=i.xor(i.shru(47)),i=i.mul(n),i}function EDe(t,e,n,r,i,s){i=i.add(t),s=Ci(s.add(i).add(r),21);const o=i;return i=i.add(e),i=i.add(n),s=s.add(Ci(i,44)),[i.add(r),s.add(o)]}function Hw(t,e,n,r){return EDe(Bn(t,e),Bn(t,e+8),Bn(t,e+16),Bn(t,e+24),n,r)}function TDe(t,e=t.length){if(e>=8){const n=As.add(e*2),r=Bn(t,0).add(As),i=Bn(t,e-8),s=Ci(i,37).mul(n).add(r),o=Ci(r,25).add(i).mul(n);return Wd(s,o,n)}if(e>=4){const n=As.add(e*2),r=uU(t,0);return Wd(r.shl(3).add(e),uU(t,e-4),n)}if(e>0){const n=t[0],r=t[e>>1],i=t[e-1],s=n+(r<<8),o=e+(i<<2);return R3(As.mul(s).xor(Kee.mul(o))).mul(As)}return As}function $De(t,e=t.length){const n=As.add(e*2),r=Bn(t,0).mul(df),i=Bn(t,8),s=Bn(t,e-8).mul(n),o=Bn(t,e-16).mul(As);return Wd(Ci(r.add(i),43).add(Ci(s,30)).add(o),r.add(Ci(i.add(As),18)).add(s),n)}function PDe(t,e=t.length){const n=As.add(e*2),r=Bn(t,0).mul(As),i=Bn(t,8),s=Bn(t,e-8).mul(n),o=Bn(t,e-16).mul(As),a=Ci(r.add(i),43).add(Ci(s,30)).add(o),l=Wd(a,r.add(Ci(i.add(As),18)).add(s),n),c=Bn(t,16).mul(n),u=Bn(t,24),d=a.add(Bn(t,e-32)).mul(n),h=l.add(Bn(t,e-24)).mul(n);return Wd(Ci(c.add(u),43).add(Ci(d,30)).add(h),c.add(Ci(u.add(r),18)).add(d),n)}function RDe(t,e=t.length){const n=pf.fromNumber(81,!0);if(e<=32)return e<=16?TDe(t,e):$De(t,e);if(e<=64)return PDe(t,e);let r=n,i=n.mul(df).add(113),s=R3(i.mul(As).add(113)).mul(As),o=[pf.UZERO,pf.UZERO],a=[pf.UZERO,pf.UZERO];r=r.mul(As).add(Bn(t,0));let l=0;const c=(e-1>>6)*64,u=c+(e-1&63)-63;do r=Ci(r.add(i).add(o[0]).add(Bn(t,l+8)),37).mul(df),i=Ci(i.add(o[1]).add(Bn(t,l+48)),42).mul(df),r=r.xor(a[1]),i=i.add(o[0]).add(Bn(t,l+40)),s=Ci(s.add(a[0]),33).mul(df),o=Hw(t,l,o[1].mul(df),r.add(a[0])),a=Hw(t,l+32,s.add(a[1]),i.add(Bn(t,l+16))),[s,r]=[r,s],l+=64;while(l!==c);const d=df.add(s.and(255).shl(1));return l=u,a[0]=a[0].add(e-1&63),o[0]=o[0].add(a[0]),a[0]=a[0].add(o[0]),r=Ci(r.add(i).add(o[0]).add(Bn(t,l+8)),37).mul(d),i=Ci(i.add(o[1]).add(Bn(t,l+48)),42).mul(d),r=r.xor(a[1].mul(9)),i=i.add(o[0].mul(9).add(Bn(t,l+40))),s=Ci(s.add(a[0]),33).mul(d),o=Hw(t,l,o[1].mul(d),r.add(a[0])),a=Hw(t,l+32,s.add(a[1]),i.add(Bn(t,l+16))),[s,r]=[r,s],Wd(Wd(o[0],a[0],d).add(R3(i).mul(Kee)).add(s),Wd(o[1],a[1],d).add(r),d)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wh(t,e){return e==="string"?Gd(t):Ep([t],e)}function ODe(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function Ep(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=ap(t)),Ee().getBool("DEBUG")&&uDe(t,e),ODe(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let r=0;r<n.length;++r)Math.round(t[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${e}`)}function js(){return Ee().platform.now()}function Gd(t,e="utf-8"){return e=e||"utf-8",Ee().platform.encode(t,e)}function ih(t,e="utf-8"){return e=e||"utf-8",Ee().platform.decode(t,e)}function Wa(t){return Ee().platform.isTypedArray!=null?Ee().platform.isTypedArray(t):zee(t)}function ap(t,e=[],n=!1){if(e==null&&(e=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||wO(t)||t==null||Wa(t)&&n)e.push(t);else if(Array.isArray(t)||Wa(t))for(let r=0;r<t.length;++r)ap(t[r],e,n);else{let r=-1;for(const i of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(i)&&(r=Math.max(r,Number(i)));for(let i=0;i<=r;i++)ap(t[i],e,n)}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DDe{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new MDe)}profileKernel(e,n,r){let i;const s=()=>{i=r()};let o;const a=js();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(s);else{s();for(const c of i)c.dataSync();o=Promise.resolve({kernelMs:js()-a})}if(Ee().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let c=0;c<i.length;c++){const u=i[c];u.data().then(d=>{LDe(d,u.dtype,e)})}return{kernelName:e,outputs:i,inputs:n,timeMs:o.then(c=>c.kernelMs),extraInfo:o.then(c=>c.getExtraProfileInfo!=null?c.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:r,timeMs:i,inputs:s,extraInfo:o}=e;r.forEach(a=>{Promise.all([a.data(),i,o]).then(l=>{this.logger.logKernelProfile(n,a,l[0],l[1],s,l[2])})})}}function LDe(t,e,n){if(e!=="float32")return!1;for(let r=0;r<t.length;r++){const i=t[r];if(isNaN(i)||!isFinite(i))return console.warn(`Found ${i} in the result of '${n}'`),!0}return!1}class MDe{logKernelProfile(e,n,r,i,s,o){const a=typeof i=="number"?Hm(`${i}ms`,9):i.error,l=Hm(e,25),c=n.rank,u=n.size,d=Hm(n.shape.toString(),14);let h="";for(const f in s){const p=s[f];if(p!=null){const m=p.shape||n.shape,y=m.length;h+=`${f}: ${y}D ${y>0?m:""} `}}console.log(`%c${l}	%c${a}	%c${c}D ${d}	%c${u}	%c${h}	%c${o}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FDe(t,e,n){const r={},i={};for(let l=0;l<e.length;l++)r[e[l].id]=!0;for(let l=0;l<t.length;l++){const c=t[l],u=c.inputs;for(const d in u){const h=u[d];let f=!1;for(let p=0;p<e.length;p++)if(r[h.id]){c.outputs.forEach(m=>r[m.id]=!0),f=!0,i[c.id]=!0;break}if(f)break}}const s={};s[n.id]=!0;const o={};for(let l=t.length-1;l>=0;l--){const c=t[l],u=c.inputs;for(let d=0;d<c.outputs.length;d++)if(s[c.outputs[d].id]){for(const h in u)s[u[h].id]=!0,o[c.id]=!0;break}}const a=[];for(let l=0;l<t.length;l++){const c=t[l];if(i[c.id]&&o[c.id]){const u={};for(const h in c.inputs){const f=c.inputs[h];r[f.id]&&(u[h]=f)}const d=Object.assign({},c);d.inputs=u,d.outputs=c.outputs,a.push(d)}}return a}function jDe(t,e,n,r){for(let i=e.length-1;i>=0;i--){const s=e[i],o=[];if(s.outputs.forEach(l=>{const c=t[l.id];c!=null?o.push(c):o.push(null)}),s.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${s.kernelName}.`);const a=s.gradient(o);for(const l in s.inputs){if(!(l in a))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(a)}.`);const c=n(()=>a[l]());if(c.dtype!=="float32")throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${c.dtype}'`);const u=s.inputs[l];if(!xn(c.shape,u.shape))throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input '${l}' has shape '${c.shape}', which does not match the shape of the input '${u.shape}'`);if(t[u.id]==null)t[u.id]=c;else{const d=t[u.id];t[u.id]=r(d,c),d.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dU=20,xy=3,b_=7;function BDe(t,e,n,r){const i=wt(e),s=zDe(t,e,n,i),o=e.length,a=z2(t,e,n,i,s),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${o}`),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(a.map(c=>"    "+c).join(`
`)),l.join(`
`)}function zDe(t,e,n,r){const i=$e(e),s=r[r.length-1],o=new Array(s).fill(0),a=e.length,l=n==="complex64"?Ly(t):t;if(a>1)for(let c=0;c<i/s;c++){const u=c*s;for(let d=0;d<s;d++)o[d]=Math.max(o[d],Dy(l[u+d],0,n).length)}return o}function Dy(t,e,n){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(b_))} + ${parseFloat(t[1].toFixed(b_))}j`:Hv(t)?r=`'${t}'`:n==="bool"?r=Yee(t):r=parseFloat(t.toFixed(b_)).toString(),Hm(r,e)}function Yee(t){return t===0?"false":"true"}function z2(t,e,n,r,i,s=!0){const o=n==="complex64"?2:1,a=e[0],l=e.length;if(l===0){if(n==="complex64"){const m=Ly(t);return[Dy(m[0],0,n)]}return n==="bool"?[Yee(t[0])]:[t[0].toString()]}if(l===1){if(a>dU){const y=xy*o;let g=Array.from(t.slice(0,y)),v=Array.from(t.slice((a-xy)*o,a*o));return n==="complex64"&&(g=Ly(g),v=Ly(v)),["["+g.map((x,b)=>Dy(x,i[b],n)).join(", ")+", ..., "+v.map((x,b)=>Dy(x,i[a-xy+b],n)).join(", ")+"]"]}return["["+(n==="complex64"?Ly(t):Array.from(t)).map((y,g)=>Dy(y,i[g],n)).join(", ")+"]"]}const c=e.slice(1),u=r.slice(1),d=r[0]*o,h=[];if(a>dU){for(let m=0;m<xy;m++){const y=m*d,g=y+d;h.push(...z2(t.slice(y,g),c,n,u,i,!1))}h.push("...");for(let m=a-xy;m<a;m++){const y=m*d,g=y+d;h.push(...z2(t.slice(y,g),c,n,u,i,m===a-1))}}else for(let m=0;m<a;m++){const y=m*d,g=y+d;h.push(...z2(t.slice(y,g),c,n,u,i,m===a-1))}const f=l===2?",":"";h[0]="["+(a>0?h[0]+f:"");for(let m=1;m<h.length-1;m++)h[m]=" "+h[m]+f;let p=`,
`;for(let m=2;m<l;m++)p+=`
`;return h[h.length-1]=" "+h[h.length-1]+"]"+(s?"":p),h}function Ly(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zi{constructor(e,n,r){if(this.dtype=n,this.shape=e.slice(),this.size=$e(e),r!=null){const i=r.length;Z(i===this.size,()=>`Length of values '${i}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Rr(n,this.size),this.strides=wt(e)}set(e,...n){n.length===0&&(n=[0]),Z(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const i of e){if(i<0||i>=this.shape[n]){const s=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(s)}n++}let r=e[e.length-1];for(let i=0;i<e.length-1;++i)r+=this.strides[i]*e[i];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return gl().makeTensor(this.values,this.shape,this.dtype)}}let gl=null,dm=null;function UDe(t){gl=t}function VDe(t){dm=t}class ri{constructor(e,n,r,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=$e(e),this.strides=wt(e),this.dataId=r,this.id=i,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return dm.buffer(this.shape,this.dtype,e)}bufferSync(){return dm.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return Cl(this.shape,e,this.dtype==="complex64")}arraySync(){return Cl(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=gl().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(r=>ih(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),gl().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=gl().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>ih(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await gl().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),gl().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return dm.print(this,e)}clone(){return this.throwIfDisposed(),dm.clone(this)}toString(e=!1){const n=this.dataSync();return BDe(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),dm.cast(this,e)}variable(e=!0,n,r){return this.throwIfDisposed(),gl().makeVariable(this,e,n,r)}}Object.defineProperty(ri,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function Te(){return kO("Tensor",()=>ri)}Te();class vS extends ri{constructor(e,n,r,i){super(e.shape,e.dtype,e.dataId,i),this.trainable=n,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!xn(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);gl().disposeTensor(this),this.dataId=e.dataId,gl().incRef(this,null)}dispose(){gl().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(vS,Symbol.hasInstance,{value:t=>t instanceof ri&&t.assign!=null&&t.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var hU;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(hU||(hU={}));var O3;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(O3||(O3={}));var D3;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(D3||(D3={}));var L3;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(L3||(L3={}));var M3;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(M3||(M3={}));const WDe={float32:L3,int32:O3,bool:D3,complex64:M3};function bo(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return WDe[t][e]}function dD(t){return bo(t,"int32")}function Zee(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function Jee(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Or(t,e){if(t.dtype===e.dtype)return[t,e];const n=bo(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function Qee(t){const e=[];return ete(t,e,new Set),e}function ete(t,e,n){if(t==null)return;if(t instanceof ri){e.push(t);return}if(!GDe(t))return;const r=t;for(const i in r){const s=r[i];n.has(s)||(n.add(s),ete(s,e,n))}}function GDe(t){return Array.isArray(t)||typeof t=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w_(t){return t.kernelName!=null}class fU{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class bg{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new fU}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,r=1){return e in this.registryFactory?(zo(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:r}=this.initializeBackend(e);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new DDe(this.backendInstance),!0}setupRegisteredKernels(){iU(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){iU(e).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=n.factory();if(r&&!(r instanceof vO)&&typeof r.then=="function"){const i=++this.pendingBackendInitId,s=r.then(o=>i<this.pendingBackendInitId?!1:(this.registry[e]=o,this.pendingBackendInit=null,!0)).catch(o=>(i<this.pendingBackendInitId||(this.pendingBackendInit=null,zo(`Initialization of backend ${e} failed`),zo(o.stack||o.message)),!1));return this.pendingBackendInit=s,{success:s,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return zo(`Initialization of backend ${e} failed`),zo(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n],{success:i,asyncInit:s}=this.initializeBackend(r);if(s||i)return{name:r,asyncInit:s}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const r=this.state.tensorInfo.get(n),i=r.backend,s=this.readSync(n),o=i.refCount(n);i.disposeData(n,!0),r.backend=e,e.move(n,s,r.shape,r.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let r=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let i;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(i),()=>(i=n(),i instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),i))}scopedRun(e,n,r){e();try{const i=r();return n(),i}catch(i){throw n(),i}}nextTensorId(){return bg.nextTensorId++}nextVariableId(){return bg.nextVariableId++}clone(e){const n=ye.runKernel(px,{x:e}),r={x:e},i=o=>({x:()=>{const a="float32",l={x:o},c={dtype:a};return ye.runKernel(tx,l,c)}}),s=[];return this.addTapeNode(this.state.activeScope.name,r,[n],i,s,{}),n}runKernel(e,n,r){if(this.backendName==null&&this.backend,!(nU(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,r){const i=this.backend.numDataIds();let s=0;r.forEach(l=>{s+=l.dtype==="complex64"?3:1});const o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=i-n-s-o;if(a>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${a} data ids) after running '${e}'`)}runKernelFunc(e){let n,r=[];const i=this.isTapeOn(),s=this.state.numBytes,o=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let a;this.backendName==null&&this.backend;let l;const c=w_(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(w_(e)){const{kernelName:p,inputs:m,attrs:y}=e;this.backendName==null&&this.backend;const g=nU(p,this.backendName);Z(g!=null,()=>`Cannot find registered kernel '${p}' for backend '${this.backendName}'`),a=()=>{const v=this.backend.numDataIds();l=g.kernelFunc({inputs:m,attrs:y,backend:this.backend});const x=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(p,v,x);const b=x.map(S=>S.rank!=null?S:this.makeTensorFromTensorInfo(S));if(i){const S=this.getTensorsForGradient(p,m,b);r=this.saveTensorsForBackwardMode(S)}return b}}else{const{forwardFunc:p}=e,m=y=>{i&&(r=y.map(g=>this.keep(this.clone(g))))};a=()=>{const y=this.backend.numDataIds();l=this.tidy(()=>p(this.backend,m));const g=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(c,y,g),g}}const{inputs:u,attrs:d}=e,h=w_(e)?null:e.backwardsFunc;let f;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=a():(f=this.profiler.profileKernel(c,u,()=>a()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(f),n=f.outputs)}),i&&this.addTapeNode(c,u,n,h,r,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-o,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(u).map(p=>u[p]!=null?u[p].shape:null),outputShapes:n.map(p=>p.shape),kernelTimeMs:f.timeMs,extraInfo:f.extraInfo}),Array.isArray(l)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(e,n,r){const i=rU(e);if(i!=null){const s=i.inputsToSave||[],o=i.outputsToSave||[];let a;i.saveAllInputs?(Z(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),a=Object.keys(n).map(c=>n[c])):a=s.map(c=>n[c]);const l=r.filter((c,u)=>o[u]);return a.concat(l)}return[]}makeTensor(e,n,r,i){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",i=i||this.backend;let s=e;r==="string"&&Hv(e[0])&&(s=e.map(l=>Gd(l)));const o=i.write(s,n,r),a=new ri(n,r,o,this.nextTensorId());if(this.trackTensor(a,i),r==="string"){const l=this.state.tensorInfo.get(o),c=hDe(s);this.state.numBytes+=c-l.bytes,l.bytes=c}return a}makeTensorFromDataId(e,n,r,i){r=r||"float32";const s={dataId:e,shape:n,dtype:r};return this.makeTensorFromTensorInfo(s,i)}makeTensorFromTensorInfo(e,n){const{dataId:r,shape:i,dtype:s}=e,o=new ri(i,s,r,this.nextTensorId());return this.trackTensor(o,n),o}makeVariable(e,n=!0,r,i){r=r||this.nextVariableId().toString(),i!=null&&i!==e.dtype&&(e=e.cast(i));const s=new vS(e,n,r,this.nextTensorId());if(this.state.registeredVariables[s.name]!=null)throw new Error(`Variable with name ${s.name} was already registered`);return this.state.registeredVariables[s.name]=s,this.incRef(s,this.backend),s}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*fS(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof vS||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*fS(e.dtype);this.state.numBytes-=r}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(i=>i.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const i of this.state.activeProfile.kernels)i.kernelTimeMs=await i.kernelTimeMs,i.extraInfo=await i.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,r,i,s,o){const a={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:s},l=rU(e);l!=null&&(i=l.gradFunc),i!=null&&(a.gradient=c=>(c=c.map((u,d)=>{if(u==null){const h=r[d],f=os(h.size,h.dtype);return this.makeTensor(f,h.shape,h.dtype)}return u}),i(c.length>1?c:c[0],s,o))),this.state.activeTape.push(a)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=Qee(e),r=new Set(n.map(s=>s.id));for(let s=0;s<this.state.activeScope.track.length;s++){const o=this.state.activeScope.track[s];!o.kept&&!r.has(o.id)&&o.dispose()}const i=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(s=>{!s.kept&&s.scopeId===i.id&&this.track(s)})}gradients(e,n,r,i=!1){if(Z(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const s=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));Z(s instanceof ri,()=>"The result y returned by f() must be a tensor.");const o=FDe(this.state.activeTape,n,s);if(!i&&o.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const a={};a[s.id]=r??qDe(s.shape),jDe(a,o,c=>this.tidy(c),HDe);const l=n.map(c=>a[c.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(c=>{for(const u of c.saved)u.dispose()}),this.state.activeTape=null),{value:s,grads:l}})}customGrad(e){return Z(I3(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{Z(n.every(a=>a instanceof ri),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const i={};n.forEach((a,l)=>{i[l]=a});const s=(a,l)=>(r=e(...n,l),Z(r.value instanceof ri,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),Z(I3(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),o=(a,l)=>{const c=r.gradFunc(a,l),u=Array.isArray(c)?c:[c];Z(u.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),Z(u.every(h=>h instanceof ri),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const d={};return u.forEach((h,f)=>{d[f]=()=>h}),d};return this.runKernelFunc({forwardFunc:s,backwardsFunc:o,inputs:i})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}async time(e){const n=js(),r=await this.backend.time(e);return r.wallMs=js()-n,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new fU;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}bg.nextTensorId=0;bg.nextVariableId=0;function qDe(t){const e=bO($e(t),"float32");return ye.makeTensor(e,t,"float32")}function tte(){const t=yee();if(t._tfengine==null){const e=new mDe(t);t._tfengine=new bg(e)}return xDe(t._tfengine.ENV),UDe(()=>t._tfengine),t._tfengine}const ye=tte();function HDe(t,e){const n={a:t,b:e};return ye.runKernel(a0,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KDe(){return typeof navigator<"u"&&navigator!=null}function nte(t){if(t||KDe()){if(t||(t=navigator),t.product==="ReactNative")return!0;const e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){const n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function rte(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Js=Ee();Js.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});Js.registerFlag("IS_BROWSER",()=>rte());Js.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");Js.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));Js.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));Js.registerFlag("PROD",()=>!1);Js.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Js.getBool("DEBUG"));Js.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);Js.registerFlag("IS_TEST",()=>!1);Js.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>Js.getBool("DEBUG"));Js.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);Js.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);Js.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w5(t,e){let n=t;if(Wa(t))return e==="string"?[]:[t.length];if(Zee(t)){const i=t.channels||"RGBA";return[t.height,t.width*i.length]}else if(Jee(t))return[t.buffer.size/(e==null?4:fS(e))];if(!Array.isArray(t))return[];const r=[];for(;Array.isArray(n)||Wa(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&Ee().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&ite(t,r,[]),r}function ite(t,e,n){if(n=n||[],!Array.isArray(t)&&!Wa(t)){Z(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}Z(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),Z(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const r=e.slice(1);for(let i=0;i<t.length;++i)ite(t[i],r,n.concat(i))}function pU(t,e,n,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function se(t,e,n,r="numeric"){if(t instanceof Te())return pU(r,t.dtype,e,n),t;let i=s0(t);if(i!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),pU(r,i,e,n),t==null||!Wa(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const l=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${l}'`)}const s=w5(t,i);!Wa(t)&&!Array.isArray(t)&&(t=[t]);const a=i!=="string"?Ep(t,i):ap(t,[],!0);return ye.makeTensor(a,s,i)}function ste(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((s,o)=>se(s,`${e}[${o}]`,n,r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XDe="__op";function xe(t){const e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+XDe;const i=(...s)=>{ye.startScope(n);try{const o=r(...s);return wO(o)&&console.error("Cannot return a Promise inside of tidy."),ye.endScope(o),o}catch(o){throw ye.endScope(null),o}};return Object.defineProperty(i,"name",{value:n,configurable:!0}),i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YDe(t,e){const n=se(t,"real","complex"),r=se(e,"imag","complex");Xa(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const i={real:n,imag:r};return ye.runKernel(TO,i)}const wg=xe({complex_:YDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k5(t,e,n,r){if(r==null)r=s0(t);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(Jee(t)||Zee(t)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return ye.backend.createTensorFromGPUData(t,e||n,r)}if(!Wa(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){ju(e);const i=$e(e),s=$e(n);Z(i===s,()=>`Based on the provided shape, [${e}], the tensor should have ${i} values but has ${s}`);for(let o=0;o<n.length;++o){const a=n[o],l=o===n.length-1?a!==$e(e.slice(o)):!0;Z(n[o]===e[o]||!l,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!Wa(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=r!=="string"?Ep(t,r):ap(t,[],!0),ye.makeTensor(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ote(t,e,n){const r=w5(t,n);return k5(t,e,r,n)}class l0{static join(e){return new l0(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(r=>Wa(r)?r.buffer:r),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let n=0;for(let r=0;r<e.length;r++){const i=e[r];r!==e.length-1&&i.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const s=n+i.byteLength;this.shards.push({buffer:i,start:n,end:s}),n=s}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,n=isNaN(Number(n))?0:n,e=Math.max(0,e),n=Math.min(this.byteLength,n),n<=e)return new ArrayBuffer(0);const r=this.findShardForByte(e);if(r===-1)throw new Error(`Could not find start shard for byte ${e}`);const i=n-e,s=new ArrayBuffer(i),o=new Uint8Array(s);let a=0;for(let l=r;l<this.shards.length;l++){const c=this.shards[l],d=e+a-c.start,h=a,p=Math.min(n,c.end)-c.start,m=new Uint8Array(c.buffer,d,p-d);if(o.set(m,h),a+=m.length,n<c.end)break}return s}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function n(i){return e<i.start?-1:e>=i.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const r=ZDe(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}}function ZDe(t,e){let n=0,r=t.length;for(;n<=r;){const i=Math.floor((r-n)/2)+n,s=e(t[i]);if(s===0)return i;s<0?r=i:n=i+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zl(){return ye}function F3(){return ye.memory()}function Ne(t,e){return ye.tidy(t,e)}function Qt(t){Qee(t).forEach(n=>n.dispose())}function yc(t){return ye.keep(t)}function ate(t,e,n=1){return ye.registerBackend(t,e,n)}function JDe(){return ye.backend}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mU=4;async function gU(t,e){const n=[],r=[],i=Array.isArray(t)?t.map(o=>o.name):Object.keys(t);for(let o=0;o<i.length;++o){const a=i[o],l=Array.isArray(t)?t[o].tensor:t[a];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${a}': ${l.dtype}`);const c={name:a,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const u=new Promise(async d=>{const h=await l.bytes(),f=h.reduce((y,g)=>y+g.length,0)+mU*h.length,p=new Uint8Array(f);let m=0;for(let y=0;y<h.length;y++){const g=h[y],v=new Uint8Array(new Uint32Array([g.length]).buffer);p.set(v,m),m+=mU,p.set(g,m),m+=g.length}d(p)});r.push(u)}else r.push(l.data());e!=null&&(c.group=e),n.push(c)}const s=await Promise.all(r);return{data:QDe(s),specs:n}}function QDe(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(s=>{if(e+=s.byteLength,n.push(s.byteLength===s.buffer.byteLength?s:new s.constructor(s)),!(s instanceof Float32Array||s instanceof Int32Array||s instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${s.constructor.name}`)});const r=new Uint8Array(e);let i=0;return n.forEach(s=>{r.set(new Uint8Array(s.buffer),i),i+=s.byteLength}),r.buffer}const hD=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function yU(t){return hD?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function eLe(t){if(hD)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let r=0,i=e.length;r<i;r++)n+=String.fromCharCode(e[r]);return btoa(n)}function tLe(t){if(hD){const r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}function nLe(t){return l0.join(t)}function lte(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:yU(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:yU(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new l0(t.weightData).byteLength}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ss{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return Ss.instance==null&&(Ss.instance=new Ss),Ss.instance}static registerSaveRouter(e){Ss.getInstance().saveRouters.push(e)}static registerLoadRouter(e){Ss.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return Ss.getHandlers(e,"save")}static getLoadHandlers(e,n){return Ss.getHandlers(e,"load",n)}static getHandlers(e,n,r){const i=[];return(n==="load"?Ss.getInstance().loadRouters:Ss.getInstance().saveRouters).forEach(o=>{const a=o(e,r);a!==null&&i.push(a)}),i}}const rLe=t=>Ss.getSaveHandlers(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j3="tensorflowjs",B3=1,Ef="models_store",_d="model_info_store";function cte(){if(!Ee().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function z3(t){const e=t.result;e.createObjectStore(Ef,{keyPath:"modelPath"}),e.createObjectStore(_d,{keyPath:"modelPath"})}class lp{constructor(e){if(this.indexedDB=cte(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((r,i)=>{const s=this.indexedDB.open(j3,B3);s.onupgradeneeded=()=>z3(s),s.onsuccess=()=>{const o=s.result;if(n==null){const a=o.transaction(Ef,"readonly"),c=a.objectStore(Ef).get(this.modelPath);c.onsuccess=()=>{if(c.result==null)return o.close(),i(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(c.result.modelArtifacts)},c.onerror=u=>(o.close(),i(c.error)),a.oncomplete=()=>o.close()}else{n.weightData=l0.join(n.weightData);const a=lte(n),l=o.transaction(_d,"readwrite");let c=l.objectStore(_d),u;try{u=c.put({modelPath:this.modelPath,modelArtifactsInfo:a})}catch(h){return i(h)}let d;u.onsuccess=()=>{d=o.transaction(Ef,"readwrite");const h=d.objectStore(Ef);let f;try{f=h.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:a})}catch(p){return i(p)}f.onsuccess=()=>r({modelArtifactsInfo:a}),f.onerror=p=>{c=l.objectStore(_d);const m=c.delete(this.modelPath);m.onsuccess=()=>(o.close(),i(f.error)),m.onerror=y=>(o.close(),i(f.error))}},u.onerror=h=>(o.close(),i(u.error)),l.oncomplete=()=>{d==null?o.close():d.oncomplete=()=>o.close()}}},s.onerror=o=>i(s.error)})}}lp.URL_SCHEME="indexeddb://";const ute=t=>Ee().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(lp.URL_SCHEME)?iLe(t.slice(lp.URL_SCHEME.length)):null;Ss.registerSaveRouter(ute);Ss.registerLoadRouter(ute);function iLe(t){return new lp(t)}function sLe(t){return t.startsWith(lp.URL_SCHEME)?t.slice(lp.URL_SCHEME.length):t}class oLe{constructor(){this.indexedDB=cte()}async listModels(){return new Promise((e,n)=>{const r=this.indexedDB.open(j3,B3);r.onupgradeneeded=()=>z3(r),r.onsuccess=()=>{const i=r.result,s=i.transaction(_d,"readonly"),a=s.objectStore(_d).getAll();a.onsuccess=()=>{const l={};for(const c of a.result)l[c.modelPath]=c.modelArtifactsInfo;e(l)},a.onerror=l=>(i.close(),n(a.error)),s.oncomplete=()=>i.close()},r.onerror=i=>n(r.error)})}async removeModel(e){return e=sLe(e),new Promise((n,r)=>{const i=this.indexedDB.open(j3,B3);i.onupgradeneeded=()=>z3(i),i.onsuccess=()=>{const s=i.result,o=s.transaction(_d,"readwrite"),a=o.objectStore(_d),l=a.get(e);let c;l.onsuccess=()=>{if(l.result==null)return s.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const u=a.delete(e),d=()=>{c=s.transaction(Ef,"readwrite");const f=c.objectStore(Ef).delete(e);f.onsuccess=()=>n(l.result.modelArtifactsInfo),f.onerror=p=>r(l.error)};u.onsuccess=d,u.onerror=h=>(d(),s.close(),r(l.error))}},l.onerror=u=>(s.close(),r(l.error)),o.oncomplete=()=>{c==null?s.close():c.oncomplete=()=>s.close()}},i.onerror=s=>r(i.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nu="/",hm="tensorflowjs_models",dte="info",aLe="model_topology",lLe="weight_specs",cLe="weight_data",uLe="model_metadata";function hte(t){return{info:[hm,t,dte].join(nu),topology:[hm,t,aLe].join(nu),weightSpecs:[hm,t,lLe].join(nu),weightData:[hm,t,cLe].join(nu),modelMetadata:[hm,t,uLe].join(nu)}}function fte(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function dLe(t){const e=t.split(nu);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(nu)}function hLe(t){return t.startsWith(cp.URL_SCHEME)?t.slice(cp.URL_SCHEME.length):t}class cp{constructor(e){if(!Ee().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=hte(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),i=lte(e),s=l0.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,eLe(s));const o={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(o)),{modelArtifactsInfo:i}}catch{throw fte(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${i.modelTopologyBytes}, weightSpecsBytes=${i.weightSpecsBytes}, weightDataBytes=${i.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;const i=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(i==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=i;const s=this.LS.getItem(this.keys.modelMetadata);if(s!=null){const a=JSON.parse(s);n.format=a.format,n.generatedBy=a.generatedBy,n.convertedBy=a.convertedBy,a.signature!=null&&(n.signature=a.signature),a.userDefinedMetadata!=null&&(n.userDefinedMetadata=a.userDefinedMetadata),a.modelInitializer!=null&&(n.modelInitializer=a.modelInitializer),a.initializerSignature!=null&&(n.initializerSignature=a.initializerSignature),a.trainingConfig!=null&&(n.trainingConfig=a.trainingConfig)}const o=this.LS.getItem(this.keys.weightData);if(o==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=tLe(o),n}}cp.URL_SCHEME="localstorage://";const pte=t=>Ee().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(cp.URL_SCHEME)?fLe(t.slice(cp.URL_SCHEME.length)):null;Ss.registerSaveRouter(pte);Ss.registerLoadRouter(pte);function fLe(t){return new cp(t)}class pLe{constructor(){Z(Ee().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),Z(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=hm+nu,r=nu+dte;for(let i=0;i<this.LS.length;++i){const s=this.LS.key(i);if(s.startsWith(n)&&s.endsWith(r)){const o=dLe(s);e[o]=JSON.parse(this.LS.getItem(s))}}return e}async removeModel(e){e=hLe(e);const n=hte(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return fte(n),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vU="://";class Jl{constructor(){this.managers={}}static getInstance(){return Jl.instance==null&&(Jl.instance=new Jl),Jl.instance}static registerManager(e,n){Z(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(vU)&&(e=e.slice(0,e.indexOf(vU))),Z(e.length>0,()=>"scheme must not be an empty string.");const r=Jl.getInstance();Z(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=n}static getManager(e){const n=Jl.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(Jl.getInstance().managers)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mLe{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(typeof window>"u"||!Ee().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const i=this.functionRefs[r.data.index];i(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return zee(e)}}if(Ee().get("IS_BROWSER")){Ee().setPlatform("browser",new mLe);try{Jl.registerManager(cp.URL_SCHEME,new pLe)}catch{}try{Jl.registerManager(lp.URL_SCHEME,new oLe)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gLe={importFetch:()=>require("node-fetch")};let k_;class yLe{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return Ee().global.fetch!=null?Ee().global.fetch(e,n):(k_==null&&(k_=gLe.importFetch()),k_(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}Ee().get("IS_NODE")&&!Ee().get("IS_BROWSER")&&Ee().setPlatform("node",new yLe);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xt(t,e="float32",n){return e=e||"float32",ju(t),new zi(t,e,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vLe(t,e){const n=se(t,"x","cast");if(!dDe(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:n},i={dtype:e};return ye.runKernel(tx,r,i)}const Ye=xe({cast_:vLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xLe(t){const n={x:se(t,"x","clone","string_or_numeric")};return ye.runKernel(px,n)}const Bf=xe({clone_:xLe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bLe(t,e=!1){console.log(t.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */tte();const wLe={buffer:Xt,cast:Ye,clone:Bf,print:bLe};VDe(wLe);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kLe(t,e){let n=se(t,"a","add"),r=se(e,"b","add");[n,r]=Or(n,r);const i={a:n,b:r};return ye.runKernel(a0,i)}const ze=xe({add_:kLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SLe(t,e){let n=se(t,"a","floorDiv"),r=se(e,"b","floorDiv");[n,r]=Or(n,r);const i={a:n,b:r};return ye.runKernel(hx,i)}const mte=xe({floorDiv_:SLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CLe(t,e){let n=se(t,"a","div"),r=se(e,"b","div");if([n,r]=Or(n,r),n.dtype==="int32"&&r.dtype==="int32")return mte(n,r);const i={a:n,b:r},s={};return ye.runKernel(ox,i,s)}const yt=xe({div_:CLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NLe(t,e){let n=se(t,"a","mul"),r=se(e,"b","mul");[n,r]=Or(n,r);const i={a:n,b:r};return ye.runKernel(Sx,i)}const de=xe({mul_:NLe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ALe(t){const e=se(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return ye.runKernel(IN,n)}else{const n={x:e};return ye.runKernel(bN,n)}}const Si=xe({abs_:ALe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ILe(t){const n={x:se(t,"x","acos")};return ye.runKernel(Kv,n)}const _Le=xe({acos_:ILe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ELe(t){const n={x:se(t,"x","acosh")};return ye.runKernel(Xv,n)}const TLe=xe({acosh_:ELe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Le(t,e=null,n=!1){const i={x:se(t,"x","all","bool")},s={axis:e,keepDims:n};return ye.runKernel(CO,i,s)}const gte=xe({all_:$Le});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PLe(t,e=null,n=!1){const i={x:se(t,"x","any","bool")},s={axis:e,keepDims:n};return ye.runKernel(NO,i,s)}const U3=xe({any_:PLe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RLe(t,e=0){const r={x:se(t,"x","argMax")},i={axis:e};return ye.runKernel(wN,r,i)}const Q1=xe({argMax_:RLe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OLe(t,e=0){const r={x:se(t,"x","argMin")},i={axis:e};return ye.runKernel(kN,r,i)}const DLe=xe({argMin_:OLe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LLe(t){const n={x:se(t,"x","asin")};return ye.runKernel(Yv,n)}const MLe=xe({asin_:LLe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FLe(t){const n={x:se(t,"x","asinh")};return ye.runKernel(Zv,n)}const jLe=xe({asinh_:FLe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BLe(t){const n={x:se(t,"x","atan")};return ye.runKernel(Jv,n)}const zLe=xe({atan_:BLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ULe(t,e){let n=se(t,"a","atan2"),r=se(e,"b","atan2");[n,r]=Or(n,r);const i={a:n,b:r};return ye.runKernel(ex,i)}const VLe=xe({atan2_:ULe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WLe(t){const n={x:se(t,"x","atanh")};return ye.runKernel(Qv,n)}const GLe=xe({atanh_:WLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vx(t,e,n,r,i="NHWC",s){const o=t[3],a=[...e,o],l=zu(i);return Vi(t,a,n,s,r,null,null,l)}function Ya(t,e,n,r,i,s,o="channelsLast"){const[a,l]=ev(e);let c;if(o==="channelsLast")c=[a,l,t[3],t[3]];else if(o==="channelsFirst")c=[a,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return Vi(t,c,n,r,i,s,!1,o)}function Bu(t,e,n,r,i,s,o="NDHWC"){const[a,l,c]=V3(e);let u,d;if(o==="NDHWC")d="channelsLast",u=[a,l,c,t[4],t[4]];else if(o==="NCDHW")d="channelsFirst",u=[a,l,c,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return kh(t,u,n,r,i,!1,d,s)}function Vi(t,e,n,r,i,s,o=!1,a="channelsLast"){let[l,c,u,d]=[-1,-1,-1,-1];if(a==="channelsLast")[l,c,u,d]=t;else if(a==="channelsFirst")[l,d,c,u]=t;else throw new Error(`Unknown dataFormat ${a}`);const[h,f,,p]=e,[m,y]=ev(n),[g,v]=ev(r),x=Xm(h,g),b=Xm(f,v),{padInfo:S,outHeight:A,outWidth:E}=KLe(i,c,u,m,y,x,b,s,a),I=o?p*d:p;let T;return a==="channelsFirst"?T=[l,I,A,E]:a==="channelsLast"&&(T=[l,A,E,I]),{batchSize:l,dataFormat:a,inHeight:c,inWidth:u,inChannels:d,outHeight:A,outWidth:E,outChannels:I,padInfo:S,strideHeight:m,strideWidth:y,filterHeight:h,filterWidth:f,effectiveFilterHeight:x,effectiveFilterWidth:b,dilationHeight:g,dilationWidth:v,inShape:t,outShape:T,filterShape:e}}function kh(t,e,n,r,i,s=!1,o="channelsLast",a){let[l,c,u,d,h]=[-1,-1,-1,-1,-1];if(o==="channelsLast")[l,c,u,d,h]=t;else if(o==="channelsFirst")[l,h,c,u,d]=t;else throw new Error(`Unknown dataFormat ${o}`);const[f,p,m,,y]=e,[g,v,x]=V3(n),[b,S,A]=V3(r),E=Xm(f,b),I=Xm(p,S),T=Xm(m,A),{padInfo:O,outDepth:$,outHeight:R,outWidth:F}=XLe(i,c,u,d,g,v,x,E,I,T,a),L=s?y*h:y;let U;return o==="channelsFirst"?U=[l,L,$,R,F]:o==="channelsLast"&&(U=[l,$,R,F,L]),{batchSize:l,dataFormat:o,inDepth:c,inHeight:u,inWidth:d,inChannels:h,outDepth:$,outHeight:R,outWidth:F,outChannels:L,padInfo:O,strideDepth:g,strideHeight:v,strideWidth:x,filterDepth:f,filterHeight:p,filterWidth:m,effectiveFilterDepth:E,effectiveFilterHeight:I,effectiveFilterWidth:T,dilationDepth:b,dilationHeight:S,dilationWidth:A,inShape:t,outShape:U,filterShape:e}}function qLe(t,e,n,r,i){r==null&&(r=fD(t,e,n));const s=t[0],o=t[1],a=tv((s-e+2*r)/n+1,i),l=tv((o-e+2*r)/n+1,i);return[a,l]}function HLe(t,e,n,r,i,s){i==null&&(i=fD(t,e[0],r[0]));const o=[0,0,0,n];for(let a=0;a<3;a++)t[a]+2*i>=e[a]&&(o[a]=tv((t[a]-e[a]+2*i)/r[a]+1,s));return o}function fD(t,e,n,r=1){const i=Xm(e,r);return Math.floor((t[0]*(n-1)-n+i)/2)}function ev(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function V3(t){return typeof t=="number"?[t,t,t]:t}function Xm(t,e){return e<=1?t:t+(t-1)*(e-1)}function KLe(t,e,n,r,i,s,o,a,l){let c,u,d;if(typeof t=="number"){c={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const f=qLe([e,n],s,r,t,a);u=f[0],d=f[1]}else if(t==="same"){u=Math.ceil(e/r),d=Math.ceil(n/i);const h=Math.max(0,(u-1)*r+s-e),f=Math.max(0,(d-1)*i+o-n),p=Math.floor(h/2),m=h-p,y=Math.floor(f/2),g=f-y;c={top:p,bottom:m,left:y,right:g,type:"SAME"}}else if(t==="valid")c={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((e-s+1)/r),d=Math.ceil((n-o+1)/i);else if(typeof t=="object"){const h=l==="channelsLast"?t[1][0]:t[2][0],f=l==="channelsLast"?t[1][1]:t[2][1],p=l==="channelsLast"?t[2][0]:t[3][0],m=l==="channelsLast"?t[2][1]:t[3][1];c={top:h,bottom:f,left:p,right:m,type:h===0&&f===0&&p===0&&m===0?"VALID":"EXPLICIT"},u=tv((e-s+h+f)/r+1,a),d=tv((n-o+p+m)/i+1,a)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:c,outHeight:u,outWidth:d}}function XLe(t,e,n,r,i,s,o,a,l,c,u){let d,h,f,p;if(t==="valid"&&(t=0),typeof t=="number"){d={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const y=HLe([e,n,r,1],[a,l,c],1,[i,s,o],t,u);h=y[0],f=y[1],p=y[2]}else if(t==="same"){h=Math.ceil(e/i),f=Math.ceil(n/s),p=Math.ceil(r/o);const m=(h-1)*i+a-e,y=(f-1)*s+l-n,g=(p-1)*o+c-r,v=Math.floor(m/2),x=m-v,b=Math.floor(y/2),S=y-b,A=Math.floor(g/2),E=g-A;d={top:b,bottom:S,left:A,right:E,front:v,back:x,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:d,outDepth:h,outHeight:f,outWidth:p}}function tv(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function up(t){const[e,n,r]=ev(t);return e===1&&n===1&&r===1}function cs(t,e){return up(t)||up(e)}function dp(t){return ev(t).every(e=>e>0)}function zu(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function ro(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")Z(vg(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(i=>{Z(vg(i),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${i}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YLe(t,e){const r={x:se(t,"x","reshape","string_or_numeric")},i={shape:e};return ye.runKernel(a5,r,i)}const be=xe({reshape_:YLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZLe(t,e,n,r,i){const s=se(t,"x","avgPool","float32"),o=1;Z(cs(n,o),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`);let a=s,l=!1;s.rank===3&&(l=!0,a=be(s,[1,s.shape[0],s.shape[1],s.shape[2]])),Z(a.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`),ro("avgPool",r,i);const c={x:a},u={filterSize:e,strides:n,pad:r,dimRoundingMode:i};let d=ye.runKernel(SN,c,u);return d=Ye(d,s.dtype),l?be(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const pD=xe({avgPool_:ZLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JLe(t,e,n,r,i,s="NDHWC"){const o=se(t,"x","avgPool3d","float32");let a=o,l=!1;o.rank===4&&(l=!0,a=be(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),Z(a.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${a.rank}.`),Z(s==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`),Z(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),ro("avgPool3d",r,i);const c={x:a},u={filterSize:e,strides:n,pad:r,dimRoundingMode:i,dataFormat:s};let d=ye.runKernel(CN,c,u);return d=Ye(d,a.dtype),l?be(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const QLe=xe({avgPool3d_:JLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eMe(t,e=0){Z(t.length>=1,()=>"Pass at least one tensor to concat");const n=ste(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(s=>{if(s.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${s.dtype}. `)}),n.length===1)return Bf(n[0]);const r=n,i={axis:e};return ye.runKernel(_N,r,i)}const Ys=xe({concat_:eMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tMe(t,e,n=!1,r=!1){let i=se(t,"a","matMul"),s=se(e,"b","matMul");[i,s]=Or(i,s);const o={a:i,b:s},a={transposeA:n,transposeB:r};return ye.runKernel(NN,o,a)}const gn=xe({matMul_:tMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nMe(t){const n={x:se(t,"x","sigmoid","float32")};return ye.runKernel(Ox,n)}const c0=xe({sigmoid_:nMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rMe(t,e,n){const r=se(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const i={x:r},s={begin:e,size:n};return ye.runKernel(h5,i,s)}const zn=xe({slice_:rMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iMe(t){const n={x:se(t,"x","tanh","float32")};return ye.runKernel(Bx,n)}const S5=xe({tanh_:iMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sMe(t,e,n){const r=se(t,"x","batchToSpaceND"),i=e.reduce((a,l)=>a*l);Z(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),Z(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),Z(r.shape[0]%i===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${i}`);const s={x:r},o={blockShape:e,crops:n};return ye.runKernel(AN,s,o)}const mD=xe({batchToSpaceND_:sMe});function oMe(t){let e;return t.rank===0||t.rank===1?e=be(t,[1,1,1,t.size]):t.rank===2?e=be(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=be(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aMe(t,e,n,r,i,s){s==null&&(s=.001);const o=se(t,"x","batchNorm"),a=se(e,"mean","batchNorm"),l=se(n,"variance","batchNorm");let c;i!=null&&(c=se(i,"scale","batchNorm"));let u;r!=null&&(u=se(r,"offset","batchNorm")),Z(a.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),Z(u==null||a.rank===u.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),Z(c==null||a.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const h={x:oMe(o),scale:c,offset:u,mean:a,variance:l},f={varianceEpsilon:s},p=ye.runKernel(MN,h,f);return be(p,o.shape)}const C5=xe({batchNorm_:aMe});function lMe(t,e,n,r,i,s){const o=se(t,"x","batchNorm"),a=se(e,"mean","batchNorm"),l=se(n,"variance","batchNorm");let c;i!=null&&(c=se(i,"scale","batchNorm"));let u;return r!=null&&(u=se(r,"offset","batchNorm")),Z(o.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${o.rank}.`),Z(a.rank===2||a.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${a.rank}.`),Z(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),c!=null&&Z(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`),u!=null&&Z(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${u.rank}.`),C5(o,a,l,u,c,s)}const cMe=xe({batchNorm2d_:lMe});function uMe(t,e,n,r,i,s){const o=se(t,"x","batchNorm"),a=se(e,"mean","batchNorm"),l=se(n,"variance","batchNorm");let c;i!=null&&(c=se(i,"scale","batchNorm"));let u;return r!=null&&(u=se(r,"offset","batchNorm")),Z(o.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${o.rank}.`),Z(a.rank===3||a.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${a.rank}.`),Z(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),c!=null&&Z(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`),u!=null&&Z(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${u.rank}.`),C5(o,a,l,u,c,s)}const dMe=xe({batchNorm3d_:uMe});function hMe(t,e,n,r,i,s){const o=se(t,"x","batchNorm"),a=se(e,"mean","batchNorm"),l=se(n,"variance","batchNorm");let c;i!=null&&(c=se(i,"scale","batchNorm"));let u;return r!=null&&(u=se(r,"offset","batchNorm")),Z(o.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${o.rank}.`),Z(a.rank===4||a.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${a.rank}.`),Z(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),c!=null&&Z(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`),u!=null&&Z(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${u.rank}.`),C5(o,a,l,u,c,s)}const fMe=xe({batchNorm4d_:hMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pMe(t,e,n){const r=se(t,"x","bincount"),i=se(e,"weights","bincount");Z(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),Z(n>=0,()=>`size must be non-negative, but got ${n}.`),Z(i.size===r.size||i.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${i.shape}.`);const s={x:r,weights:i},o={size:n};return ye.runKernel(_O,s,o)}const mMe=xe({bincount_:pMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gMe(t,e){let n=se(t,"broadcastTo","x");const r=n.shape;if(ju(e),e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const c=n.shape.slice();for(;c.length<e.length;)c.unshift(1);n=be(n,c)}const i=n.shape,s=Array.from(e);for(let c=e.length-1;c>=0;c--)if(i[c]===e[c])s[c]=1;else if(n.shape[c]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(s.map((c,u)=>c>1?u:-1).filter(c=>c>=0).length===0)return Bf(n);const a={x:n},l={reps:s};return ye.runKernel(zx,a,l)}const a1=xe({broadcastTo_:gMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yMe(t){const n={x:se(t,"x","ceil","float32")};return ye.runKernel(nx,n)}const vMe=xe({ceil_:yMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N5(t,e,n){ju(t),n=n||s0(e);const r={shape:t,value:e,dtype:n};return ye.runKernel(VO,{},r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xMe(t,e,n){const r=se(t,"x","clipByValue");if(Z(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return N5(r.shape,e,r.dtype);const i={x:r},s={clipValueMin:e,clipValueMax:n};return ye.runKernel(rx,i,s)}const Jo=xe({clipByValue_:xMe});function bMe(t){return Ys(t,0)}const wMe=xe({concat1d_:bMe});function kMe(t,e){return Ys(t,e)}const SMe=xe({concat2d_:kMe});function CMe(t,e){return Ys(t,e)}const NMe=xe({concat3d_:CMe});function AMe(t,e){return Ys(t,e)}const IMe=xe({concat4d_:AMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Me(t,e,n,r,i="NHWC",s=[1,1],o){const a=se(t,"x","conv2d","float32"),l=se(e,"filter","conv2d","float32");let c=a,u=!1;a.rank===3&&(u=!0,c=be(a,[1,a.shape[0],a.shape[1],a.shape[2]])),Z(c.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${c.rank}.`),Z(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),ro("conv2d",r,o);const d=i==="NHWC"?c.shape[3]:c.shape[1];Z(d===l.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${l.shape[2]}.`),Z(cs(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),Z(dp(s),()=>"Error in conv2D: Dilated rates should be larger than 0."),Z(dp(n),()=>"Error in conv2D: Strides should be larger than 0.");const h={x:c,filter:l},f={strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:o},p=ye.runKernel(EN,h,f);return u?be(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const hp=xe({conv2d_:_Me});function EMe(t,e,n,r,i="NWC",s=1,o){const a=se(t,"x","conv1d"),l=se(e,"filter","conv1d");let c=a,u=!1;a.rank===2&&(u=!0,c=be(a,[1,a.shape[0],a.shape[1]])),Z(c.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${c.rank}.`),Z(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),ro("conv1d",r,o),Z(c.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${c.shape[2]}) must match input depth for filter ${l.shape[1]}.`),Z(cs(n,s),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${s}'`),Z(dp(s),()=>"Error in conv1D: Dilated rates should be larger than 0."),Z(dp(n),()=>"Error in conv1D: Stride should be larger than 0."),Z(i==="NWC",()=>`Error in conv1d: got dataFormat of ${i} but only NWC is currently supported.`);const d=be(l,[1,l.shape[0],l.shape[1],l.shape[2]]),h=be(c,[c.shape[0],1,c.shape[1],c.shape[2]]),y=hp(h,d,[1,n],r,"NHWC",[1,s],o);return u?be(y,[y.shape[2],y.shape[3]]):be(y,[y.shape[0],y.shape[2],y.shape[3]])}const yte=xe({conv1d_:EMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TMe(t,e,n,r,i,s="NHWC",o){Z(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let a=t,l=e,c=!1;e.rank===3&&(c=!0,l=be(e,[1,e.shape[0],e.shape[1],e.shape[2]]),a=[1,t[0],t[1],t[2]]),Z(a.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${a.length}.`),Z(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),Z(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const u=s==="NHWC"?a[3]:a[1],d=s==="NHWC"?l.shape[3]:l.shape[1];Z(u===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${u}) must match input depth for filter ${n.shape[2]}.`),Z(d===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${n.shape[3]}.`),ro("conv2dDerInput",i,o);const h={dy:l,filter:n},f={strides:r,pad:i,dataFormat:s,dimRoundingMode:o,inputShape:a},p=ye.runKernel(TN,h,f);return c?be(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const gD=xe({conv2DBackpropInput_:TMe});function $Me(t,e,n,r,i,s){const o=se(t,"x","conv2dTranspose"),a=se(e,"filter","conv2dTranspose");return gD(n,o,a,r,i,"NHWC",s)}const vte=xe({conv2dTranspose_:$Me});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PMe(t,e,n,r,i="NDHWC",s=[1,1,1]){const o=se(t,"x","conv3d"),a=se(e,"filter","conv3d");let l=o,c=!1;o.rank===4&&(c=!0,l=be(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),Z(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),Z(a.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${a.rank}.`),Z(l.shape[4]===a.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${a.shape[3]}.`),Z(cs(n,s),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),Z(i==="NDHWC",()=>`Error in conv3d: got dataFormat of ${i} but only NDHWC is currently supported.`),Z(dp(s),()=>"Error in conv3D: Dilated rates should be larger than 0."),Z(dp(n),()=>"Error in conv3D: Strides should be larger than 0.");const u={x:l,filter:a},d={strides:n,pad:r,dataFormat:i,dilations:s},h=ye.runKernel($N,u,d);return c?be(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const RMe=xe({conv3d_:PMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OMe(t,e,n,r,i){Z(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let s=t,o=e,a=!1;e.rank===4&&(a=!0,o=be(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),s=[1,t[0],t[1],t[2],t[3]]);const l=s[4],c=o.shape[4];Z(s.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${s.length}.`),Z(o.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${o.rank}`),Z(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),Z(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),Z(c===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${c}) must match output depth for filter ${n.shape[4]}.`);const u={dy:o,filter:n},d={pad:i,strides:r,inputShape:s},h=ye.runKernel(RO,u,d);return a?be(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const xte=xe({conv3DBackpropInput_:OMe});function DMe(t,e,n,r,i){const s=se(t,"x","conv3dTranspose"),o=se(e,"filter","conv3dTranspose");return xte(n,s,o,r,i)}const LMe=xe({conv3dTranspose_:DMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MMe(t){const n={x:se(t,"x","cos","float32")};return ye.runKernel(ix,n)}const yD=xe({cos_:MMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FMe(t){const n={x:se(t,"x","cosh","float32")};return ye.runKernel(sx,n)}const bte=xe({cosh_:FMe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jMe(t,e=0,n=!1,r=!1){const s={x:se(t,"x","cumprod")},o={axis:e,exclusive:n,reverse:r};return ye.runKernel(OO,s,o)}const W3=xe({cumprod_:jMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BMe(t,e=0,n=!1,r=!1){const s={x:se(t,"x","cumsum")},o={axis:e,exclusive:n,reverse:r};return ye.runKernel(PN,s,o)}const wte=xe({cumsum_:BMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zMe(t,e,n,r=!1){const i=se(t,"x","denseBincount"),s=se(e,"weights","denseBincount");Z(i.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${i.dtype}`),Z(i.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${i.rank}.`),Z(n>=0,()=>`size must be non-negative, but got ${n}.`),Z(s.size===i.size||s.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${i.shape}, weights shape: ${s.shape}.`);const o={x:i,weights:s},a={size:n,binaryOutput:r};return ye.runKernel(LO,o,a)}const xU=xe({denseBincount_:zMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UMe(t,e,n="NHWC"){const r=se(t,"x","depthToSpace","float32"),i=n==="NHWC"?r.shape[1]:r.shape[2],s=n==="NHWC"?r.shape[2]:r.shape[3],o=n==="NHWC"?r.shape[3]:r.shape[1];Z(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),Z(i*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${e}  for depthToSpace with input shape
    ${r.shape}`),Z(s*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${s} and ${e} for depthToSpace with input shape
        ${r.shape}`),Z(o%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${o} for depthToSpace with input shape ${r.shape}`);const a={x:r},l={blockSize:e,dataFormat:n};return ye.runKernel(MO,a,l)}const VMe=xe({depthToSpace_:UMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WMe(t,e,n,r,i="NHWC",s=[1,1],o){const a=se(t,"x","depthwiseConv2d","float32"),l=se(e,"filter","depthwiseConv2d","float32");let c=a,u=!1;a.rank===3&&(u=!0,c=be(a,[1,a.shape[0],a.shape[1],a.shape[2]])),Z(c.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${c.rank}.`),Z(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);const d=i==="NHWC"?c.shape[3]:c.shape[1];Z(d===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${d}) must match the inChannels dimension in filter ${l.shape[2]}.`),ro("depthwiseConv2d",r,o);const h={x:c,filter:l},f={strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:o},p=ye.runKernel(RN,h,f);return u?be(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const vD=xe({depthwiseConv2d_:WMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GMe(t,e,n,r,i=[1,1],s="NHWC"){const o=se(t,"x","dilation2d"),a=se(e,"filter","dilation2d");Z(o.rank===3||o.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${o.rank}.`),Z(a.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${a.rank}.`),Z(s==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${s}`);let l=o,c=!1;o.rank===3&&(l=be(o,[1,o.shape[0],o.shape[1],o.shape[2]]),c=!0),Z(l.shape[3]===a.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${a.shape[2]}`);const u={x:l,filter:a},d={strides:n,pad:r,dilations:i},h=ye.runKernel(ON,u,d);return c?be(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const qMe=xe({dilation2d_:GMe});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kg(t,e){const n=t.length,r=[];for(let i=0;i<n;i++){const s=n-1-i,o=t[s]||1;(e[e.length-1-i]||1)>1&&o===1&&r.unshift(s)}return r}function hi(t,e){const n=[];for(let r=0;r<e.length;r++){const i=t[t.length-r-1],s=e.length-r-1,o=e[s];(i==null||i===1&&o>1)&&n.unshift(s)}return n}function Ut(t,e){const n=Math.max(t.length,e.length),r=new Array(n);for(let i=0;i<n;i++){let s=t[t.length-i-1];s==null&&(s=1);let o=e[e.length-i-1];if(o==null&&(o=1),s===1)r[n-i-1]=o;else if(o===1)r[n-i-1]=s;else if(s!==o){const a=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(a)}else r[n-i-1]=s}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HMe(t,e){let n=se(t,"a","equal","string_or_numeric"),r=se(e,"b","equal","string_or_numeric");[n,r]=Or(n,r),Ut(n.shape,r.shape);const i={a:n,b:r};return ye.runKernel(DN,i)}const Cc=xe({equal_:HMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KMe(t,e,n){const r=se(e,"a","where"),i=se(n,"b","where"),s=se(t,"condition","where","bool"),o=Ut(Ut(s.shape,r.shape),i.shape),a=a1(s,o),l=a1(r,o),c=a1(i,o),u={condition:a,t:l,e:c};return ye.runKernel(d5,u)}const Ts=xe({where_:KMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XMe(t){const n={x:se(t,"x","zerosLike")};return ye.runKernel(x5,n)}const cn=xe({zerosLike_:XMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YMe(t,e){let n=se(t,"a","div"),r=se(e,"b","div");[n,r]=Or(n,r);const i=yt(n,r),s=cn(i),o=Cc(r,s);return Ts(o,s,i)}const ZMe=xe({divNoNan_:YMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JMe(t,e){const n=se(t,"t1","dot"),r=se(e,"t2","dot");Z((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const i=n.rank===1?n.size:n.shape[1],s=r.rank===1?r.size:r.shape[0];if(Z(i===s,()=>`Error in dot: inner dimensions of inputs must match, but got ${i} and ${s}.`),n.rank===1&&r.rank===1){const o=be(n,[1,-1]),a=be(r,[-1,1]),l=gn(o,a);return be(l,[])}else if(n.rank===1&&r.rank===2){const o=be(n,[1,-1]),a=be(r,[r.shape[0],r.shape[1]]),l=gn(o,a);return be(l,[l.size])}else if(n.rank===2&&r.rank===1){const o=be(r,[-1,1]),a=gn(n,o);return be(a,[a.size])}else{const o=be(r,[r.shape[0],r.shape[1]]);return gn(n,o)}}const QMe=xe({dot_:JMe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eFe(t,...e){const n=e.map((i,s)=>se(i,`tensors${s}`,"einsum")),r={equation:t};return ye.runKernel(BO,n,r)}const by=xe({einsum_:eFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tFe(t){const n={x:se(t,"x","elu","float32")};return ye.runKernel(ax,n)}const A5=xe({elu_:tFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nFe(t){let e=se(t,"x","erf");Z(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=Ye(e,"float32"));const n={x:e};return ye.runKernel(lx,n)}const kte=xe({erf_:nFe});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xD(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function Ste(t,e,n){const r=t.length+e.length,i=[];let s=0,o=0;for(let a=0;a<r;a++)n.indexOf(a)===-1?i.push(t[s++]):i.push(e[o++]);return i}function Pi(t,e){const n=[],r=t.length;for(let s=0;s<r;s++)e.indexOf(s)===-1&&n.push(t[s]);const i=e.map(s=>t[s]);return[n,i]}function Dr(t,e){const n=e.map(r=>1);return Ste(t,n,e)}function Wi(t,e,n){Z(xD(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function yr(t,e){if(xD(t,e))return null;const n=[];for(let r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(r=>n.push(r)),n}function Sh(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function Mr(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rFe(t,e=null,n=!1){const i={x:se(t,"x","max")},s={reductionIndices:e,keepDims:n};return ye.runKernel(HN,i,s)}const Nl=xe({max_:rFe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iFe(t,e=null,n=!1){const i={x:se(t,"x","min")},s={axis:e,keepDims:n};return ye.runKernel(ZN,i,s)}const xS=xe({min_:iFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sFe(t,e){let n=se(t,"base","pow"),r=se(e,"exp","pow");[n,r]=Or(n,r);const i={a:n,b:r};return ye.runKernel(Cx,i)}const fp=xe({pow_:sFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rt(t,e){if((Wa(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&Wa(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return k5(t,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oFe(t){const n={x:se(t,"x","sqrt","float32")};return ye.runKernel(Lx,n)}const as=xe({sqrt_:oFe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aFe(t){const e=se(t,"x","square"),n={};return ye.runKernel("Square",{x:e},n)}const Vn=xe({square_:aFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lFe(t,e=null,n=!1){let r=se(t,"x","sum");r.dtype==="bool"&&(r=Ye(r,"int32"));const i={x:r},s={axis:e,keepDims:n};return ye.runKernel(f5,i,s)}const lt=xe({sum_:lFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cFe(t,e="euclidean",n=null,r=!1){t=se(t,"x","norm");const i=Cte(t,e,n);let s=i.shape;if(r){const o=Yt(n,t.shape);s=Dr(i.shape,o)}return be(i,s)}function Cte(t,e,n=null){if(t.rank===0)return Si(t);if(t.rank!==1&&n===null)return Cte(be(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return lt(Si(t),n);if(e===1/0)return Nl(Si(t),n);if(e===-1/0)return xS(Si(t),n);if(e==="euclidean"||e===2)return as(lt(fp(Si(t),Rt(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return Nl(lt(Si(t),n[0]),n[1]-1);if(e===1/0)return Nl(lt(Si(t),n[1]),n[0]);if(e===-1/0)return xS(lt(Si(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return as(lt(Vn(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const I5=xe({norm_:cFe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uFe(t,e=null,n=!1){return I5(t,"euclidean",e,n)}const dFe=xe({euclideanNorm_:uFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hFe(t){const n={x:se(t,"x","exp")};return ye.runKernel(cx,n)}const Qo=xe({exp_:hFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fFe(t,e=0){const n=se(t,"x","expandDims","string_or_numeric");Z(e<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},i={dim:e};return ye.runKernel(LN,r,i)}const Us=xe({expandDims_:fFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pFe(t){const n={x:se(t,"x","expm1")};return ye.runKernel(ux,n)}const mFe=xe({expm1_:pFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gFe(t,e){const n=se(t,"x","tile","string_or_numeric");Z(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);const r={x:n},i={reps:e};return ye.runKernel(zx,r,i)}const wl=xe({tile_:gFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yFe(t,e,n,r="float32"){e==null&&(e=t);const i=Xt([t,e],r),s=t<=e?t:e;for(let a=0;a<s;++a)i.set(1,a,a);const o=be(i.toTensor(),[t,e]);if(n==null)return o;if(n.length===1)return wl(Us(o,0),[n[0],1,1]);if(n.length===2)return wl(Us(Us(o,0),0),[n[0],n[1],1,1]);if(n.length===3)return wl(Us(Us(Us(o,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const Nte=xe({eye_:yFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vFe(t){const n={x:se(t,"x","floor","float32")};return ye.runKernel(dx,n)}const _5=xe({floor_:vFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xFe(t,e,n=0,r=0){const i=se(t,"x","gather"),s=se(e,"indices","gather","int32"),o={x:i,indices:s},a={axis:n,batchDims:r};return ye.runKernel(FN,o,a)}const bD=xe({gather_:xFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bFe(t,e){let n=se(t,"a","greater","string_or_numeric"),r=se(e,"b","greater","string_or_numeric");[n,r]=Or(n,r),Ut(n.shape,r.shape);const i={a:n,b:r};return ye.runKernel(jN,i)}const ra=xe({greater_:bFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wFe(t,e){let n=se(t,"a","greaterEqual","string_or_numeric"),r=se(e,"b","greaterEqual","string_or_numeric");[n,r]=Or(n,r),Ut(n.shape,r.shape);const i={a:n,b:r};return ye.runKernel(fx,i)}const Tp=xe({greaterEqual_:wFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kFe(t){const n={input:se(t,"input","imag")};return ye.runKernel(qO,n)}const wD=xe({imag_:kFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SFe(t){const n={x:se(t,"x","isFinite")};return ye.runKernel(mx,n)}const CFe=xe({isFinite_:SFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NFe(t){const n={x:se(t,"x","isInf")};return ye.runKernel(gx,n)}const AFe=xe({isInf_:NFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IFe(t){const n={x:se(t,"x","isNaN")};return ye.runKernel(yx,n)}const _Fe=xe({isNaN_:IFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EFe(t,e=.2){const r={x:se(t,"x","leakyRelu")},i={alpha:e};return ye.runKernel(BN,r,i)}const kD=xe({leakyRelu_:EFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TFe(t,e){let n=se(t,"a","less","string_or_numeric"),r=se(e,"b","less","string_or_numeric");[n,r]=Or(n,r),Ut(n.shape,r.shape);const i={a:n,b:r};return ye.runKernel(zN,i)}const bS=xe({less_:TFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Fe(t,e){let n=se(t,"a","lessEqual","string_or_numeric"),r=se(e,"b","lessEqual","string_or_numeric");[n,r]=Or(n,r),Ut(n.shape,r.shape);const i={a:n,b:r};return ye.runKernel(UN,i)}const u0=xe({lessEqual_:$Fe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PFe(t,e=5,n=1,r=1,i=.5){const s=se(t,"x","localResponseNormalization");Z(s.rank===4||s.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${s.rank}.`),Z(vg(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let o=s,a=!1;s.rank===3&&(a=!0,o=be(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const l={x:o},c={depthRadius:e,bias:n,alpha:r,beta:i},u=ye.runKernel(qN,l,c);return a?be(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const RFe=xe({localResponseNormalization_:PFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OFe(t){const n={x:se(t,"x","log","float32")};return ye.runKernel(vx,n)}const Ga=xe({log_:OFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DFe(t){const n={x:se(t,"x","log1p")};return ye.runKernel(xx,n)}const SD=xe({log1p_:DFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LFe(t,e){Z(I3(t),()=>"The f passed in variableGrads(f) must be a function"),Z(e==null||Array.isArray(e)&&e.every(c=>c instanceof vS),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const c in ye.registeredVariables)e.push(ye.registeredVariables[c])}const r=n?e.filter(c=>!c.trainable):null,i=e.length;e=e.filter(c=>c.trainable),Z(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${i} variables is trainable.`);const s=!0,{value:o,grads:a}=ye.gradients(t,e,null,s);Z(a.some(c=>c!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),Z(o.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${o.rank} tensor`);const l={};return e.forEach((c,u)=>{a[u]!=null&&(l[c.name]=a[u])}),r!=null&&r.forEach(c=>l[c.name]=null),{value:o,grads:l}}function pp(t){return ye.customGrad(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MFe(t){const n={x:se(t,"x","neg")};return ye.runKernel(QN,n)}const or=xe({neg_:MFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FFe(t){const n={x:se(t,"x","softplus")};return ye.runKernel(Dx,n)}const Wx=xe({softplus_:FFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jFe(t){const e=se(t,"x","logSigmoid");return pp(r=>({value:or(Wx(or(r))),gradFunc:o=>de(o,c0(or(r)))}))(e)}const BFe=xe({logSigmoid_:jFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zFe(t,e){let n=se(t,"a","sub"),r=se(e,"b","sub");[n,r]=Or(n,r);const i={a:n,b:r};return ye.runKernel(Fx,i)}const nt=xe({sub_:zFe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UFe(t,e=-1){const n=se(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return pp((i,s)=>{const a=Nl(i,e,!0),l=nt(i,a),c=nt(Ye(l,"float32"),Ga(lt(Qo(l),e,!0)));return s([c]),{value:c,gradFunc:(d,h)=>{const[f]=h,p=!0,m=Qo(f);return nt(d,de(lt(d,e,p),m))}}})(n)}const Ate=xe({logSoftmax_:UFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VFe(t,e=null,n=!1){const r=se(t,"x","logSumExp"),i=Yt(e,r.shape),s=Nl(r,i,!0),o=nt(r,s),a=Qo(o),l=lt(a,i),c=Ga(l),u=ze(be(s,c.shape),c);if(n){const d=Dr(u.shape,i);return be(u,d)}return u}const CD=xe({logSumExp_:VFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WFe(t,e){const n=se(t,"a","logicalAnd","bool"),r=se(e,"b","logicalAnd","bool");Ut(n.shape,r.shape);const i={a:n,b:r};return ye.runKernel(VN,i)}const Au=xe({logicalAnd_:WFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GFe(t){const n={x:se(t,"x","logicalNot","bool")};return ye.runKernel(WN,n)}const ND=xe({logicalNot_:GFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qFe(t,e){const n=se(t,"a","logicalOr","bool"),r=se(e,"b","logicalOr","bool");Ut(n.shape,r.shape);const i={a:n,b:r};return ye.runKernel(GN,i)}const Ite=xe({logicalOr_:qFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HFe(t,e){const n=se(t,"a","logicalXor","bool"),r=se(e,"b","logicalXor","bool");return Ut(n.shape,r.shape),Au(Ite(t,e),ND(Au(t,e)))}const KFe=xe({logicalXor_:HFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XFe(t,e,n,r,i){const s=se(t,"x","maxPool"),o=1;let a=s,l=!1;s.rank===3&&(l=!0,a=be(s,[1,s.shape[0],s.shape[1],s.shape[2]])),Z(a.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`),Z(cs(n,o),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`),ro("maxPool",r,i);const c={x:a},u={filterSize:e,strides:n,pad:r,dimRoundingMode:i},d=ye.runKernel(KN,c,u);return l?be(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const AD=xe({maxPool_:XFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YFe(t,e=[1,1,1],n,r,i,s="NDHWC"){const o=se(t,"x","maxPool3d");let a=o,l=!1;o.rank===4&&(l=!0,a=be(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),Z(a.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${a.rank}.`),Z(s==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`),ro("maxPool3d",r,i);const c={x:a},u={filterSize:e,strides:n,pad:r,dimRoundingMode:i,dataFormat:s},d=ye.runKernel(XN,c,u);return l?be(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const ZFe=xe({maxPool3d_:YFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JFe(t,e){let n=se(t,"a","maximum"),r=se(e,"b","maximum");[n,r]=Or(n,r),n.dtype==="bool"&&(n=Ye(n,"int32"),r=Ye(r,"int32")),Ut(n.shape,r.shape);const i={a:n,b:r};return ye.runKernel(bx,i)}const Ch=xe({maximum_:JFe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QFe(t,e=null,n=!1){const i={x:se(t,"x","mean")},s={axis:e,keepDims:n};return ye.runKernel(YN,i,s)}const Pr=xe({mean_:QFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ni(t,e="float32"){if(ju(t),e==="complex64"){const r=Ni(t,"float32"),i=Ni(t,"float32");return wg(r,i)}const n=os($e(t),e);return ye.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uu(t,e="float32"){if(ju(t),e==="complex64"){const r=Uu(t,"float32"),i=Ni(t,"float32");return wg(r,i)}const n=bO($e(t),e);return ye.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e6e(t,e){let n=se(t,"a","minimum"),r=se(e,"b","minimum");[n,r]=Or(n,r),n.dtype==="bool"&&(n=Ye(n,"int32"),r=Ye(r,"int32")),Ut(n.shape,r.shape);const i={a:n,b:r};return ye.runKernel(wx,i)}const Sg=xe({minimum_:e6e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t6e(t,e,n){Z(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=se(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");Z(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const i=n==="reflect"?1:0;for(let a=0;a<r.rank;a++)Z(e[a].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Z(e[a][0]>=0&&e[a][0]<=r.shape[a]-i&&e[a][1]>=0&&e[a][1]<=r.shape[a]-i,()=>`Padding in dimension ${a} cannot be greater than or equal to ${r.shape[a]-i} or less than 0 for input of shape ${r.shape}`);const s={paddings:e,mode:n},o={x:r};return ye.runKernel(JN,o,s)}const n6e=xe({mirrorPad_:t6e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r6e(t,e){let n=se(t,"a","mod"),r=se(e,"b","mod");[n,r]=Or(n,r);const i={a:n,b:r};return ye.runKernel(kx,i)}const i6e=xe({mod_:r6e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s6e(t,e=null,n=!1){t=se(t,"x","moments");const r=Yt(e,t.shape),i=Pr(t,r,n);let s=i.shape;n||(s=Dr(i.shape,r));const o=Vn(nt(Ye(t,"float32"),be(i,s))),a=Pr(o,r,n);return{mean:i,variance:a}}const ID=xe({moments_:s6e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o6e(t,e){let n=se(t,"a","notEqual","string_or_numeric"),r=se(e,"b","notEqual","string_or_numeric");[n,r]=Or(n,r),Ut(n.shape,r.shape);const i={a:n,b:r};return ye.runKernel(e5,i)}const nv=xe({notEqual_:o6e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a6e(t,e,n=1,r=0,i="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const o={indices:se(t,"indices","oneHot","int32")},a={dtype:i,depth:e,onValue:n,offValue:r};return ye.runKernel(n5,o,a)}const _te=xe({oneHot_:a6e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l6e(t){const n={x:se(t,"x","onesLike")};return ye.runKernel(t5,n)}const qa=xe({onesLike_:l6e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c6e(t,e,n=0){const r=se(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const i={paddings:e,constantValue:n},s={x:r};return ye.runKernel(i5,s,i)}const _D=xe({pad_:c6e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u6e(t,e,n){const r=se(t,"x","spaceToBatchND");Z(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),Z(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),Z(r.shape.reduce((o,a,l)=>l>0&&l<=e.length?o&&(a+n[l-1][0]+n[l-1][1])%e[l-1]===0:o,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const i={x:r},s={blockShape:e,paddings:n};return ye.runKernel(p5,i,s)}const ED=xe({spaceToBatchND_:u6e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d6e(t,e,n,r,i,s,o){i==null&&(i=[1,1]),s==null&&(s=1),r===0&&(r="valid");const a=se(t,"x","maxPool");let l=a,c=!1;a.rank===3&&(c=!0,l=be(a,[1,a.shape[0],a.shape[1],a.shape[2]])),Z(cs(s,i),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${s} and dilations '${i}'`);const u=Ya(l.shape,e,s,i,r),d=[u.dilationHeight,u.dilationWidth];let h;r==="same"?h=f6e([u.filterHeight,u.filterWidth],d):h=[[0,0],[0,0]];const f=d[0]===1&&d[1]===1,[p,m]=h6e([u.inHeight,u.inWidth],d,h),y=f?r:"valid",g=f?l:ED(l,d,p),x=(n==="avg"?()=>pD(g,e,s,y,o):()=>AD(g,e,s,y,o))(),b=f?x:mD(x,d,m);return c?be(b,[b.shape[1],b.shape[2],b.shape[3]]):b}function h6e(t,e,n){const r=n.map(u=>u[0]),i=n.map(u=>u[1]),s=t.concat(r,i),o=e.map((u,d)=>(u-s[d]%u)%u),a=i.map((u,d)=>u+o[d]),l=e.map((u,d)=>[r[d],a[d]]),c=e.map((u,d)=>[0,o[d]]);return[l,c]}function f6e(t,e){const r=t.map((o,a)=>o+(o-1)*(e[a]-1)).map(o=>o-1),i=r.map(o=>Math.floor(o/2)),s=r.map((o,a)=>o-i[a]);return r.map((o,a)=>[i[a],s[a]])}const p6e=xe({pool_:d6e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m6e(t,e){const n=se(t,"x","prelu"),r=se(e,"alpha","prelu"),i={x:n,alpha:r};return ye.runKernel(s5,i)}const TD=xe({prelu_:m6e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g6e(t,e=null,n=!1){let r=se(t,"x","prod");r.dtype==="bool"&&(r=Ye(r,"int32"));const i={x:r},s={axis:e,keepDims:n};return ye.runKernel(o5,i,s)}const y6e=xe({prod_:g6e});var $D={exports:{}};$D.exports;(function(t){(function(e,n,r){function i(l){var c=this,u=a();c.next=function(){var d=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=d-(c.c=d|0)},c.c=1,c.s0=u(" "),c.s1=u(" "),c.s2=u(" "),c.s0-=u(l),c.s0<0&&(c.s0+=1),c.s1-=u(l),c.s1<0&&(c.s1+=1),c.s2-=u(l),c.s2<0&&(c.s2+=1),u=null}function s(l,c){return c.c=l.c,c.s0=l.s0,c.s1=l.s1,c.s2=l.s2,c}function o(l,c){var u=new i(l),d=c&&c.state,h=u.next;return h.int32=function(){return u.next()*4294967296|0},h.double=function(){return h()+(h()*2097152|0)*11102230246251565e-32},h.quick=h,d&&(typeof d=="object"&&s(d,u),h.state=function(){return s(u,{})}),h}function a(){var l=4022871197,c=function(u){u=String(u);for(var d=0;d<u.length;d++){l+=u.charCodeAt(d);var h=.02519603282416938*l;l=h>>>0,h-=l,h*=l,l=h>>>0,h-=l,l+=h*4294967296}return(l>>>0)*23283064365386963e-26};return c}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.alea=o})(wp,t,!1)})($D);var v6e=$D.exports,PD={exports:{}};PD.exports;(function(t){(function(e,n,r){function i(a){var l=this,c="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var d=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^d^d>>>8},a===(a|0)?l.x=a:c+=a;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,l.next()}function s(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function o(a,l){var c=new i(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var h=c.next()>>>11,f=(c.next()>>>0)/4294967296,p=(h+f)/(1<<21);while(p===0);return p},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&s(u,c),d.state=function(){return s(c,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor128=o})(wp,t,!1)})(PD);var x6e=PD.exports,RD={exports:{}};RD.exports;(function(t){(function(e,n,r){function i(a){var l=this,c="";l.next=function(){var d=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(d^d<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(a|0)?l.x=a:c+=a;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,u==c.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function s(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function o(a,l){var c=new i(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var h=c.next()>>>11,f=(c.next()>>>0)/4294967296,p=(h+f)/(1<<21);while(p===0);return p},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&s(u,c),d.state=function(){return s(c,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorwow=o})(wp,t,!1)})(RD);var b6e=RD.exports,OD={exports:{}};OD.exports;(function(t){(function(e,n,r){function i(a){var l=this;l.next=function(){var u=l.x,d=l.i,h,f;return h=u[d],h^=h>>>7,f=h^h<<24,h=u[d+1&7],f^=h^h>>>10,h=u[d+3&7],f^=h^h>>>3,h=u[d+4&7],f^=h^h<<7,h=u[d+7&7],h=h^h<<13,f^=h^h<<9,u[d]=f,l.i=d+1&7,f};function c(u,d){var h,f=[];if(d===(d|0))f[0]=d;else for(d=""+d,h=0;h<d.length;++h)f[h&7]=f[h&7]<<15^d.charCodeAt(h)+f[h+1&7]<<13;for(;f.length<8;)f.push(0);for(h=0;h<8&&f[h]===0;++h);for(h==8?f[7]=-1:f[h],u.x=f,u.i=0,h=256;h>0;--h)u.next()}c(l,a)}function s(a,l){return l.x=a.x.slice(),l.i=a.i,l}function o(a,l){a==null&&(a=+new Date);var c=new i(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var h=c.next()>>>11,f=(c.next()>>>0)/4294967296,p=(h+f)/(1<<21);while(p===0);return p},d.int32=c.next,d.quick=d,u&&(u.x&&s(u,c),d.state=function(){return s(c,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorshift7=o})(wp,t,!1)})(OD);var w6e=OD.exports,DD={exports:{}};DD.exports;(function(t){(function(e,n,r){function i(a){var l=this;l.next=function(){var u=l.w,d=l.X,h=l.i,f,p;return l.w=u=u+1640531527|0,p=d[h+34&127],f=d[h=h+1&127],p^=p<<13,f^=f<<17,p^=p>>>15,f^=f>>>12,p=d[h]=p^f,l.i=h,p+(u^u>>>16)|0};function c(u,d){var h,f,p,m,y,g=[],v=128;for(d===(d|0)?(f=d,d=null):(d=d+"\0",f=0,v=Math.max(v,d.length)),p=0,m=-32;m<v;++m)d&&(f^=d.charCodeAt((m+32)%d.length)),m===0&&(y=f),f^=f<<10,f^=f>>>15,f^=f<<4,f^=f>>>13,m>=0&&(y=y+1640531527|0,h=g[m&127]^=f+y,p=h==0?p+1:0);for(p>=128&&(g[(d&&d.length||0)&127]=-1),p=127,m=4*128;m>0;--m)f=g[p+34&127],h=g[p=p+1&127],f^=f<<13,h^=h<<17,f^=f>>>15,h^=h>>>12,g[p]=f^h;u.w=y,u.X=g,u.i=p}c(l,a)}function s(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function o(a,l){a==null&&(a=+new Date);var c=new i(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var h=c.next()>>>11,f=(c.next()>>>0)/4294967296,p=(h+f)/(1<<21);while(p===0);return p},d.int32=c.next,d.quick=d,u&&(u.X&&s(u,c),d.state=function(){return s(c,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor4096=o})(wp,t,!1)})(DD);var k6e=DD.exports,LD={exports:{}};LD.exports;(function(t){(function(e,n,r){function i(a){var l=this,c="";l.next=function(){var d=l.b,h=l.c,f=l.d,p=l.a;return d=d<<25^d>>>7^h,h=h-f|0,f=f<<24^f>>>8^p,p=p-d|0,l.b=d=d<<20^d>>>12^h,l.c=h=h-f|0,l.d=f<<16^h>>>16^p,l.a=p-d|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=a|0):c+=a;for(var u=0;u<c.length+20;u++)l.b^=c.charCodeAt(u)|0,l.next()}function s(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function o(a,l){var c=new i(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var h=c.next()>>>11,f=(c.next()>>>0)/4294967296,p=(h+f)/(1<<21);while(p===0);return p},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&s(u,c),d.state=function(){return s(c,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.tychei=o})(wp,t,!1)})(LD);var S6e=LD.exports,Ete={exports:{}};const C6e={},N6e=Object.freeze(Object.defineProperty({__proto__:null,default:C6e},Symbol.toStringTag,{value:"Module"})),A6e=Dae(N6e);(function(t){(function(e,n,r){var i=256,s=6,o=52,a="random",l=r.pow(i,s),c=r.pow(2,o),u=c*2,d=i-1,h;function f(b,S,A){var E=[];S=S==!0?{entropy:!0}:S||{};var I=g(y(S.entropy?[b,x(n)]:b??v(),3),E),T=new p(E),O=function(){for(var $=T.g(s),R=l,F=0;$<c;)$=($+F)*i,R*=i,F=T.g(1);for(;$>=u;)$/=2,R/=2,F>>>=1;return($+F)/R};return O.int32=function(){return T.g(4)|0},O.quick=function(){return T.g(4)/4294967296},O.double=O,g(x(T.S),n),(S.pass||A||function($,R,F,L){return L&&(L.S&&m(L,T),$.state=function(){return m(T,{})}),F?(r[a]=$,R):$})(O,I,"global"in S?S.global:this==r,S.state)}function p(b){var S,A=b.length,E=this,I=0,T=E.i=E.j=0,O=E.S=[];for(A||(b=[A++]);I<i;)O[I]=I++;for(I=0;I<i;I++)O[I]=O[T=d&T+b[I%A]+(S=O[I])],O[T]=S;(E.g=function($){for(var R,F=0,L=E.i,U=E.j,q=E.S;$--;)R=q[L=d&L+1],F=F*i+q[d&(q[L]=q[U=d&U+R])+(q[U]=R)];return E.i=L,E.j=U,F})(i)}function m(b,S){return S.i=b.i,S.j=b.j,S.S=b.S.slice(),S}function y(b,S){var A=[],E=typeof b,I;if(S&&E=="object")for(I in b)try{A.push(y(b[I],S-1))}catch{}return A.length?A:E=="string"?b:b+"\0"}function g(b,S){for(var A=b+"",E,I=0;I<A.length;)S[d&I]=d&(E^=S[d&I]*19)+A.charCodeAt(I++);return x(S)}function v(){try{var b;return h&&(b=h.randomBytes)?b=b(i):(b=new Uint8Array(i),(e.crypto||e.msCrypto).getRandomValues(b)),x(b)}catch{var S=e.navigator,A=S&&S.plugins;return[+new Date,e,A,e.screen,x(n)]}}function x(b){return String.fromCharCode.apply(0,b)}if(g(r.random(),n),t.exports){t.exports=f;try{h=A6e}catch{}}else r["seed"+a]=f})(typeof self<"u"?self:wp,[],Math)})(Ete);var I6e=Ete.exports,_6e=v6e,E6e=x6e,T6e=b6e,$6e=w6e,P6e=k6e,R6e=S6e,$p=I6e;$p.alea=_6e;$p.xor128=E6e;$p.xorwow=T6e;$p.xorshift7=$6e;$p.xor4096=P6e;$p.tychei=R6e;var MD=$p;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Tte{constructor(e,n,r,i,s){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=i,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const o=s||Math.random();this.random=MD.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){const i=this.nextVal;return this.nextVal=NaN,i}let e,n,r=!1;for(;!r;){let i,s,o;do i=2*this.random()-1,s=2*this.random()-1,o=i*i+s*s;while(o>=1||o===0);const a=Math.sqrt(-2*Math.log(o)/o);e=this.mean+this.stdDev*i*a,n=this.mean+this.stdDev*s*a,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class O6e{constructor(e=0,n=1,r,i){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=r,i==null&&(i=Math.random()),typeof i=="number"&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=MD.alea(i)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D6e(t,e=0,n=1,r,i){if(ju(t),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const s=new Tte(e,n,r,!1,i),o=Xt(t,r);for(let a=0;a<o.values.length;a++)o.values[a]=s.nextValue();return o.toTensor()}const L6e=xe({randomNormal_:D6e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M6e(t,e=0,n=1,r="float32",i){ju(t);const s=Xt(t,r),o=new O6e(e,n,null,i);for(let a=0;a<s.values.length;a++)s.values[a]=o.nextValue();return s.toTensor()}const Gx=xe({randomUniform_:M6e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rv(t,e,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");const i={start:t,stop:e,step:n,dtype:r};return ye.runKernel(QO,{},i)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F6e(t){const n={input:se(t,"input","real")};return ye.runKernel(eD,n)}const wS=xe({real_:F6e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j6e(t){const n={x:se(t,"x","reciprocal")};return ye.runKernel(Nx,n)}const B6e=xe({reciprocal_:j6e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z6e(t){const n={x:se(t,"x","relu")};return ye.runKernel(Ax,n)}const Vu=xe({relu_:z6e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U6e(t){const n={x:se(t,"x","relu6")};return ye.runKernel(Ix,n)}const $te=xe({relu6_:U6e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V6e(t,e){const r={x:se(t,"x","reverse")},i={dims:e};return ye.runKernel(u5,r,i)}const mp=xe({reverse_:V6e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W6e(t){const n={x:se(t,"x","round")};return ye.runKernel(_x,n)}const Pte=xe({round_:W6e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G6e(t){const n={x:se(t,"x","rsqrt","float32")};return ye.runKernel(Ex,n)}const Rte=xe({rsqrt_:G6e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q6e(t){const n={x:se(t,"x","selu")};return ye.runKernel(Tx,n)}const Ote=xe({selu_:q6e});function H6e(t,e,n,r,i,s=[1,1],o="NHWC"){const a=se(t,"x","separableConv2d"),l=se(e,"depthwiseFilter","separableConv2d"),c=se(n,"pointwiseFilter","separableConv2d");let u=a,d=!1;if(a.rank===3&&(d=!0,u=be(a,[1,a.shape[0],a.shape[1],a.shape[2]])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");Z(u.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${u.rank}.`),Z(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),Z(c.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),Z(c.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`),Z(c.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`);const h=l.shape[2],f=l.shape[3];Z(c.shape[2]===h*f,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${h*f}, but got ${c.shape[2]}.`);const p=vD(u,l,r,i,o,s),y=hp(p,c,1,"valid",o);return d?be(y,[y.shape[1],y.shape[2],y.shape[3]]):y}const Dte=xe({separableConv2d_:H6e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K6e(t){const n={x:se(t,"x","sign")};return ye.runKernel(Rx,n)}const X6e=xe({sign_:K6e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y6e(t){const n={x:se(t,"x","sin","float32")};return ye.runKernel($x,n)}const Lte=xe({sin_:Y6e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z6e(t){const n={x:se(t,"x","sinh")};return ye.runKernel(Px,n)}const Mte=xe({sinh_:Z6e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J6e(t,e,n){const r=se(t,"x","slice1d");return Z(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),zn(r,[e],[n])}const FD=xe({slice1d_:J6e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q6e(t,e,n){const r=se(t,"x","slice2d");return Z(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),zn(r,e,n)}const Fte=xe({slice2d_:Q6e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eje(t,e,n){const r=se(t,"x","slice3d");return Z(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),zn(r,e,n)}const jD=xe({slice3d_:eje});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tje(t,e,n){const r=se(t,"x","slice4d");return Z(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),zn(r,e,n)}const kS=xe({slice4d_:tje});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nje(t,e=-1){const n=se(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const r={logits:n},i={dim:e};return ye.runKernel(g5,r,i)}const BD=xe({softmax_:nje});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rje(t){Z(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return ye.runKernel(UO,e)}const jte=xe({fft_:rje});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ije(t){Z(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return ye.runKernel(GO,e)}const G3=xe({ifft_:ije});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sje(t){const e=t.shape[t.shape.length-1],n=t.size/e;let r;if(e<=2){const i=be(t,[n,e]);r=G3(i)}else{const i=[n,2*(e-1)],s=be(wS(t),[n,e]),o=be(wD(t),[n,e]),a=mp(zn(s,[0,1],[n,e-2]),1),l=de(mp(zn(o,[0,1],[n,e-2]),1),Rt(-1)),c=Ys([s,a],1),u=Ys([o,l],1),d=be(wg(c,u),[i[0],i[1]]);r=G3(d)}if(r=wS(r),t.rank===3&&t.shape[0]!==0){const i=r,s=t.shape[0];r=be(r,[s,r.shape[0]/s,r.shape[1]]),i.dispose()}return r}const oje=xe({irfft_:sje});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aje(t,e,n=0){const i={x:se(t,"x","split")},s={numOrSizeSplits:e,axis:n};return ye.runKernel(m5,i,s)}const Ko=xe({split_:aje});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lje(t,e){Z(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const r=t.size/n;let i;if(e!=null&&e<n){const p=t.shape.map(y=>0),m=t.shape.map(y=>y);m[t.shape.length-1]=e,i=zn(t,p,m),n=e}else if(e!=null&&e>n){const p=t.shape.map(m=>m);p[t.shape.length-1]=e-n,i=Ys([t,Ni(p)],t.shape.length-1),n=e}else i=t;const s=cn(i),o=be(wg(i,s),[r,n]),a=jte(o),l=Math.floor(n/2)+1,c=wS(a),u=wD(a),d=Ko(c,[l,n-l],c.shape.length-1),h=Ko(u,[l,n-l],u.shape.length-1),f=i.shape.slice();return f[i.shape.length-1]=l,be(wg(d[0],h[0]),f)}const cje=xe({rfft_:lje});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uje(t,e){let n=se(t,"a","squaredDifference"),r=se(e,"b","squaredDifference");[n,r]=Or(n,r),Ut(n.shape,r.shape);const i={a:n,b:r},s={};return ye.runKernel(Mx,i,s)}const Bte=xe({squaredDifference_:uje});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dje(t,e){const n=se(t,"x","squeeze","string_or_numeric");return be(n,bh(n.shape,e).newShape)}const qx=xe({squeeze_:dje});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hje(t,e=0){const n=ste(t,"tensors","stack","string_or_numeric");Z(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&Z(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,i={axis:e};return ye.runKernel(r5,r,i)}const Iu=xe({stack_:hje});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fje(t,e=0){const r={x:se(t,"x","step")},i={alpha:e};return ye.runKernel(Ux,r,i)}const Hx=xe({step_:fje});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pje(t,e,n,r,i=0,s=0,o=0,a=0,l=0){const u={x:se(t,"x","stridedSlice","string_or_numeric")},d={begin:e,end:n,strides:r,beginMask:i,endMask:s,ellipsisMask:o,newAxisMask:a,shrinkAxisMask:l};return ye.runKernel(sD,u,d)}const mje=xe({stridedSlice_:pje});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gje(t){const n={x:se(t,"x","tan","float32")};return ye.runKernel(jx,n)}const yje=xe({tan_:gje});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ks(t,e){dee(t);const n=w5(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return k5(t,null,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l1(t,e,n){if(dee(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=w5(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return k5(t,e,r,n)}function zte(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,i=e.rank>1?e.rank-1:1,s=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${i}.`;if(n.rank<i)throw new Error(s+` update.rank < ${i}. `);if(t.length<r+(n.rank-i))throw new Error(s+` Output shape length < ${r+(n.rank-i)}`);if(n.rank!==i+t.length-r)throw new Error(s+` update.rank != ${i+t.length-r}`);for(let o=0;o<i;++o)if(n.shape[o]!==e.shape[o])throw new Error(s+` updates.shape[${o}] (${n.shape[o]}) != indices.shape[${o}] (${e.shape[o]}).`);for(let o=0;o<n.rank-i;++o)if(n.shape[o+i]!==t[o+r])throw new Error(s+` updates.shape[${o+i}] (${n.shape[o+i]}) != shape[${o+i}] (${t[o+i]})`)}function vje(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}zte(n,e,t)}function Pp(t,e,n){const r=e.shape.length,i=r>1?e.shape[r-1]:1,s=n.length;let o=1;for(let d=i;d<s;++d)o*=n[d];const a=i<1?1:i,l=$e(e.shape)/a,c=[...wt(n.slice(0,i)),1],u=$e(n);return{sliceRank:i,numUpdates:l,sliceSize:o,strides:c,outputSize:u}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xje(t,e=1,n=!0){const r=se(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const i=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>i)throw new Error(`'k' passed to topk() must be <= the last dimension (${i}) but got ${e}`);const s={x:r},o={k:e,sorted:n},[a,l]=ye.runKernel(oD,s,o);return{values:a,indices:l}}const bje=xe({topk_:xje});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wje(t,e=0,n=1,r,i){if(ju(t),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const s=new Tte(e,n,r,!0,i),o=Xt(t,r);for(let a=0;a<o.values.length;a++)o.values[a]=s.nextValue();return o.toTensor()}const Ute=xe({truncatedNormal_:wje});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kje(t,e=0){const n=se(t,"x","unique","string_or_numeric");Z(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},i={axis:e},[s,o]=ye.runKernel(lD,r,i);return{values:s,indices:o}}const Sje=xe({unique_:kje});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cje(t,e,n){const r=se(t,"x","unsortedSegmentSum"),i=se(e,"segmentIds","unsortedSegmentSum","int32");Z(vg(n),()=>"numSegments must be of dtype int");const s={x:r,segmentIds:i},o={numSegments:n};return ye.runKernel(v5,s,o)}const Vte=xe({unsortedSegmentSum_:Cje});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nje(t,e=0){const n=se(t,"x","unstack","string_or_numeric");Z(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);const r={value:n},i={axis:e};return ye.runKernel(y5,r,i)}const gp=xe({unstack_:Nje});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aje(t,e=!0,n,r){return ye.makeVariable(t,e,n,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wte(t,e){const n=[];for(let s=0;s<e.length;s++)e[s]&&n.push(s);const r=Xt(t,"int32"),i=Xt([n.length,t.length],"int32");for(let s=0;s<n.length;s++){const o=r.indexToLoc(n[s]),a=s*t.length;i.values.set(o,a)}return i.toTensor()}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ije(t,e,n){const r=se(t,"x","transpose");if(e==null&&(e=r.shape.map((o,a)=>a).reverse()),Z(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(o=>{Z(o>=0&&o<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const i={x:r},s={perm:e};return r.dtype==="complex64"?Ne(()=>{let o=wS(r),a=wD(r);return o=ye.runKernel(Km,{x:o},s),a=ye.runKernel(Km,{x:a},s),n&&(a=or(a)),wg(o,a)}):ye.runKernel(Km,i,s)}const ln=xe({transpose_:Ije});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _je(t,e){if(e==null)return t.shape.slice();if(xn(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)e[r]==null&&t.shape[r]!=null?n.push(t.shape[r]):n.push(e[r]);return n}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eje(t,e,n,r){const i=se(t,"x","dropout");if(Z(i.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${i.dtype} tensor instead.`),Z(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof ri?i.clone():i;const s=_je(i,n),o=1-e,a=yt(_5(ze(Gx(s,0,1,"float32",r),o)),o);return de(i,a)}const Tje=xe({dropout_:Eje});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $je(t,e,n,r,i,s="NHWC",o){let a=t;t.rank===3&&(a=be(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=be(e,[1,e.shape[0],e.shape[1],e.shape[2]])),Z(a.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${a.shape}.`),Z(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),Z(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const c=s==="NHWC"?a.shape[3]:a.shape[1],u=s==="NHWC"?l.shape[3]:l.shape[1];Z(c===n[2],()=>`Error in conv2dDerFilter: depth of input ${c}) must match input depth in filter (${n[2]}.`),Z(u===n[3],()=>`Error in conv2dDerFilter: depth of dy (${u}) must match output depth for filter (${n[3]}).`),ro("conv2dDerFilter",i,o);const d={x:a,dy:l},h={strides:r,pad:i,dataFormat:s,dimRoundingMode:o,filterShape:n};return ye.runKernel($O,d,h)}const zD=xe({conv2DBackpropFilter_:$je});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UD(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return de(t,Hx(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function VD(t,e){let n=e;const r=hi(t.shape,e.shape);return r.length>0&&(n=lt(n,r)),be(n,t.shape)}function WD(t,e,n,r){if(e==="linear")return t;if(e==="relu")return Vu(t);if(e==="elu")return A5(t);if(e==="relu6")return $te(t);if(e==="prelu")return TD(t,n);if(e==="leakyrelu")return kD(t,r);if(e==="sigmoid")return c0(t);throw new Error(`Unknown fused activation ${e}.`)}const GD=(t,e)=>!(t>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pje({x:t,filter:e,strides:n,pad:r,dataFormat:i="NHWC",dilations:s=[1,1],dimRoundingMode:o,bias:a,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(l=l||"linear",GD(ye.state.gradientDepth,l)===!1){Z(i==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${i} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let A=hp(t,e,n,r,i,s,o);return a!=null&&(A=ze(A,a)),WD(A,l,c,u)}const d=se(t,"x","conv2d","float32"),h=se(e,"filter","conv2d","float32");let f=d,p=!1;d.rank===3&&(p=!0,f=be(d,[1,d.shape[0],d.shape[1],d.shape[2]])),Z(f.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${f.rank}.`),Z(h.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${h.rank}.`),ro("fused conv2d",r,o);const m=i==="NHWC"?f.shape[3]:f.shape[1];Z(h.shape[2]===m,()=>`Error in conv2d: depth of input (${m}) must match input depth for filter ${h.shape[2]}.`),Z(cs(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`);const y=Vi(f.shape,h.shape,n,s,r,o);let g;a!=null&&(g=se(a,"bias","fused conv2d"),[g]=Or(g,d),i==="NHWC"?Ut(y.outShape,g.shape):(Z(g.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${g.shape.length}.`),Z(g.shape.length===0||g.shape[0]===y.outChannels||g.shape[0]===1,()=>`Error in fused conv2d: bias shape (${g.shape}) is not compatible with the number of output channels (${y.outChannels})`)));let v;if(c!=null){const A=c.shape;if(Z(A.length<=1||A.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${A.length}.`),A.length===1)Z(A[0]===1||A[0]===y.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${A}) is not compatible with the number of output channels (${y.outChannels}).`);else if(A.length===3)try{Ut(A,y.outShape)}catch{const I=`Error in fused conv2d: PReLU activation weights (${A}) is not compatible with the output shape of the conv2d (${y.outShape}).`;throw Error(I)}v=se(c,"prelu weights","fused conv2d")}const x=(A,E)=>{Z(i==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${i} but only NHWC is currently supported.`);const[I,T,O,$]=E,R=UD(A,O,l);Z(up(s),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`);const F=gD(T.shape,R,I,n,r),L=zD(T,R,I.shape,n,r),U=[F,L];if($!=null){const q=VD($,R);U.push(q)}return U},b={x:f,filter:h,bias:g,preluActivationWeights:v},S={strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:o,activation:l,leakyreluAlpha:u};return a==null?pp((E,I,T)=>{let O=ye.runKernel(mS,b,S);return T([I,E,O]),p&&(O=be(O,[O.shape[1],O.shape[2],O.shape[3]])),{value:O,gradFunc:x}})(f,h):pp((E,I,T,O)=>{let $=ye.runKernel(mS,b,S);return O([I,E,$,T]),p&&($=be($,[$.shape[1],$.shape[2],$.shape[3]])),{value:$,gradFunc:x}})(f,h,g)}const Rje=xe({fusedConv2d_:Pje});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oje(t,e,n,r,i,s=[1,1],o){let a=t;t.rank===3&&(a=be(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=be(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={x:a,dy:l},u={strides:r,pad:i,dimRoundingMode:o,dilations:s,filterShape:n};return ye.runKernel(FO,c,u)}const Dje=xe({depthwiseConv2dNativeBackpropFilter_:Oje});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lje(t,e,n,r,i,s=[1,1],o){let a=e,l=!1;e.rank===3&&(l=!0,a=be(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={dy:a,filter:n},u={strides:r,pad:i,dimRoundingMode:o,dilations:s,inputShape:t},d=ye.runKernel(jO,c,u);return l?be(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const Mje=xe({depthwiseConv2dNativeBackpropInput_:Lje});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fje({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:i,activation:s="linear",preluActivationWeights:o,leakyreluAlpha:a=.2}){if(GD(ye.state.gradientDepth,s)===!1){let $=gn(t,e,n,r);return i!=null&&($=ze($,i)),WD($,s,o,a)}let l=se(t,"a","fused matMul"),c=se(e,"b","fused matMul");[l,c]=Or(l,c);const u=n?l.shape[l.rank-2]:l.shape[l.rank-1],d=r?c.shape[c.rank-1]:c.shape[c.rank-2],h=n?l.shape[l.rank-1]:l.shape[l.rank-2],f=r?c.shape[c.rank-2]:c.shape[c.rank-1],p=l.shape.slice(0,-2),m=c.shape.slice(0,-2),y=$e(p),g=$e(m);Z(u===d,()=>`Error in fused matMul: inner shapes (${u}) and (${d}) of Tensors with shapes ${l.shape} and ${c.shape} and transposeA=${n} and transposeB=${r} must match.`);const x=Ut(l.shape.slice(0,-2),c.shape.slice(0,-2)).concat([h,f]),b=n?be(l,[y,u,h]):be(l,[y,h,u]),S=r?be(c,[g,f,d]):be(c,[g,d,f]);let A;i!=null&&(A=se(i,"bias","fused matMul"),[A]=Or(A,l),Ut(x,A.shape));let E;o!=null&&(E=se(o,"prelu weights","fused matMul"));const I=($,R)=>{const[F,L,U,q]=R,K=UD(be($,U.shape),U,s);let j,Y;if(!n&&!r?(j=gn(K,L,!1,!0),Y=gn(F,K,!0,!1)):!n&&r?(j=gn(K,L,!1,!1),Y=gn(K,F,!0,!1)):n&&!r?(j=gn(L,K,!1,!0),Y=gn(F,K,!1,!1)):(j=gn(L,K,!0,!0),Y=gn(K,F,!0,!0)),i!=null){const ae=VD(q,K);return[j,Y,ae]}else return[j,Y]},T={a:b,b:S,bias:A,preluActivationWeights:E},O={transposeA:n,transposeB:r,activation:s,leakyreluAlpha:a};return i==null?pp((R,F,L)=>{const U=ye.runKernel(pS,T,O);return L([R,F,U]),{value:be(U,x),gradFunc:I}})(b,S):pp((R,F,L,U)=>{const q=ye.runKernel(pS,T,O);return U([R,F,q,L]),{value:be(q,x),gradFunc:I}})(b,S,A)}const bU=xe({fusedMatMul_:Fje});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jje(t,e,n,r,i="bilinear",s=0){const o=se(t,"image","cropAndResize"),a=se(e,"boxes","cropAndResize","float32"),l=se(n,"boxInd","cropAndResize","int32"),c=a.shape[0];Z(o.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${o.rank}.`),Z(a.rank===2&&a.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${a.shape}.`),Z(l.rank===1&&l.shape[0]===c,()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${a.shape}.`),Z(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),Z(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),Z(i==="bilinear"||i==="nearest",()=>`method must be bilinear or nearest, but was ${i}`);const u={image:o,boxes:a,boxInd:l},d={method:i,extrapolationValue:s,cropSize:r};return ye.runKernel(DO,u,d)}const Bje=xe({cropAndResize_:jje});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zje(t){const e=se(t,"image","flipLeftRight","float32");Z(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e};return ye.runKernel(WO,n,{})}const Uje=xe({flipLeftRight_:zje});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vje(t){const e=se(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];Z(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),Z(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const i=new Array(e.rank);return i.fill(1,0,n),i[n]=3,wl(e,i)}const Wje=xe({grayscaleToRGB_:Vje});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gje(t){const e=se(t,"image","RGBToGrayscale"),n=e.rank-1,r=e.shape[n];Z(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),Z(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);const i=e.dtype,s=Ye(e,"float32"),o=Ks([.2989,.587,.114]);let a;switch(e.rank){case 2:a=by("ij,j->i",s,o);break;case 3:a=by("ijk,k->ij",s,o);break;case 4:a=by("ijkl,l->ijk",s,o);break;case 5:a=by("ijklm,m->ijkl",s,o);break;case 6:a=by("ijklmn,n->ijklm",s,o);break;default:throw new Error("Not a valid tensor rank.")}return a=Us(a,-1),Ye(a,i)}const qje=xe({rgbToGrayscale_:Gje});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hje(t,e,n=0,r=.5){const i=se(t,"image","rotateWithOffset","float32");Z(i.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${i.rank}.`);const s={image:i},o={radians:e,fillValue:n,center:r};return ye.runKernel(cD,s,o)}const Kje=xe({rotateWithOffset_:Hje});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d0(t,e,n,r,i,s){r==null&&(r=.5),i==null&&(i=Number.NEGATIVE_INFINITY),s==null&&(s=0);const o=t.shape[0];return n=Math.min(n,o),Z(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),Z(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),Z(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),Z(e.rank===1,()=>"scores must be a 1D tensor"),Z(e.shape[0]===o,()=>`scores has incompatible shape with boxes. Expected ${o}, but was ${e.shape[0]}`),Z(0<=s&&s<=1,()=>`softNmsSigma must be in [0, 1], but was '${s}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xje(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY){const s=se(t,"boxes","nonMaxSuppression","float32"),o=se(e,"scores","nonMaxSuppression","float32"),a=d0(s,o,n,r,i);n=a.maxOutputSize,r=a.iouThreshold,i=a.scoreThreshold;const l={maxOutputSize:n,iouThreshold:r,scoreThreshold:i};return ye.runKernel(YO,{boxes:s,scores:o},l)}const Yje=xe({nonMaxSuppression_:Xje});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zje(t,e,n){const r=Jje(t,e,n),i=r<0?-(r+1):r;t.splice(i,0,e)}function Jje(t,e,n){return e8e(t,e,n||Qje)}function Qje(t,e){return t>e?1:t<e?-1:0}function e8e(t,e,n){let r=0,i=t.length,s=0,o=!1;for(;r<i;){s=r+(i-r>>>1);const a=n(e,t[s]);a>0?r=s+1:(i=s,o=!a)}return o?r:-r-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qD(t,e,n,r,i){return XD(t,e,n,r,i,0)}function HD(t,e,n,r,i,s){return XD(t,e,n,r,i,0,!1,s,!0)}function KD(t,e,n,r,i,s){return XD(t,e,n,r,i,s,!0)}function XD(t,e,n,r,i,s,o=!1,a=!1,l=!1){const c=[];for(let y=0;y<e.length;y++)e[y]>i&&c.push({score:e[y],boxIndex:y,suppressBeginIndex:0});c.sort(wU);const u=s>0?-.5/s:0,d=[],h=[];for(;d.length<n&&c.length>0;){const y=c.pop(),{score:g,boxIndex:v,suppressBeginIndex:x}=y;if(g<i)break;let b=!1;for(let S=d.length-1;S>=x;--S){const A=t8e(t,v,d[S]);if(A>=r){b=!0;break}if(y.score=y.score*n8e(r,u,A),y.score<=i)break}y.suppressBeginIndex=d.length,b||(y.score===g?(d.push(v),h.push(y.score)):y.score>i&&Zje(c,y,wU))}const f=d.length,p=n-f;a&&p>0&&(d.push(...new Array(p).fill(0)),h.push(...new Array(p).fill(0)));const m={selectedIndices:d};return o&&(m.selectedScores=h),l&&(m.validOutputs=f),m}function t8e(t,e,n){const r=t.subarray(e*4,e*4+4),i=t.subarray(n*4,n*4+4),s=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),a=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),c=Math.min(i[0],i[2]),u=Math.min(i[1],i[3]),d=Math.max(i[0],i[2]),h=Math.max(i[1],i[3]),f=(a-s)*(l-o),p=(d-c)*(h-u);if(f<=0||p<=0)return 0;const m=Math.max(s,c),y=Math.max(o,u),g=Math.min(a,d),v=Math.min(l,h),x=Math.max(g-m,0)*Math.max(v-y,0);return x/(f+p-x)}function n8e(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function wU(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function r8e(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY){const s=se(t,"boxes","nonMaxSuppressionAsync"),o=se(e,"scores","nonMaxSuppressionAsync"),a=d0(s,o,n,r,i);n=a.maxOutputSize,r=a.iouThreshold,i=a.scoreThreshold;const l=await Promise.all([s.data(),o.data()]),c=l[0],u=l[1],{selectedIndices:d}=qD(c,u,n,r,i);return s!==t&&s.dispose(),o!==e&&o.dispose(),Ks(d,"int32")}const i8e=r8e;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s8e(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,s=0){const o=se(t,"boxes","nonMaxSuppression"),a=se(e,"scores","nonMaxSuppression"),l=d0(o,a,n,r,i,s);n=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,s=l.softNmsSigma;const c={boxes:o,scores:a},u={maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:s},d=ye.runKernel(JO,c,u);return{selectedIndices:d[0],selectedScores:d[1]}}const o8e=xe({nonMaxSuppressionWithScore_:s8e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function a8e(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,s=0){const o=se(t,"boxes","nonMaxSuppressionAsync"),a=se(e,"scores","nonMaxSuppressionAsync"),l=d0(o,a,n,r,i,s);n=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,s=l.softNmsSigma;const c=await Promise.all([o.data(),a.data()]),u=c[0],d=c[1],{selectedIndices:h,selectedScores:f}=KD(u,d,n,r,i,s);return o!==t&&o.dispose(),a!==e&&a.dispose(),{selectedIndices:Ks(h,"int32"),selectedScores:Ks(f)}}const l8e=a8e;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c8e(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,s=!1){const o=se(t,"boxes","nonMaxSuppression"),a=se(e,"scores","nonMaxSuppression"),l=d0(o,a,n,r,i,null),c=l.maxOutputSize,u=l.iouThreshold,d=l.scoreThreshold,h={boxes:o,scores:a},f={maxOutputSize:c,iouThreshold:u,scoreThreshold:d,padToMaxOutputSize:s},p=ye.runKernel(ZO,h,f);return{selectedIndices:p[0],validOutputs:p[1]}}const u8e=xe({nonMaxSuppressionPadded_:c8e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function d8e(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,s=!1){const o=se(t,"boxes","nonMaxSuppressionAsync"),a=se(e,"scores","nonMaxSuppressionAsync"),l=d0(o,a,n,r,i,null),c=l.maxOutputSize,u=l.iouThreshold,d=l.scoreThreshold,[h,f]=await Promise.all([o.data(),a.data()]),{selectedIndices:p,validOutputs:m}=HD(h,f,c,u,d,s);return o!==t&&o.dispose(),a!==e&&a.dispose(),{selectedIndices:Ks(p,"int32"),validOutputs:Rt(m,"int32")}}const h8e=d8e;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f8e(t,e,n=!1,r=!1){const i=se(t,"images","resizeBilinear");Z(i.rank===3||i.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${i.rank}.`),Z(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),Z(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let s=i,o=!1;i.rank===3&&(o=!0,s=be(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const a={images:s},l={alignCorners:n,halfPixelCenters:r,size:e},c=ye.runKernel(c5,a,l);return o?be(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const Gte=xe({resizeBilinear_:f8e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p8e(t,e,n=!1,r=!1){const i=se(t,"images","resizeNearestNeighbor");Z(i.rank===3||i.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${i.rank}.`),Z(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),Z(i.dtype==="float32"||i.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),Z(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let s=i,o=!1;i.rank===3&&(o=!0,s=be(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const a={images:s},l={alignCorners:n,halfPixelCenters:r,size:e},c=ye.runKernel(l5,a,l);return o?be(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const qte=xe({resizeNearestNeighbor_:p8e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m8e(t,e="binary",n=!1,r=.5){const i=se(t,"image","threshold"),s=.2989,o=.587,a=.114,l=i.shape[0]*i.shape[1];let c=de(Ks([r]),255),u,d,h,f;if(Z(i.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${i.rank}.`),Z(i.shape[2]===3||i.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${i.shape[2]}.`),Z(i.dtype==="int32"||i.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${i.dtype}.`),Z(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),i.shape[2]===3){[u,d,h]=Ko(i,[1,1,1],-1);const y=de(u,s),g=de(d,o),v=de(h,a);f=ze(ze(y,g),v)}else f=t;if(e==="otsu"){const y=mMe(Ye(Pte(f),"int32"),ote([]),256);c=g8e(y,l)}const p=n?u0(f,c):ra(f,c);return Ye(de(p,255),"int32")}function g8e(t,e){let n=Ks([-1]),r=Ks([0]),i=Ks([0]),s,o,a,l,c,u;for(let d=0;d<t.size-1;d++){s=zn(t,0,d+1),o=zn(t,d+1),c=yt(lt(s),e),u=yt(lt(o),e);const h=lt(de(s,rv(0,s.size)));a=yt(h,lt(s));const f=N5(o.shape,s.size),p=ze(rv(0,o.size),f),m=de(o,p);l=yt(lt(m),lt(o));const y=nt(a,l),g=nt(a,l),v=de(c,u);i=de(de(v,y),g);const x=ra(i,r);r=Ts(x,i,r),n=Ts(x,Ks([d]),n)}return n}const y8e=xe({threshold_:m8e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v8e(t,e,n="nearest",r="constant",i=0,s){const o=se(t,"image","transform","float32"),a=se(e,"transforms","transform","float32");Z(o.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${o.rank}.`),Z(a.rank===2&&(a.shape[0]===o.shape[0]||a.shape[0]===1)&&a.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),Z(s==null||s.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${s}.`);const l={image:o,transforms:a},c={interpolation:n,fillMode:r,fillValue:i,outputShape:s};return ye.runKernel(aD,l,c)}const x8e=xe({transform_:v8e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b8e(t,e,n){const r=se(t,"a","bandPart");Z(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const i=r.shape,[s,o]=r.shape.slice(-2);let a,l;typeof e=="number"?(Z(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),Z(e<=s,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${s}).`),a=se(e<0?s:e,"numLower","bandPart")):(Z(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),a=Ts(bS(e,0),s,Sg(e,s))),typeof n=="number"?(Z(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),Z(n<=o,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${o}).`),l=se(n<0?o:n,"numUpper","bandPart")):(Z(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=Ts(bS(n,0),o,Sg(n,o)));const c=be(rv(0,s,1,"int32"),[-1,1]),u=rv(0,o,1,"int32"),d=nt(c,u),h=Au(u0(d,a),Tp(d,or(l))),f=Ni([s,o],r.dtype);return be(Iu(gp(be(r,[-1,s,o])).map(p=>Ts(h,p,f))),i)}const w8e=xe({bandPart_:b8e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k8e(t){let e;if(Array.isArray(t)){e=!1,Z(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const i=t[0].shape[0];for(let s=1;s<t.length;++s)Z(t[s].shape[0]===i,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[s].shape[0]} vs. ${i})`)}else e=!0,t=Ko(t,t.shape[0],0).map(i=>qx(i,[0]));Z(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let i=0;i<t.length;++i)n.push(ye.tidy(()=>{let s=r[i];if(i>0)for(let o=0;o<i;++o){const a=de(lt(de(n[o],s)),n[o]);s=nt(s,a)}return yt(s,I5(s,"euclidean"))}));return e?Iu(n,0):n}const S8e=xe({gramSchmidt_:k8e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C8e(t,e=!1){if(Z(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return kU(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((l,c)=>l*c),r=gp(be(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),i=[],s=[];r.forEach(l=>{const[c,u]=kU(l,e);i.push(c),s.push(u)});const o=be(Iu(i,0),t.shape),a=be(Iu(s,0),t.shape);return[o,a]}}function kU(t,e=!1){return ye.tidy(()=>{Z(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let i=Nte(n),s=Bf(t);const o=l1([[1]],[1,1]);let a=Bf(o);const l=n>=r?r:n;for(let c=0;c<l;++c){const u=s,d=a,h=i;[a,s,i]=ye.tidy(()=>{const f=zn(s,[c,c],[n-c,1]),p=I5(f),m=zn(s,[c,c],[1,1]),y=Ts(ra(m,0),l1([[-1]]),l1([[1]])),g=nt(m,de(y,p)),v=yt(f,g);v.shape[0]===1?a=Bf(o):a=Ys([o,zn(v,[1,0],[v.shape[0]-1,v.shape[1]])],0);const x=or(yt(gn(y,g),p)),b=zn(s,[c,0],[n-c,r]),S=de(x,a),A=ln(a);if(c===0)s=nt(b,gn(S,gn(A,b)));else{const T=nt(b,gn(S,gn(A,b)));s=Ys([zn(s,[0,0],[c,r]),T],0)}const E=ln(S),I=zn(i,[0,c],[n,i.shape[1]-c]);if(c===0)i=nt(I,gn(gn(I,a),E));else{const T=nt(I,gn(gn(I,a),E));i=Ys([zn(i,[0,0],[n,c]),T],1)}return[a,s,i]}),Qt([u,d,h])}return!e&&n>r&&(i=zn(i,[0,0],[n,r]),s=zn(s,[0,0],[r,r])),[i,s]})}const N8e=xe({qr_:C8e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Ws;(function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Ws||(Ws={}));function A8e(t,e,n=Ws.SUM_BY_NONZERO_WEIGHTS){const r=se(t,"losses","computeWeightedLoss");let i=null;e!=null&&(i=se(e,"weights","computeWeightedLoss"));const s=i==null?r:de(r,i);if(n===Ws.NONE)return s;if(n===Ws.SUM)return lt(s);if(n===Ws.MEAN){if(i==null)return Pr(s);{const o=r.size/i.size,a=yt(lt(s),lt(i));return o>1?yt(a,Rt(o)):a}}if(n===Ws.SUM_BY_NONZERO_WEIGHTS){if(i==null)return yt(lt(s),Rt(r.size));{const o=de(i,Uu(r.shape)),a=Ye(lt(nv(o,Rt(0))),"float32");return yt(lt(s),a)}}throw Error(`Unknown reduction: ${n}`)}const Wu=xe({computeWeightedLoss_:A8e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I8e(t,e,n,r=Ws.SUM_BY_NONZERO_WEIGHTS){const i=se(t,"labels","absoluteDifference"),s=se(e,"predictions","absoluteDifference");let o=null;n!=null&&(o=se(n,"weights","absoluteDifference")),Xa(i.shape,s.shape,"Error in absoluteDifference: ");const a=Si(nt(i,s));return Wu(a,o,r)}const _8e=xe({absoluteDifference_:I8e});function E8e(t,e,n,r,i=Ws.SUM_BY_NONZERO_WEIGHTS){const s=se(t,"labels","cosineDistance"),o=se(e,"predictions","cosineDistance");let a=null;r!=null&&(a=se(r,"weights","cosineDistance")),Xa(s.shape,o.shape,"Error in cosineDistance: ");const l=Rt(1),c=nt(l,lt(de(s,o),n,!0));return Wu(c,a,i)}const T8e=xe({cosineDistance_:E8e});function $8e(t,e,n,r=Ws.SUM_BY_NONZERO_WEIGHTS){let i=se(t,"labels","hingeLoss");const s=se(e,"predictions","hingeLoss");let o=null;n!=null&&(o=se(n,"weights","hingeLoss")),Xa(i.shape,s.shape,"Error in hingeLoss: ");const a=Rt(1);i=nt(de(Rt(2),i),a);const l=Vu(nt(a,de(i,s)));return Wu(l,o,r)}const P8e=xe({hingeLoss_:$8e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R8e(t,e,n,r=1,i=Ws.SUM_BY_NONZERO_WEIGHTS){const s=se(t,"labels","huberLoss"),o=se(e,"predictions","huberLoss");let a=null;n!=null&&(a=se(n,"weights","huberLoss")),Xa(s.shape,o.shape,"Error in huberLoss: ");const l=Rt(r),c=Si(nt(o,s)),u=Sg(c,l),d=nt(c,u),h=ze(de(Rt(.5),Vn(u)),de(l,d));return Wu(h,a,i)}const O8e=xe({huberLoss_:R8e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D8e(t,e,n,r=1e-7,i=Ws.SUM_BY_NONZERO_WEIGHTS){const s=se(t,"labels","logLoss"),o=se(e,"predictions","logLoss");let a=null;n!=null&&(a=se(n,"weights","logLoss")),Xa(s.shape,o.shape,"Error in logLoss: ");const l=Rt(1),c=Rt(r),u=or(de(s,Ga(ze(o,c)))),d=de(nt(l,s),Ga(ze(nt(l,o),c))),h=nt(u,d);return Wu(h,a,i)}const L8e=xe({logLoss_:D8e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M8e(t,e,n,r=Ws.SUM_BY_NONZERO_WEIGHTS){const i=se(t,"labels","meanSquaredError"),s=se(e,"predictions","meanSquaredError");let o=null;n!=null&&(o=se(n,"weights","meanSquaredError")),Xa(i.shape,s.shape,"Error in meanSquaredError: ");const a=Bte(i,s);return Wu(a,o,r)}const F8e=xe({meanSquaredError_:M8e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j8e(t,e){const n=se(t,"labels","sigmoidCrossEntropyWithLogits"),r=se(e,"logits","sigmoidCrossEntropyWithLogits");Xa(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const i=Vu(r),s=de(r,n),o=SD(Qo(or(Si(r))));return ze(nt(i,s),o)}function B8e(t,e,n,r=0,i=Ws.SUM_BY_NONZERO_WEIGHTS){let s=se(t,"multiClassLabels","sigmoidCrossEntropy");const o=se(e,"logits","sigmoidCrossEntropy");let a=null;if(n!=null&&(a=se(n,"weights","sigmoidCrossEntropy")),Xa(s.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){const c=Rt(r),u=Rt(1),d=Rt(.5);s=ze(de(s,nt(u,c)),de(d,c))}const l=j8e(s,o);return Wu(l,a,i)}const z8e=xe({sigmoidCrossEntropy_:B8e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U8e(t,e,n=-1){if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${e.rank} and dim was ${n}`);return pp((i,s,o)=>{const l=CD(s,[n],!0),c=nt(Ye(s,"float32"),l);o([i,c]);const u=or(de(c,i));return{value:lt(u,[n]),gradFunc:(f,p)=>{const[m,y]=p,g=Dr(f.shape,[n]);return[de(be(f,g),nt(Ye(m,"float32"),Qo(y))),de(be(f,g),nt(Qo(y),Ye(m,"float32")))]}}})(t,e)}function V8e(t,e,n,r=0,i=Ws.SUM_BY_NONZERO_WEIGHTS){let s=se(t,"onehotLabels","softmaxCrossEntropy");const o=se(e,"logits","softmaxCrossEntropy");let a=null;if(n!=null&&(a=se(n,"weights","softmaxCrossEntropy")),Xa(s.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){const c=Rt(r),u=Rt(1),d=Rt(s.shape[1]);s=ze(de(s,nt(u,c)),yt(c,d))}const l=U8e(s,o);return Wu(l,a,i)}const W8e=xe({softmaxCrossEntropy_:V8e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const au={flipLeftRight:Uje,grayscaleToRGB:Wje,resizeNearestNeighbor:qte,resizeBilinear:Gte,rgbToGrayscale:qje,rotateWithOffset:Kje,cropAndResize:Bje,nonMaxSuppression:Yje,nonMaxSuppressionAsync:i8e,nonMaxSuppressionWithScore:o8e,nonMaxSuppressionWithScoreAsync:l8e,nonMaxSuppressionPadded:u8e,nonMaxSuppressionPaddedAsync:h8e,threshold:y8e,transform:x8e},G8e={bandPart:w8e,gramSchmidt:S8e,qr:N8e},q8e={absoluteDifference:_8e,computeWeightedLoss:Wu,cosineDistance:T8e,hingeLoss:P8e,huberLoss:O8e,logLoss:L8e,meanSquaredError:F8e,sigmoidCrossEntropy:z8e,softmaxCrossEntropy:W8e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H8e=new Map,K8e=new Map;class h0{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}}class Ia{constructor(){this.classNameMap={}}static getMap(){return Ia.instance==null&&(Ia.instance=new Ia),Ia.instance}static register(e){Ia.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function Fe(t,e,n){Z(t.className!=null,()=>"Class being registered does not have the static className property defined."),Z(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),Z(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof n>"u"&&(n=t.className);const r=n,i=e+">"+r;return Ia.register(t),H8e.set(i,t),K8e.set(t,i),t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Nh extends h0{minimize(e,n=!1,r){const{value:i,grads:s}=this.computeGradients(e,r);if(r!=null){const o=r.map(a=>({name:a.name,tensor:s[a.name]}));this.applyGradients(o)}else this.applyGradients(s);return Qt(s),n?i:(i.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return LFe(e,n)}dispose(){this.iterations_!=null&&Qt(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:Rt(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(Nh,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Hte extends Nh{static get className(){return"Adadelta"}constructor(e,n,r=null){super(),this.learningRate=e,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=ye.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=ye.registeredVariables[r],o=!1;this.accumulatedGrads[i]==null&&(this.accumulatedGrads[i]={originalName:`${r}/accum_grad`,variable:Ne(()=>cn(s).variable(o))}),this.accumulatedUpdates[i]==null&&(this.accumulatedUpdates[i]={originalName:`${r}/accum_var`,variable:Ne(()=>cn(s).variable(o))});const a=Array.isArray(e)?e[i].tensor:e[r];if(a==null)return;const l=this.accumulatedGrads[i].variable,c=this.accumulatedUpdates[i].variable;Ne(()=>{const u=ze(de(l,this.rho),de(Vn(a),1-this.rho)),d=de(yt(as(ze(c,this.epsilon)),as(ze(l,this.epsilon))),a),h=ze(de(c,this.rho),de(Vn(d),1-this.rho));l.assign(u),c.assign(h);const f=ze(de(d,-this.learningRate),s);s.assign(f)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(Qt(this.accumulatedGrads.map(e=>e.variable)),Qt(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedUpdates=e.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Kte extends Nh{static get className(){return"Adagrad"}constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=ye.registeredVariables[r];this.accumulatedGrads[i]==null&&(this.accumulatedGrads[i]={originalName:`${r}/accumulator`,variable:Ne(()=>N5(s.shape,this.initialAccumulatorValue).variable(!1))});const o=Array.isArray(e)?e[i].tensor:e[r];if(o==null)return;const a=this.accumulatedGrads[i].variable;Ne(()=>{const l=ze(a,Vn(o));a.assign(l);const c=ze(de(yt(o,as(ze(l,ye.backend.epsilon()))),-this.learningRate),s);s.assign(c)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&Qt(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Xte extends Nh{static get className(){return"Adam"}constructor(e,n,r,i=null){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=i,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],Ne(()=>{this.accBeta1=Rt(n).variable(),this.accBeta2=Rt(r).variable()}),i==null&&(this.epsilon=ye.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);Ne(()=>{const r=nt(1,this.accBeta1),i=nt(1,this.accBeta2);n.forEach((s,o)=>{const a=ye.registeredVariables[s],l=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${s}/m`,variable:Ne(()=>cn(a).variable(l))}),this.accumulatedSecondMoment[o]==null&&(this.accumulatedSecondMoment[o]={originalName:`${s}/v`,variable:Ne(()=>cn(a).variable(l))});const c=Array.isArray(e)?e[o].tensor:e[s];if(c==null)return;const u=this.accumulatedFirstMoment[o].variable,d=this.accumulatedSecondMoment[o].variable,h=ze(de(u,this.beta1),de(c,1-this.beta1)),f=ze(de(d,this.beta2),de(Vn(c),1-this.beta2)),p=yt(h,r),m=yt(f,i);u.assign(h),d.assign(f);const y=ze(de(yt(p,ze(as(m),this.epsilon)),-this.learningRate),a);a.assign(y)}),this.accBeta1.assign(de(this.accBeta1,this.beta1)),this.accBeta2.assign(de(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&Qt(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&Qt(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),Ne(()=>{this.accBeta1.assign(fp(this.beta1,this.iterations_+1)),this.accBeta2.assign(fp(this.beta2,this.iterations_+1))});const n=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Yte extends Nh{static get className(){return"Adamax"}constructor(e,n,r,i=null,s=0){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=i,this.decay=s,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],Ne(()=>{this.iteration=Rt(0).variable(),this.accBeta1=Rt(n).variable()}),i==null&&(this.epsilon=ye.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);Ne(()=>{const r=nt(1,this.accBeta1),i=yt(-this.learningRate,ze(de(this.iteration,this.decay),1));n.forEach((s,o)=>{const a=ye.registeredVariables[s],l=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${s}/m`,variable:cn(a).variable(l)}),this.accumulatedWeightedInfNorm[o]==null&&(this.accumulatedWeightedInfNorm[o]={originalName:`${s}/v`,variable:cn(a).variable(l)});const c=Array.isArray(e)?e[o].tensor:e[s];if(c==null)return;const u=this.accumulatedFirstMoment[o].variable,d=this.accumulatedWeightedInfNorm[o].variable,h=ze(de(u,this.beta1),de(c,1-this.beta1)),f=de(d,this.beta2),p=Si(c),m=Ch(f,p);u.assign(h),d.assign(m);const y=ze(de(yt(i,r),yt(h,ze(m,this.epsilon))),a);a.assign(y)}),this.iteration.assign(ze(this.iteration,1)),this.accBeta1.assign(de(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&Qt(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&Qt(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class YD extends Nh{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=Array.isArray(e)?e[i].tensor:e[r];if(s==null)return;const o=ye.registeredVariables[r];Ne(()=>{const a=ze(de(this.c,s),o);o.assign(a)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=yc(Rt(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Zte extends YD{static get className(){return"Momentum"}constructor(e,n,r=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=Rt(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=ye.registeredVariables[r];this.accumulations[i]==null&&(this.accumulations[i]={originalName:`${r}/momentum`,variable:Ne(()=>cn(s).variable(!1))});const o=this.accumulations[i].variable,a=Array.isArray(e)?e[i].tensor:e[r];a!=null&&Ne(()=>{let l;const c=ze(de(this.m,o),a);this.useNesterov?l=ze(de(this.c,ze(a,de(c,this.m))),s):l=ze(de(this.c,c),s),o.assign(c),s.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&Qt(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Jte extends Nh{static get className(){return"RMSProp"}constructor(e,n=.9,r=0,i=null,s=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=r,this.epsilon=i,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=s,i==null&&(this.epsilon=ye.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=ye.registeredVariables[r],o=!1;this.accumulatedMeanSquares[i]==null&&(this.accumulatedMeanSquares[i]={originalName:`${r}/rms`,variable:Ne(()=>cn(s).variable(o))}),this.accumulatedMoments[i]==null&&(this.accumulatedMoments[i]={originalName:`${r}/momentum`,variable:Ne(()=>cn(s).variable(o))}),this.accumulatedMeanGrads[i]==null&&this.centered&&(this.accumulatedMeanGrads[i]={originalName:`${r}/mg`,variable:Ne(()=>cn(s).variable(o))});const a=Array.isArray(e)?e[i].tensor:e[r];if(a==null)return;const l=this.accumulatedMeanSquares[i].variable,c=this.accumulatedMoments[i].variable;Ne(()=>{const u=ze(de(l,this.decay),de(Vn(a),1-this.decay));if(this.centered){const d=this.accumulatedMeanGrads[i].variable,h=ze(de(d,this.decay),de(a,1-this.decay)),f=yt(de(a,this.learningRate),as(nt(u,ze(Vn(h),this.epsilon)))),p=ze(de(c,this.momentum),f);l.assign(u),d.assign(h),c.assign(p);const m=nt(s,p);s.assign(m)}else{const d=ze(de(l,this.decay),de(Vn(a),1-this.decay)),h=ze(de(c,this.momentum),yt(de(a,this.learningRate),as(ze(d,this.epsilon))));l.assign(d),c.assign(h);const f=nt(s,h);s.assign(f)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&Qt(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&Qt(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&Qt(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedMoments=e.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X8e=[Hte,Kte,Xte,Yte,Zte,Jte,YD];function Y8e(){for(const t of X8e)Fe(t)}function ZD(t,e){const n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if($e(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const i=e.shape,s=i[i.length-1];let o=1;for(let d=0;d<i.length-1;++d)o*=i[d];const a=t.shape,l=i.slice();l.pop();let c=1;for(let d=s;d<n;++d)c*=a[d],l.push(a[d]);const u=[...wt(t.shape).map(d=>d/c),1].slice(0,s);return[l,o,c,u]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q3=-2,Z8e=-1;function JD(t,e,n){const r=t.shape.length;Z(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),Z(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let i=0;i<r;++i)Z(e[i]+n[i]<=t.shape[i],()=>`Error in slice${r}D: begin[${i}] + size[${i}] (${e[i]+n[i]}) would overflow input.shape[${i}] (${t.shape[i]})`)}function J8e(t){const e=[];let n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function QD(t,e,n){const r=[];for(let i=0;i<t.length;i++)r[i]=Math.ceil((e[i]-t[i])/n[i]);return r}function Qte(t,e,n,r){const i=[...t];for(let s=i.length;s<r.length;s++)i.push(1);for(let s=0;s<n;s++)s===0?i[e]=1:(i.splice(e,0,1),i.pop());return i}function ene(t,e,n){return n<=t?n:n-(e-1)}function tne(t,e){const n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function Q8e(t,e,n,r,i,s,o,a,l){const c=t.length;let u=new Array(c),d=new Array(c),h=new Array(c);if(e.length&&n>0){const f=e[0],p=n+1;u=nne(o,f,p,r,t),d=rne(a,f,p,i,t),h=Qte(s,f,p,t)}else for(let f=0;f<c;f++)u[f]=sne(o,r,s,t,f,l),d[f]=one(a,i,s,t,f,l),h[f]=ine(s,f,l);return{begin:u,end:d,strides:h}}function nne(t,e,n,r,i){const s=[...i],o=tne(n,e);for(let a=0;a<s.length;a++)if(o.indexOf(a)>-1)s[a]=0;else{const l=ene(e,n,a);let c=r[l];t&1<<l&&(c=0),s[a]=c}return s}function rne(t,e,n,r,i){const s=[...i],o=tne(n,e);for(let a=0;a<s.length;a++)if(o.indexOf(a)>-1)s[a]=Number.MAX_SAFE_INTEGER;else{const l=ene(e,n,a);let c=r[l];t&1<<l&&(c=Number.MAX_SAFE_INTEGER),s[a]=c}for(let a=0;a<s.length;a++){const l=i[a];s[a]<0&&(s[a]+=l),s[a]=op(0,s[a],i[a])}return s}function ine(t,e,n){let r=t[e];return(n&1<<e||r==null)&&(r=1),r}function sne(t,e,n,r,i,s){let o=e[i];const a=n[i]||1;(t&1<<i||s&1<<i||o==null)&&(a>0?o=Number.MIN_SAFE_INTEGER:o=Number.MAX_SAFE_INTEGER);const l=r[i];return o<0&&(o+=l),o=op(0,o,l-1),o}function one(t,e,n,r,i,s){let o=e[i];const a=n[i]||1;(t&1<<i||s&1<<i||o==null)&&(a>0?o=Number.MAX_SAFE_INTEGER:o=Number.MIN_SAFE_INTEGER);const l=r[i];return o<0&&(o+=l),a>0?o=op(0,o,l):o=op(-1,o,l-1),o}function eL(t,e,n){let r=n.length;for(let i=0;i<n.length;i++)if(n[i]>1){r=i;break}for(let i=r+1;i<n.length;i++)if(e[i]>0||n[i]!==t[i])return!1;return!0}function tL(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function E5(t,e,n){let r;const i=t.shape.length;typeof e=="number"?r=[e,...new Array(i-1).fill(0)]:e.length<i?r=e.concat(new Array(i-e.length).fill(0)):r=e.slice(),r.forEach(o=>{Z(o!==-1,()=>"slice() does not support negative begin indexing.")});let s;return n==null?s=new Array(i).fill(-1):typeof n=="number"?s=[n,...new Array(i-1).fill(-1)]:n.length<i?s=n.concat(new Array(i-n.length).fill(-1)):s=n,s=s.map((o,a)=>o>=0?o:(Z(o===-1,()=>`Negative size values should be exactly -1 but got ${o} for the slice() size at index ${a}.`),t.shape[a]-r[a])),[r,s]}function nL(t,e,n,r,i,s,o,a,l){let c;if(r==null?(c=new Array(e.length),c.fill(1)):c=r,o!=null&&o&o-1)throw new Error("Multiple ellipses in slice is not allowed.");let u=!1;const d={dims:c.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:c.slice(),beginMask:i,endMask:s,ellipsisMask:o,newAxisMask:a,shrinkAxisMask:l};for(let x=0;x<d.dims;x++)u&&1<<x&a&&d.numAddAxisAfterEllipsis++,1<<x&o&&(u=!0);u||(d.ellipsisMask|=1<<d.dims,d.dims++);const h={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};eBe(d,h);let f=!0,p=!0,m=!0;const y=[],g=[];for(let x=0;x<t.length;++x){if(h.strides[x]===0)throw Error(`strides[${x}] must be non-zero`);const b=!!(h.shrinkAxisMask&1<<x),S=t[x];if(S===-1){y.push(b?1:-1);continue}const A=[h.beginMask&1<<x,h.endMask&1<<x],E=[h.strides[x]>0?0:-1,h.strides[x]>0?S:S-1];if(b&&h.strides[x]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&h.strides[x]===1;const I=!!(h.beginMask&1<<x&&h.endMask&1<<x);if(h.beginValid&&h.endValid){if(b){const R=h.begin[x]<0?S+h.begin[x]:h.begin[x];if(h.begin[x]=R,h.end[x]=h.begin[x]+1,R<0||R>=S)throw Error(`slice index ${h.begin[x]} of dimension ${x} out of bounds.`)}else h.begin[x]=SU(h.begin[x],0,h.strides[x],S,A,E),h.end[x]=SU(h.end[x],1,h.strides[x],S,A,E);const $=h.strides[x]===1&&h.begin[x]===0&&h.end[x]===S;f=f&&$,p=p&&(x===0&&h.strides[x]===1||$)}else f=f&&h.strides[x]===1&&I,p=p&&(x===0&&h.strides[x]===1||I);let T,O=!1;if(h.beginValid&&h.endValid?(T=h.end[x]-h.begin[x],O=!0):b?(T=1,O=!0):I&&S>=0&&(h.strides[x]<0?T=-S:T=S,O=!0),O){let $;T===0||T<0!=h.strides[x]<0?$=0:$=Math.trunc(T/h.strides[x])+(T%h.strides[x]!==0?1:0),y.push($)}else y.push(-1)}for(let x=0;x<h.finalShapeGatherIndices.length;++x){const b=h.finalShapeGatherIndices[x];b>=0?g.push(y[b]):b===q3&&g.push(1)}return{finalShapeSparse:g.filter((x,b)=>h.finalShapeGatherIndices[b]!==q3),finalShape:g,isIdentity:f,sliceDim0:p,isSimpleSlice:m,begin:h.begin,end:h.end,strides:h.strides}}function eBe(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){const i=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<i;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(q3),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[r]),t.end!=null&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(Z8e),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}function SU(t,e,n,r,i,s){if(i[e])return n>0?s[e]:s[e+1&1];{const o=t<0?r+t:t;return o<s[0]?s[0]:o>s[1]?s[1]:o}}const tBe=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:JD,computeFlatOffset:tL,computeOutShape:QD,getNormalizedAxes:Q8e,isSliceContinous:eL,maskToAxes:J8e,parseSliceParams:E5,sliceInfo:nL,startForAxis:sne,startIndicesWithElidedDims:nne,stopForAxis:one,stopIndicesWithElidedDims:rne,stridesForAxis:ine,stridesWithElidedDims:Qte},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nBe{static sgd(e){return new YD(e)}static momentum(e,n,r=!1){return new Zte(e,n,r)}static rmsprop(e,n=.9,r=0,i=null,s=!1){return new Jte(e,n,r,i,s)}static adam(e=.001,n=.9,r=.999,i=null){return new Xte(e,n,r,i)}static adadelta(e=.001,n=.95,r=null){return new Hte(e,n,r)}static adamax(e=.002,n=.9,r=.999,i=null,s=0){return new Yte(e,n,r,i,s)}static adagrad(e,n=.1){return new Kte(e,n)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hf=nBe;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rBe=(()=>typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t())();function ane(){return new Promise(t=>rBe(()=>t()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rL(t,e){const n=t[0].length;t.forEach((i,s)=>{Z(i.length===n,()=>`Error in concat${n}D: rank of tensors[${s}] must be the same as the rank of the rest (${n})`)}),Z(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=t[0];t.forEach((i,s)=>{for(let o=0;o<n;o++)Z(o===e||i[o]===r[o],()=>`Error in concat${n}D: Shape of tensors[${s}] (${i}) does not match the shape of the rest (${r}) along the non-concatenated axis ${s}.`)})}function vc(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var yl;(function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"})(yl||(yl={}));function lne(t,e,n){let r=new Array;if(n==null&&e==null)return r;if(e==null)for(;r.length<t+n.length;)r.push(-1);else r=e.slice();if(n==null)return r;if(t+n.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${r.length}`);for(let i=1;i<n.length;++i){const s=n[i],o=r[r.length-n.length+i],a=r[o];if(s>=0)if(a>=0){if(a!==s)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${i+t}] = ${s} but shape[${i+t}] = ${a}`)}else r[o]=s}return r}function cne(t){const e={FIRST_DIM_SIZE:yl.FIRST_DIM_SIZE,VALUE_ROWIDS:yl.VALUE_ROWIDS,ROW_LENGTHS:yl.ROW_LENGTHS,ROW_SPLITS:yl.ROW_SPLITS,ROW_LIMITS:yl.ROW_LIMITS,ROW_STARTS:yl.ROW_STARTS},n=[];for(const r of t)if(r in e)n.push(e[r]);else break;return n}function une(t){return t.length===0?0:t[0]===yl.FIRST_DIM_SIZE?t.length-1:t.length}function dne(t,e){if(t==null||e==null)return;const n=t.length,r=e.length;if(n>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let i=0;i<Math.min(n,r-1);++i){const s=t[i],o=e[i+1];if(s>=0&&o>=0&&s!==1&&s!==o)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${i-t.length}] = ${s} but ragged tensor input.flatValues.shape[${i-t.length}] = ${o}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iL=30;function T5(t){return t<=iL?t:_3(t,Math.floor(Math.sqrt(t)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sL(t,e,n){const r=n*(typeof t=="number"?t:t[0]),i=e*(typeof t=="number"?t:t[1]);return[r,i]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kx(t,e,n,r=!0){let i=[];if(r)i=i.concat(e.slice(0)),i.push(t[0]/n),i=i.concat(t.slice(1));else{i=i.concat(t[0]);const s=e.length;for(let o=0;o<s;++o)i=i.concat([t[o+1]/e[o],e[o]]);i=i.concat(t.slice(s+1))}return i}function Xx(t,e,n=!0){const r=[];if(n){r.push(e);for(let i=e+1;i<t;++i)i<=2*e?(r.push(i),r.push(i-(e+1))):r.push(i)}else{const i=[],s=[];for(let o=1;o<t;++o)o>=e*2+1||o%2===1?s.push(o):i.push(o);r.push(...i),r.push(0),r.push(...s)}return r}function Yx(t,e,n,r=!0){const i=[];r?i.push(t[0]/n):i.push(t[0]*n);for(let s=1;s<t.length;++s)s<=e.length?r?i.push(e[s-1]*t[s]):i.push(t[s]/e[s-1]):i.push(t[s]);return i}function oL(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function aL(t,e,n){const r=t.slice(0,1);for(let i=0;i<n;++i)r.push(t[i+1]-e[i][0]-e[i][1]);return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $5=1.7580993408473768,P5=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lL=.3275911,cL=.254829592,uL=-.284496736,dL=1.421413741,hL=-1.453152027,fL=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _u(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(t.length*2);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function hne(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function fne(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let i=0;i<t.length;i+=4)n[Math.floor(i/4)]=t[i],r[Math.floor(i/4)]=t[i+1];return{real:n,imag:r}}function pne(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let i=2;i<t.length;i+=4)n[Math.floor(i/4)]=t[i],r[Math.floor(i/4)]=t[i+1];return{real:n,imag:r}}function pL(t,e){const n=t[e*2],r=t[e*2+1];return{real:n,imag:r}}function mne(t,e,n,r){t[r*2]=e,t[r*2+1]=n}function gne(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let i=0;i<Math.ceil(t/2);i++){const s=(e?2:-2)*Math.PI*(i/t);n[i]=Math.cos(s),r[i]=Math.sin(s)}return{real:n,imag:r}}function yne(t,e,n){const r=(n?2:-2)*Math.PI*(t/e),i=Math.cos(r),s=Math.sin(r);return{real:i,imag:s}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S_="->",iBe=/->/g,CU=",",NU="...";function mL(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(iBe,"").length)/S_.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${S_}").`);const[r,i]=t.split(S_);Z(r.indexOf(NU)===-1,()=>`The ellipsis notation ("${NU}") is not supported yet.`);const s=r.split(CU),o=s.length;if(e!==o)throw new Error(`Expected ${o} input tensors, received ${e}`);if(o>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const a=[];for(let h=0;h<i.length;++h){const f=i[h];if(!s.some(p=>p.indexOf(f)!==-1))throw new Error(`Output subscripts contain the label ${f} not present in the input subscripts.`);a.indexOf(f)===-1&&a.push(f)}for(let h=0;h<r.length;++h){const f=r[h];a.indexOf(f)===-1&&f!==CU&&a.push(f)}const l=new Array(s.length);for(let h=0;h<o;++h){if(new Set(s[h].split("")).size!==s[h].length)throw new Error(`Found duplicate axes in input component ${s[h]}. Support for duplicate axes in input is not implemented yet.`);l[h]=[];for(let f=0;f<s[h].length;++f)l[h].push(a.indexOf(s[h][f]))}const c=a.length,u=i.length,d=[];for(let h=u;h<c;++h)d.push(h);return{allDims:a,summedDims:d,idDims:l}}function gL(t,e){let n=new Array(t);n.fill(-1);for(let i=0;i<e.length;++i)n[e[i]]=i;const r=[];for(let i=0;i<t;++i)n[i]===-1&&r.push(i);return n=n.filter(i=>i!==-1),{permutationIndices:n,expandDims:r}}function yL(t,e,n){const r=new Array(t);for(let i=0;i<n.length;++i){const s=n[i].shape;for(let o=0;o<e[i].length;++o)r[e[i][o]]===void 0?r[e[i][o]]=s[o]:Z(r[e[i][o]]===s[o],()=>`Expected dimension ${r[e[i][o]]} at axis ${o} of input shaped ${JSON.stringify(s)}, but got dimension ${s[o]}`)}}function vL(t,e){const n=t,r=[];let i=0;t.length===0&&n.push(-1),i=t.length+1;for(let o=0;o<i;++o)r.push([]);const s=[];for(let o=0;o<n.length;++o){const a=n[o],l=sBe(e,a);for(const c of l)s.indexOf(c)===-1&&(r[o].push(c),s.push(c))}return{path:n,steps:r}}function xL(t){return t.every((e,n)=>e===n)}function sBe(t,e){const n=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(e)!==-1||e===-1)&&n.push(r);return n}function bL(t,e,n=0){let r=[];if(typeof e=="number")Z(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{const i=e.reduce((o,a)=>(a===-1&&(o+=1),o),0);Z(i<=1,()=>"There should be only one negative value in split array.");const s=e.indexOf(-1);if(s!==-1){const o=e.reduce((a,l)=>l>0?a+l:a);e[s]=t.shape[n]-o}Z(t.shape[n]===e.reduce((o,a)=>o+a),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vne(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function xne(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function bne(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wne(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function kne(t,e){return`size ${t} must be non-negative, not ${e}`}function Sne(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function Cne(t,e){const n=$e(t),r=$e(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${e}`}function Nne(t,e){const n=$e(t),r=$e(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H3(){return"segment ids must be >= 0"}function Ane(){return"segment ids are not increasing"}function Ine(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function _ne(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ene(t,e){let n=!1,r;for(t<=iL?(r=t,n=!0):r=_3(t,Math.floor(Math.sqrt(t)));!n;)r>e||r===t?n=!0:r=_3(t,r+1);return r}function Tne(t,e,n){const r=[],i=t.length;for(let s=0;s<i;s++)s!==e?r.push(t[s]):r.push(n);return r}function wL(t,e,n,r){const i=e.shape.length,s=t.shape.length;if(r!==0&&(r<-i||r>i))throw new Error(`Expect batchDims in the range of [-${i}, ${i}], but got ${r}`);if(r<0&&(r+=i),r>s)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${s}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let d=0;d<r;++d)if(t.shape[d]!==e.shape[d])throw new Error(`x.shape[${d}]: ${t.shape[d]} should be equal to indices.shape[${d}]: ${e.shape[d]}.`);const o=t.shape[n],a=[];let l=1,c=1,u=1;for(let d=0;d<r;++d)a.push(t.shape[d]),l*=t.shape[d];for(let d=r;d<n;d++)a.push(t.shape[d]),c*=t.shape[d];for(let d=r;d<i;d++)a.push(e.shape[d]);for(let d=n+1;d<s;d++)a.push(t.shape[d]),u*=t.shape[d];return{batchSize:l,sliceSize:u,outerSize:c,dimSize:o,outputShape:a}}const oBe=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:wL,computeOutShape:Tne,segOpComputeOptimalWindowSize:Ene},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eu(t){try{return t.map(e=>ih(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function $ne(t){return t.map(e=>Gd(e))}const aBe=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:cL,ERF_A2:uL,ERF_A3:dL,ERF_A4:hL,ERF_A5:fL,ERF_P:lL,PARALLELIZE_THRESHOLD:iL,get RowPartitionType(){return yl},SELU_SCALE:P5,SELU_SCALEALPHA:$5,applyActivation:WD,assertAndGetBroadcastShape:Ut,assertAxesAreInnerMostDims:Wi,assertParamsConsistent:rL,assignToTypedArray:mne,axesAreInnerMostDims:xD,calculateShapes:Pp,checkEinsumDimSizes:yL,checkPadOnDimRoundingMode:ro,combineLocations:Ste,combineRaggedTensorToTensorShapes:lne,complexWithEvenIndex:fne,complexWithOddIndex:pne,computeConv2DInfo:Vi,computeConv3DInfo:kh,computeDefaultPad:fD,computeDilation2DInfo:Vx,computeOptimalWindowSize:T5,computeOutAndReduceShapes:Pi,computeOutShape:vc,computePool2DInfo:Ya,computePool3DInfo:Bu,convertConv2DDataFormat:zu,decodeEinsumEquation:mL,eitherStridesOrDilationsAreOne:cs,expandShapeToKeepDim:Dr,exponent:yne,exponents:gne,fromStringArrayToUint8:$ne,fromUint8ToStringArray:Eu,getAxesPermutation:yr,getBroadcastDims:kg,getComplexWithIndex:pL,getEinsumComputePath:vL,getEinsumPermutation:gL,getFusedBiasGradient:VD,getFusedDyActivation:UD,getImageCenter:sL,getInnerMostAxes:Mr,getPermuted:Xx,getRaggedRank:une,getReductionAxes:hi,getReshaped:Kx,getReshapedPermuted:Yx,getRowPartitionTypesHelper:cne,getSliceBeginCoords:oL,getSliceSize:aL,getSparseFillEmptyRowsIndicesDenseShapeMismatch:vne,getSparseFillEmptyRowsNegativeIndexErrorMessage:xne,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:bne,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:Sne,getSparseReshapeInputOutputMismatchErrorMessage:Nne,getSparseReshapeInputOutputMultipleErrorMessage:Cne,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:wne,getSparseReshapeNegativeOutputDimErrorMessage:kne,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:_ne,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:H3,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:Ane,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:Ine,getUndoAxesPermutation:Sh,isIdentityPermutation:xL,log:NDe,mergeRealAndImagArrays:_u,prepareAndValidate:ZD,prepareSplitSize:bL,segment_util:oBe,shouldFuse:GD,slice_util:tBe,splitRealAndImagArrays:hne,stridesOrDilationsArePositive:dp,tupleValuesAreOne:up,upcastType:bo,validateDefaultValueShape:dne,validateInput:vje,validateUpdateShape:zte,warn:zo},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y8e();/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pne={kernelName:bN,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>de(t,Hx(Ye(n,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lBe={kernelName:Kv,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Vn(Ye(n,"float32")),i=as(nt(Rt(1),r));return or(yt(t,i))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cBe={kernelName:Xv,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=as(nt(Vn(Ye(n,"float32")),1));return yt(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uBe={kernelName:a0,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=Ut(n.shape,r.shape);return{a:()=>{let a=t;const l=hi(n.shape,i);return l.length>0&&(a=lt(a,l)),be(a,n.shape)},b:()=>{let a=t;const l=hi(r.shape,i);return l.length>0&&(a=lt(a,l)),be(a,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dBe={kernelName:SO,saveAllInputs:!0,gradFunc:(t,e)=>{const n={};return e.forEach((r,i)=>{n[i]=()=>t.clone()}),n}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hBe={kernelName:wN,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>cn(n)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fBe={kernelName:kN,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>cn(n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pBe={kernelName:Yv,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>yt(t,as(nt(Rt(1),Vn(Ye(n,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mBe={kernelName:Zv,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=as(ze(Rt(1),Vn(Ye(n,"float32"))));return yt(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gBe={kernelName:ex,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=Ut(n.shape,r.shape);return{a:()=>{const a=ze(Vn(n),Vn(r));let l=de(t,yt(r,a));const c=hi(n.shape,i);return c.length>0&&(l=lt(l,c)),be(l,n.shape)},b:()=>{const a=ze(Vn(n),Vn(r));let l=or(de(t,yt(n,a)));const c=hi(r.shape,i);return c.length>0&&(l=lt(l,c)),be(l,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yBe={kernelName:Jv,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>yt(t,ze(Vn(Ye(n,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vBe={kernelName:Qv,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>yt(t,nt(Rt(1),Vn(Ye(n,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xBe(t,e,n,r,i,s){const o=se(t,"dy","avgPool3dGrad"),a=se(e,"input","avgPool3dGrad");let l=o,c=a,u=!1;a.rank===4&&(u=!0,l=be(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),c=be(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),Z(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),Z(c.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${c.rank}.`),ro("avgPool3dGrad",i,s);const d={dy:l,input:c},h={filterSize:n,strides:r,pad:i,dimRoundingMode:s},f=ye.runKernel(IO,d,h);return u?be(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const bBe=xe({avgPool3dGrad_:xBe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wBe={kernelName:CN,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:i,strides:s,pad:o,dimRoundingMode:a}=n;return{x:()=>bBe(t,r,i,s,o,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kBe(t,e,n,r,i){const s=se(t,"dy","avgPoolGrad"),o=se(e,"input","avgPoolGrad");Z(o.rank===s.rank,()=>`Rank of input (${o.rank}) does not match rank of dy (${s.rank})`);let a=o,l=s,c=!1;o.rank===3&&(c=!0,a=be(o,[1,o.shape[0],o.shape[1],o.shape[2]]),l=be(s,[1,s.shape[0],s.shape[1],s.shape[2]])),Z(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),Z(a.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${a.rank}.`);const u={dy:l,input:a},d={filterSize:n,strides:r,pad:i},h=ye.runKernel(AO,u,d);return c?be(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const SBe=xe({avgPoolGrad_:kBe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CBe={kernelName:SN,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:i,strides:s,pad:o}=n;return{x:()=>SBe(t,r,i,s,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NBe={kernelName:NN,inputsToSave:["a","b"],gradFunc:(t,e,n)=>{const[r,i]=e,{transposeA:s,transposeB:o}=n;return!s&&!o?{a:()=>gn(t,i,!1,!0),b:()=>gn(r,t,!0,!1)}:!s&&o?{a:()=>gn(t,i,!1,!1),b:()=>gn(t,r,!0,!1)}:s&&!o?{a:()=>gn(i,t,!1,!0),b:()=>gn(r,t,!1,!1)}:{a:()=>gn(i,t,!0,!0),b:()=>gn(t,r,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ABe={kernelName:AN,gradFunc:(t,e,n)=>{const{blockShape:r,crops:i}=n;return{x:()=>ED(t,r,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IBe={kernelName:wDe,gradFunc:(t,e,n)=>{const r=n,i=r.inputShape,s=r.shape,o=Array.from(s);for(let l=i.length-1;l>=0;l--)if(i[l]===s[l])o[l]=1;else if(i[l]!==1)throw new Error(`broadcastTo(): [${i}] cannot be broadcast to [${s}].`);const a=[];for(let l=0;l<o.length;l++)o[l]>1&&a.push(l);return{x:()=>lt(t,a,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Be={kernelName:tx,gradFunc:t=>({x:()=>t.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EBe={kernelName:nx,gradFunc:t=>({x:()=>cn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TBe={kernelName:rx,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{clipValueMin:i,clipValueMax:s}=n;return{x:()=>Ts(Au(Tp(r,i),u0(r,s)),t,cn(t))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Be={kernelName:IN,inputsToSave:["x"],gradFunc:Pne.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PBe={kernelName:_N,saveAllInputs:!0,gradFunc:(t,e,n)=>{const r=e.map(l=>l.shape),{axis:i}=n,s=Yt(i,e[0].shape)[0],o=r.map(l=>l[s]);return Ko(t,o,s).map(l=>()=>l)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RBe={kernelName:EN,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,i]=e,{dilations:s,strides:o,pad:a,dataFormat:l}=n;return Z(up(s),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`),{x:()=>gD(r.shape,t,i,o,a,l),filter:()=>zD(r,t,i.shape,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OBe={kernelName:TN,inputsToSave:["dy","filter"],gradFunc:(t,e,n)=>{const[r,i]=e,{strides:s,pad:o,dataFormat:a,dimRoundingMode:l}=n;return{dy:()=>hp(t,i,s,o,a,1,l),filter:()=>zD(t,r,i.shape,s,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DBe(t,e,n,r,i){let s=t;t.rank===4&&(s=be(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let o=e;o.rank===4&&(o=be(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),Z(s.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${s.shape}.`),Z(o.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${o.shape}.`),Z(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),Z(s.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${s.shape[4]}) must match input depth in filter (${n[3]}.`),Z(o.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${o.shape[4]}) must match output depth for filter (${n[4]}).`);const a={x:s,dy:o},l={strides:r,pad:i,filterShape:n};return ye.runKernel(PO,a,l)}const LBe=xe({conv3DBackpropFilter_:DBe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MBe={kernelName:$N,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:i,pad:s}=n;Z(up(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const[o,a]=e;return{x:()=>xte(o.shape,t,a,i,s),filter:()=>LBe(o,t,a.shape,i,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FBe={kernelName:ix,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>de(or(Lte(Ye(n,"float32"))),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jBe={kernelName:sx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>de(Mte(Ye(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BBe={kernelName:PN,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:i,exclusive:s,reverse:o}=n;return{x:()=>{const a=yr([i],r.rank);let l=wte(t,i,s,!o);return a!=null&&(l=ln(l,a)),l}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zBe={kernelName:RN,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:i,pad:s,dimRoundingMode:o}=n,a=r??[1,1];Z(up(a),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);const[l,c]=e;return Z(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),Z(c.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${c.rank}.`),Z(l.shape[3]===c.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${c.shape[2]}.`),Z(cs(i,a),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${i} and dilations '${a}'.`),ro("depthwiseConv2d",s,o),{x:()=>Mje(l.shape,t,c,i,s,a,o),filter:()=>Dje(l,t,c.shape,i,s,a,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UBe={kernelName:ON,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,i]=e,s={x:r,filter:i,dy:t},o={x:r,filter:i,dy:t};return{x:()=>ye.runKernel(E3,s,n),filter:()=>ye.runKernel(T3,o,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VBe={kernelName:ax,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e,r={dy:t,y:n};return{x:()=>ye.runKernel(zO,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WBe={kernelName:lx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=de(Qo(or(Vn(n))),2/Math.sqrt(Math.PI));return{x:()=>de(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GBe={kernelName:cx,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>de(t,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qBe={kernelName:LN,inputsToSave:["input"],gradFunc:(t,e)=>{const[n]=e;return{input:()=>be(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HBe={kernelName:ux,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>de(t,Qo(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KBe={kernelName:dx,gradFunc:t=>({x:()=>cn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XBe={kernelName:hx,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=Ut(n.shape,r.shape);return{a:()=>{const a=yt(t,Ye(r,"float32")),l=hi(n.shape,i);return l.length>0?be(lt(a,l),n.shape):a},b:()=>{let a=de(t,Ye(n,"float32"));const l=hi(r.shape,i);l.length>0&&(a=be(lt(a,l),r.shape));const c=Vn(r);return or(yt(a,Ye(c,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YBe={kernelName:MN,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,e,n)=>{const{varianceEpsilon:r}=n,[i,s,o,a]=e,l=a??Rt(1),c=hi(s.shape,i.shape),u=[];if(s.rank===1){for(let b=0;b<i.shape.length-1;++b)u.push(i.shape[b]);u.push(1)}const d=nt(i,s),h=de(t,l),f=Rte(ze(o,Rt(r))),p=de(de(de(f,f),f),Rt(-.5));return{x:()=>s.rank===1?be(de(de(t,wl(be(f,[1,1,1,s.shape[0]]),u)),l),i.shape):be(de(de(t,f),l),i.shape),mean:()=>{let b=de(de(f,Rt(-1)),h);return s.rank===1&&(b=lt(b,c)),be(b,s.shape)},variance:()=>{let b=de(de(p,d),h);return s.rank===1&&(b=lt(b,c)),be(b,s.shape)},scale:()=>{const b=de(d,f);let S=de(t,b);return s.rank===1&&(S=lt(S,c)),be(S,s.shape)},offset:()=>{let b=t;return s.rank===1&&(b=lt(b,c)),be(b,s.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZBe={kernelName:FN,inputsToSave:["x","indices"],gradFunc:(t,e,n)=>{const[r,i]=e,{axis:s,batchDims:o}=n,a=Yt(s,r.shape)[0],l=(c,u,d)=>()=>{const h=c.shape,f=u.size,p=h.slice(0,a),m=p.length,y=h.slice(s,h.length).slice(1),g=y.length,v=AU(0,m),x=AU(m+1,m+1+g),b=IU([p,[f],y]),S=be(d,b),A=be(u,[f]),E=IU([[m],v,x]),I=ln(S,E);let T=Vte(I,A,c.shape[a]);const O=Sh(E);return T=ln(T,O),T};if(o===1){const c=r.shape[0],u=r.split(c,0);return{x:()=>Iu(u.map((f,p)=>l(f,i.slice(p,1),t.slice(p,1))())).reshape(r.shape),indices:()=>i}}else return{x:l(r,i,t),indices:()=>i}}};function AU(t,e){const n=[];for(let r=t;r<e;++r)n.push(r);return n}function IU(t){const e=[];for(let n=0;n<t.length;++n)for(let r=0;r<t[n].length;++r)e.push(t[n][r]);return e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JBe={kernelName:fx,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>cn(n),b:()=>cn(r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QBe={kernelName:px,gradFunc:t=>({x:()=>Ye(t,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eze={kernelName:mx,gradFunc:t=>({x:()=>cn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tze={kernelName:gx,gradFunc:t=>({x:()=>cn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nze={kernelName:yx,gradFunc:t=>({x:()=>cn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rze={kernelName:BN,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{alpha:i}=n,s=ra(r,0);return{x:()=>Ts(s,t,de(t,i))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ize={kernelName:xx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>yt(t,ze(n,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sze={kernelName:vx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>yt(t,Ye(n,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oze={kernelName:SDe,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{axis:i}=n;return{logits:()=>{const o=Qo(r);return nt(t,de(lt(t,i,!0),o))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aze(t,e,n,r=5,i=1,s=1,o=.5){const a={x:t,y:e,dy:n},l={depthRadius:r,bias:i,alpha:s,beta:o};return ye.runKernel(HO,a,l)}const lze=xe({localResponseNormalizationBackprop_:aze});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cze={kernelName:qN,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{depthRadius:s,bias:o,alpha:a,beta:l}=n;return{x:()=>lze(r,i,t,s,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rne(t,e,n,r){return e.rank<n.rank&&(e=be(e,Dr(e.shape,r))),t.rank<n.rank&&(t=be(t,Dr(t.shape,r))),{x:()=>de(t,Ye(Cc(n,e),t.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _U={kernelName:HN,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{reductionIndices:i}=r,s=e[0],o=e[1],a=Yt(i,s.shape),l=Rne(t,o,s,a);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uze={kernelName:bx,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>de(t,Ye(Tp(n,r),"float32")),b:()=>de(t,Ye(bS(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dze(t,e,n,r,i,s,o){const a=se(t,"dy","maxPool3dGrad"),l=se(e,"input","maxPool3dGrad"),c=se(n,"output","maxPool3dGrad");let u=a,d=l,h=c,f=!1;l.rank===4&&(f=!0,u=be(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),d=be(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),h=be(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),Z(u.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${u.rank}.`),Z(d.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${d.rank}.`),Z(h.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${h.rank}.`),ro("maxPool3dGrad",s,o);const p={dy:u,input:d,output:h},m={filterSize:r,strides:i,pad:s,dimRoundingMode:o},y=ye.runKernel(XO,p,m);return f?be(y,[y.shape[1],y.shape[2],y.shape[3],y.shape[4]]):y}const hze=xe({maxPool3dGrad_:dze});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fze={kernelName:XN,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{filterSize:s,strides:o,pad:a,dimRoundingMode:l}=n;return{x:()=>hze(t,r,i,s,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pze(t,e,n,r,i,s,o){const a=se(t,"dy","maxPoolGrad"),l=se(e,"input","maxPoolGrad"),c=se(n,"output","maxPoolGrad");Z(l.rank===a.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${a.rank})`),Z(a.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${a.rank}.`),Z(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),ro("maxPoolGrad",s,o);const u={dy:a,input:l,output:c},d={filterSize:r,strides:i,pad:s,dimRoundingMode:o};return ye.runKernel(KO,u,d)}const mze=xe({maxPoolGrad_:pze});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gze={kernelName:KN,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{filterSize:s,strides:o,pad:a}=n;return{x:()=>mze(t,r,i,s,o,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yze={kernelName:YN,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:i}=n,s=Yt(i,r.shape),a=Pi(r.shape,s)[1],l=$e(a);return{x:()=>{const u=r.shape.slice();s.forEach(f=>{u[f]=1});const d=be(t,u);return yt(de(d,Uu(r.shape,"float32")),l)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vze={kernelName:ZN,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{axis:i}=r,[s,o]=e,a=Yt(i,s.shape),l=Rne(t,o,s,a);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xze={kernelName:wx,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>de(t,Ye(u0(n,r),"float32")),b:()=>de(t,Ye(ra(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bze={kernelName:JN,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:i}=n,s=i.map(o=>o[0]);return{x:()=>zn(t,s,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wze={kernelName:kx,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=Ut(n.shape,r.shape);return{a:()=>{const a=hi(n.shape,i);return a.length>0?be(lt(t,a),n.shape):t},b:()=>{const a=de(t,or(_5(yt(n,r)))),l=hi(r.shape,i);return l.length>0?be(lt(a,l),r.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kze={kernelName:Sx,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=Ut(n.shape,r.shape);return{a:()=>{const a=de(t,Ye(r,"float32")),l=hi(n.shape,i);return l.length>0?be(lt(a,l),n.shape):a},b:()=>{const a=de(t,Ye(n,"float32")),l=hi(r.shape,i);return l.length>0?be(lt(a,l),r.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sze={kernelName:QN,gradFunc:t=>({x:()=>or(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cze={kernelName:n5,inputsToSave:["indices"],gradFunc:(t,e)=>{const n=e[0];return{indices:()=>Ni(n.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nze={kernelName:t5,gradFunc:t=>({x:()=>cn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Aze={kernelName:r5,saveAllInputs:!0,gradFunc:(t,e,n)=>{const{axis:r}=n;return gp(t,r).map(s=>()=>s)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EU={kernelName:i5,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:i}=n,s=i.map(o=>o[0]);return{x:()=>zn(t,s,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ize={kernelName:Cx,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n,r,i]=e,s=n,o=r,a=Ut(s.shape,o.shape);return{a:()=>{const u=Ye(o,"float32");let d=de(t,de(u,fp(s,nt(u,Rt(1)))));const h=hi(s.shape,a);return h.length>0&&(d=lt(d,h)),be(d,s.shape)},b:()=>{const u=ra(s,0),d=Ts(u,Ga(s),cn(s));let h=de(t,de(i,d));const f=hi(o.shape,a);return f.length>0&&(h=lt(h,f)),be(h,o.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _ze={kernelName:s5,inputsToSave:["x","alpha"],gradFunc:(t,e)=>{const[n,r]=e,i=ra(n,0);return{x:()=>Ts(i,t,de(t,r)),alpha:()=>{let s=Ts(i,cn(t),de(t,n));const o=hi(r.shape,t.shape);return o.length>0&&(s=lt(s,o)),be(s,r.shape)}}}};/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eze(t,e,n){const r=t.shape.slice();r[n]=1;const i=be(e,r),s=W3(t,n,!0,!1),o=W3(t,n,!0,!0),a=de(s,o);return de(i,a)}function Tze(t,e,n){const r=t.shape.length,i=r-n.length,s=yr(n,r);let o=t;s!=null&&(o=ln(t,s));const a=o.shape.slice(),c=a.splice(r-n.length,n.length).reduce((h,f)=>h*f,1);a.push(c);const u=o.reshape(a);let d=Eze(u,e,i);if(d=d.reshape(o.shape),s!=null){const h=Sh(s);d=ln(d,h)}return d}const $ze={kernelName:o5,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:i}=n;let s=[];return i==null?s=r.shape.map((o,a)=>a):typeof i=="number"?s=[i]:s=i,{x:()=>Tze(r,t,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pze={kernelName:ox,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=Ut(n.shape,r.shape);return{a:()=>{const a=yt(t,Ye(r,"float32")),l=hi(n.shape,i);return l.length>0?be(lt(a,l),n.shape):a},b:()=>{let a=de(t,Ye(n,"float32"));const l=hi(r.shape,i);l.length>0&&(a=be(lt(a,l),r.shape));const c=Vn(r);return or(yt(a,Ye(c,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rze={kernelName:Nx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>yt(t,or(Vn(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Oze={kernelName:Ix,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=de(u0(n,6),Hx(n));return{x:()=>de(t,Ye(r,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dze={kernelName:Ax,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>de(t,Ye(Hx(n),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lze={kernelName:a5,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>be(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mze={kernelName:c5,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,i={dy:t,images:r};return{images:()=>ye.runKernel(nD,i,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fze={kernelName:l5,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,i={dy:t,images:r};return{images:()=>ye.runKernel(tD,i,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jze={kernelName:u5,gradFunc:(t,e,n)=>{const{dims:r}=n,i=Yt(r,t.shape);return{x:()=>mp(t,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bze={kernelName:_x,gradFunc:t=>({x:()=>cn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zze={kernelName:Ex,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>or(yt(t,de(fp(n,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uze={kernelName:d5,inputsToSave:["condition"],gradFunc:(t,e)=>{const[n]=e;return{condition:()=>Ye(cn(n),"float32"),t:()=>de(t,Ye(n,t.dtype)),e:()=>de(t,Ye(ND(n),t.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vze={kernelName:Tx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=ra(n,Rt(0)),i=Rt($5),s=Rt(P5),o=de(t,s),a=de(de(t,i),Qo(Ye(n,"float32")));return Ts(r,o,a)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wze={kernelName:Ox,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>de(t,de(n,nt(Rt(1),n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gze={kernelName:Rx,gradFunc:t=>({x:()=>cn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qze={kernelName:$x,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>de(yD(Ye(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hze={kernelName:Px,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>de(bte(Ye(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kze={kernelName:h5,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{begin:i,size:s}=n,o=r.shape,[a,l]=E5(r,i,s),c=[];for(let u=0;u<t.rank;u++)c.push([a[u],o[u]-a[u]-l[u]]);return{x:()=>_D(t,c)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xze={kernelName:g5,outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{dim:i}=n,s=!0,o=de(t,r);return{logits:()=>nt(o,de(lt(o,[i],s),r))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yze={kernelName:Dx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>de(t,c0(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TU={kernelName:p5,gradFunc:(t,e,n)=>{const{blockShape:r,paddings:i}=n;return{x:()=>mD(t,r,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $U={kernelName:m5,gradFunc:(t,e,n)=>{const{axis:r}=n;return{x:()=>Ys(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zze={kernelName:Lx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>yt(t,de(as(Ye(n,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jze={kernelName:rD,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>de(t,de(Ye(n,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qze={kernelName:Mx,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=Rt(2);return{a:()=>de(t,de(i,nt(n,r))),b:()=>de(t,de(i,nt(r,n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e7e={kernelName:Ux,gradFunc:t=>({x:()=>cn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t7e={kernelName:Fx,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=Ut(n.shape,r.shape);return{a:()=>{let a=t;const l=hi(n.shape,i);return l.length>0&&(a=lt(a,l)),be(a,n.shape)},b:()=>{let a=t;const l=hi(r.shape,i);return l.length>0&&(a=lt(a,l)),be(or(a),r.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n7e={kernelName:f5,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,i=r.shape.slice(),{axis:s}=n;Yt(s,r.shape).forEach(c=>{i[c]=1});const a=be(t,i),l=de(a,Uu(r.shape,"float32"));return{x:()=>l}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r7e={kernelName:jx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>yt(t,Vn(yD(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i7e={kernelName:Bx,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>de(nt(Rt(1),Vn(n)),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s7e={kernelName:zx,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{reps:i}=n;return{x:()=>{let o=cn(r);if(r.rank===1)for(let a=0;a<i[0];++a)o=ze(o,zn(t,[a*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(let a=0;a<i[0];++a)for(let l=0;l<i[1];++l)o=ze(o,zn(t,[a*r.shape[0],l*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(let a=0;a<i[0];++a)for(let l=0;l<i[1];++l)for(let c=0;c<i[2];++c)o=ze(o,zn(t,[a*r.shape[0],l*r.shape[1],c*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(r.rank===4)for(let a=0;a<i[0];++a)for(let l=0;l<i[1];++l)for(let c=0;c<i[2];++c)for(let u=0;u<i[3];++u)o=ze(o,zn(t,[a*r.shape[0],l*r.shape[1],c*r.shape[2],u*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return o}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o7e={kernelName:Km,gradFunc:(t,e,n)=>{const r=n,{perm:i}=r,s=Sh(i);return{x:()=>ln(t,s)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a7e={kernelName:y5,gradFunc:(t,e,n)=>{const r=n,{axis:i}=r;return{value:()=>Iu(t,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l7e={kernelName:v5,inputsToSave:["segmentIds"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>c7e(t,n)}}};function c7e(t,e){const n=Ch(e,cn(e)),r=bD(t,n);let i=Tp(e,Rt(0,"int32"));const s=r.rank-i.rank;for(let a=0;a<s;++a)i=Us(i,a+1);i=Au(i,Uu(r.shape,"bool"));const o=cn(r);return Ts(i,r,o)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u7e={kernelName:x5,gradFunc:t=>({x:()=>cn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d7e=[Pne,lBe,cBe,uBe,dBe,hBe,fBe,pBe,mBe,gBe,yBe,vBe,wBe,CBe,NBe,ABe,IBe,_Be,EBe,TBe,$Be,PBe,OBe,RBe,MBe,FBe,jBe,BBe,zBe,UBe,Pze,VBe,WBe,GBe,qBe,HBe,XBe,KBe,YBe,ZBe,JBe,QBe,eze,tze,nze,rze,ize,sze,oze,cze,_U,_U,uze,fze,gze,yze,vze,xze,bze,wze,kze,Sze,Cze,Nze,Aze,EU,EU,Ize,_ze,$ze,Rze,Oze,Dze,Lze,Mze,Fze,jze,Bze,zze,Uze,Vze,Wze,Gze,qze,Hze,Kze,Xze,Yze,TU,TU,$U,$U,Zze,Qze,Jze,e7e,t7e,n7e,r7e,i7e,s7e,o7e,a7e,l7e,u7e];for(const t of d7e)ADe(t);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.abs=function(){return this.throwIfDisposed(),Si(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.acos=function(){return this.throwIfDisposed(),_Le(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.acosh=function(){return this.throwIfDisposed(),TLe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.add=function(t){return this.throwIfDisposed(),ze(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.all=function(t,e){return this.throwIfDisposed(),gte(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.any=function(t,e){return this.throwIfDisposed(),U3(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.argMax=function(t){return this.throwIfDisposed(),Q1(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.argMin=function(t){return this.throwIfDisposed(),DLe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.asScalar=function(){return this.throwIfDisposed(),Z(this.size===1,()=>"The array must have only 1 element."),be(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.asType=function(t){return this.throwIfDisposed(),Ye(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.as1D=function(){return this.throwIfDisposed(),be(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.as2D=function(t,e){return this.throwIfDisposed(),be(this,[t,e])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.as3D=function(t,e,n){return this.throwIfDisposed(),be(this,[t,e,n])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.as4D=function(t,e,n,r){return this.throwIfDisposed(),be(this,[t,e,n,r])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.as5D=function(t,e,n,r,i){return this.throwIfDisposed(),be(this,[t,e,n,r,i])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.asin=function(){return this.throwIfDisposed(),MLe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.asinh=function(){return this.throwIfDisposed(),jLe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.atan=function(){return this.throwIfDisposed(),zLe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.atan2=function(t){return this.throwIfDisposed(),VLe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.atanh=function(){return this.throwIfDisposed(),GLe(this)};Te().prototype.avgPool=function(t,e,n,r){return this.throwIfDisposed(),pD(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),mD(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.batchNorm=function(t,e,n,r,i){return this.throwIfDisposed(),C5(this,t,e,n,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.broadcastTo=function(t){return this.throwIfDisposed(),a1(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.cast=function(t){return this.throwIfDisposed(),Ye(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.ceil=function(){return this.throwIfDisposed(),vMe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.clipByValue=function(t,e){return this.throwIfDisposed(),Jo(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.concat=function(t,e){return this.throwIfDisposed(),t instanceof ri&&(t=[t]),Ys([this,...t],e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.conv1d=function(t,e,n,r,i,s){return this.throwIfDisposed(),yte(this,t,e,n,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.conv2dTranspose=function(t,e,n,r,i){return this.throwIfDisposed(),vte(this,t,e,n,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.conv2d=function(t,e,n,r,i,s){return this.throwIfDisposed(),hp(this,t,e,n,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.cos=function(){return this.throwIfDisposed(),yD(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.cosh=function(){return this.throwIfDisposed(),bte(this)};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.cumprod=function(t,e,n){return this.throwIfDisposed(),W3(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.cumsum=function(t,e,n){return this.throwIfDisposed(),wte(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),VMe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.depthwiseConv2d=function(t,e,n,r,i,s){return this.throwIfDisposed(),vD(this,t,e,n,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.dilation2d=function(t,e,n,r,i){return this.throwIfDisposed(),qMe(this,t,e,n,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.divNoNan=function(t){return this.throwIfDisposed(),ZMe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.div=function(t){return this.throwIfDisposed(),yt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.dot=function(t){return this.throwIfDisposed(),QMe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.elu=function(){return this.throwIfDisposed(),A5(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.equal=function(t){return this.throwIfDisposed(),Cc(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.erf=function(){return this.throwIfDisposed(),kte(this)};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.euclideanNorm=function(t,e){return this.throwIfDisposed(),dFe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.exp=function(){return this.throwIfDisposed(),Qo(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.expandDims=function(t){return this.throwIfDisposed(),Us(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.expm1=function(){return this.throwIfDisposed(),mFe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.fft=function(){return this.throwIfDisposed(),jte(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.flatten=function(){return this.throwIfDisposed(),be(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.floor=function(){return this.throwIfDisposed(),_5(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.floorDiv=function(t){return this.throwIfDisposed(),mte(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.gather=function(t,e,n){return this.throwIfDisposed(),bD(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.greaterEqual=function(t){return this.throwIfDisposed(),Tp(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.greater=function(t){return this.throwIfDisposed(),ra(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.ifft=function(){return this.throwIfDisposed(),G3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.irfft=function(){return this.throwIfDisposed(),oje(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.isFinite=function(){return this.throwIfDisposed(),CFe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.isInf=function(){return this.throwIfDisposed(),AFe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.isNaN=function(){return this.throwIfDisposed(),_Fe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.leakyRelu=function(t){return this.throwIfDisposed(),kD(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.lessEqual=function(t){return this.throwIfDisposed(),u0(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.less=function(t){return this.throwIfDisposed(),bS(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.localResponseNormalization=function(t,e,n,r){return this.throwIfDisposed(),RFe(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.logSigmoid=function(){return this.throwIfDisposed(),BFe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.logSoftmax=function(t){return this.throwIfDisposed(),Ate(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.logSumExp=function(t,e){return this.throwIfDisposed(),CD(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.log=function(){return this.throwIfDisposed(),Ga(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.log1p=function(){return this.throwIfDisposed(),SD(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.logicalAnd=function(t){return this.throwIfDisposed(),Au(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.logicalNot=function(){return this.throwIfDisposed(),ND(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.logicalOr=function(t){return this.throwIfDisposed(),Ite(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.logicalXor=function(t){return this.throwIfDisposed(),KFe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.matMul=function(t,e,n){return this.throwIfDisposed(),gn(this,t,e,n)};Te().prototype.maxPool=function(t,e,n,r){return this.throwIfDisposed(),AD(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.max=function(t,e){return this.throwIfDisposed(),Nl(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.maximum=function(t){return this.throwIfDisposed(),Ch(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.mean=function(t,e){return this.throwIfDisposed(),Pr(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.min=function(t,e){return this.throwIfDisposed(),xS(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.minimum=function(t){return this.throwIfDisposed(),Sg(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.mirrorPad=function(t,e){return this.throwIfDisposed(),n6e(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.mod=function(t){return this.throwIfDisposed(),i6e(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.mul=function(t){return this.throwIfDisposed(),de(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.neg=function(){return this.throwIfDisposed(),or(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.norm=function(t,e,n){return this.throwIfDisposed(),I5(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.notEqual=function(t){return this.throwIfDisposed(),nv(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.oneHot=function(t,e=1,n=0){return this.throwIfDisposed(),_te(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.onesLike=function(){return this.throwIfDisposed(),qa(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.pad=function(t,e){return this.throwIfDisposed(),_D(this,t,e)};Te().prototype.pool=function(t,e,n,r,i,s){return this.throwIfDisposed(),p6e(this,t,e,n,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.pow=function(t){return this.throwIfDisposed(),fp(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.prelu=function(t){return this.throwIfDisposed(),TD(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.prod=function(t,e){return this.throwIfDisposed(),y6e(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.reciprocal=function(){return this.throwIfDisposed(),B6e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.relu=function(){return this.throwIfDisposed(),Vu(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.relu6=function(){return this.throwIfDisposed(),$te(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.reshapeAs=function(t){return this.throwIfDisposed(),be(this,t.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.reshape=function(t){return this.throwIfDisposed(),be(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.resizeBilinear=function(t,e,n){return this.throwIfDisposed(),Gte(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.resizeNearestNeighbor=function(t,e,n){return this.throwIfDisposed(),qte(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.reverse=function(t){return this.throwIfDisposed(),mp(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.rfft=function(){return this.throwIfDisposed(),cje(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.round=function(){return this.throwIfDisposed(),Pte(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.rsqrt=function(){return this.throwIfDisposed(),Rte(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.selu=function(){return this.throwIfDisposed(),Ote(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.separableConv2d=function(t,e,n,r,i,s){return this.throwIfDisposed(),Dte(this,t,e,n,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.sigmoid=function(){return this.throwIfDisposed(),c0(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.sign=function(){return this.throwIfDisposed(),X6e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.sin=function(){return this.throwIfDisposed(),Lte(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.sinh=function(){return this.throwIfDisposed(),Mte(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.slice=function(t,e){return this.throwIfDisposed(),zn(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.softmax=function(t){return this.throwIfDisposed(),BD(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.softplus=function(){return this.throwIfDisposed(),Wx(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),ED(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.split=function(t,e){return this.throwIfDisposed(),Ko(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.sqrt=function(){return this.throwIfDisposed(),as(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.square=function(){return this.throwIfDisposed(),Vn(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.squaredDifference=function(t){return this.throwIfDisposed(),Bte(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.squeeze=function(t){return this.throwIfDisposed(),qx(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.stack=function(t,e){this.throwIfDisposed();const n=t instanceof ri?[this,t]:[this,...t];return Iu(n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.step=function(t){return this.throwIfDisposed(),Hx(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.stridedSlice=function(t,e,n,r,i,s,o,a){return this.throwIfDisposed(),mje(this,t,e,n,r,i,s,o,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.sub=function(t){return this.throwIfDisposed(),nt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.sum=function(t,e){return this.throwIfDisposed(),lt(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.tan=function(){return this.throwIfDisposed(),yje(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.tanh=function(){return this.throwIfDisposed(),S5(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.tile=function(t){return this.throwIfDisposed(),wl(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.toBool=function(){return this.throwIfDisposed(),Ye(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.toFloat=function(){return this.throwIfDisposed(),Ye(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.toInt=function(){return this.throwIfDisposed(),Ye(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.topk=function(t,e){return this.throwIfDisposed(),bje(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.transpose=function(t){return this.throwIfDisposed(),ln(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.unique=function(t){return this.throwIfDisposed(),Sje(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),Vte(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.unstack=function(t){return this.throwIfDisposed(),gp(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.where=function(t,e){return this.throwIfDisposed(),Ts(t,this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.zerosLike=function(){return this.throwIfDisposed(),cn(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Ql extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Ql.prototype)}}class Oa extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Oa.prototype)}}class he extends Error{constructor(e){super(e),Object.setPrototypeOf(this,he.prototype)}}class qt extends Error{constructor(e){super(e),Object.setPrototypeOf(this,qt.prototype)}}class kL extends Error{constructor(e){super(e),Object.setPrototypeOf(this,kL.prototype)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class One{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let n;return this.cache.has(e)&&(n=this.cache.get(e),this.cache.delete(e),this.cache.set(e,n)),n}put(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let n=0;n<this.maxEntries-e;n++){const r=this.cache.keys().next().value;this.cache.delete(r)}this.maxEntries=e}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function yp(t,e){if(Array.isArray(t)){let n=[];for(let r=0;r<e;r++)n=n.concat(t);return n}else{const n=new Array(e);return n.fill(t),n}}function ec(t,e){if(!t)throw new kL(e)}function PU(t,e){let n=0;for(const r of t)r===e&&n++;return n}function Vs(t){return t.length===1?t[0]:t}function Cn(t){return Array.isArray(t)?t:[t]}function Qc(t){const n=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function mf(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,(e,n)=>n.toUpperCase())}let ya={};function SL(t){if(t==null)return null;const e={};return e.className=t.getClassName(),e.config=t.getConfig(),e}function K3(t){if(!(t==null||typeof t!="object"))if(Array.isArray(t))t.forEach(e=>K3(e));else{const e=Object.keys(t);for(const n of e){const r=t[n];r!=null&&typeof r=="object"&&(!Array.isArray(r)&&r.type==="ndarray"&&typeof r.value=="number"?t[n]=r.value:K3(r))}}}function Zx(t,e={},n={},r="object",i=!1){if(typeof t=="string"){const s=t;let o;if(s in n)o=n[s];else if(s in ya)o=ya[s];else if(o=e[s],o==null)throw new he(`Unknown ${r}: ${t}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return o}else{const s=t;if(s.className==null||s.config==null)throw new he(`${r}: Improper config format: ${JSON.stringify(s)}.
'className' and 'config' must set.`);const o=s.className;let a,l;if(o in n?[a,l]=n[o]:o in ya?[a,l]=ya.className:o in e&&([a,l]=e[o]),a==null)throw new he(`Unknown ${r}: ${o}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){const c={};for(const f of Object.keys(ya))c[f]=ya[f];for(const f of Object.keys(n))c[f]=n[f];const u=s.config;u.customObjects=c;const d=Object.assign({},ya);for(const f of Object.keys(n))ya[f]=n[f];K3(s.config);const h=l(a,s.config,n,i);return ya=Object.assign({},d),h}else{const c=Object.assign({},ya);for(const d of Object.keys(n))ya[d]=n[d];const u=new a(s.config);return ya=Object.assign({},c),u}}}function h7e(t,e){return t<e?-1:t>e?1:0}function Kw(t,e){return-1*h7e(t,e)}function qd(t){if(t==null)return t;const e=[];for(const n of t)e.indexOf(n)===-1&&e.push(n);return e}function f7e(t){if(t==null)throw new he(`Invalid value in obj: ${JSON.stringify(t)}`);for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}function Rp(t,e,n){if(n!=null&&t.indexOf(n)<0)throw new he(`${n} is not a valid ${e}.  Valid values are ${t} or null/undefined.`)}function CL(t,e,n=0,r=1/0){return ec(n>=0),ec(r>=n),Array.isArray(t)&&t.length>=n&&t.length<=r&&t.every(i=>typeof i===e)}function Ii(t,e){Array.isArray(t)?(Z(t.length>0,()=>`${e} is unexpectedly an empty array.`),t.forEach((n,r)=>Ii(n,`element ${r+1} of ${e}`))):Z(Number.isInteger(t)&&t>0,()=>`Expected ${e} to be a positive integer, but got ${Dne(t)}.`)}function Dne(t){return t===null?"null":Array.isArray(t)?"["+t.map(e=>Dne(e)).join(",")+"]":typeof t=="string"?`"${t}"`:`${t}`}function p7e(t,e,n){let r=n!=null?n():js(),i;return(...o)=>{const a=n!=null?n():js();return a-r<e||(r=a,i=t(...o)),i}}function Lne(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let m7e=0;function Mne(){return m7e++}const Xw={};function R5(t=""){return t in Xw||(Xw[t]=0),Xw[t]+=1,t+Xw[t].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const g7e=["channelsFirst","channelsLast"],y7e=["nearest","bilinear"],v7e=["valid","same","causal"],x7e=["max","avg"],b7e=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const om=new Map;function Fr(t){Rp(g7e,"DataFormat",t)}function w7e(t){Rp(y7e,"InterpolationFormat",t)}function ia(t){Rp(v7e,"PaddingMode",t)}function Fne(t){Rp(x7e,"PoolMode",t)}const c1=[],RU="/";function zf(t,e){c1.push(t);try{const n=e();return c1.pop(),n}catch(n){throw c1.pop(),n}}function k7e(){return c1.length===0?"":c1.join(RU)+RU}function jne(t){if(!zne(t))throw new Error("Not a valid tensor name: '"+t+"'");return k7e()+t}function Bne(t){if(!zne(t))throw new Error("Not a valid tensor name: '"+t+"'");om.has(t)||om.set(t,0);const e=om.get(t);if(om.set(t,om.get(t)+1),e>0){const n=`${t}_${e}`;return om.set(n,1),n}else return t}const S7e=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function zne(t){return!!t.match(S7e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function C7e(t){return t===parseInt(t.toString(),10)}function Hd(t,e,n){e==null&&(e=0),n==null&&(n=t.length);let r=1;for(let i=e;i<n;++i)r*=t[i];return r}function Cg(t){if(t.length===0)return Number.NaN;let e=Number.POSITIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r<e&&(e=r)}return e}function sh(t){if(t.length===0)return Number.NaN;let e=Number.NEGATIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r>e&&(e=r)}return e}function Tl(t,e){if(e<t)throw new he(`end (${e}) < begin (${t}) is forbidden.`);const n=[];for(let r=t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let C_;function ai(){return C_==null&&(C_=JDe().epsilon()),C_}function $l(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function xc(t,e){return Ye(t,e)}function Jx(t,e=-1){const n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),be(t,n)}function N7e(t,e){return Ne(()=>{if(t.shape.length!==2)throw new he(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);const n=Jx(t,1);return X3(n,[1,e,1])})}function A7e(t){const e=[Hd(t.shape)];return be(t,e)}function I7e(t){if(t.rank<=1)throw new he(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);const e=[t.shape[0],Hd(t.shape,1)];return be(t,e)}function Uf(t,e,n){return Ne(()=>{switch(t.rank){case 1:return FD(t,e,n);case 2:return Fte(t,[e,0],[n,t.shape[1]]);case 3:return jD(t,[e,0,0],[n,t.shape[1],t.shape[2]]);case 4:return kS(t,[e,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return zn(t,[e,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return zn(t,[e,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new he(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function N_(t,e,n){return Ne(()=>{switch(t.rank){case 1:return FD(t,e,n);case 2:return Fte(t,[0,e],[t.shape[0],n]);case 3:return jD(t,[0,0,e],[t.shape[0],t.shape[1],n]);case 4:return kS(t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new he(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function Yw(t,e,n,r){return Ne(()=>{switch(t.rank){case 1:return FD(t,e,n);case 2:switch(r){case 1:return Uf(t,e,n);case 2:return N_(t,e,n);default:throw new he(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return Uf(t,e,n);case 2:return jD(t,[0,e,0],[t.shape[0],n,t.shape[2]]);case 3:return N_(t,e,n);default:throw new he(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return Uf(t,e,n);case 2:return kS(t,[0,e,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return kS(t,[0,0,e,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return N_(t,e,n);default:throw new he(`The axis is not within the rank of the tensor ${r}`)}default:throw new he(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function NL(t,e=-1){let n;return e<0&&(n=t[0].rank,n!==0?e=n:e=0),e===t[0].rank&&(e=-1),Ys(t,e)}function OU(t,e){switch(t.rank){case 1:return wMe([t,e]);case 2:return SMe([t,e],0);case 3:return NMe([t,e],0);case 4:return IMe([t,e],0);default:throw new he(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function X3(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new he(`The length of input n (${e.length}) does not match the number of dimensions in input x (${t.rank})`);return wl(t,e)}function O5(t,e=0,n=1,r,i){return L6e(t,e,n,r,i)}function bc(t,e,n,r){if(t.rank<2||e.rank<2)throw new qt(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${e.shape}`);if(e.rank>=3){const i=t.shape.slice(-1)[0],s=e.shape.slice(-2)[0];if(i!==s)throw new qt(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${e.shape}`)}if(t.rank===2&&e.rank===2)return bU({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?Y3(t.rank,r,$l()):null,activation:n});{const i=t.shape.slice(),s=i.pop();t=be(t,[-1,s]);const o=e.shape.slice(),a=o.pop(),l=o.pop(),c=[...o,a],u=Array.from({length:e.rank},(p,m)=>m===0?e.rank-2:m<=e.rank-2?m-1:m);e=be(ln(e,u),[l,-1]);const d=[...i,...c];return be(bU({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?Y3(t.rank,r,$l()):null,activation:n}),d)}}function Une(t,e,n){return Ne(()=>(Array.isArray(e)?e=Ks(e,"int32"):e=Ye(e,"int32"),bD(t,e,n)))}function Qx(t){return de(t,t)}function Y3(t,e,n){const r=e.shape;if(e.rank!==1&&e.rank!==t)throw new he(`Unexpected bias dimensions: ${e.rank}; expected it to be 1 or ${t}`);if(t===5){if(n==="channelsFirst")return r.length===1?be(e,[1,r[0],1,1,1]):be(e,[1,r[3],r[0],r[1],r[2]]);if(n==="channelsLast")return r.length===1?be(e,[1,1,1,1,r[0]]):be(e,[1].concat(r))}else if(t===4){if(n==="channelsFirst")return r.length===1?be(e,[1,r[0],1,1]):be(e,[1,r[2],r[0],r[1]]);if(n==="channelsLast")return r.length===1?be(e,[1,1,1,r[0]]):be(e,[1].concat(r))}else if(t===3){if(n==="channelsFirst")return r.length===1?be(e,[1,r[0],1]):be(e,[1,r[1],r[0]]);if(n==="channelsLast")return r.length===1?be(e,[1,1,r[0]]):be(e,[1].concat(r))}else if(t<3)return e;throw new he(`Unsupported input rank by biasAdd: ${e.rank}`)}function Fl(t,e,n){return Ne(()=>(n==null&&(n=$l()),Fr(n),ze(t,Y3(t.rank,e,n))))}function _7e(t,e=1){if(e!==1)throw new qt(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return A5(t)}function E7e(t){return Ne(()=>yt(t,ze(Si(t),1)))}function Vne(t,e,n,r){return Ne(()=>Tje(t,e,n,r))}function T7e(t){return Ne(()=>{const e=ze(.5,de(.2,t));return Jo(e,0,1)})}function eb(t,e,n=!1){return n?t():e()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const $7e=["fanIn","fanOut","fanAvg"],P7e=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function R7e(t){Rp($7e,"FanMode",t)}function O7e(t){Rp(P7e,"Distribution",t)}class Za extends h0{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class Wne extends Za{apply(e,n){return Ni(e,n)}}Wne.className="Zeros";Fe(Wne);class AL extends Za{apply(e,n){return Uu(e,n)}}AL.className="Ones";Fe(AL);class Gne extends Za{constructor(e){if(super(),typeof e!="object")throw new he(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new he(`config must have value set but got ${e}`);this.value=e.value}apply(e,n){return Ne(()=>de(Rt(this.value),Uu(e,n)))}getConfig(){return{value:this.value}}}Gne.className="Constant";Fe(Gne);class qne extends Za{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,n){return Gx(e,this.minval,this.maxval,n,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}qne.className="RandomUniform";Fe(qne);class Hne extends Za{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new qt(`randomNormal does not support dType ${n}.`);return O5(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}Hne.className="RandomNormal";Fe(Hne);class Kne extends Za{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new qt(`truncatedNormal does not support dType ${n}.`);return Ute(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}Kne.className="TruncatedNormal";Fe(Kne);class Xne extends Za{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,n){return Ne(()=>{if(e.length!==2||e[0]!==e[1])throw new he("Identity matrix initializer can only be used for 2D square matrices.");return de(this.gain,Nte(e[0]))})}getConfig(){return{gain:this.gain}}}Xne.className="Identity";Fe(Xne);function D7e(t,e="channelsLast"){let n,r;if(Fr(e),t.length===2)n=t[0],r=t[1];else if([3,4,5].indexOf(t.length)!==-1){if(e==="channelsFirst"){const i=Hd(t,2);n=t[1]*i,r=t[0]*i}else if(e==="channelsLast"){const i=Hd(t,0,t.length-2);n=t[t.length-2]*i,r=t[t.length-1]*i}}else{const i=Hd(t);n=Math.sqrt(i),r=Math.sqrt(i)}return[n,r]}class wo extends Za{constructor(e){if(super(),e.scale<0)throw new he(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,R7e(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,O7e(this.distribution),this.seed=e.seed}apply(e,n){const r=D7e(e),i=r[0],s=r[1];let o=this.scale;if(this.mode==="fanIn"?o/=Math.max(1,i):this.mode==="fanOut"?o/=Math.max(1,s):o/=Math.max(1,(i+s)/2),this.distribution==="normal"){const a=Math.sqrt(o);if(n=n||"float32",n!=="float32"&&n!=="int32")throw new qt(`${this.getClassName()} does not support dType ${n}.`);return Ute(e,0,a,n,this.seed)}else{const a=Math.sqrt(3*o);return Gx(e,-a,a,n,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}wo.className="VarianceScaling";Fe(wo);class IL extends wo{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return wo.className}}IL.className="GlorotUniform";Fe(IL);class _L extends wo{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return wo.className}}_L.className="GlorotNormal";Fe(_L);class EL extends wo{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return wo.className}}EL.className="HeNormal";Fe(EL);class TL extends wo{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return wo.className}}TL.className="HeUniform";Fe(TL);class $L extends wo{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return wo.className}}$L.className="LeCunNormal";Fe($L);class PL extends wo{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return wo.className}}PL.className="LeCunUniform";Fe(PL);class Yne extends Za{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,n){return Ne(()=>{if(e.length<2)throw new qt("Shape must be at least 2D.");if(n!=="int32"&&n!=="float32"&&n!==void 0)throw new TypeError(`Unsupported data type ${n}.`);n=n;const r=$e(e.slice(0,-1)),i=e[e.length-1],s=r*i;s>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${s}) elements: Slowness may result.`);const o=[Math.max(i,r),Math.min(i,r)],a=O5(o,0,1,n,this.seed),l=G8e.qr(a,!1);let c=l[0];const d=l[1].flatten().stridedSlice([0],[Math.min(i,r)*Math.min(i,r)],[Math.min(i,r)+1]);return c=de(c,d.sign()),r<i&&(c=c.transpose()),de(Rt(this.gain),c.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}Yne.className="Orthogonal";Fe(Yne);const DU={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function LU(t,e={}){return Zx(t,Ia.getMap().classNameMap,e,"initializer")}function fr(t){return SL(t)}function sr(t){if(typeof t=="string"){const e=t in DU?DU[t]:t;if(e==="GlorotNormal")return new _L;if(e==="GlorotUniform")return new IL;if(e==="HeNormal")return new EL;if(e==="HeUniform")return new TL;if(e==="LeCunNormal")return new $L;if(e==="LeCunUniform")return new PL;{const n={};return n.className=e,n.config={},LU(n)}}else return t instanceof Za?t:LU(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Z3(t){return Array.isArray(t)&&Array.isArray(t[0])}function SS(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function $t(t){let e;if(Array.isArray(t)){if(t.length!==1)throw new he(`Expected Tensor length to be 1; got ${t.length}`);e=t[0]}else e=t;return e}function hn(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return t=t,t[0];throw new he(`Expected exactly 1 Shape; got ${t.length}`)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function CS(t){let e=0;for(const n of t)n.shape.length===0?e+=1:e+=n.shape.reduce((r,i)=>r*i);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const MU="Variable";class L7e{constructor(e,n="float32",r=MU,i=!0,s=null){this.dtype=n??"float32",this.shape=e.shape,this.id=Mne(),r=r??MU,this.originalName=jne(r),this.name=Bne(this.originalName),this.trainable_=i,this.constraint=s,this.val=Aje(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),M7e(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function M7e(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}function J3(t){return t.map(e=>e.read())}function RL(t){t.forEach(e=>{e[0].write(e[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class li{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class Nc{constructor(e,n,r,i,s,o,a){this.dtype=e,this.shape=n,this.sourceLayer=r,this.inputs=i,this.callArgs=s,this.outputTensorIndex=a,this.id=Mne(),o!=null&&(this.originalName=jne(o),this.name=Bne(this.originalName)),this.rank=n.length}}let F7e=0;class D5{constructor(e,n){this.callArgs=n,this.id=F7e++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const r of e.inboundLayers)r!=null&&r.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const n of this.inboundLayers)n!=null?e.push(n.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let j7e=0;class Zt extends h0{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=j7e++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=e.name;if(!n){const r=this.getClassName();n=Qc(r)+"_"+R5(r)}if(this.name=n,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let r;if(e.batchInputShape!=null)r=e.batchInputShape;else if(e.inputShape!=null){let s=null;e.batchSize!=null&&(s=e.batchSize),r=[s].concat(e.inputShape)}this.batchInputShape=r;let i=e.dtype;i==null&&(i=e.inputDType),i==null&&(i="float32"),this.dtype=i}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,n){return e.name+"_ib-"+n.toString()}getNodeAtIndex(e,n){if(this.inboundNodes.length===0)throw new Oa(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=e)throw new he(`Asked to get ${n} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return Vs(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return Vs(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new Ql(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new Ql(`Layer ${this.name} is not connected, no input to return.`);return Vs(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new Ql(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new Ql(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return Vs(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(n=>n.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const n=Cn(e);if(this.inputSpec==null||this.inputSpec.length===0)return;const r=Cn(this.inputSpec);if(n.length!==r.length)throw new he(`Layer ${this.name} expects ${r.length} inputs, but it received ${n.length} input tensors. Input received: ${e}`);for(let i=0;i<n.length;i++){const s=n[i],o=r[i];if(o==null)continue;const a=s.rank;if(o.ndim!=null&&a!==o.ndim)throw new he(`Input ${i} is incompatible with layer ${this.name}: expected ndim=${o.ndim}, found ndim=${a}`);if(o.maxNDim!=null&&a>o.maxNDim)throw new he(`Input ${i} is incompatible with layer ${this.name}: expected max_ndim=${o.maxNDim}, found ndim=${a}`);if(o.minNDim!=null&&a<o.minNDim)throw new he(`Input ${i} is incompatible with layer ${this.name}: expected min_ndim=${o.minNDim}, found ndim=${a}.`);if(o.dtype!=null&&s.dtype!==o.dtype)throw new he(`Input ${i} is incompatible with layer ${this.name} : expected dtype=${o.dtype}, found dtype=${s.dtype}.`);if(o.axes){const l=s.shape;for(const c in o.axes){const u=Number(c),d=o.axes[c],h=u>=0?l[u]:l[l.length+u];if(d!=null&&[d,null].indexOf(h)===-1)throw new he(`Input ${i} is incompatible with layer ${this.name}: expected axis ${u} of input shape to have value ${d} but got shape ${l}.`)}}if(o.shape!=null)for(let l=0;l<o.shape.length;++l){const c=o.shape[l],u=s.shape[l];if(c!=null&&u!=null&&c!==u)throw new he(`Input ${i} is incompatible with layer ${this.name}: expected shape=${o.shape}, found shape=${s.shape}.`)}}}call(e,n){return e}invokeCallHook(e,n){this._callHook!=null&&this._callHook(e,n)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,n){n=n||{},this.assertNotDisposed();const r=Cn(e),i=U7e(e),s=V7e(e);if(i===s)throw new he("Arguments to apply() must be all SymbolicTensors or all Tensors");return zf(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const o=[];for(const a of Cn(e))o.push(a.shape);this.build(Vs(o)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&s&&(this._refCount=1)}if(this.assertInputCompatibility(e),s){let o=this.call(e,n);this.supportsMasking&&this.setMaskMetadata(e,o);const a=Cn(o),l=[];for(let c of a)r.indexOf(c)!==-1&&(c=c.clone()),l.push(c);if(o=Vs(l),this.activityRegularizer!=null)throw new qt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return o}else{const o=B7e(e),a=this.computeOutputShape(o);let l;const c=z7e(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?o[0]:o),a!=null&&a.length>0&&Array.isArray(a[0])?l=a.map((u,d)=>new Nc(c,u,this,Cn(e),n,this.name,d)):l=new Nc(c,a,this,Cn(e),n,this.name),this.addInboundNode(e,l,null,null,o,a,n),this._refCount++,this.activityRegularizer!=null)throw new qt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((r,i)=>{r!=null&&e[i]!=null&&e[i]!==r&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new Ql(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const n of this.inboundNodes){const r=JSON.stringify(n.outputShapes);e.indexOf(r)===-1&&e.push(r)}if(e.length===1){const n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new Ql(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new Oa(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return CS(this.weights)}build(e){this.built=!0}getWeights(e=!1){return J3(e?this.trainableWeights:this.weights)}setWeights(e){Ne(()=>{const n=this.weights;if(n.length!==e.length)throw new he(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${n.length} weights. Provided weights: ${e}...`);if(n.length===0)return;const r=[],i=J3(n);for(let s=0;s<i.length;++s){const o=i[s],a=n[s],l=e[s];if(!xn(o.shape,l.shape))throw new he(`Layer weight shape ${o.shape} not compatible with provided weight shape ${l.shape}`);r.push([a,l])}RL(r)})}addWeight(e,n,r,i,s,o,a,l){if(this._addedWeightNames.indexOf(e)!==-1)throw new he(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),r==null&&(r="float32"),this.fastWeightInitDuringBuild&&(i=l!=null?l():sr("zeros"));const c=i.apply(n,r),u=new L7e(c,r,e,o,a);return c.dispose(),s!=null&&this.addLoss(()=>s.apply(u.read())),o==null&&(o=!0),o?this._trainableWeights.push(u):this._nonTrainableWeights.push(u),u}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=Cn(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(r=>{if(r!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return n}setMaskMetadata(e,n,r){if(!this.supportsMasking)return;const i=this.computeMask(e,r),s=Cn(n),o=Cn(i);if(s.length!==o.length)throw new Error(`${this.name} outputs ${s.length} tensors but ${s.length} masks for those tensors`);for(let a=0;a<s.length;a++)s[a].kerasMask=o[a]}addInboundNode(e,n,r,i,s,o,a=null){const l=Cn(e);n=Cn(n),r=Cn(r),i=Cn(i),s=SS(s),o=SS(o);const c=[],u=[],d=[];for(const h of l)c.push(h.sourceLayer),u.push(h.nodeIndex),d.push(h.tensorIndex);new D5({outboundLayer:this,inboundLayers:c,nodeIndices:u,tensorIndices:d,inputTensors:l,outputTensors:n,inputMasks:r,outputMasks:i,inputShapes:s,outputShapes:o},a);for(let h=0;h<n.length;h++)n[h].sourceLayer=this,n[h].nodeIndex=this.inboundNodes.length-1,n[h].tensorIndex=h}getConfig(){const e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function B7e(t){t=Cn(t);const e=[];for(const n of t)e.push(n.shape);return Vs(e)}function z7e(t){return"float32"}function Zne(t,e,n){if((e==null||n!=null&&n>0)&&(e=t.sourceLayer,n=t.nodeIndex),e.inboundNodes.length===0)return[t];{const r=e.inboundNodes[n];if(r.inboundLayers.length===0)return r.inputTensors;{const i=[];for(let s=0;s<r.inboundLayers.length;s++){const o=r.inputTensors[s],a=r.inboundLayers[s],l=r.nodeIndices[s],c=Zne(o,a,l);for(const u of c)i.indexOf(u)===-1&&i.push(u)}return i}}}function U7e(t){let e=!0;for(const n of Cn(t))if(!(n instanceof Nc)){e=!1;break}return e}function V7e(t){let e=!0;for(const n of Cn(t))if(n instanceof Nc){e=!1;break}return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class tb extends Zt{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:R5("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new he("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let n=e.batchInputShape;if(n==null){if(e.inputShape==null)throw new he("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");n=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new he("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const r=e.dtype||"float32";this.batchInputShape=n,this.dtype=r,this.inputSpec=[{shape:n}];const i=new Nc(this.dtype,this.batchInputShape,this,[],{},this.name);i.nodeIndex=0,i.tensorIndex=0,new D5({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[i],outputTensors:[i],inputMasks:[null],outputMasks:[null],inputShapes:[n],outputShapes:[n]})}apply(e,n){throw new he(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}tb.className="InputLayer";Fe(tb);function W7e(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new he("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=t.batchShape;t.shape!=null&&e==null&&(e=[null].concat(t.shape));let n=t.dtype;return n==null&&(n="float32"),new tb({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function G7e(t,e){if(t.dtype==null||t.dtype===e.dtype)return e;try{return Ye(e,t.dtype)}catch{throw new he(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}class Ed{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof Ed)for(const n in e.id2Value)this.id2Value[n]=e.id2Value[n],n in e.id2Mask&&(this.id2Mask[n]=e.id2Mask[n]);else{if(e==null)return;for(const n of e)this.add(n.key,n.value)}}add(e,n,r){if(this.id2Value[e.id]==null)this.id2Value[e.id]=G7e(e,n),this.name2Id[e.name]=e.id,r!=null&&(this.id2Mask[e.id]=r);else throw new he(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof Nc){if(this.id2Value[e.id]==null)throw new he(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}else{const n=this.name2Id[e];if(n==null)throw new he(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[n]}}getMask(e){if(e instanceof Nc){if(this.id2Value[e.id]==null)throw new he(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}else{const n=this.name2Id[e];if(n==null)throw new he(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&Qt(this.id2Mask)}}const NS=new One,AS=new One;function q7e(t){NS!=null&&NS.setMaxEntries(t),AS!=null&&AS.setMaxEntries(t)}function My(t,e,n,r){const i=n==null?!1:n.training,s=Array.isArray(t),o=s?t:[t],a=o.map(p=>p.name),l=[],c=e.names();for(const p of a)c.indexOf(p)!==-1?l.push(e.getValue(p)):l.push(null);r!=null&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);const u=a.join(",")+"|"+e.names().sort().join(",");let d=NS.get(u),h;if(d==null){const p=H7e(o,e);d=p.sorted,h=p.recipientCounts,NS.put(u,d),AS.put(u,h)}h={},i||Object.assign(h,AS.get(u));const f=new Ed(e);for(let p=0;p<d.length;++p){if(r!=null){const T=F3().numTensors;T>r.maxNumTensors&&(r.maxNumTensors=T),T<r.minNumTensors&&(r.minNumTensors=T)}const m=d[p],y=m.sourceLayer;if(y instanceof tb)continue;const g=[],v=[],x=[];let b=!1;for(const T of m.inputs){const O=f.getValue(T),$=f.getMask(T);g.push(O),v.push($),$!=null&&(b=!0),i||(h[T.name]--,h[T.name]===0&&!e.hasKey(T)&&a.indexOf(T.name)===-1&&!O.isDisposed&&T.sourceLayer.stateful!==!0&&x.push(O))}b&&(n=n||{},n.mask=v[0]);const S=Cn(y.apply(g,n));let A=null;y.supportsMasking&&(A=y.computeMask(g,v));const E=X7e(m),I=Array.isArray(E)?E:[E];for(let T=0;T<I.length;++T){f.hasKey(I[T])||f.add(I[T],S[T],Array.isArray(A)?A[0]:A);const O=a.indexOf(I[T].name);O!==-1&&(l[O]=S[T])}i||Qt(x)}return f.disposeMasks(),s?l:l[0]}function H7e(t,e){Z(t!=null&&t.length>0,()=>"Expected at least one fetch, got none");let n=[],r={};if(t.length===1){const i=FU(t[0],e);n=i.sorted,r=i.recipientMap}else{const i=new Set;for(const s of t){const{sorted:o,recipientMap:a}=FU(s,e);for(const l of o)i.has(l.name)||(n.push(l),i.add(l.name));for(const l in a)r[l]==null&&(r[l]=new Set),a[l].forEach(c=>r[l].add(c))}}return{sorted:n,recipientCounts:K7e(r)}}function K7e(t){const e={};for(const n in t)e[n]=t[n].size;return e}function FU(t,e){const n=new Set,r=[],i={};for(const a of e.names())n.add(a);const s=[],o=[];for(s.push(t);s.length>0;){const a=s[s.length-1];if(n.has(a.name)){s.pop();continue}const l=o[o.length-1]===s.length-1;if(a.inputs.length===0||l)s.pop(),r.push(a),n.add(a.name),l&&o.pop();else{o.push(s.length-1);for(const c of a.inputs)i[c.name]==null&&(i[c.name]=new Set),i[c.name].add(a.name),!n.has(c.name)&&s.push(c)}}return{sorted:r,recipientMap:i}}function X7e(t){let e;if(t.sourceLayer.inboundNodes.length===1)e=t.sourceLayer.output;else{let n=null;for(let r=0;r<t.sourceLayer.inboundNodes.length;++r)for(const i of t.sourceLayer.inboundNodes[r].outputTensors)if(i.id===t.id){n=r;break}e=t.sourceLayer.getOutputAt(n)}return e}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y7e=Ee();Y7e.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,q7e);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function OL(t,e){return Ne(()=>as(lt(de(t,t),e,!0)))}class nb extends h0{getConfig(){return{}}}class Jne extends nb{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return Ne(()=>{const n=OL(e,this.axis),r=Jo(n,0,this.maxValue);return de(e,yt(r,ze(ai(),n)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}Jne.className="MaxNorm";Fe(Jne);class Qne extends nb{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return Ne(()=>yt(e,ze(ai(),OL(e,this.axis))))}getConfig(){return{axis:this.axis}}}Qne.className="UnitNorm";Fe(Qne);class ere extends nb{apply(e){return Vu(e)}}ere.className="NonNeg";Fe(ere);class tre extends nb{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return Ne(()=>{const n=OL(e,this.axis),r=ze(de(this.rate,Jo(n,this.minValue,this.maxValue)),de(1-this.rate,n));return de(e,yt(r,ze(ai(),n)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}tre.className="MinMaxNorm";Fe(tre);const jU={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function ui(t){return SL(t)}function BU(t,e={}){return Zx(t,Ia.getMap().classNameMap,e,"constraint")}function di(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in jU?jU[t]:t,config:{}};return BU(n)}else return t instanceof nb?t:BU(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function tf(t){if(t==null)return;const e=[],n=[],r=[];for(const i in t){const s=t[i];if(typeof s!="number"){const o=s;e.push(o.data()),n.push(i),r.push(o)}}if(e.length>0){const i=await Promise.all(e);for(let s=0;s<i.length;++s)t[n[s]]=i[s][0];Qt(r)}}function nre(t){if(t!=null)for(const e in t){const n=t[e];typeof n!="number"&&n.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var zU;(function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"})(zU||(zU={}));const Z7e=125;class iv{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,n){}async onEpochEnd(e,n){}async onBatchBegin(e,n){}async onBatchEnd(e,n){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class J7e{constructor(e,n=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=n}append(e){this.callbacks.push(e)}setParams(e){for(const n of this.callbacks)n.setParams(e)}setModel(e){for(const n of this.callbacks)n.setModel(e)}async onEpochBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochBegin(e,n)}async onEpochEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochEnd(e,n)}async onBatchBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchBegin(e,n)}async onBatchEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchEnd(e,n)}async onTrainBegin(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainEnd(e)}}class Q7e extends iv{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,n){n==null&&(n={});const r=n.size==null?0:n.size;this.seen+=r;for(const i in n){const s=n[i];if(typeof s=="number")this.totals.hasOwnProperty(i)||(this.totals[i]=0),this.totals[i]=this.totals[i]+s*r;else{let o;i in this.totals?o=this.totals[i]:this.totals[i]=0;const a=Ne(()=>ze(this.totals[i],de(s,r)));this.totals[i]=a,o!=null&&o.dispose()}}}async onEpochEnd(e,n){if(n!=null)for(const r of this.params.metrics)this.totals[r]!=null&&(typeof this.totals[r]=="number"?n[r]=this.totals[r]/this.seen:Ne(()=>{const i=de(yt(1,this.seen),this.totals[r]);n[r]=i,this.totals[r].dispose(),yc(n[r])}))}}class eUe extends iv{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,n){n==null&&(n={}),this.epoch.push(e);for(const r in n)this.history[r]==null&&(this.history[r]=[]),this.history[r].push(n[r])}async syncData(){const e=[],n=[],r=[];for(const s in this.history){const o=this.history[s];for(let a=0;a<o.length;++a)if(typeof o[a]!="number"){const l=o[a];e.push(l.data()),n.push(s),r.push(a)}}const i=await Promise.all(e);for(let s=0;s<i.length;++s)this.history[n[s]][r[s]].dispose(),this.history[n[s]][r[s]]=i[s][0]}}class tUe extends iv{constructor(e,n){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||ane,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=Z7e),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");A3(this.yieldEvery)&&(this.maybeWait=p7e(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,n,r){const i=[];this.yield!=null&&(await tf(r),i.push(this.yield(e,n,r))),i.push(this.nextFrameFunc()),await Promise.all(i)}async onEpochBegin(e,n){this.currentEpoch=e,this.epochBegin!=null&&(await tf(n),await this.epochBegin(e,n))}async onEpochEnd(e,n){const r=[];this.epochEnd!=null&&(await tf(n),r.push(this.epochEnd(e,n))),this.yieldEvery==="epoch"&&r.push(this.nextFrameFunc()),await Promise.all(r)}async onBatchBegin(e,n){this.batchBegin!=null&&(await tf(n),await this.batchBegin(e,n))}async onBatchEnd(e,n){const r=[];this.batchEnd!=null&&(await tf(n),r.push(this.batchEnd(e,n))),this.yieldEvery==="batch"?r.push(this.nextFrameFunc()):A3(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,e,n)),await Promise.all(r)}async onTrainBegin(e){this.trainBegin!=null&&(await tf(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await tf(e),await this.trainEnd(e))}}function rre(t,e){return t==null&&(t={}),t instanceof iv?[t]:Array.isArray(t)&&t[0]instanceof iv?t:Cn(t).map(r=>new tUe(r,e))}class wa{constructor(){}static registerCallbackConstructor(e,n){Z(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),wa.checkForDuplicate(n),wa.constructors[e]==null&&(wa.constructors[e]=[]),wa.constructors[e].push(n)}static checkForDuplicate(e){for(const n in wa.constructors)wa.constructors[+n].forEach(i=>{if(i===e)throw new he("Duplicate callback constructor.")})}static clear(){wa.constructors={}}static createCallbacks(e){const n=[];for(const r in wa.constructors){const i=+r;e>=i&&n.push(...wa.constructors[i])}return n.map(r=>new r)}}wa.constructors={};function ire(t,e,n,r,i,s,o,a,l){const c=new eUe,u=[new Q7e,...wa.createCallbacks(e)];t!=null&&u.push(...t),u.push(c);const d=new J7e(u);return d.setParams({epochs:n,initialEpoch:r,samples:i,steps:s,batchSize:o,verbose:e,doValidation:a,metrics:l}),{callbackList:d,history:c}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function hu(t,e={},n=!1){return Zx(t,Ia.getMap().classNameMap,e,"layer",n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function IS(t,e){return Ne(()=>{t.dtype!=="float32"&&(t=Ye(t,"float32"));const n=lt(Qx(t),e,!0),r=N5(n.shape,ai()),i=as(Ch(n,r));return yt(t,i)})}function L5(t,e){return Ne(()=>Pr(Qx(nt(e,t)),-1))}function DL(t,e){return Ne(()=>Pr(Si(nt(e,t)),-1))}function LL(t,e){return Ne(()=>{const n=nt(t,e),r=Jo(Si(t),ai(),Number.MAX_VALUE),i=Si(yt(n,r));return de(100,Pr(i,-1))})}function nUe(t,e){return Ne(()=>{const n=Jo(e,ai(),Number.MAX_VALUE),r=Ga(ze(1,n)),i=Jo(t,ai(),Number.MAX_VALUE),s=Ga(ze(1,i));return Pr(Qx(nt(r,s)),-1)})}function rUe(t,e){return Ne(()=>{const n=Ch(0,nt(1,de(t,e)));return Pr(Qx(n),-1)})}function iUe(t,e){return Ne(()=>{const n=Ch(0,nt(1,de(t,e)));return Pr(n,-1)})}function sUe(t,e){return Ne(()=>{const n=lt(de(t,e),-1),r=Nl(de(nt(1,t),e),-1);return Ch(0,ze(1,nt(r,n)))})}function oUe(t,e){return Ne(()=>{const n=Math.log(2),r=nt(e,t),i=nt(ze(r,Wx(de(-2,r))),n);return Pr(i,-1)})}function sv(t,e,n=!1){return Ne(()=>{if(n)e=BD(e);else{const r=lt(e,e.shape.length-1,!0);e=yt(e,r)}return e=Jo(e,ai(),1-ai()),or(lt(de(Ye(t,"float32"),Ga(e)),e.shape.length-1))})}function _S(t,e,n=!1){return Ne(()=>{const r=Ye(_5(A7e(t)),"int32");e=Jo(e,ai(),1-ai());const i=e.shape,s=be(_te(r,i[i.length-1]),i);return sv(s,e,n)})}function aUe(t,e){if(!xn(t.shape,e.shape))throw new he(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(e.shape)}`);return Ne(()=>{const n=Vu(e),r=or(Si(e));return ze(nt(n,de(e,t)),SD(Qo(r)))})}function M5(t,e){return Ne(()=>{let n;return n=Jo(e,ai(),1-ai()),n=Ga(yt(n,nt(1,n))),Pr(aUe(t,n),-1)})}function lUe(t,e){return Ne(()=>{const n=Jo(t,ai(),1),r=Jo(e,ai(),1);return lt(de(t,Ga(yt(n,r))),-1)})}function cUe(t,e){return Ne(()=>{const n=Ga(ze(ai(),e));return Pr(nt(e,de(t,n)),-1)})}function sre(t,e){return Ne(()=>{const n=IS(t,-1),r=IS(e,-1),i=de(n,r);return or(lt(i,-1))})}const ES={meanSquaredError:L5,meanAbsoluteError:DL,meanAbsolutePercentageError:LL,meanSquaredLogarithmicError:nUe,squaredHinge:rUe,hinge:iUe,categoricalHinge:sUe,logcosh:oUe,categoricalCrossentropy:sv,sparseCategoricalCrossentropy:_S,binaryCrossentropy:M5,kullbackLeiblerDivergence:lUe,poisson:cUe,cosineProximity:sre};function A_(t){if(typeof t=="string"){if(t in ES)return ES[t];let e=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new he(e)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ore(t,e){return Ne(()=>{const n=de(.5,qa(e)),r=xc(ra(e,n),t.dtype);return Pr(Cc(t,r),-1)})}function are(t,e){return Ne(()=>xc(Cc(Q1(t,-1),Q1(e,-1)),"float32"))}function uUe(t,e){return Ne(()=>Ye(lt(Au(Cc(t,1),Cc(e,1))),"float32"))}function dUe(t,e){return Ne(()=>Ye(lt(Au(Cc(t,0),Cc(e,1))),"float32"))}function hUe(t,e){return Ne(()=>{const n=uUe(t,e),r=dUe(t,e),i=ze(n,r);return Ye(Ts(ra(i,0),yt(n,i),0),"float32")})}function fUe(t,e){return M5(t,e)}function pUe(t,e){return t.rank===e.rank&&(t=qx(t,[t.rank-1])),e=Q1(e,-1),e.dtype!==t.dtype&&(e=Ye(e,t.dtype)),Ye(Cc(t,e),"float32")}const mUe=L5,gUe=L5,yUe=DL,vUe=DL,xUe=LL,bUe=LL,lre=sv,wUe=sre,cre=_S,TS={binaryAccuracy:ore,categoricalAccuracy:are,precision:hUe,categoricalCrossentropy:lre,sparseCategoricalCrossentropy:cre,mse:mUe,MSE:gUe,mae:yUe,MAE:vUe,mape:xUe,MAPE:bUe,cosine:wUe};function kUe(t){if(typeof t=="string"&&t in TS)return TS[t];if(typeof t!="string"&&t!=null)return t;throw new he(`Unknown metric ${t}`)}function Zw(t){if(ec(t!==null,`Unknown LossOrMetricFn ${t}`),typeof t=="string")return t;{let e;for(const n of Object.keys(ES))if(ES[n]===t){e=n;break}if(e!==void 0)return e;for(const n of Object.keys(TS))if(TS[n]===t){e=n;break}return e!==void 0?e:t.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function SUe(t){const e={Adagrad:()=>hf.adagrad(.01),Adadelta:()=>hf.adadelta(1,.95,ai()),Adam:()=>hf.adam(.001,.9,.999,ai()),Adamax:()=>hf.adamax(.002,.9,.999,ai(),0),RMSProp:()=>hf.rmsprop(.001,.9,0,ai()),SGD:()=>hf.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,t in e)return e[t]();throw new he(`Unknown Optimizer ${t}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const UU=1*1024*1024;function VU(t,e,n=!1){if(t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!Q3(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const r=JSON.stringify(t);r.length>UU&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${r.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${UU}.`)}}function Q3(t){if(t===null)return!0;if(typeof t=="object")if(Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);for(const n of e)if(typeof n!="string"||!Q3(t[n]))return!1;return!0}else if(Array.isArray(t)){for(const e of t)if(!Q3(e))return!1;return!0}else return!1;else{const e=typeof t;return e==="string"||e==="number"||e==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function CUe(t,e,n,r=console.log){const i=AUe(t),s=["Layer (type)","Input Shape","Output shape","Param #"];i?(e=e||90,n=n||[.32,.61,.89,1]):(e=e||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(u=>Math.floor(e*u)));let o;if(!i){s.push("Receives inputs"),o=[];for(const u in t.nodesByDepth)o.push(...t.nodesByDepth[u])}r("_".repeat(e)),$S(s,n,r),r("=".repeat(e));const a=t.layers;for(let u=0;u<a.length;++u)i?IUe(a[u],n,r):_Ue(a[u],n,o,r),r((u===a.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency();const l=NUe(t),c=CS(t.nonTrainableWeights);r(`Total params: ${l+c}`),r(`Trainable params: ${l}`),r(`Non-trainable params: ${c}`),r("_".repeat(e))}function NUe(t){let e;return t.collectedTrainableWeights!=null?e=CS(t.collectedTrainableWeights):e=CS(t.trainableWeights),e}function AUe(t){let e=!0;const n=[],r=[];for(const i in t.nodesByDepth)n.push(t.nodesByDepth[i]);for(const i of n){if(i.length>1||i.length===1&&i[0].inboundLayers.length>1){e=!1;break}r.push(...i)}if(e)for(const i of t.layers){let s=!1;for(const o of i.inboundNodes)if(r.indexOf(o)!==-1)if(s){e=!1;break}else s=!0;if(!e)break}return e}function $S(t,e,n=console.log){let r="";for(let i=0;i<t.length;++i)i>0&&(r=r.slice(0,r.length-1)+" "),r+=t[i],r=r.slice(0,e[i]),r+=" ".repeat(e[i]-r.length);n(r)}function IUe(t,e,n){let r,i;try{i=t.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch{i="multiple"}try{r=JSON.stringify(t.outputShape)}catch{r="multiple"}const s=t.name,o=t.getClassName(),a=[`${s} (${o})`,i,r,t.countParams().toString()];$S(a,e,n)}function _Ue(t,e,n,r){let i,s;try{s=t.inboundNodes.map(d=>JSON.stringify(d.inputShapes)).join(",")}catch{s="multiple"}try{i=JSON.stringify(t.outputShape)}catch{i="multiple"}const o=[];for(const d of t.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(d)===-1))for(let h=0;h<d.inboundLayers.length;++h){const f=d.inboundLayers[h].name,p=d.nodeIndices[h],m=d.tensorIndices[h];o.push(`${f}[${p}][${m}]`)}const a=t.name,l=t.getClassName(),c=o.length===0?"":o[0],u=[`${a} (${l})`,s,i,t.countParams().toString(),c];$S(u,e,r);for(let d=1;d<o.length;++d)$S(["","","","",o[d]],e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ure(t,e,n){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&e===0&&typeof n=="string"}function e$(t,e){if(t===null)return null;if(typeof t=="string")return mf(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let i=0;i<r;++i){const s=t[i];ure(e,i,s)?n.push(s):n.push(e$(s,e))}return n}else{const n={};for(const r of Object.keys(t)){const i=t[r];if(r==="name"&&typeof i=="string")n[r]=i;else{const s=mf(r);n[s]=e$(i,s)}}return n}}function t$(t,e){if(t==null)return null;if(typeof t=="string")return Qc(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let i=0;i<r;++i){const s=t[i];ure(e,i,s)?n.push(s):n.push(t$(s,e))}return n}else{const n={};for(const r of Object.keys(t)){const i=t[r],s=Qc(r);(r==="name"||r==="className")&&typeof i=="string"?n[s]=i:n[s]=t$(i,r)}return n}}/** @license See the LICENSE file. */const dre="4.22.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const EUe=t=>{const e=Object.keys(t);if(e.length===0)return!1;const n=e[0].split("/");return!isNaN(parseInt(n[n.length-1],10))};class ul extends Zt{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,this.name==null){const v=this.getClassName().toLowerCase();this.name=R5(v)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],qd(this.inputs).length!==this.inputs.length)throw new he(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(v=>v.name)}`);qd(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(v=>v.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const v of this.outputs){const x=v.sourceLayer,b=v.nodeIndex,S=v.tensorIndex;this.outputLayers.push(x),this.outputLayersNodeIndices.push(b),this.outputLayersTensorIndices.push(S)}for(const v of this.inputs){const x=v.sourceLayer,b=v.nodeIndex,S=v.tensorIndex;ec(b===0,"input layer has >1 nodes"),ec(S===0,"input layer has >1 tensors"),this.inputLayers.push(x),this.inputLayersNodeIndices.push(b),this.inputLayersTensorIndices.push(S)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let v=0;v<this.inputLayers.length;v++){const x=this.inputLayers[v];if(!(x instanceof tb))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${v} (0-based) originates from layer type ${x.getClassName()}.`);this.inputNames.push(x.name),this.feedInputShapes.push(x.batchInputShape),this.feedInputNames.push(x.name)}for(const v of this.outputLayers)this.outputNames.push(v.name);this.internalInputShapes=this.inputs.map(v=>v.shape),this.internalOutputShapes=this.outputs.map(v=>v.shape);const n={},r={},i={},s={},o={},a=[],l=(v,x,b,S,A,E)=>{(S==null||A==null||E==null)&&(S=v.sourceLayer,A=v.nodeIndex,E=v.tensorIndex);const I=S.inboundNodes[A];if(b.indexOf(I)!==-1)throw new Oa(`The tensor ${v.name} at layer "${S.name}" is part of a cycle.`);if(x.indexOf(I)!==-1)return;this.containerNodes.add(ul.nodeKey(S,A)),S.id in o||(o[S.id]=Object.keys(o).length),b.indexOf(I)===-1&&b.push(I);const T=I.inboundLayers.length;for(let O=0;O<T;O++){const $=I.inputTensors[O],R=I.inboundLayers[O],F=I.nodeIndices[O],L=I.tensorIndices[O];l($,x,b,R,F,L)}for(x.push(I);b.indexOf(I)>=0;)b.splice(b.indexOf(I),1);a.push(I)},c=[],u=[];for(const v of this.outputs)l(v,c,u);const d=a.slice().reverse();for(const v of d){r[v.id]=v,v.id in n||(n[v.id]=0);let x=n[v.id];const b=i[v.outboundLayer.id]==null?0:i[v.outboundLayer.id];x=Math.max(x,b),i[v.outboundLayer.id]=x,s[v.outboundLayer.id]=v.outboundLayer,n[v.id]=x;for(let S=0;S<v.inboundLayers.length;S++){const A=v.inboundLayers[S],E=v.nodeIndices[S],I=A.inboundNodes[E],T=n[I.id]==null?0:n[I.id];n[I.id]=Math.max(x+1,T),r[I.id]=I}}const h={};for(const v in n){const x=n[v];x in h||(h[x]=[]),h[x].push(r[v])}const f={};for(const v in i){const x=i[v];x in f||(f[x]=[]),f[x].push(s[v])}let p=Object.keys(f).map(v=>parseInt(v,10)).sort(Kw);this.layers=[];for(const v of p){const x=f[v];x.sort((b,S)=>{const A=o[b.id],E=o[S.id];return A<E?-1:A>E?1:0});for(const b of x)b instanceof ul&&this.internalContainerRefs.push(b),this.layers.push(b)}this.layersByDepth=f,p=Object.keys(h).map(v=>parseInt(v,10)).sort(Kw);const m=this.inputs.slice(),y=[];for(const v of p)for(const x of h[v]){const b=x.outboundLayer;if(b!=null){for(const S of x.inputTensors)if(m.indexOf(S)===-1)throw new Oa(`Graph disconnected: cannot obtain value for tensor ${S} at layer "${b.name}". The following previous layers were accessed without issue: ${y}`);for(const S of x.outputTensors)m.push(S);y.push(b.name)}}this.nodesByDepth=h;const g=this.layers.map(v=>v.name);for(const v of g){const x=g.filter(b=>b===v).length;if(x!==1)throw new Oa(`The name "${v}" is used ${x} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(g))}this.outboundNodes=[],this.inboundNodes=[],new D5({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(v=>null),outputMasks:this.outputs.map(v=>null),inputShapes:this.inputs.map(v=>v.shape),outputShapes:this.outputs.map(v=>v.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const n of this.layers)e.numDisposedVariables+=n.dispose().numDisposedVariables;for(const n of this.internalContainerRefs)e.numDisposedVariables+=n.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(n=>{n._trainableWeights.forEach(r=>r.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new he("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const n of this.layers)e=e.concat(n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.layers)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.layers)n.push(...r.trainableWeights);return n.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,n=!0){const r={};let i=0;const s=EUe(e);s&&this.parseWeights(e);for(const a of this.layers)for(const[l,c]of a.weights.entries()){const u=s?`${c.name.split("/").slice(0,-1).join("/")+"/"}${l}`:c.originalName;if(r[u]!=null)throw new he(`Duplicate weight name: ${u}`);r[u]=c,i++}const o=[];for(const a in e){let l=a;if(r[a]==null){const c=a.split("/");l=c.slice(0,-2).concat([c[c.length-1]]).join("/")}if(r[l]!=null)o.push([r[l],e[a]]);else if(n)throw new he(`Provided weight data has no target variable: ${a}`);delete r[l]}if(n){const a=[];for(const l in r)a.push(l);if(a.length>0)throw new he(`${a.length} of ${i} weights are not set: ${a}`)}RL(o)}parseWeights(e){for(const n in Object.keys(e)){const r=n.split("/"),i=["vars","layer_checkpoint_dependencies"],s=r.map(o=>o.startsWith("_")?o.slice(1):o).filter(o=>!i.includes(o)).join("/");s!==n&&(e[s]=e[n],delete e[n])}}updatedConfig(){const e=this.getConfig(),n={};return n.className=this.getClassName(),n.config=e,n.kerasVersion=`tfjs-layers ${dre}`,n.backend="TensorFlow.js",n}toJSON(e,n=!0){const r=t$(this.updatedConfig());return n?JSON.stringify(r):r}call(e,n){return Ne(()=>{e=Cn(e);const r=new Ed;for(let i=0;i<this.inputs.length;++i)r.add(this.inputs[i],e[i]);return My(this.outputs,r,n)})}computeMask(e,n){return Ne(()=>{e=Cn(e);let r;return n==null?r=yp(null,e.length):r=Cn(n),this.runInternalGraph(e,r)[1]})}computeOutputShape(e){const n=SS(e);if(n.length!==this.inputLayers.length)throw new he(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const r={};for(let a=0;a<n.length;a++){const l=this.inputLayers[a],c=n[a],u=l.name+"_0_0";r[u]=c}const i=Object.keys(this.nodesByDepth).map(a=>parseInt(a,10)).sort(Kw);if(i.length>1)for(const a of i){const l=this.nodesByDepth[a];for(const c of l){const u=c.outboundLayer;if(this.inputLayers.map(m=>m.id).indexOf(u.id)!==-1)continue;const d=[];for(let m=0;m<c.inboundLayers.length;m++){const y=c.inboundLayers[m],g=c.nodeIndices[m],v=c.tensorIndices[m],x=`${y.name}_${g}_${v}`,b=r[x];d.push(b)}const h=u.computeOutputShape(Vs(d)),f=SS(h),p=u.inboundNodes.indexOf(c);for(let m=0;m<f.length;m++){const y=`${u.name}_${p}_${m}`;r[y]=f[m]}}}const s=[],o=[];for(let a=0;a<this.outputLayers.length;a++){const l=this.outputLayers[a],c=this.outputLayersNodeIndices[a],u=this.outputLayersTensorIndices[a],d=`${l.name}_${c}_${u}`;o.push(d)}for(let a=0;a<o.length;a++){const l=o[a];ec(l in r),s.push(r[l])}return Vs(s)}runInternalGraph(e,n){n==null&&(n=yp(null,e.length));const r={};for(let l=0;l<this.inputs.length;++l){const c=this.inputs[l],u=e[l],d=n[l];r[c.id]=[u,d]}const i=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(Kw);for(const l of i){const c=this.nodesByDepth[l];for(const u of c){const d=u.outboundLayer,h=u.inputTensors,f=u.outputTensors,p=new Array;for(const m of h)m.id in r&&p.push(r[m.id]);if(p.length===h.length){let m={},y,g,v,x;if(u.callArgs!=null&&(m=u.callArgs),p.length===1){const[b,S]=p[0];m.mask==null&&(m.mask=S),v=Cn(d.call(b,m)),x=Cn(d.computeMask(b,S)),y=[b],g=[S]}else y=p.map(b=>b[0]),g=p.map(b=>b[1]),m.mask==null&&(m.mask=g),v=Cn(d.call(y,m)),x=Cn(d.computeMask(y,g));if(d.activityRegularizer)throw new qt("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let b=0;b<f.length;++b){const S=f[b],A=v[b],E=x[b];r[S.id]=[A,E]}}}}const s=[],o=[],a=[];for(const l of this.outputs){ec(l.id in r,`Could not compute output ${l.name} : ${l.id}`);const[c,u]=r[l.id];a.push(c.shape),s.push(c),o.push(u)}return[s,o,a]}buildNodeConversionMap(e){const n={};let r;for(const i of this.layers){r=i instanceof ul?1:0;for(let s=0;s<i.inboundNodes.length;s++){const o=ul.nodeKey(i,s);this.containerNodes.has(o)&&(n[o]=r,r+=1)}}return n}getLayer(e,n){if(n!=null)return this.findLayer(n);if(e==null)throw new he("Provide either a layer name or layer index");if(typeof e=="number")return this.findLayer(e);for(const r of this.layers)if(r.name===e)return r;throw new he(`No such layer: ${e}`)}findLayer(e){if(this.layers.length<=e)throw new he(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}calculateLosses(){return Ne(()=>{const e=[];for(const n of this.layers)for(let r=0;r<n.inboundNodes.length;++r){const i=ul.nodeKey(n,r);this.containerNodes.has(i)&&e.push(...n.calculateLosses())}return e})}getConfig(){const e={name:this.name},n=this.buildNodeConversionMap(this.layers),r=[];for(const o of this.layers){const a=o.getClassName(),l=o.getConfig(),c=[];for(let d=0;d<o.inboundNodes.length;d++){const h=o.inboundNodes[d],f=ul.nodeKey(o,d);let p={};if(this.containerNodes.has(f)){if(h.callArgs)try{JSON.stringify(h.callArgs),p=h.callArgs}catch{console.warn(`Layer ${o.name} was passed non-serializable keyword arguments: ${h.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),p={}}if(h.inboundLayers.length>0){const m=[];for(let y=0;y<h.inboundLayers.length;y++){const g=h.inboundLayers[y],v=h.nodeIndices[y],x=h.tensorIndices[y],b=ul.nodeKey(g,v);let S=n[b];S==null&&(S=0),m.push([g.name,S,x,p])}c.push(m)}}}const u={};u.name=o.name,u.className=a,u.config=l,u.inboundNodes=c,r.push(u)}e.layers=r;const i=[];for(let o=0;o<this.inputLayers.length;o++){const a=this.inputLayers[o],l=this.inputLayersNodeIndices[o],c=ul.nodeKey(a,l);if(!this.containerNodes.has(c))continue;let u=n[c];u==null&&(u=0);const d=this.inputLayersTensorIndices[o];i.push([a.name,u,d])}e.inputLayers=i;const s=[];for(let o=0;o<this.outputLayers.length;o++){const a=this.outputLayers[o],l=this.outputLayersNodeIndices[o],c=ul.nodeKey(a,l);if(!this.containerNodes.has(c))continue;let u=n[c];u==null&&(u=0);const d=this.outputLayersTensorIndices[o];s.push([a.name,u,d])}return e.outputLayers=s,e}static fromConfig(e,n,r={},i=!1){const s={},o={};function a(y,g){y.name in o?o[y.name].push(g):o[y.name]=[g]}function l(y,g){const v=[];let x;for(const b of g){const S=b[0],A=b[1],E=b[2];if(x=b[3]==null?{}:b[3],!(S in s)){a(y,g);return}const I=s[S];if(I.inboundNodes.length<=A){a(y,g);return}const T=I.inboundNodes[A];v.push(T.outputTensors[E])}v.length>0&&y.apply(Vs(v),x)}function c(y){const g=y.name,v=hu(y,n.customObjects!=null?n.customObjects:{});v.setFastWeightInitDuringBuild(i),s[g]=v,y.inboundNodes.forEach(b=>{if(!(b instanceof Array))throw new he(`Corrupted configuration, expected array for nodeData: ${b}`);a(v,b)})}const u=n.name,d=n.layers;for(const y of d)c(y);for(;!f7e(o);)for(const y of d){const g=s[y.name];if(g.name in o){const v=o[g.name];delete o[g.name];for(const x of v)l(g,x)}}const h=[],f=[],p=n.inputLayers;for(const y of p){const g=y[0],v=y[1],x=y[2];ec(g in s);const S=s[g].inboundNodes[v].outputTensors;h.push(S[x])}const m=n.outputLayers;for(const y of m){const g=y[0],v=y[1],x=y[2];ec(g in s);const S=s[g].inboundNodes[v].outputTensors;f.push(S[x])}return new e({inputs:h,outputs:f,name:u})}get stateful(){if(this._stateful)throw new he("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){Ne(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function TUe(t,e,n){const r=e.length;if(t==null||Array.isArray(t)&&t.length===0)return e.map(i=>null);if(r===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&e[0]in t?[t[e[0]]]:[t];if(Array.isArray(t)){if(t.length!==r)throw new Error(`Provided ${n} is an array of ${t.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return t}else if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){const i=[];return e.forEach(s=>{s in t?i.push(t[s]):i.push(null)}),i}else throw new Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${e} keys. Provided ${n} not understood: ${JSON.stringify(t)}`)}function hre(t,e){return TUe(t,e,"classWeight")}async function fre(t,e,n,r){if(e!=null||r!=null)throw new Error("Support sampleWeight is not implemented yet");if(n!=null){const i=Ne(()=>{if(t.shape.length===1)return Bf(t);if(t.shape.length===2){if(t.shape[1]>1)return Q1(t,1);if(t.shape[1]===1)return be(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),s=Array.from(await i.data());Qt(i);const o=[];return s.forEach(a=>{if(n[a]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${a} exists in the data but not in classWeight`);o.push(n[a])}),Ks(o,"float32")}else return null}function $Ue(t,e){return de(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const PUe=32;function pre(t,e){let n,r;const i=e;n=i.xs,r=i.ys,Z(n!=null&&r!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${e}`);const s=WU("input",t.inputNames,n),o=WU("output",t.outputNames,r),a=s[0].shape[0];Z(s.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${s.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),Z(o.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${o.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let l=0;l<s.length;l++)Z(s[l].shape[0]===a,()=>`Batch size mismatch: input ${t.inputNames[l]} has ${s[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);for(let l=0;l<o.length;l++)Z(o[l].shape[0]===a,()=>`Batch size mismatch: output ${t.outputNames[l]} has ${o[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);return{xs:s,ys:o}}function WU(t,e,n){if(n instanceof ri)return[n];if(Array.isArray(n))return Z(n.length===e.length,()=>`Received an array of ${n.length} Tensors, but expected ${e.length} to match the ${t} keys ${e}.`),n;{const r=[];for(const i of e){if(n[i]==null)throw new he(`The feature data generated by the dataset lacks the required ${t} key '${i}'.`);r.push(n[i])}return r}}function RUe(t){if(t.length===3)throw new qt("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}async function OUe(t,e,n){const r=n.batchesPerEpoch!=null;if(Z(t.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),Z(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),Z(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),Z(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),Z(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{const i=n.validationData!=null;let s,o;if(i)if(GU(n.validationData))Z(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{const y=RUe(n.validationData);s=y.xs,o=y.ys}const a=t.makeTrainFunction(),l=t.getDedupedMetricsNames();let c;i?c=l.slice().concat(l.map(y=>"val_"+y)):c=l.slice();const u=rre(n.callbacks,n.yieldEvery),d=n.verbose==null?1:n.verbose,{callbackList:h,history:f}=ire(u,d,n.epochs,null,null,DUe(e,n),null,i,c);h.setModel(t),t.history=f,await h.onTrainBegin(),t.stopTraining_=!1;let p=n.initialEpoch==null?0:n.initialEpoch,m=await e.iterator();for(;p<n.epochs;){const y={};await h.onEpochBegin(p);let g=0,v=0;for(r||(m=await e.iterator());!r||g<n.batchesPerEpoch;){const x=await m.next();if(r&&x.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${g} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(x.value!=null){const{xs:b,ys:S}=pre(t,x.value),A={};A.batch=v,A.size=b[0].shape[0],await h.onBatchBegin(v,A);const E=[];if(n.classWeight!=null){const O=hre(n.classWeight,t.outputNames);for(let $=0;$<O.length;++$)E.push(await fre(S[$],null,O[$]))}const I=b.concat(S).concat(E),T=a(I);Qt(I);for(let O=0;O<l.length;++O){const $=l[O],R=T[O];A[$]=R,yc(R)}await h.onBatchEnd(v,A),nre(A),v++,g++}if(r?g>=n.batchesPerEpoch:x.done){if(i){let b;GU(n.validationData)?b=Cn(await t.evaluateDataset(n.validationData,{batches:n.validationBatches})):b=Cn(t.evaluate(s,o,{batchSize:n.validationBatchSize==null?PUe:n.validationBatchSize,verbose:0}));for(let S=0;S<t.metricsNames.length;++S)y[`val_${t.metricsNames[S]}`]=b[S]}break}if(t.stopTraining_)break}if(await h.onEpochEnd(p,y),p++,t.stopTraining_)break}return await h.onTrainEnd(),await t.history.syncData(),t.history}finally{t.isTraining=!1}}function DUe(t,e){let n=null;return e.batchesPerEpoch!=null?n=e.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}function GU(t){return typeof t.iterator=="function"}function LUe(t){return typeof t.next=="function"}async function MUe(t,e,n){n=n||{};const r=n.batches!=null,i=t.testFunction;let s=[];if(n.verbose>0)throw new qt("Verbose mode is not implemented yet.");Z(!r||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);const o=LUe(e)?e:await e.iterator();let a=0,l=0;for(;!r||l<n.batches;){const c=await o.next();if(s=Ne(()=>{if(c.value){const{xs:u,ys:d}=pre(t,c.value),h=u.concat(d),f=Ne(()=>i(h));if(Qt(h),l===0)for(let m=0;m<f.length;++m)s.push(Rt(0));const p=h[0].shape[0];for(let m=0;m<f.length;++m){const y=f[m],g=s[m];s[m]=Ne(()=>ze(s[m],de(p,y))),l>0&&Qt(g)}Qt(f),a+=p,++l}return s}),c.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let c=0;c<s.length;++c){const u=s[c];s[c]=yt(s[c],a),Qt(u)}return Vs(s)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function I_(t){Z(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function wy(t,e,n){return t==null?[null]:Array.isArray(t)?t.map(r=>Uf(r,e,n-e)):Uf(t,e,n-e)}function n$(t,e){return Ne(()=>t==null?null:Array.isArray(t)?t.map(n=>n$(n,e)):Une(t,e.dtype==="int32"?e:Ye(e,"int32")))}function __(t,e){const n=[];let r=0,i=null;for(;r<t;)i=r+e,i>=t&&(i=t),n.push([r,i]),r=i;return n}function mre(t){const e=[];t instanceof ri&&(t=[t]);for(let n=0;n<t.length;++n){const r=t[n];if(r.rank===1)e.push(Jx(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(r)}}return e}function ll(t,e){if(t==null)return;const n=[];if(e instanceof ri)n.push(e.id);else if(Array.isArray(e))e.forEach(i=>n.push(i.id));else if(e!=null)for(const i in e){const s=e[i];n.push(s.id)}const r=[];if(t instanceof ri)n.indexOf(t.id)===-1&&r.push(t);else if(Array.isArray(t))t.forEach(i=>{n.indexOf(i.id)===-1&&r.push(i)});else if(t!=null)for(const i in t){const s=t[i];n.indexOf(s.id)===-1&&r.push(s)}r.forEach(i=>{i.isDisposed||i.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function FUe(t){return t instanceof ri}function r$(t){return Array.isArray(t)}function qU(t){return!FUe(t)&&!r$(t)}function HU(t,e,n,r=!0,i=""){if(e==null||e.length===0){if(t!=null){let o=!1;if(r$(t)&&t.length>0)o=!0;else if(qU(t)){for(const a in t)if(t.hasOwnProperty(a)){o=!0;break}}else o=!0;if(o)throw new he(`Error when checking model ${i} expected no data, but got ${t}`)}return[]}if(t==null)return e.map(o=>null);let s;if(qU(t)){t=t,s=[];for(const o of e){if(t[o]==null)throw new he(`No data provided for "${o}". Need data for each key in: ${e}`);s.push(t[o])}}else if(r$(t)){if(t=t,t.length!==e.length)throw new he(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);s=t}else{if(t=t,e.length>1)throw new he(`The model ${i} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);s=[t]}if(s=mre(s),n!=null)for(let o=0;o<e.length;++o){if(n[o]==null)continue;const a=s[o];if(a.shape.length!==n[o].length)throw new he(`Error when checking ${i}: expected ${e[o]} to have ${n[o].length} dimension(s). but got array with shape ${a.shape}`);for(let l=0;l<n[o].length;++l){if(l===0&&!r)continue;const c=a.shape[l],u=n[o][l];if(u!=null&&u>=0&&c!==u)throw new he(`${i} expected a batch of elements where each example has shape [${n[o].slice(1,n[o].length)}] (i.e.,tensor shape [*,${n[o].slice(1,n[o].length)}]) but the ${i} received an input with ${a.shape[0]} examples, each with shape [${a.shape.slice(1,a.shape.length)}] (tensor shape [${a.shape}])`)}}return s}function jUe(t,e,n){const r=qd(t.map(s=>s.shape[0]));r.sort();const i=qd(e.map(s=>s.shape[0]));if(i.sort(),r.length>1)throw new he(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(s=>s.shape))}`);if(i.length>1)throw new he(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(s=>s.shape))}`);if(r.length>0&&i.length>0&&!xn(r,i))throw new he(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${i[0]} target sample(s).`)}function BUe(t,e,n){const r=[L5,M5,sv];for(let i=0;i<t.length;++i){const s=t[i],o=e[i],a=n[i];if(o!=null){if(o===sv&&s.shape[s.shape.length-1]===1)throw new he(`You are passing a target array of shape ${s.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(r.indexOf(o)!==-1){const l=s.shape.slice(1),c=a.slice(1);for(let u=0;u<l.length;++u){const d=l[u],h=c[u];if(h!=null&&d!==h)throw new he(`A target Tensor with shape ${s.shape} was passed for an output of shape ${a}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function KU(t,e,n,r=!0,i=""){let s;if(Array.isArray(t)){if(t.length!==e.length)throw new he(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${t.length} Tensors(s).`);s=t}else{if(e.length>1)throw new he(`The model expects ${e.length} ${i} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);s=[t]}if(n!=null)for(let o=0;o<e.length;++o){if(n[o]==null)continue;const a=s[o];if(a.shape.length!==n[o].length)throw new he(`Error when checking ${i}: expected ${e[o]} to have ${n[o].length} dimension(s), but got array with shape ${JSON.stringify(a.shape)}`);for(let l=0;l<n[o].length;++l){if(l===0&&!r)continue;const c=a.shape[l],u=n[o][l];if(u!=null&&u!==c)throw new he(`Error when checking ${i}: expected ${e[o]} to have shape ${JSON.stringify(n[o])} but got array with shape ${JSON.stringify(a.shape)}.`)}}}function zUe(t,e){if(t==null||Array.isArray(t)&&t.length===0)return e.map(r=>[]);let n;if(typeof t=="string"||typeof t=="function")n=[t];else if(Array.isArray(t)||typeof t=="object")n=t;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);if(Array.isArray(n))return e.map(r=>n);{const r=[];for(const i of e){let s=n.hasOwnProperty(i)?n[i]:[];Array.isArray(s)||(s=[s]),r.push(s)}return r}}const UUe="layers-model";class Ym extends ul{constructor(e){super(e),this.isTraining=!1}summary(e,n,r=console.log){if(!this.built)throw new he("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");CUe(this,e,n,r)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=SUe(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof Nh))throw new he("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let n=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(const o in e.loss)if(this.outputNames.indexOf(o)===-1)throw new he(`Unknown entry in loss dictionary: "${o}". Only expected the following keys: ${this.outputNames}`);for(const o of this.outputNames)e.loss[o]==null&&console.warn(`Output "${o}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${o} during training`),n.push(A_(e.loss[o]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new he(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);n=e.loss.map(a=>A_(a))}else{const o=A_(e.loss);this.outputs.forEach(a=>{n.push(o)})}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let o=0;o<this.outputs.length;++o){const a=this.internalOutputShapes[o],l=this.outputNames[o];this.feedOutputNames.push(l),this.feedOutputShapes.push(a),this.feedLossFns.push(this.lossFunctions[o])}const r=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],zf("loss",()=>{for(let o=0;o<this.outputs.length;++o){if(r.indexOf(o)!==-1)continue;const a=this.lossFunctions[o];this.outputs.length>1&&(this.metricsTensors.push([a,o]),this.metricsNames.push(this.outputNames[o]+"_loss"))}});const i=zUe(e.metrics,this.outputNames),s=(o,a,l)=>{this.outputNames.length>1&&(a=this.outputNames[o]+"_"+a),this.metricsNames.push(a),this.metricsTensors.push([l,o])};zf("metric",()=>{for(let o=0;o<this.outputs.length;++o){if(r.indexOf(o)!==-1)continue;const a=i[o];(c=>{const u="";let d,h,f;for(const p of c){if(typeof p=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(p)!==-1){const y=this.internalOutputShapes[o];y[y.length-1]===1||this.lossFunctions[o]===M5?["accuracy","acc"].indexOf(p)!==-1?h=ore:["crossentropy","ce"].indexOf(p)!==-1&&(h=fUe):this.lossFunctions[o]===_S?["accuracy","acc"].indexOf(p)!==-1?h=pUe:["crossentropy","ce"].indexOf(p)!==-1&&(h=cre):["accuracy","acc"].indexOf(p)!==-1?h=are:["crossentropy","ce"].indexOf(p)!==-1&&(h=lre);let g;["accuracy","acc"].indexOf(p)!==-1?g="acc":["crossentropy","ce"].indexOf(p)!==-1&&(g="ce"),f=h,d=u+g}else f=kUe(p),d=u+Zw(p);let m;zf(d,()=>{m=f}),s(o,d,m)}})(a)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,n,r={}){const i=r.batchSize==null?32:r.batchSize;I_(i);const s=!0,o=this.standardizeUserDataXY(e,n,s,i);try{const a=o[0].concat(o[1]);this.makeTestFunction();const l=this.testFunction,c=this.testLoop(l,a,i,r.verbose,r.steps);return Vs(c)}finally{ll(o[0],e),ll(o[1],n)}}async evaluateDataset(e,n){return this.makeTestFunction(),MUe(this,e,n)}checkNumSamples(e,n,r,i="steps"){let s;if(r!=null){if(s=null,n!=null)throw new he(`If ${i} is set, batchSize must be null or undefined.Got batchSize = ${n}`)}else if(e!=null)Array.isArray(e)?s=e[0].shape[0]:s=e.shape[0];else throw new he(`Either the input data should have a defined shape, or ${i} shoud be specified.`);return s}execute(e,n){if(Array.isArray(n)&&n.length===0)throw new he("`outputs` is an empty Array, which is not allowed.");const r=Array.isArray(n),i=r?n:[n],s=this.retrieveSymbolicTensors(i),o=new Ed;if(e instanceof ri&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new he(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let l=0;l<this.inputs.length;++l)o.add(this.inputs[l],e[l])}else for(const l of this.inputs){const c=e[l.name];if(c==null)throw new he(`No value is provided for the model's input ${l.name}`);o.add(l,c)}const a=My(s,o);return r?a:a[0]}retrieveSymbolicTensors(e){const n=yp(null,e.length);let r=e.length;for(const i of this.layers){const s=Array.isArray(i.output)?i.output:[i.output],o=s.map(a=>a.name);for(let a=0;a<e.length;++a){const l=o.indexOf(e[a]);if(l!==-1&&(n[a]=s[l],r--),r===0)break}if(r===0)break}if(r>0){const i=[];throw n.forEach((s,o)=>{s==null&&i.push(e[o])}),new he(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(i)}`)}return n}predictLoop(e,n=32,r=!1){return Ne(()=>{const i=this.checkNumSamples(e);if(r)throw new qt("Verbose predictLoop() is not implemented yet.");const s=__(i,n),o=this.outputs.map(a=>[]);for(let a=0;a<s.length;++a)Ne(()=>{const c=s[a][0],u=s[a][1],d=wy(e,c,u),h=[];if(Array.isArray(d))for(let p=0;p<d.length;++p)h.push({key:this.inputs[p],value:d[p]});else h.push({key:this.inputs[0],value:d});const f=new Ed(h);return My(this.outputs,f)}).forEach((c,u)=>o[u].push(c));return Vs(o.map(a=>Ys(a,0)))})}predict(e,n={}){const r=mre(e);KU(r,this.inputNames,this.feedInputShapes,!1);try{const i=n.batchSize==null?32:n.batchSize;return I_(i),this.predictLoop(r,i)}finally{ll(r,e)}}predictOnBatch(e){KU(e,this.inputNames,this.feedInputShapes,!0);const n=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,n)}standardizeUserDataXY(e,n,r=!0,i){if(this.optimizer_==null)throw new Oa("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const s=[];for(let o=0;o<this.feedOutputShapes.length;++o){const a=this.feedOutputShapes[o];this.feedLossFns[o]===_S?s.push(a.slice(0,a.length-1).concat([1])):s.push(a)}if(e=HU(e,this.feedInputNames,this.feedInputShapes,!1,"input"),n=HU(n,this.feedOutputNames,s,!1,"target"),jUe(e,n),BUe(n,this.feedLossFns,this.feedOutputShapes),this.stateful&&i!=null&&i>0&&e[0].shape[0]%i!==0)throw new he(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${i}. Found: ${e[0].shape[0]} sample(s).`);return[e,n]}async standardizeUserData(e,n,r,i,s=!0,o){const[a,l]=this.standardizeUserDataXY(e,n,s,o);if(r!=null)throw new Error("sample weight is not supported yet.");let c=null;if(i!=null){const u=hre(i,this.outputNames);c=[];for(let d=0;d<u.length;++d)c.push(await fre(l[d],null,u[d]))}return[a,l,c]}testLoop(e,n,r,i=0,s){return Ne(()=>{const o=this.checkNumSamples(n,r,s,"steps"),a=[];if(i>0)throw new qt("Verbose mode is not implemented yet.");if(s!=null)throw new qt("steps mode in testLoop() is not implemented yet");{const l=__(o,r),c=Ks(Tl(0,o));for(let u=0;u<l.length;++u){const d=l[u][0],h=l[u][1],f=Uf(c,d,h-d),p=n$(n,f),m=e(p);if(u===0)for(let y=0;y<m.length;++y)a.push(Rt(0));for(let y=0;y<m.length;++y){const g=m[y];a[y]=ze(a[y],de(h-d,g))}}for(let u=0;u<a.length;++u)a[u]=yt(a[u],o)}return a})}getDedupedMetricsNames(){const e=this.metricsNames,n=[];for(let r=0;r<e.length;++r){const i=e[r];let s=i;if(PU(e,i)>1){const o=PU(e.slice(0,r),i);s+=`_${o}`}n.push(s)}return n}makeTrainFunction(){return e=>{const n=[],r=e.slice(0,this.inputs.length),i=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),s=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),o=[],a=()=>{const d=[];for(let m=0;m<this.inputs.length;++m)d.push({key:this.inputs[m],value:r[m]});const h=new Ed(d),f=My(this.outputs,h,{training:!0});let p;for(let m=0;m<this.lossFunctions.length;++m){const y=this.lossFunctions[m];let g=y(i[m],f[m]);s[m]!=null&&(g=$Ue(g,s[m]));const v=Pr(g);n.push(v),m===0?p=g:p=ze(p,g)}for(let m=0;m<this.metricsTensors.length;++m){let y;if(this.outputs.length>1&&m<this.outputs.length)y=n[m];else{const g=this.metricsTensors[m][0],v=this.metricsTensors[m][1];y=Pr(g(i[v],f[v]))}yc(y),o.push(y)}return p=Pr(p),this.calculateLosses().forEach(m=>{p=ze(p,m)}),p},l=this.collectedTrainableWeights.map(d=>d.read()),c=!0;return[this.optimizer_.minimize(a,c,l)].concat(o)}}makeTestFunction(){this.testFunction=e=>Ne(()=>{const n=[];let r;const i=e.slice(0,this.inputs.length),s=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),o=[];for(let c=0;c<this.inputs.length;++c)o.push({key:this.inputs[c],value:i[c]});const a=new Ed(o),l=My(this.outputs,a);for(let c=0;c<this.lossFunctions.length;++c){const u=this.lossFunctions[c],d=Pr(u(s[c],l[c]));c===0?r=d:r=ze(r,d),n.push(r)}for(let c=0;c<this.metricsTensors.length;++c){const u=this.metricsTensors[c][0],d=this.metricsTensors[c][1],h=Pr(u(s[d],l[d]));n.push(h)}return n})}async fit(e,n,r={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let i,s,o,a,l,c,u,d,h;try{const f=r.batchSize==null?32:r.batchSize;I_(f);const p=!1,m=await this.standardizeUserData(e,n,r.sampleWeight,r.classWeight,p,f);i=m[0],s=m[1],h=m[2];let y=!1,g;if(r.validationData!=null&&r.validationData.length>0){if(y=!0,r.validationData.length===2)l=r.validationData[0],c=r.validationData[1];else throw r.validationData.length===3?new qt("validationData including sample weights is not supported yet."):new he(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${r.validationData} is invalid.`);const T=!0,O=await this.standardizeUserData(l,c,null,null,T,f);u=O[0],d=O[1],g=u.concat(d)}else if(r.validationSplit!=null&&r.validationSplit>0&&r.validationSplit<1){y=!0;const T=Math.floor(i[0].shape[0]*(1-r.validationSplit)),O=i[0].shape[0];u=wy(i,T,O),o=i,i=wy(i,0,T),d=wy(s,T,O),a=s,s=wy(s,0,T),g=u.concat(d)}else r.validationSteps!=null&&(y=!0);const v=i.concat(s).concat(h);this.checkTrainableWeightsConsistency();const x=this.makeTrainFunction(),b=this.getDedupedMetricsNames();let S,A;y?(this.makeTestFunction(),S=this.testFunction,A=b.slice().concat(b.map(T=>"val_"+T))):(S=null,g=[],A=b.slice());const E=rre(r.callbacks,r.yieldEvery);return await this.fitLoop(x,v,b,f,r.epochs,r.verbose,E,S,g,r.shuffle,A,r.initialEpoch,null,null)}finally{this.isTraining=!1,ll(i,e),ll(s,n),ll(o,e),ll(a,n),ll(u,l),ll(d,c),h!=null&&Qt(h)}}async fitLoop(e,n,r,i,s,o,a,l,c,u,d,h,f,p){i==null&&(i=32),s==null&&(s=1),u==null&&(u=!0),h==null&&(h=0);let m=!1;if(l!=null&&c!=null&&(m=!0),p!=null&&(m=!0,f==null))throw new he("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const y=this.checkNumSamples(n,i,f,"steps_per_epoch");let g;y!=null&&(g=Tl(0,y)),o==null&&(o=1);const{callbackList:v,history:x}=ire(a,o,s,h,y,f,i,m,d);v.setModel(this),this.history=x,await v.onTrainBegin(),this.stopTraining_=!1;for(let b=h;b<s;++b){await v.onEpochBegin(b);const S={};if(f!=null)throw new qt("stepsPerEpoch mode is not implemented yet.");{if(u==="batch")throw new qt("batch shuffling is not implemneted yet");u&&lDe(g);const A=Ks(g),E=__(y,i);for(let I=0;I<E.length;++I){const T={};if(await v.onBatchBegin(I,T),Ne(()=>{const O=E[I][0],$=E[I][1],R=Uf(A,O,$-O);T.batch=I,T.size=$-O;const F=n$(n,R),L=e(F);for(let U=0;U<r.length;++U){const q=r[U],K=L[U];T[q]=K,yc(K)}if(I===E.length-1&&m){const U=this.testLoop(l,c,i);for(let q=0;q<r.length;++q){const K=r[q],j=U[q];yc(j),S["val_"+K]=j}}}),await v.onBatchEnd(I,T),nre(T),this.stopTraining_)break}A.dispose()}if(await v.onEpochEnd(b,S),this.stopTraining_)break}return await v.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,n){return OUe(this,e,n)}async trainOnBatch(e,n){const r=await this.standardizeUserData(e,n),i=r[0],s=r[1],a=this.makeTrainFunction()(i.concat(s)),l=[];for(const c of a){const u=await c.data();l.push(u[0])}return Qt(a),ll(r[0],e),ll(r[1],n),Vs(l)}getNamedWeights(e){const n=[],r=e!=null&&e.trainableOnly,i=r?this.trainableWeights:this.weights,s=this.getWeights(r);for(let o=0;o<i.length;++o)r&&!i[o].trainable||n.push({name:i[o].originalName,tensor:s[o]});return n}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const n=F3().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=n-F3().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=Qc(this.loss);else if(Array.isArray(this.loss)){for(const n of this.loss)if(typeof n!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(n=>Qc(n))}else{const n=Object.keys(this.loss);e={};const r=this.loss;for(const i of n)if(typeof r[i]=="string")e[i]=Qc(r[i]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[Qc(Zw(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>Qc(Zw(e)));{const e={};for(const n in this.metrics)e[n]=Qc(Zw(this.metrics[n]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const n=e$(e.optimizer_config),r=hu(n);let i;if(typeof e.loss=="string")i=mf(e.loss);else if(Array.isArray(e.loss))i=e.loss.map(o=>mf(o));else if(e.loss!=null){i={};for(const o in e.loss)i[o]=mf(e.loss[o])}let s;if(Array.isArray(e.metrics))s=e.metrics.map(o=>mf(o));else if(e.metrics!=null){s={};for(const o in e.metrics)s[o]=mf(e.metrics[o])}this.compile({loss:i,metrics:s,optimizer:r})}async save(e,n){if(typeof e=="string"){const c=rLe(e);if(c.length===0)throw new he(`Cannot find any save handlers for URL '${e}'`);if(c.length>1)throw new he(`Found more than one (${c.length}) save handlers for URL '${e}'`);e=c[0]}if(e.save==null)throw new he("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const r=await gU(this.getNamedWeights(n)),i=!1,s=null,a={modelTopology:this.toJSON(s,i),format:UUe,generatedBy:`TensorFlow.js tfjs-layers v${dre}`,convertedBy:null};if((n==null?!1:n.includeOptimizer)&&this.optimizer!=null){a.trainingConfig=this.getTrainingConfig();const c="optimizer",{data:u,specs:d}=await gU(await this.optimizer.getWeights(),c);r.specs.push(...d),r.data=nLe([r.data,u])}return this.userDefinedMetadata!=null&&(VU(this.userDefinedMetadata,this.name,!0),a.userDefinedMetadata=this.userDefinedMetadata),a.weightData=r.data,a.weightSpecs=r.specs,e.save(a)}setUserDefinedMetadata(e){VU(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}Ym.className="Model";Fe(Ym);class gre extends Ym{}gre.className="Functional";Fe(gre);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Ng extends Ym{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:R5("sequential_"),e.layers!=null)for(const n of e.layers)this.add(n)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(r=>r<0))throw new he(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const n=e instanceof Ng||e instanceof Ym;let r;if(n){if(r=e,r.outputs.length!==1)throw new he("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(r.inputs.length!==1)throw new he("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new he("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const i=W7e({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(i)}if(n)this.outputs=r.outputs,this.inputs=r.inputs;else{if(e.inboundNodes.length!==1)throw new he(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new he("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=Zne(this.outputs[0])}this.inboundNodes=[],new D5({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:yp(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(i=>i.shape),outputShapes:this.outputs[0].shape})}else{const i=e.apply(this.outputs[0]);if(Array.isArray(i))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[i],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,n){return this.model==null&&this.build(),this.model.call(e,n)}build(e){if(hn(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new Ym({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,n,r=console.log){this.built||this.build(),super.summary(e,n,r)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,n,r={}){if(!this.built)throw new Oa("The model needs to be compiled before being used.");return this.model.evaluate(e,n,r)}async evaluateDataset(e,n){if(!this.built)throw new Oa("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,n)}predict(e,n={}){return this.model==null&&this.build(),this.model.predict(e,n)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,n,r={}){if(!this.built)throw new Oa("The model needs to be compiled before being used.");return this.model.fit(e,n,r)}async fitDataset(e,n){if(!this.built)throw new Oa("The model needs to be compiled before being used.");return this.model.fitDataset(e,n)}async trainOnBatch(e,n){return this.model.trainOnBatch(e,n)}static fromConfig(e,n,r={},i=!1){let s,o={};if(n instanceof Array){if(n[0].className==null||n[0].className==="Merge")throw new he("Legacy serialization format not supported yet.");s=n}else Z(n.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),s=n.layers,delete n.layers,o=n;const a=new e(o);if(!(a instanceof Ng))throw new qt(`Sequential.fromConfig called on non-Sequential input: ${a}`);for(const l of s){const u=hu(l,void 0,i);i&&u.setFastWeightInitDuringBuild(!0),a.add(u)}return a}set stopTraining(e){if(this.model==null)throw new he("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new he("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const n of this.layers){const r={};r.className=n.getClassName(),r.config=n.getConfig(),e.push(r)}return{name:this.name,layers:e}}}Ng.className="Sequential";Fe(Ng);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function VUe(t){return new Ng(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let us=class extends h0{getConfig(){return{}}};class yre extends us{apply(e,n=1){return _7e(e,n)}}yre.className="elu";Fe(yre);class vre extends us{apply(e){return Ote(e)}}vre.className="selu";Fe(vre);class xre extends us{apply(e){return Vu(e)}}xre.className="relu";Fe(xre);class bre extends us{apply(e){return Ne(()=>Sg(6,Vu(e)))}}bre.className="relu6";Fe(bre);class wre extends us{apply(e){return e}}wre.className="linear";Fe(wre);class kre extends us{apply(e){return c0(e)}}kre.className="sigmoid";Fe(kre);class Sre extends us{apply(e){return T7e(e)}}Sre.className="hardSigmoid";Fe(Sre);class Cre extends us{apply(e){return Wx(e)}}Cre.className="softplus";Fe(Cre);class Nre extends us{apply(e){return E7e(e)}}Nre.className="softsign";Fe(Nre);class Are extends us{apply(e){return S5(e)}}Are.className="tanh";Fe(Are);let ML=class extends us{apply(e,n=-1){return BD(e,n)}};ML.className="softmax";Fe(ML);class Ire extends us{apply(e,n=-1){return Ate(e,n)}}Ire.className="logSoftmax";Fe(Ire);class _re extends us{apply(e){return Ne(()=>Ne(()=>{const n=Math.sqrt(2),r=de(.5,ze(1,kte(yt(e,n))));return de(e,r)}))}}_re.className="gelu";Fe(_re);class Ere extends us{apply(e){return Ne(()=>de(.5,de(e,ze(1,S5(de(as(yt(2,Math.PI)),ze(e,de(.044715,fp(e,3)))))))))}}Ere.className="gelu_new";Fe(Ere);class Tre extends us{apply(e){return Ne(()=>de(e,S5(Wx(e))))}}Tre.className="mish";Fe(Tre);class $re extends us{apply(e,n=1){return Ne(()=>de(c0(de(e,n)),e))}}$re.className="swish";Fe($re);function oh(t){return t.getClassName()}function E_(t,e={}){return Zx(t,Ia.getMap().classNameMap,e,"activation")}function ah(t){if(t==null){const e={};return e.className="linear",e.config={},E_(e)}if(typeof t=="string"){const e={};return e.className=t,e.config={},E_(e)}else return t instanceof us?t:E_(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function WUe(t){if(t!=null&&typeof t!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}class Pre extends h0{}class Rre extends Pre{constructor(e){super(),WUe(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return Ne(()=>{let n=Ni([1]);return this.hasL1&&(n=ze(n,lt(de(this.l1,Si(e))))),this.hasL2&&(n=ze(n,lt(de(this.l2,Qx(e))))),be(n,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,n){return new e({l1:n.l1,l2:n.l2})}}Rre.className="L1L2";Fe(Rre);const XU={l1l2:"L1L2"};function On(t){return SL(t)}function YU(t,e={}){return Zx(t,Ia.getMap().classNameMap,e,"regularizer")}function ar(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in XU?XU[t]:t,config:{}};return YU(n)}else return t instanceof Pre?t:YU(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Ore extends Zt{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,n){e=$t(e);let r=Vu(e);return this.maxValue!=null&&(r=Jo(r,0,this.maxValue)),r}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},n=super.getConfig();return Object.assign(e,n),e}}Ore.className="ReLU";Fe(Ore);class Dre extends Zt{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=$t(e);return kD(r,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}}Dre.className="LeakyReLU";Fe(Dre);class Lre extends Zt{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=sr(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=ar(e.alphaRegularizer),this.alphaConstraint=di(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new he(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=hn(e);const n=e.slice(1);if(this.sharedAxes!=null)for(const i of this.sharedAxes)n[i-1]=1;this.alpha=this.addWeight("alpha",n,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const r={};if(this.sharedAxes!=null)for(let i=1;i<e.length;++i)r[i]=e[i];this.inputSpec=[new li({ndim:e.length,axes:r})],this.built=!0}call(e,n){return e=$t(e),TD(e,this.alpha.read())}getConfig(){const e={alphaInitializer:fr(this.alphaInitializer),alphaRegularizer:On(this.alphaRegularizer),alphaConstraint:ui(this.alphaConstraint),sharedAxes:this.sharedAxes},n=super.getConfig();return Object.assign(e,n),e}}Lre.className="PReLU";Fe(Lre);let Mre=class extends Zt{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new qt(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=$t(e);return A5(r)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}};Mre.className="ELU";Fe(Mre);class Fre extends Zt{constructor(e){super(e??{}),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,n){const r=$t(e);return de(r,Ye(ra(r,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},n=super.getConfig();return Object.assign(e,n),e}}Fre.className="ThresholdedReLU";Fe(Fre);class jre extends Zt{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new ML().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,n){return Ne(()=>{let r=$t(e);const i=n.mask;if(i!=null){const s=de(nt(Uu(r.shape),Ye(i,r.dtype)),Rt(-1e9));r=ze(r,s)}return this.axis instanceof Array?this.axis.length>1?Qo(nt(r,CD(r,this.axis,!0))):this.softmax(r,this.axis[0]):this.softmax(r,this.axis)})}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}jre.className="Softmax";Fe(jre);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Zm(t,e,n){if(typeof t=="number")return yp(t,e);if(t.length!==e)throw new he(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${t.length} elements.`);for(let r=0;r<e;++r){const i=t[r];if(!C7e(i))throw new he(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(t)} including a non-integer number ${i}`)}return t}function Al(t,e,n,r,i=1){if(t==null)return t;const s=e+(e-1)*(i-1);let o;return n==="same"?o=t:o=t-s+1,Math.floor((o+r-1)/r)}function tc(t,e,n,r){if(t==null)return null;if(r==="valid")t=t*e+sh([n-e,0]);else if(r==="same")t=t*e;else throw new he(`Unsupport padding mode: ${r}.`);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function FL(t,e){return Ne(()=>(Fr(e),e==="channelsFirst"?ln(t,[0,2,3,1]):t))}function Bre(t,e){return Ne(()=>(Fr(e),e==="channelsFirst"?ln(t,[0,2,3,4,1]):t))}function GUe(t,e,n,r=1,i="valid",s,o=1){return Ne(()=>{if(s==null&&(s=$l()),Fr(s),t.shape.length!==3)throw new he(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(e.shape.length!==3)throw new he(`The kernel for a conv1dWithBias operation should be 3, but is ${e.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new he(`The bias for a conv1dWithBias operation should be 1, but is ${n.shape.length} instead`);if(s==="channelsFirst"&&(t=ln(t,[0,2,1])),i==="causal")throw new qt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let a=yte(t,e,r,i==="same"?"same":"valid","NWC",o);return n!=null&&(a=Fl(a,n)),a})}function ZU(t,e,n,r=[1,1],i="valid",s,o,a=null){return Ne(()=>{if(s==null&&(s=$l()),Fr(s),t.rank!==3&&t.rank!==4)throw new he(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(e.rank!==3&&e.rank!==4)throw new he(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let l=FL(t,s);if(i==="causal")throw new qt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=Rje({x:l,filter:e,strides:r,pad:i==="same"?"same":"valid",dilations:o,dataFormat:"NHWC",bias:n,activation:a}),s==="channelsFirst"&&(l=ln(l,[0,3,1,2])),l})}function qUe(t,e,n,r=[1,1,1],i="valid",s,o){return Ne(()=>{if(s==null&&(s=$l()),Fr(s),t.rank!==4&&t.rank!==5)throw new he(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(e.rank!==4&&e.rank!==5)throw new he(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let a=Bre(t,s);if(i==="causal")throw new qt("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return a=RMe(a,e,r,i==="same"?"same":"valid","NDHWC",o),n!=null&&(a=Fl(a,n)),s==="channelsFirst"&&(a=ln(a,[0,4,1,2,3])),a})}class F5 extends Zt{constructor(e,n){if(super(n),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",F5.verifyArgs(n),this.rank=e,Ii(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new qt(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=Zm(n.kernelSize,e,"kernelSize"),this.strides=Zm(n.strides==null?1:n.strides,e,"strides"),this.padding=n.padding==null?"valid":n.padding,ia(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,Fr(this.dataFormat),this.activation=ah(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=sr(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=di(n.biasConstraint),this.biasRegularizer=ar(n.biasRegularizer),this.activityRegularizer=ar(n.activityRegularizer),this.dilationRate=Zm(n.dilationRate==null?1:n.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new he(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new he(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new he(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(e){if(ec("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!CL(e.kernelSize,"number",1,3))throw new he(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:oh(this.activation),useBias:this.useBias,biasInitializer:fr(this.biasInitializer),biasRegularizer:On(this.biasRegularizer),activityRegularizer:On(this.activityRegularizer),biasConstraint:ui(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}class f0 extends F5{constructor(e,n){super(e,n),this.kernel=null,f0.verifyArgs(n),this.filters=n.filters,Ii(this.filters,"filters"),this.kernelInitializer=sr(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=di(n.kernelConstraint),this.kernelRegularizer=ar(n.kernelRegularizer)}build(e){e=hn(e);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new he(`The channel dimension of the input should be defined. Found ${e[n]}`);const r=e[n],i=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:r}}],this.built=!0}call(e,n){return Ne(()=>{e=$t(e);let r;const i=this.bias==null?null:this.bias.read(),s=Lne(this.activation.getClassName());if(s!=null&&this.rank===2)r=ZU(e,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate,s);else{if(this.rank===1)r=GUe(e,this.kernel.read(),i,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)r=ZU(e,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)r=qUe(e,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new qt("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(r=this.activation.apply(r))}return r})}computeOutputShape(e){e=hn(e);const n=[],r=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let s=0;s<r.length;++s){const o=Al(r[s],this.kernelSize[s],this.padding,this.strides[s],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[s]);n.push(o)}let i=[e[0]];return this.dataFormat==="channelsLast"?(i=i.concat(n),i.push(this.filters)):(i.push(this.filters),i=i.concat(n)),i}getConfig(){const e={filters:this.filters,kernelInitializer:fr(this.kernelInitializer),kernelRegularizer:On(this.kernelRegularizer),kernelConstraint:ui(this.kernelConstraint)},n=super.getConfig();return Object.assign(e,n),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new he(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class rb extends f0{constructor(e){super(2,e),rb.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!CL(e.kernelSize,"number",1,2))throw new he(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}rb.className="Conv2D";Fe(rb);class ib extends f0{constructor(e){super(3,e),ib.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new he(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}ib.className="Conv3D";Fe(ib);class zre extends rb{constructor(e){if(super(e),this.inputSpec=[new li({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new he(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=hn(e),e.length!==4)throw new he("Input should have rank 4; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new he("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],i=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",i,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new li({ndim:4,axes:{[n]:r}})],this.built=!0}call(e,n){return Ne(()=>{let r=$t(e);if(r.shape.length!==4)throw new he(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const i=r.shape,s=i[0];let o,a;this.dataFormat==="channelsFirst"?(o=2,a=3):(o=1,a=2);const l=i[o],c=i[a],u=this.kernelSize[0],d=this.kernelSize[1],h=this.strides[0],f=this.strides[1],p=tc(l,h,u,this.padding),m=tc(c,f,d,this.padding),y=[s,p,m,this.filters];this.dataFormat!=="channelsLast"&&(r=ln(r,[0,2,3,1]));let g=vte(r,this.kernel.read(),y,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(g=ln(g,[0,3,1,2])),this.bias!=null&&(g=Fl(g,this.bias.read(),this.dataFormat)),this.activation!=null&&(g=this.activation.apply(g)),g})}computeOutputShape(e){e=hn(e);const n=e.slice();let r,i,s;this.dataFormat==="channelsFirst"?(r=1,i=2,s=3):(r=3,i=1,s=2);const o=this.kernelSize[0],a=this.kernelSize[1],l=this.strides[0],c=this.strides[1];return n[r]=this.filters,n[i]=tc(n[i],l,o,this.padding),n[s]=tc(n[s],c,a,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}zre.className="Conv2DTranspose";Fe(zre);class Ure extends ib{constructor(e){if(super(e),this.inputSpec=[new li({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new he(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=hn(e),e.length!==5)throw new he("Input should have rank 5; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new he("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],i=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",i,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new li({ndim:5,axes:{[n]:r}})],this.built=!0}call(e,n){return Ne(()=>{let r=$t(e);if(r.shape.length!==5)throw new he(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const i=r.shape,s=i[0];let o,a,l;this.dataFormat==="channelsFirst"?(l=2,o=3,a=4):(l=1,o=2,a=3);const c=i[l],u=i[o],d=i[a],h=this.kernelSize[0],f=this.kernelSize[1],p=this.kernelSize[2],m=this.strides[0],y=this.strides[1],g=this.strides[2],v=tc(c,m,h,this.padding),x=tc(u,y,f,this.padding),b=tc(d,g,p,this.padding),S=[s,v,x,b,this.filters];this.dataFormat!=="channelsLast"&&(r=ln(r,[0,2,3,4,1]));let A=LMe(r,this.kernel.read(),S,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(A=ln(A,[0,4,1,2,3])),this.bias!==null&&(A=Fl(A,this.bias.read(),this.dataFormat)),this.activation!==null&&(A=this.activation.apply(A)),A})}computeOutputShape(e){e=hn(e);const n=e.slice();let r,i,s,o;this.dataFormat==="channelsFirst"?(r=1,i=2,s=3,o=4):(r=4,i=1,s=2,o=3);const a=this.kernelSize[0],l=this.kernelSize[1],c=this.kernelSize[2],u=this.strides[0],d=this.strides[1],h=this.strides[2];return n[r]=this.filters,n[i]=tc(n[i],u,a,this.padding),n[s]=tc(n[s],d,l,this.padding),n[o]=tc(n[o],h,c,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}Ure.className="Conv3DTranspose";Fe(Ure);class Vre extends f0{constructor(e,n){if(super(e,n),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,n.filters==null)throw new he("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(n.kernelInitializer!=null||n.kernelRegularizer!=null||n.kernelConstraint!=null)throw new he("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(n.padding!=null&&n.padding!=="same"&&n.padding!=="valid")throw new he(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(n.padding)}`);this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=sr(n.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=ar(n.depthwiseRegularizer),this.depthwiseConstraint=di(n.depthwiseConstraint),this.pointwiseInitializer=sr(n.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=ar(n.pointwiseRegularizer),this.pointwiseConstraint=di(n.pointwiseConstraint)}build(e){if(e=hn(e),e.length<this.rank+2)throw new he(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null||e[n]<0)throw new he(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[n])}`);const r=e[n],i=this.kernelSize.concat([r,this.depthMultiplier]),s=[];for(let a=0;a<this.rank;++a)s.push(1);s.push(r*this.depthMultiplier,this.filters);const o=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",i,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,o,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",s,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,o,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,o,this.biasConstraint):this.bias=null,this.inputSpec=[new li({ndim:this.rank+2,axes:{[n]:r}})],this.built=!0}call(e,n){return Ne(()=>{e=$t(e);let r;if(this.rank===1)throw new qt("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=ln(e,[0,2,3,1])),r=Dte(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(r=Fl(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),this.dataFormat==="channelsFirst"&&(r=ln(r,[0,3,1,2])),r})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=fr(this.depthwiseInitializer),e.pointwiseInitializer=fr(this.pointwiseInitializer),e.depthwiseRegularizer=On(this.depthwiseRegularizer),e.pointwiseRegularizer=On(this.pointwiseRegularizer),e.depthwiseConstraint=ui(this.depthwiseConstraint),e.pointwiseConstraint=ui(this.pointwiseConstraint),e}}Vre.className="SeparableConv";class Wre extends Vre{constructor(e){super(2,e)}}Wre.className="SeparableConv2D";Fe(Wre);class j5 extends f0{constructor(e){super(1,e),j5.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!CL(e.kernelSize,"number",1,1))throw new he(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}j5.className="Conv1D";Fe(j5);class Gre extends Zt{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,n){return Ne(()=>{if(e=$t(e),this.dataFormat==="channelsLast"){const r=Yw(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return Yw(r,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const r=Yw(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return Yw(r,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}Gre.className="Cropping2D";Fe(Gre);class qre extends Zt{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Fr(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,w7e(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){const n=e[2]==null?null:this.size[0]*e[2],r=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],n,r]}else{const n=e[1]==null?null:this.size[0]*e[1],r=e[2]==null?null:this.size[1]*e[2];return[e[0],n,r,e[3]]}}call(e,n){return Ne(()=>{let r=$t(e);const i=r.shape;if(this.dataFormat==="channelsFirst"){r=ln(r,[0,2,3,1]);const s=this.size[0]*i[2],o=this.size[1]*i[3],a=this.interpolation==="nearest"?au.resizeNearestNeighbor(r,[s,o]):au.resizeBilinear(r,[s,o]);return ln(a,[0,3,1,2])}else{const s=this.size[0]*i[1],o=this.size[1]*i[2];return this.interpolation==="nearest"?au.resizeNearestNeighbor(r,[s,o]):au.resizeBilinear(r,[s,o])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}}qre.className="UpSampling2D";Fe(qre);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function HUe(t,e,n=[1,1],r="valid",i,s){return Ne(()=>{i==null&&(i=$l()),Fr(i);let o=FL(t,i);if(t.rank!==4)throw new he(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(e.rank!==4)throw new he(`depthwiseKernel is required to be 4-D, but is instead ${e.rank}-D`);return o=vD(o,e,n,r==="same"?"same":"valid","NHWC",s),i==="channelsFirst"&&(o=ln(o,[0,3,1,2])),o})}class Hre extends F5{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=sr(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=di(e.depthwiseConstraint),this.depthwiseRegularizer=ar(e.depthwiseRegularizer)}build(e){if(e=hn(e),e.length<4)throw new he(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const n=this.dataFormat==="channelsFirst"?1:3;if(e[n]==null||e[n]<0)throw new he(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[n]}).`);const r=e[n],i=[this.kernelSize[0],this.kernelSize[1],r,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",i,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[r*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return Ne(()=>{e=$t(e);let r=HUe(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(r=Fl(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),r})}computeOutputShape(e){e=hn(e);const n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],i=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,s=Al(n,this.kernelSize[0],this.padding,this.strides[0]),o=Al(r,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],i,s,o]:[e[0],s,o,i]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=fr(this.depthwiseInitializer),e.depthwiseRegularizer=On(this.depthwiseRegularizer),e.depthwiseConstraint=ui(this.depthwiseRegularizer),e}}Hre.className="DepthwiseConv2D";Fe(Hre);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Kre(t,e,n,r){if(Array.isArray(t)){if(e!=null||n!=null)throw new he("When inputs is an array, neither initialState or constants should be provided");r!=null&&(n=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function i(s){return s==null||Array.isArray(s)?s:[s]}return e=i(e),n=i(n),{inputs:t,initialState:e,constants:n}}function Xre(t,e,n,r=!1,i,s,o=!1,a=!1){return Ne(()=>{const l=e.shape.length;if(l<3)throw new he(`Input should be at least 3D, but is ${l}D.`);const c=[1,0].concat(Tl(2,l));if(e=ln(e,c),s!=null)throw new qt("The rnn() functoin of the deeplearn.js backend does not support constants yet.");o&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),i!=null&&(i=Ye(Ye(i,"bool"),"float32"),i.rank===l-1&&(i=Us(i,-1)),i=ln(i,c)),r&&(e=mp(e,0),i!=null&&(i=mp(i,0)));const u=[];let d,h=n;const f=e.shape[0],p=gp(e);let m;i!=null&&(m=gp(i));for(let g=0;g<f;++g){const v=p[g],x=Ne(()=>t(v,h));if(i==null)d=x[0],h=x[1];else{const b=Ne(()=>{const S=m[g],A=nt(qa(S),S),E=ze(de(x[0],S),de(h[0],A)),I=h.map((T,O)=>ze(de(x[1][O],S),de(T,A)));return{output:E,newStates:I}});d=b.output,h=b.newStates}a&&u.push(d)}let y;return a&&(y=Iu(u,1)),[d,y,h]})}class Ah extends Zt{constructor(e){super(e);let n;if(e.cell==null)throw new he("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?n=new zL({cells:e.cell}):n=e.cell,n.stateSize==null)throw new he("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=n,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new li({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return Tl(0,e).map(n=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){Z3(e)&&(e=e[0]),e=e;let n=this.cell.stateSize;Array.isArray(n)||(n=[n]);const r=n[0];let i;if(this.returnSequences?i=[e[0],e[1],r]:i=[e[0],r],this.returnState){const s=[];for(const o of n)s.push([e[0],o]);return[i].concat(s)}else return i}computeMask(e,n){return Ne(()=>{Array.isArray(n)&&(n=n[0]);const r=this.returnSequences?n:null;if(this.returnState){const i=this.states.map(s=>null);return[r].concat(i)}else return r})}get states(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,n=[];for(let r=0;r<e;++r)n.push(null);return n}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new qt("Constants support is not implemented in RNN yet.");Z3(e)&&(e=e[0]),e=e;const n=this.stateful?e[0]:null,r=e.slice(2);this.inputSpec[0]=new li({shape:[n,null,...r]});const i=[e[0]].concat(e.slice(2));this.cell.build(i);let s;if(Array.isArray(this.cell.stateSize)?s=this.cell.stateSize:s=[this.cell.stateSize],this.stateSpec!=null){if(!xn(this.stateSpec.map(o=>o.shape[o.shape.length-1]),s))throw new he(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=s.map(o=>new li({shape:[null,o]}));this.stateful&&this.resetStates()}resetStates(e,n=!1){Ne(()=>{if(!this.stateful)throw new Ql("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape[0];if(r==null)throw new he("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(i=>Ni([r,i])):this.states_=[Ni([r,this.cell.stateSize])];else if(e==null)Qt(this.states_),this.keptStates!=null&&(Qt(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(i=>Ni([r,i])):this.states_[0]=Ni([r,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new he(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n===!0?this.keptStates.push(this.states_.slice()):Qt(this.states_);for(let i=0;i<this.states_.length;++i){const s=e[i],o=Array.isArray(this.cell.stateSize)?this.cell.stateSize[i]:this.cell.stateSize,a=[r,o];if(!xn(s.shape,a))throw new he(`State ${i} is incompatible with layer ${this.name}: expected shape=${a}, received shape=${s.shape}`);this.states_[i]=s}}this.states_=this.states_.map(i=>yc(i.clone()))})}apply(e,n){let r=n==null?null:n.initialState,i=n==null?null:n.constants;n==null&&(n={});const s=Kre(e,r,i,this.numConstants);e=s.inputs,r=s.initialState,i=s.constants;let o=[],a=[];if(r!=null){n.initialState=r,o=o.concat(r),this.stateSpec=[];for(const c of r)this.stateSpec.push(new li({shape:c.shape}));a=a.concat(this.stateSpec)}if(i!=null&&(n.constants=i,o=o.concat(i),this.numConstants=i.length),o[0]instanceof Nc){const c=[e].concat(o),u=this.inputSpec.concat(a),d=this.inputSpec;this.inputSpec=u;const h=super.apply(c,n);return this.inputSpec=d,h}else return super.apply(e,n)}call(e,n){return Ne(()=>{const r=n==null?null:n.mask,i=n==null?null:n.training;let s=n==null?null:n.initialState;e=$t(e),s==null&&(this.stateful?s=this.states_:s=this.getInitialState(e));const o=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(s.length!==o)throw new he(`RNN Layer has ${o} state(s) but was passed ${s.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const a={training:i},c=Xre((p,m)=>{const y=this.cell.call([p].concat(m),a);return[y[0],y.slice(1)]},e,s,this.goBackwards,r,null,this.unroll,this.returnSequences),u=c[0],d=c[1],h=c[2];this.stateful&&this.resetStates(h,i);const f=this.returnSequences?d:u;return this.returnState?[f].concat(h):f})}getInitialState(e){return Ne(()=>{let n=Ni(e.shape);return n=lt(n,[1,2]),n=Jx(n),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(r=>r>1?X3(n,[1,r]):n):this.cell.stateSize>1?[X3(n,[1,this.cell.stateSize])]:[n]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),n={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(n.numConstants=this.numConstants);const r=this.cell.getConfig();return this.getClassName()===Ah.className&&(n.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),e),n)}static fromConfig(e,n,r={}){const i=n.cell,s=hu(i,r);return new e(Object.assign(n,{cell:s}))}}Ah.className="RNN";Fe(Ah);class B5 extends Zt{}class jL extends B5{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Ii(this.units,"units"),this.activation=ah(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=sr(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=sr(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=sr(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=ar(e.kernelRegularizer),this.recurrentRegularizer=ar(e.recurrentRegularizer),this.biasRegularizer=ar(e.biasRegularizer),this.kernelConstraint=di(e.kernelConstraint),this.recurrentConstraint=di(e.recurrentConstraint),this.biasConstraint=di(e.biasConstraint),this.dropout=Cg([1,sh([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Cg([1,sh([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=hn(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return Ne(()=>{if(e=e,e.length!==2)throw new he(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let r=e[1];e=e[0];const i=n.training==null?!1:n.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=lh({ones:()=>qa(e),rate:this.dropout,training:i,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=lh({ones:()=>qa(r),rate:this.recurrentDropout,training:i,dropoutFunc:this.dropoutFunc}));let s;const o=this.dropoutMask,a=this.recurrentDropoutMask;o!=null?s=bc(de(e,o),this.kernel.read()):s=bc(e,this.kernel.read()),this.bias!=null&&(s=Fl(s,this.bias.read())),a!=null&&(r=de(r,a));let l=ze(s,bc(r,this.recurrentKernel.read()));return this.activation!=null&&(l=this.activation.apply(l)),[l,l]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:oh(this.activation),useBias:this.useBias,kernelInitializer:fr(this.kernelInitializer),recurrentInitializer:fr(this.recurrentInitializer),biasInitializer:fr(this.biasInitializer),kernelRegularizer:On(this.kernelRegularizer),recurrentRegularizer:On(this.recurrentRegularizer),biasRegularizer:On(this.biasRegularizer),activityRegularizer:On(this.activityRegularizer),kernelConstraint:ui(this.kernelConstraint),recurrentConstraint:ui(this.recurrentConstraint),biasConstraint:ui(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),n)}}jL.className="SimpleRNNCell";Fe(jL);class Yre extends Ah{constructor(e){e.cell=new jL(e),super(e)}call(e,n){return Ne(()=>{this.cell.dropoutMask!=null&&(Qt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Qt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,i=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(e,{mask:r,training:i,initialState:s})})}static fromConfig(e,n){return new e(n)}}Yre.className="SimpleRNN";Fe(Yre);class BL extends B5{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new he("GRUCell does not support reset_after parameter set to true.");this.units=e.units,Ii(this.units,"units"),this.activation=ah(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=ah(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=sr(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=sr(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=sr(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=ar(e.kernelRegularizer),this.recurrentRegularizer=ar(e.recurrentRegularizer),this.biasRegularizer=ar(e.biasRegularizer),this.kernelConstraint=di(e.kernelConstraint),this.recurrentConstraint=di(e.recurrentConstraint),this.biasConstraint=di(e.biasConstraint),this.dropout=Cg([1,sh([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Cg([1,sh([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=hn(e);const n=e[e.length-1];this.kernel=this.addWeight("kernel",[n,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return Ne(()=>{if(e=e,e.length!==2)throw new he(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training==null?!1:n.training;let i=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=lh({ones:()=>qa(e),rate:this.dropout,training:r,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=lh({ones:()=>qa(i),rate:this.recurrentDropout,training:r,count:3,dropoutFunc:this.dropoutFunc}));const s=this.dropoutMask,o=this.recurrentDropoutMask;let a,l,c;0<this.dropout&&this.dropout<1&&(e=de(e,s[0]));let u=bc(e,this.kernel.read());this.useBias&&(u=Fl(u,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(i=de(i,o[0]));const d=this.recurrentKernel.read(),[h,f]=Ko(d,[2*this.units,this.units],d.rank-1),p=bc(i,h),[m,y,g]=Ko(u,3,u.rank-1),[v,x]=Ko(p,2,p.rank-1);a=this.recurrentActivation.apply(ze(m,v)),l=this.recurrentActivation.apply(ze(y,x));const b=bc(de(l,i),f);c=this.activation.apply(ze(g,b));const S=ze(de(a,i),de(ze(1,or(a)),c));return[S,S]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:oh(this.activation),recurrentActivation:oh(this.recurrentActivation),useBias:this.useBias,kernelInitializer:fr(this.kernelInitializer),recurrentInitializer:fr(this.recurrentInitializer),biasInitializer:fr(this.biasInitializer),kernelRegularizer:On(this.kernelRegularizer),recurrentRegularizer:On(this.recurrentRegularizer),biasRegularizer:On(this.biasRegularizer),activityRegularizer:On(this.activityRegularizer),kernelConstraint:ui(this.kernelConstraint),recurrentConstraint:ui(this.recurrentConstraint),biasConstraint:ui(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),n)}}BL.className="GRUCell";Fe(BL);class Zre extends Ah{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new BL(e),super(e)}call(e,n){return Ne(()=>{this.cell.dropoutMask!=null&&(Qt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Qt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,i=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(e,{mask:r,training:i,initialState:s})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}Zre.className="GRU";Fe(Zre);class z5 extends B5{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Ii(this.units,"units"),this.activation=ah(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=ah(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=sr(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=sr(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=sr(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=ar(e.kernelRegularizer),this.recurrentRegularizer=ar(e.recurrentRegularizer),this.biasRegularizer=ar(e.biasRegularizer),this.kernelConstraint=di(e.kernelConstraint),this.recurrentConstraint=di(e.recurrentConstraint),this.biasConstraint=di(e.biasConstraint),this.dropout=Cg([1,sh([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Cg([1,sh([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var n;e=hn(e);const r=e[e.length-1];this.kernel=this.addWeight("kernel",[r,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let i;if(this.useBias){if(this.unitForgetBias){const s=this.biasInitializer,o=this.units;i=new(n=class extends Za{apply(l,c){const u=s.apply([o]),d=new AL().apply([o]),h=s.apply([o*2]);return OU(OU(u,d),h)}},n.className="CustomInit",n)}else i=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,i,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,n){return Ne(()=>{const r=n.training==null?!1:n.training;if(e=e,e.length!==3)throw new he(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let i=e[1];const s=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=lh({ones:()=>qa(e),rate:this.dropout,training:r,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=lh({ones:()=>qa(i),rate:this.recurrentDropout,training:r,count:4,dropoutFunc:this.dropoutFunc}));const o=this.dropoutMask,a=this.recurrentDropoutMask;let l,c,u,d;0<this.dropout&&this.dropout<1&&(e=de(e,o[0]));let h=bc(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(i=de(i,a[0])),h=ze(h,bc(i,this.recurrentKernel.read())),this.useBias&&(h=Fl(h,this.bias.read()));const[f,p,m,y]=Ko(h,4,h.rank-1);l=this.recurrentActivation.apply(f),c=this.recurrentActivation.apply(p),u=ze(de(c,s),de(l,this.activation.apply(m))),d=this.recurrentActivation.apply(y);const g=de(d,this.activation.apply(u));return[g,g,u]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:oh(this.activation),recurrentActivation:oh(this.recurrentActivation),useBias:this.useBias,kernelInitializer:fr(this.kernelInitializer),recurrentInitializer:fr(this.recurrentInitializer),biasInitializer:fr(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:On(this.kernelRegularizer),recurrentRegularizer:On(this.recurrentRegularizer),biasRegularizer:On(this.biasRegularizer),activityRegularizer:On(this.activityRegularizer),kernelConstraint:ui(this.kernelConstraint),recurrentConstraint:ui(this.recurrentConstraint),biasConstraint:ui(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),n)}}z5.className="LSTMCell";Fe(z5);class Jre extends Ah{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new z5(e),super(e)}call(e,n){return Ne(()=>{this.cell.dropoutMask!=null&&(Qt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Qt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,i=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(e,{mask:r,training:i,initialState:s})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}Jre.className="LSTM";Fe(Jre);class zL extends B5{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const n of this.cells.slice().reverse())Array.isArray(n.stateSize)?e.push(...n.stateSize):e.push(n.stateSize);return e}call(e,n){return Ne(()=>{e=e;let r=e.slice(1);const i=[];for(const a of this.cells.slice().reverse())Array.isArray(a.stateSize)?i.push(r.splice(0,a.stateSize.length)):i.push(r.splice(0,1));i.reverse();const s=[];let o;for(let a=0;a<this.cells.length;++a){const l=this.cells[a];r=i[a],a===0?o=[e[0]].concat(r):o=[o[0]].concat(r),o=l.call(o,n),s.push(o.slice(1))}r=[];for(const a of s.slice().reverse())r.push(...a);return[o[0]].concat(r)})}build(e){Z3(e)&&(e=e[0]),e=e;let n;this.cells.forEach((r,i)=>{zf(`RNNCell_${i}`,()=>{r.build(e),Array.isArray(r.stateSize)?n=r.stateSize[0]:n=r.stateSize,e=[e[0],n]})}),this.built=!0}getConfig(){const e=super.getConfig(),n=s=>({className:s.getClassName(),config:s.getConfig()}),i={cells:this.cells.map(n)};return Object.assign(Object.assign({},e),i)}static fromConfig(e,n,r={}){const i=[];for(const s of n.cells)i.push(hu(s,r));return new e({cells:i})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const n of this.cells)e.push(...n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.cells)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.cells)n.push(...r.trainableWeights);return n.concat(e)}return e}getWeights(){const e=[];for(const n of this.cells)e.push(...n.weights);return J3(e)}setWeights(e){const n=[];for(const r of this.cells){const i=r.weights.length,s=e.splice(i);for(let o=0;o<r.weights.length;++o)n.push([r.weights[o],s[o]])}RL(n)}}zL.className="StackedRNNCells";Fe(zL);function lh(t){const{ones:e,rate:n,training:r=!1,count:i=1,dropoutFunc:s}=t,o=()=>s!=null?s(e(),n):Vne(e(),n),a=()=>eb(o,e,r);return!i||i<=1?yc(a().clone()):Array(i).fill(void 0).map(a).map(c=>yc(c.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var KUe=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class Qre extends Ah{constructor(e){if(e.unroll)throw new qt("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new qt("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new li({ndim:5})]}call(e,n){return Ne(()=>{if(this.cell.dropoutMask!=null&&(Qt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Qt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),n&&n.constants)throw new he("ConvRNN2D cell does not support constants");const r=n==null?null:n.mask,i=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(e,{mask:r,training:i,initialState:s})})}computeOutputShape(e){let n=this.computeSingleOutputShape(e);return this.returnSequences||(n=[n[0],...n.slice(2)]),this.returnState&&(n=[n,...Array(2).fill([e[0],...n.slice(-3)])]),n}getInitialState(e){return Ne(()=>{const{stateSize:n}=this.cell,r=e.shape,i=this.computeSingleOutputShape(r),s=[i[0],...i.slice(2)],o=Ni(s);return Array.isArray(n)?Array(n.length).fill(o):[o]})}resetStates(e,n=!1){Ne(()=>{if(!this.stateful)throw new Ql("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape,i=this.computeSingleOutputShape(r),s=[i[0],...i.slice(2)];if(r[0]==null)throw new he("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Ni(s)):this.states_=[Ni(s)];else if(e==null)Qt(this.states_),this.keptStates!=null&&(Qt(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Ni(s)):this.states_[0]=Ni(s);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new he(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n?this.keptStates.push(this.states_.slice()):Qt(this.states_);for(let a=0;a<this.states_.length;++a){const l=e[a],c=s;if(!xn(l.shape,c))throw new he(`State ${a} is incompatible with layer ${this.name}: expected shape=${c}, received shape=${l.shape}`);this.states_[a]=l}}this.states_=this.states_.map(a=>yc(a.clone()))})}computeSingleOutputShape(e){const{dataFormat:n,filters:r,kernelSize:i,padding:s,strides:o,dilationRate:a}=this.cell,l=n==="channelsFirst",c=e[l?3:2],u=e[l?4:3],d=Al(c,i[0],s,o[0],a[0]),h=Al(u,i[1],s,o[1],a[1]);return[...e.slice(0,2),...l?[r,d,h]:[d,h,r]]}}Qre.className="ConvRNN2D";class UL extends z5{constructor(e){const{filters:n,kernelSize:r,strides:i,padding:s,dataFormat:o,dilationRate:a}=e;super(Object.assign(Object.assign({},e),{units:n})),this.filters=n,Ii(this.filters,"filters"),this.kernelSize=Zm(r,2,"kernelSize"),this.kernelSize.forEach(l=>Ii(l,"kernelSize")),this.strides=Zm(i||1,2,"strides"),this.strides.forEach(l=>Ii(l,"strides")),this.padding=s||"valid",ia(this.padding),this.dataFormat=o||"channelsLast",Fr(this.dataFormat),this.dilationRate=Zm(a||1,2,"dilationRate"),this.dilationRate.forEach(l=>Ii(l,"dilationRate"))}build(e){var n;e=hn(e);const r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new he(`The channel dimension of the input should be defined. Found ${e[r]}`);const i=e[r],s=4,o=this.kernelSize.concat([i,this.filters*s]);this.kernel=this.addWeight("kernel",o,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const a=this.kernelSize.concat([this.filters,this.filters*s]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",a,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let l;if(this.unitForgetBias){const c=this.biasInitializer,u=this.filters;l=new(n=class extends Za{apply(h,f){const p=c.apply([u]),m=Uu([u]),y=c.apply([u*2]);return NL([p,m,y])}},n.className="CustomInit",n)}else l=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*s],null,l,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,n){return Ne(()=>{if(e.length!==3)throw new he(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training||!1,i=e[0],s=e[1],o=e[2],a=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=lh({ones:()=>qa(i),rate:this.dropout,training:r,count:a,dropoutFunc:this.dropoutFunc}));const l=this.dropoutMask,c=(ae,le,M)=>!le||!le[M]?ae:de(le[M],ae);let u=c(i,l,0),d=c(i,l,1),h=c(i,l,2),f=c(i,l,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=lh({ones:()=>qa(s),rate:this.recurrentDropout,training:r,count:a,dropoutFunc:this.dropoutFunc}));const p=this.recurrentDropoutMask;let m=c(s,p,0),y=c(s,p,1),g=c(s,p,2),v=c(s,p,3);const x=3,[b,S,A,E]=Ko(this.kernel.read(),a,x),[I,T,O,$]=this.useBias?Ko(this.bias.read(),a):[null,null,null,null];u=this.inputConv(u,b,I,this.padding),d=this.inputConv(d,S,T,this.padding),h=this.inputConv(h,A,O,this.padding),f=this.inputConv(f,E,$,this.padding);const[R,F,L,U]=Ko(this.recurrentKernel.read(),a,x);m=this.recurrentConv(m,R),y=this.recurrentConv(y,F),g=this.recurrentConv(g,L),v=this.recurrentConv(v,U);const q=this.recurrentActivation.apply(ze(u,m)),K=this.recurrentActivation.apply(ze(d,y)),j=ze(de(K,o),de(q,this.activation.apply(ze(h,g)))),Y=de(this.recurrentActivation.apply(ze(f,v)),this.activation.apply(j));return[Y,Y,j]})}getConfig(){const e=super.getConfig(),n=KUe(e,["units"]),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},n),r)}inputConv(e,n,r,i){const s=hp(e,n,this.strides,i||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return r?Fl(s,r,this.dataFormat):s}recurrentConv(e,n){return hp(e,n,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}UL.className="ConvLSTM2DCell";Fe(UL);class eie extends Qre{constructor(e){const n=new UL(e);super(Object.assign(Object.assign({},e),{cell:n}))}static fromConfig(e,n){return new e(n)}}eie.className="ConvLSTM2D";Fe(eie);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class VL extends Zt{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;const n=e.shape,r=[];for(let i=0;i<this.noiseShape.length;++i)r.push(this.noiseShape[i]==null?n[i]:this.noiseShape[i]);return r}call(e,n){return Ne(()=>{this.invokeCallHook(e,n);const r=$t(e);if(0<this.rate&&this.rate<1){const i=n.training==null?!1:n.training,s=this.getNoiseShape(r);return eb(()=>Vne(r,this.rate,s,this.seed),()=>r,i)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=super.getConfig();return Object.assign(e,n),e}dispose(){return super.dispose()}}VL.className="Dropout";Fe(VL);class tie extends VL{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const n=e.shape;return[n[0],1,n[2]]}}tie.className="SpatialDropout1D";Fe(tie);class WL extends Zt{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let n=null;e.batchSize!=null&&(n=e.batchSize),this.batchInputShape=[n,e.inputDim]}this.units=e.units,Ii(this.units,"units"),this.activation=ah(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=sr(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=sr(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=di(e.kernelConstraint),this.biasConstraint=di(e.biasConstraint),this.kernelRegularizer=ar(e.kernelRegularizer),this.biasRegularizer=ar(e.biasRegularizer),this.activityRegularizer=ar(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=hn(e);const n=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:n}}],this.built=!0}computeOutputShape(e){e=hn(e);const n=e.slice();return n[n.length-1]=this.units,n}call(e,n){return Ne(()=>{this.invokeCallHook(e,n);const r=$t(e),i=Lne(this.activation.getClassName());let s;return i!=null?s=bc(r,this.kernel.read(),i,this.bias?this.bias.read():null):(s=bc(r,this.kernel.read()),this.bias!=null&&(s=Fl(s,this.bias.read())),this.activation!=null&&(s=this.activation.apply(s))),s})}getConfig(){const e={units:this.units,activation:oh(this.activation),useBias:this.useBias,kernelInitializer:fr(this.kernelInitializer),biasInitializer:fr(this.biasInitializer),kernelRegularizer:On(this.kernelRegularizer),biasRegularizer:On(this.biasRegularizer),activityRegularizer:On(this.activityRegularizer),kernelConstraint:ui(this.kernelConstraint),biasConstraint:ui(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}WL.className="Dense";Fe(WL);class nie extends Zt{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=hn(e);for(const n of e.slice(1))if(n==null)throw new he(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],Hd(e,1)]}call(e,n){return Ne(()=>{this.invokeCallHook(e,n);let r=$t(e);if(this.dataFormat==="channelsFirst"&&r.rank>1){const i=[0];for(let s=2;s<r.rank;++s)i.push(s);i.push(1),r=ln(r,i)}return I7e(r)})}getConfig(){const e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);const n=super.getConfig();return Object.assign(e,n),e}}nie.className="Flatten";Fe(nie);class rie extends Zt{constructor(e){super(e),this.supportsMasking=!0,this.activation=ah(e.activation)}call(e,n){return Ne(()=>{this.invokeCallHook(e,n);const r=$t(e);return this.activation.apply(r)})}getConfig(){const e={activation:oh(this.activation)},n=super.getConfig();return Object.assign(e,n),e}}rie.className="Activation";Fe(rie);class iie extends Zt{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,n){return Ne(()=>(e=$t(e),N7e(e,this.n)))}getConfig(){const e={n:this.n},n=super.getConfig();return Object.assign(e,n),e}}iie.className="RepeatVector";Fe(iie);class sie extends Zt{constructor(e){super(e),this.targetShape=e.targetShape;for(let n=0;n<this.targetShape.length;++n)this.isUnknown(this.targetShape[n])&&(this.targetShape[n]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,n){const r="Total size of new array must be unchanged.",i=n.slice();let s=1,o=null;for(let l=0;l<i.length;++l){const c=i[l];if(this.isUnknown(c))if(o===null)o=l;else throw new he("Can only specifiy one unknown dimension.");else s*=c}const a=Hd(e);if(o!==null){if(s===0||a%s!==0)throw new he(r);i[o]=a/s}else if(a!==s)throw new he(r);return i}computeOutputShape(e){let n=!1;for(let r=0;r<e.length;++r)if(this.isUnknown(e[r])){n=!0;break}return n?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,n){return Ne(()=>{this.invokeCallHook(e,n);const r=$t(e),i=r.shape,s=i.slice(0,1).concat(this.fixUnknownDimension(i.slice(1),this.targetShape));return be(r,s)})}getConfig(){const e={targetShape:this.targetShape},n=super.getConfig();return Object.assign(e,n),e}}sie.className="Reshape";Fe(sie);class oie extends Zt{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const n=Tl(1,e.dims.length+1);if(!xn(e.dims.slice().sort(),n))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new li({ndim:this.dims.length+1})]}computeOutputShape(e){e=hn(e);const n=e.slice();return this.dims.forEach((r,i)=>{n[i+1]=e[r]}),n}call(e,n){return ln($t(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},n=super.getConfig();return Object.assign(e,n),e}}oie.className="Permute";Fe(oie);class aie extends Zt{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={maskValue:this.maskValue};return Object.assign(n,e),n}computeMask(e,n){const r=$t(e),i=-1;return U3(nv(r,this.maskValue),i)}call(e,n){return Ne(()=>{this.invokeCallHook(e,n);const r=$t(e),i=-1,s=!0,o=U3(nv(r,this.maskValue),i,s);return de(r,Ye(o,r.dtype))})}}aie.className="Masking";Fe(aie);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class lie extends Zt{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let n=null;e.batchSize!=null&&(n=e.batchSize),e.inputLength==null?this.batchInputShape=[n,null]:this.batchInputShape=[n].concat(Cn(e.inputLength))}this.inputDim=e.inputDim,Ii(this.inputDim,"inputDim"),this.outputDim=e.outputDim,Ii(this.outputDim,"outputDim"),this.embeddingsInitializer=sr(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=ar(e.embeddingsRegularizer),this.activityRegularizer=ar(e.activityRegularizer),this.embeddingsConstraint=di(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,n){return Ne(()=>this.maskZero?(e=$t(e),nv(e,cn(e))):null)}computeOutputShape(e){if(e=hn(e),this.inputLength==null)return[...e,this.outputDim];const n=Cn(this.inputLength);if(n.length!==e.length-1)throw new he(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let r=0;for(let i=0;i<n.length;++i){const s=n[i],o=e[i+1];if(s!=null&&o!=null&&s!==o)throw new he(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);s==null&&(n[r]=o),r++}}return[e[0],...n,this.outputDim]}call(e,n){return Ne(()=>{this.invokeCallHook(e,n);let r=$t(e);r.dtype!=="int32"&&(r=xc(r,"int32"));const i=Une(this.embeddings.read(),be(r,[r.size]));return be(i,hn(this.computeOutputShape(r.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:fr(this.embeddingsInitializer),embeddingsRegularizer:On(this.embeddingsRegularizer),activityRegularizer:On(this.activityRegularizer),embeddingsConstraint:ui(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=super.getConfig();return Object.assign(e,n),e}}lie.className="Embedding";Fe(lie);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Op extends Zt{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new qt}computeElementwiseOpOutputShape(e,n){if(e==null||n==null)return null;if(e.length<n.length)return this.computeElementwiseOpOutputShape(n,e);if(n.length===0)return e;const r=e.slice(0,e.length-n.length);for(let i=0;i<n.length;++i){const s=e[e.length-n.length+i],o=n[i];if(s==null||o==null||s<0||o<0)r.push(null);else if(s===1)r.push(o);else if(o===1)r.push(s);else{if(s!==o)throw new he("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(n));r.push(s)}}return r}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[hn(e)]),e=e,e.length<2)throw new he(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let n=[];for(const s of e)s!=null&&s[0]!==null&&n.push(s[0]);if(n=qd(n),n.length>1)throw new he(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let r=e[0]==null?null:e[0].slice(1);for(let s=1;s<e.length;++s){const o=e[s]==null?null:e[s].slice(1);r=this.computeElementwiseOpOutputShape(r,o)}const i=e.map(s=>s.length);e.indexOf(null)===-1&&qd(i).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,n){return Ne(()=>{if(e=e,this.reshapeRequired){const r=[],i=e.map(s=>s.rank);if(i.indexOf(null)===-1){const s=sh(i);for(let o of e){const a=o.rank;for(let l=0;l<s-a;++l)o=Jx(o,1);r.push(o)}return this.mergeFunction(r)}else{let s=!1;for(const l of e){const c=l.rank;if(c==null){const u=l.shape,d=u[0],h=u.slice(1).concat([d]);let f=be(l,[d].concat(Hd(u.slice(1))));f=ln(f,[1,0]),f=be(f,h),r.push(f),s=!0}else if(c>1){const u=Tl(1,c).concat([0]);r.push(ln(l,u)),s=!0}else r.push(l)}let o=this.mergeFunction(r);const a=o.rank;if(s){if(a==null){const l=o.shape,c=l.length,u=l[c-1],d=[u].concat(l.slice(0,l.length-1));o=be(ln(be(o,[-1,u]),[1,0]),d)}else if(a>1){const l=[a-1].concat(Tl(0,a-1));o=ln(o,l)}}return o}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let n;e[0]==null?n=null:n=e[0].slice(1);for(let i=1;i<e.length;++i){const s=e[i]==null?null:e[i].slice(1);n=this.computeElementwiseOpOutputShape(n,s)}let r=[];for(const i of e)i!=null&&i[0]!==null&&r.push(i[0]);return r=qd(r),r.length===1?n=r.concat(n):n=[null].concat(n),n}computeMask(e,n){return Ne(()=>{if(n==null)return null;if(!Array.isArray(n))throw new he("`mask` should be an Array");if(!Array.isArray(e))throw new he("`inputs` should be an Array");if(n.length!==e.length)throw new he(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${n.length})`);if(n.every(i=>i==null))return null;n=n.map(i=>i==null?i:Us(i,0));let r=n[0];for(let i=1;i<n.length-1;++i)r=Au(r,n[i]);return r})}}class cie extends Op{constructor(e){super(e)}mergeFunction(e){return Ne(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=ze(n,e[r]);return n})}}cie.className="Add";Fe(cie);class uie extends Op{constructor(e){super(e)}mergeFunction(e){return Ne(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=de(n,e[r]);return n})}}uie.className="Multiply";Fe(uie);class die extends Op{constructor(e){super(e)}mergeFunction(e){return Ne(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=ze(n,e[r]);return de(1/e.length,n)})}}die.className="Average";Fe(die);class hie extends Op{constructor(e){super(e)}mergeFunction(e){return Ne(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=Ch(n,e[r]);return n})}}hie.className="Maximum";Fe(hie);class fie extends Op{constructor(e){super(e)}mergeFunction(e){return Ne(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=Sg(n,e[r]);return n})}}fie.className="Minimum";Fe(fie);class pie extends Op{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new he("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let n=!0;for(const i of e)if(i!=null){n=!1;break}if(n)return;const r=[];for(let i=0;i<e.length;++i){const s=e[i].slice();s.splice(this.axis,1);let o=!1;for(const a of r)if(xn(a,s)){o=!0;break}o||r.push(s)}if(r.length>1)throw new he("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return Ne(()=>NL(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new he("A `Concatenate` layer should be called on a list of inputs.");const n=e,r=n[0].slice(),i=this.axis<0?r.length+this.axis:this.axis;for(const s of n.slice(1)){if(r[i]==null||s[i]==null){r[i]=null;break}r[i]+=s[i]}return r}computeMask(e,n){if(n==null)return null;if(!Array.isArray(n))throw new he("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new he("`inputs` should be an array for Concatenate");if(n.length!==e.length)throw new he(`Mismatch in the length of mask (${n.length}) and the legnth of inputs (${e.length})`);return Ne(()=>{let r=!0;if(n.forEach(o=>{if(o!=null){r=!1;return}}),r)return null;const i=[];for(let o=0;o<e.length;++o)n[o]==null?i.push(Ye(qa(e[o]),"bool")):n[o].rank<e[o].rank?i.push(Us(n[o],-1)):i.push(n[o]);const s=Ys(i,this.axis);return gte(s,-1,!1)})}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}pie.className="Concatenate";Fe(pie);function ky(t,e){for(;t<0;)t+=e;return t}function XUe(t,e,n){if(t.shape.length>3||e.shape.length>3)throw new qt("batchDot is not implemented for tensors of 4D or higher rank yet");if(Z(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),Z(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${e.shape.length}`),typeof n=="number"&&(n=[n,n]),t.dtype==="complex64"||e.dtype==="complex64")throw new qt("batchDot is not implemented for complex64-type Tensors yet.");const r=t.shape.length,i=e.shape.length;n==null&&(n=[r-1,i-2]);const s=n;return Ne(()=>{let o;if(r>i){o=r-i;const l=[];for(let c=0;c<o;++c)l.push(1);e=be(e,e.shape.concat(l))}else if(i>r){o=i-r;const l=[];for(let c=0;c<o;++c)l.push(1);t=be(t,t.shape.concat(l))}else o=0;let a;if(t.shape.length===2&&e.shape.length===2)s[0]===s[1]?a=lt(de(t,e),s[0]):a=lt(de(ln(t,[1,0]),e),s[1]);else{const l=s[0]!==t.shape.length-1,c=s[1]===e.shape.length-1;a=gn(t,e,l,c)}if(o>0){let l;r>i?l=r+i-3:l=r-1;const c=[];for(let u=l;u<l+o;++u)c.push(u);a=qx(a,c)}return a.shape.length===1&&(a=Us(a,1)),a})}class mie extends Op{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){Z(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0],r=e[1];if(n.length>3||r.length>3)throw new qt("Dot layer does not support tensors of 4D or higher rank yet.");const i=this.interpretAxes(n,r);if(n[i[0]]!==r[i[1]])throw new he(`Dimension incompatibility: ${n[i[0]]} !== ${r[i[1]]}`)}mergeFunction(e){if(e.length!==2)throw new he(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let n=e[0],r=e[1],i;return Array.isArray(this.axes)?i=this.axes.map((s,o)=>ky(s,e[o].shape.length)):i=[ky(this.axes,n.shape.length),ky(this.axes,r.shape.length)],this.normalize&&(n=IS(n,i[0]),r=IS(r,i[1])),XUe(n,r,i)}interpretAxes(e,n){let r;return Array.isArray(this.axes)?r=this.axes:r=[ky(this.axes,e.length),ky(this.axes,n.length)],r}computeOutputShape(e){Z(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0].slice(),r=e[1].slice();if(n.length>3||r.length>3)throw new qt("Dot layer does not support tensors of 4D or higher rank yet.");const i=this.interpretAxes(n,r);n.splice(i[0],1),r.splice(i[1],1),r.splice(0,1);const s=n.concat(r);return s.length===1&&s.push(1),s}computeMask(e,n){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},n=super.getConfig();return Object.assign(e,n),e}}mie.className="Dot";Fe(mie);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class gie extends Zt{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={stddev:this.stddev};return Object.assign(n,e),n}call(e,n){return Ne(()=>{this.invokeCallHook(e,n);const r=$t(e);return eb(()=>ze(O5(r.shape,0,this.stddev),r),()=>r,n.training||!1)})}}gie.className="GaussianNoise";Fe(gie);class yie extends Zt{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return Ne(()=>{this.invokeCallHook(e,n);const r=$t(e);return this.rate>0&&this.rate<1?eb(()=>{const s=Math.sqrt(this.rate/(1-this.rate));return de(r,O5(r.shape,1,s))},()=>r,n.training||!1):r})}}yie.className="GaussianDropout";Fe(yie);class vie extends Zt{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||$t(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return Ne(()=>{if(this.rate<1&&this.rate>0){const r=this._getNoiseShape(e);return eb(()=>{const s=$t(e),o=1.6732632423543772,a=1.0507009873554805,l=-o*a;let c=Tp(Gx(r),this.rate);c=xc(c,"float32");const u=((1-this.rate)*(1+this.rate*l**2))**-.5,d=-u*l*this.rate,h=ze(de(s,c),de(ze(c,-1),l));return ze(de(h,u),d)},()=>$t(e),n.training||!1)}return e})}}vie.className="AlphaDropout";Fe(vie);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ov(t,e,n,r,i,s=.001){let o;if(t.rank===2)o=cMe(t,e,n,r,i,s);else if(t.rank===3)o=dMe(t,e,n,r,i,s);else if(t.rank===4)o=fMe(t,e,n,r,i,s);else throw new qt(`batchNormalization is not implemented for array of rank ${t.rank} yet`);return o}function YUe(t,e,n,r,i=.001){return Ne(()=>{const s=ID(t,r),o=s.mean,a=s.variance;return[ov(t,o,a,n,e,i),o,a]})}function ZUe(t,e,n,r,i=.001){return Ne(()=>{const s=ID(t,r),o=s.mean,a=s.variance,l=[];for(const p of Tl(0,t.rank))r.indexOf(p)!==-1?l.push(1):l.push(t.shape[p]);const c=be(o,l),u=be(a,l),d=e==null?null:be(e,l),h=n==null?null:be(n,l);return[ov(t,c,u,h,d,i),o,a]})}function JUe(t,e,n,r,i=.001){return xn(r.slice().sort(),Tl(0,t.rank-1))?YUe(t,e,n,r,i):ZUe(t,e,n,r,i)}class xie extends Zt{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=sr(e.betaInitializer||"zeros"),this.gammaInitializer=sr(e.gammaInitializer||"ones"),this.movingMeanInitializer=sr(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=sr(e.movingVarianceInitializer||"ones"),this.betaConstraint=di(e.betaConstraint),this.gammaConstraint=di(e.gammaConstraint),this.betaRegularizer=ar(e.betaRegularizer),this.gammaRegularizer=ar(e.gammaRegularizer)}build(e){e=hn(e);const n=this.axis>=0?this.axis:this.axis+e.length,r=e[n];if(r==null)throw new he(`Axis ${n} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new li({ndim:e.length,axes:{[n]:r}})];const i=[r];this.scale&&(this.gamma=this.addWeight("gamma",i,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",i,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",i,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",i,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,n){return Ne(()=>{const r=n.training==null?!1:n.training,i=$t(e),s=i.shape,o=s.length,a=Tl(0,o),l=this.axis>=0?this.axis:this.axis+o;a.splice(l,1);const c=yp(1,o);c[l]=s[l];const u=a.slice();u.sort();const d=!xn(u,Tl(0,o).slice(0,o-1)),h=()=>{if(d){const v=be(this.movingMean.read(),c),x=be(this.movingVariance.read(),c),b=this.center?be(this.beta.read(),c):null,S=this.scale?be(this.gamma.read(),c):null;return ov(i,v,x,b,S,this.epsilon)}else return ov(i,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!r)return h();const[f,p,m]=JUe(i,this.gamma.read(),this.beta.read(),a,this.epsilon),y=(v,x,b)=>{Ne(()=>{const S=1-b,A=v.read(),E=de(nt(A,x),S);v.write(nt(A,E))})};return(()=>{y(this.movingMean,p,this.momentum),y(this.movingVariance,m,this.momentum)})(),f})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:fr(this.betaInitializer),gammaInitializer:fr(this.gammaInitializer),movingMeanInitializer:fr(this.movingMeanInitializer),movingVarianceInitializer:fr(this.movingVarianceInitializer),betaRegularizer:On(this.betaRegularizer),gammaRegularizer:On(this.gammaRegularizer),betaConstraint:ui(this.betaConstraint),gammaConstraint:ui(this.gammaConstraint)},n=super.getConfig();return Object.assign(e,n),e}}xie.className="BatchNormalization";Fe(xie);class bie extends Zt{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const n of this.axis)if(!Number.isInteger(n))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=sr(e.betaInitializer||"zeros"),this.gammaInitializer=sr(e.gammaInitializer||"ones"),this.betaRegularizer=ar(e.betaRegularizer),this.gammaRegularizer=ar(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=hn(e);const n=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let s=0;s<this.axis.length;++s)this.axis[s]<0&&(this.axis[s]+=n);for(const s of this.axis)if(s<0||s>=n)throw new Error(`Invalid axis: ${s}`);if(this.axis.length!==qd(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const r=this.axis.map(s=>e[s]),i=!0;this.scale?this.gamma=this.addWeight("gamma",r,"float32",this.gammaInitializer,this.gammaRegularizer,i):this.gamma=null,this.center?this.beta=this.addWeight("beta",r,"float32",this.betaInitializer,this.betaRegularizer,i):this.beta=null,this.built=!0}call(e,n){const r=$t(e),i=r.shape,s=i.length;return Ne(()=>{let{mean:a,variance:l}=ID(r,this.axis,!0);const c=yp(1,s);for(const m of this.axis)c[m]=i[m];const u=m=>m!=null&&m.shape.length!==s?be(m,c):m;let d=this.scale?u(this.gamma.read()):null,h=this.center?u(this.beta.read()):null;const f=[],p=[];for(let m=0;m<s;++m)this.axis.indexOf(m)!==-1?(f.push(i[m]),p.push(1)):(f.push(1),p.push(i[m]));return a=wl(a,f),l=wl(l,f),d!=null&&(d=wl(d,p)),h!=null&&(h=wl(h,p)),ov(r,a,l,h,d,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:fr(this.betaInitializer),gammaInitializer:fr(this.gammaInitializer),betaRegularizer:On(this.betaRegularizer),gammaRegularizer:On(this.gammaRegularizer)},n=super.getConfig();return Object.assign(e,n),e}}bie.className="LayerNormalization";Fe(bie);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function QUe(t,e,n){return Ne(()=>{if(t.rank!==4)throw new he(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(e==null&&(e=[[1,1],[1,1]]),e.length!==2||e[0].length!==2||e[1].length!==2)throw new he("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=$l()),n!=="channelsLast"&&n!=="channelsFirst")throw new he(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return n==="channelsFirst"?r=[[0,0],[0,0],e[0],e[1]]:r=[[0,0],e[0],e[1],[0,0]],_D(t,r)})}class wie extends Zt{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?$l():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new he(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let n,r;if(typeof e.padding[0]=="number")n=[e.padding[0],e.padding[0]],r=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new he(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(n=e.padding[0],e.padding[1].length!==2)throw new he(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);r=e.padding[1]}this.padding=[n,r]}this.inputSpec=[new li({ndim:4})]}computeOutputShape(e){e=hn(e);let n,r;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?n=e[2]+this.padding[0][0]+this.padding[0][1]:n=null,e[3]!=null&&e[3]>=0?r=e[3]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],e[1],n,r]):(e[1]!=null&&e[1]>=0?n=e[1]+this.padding[0][0]+this.padding[0][1]:n=null,e[2]!=null&&e[2]>=0?r=e[2]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],n,r,e[3]])}call(e,n){return Ne(()=>QUe($t(e),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}wie.className="ZeroPadding2D";Fe(wie);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function U5(t,e,n,r,i,s){return Ne(()=>{Fr(i),Fne(s),ia(r),n==null&&(n=[1,1]),r==null&&(r="valid"),i==null&&(i=$l()),s==null&&(s="max"),t=FL(t,i);let o;const a=r==="same"?"same":"valid";return s==="max"?o=AD(t,e,n,a):o=pD(t,e,n,a),i==="channelsFirst"&&(o=ln(o,[0,3,1,2])),o})}function kie(t,e,n,r,i,s){return Ne(()=>{Fr(i),Fne(s),ia(r),n==null&&(n=[1,1,1]),r==null&&(r="valid"),i==null&&(i=$l()),s==null&&(s="max"),t=Bre(t,i);let o;const a=r==="same"?"same":"valid";return s==="max"?o=ZFe(t,e,n,a):o=QLe(t,e,n,a),i==="channelsFirst"&&(o=ln(o,[0,4,1,2,3])),o})}class Sie extends Zt{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new he(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if(Ii(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new he(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);Ii(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,ia(this.padding),this.inputSpec=[new li({ndim:3})]}computeOutputShape(e){e=hn(e);const n=Al(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],n,e[2]]}call(e,n){return Ne(()=>{this.invokeCallHook(e,n),e=Jx($t(e),2);const r=this.poolingFunction($t(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return qx(r,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(e,n),e}}class Cie extends Sie{constructor(e){super(e)}poolingFunction(e,n,r,i,s){return Fr(s),ia(i),U5(e,n,r,i,s,"max")}}Cie.className="MaxPooling1D";Fe(Cie);class Nie extends Sie{constructor(e){super(e)}poolingFunction(e,n,r,i,s){return Fr(s),ia(i),U5(e,n,r,i,s,"avg")}}Nie.className="AveragePooling1D";Fe(Nie);class Aie extends Zt{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new he(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];Ii(this.poolSize,"poolSize"),Ii(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Fr(this.dataFormat),ia(this.padding),this.inputSpec=[new li({ndim:4})]}computeOutputShape(e){e=hn(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2];return n=Al(n,this.poolSize[0],this.padding,this.strides[0]),r=Al(r,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r]:[e[0],n,r,e[3]]}call(e,n){return Ne(()=>(this.invokeCallHook(e,n),this.poolingFunction($t(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class Iie extends Aie{constructor(e){super(e)}poolingFunction(e,n,r,i,s){return Fr(s),ia(i),U5(e,n,r,i,s,"max")}}Iie.className="MaxPooling2D";Fe(Iie);class _ie extends Aie{constructor(e){super(e)}poolingFunction(e,n,r,i,s){return Fr(s),ia(i),U5(e,n,r,i,s,"avg")}}_ie.className="AveragePooling2D";Fe(_ie);class Eie extends Zt{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new he(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];Ii(this.poolSize,"poolSize"),Ii(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Fr(this.dataFormat),ia(this.padding),this.inputSpec=[new li({ndim:5})]}computeOutputShape(e){e=hn(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],i=this.dataFormat==="channelsFirst"?e[4]:e[3];return n=Al(n,this.poolSize[0],this.padding,this.strides[0]),r=Al(r,this.poolSize[1],this.padding,this.strides[1]),i=Al(i,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r,i]:[e[0],n,r,i,e[4]]}call(e,n){return Ne(()=>(this.invokeCallHook(e,n),this.poolingFunction($t(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class Tie extends Eie{constructor(e){super(e)}poolingFunction(e,n,r,i,s){return Fr(s),ia(i),kie(e,n,r,i,s,"max")}}Tie.className="MaxPooling3D";Fe(Tie);class $ie extends Eie{constructor(e){super(e)}poolingFunction(e,n,r,i,s){return Fr(s),ia(i),kie(e,n,r,i,s,"avg")}}$ie.className="AveragePooling3D";Fe($ie);class Pie extends Zt{constructor(e){super(e),this.inputSpec=[new li({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,n){throw new qt}}class Rie extends Pie{constructor(e){super(e||{})}call(e,n){return Ne(()=>{const r=$t(e);return Pr(r,1)})}}Rie.className="GlobalAveragePooling1D";Fe(Rie);class Oie extends Pie{constructor(e){super(e||{})}call(e,n){return Ne(()=>{const r=$t(e);return Nl(r,1)})}}Oie.className="GlobalMaxPooling1D";Fe(Oie);class Die extends Zt{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Fr(this.dataFormat),this.inputSpec=[new li({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,n){throw new qt}getConfig(){const e={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class Lie extends Die{call(e,n){return Ne(()=>{const r=$t(e);return this.dataFormat==="channelsLast"?Pr(r,[1,2]):Pr(r,[2,3])})}}Lie.className="GlobalAveragePooling2D";Fe(Lie);class Mie extends Die{call(e,n){return Ne(()=>{const r=$t(e);return this.dataFormat==="channelsLast"?Nl(r,[1,2]):Nl(r,[2,3])})}}Mie.className="GlobalMaxPooling2D";Fe(Mie);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Fie extends Zt{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(e,n),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,n,r={}){const i=n.layer,s=hu(i,r);delete n.layer;const o={layer:s};return Object.assign(o,n),new e(o)}}class jie extends Fie{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=hn(e),e.length<3)throw new he(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const n=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=hn(e);const n=[e[0]].concat(e.slice(2)),r=this.layer.computeOutputShape(n),i=e[1];return[r[0],i].concat(r.slice(1))}call(e,n){return Ne(()=>(e=$t(e),Xre((o,a)=>[$t(this.layer.call(o,n)),[]],e,[],!1,null,null,!1,!0)[1]))}}jie.className="TimeDistributed";Fe(jie);function eVe(t){Rp(b7e,"BidirectionalMergeMode",t)}const tVe="concat";class Bie extends Fie{constructor(e){super(e);const n=e.layer.getConfig(),r={};r.className=e.layer.getClassName(),r.config=n,this.forwardLayer=hu(r),n.goBackwards=n.goBackwards!==!0;const i={};if(i.className=e.layer.getClassName(),i.config=n,this.backwardLayer=hu(i),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?tVe:e.mergeMode,eVe(this.mergeMode),e.weights)throw new qt("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const n=e.length,r=Math.floor(n/2);this.forwardLayer.setWeights(e.slice(0,r)),this.backwardLayer.setWeights(e.slice(r))}computeOutputShape(e){let n=this.forwardLayer.computeOutputShape(e);Array.isArray(n)&&Array.isArray(n[0])||(n=[n]),n=n;let r,i,s;return this.returnState&&(s=n.slice(1)),r=n[0],r=r,this.mergeMode==="concat"?(r[r.length-1]*=2,i=[r]):this.mergeMode==null?i=[r,r.slice()]:i=[r],this.returnState?this.mergeMode==null?i.concat(s).concat(s.slice()):[r].concat(s).concat(s.slice()):Vs(i)}apply(e,n){let r=n==null?null:n.initialState,i=n==null?null:n.constants;n==null&&(n={});const s=Kre(e,r,i,this.numConstants);if(e=s.inputs,r=s.initialState,i=s.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(r==null||r.length===0)&&i==null)return super.apply(e,n);const o=[],a=[];if(r!=null){const c=r.length;if(c%2>0)throw new he("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=r,o.push(...r);const u=r.map(d=>new li({shape:d.shape}));this.forwardLayer.stateSpec=u.slice(0,c/2),this.backwardLayer.stateSpec=u.slice(c/2),a.push(...u)}if(i!=null)throw new qt("Support for constants in Bidirectional layers is not implemented yet.");const l=o[0]instanceof Nc;for(const c of o)if(c instanceof Nc!==l)throw new he("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(l){const c=[e].concat(o),u=this.inputSpec.concat(a),d=this.inputSpec;this.inputSpec=u;const h=super.apply(c,n);return this.inputSpec=d,h}else return super.apply(e,n)}call(e,n){return Ne(()=>{const r=n.initialState;let i,s;if(r==null)i=this.forwardLayer.call(e,n),s=this.backwardLayer.call(e,n);else{const l=r.slice(0,r.length/2),c=r.slice(r.length/2);i=this.forwardLayer.call(e,Object.assign(n,{initialState:l})),s=this.backwardLayer.call(e,Object.assign(n,{initialState:c}))}let o;this.returnState&&(Array.isArray(i)&&(o=i.slice(1).concat(s.slice(1))),i=i[0],s=s[0]),this.returnSequences&&(s=mp(s,1));let a;return this.mergeMode==="concat"?a=NL([i,s]):this.mergeMode==="sum"?a=ze(i,s):this.mergeMode==="ave"?a=de(.5,ze(i,s)):this.mergeMode==="mul"?a=de(i,s):this.mergeMode==null&&(a=[i,s]),this.returnState?this.mergeMode==null?a.concat(o):[a].concat(o):a})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){zf(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),zf(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,n){Array.isArray(n)&&(n=n[0]);let r;if(this.returnSequences?this.mergeMode==null?r=[n,n]:r=n:this.mergeMode==null?r=[null,null]:r=null,this.returnState){const s=this.forwardLayer.states.map(o=>null);return Array.isArray(r)?r.concat(s).concat(s):[r].concat(s).concat(s)}else return r}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},n=super.getConfig();return Object.assign(e,n),e}static fromConfig(e,n){const r=hu(n.layer);if(delete n.layer,n.numConstants!=null)throw new qt("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const i=n;return i.layer=r,new e(i)}}Bie.className="Bidirectional";Fe(Bie);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class zie extends Zt{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return Ne(()=>(e=$t(e),e.dtype!=="float32"&&(e=xc(e,"float32")),ze(de(e,this.scale),this.offset)))}}zie.className="Rescaling";Fe(zie);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const{resizeBilinear:nVe,cropAndResize:rVe}=au;class Uie extends Zt{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,n,r,i,s,o,a,l){return Ne(()=>{let c,u=!1;const d=n/o,h=r/a,f=(i+n)/o,p=(s+r)/a,m=[d,h,f,p],y=[];e.rank===3?(u=!0,c=Iu([e])):c=e;for(let S=0;S<c.shape[0];S++)y.push(m);const g=ote(y,[y.length,4]),v=rv(0,y.length,1,"int32"),b=rVe(c,g,v,[i,s],"nearest");return xc(u?$t(gp(b)):b,l)})}upsize(e,n,r,i){return Ne(()=>{const s=nVe(e,[n,r]);return xc(s,i)})}call(e,n){return Ne(()=>{const r=$t(e),i=r.dtype,s=r.shape,o=s[s.length-3],a=s[s.length-2];let l=0;o!==this.height&&(l=Math.floor((o-this.height)/2));let c=0;return a!==this.width&&(c=Math.floor((a-this.width)/2),c===0&&(c=1)),l>=0&&c>=0?this.centerCrop(r,l,c,this.height,this.width,o,a,i):this.upsize(e,this.height,this.width,i)})}getConfig(){const e={height:this.height,width:this.width},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=hn(e);const n=e.length-3,r=e.length-2;return e[n]=this.height,e[r]=this.width,e}}Uie.className="CenterCrop";Fe(Uie);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function iVe(t,e,n,r){let i=$t(t);if(i.dtype!=="int32"&&(i=xc(i,"int32")),e==="int")return i;const s=i.shape;if(i.rank===0&&(i=Us(i,-1)),e==="oneHot"&&i.shape[i.shape.length-1]!==1&&(i=Us(i,-1)),i.rank>2)throw new he(`When outputMode is not int, maximum output rank is 2 Received outputMode ${e} and input shape ${s} which would result in output rank ${i.rank}.`);const o=["multiHot","oneHot"].includes(e),a=i;let l;if(typeof r<"u"&&e==="count"?l=xU(a,r,n,o):l=xU(a,[],n,o),e!=="tfIdf")return l;if(r)return de(l,r);throw new he("When outputMode is 'tfIdf', weights must be provided.")}/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Vie extends Zt{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){return e=hn(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,n){return Ne(()=>{e=$t(e),e.dtype!=="int32"&&(e=xc(e,"int32"));let r;if(typeof n.countWeights<"u"){if(this.outputMode!=="count")throw new he(`countWeights is not used when outputMode !== count.
              Received countWeights=${n.countWeights}`);r=$t(n.countWeights)}const i=Nl(e),s=xS(e),o=ra(this.numTokens,i).bufferSync().get(0),a=Tp(s,0).bufferSync().get(0);if(!(o&&a))throw new he(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return iVe(e,this.outputMode,this.numTokens,r)})}}Vie.className="CategoryEncoding";Fe(Vie);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const sVe=["bilinear","nearest"],JU=new Set(sVe);class Wie extends Zt{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(JU.has(e.interpolation))this.interpolation=e.interpolation;else throw new he(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=hn(e);const n=e[2];return[this.height,this.width,n]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return Ne(()=>{const r=[this.height,this.width];if(this.interpolation==="bilinear")return au.resizeBilinear(e,r,!this.cropToAspectRatio);if(this.interpolation==="nearest")return au.resizeNearestNeighbor(e,r,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...JU]} are supported`)})}}Wie.className="Resizing";Fe(Wie);/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Gie{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}}Gie.className="RandomSeed";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class qie extends Zt{constructor(e){super(e),this.randomGenerator=new Gie(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},n=super.getConfig();return Object.assign(e,n),e}}qie.className="BaseRandomLayer";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const oVe=["bilinear","nearest"],QU=new Set(oVe);class Hie extends qie{constructor(e){super(e);const{factor:n,interpolation:r="bilinear"}=e;if(this.factor=n,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new he(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new he(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new he(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(r)if(QU.has(r))this.interpolation=r;else throw new he(`Invalid interpolation parameter: ${r} is not implemented`)}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=hn(e);const n=e[2];return[this.imgHeight,-1,n]}call(e,n){return Ne(()=>{const r=$t(e);this.imgHeight=r.shape[r.shape.length-3];const i=r.shape[r.shape.length-2];this.widthFactor=Gx([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let s=this.widthFactor.dataSync()[0]*i;s=Math.round(s);const o=[this.imgHeight,s];switch(this.interpolation){case"bilinear":return au.resizeBilinear(e,o);case"nearest":return au.resizeNearestNeighbor(e,o);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...QU]} are supported`)}})}}Hie.className="RandomWidth";Fe(Hie);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function aVe(t){return new WL(t)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lVe=Ee();lVe.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var eV;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"})(eV||(eV={}));var tV;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(tV||(tV={}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var nV;(function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"})(nV||(nV={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function it(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&Z(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cVe=Wte;class V5 extends vO{nextDataId(){return V5.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new uee(this,Zl())}write(e,n,r){this.firstUse&&(this.firstUse=!1,Ee().get("IS_NODE")&&zo(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const i={id:this.nextDataId()};return this.data.set(i,{values:e,dtype:r,refCount:1}),i}makeTensorInfo(e,n,r){let i;if(n==="string"&&r!=null&&r.length>0&&Hv(r[0])){const s=r.map(o=>Gd(o));i=this.write(s,e,n)}else i=this.write(r,e,n);return{dataId:i,shape:e,dtype:n}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const n=this.data.get(e);n.refCount++}decRef(e){if(this.data.has(e)){const n=this.data.get(e);n.refCount--}}move(e,n,r,i,s){this.data.set(e,{values:n,dtype:i,refCount:s})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:n,complexTensorInfos:r}=this.data.get(e);if(n==="complex64"){const i=this.readSync(r.real.dataId),s=this.readSync(r.imag.dataId);return _u(i,s)}return pDe(this.data.get(e).values,n)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(i=>ih(i));return Xt(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Xt(e.shape,e.dtype,n)}makeOutput(e,n,r){return Zl().makeTensorFromTensorInfo(this.makeTensorInfo(n,r,e),this)}disposeData(e,n=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!n&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(e);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const n=js();return e(),{kernelMs:js()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){it([e],"where");const n=this.readSync(e.dataId);return cVe(e.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}V5.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kie(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}const uVe=t=>{const{x:e}=t.inputs,n=t.backend;it(e,"abs");let r=new Float32Array($e(e.shape));const i=n.data.get(e.dataId).values;return r=Kie(i),n.makeOutput(r,e.shape,e.dtype)},dVe={kernelName:bN,backendName:"cpu",kernelFunc:uVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jr(t){return(e,n,r,i,s)=>{const o=Ut(e,n),a=o.length,l=wt(o),c=$e(o),u=ss(s,c),d=e.length,h=n.length,f=wt(e),p=wt(n),m=kg(e,o),y=kg(n,o);if(m.length+y.length===0)for(let g=0;g<u.length;++g)u[g]=t(r[g%r.length],i[g%i.length]);else for(let g=0;g<u.length;++g){const v=o0(g,a,l),x=v.slice(-d);m.forEach(E=>x[E]=0);const b=gc(x,d,f),S=v.slice(-h);y.forEach(E=>S[E]=0);const A=gc(S,h,p);u[g]=t(r[b],i[A])}return[u,o]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uo(t){const{inputs:e,backend:n}=t,{real:r,imag:i}=e,s=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,a=n.makeTensorInfo(r.shape,"complex64"),l=n.data.get(a.dataId);return l.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",s),imag:n.makeTensorInfo(i.shape,"float32",o)},a}const hVe={kernelName:TO,backendName:"cpu",kernelFunc:uo};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PS(t,e,n="float32"){if(n==="complex64"){const i=PS(t,e,"float32"),s=PS(t,e,"float32");return uo({inputs:{real:i,imag:s},backend:t})}const r=os($e(e),n);return t.makeTensorInfo(e,n,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ac(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const fVe={kernelName:px,backendName:"cpu",kernelFunc:Ac};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vp(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.data.get(r.dataId).complexTensorInfos.real,s=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,s)}const pVe={kernelName:eD,backendName:"cpu",kernelFunc:vp};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xie(t,e,n,r){if(r==="int32"){const i=Int32Array.from(t);return[e,"int32",i]}if(r==="bool"){const i=Ep([0],n),[s,o]=jr((a,l)=>a!==l?1:0)(e,[],t,i,"bool");return[o,"bool",s]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function ch(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dtype:s}=r;if(s==="complex64"){if(i.dtype==="complex64")return Ac({inputs:{x:i},backend:n});const u=PS(n,i.shape,i.dtype),d=ch({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),h=uo({inputs:{real:d,imag:u},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),h}if(i.dtype==="complex64"){const u=vp({inputs:{input:i},backend:n}),d=ch({inputs:{x:u},backend:n,attrs:{dtype:s}});return n.disposeIntermediateTensorInfo(u),d}if(!fee(i.dtype,s)){const u=Ac({inputs:{x:i},backend:n});return{dataId:u.dataId,shape:u.shape,dtype:s}}const o=n.data.get(i.dataId).values,[a,l,c]=Xie(o,i.shape,i.dtype,s);return n.makeTensorInfo(a,l,c)}const mVe={kernelName:tx,backendName:"cpu",kernelFunc:ch};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fi(t,e,n,r){return n==null?({inputs:i,backend:s})=>{const{a:o,b:a}=i,l=s;it([o,a],t);const c=l.data.get(o.dataId).values,u=l.data.get(a.dataId).values,d=o.dtype==="string"?Eu(c):c,h=o.dtype==="string"?Eu(u):u,f=r||o.dtype,[p,m]=e(o.shape,a.shape,d,h,f);return l.makeTensorInfo(m,f,p)}:({inputs:i,backend:s})=>{const{a:o,b:a}=i,l=s;if(o.dtype==="complex64"||a.dtype==="complex64"){const c=ch({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),u=l.data.get(c.dataId),d=u.complexTensorInfos.real,h=u.complexTensorInfos.imag,f=l.data.get(d.dataId).values,p=l.data.get(h.dataId).values,m=ch({inputs:{x:a},backend:l,attrs:{dtype:"complex64"}}),y=l.data.get(m.dataId),g=y.complexTensorInfos.real,v=y.complexTensorInfos.imag,x=l.data.get(g.dataId).values,b=l.data.get(v.dataId).values,[S,A,E]=n(o.shape,a.shape,f,p,x,b),I=l.makeTensorInfo(E,"float32",S),T=l.makeTensorInfo(E,"float32",A),O=uo({inputs:{real:I,imag:T},backend:l});return l.disposeIntermediateTensorInfo(c),l.disposeIntermediateTensorInfo(m),l.disposeIntermediateTensorInfo(I),l.disposeIntermediateTensorInfo(T),O}else{const c=l.data.get(o.dataId).values,u=l.data.get(a.dataId).values,d=r||o.dtype,[h,f]=e(o.shape,a.shape,c,u,d);return l.makeTensorInfo(f,d,h)}}}function GL(t){return(e,n,r,i,s,o)=>{const a=Ut(e,n),l=$e(a),c=a.length,u=wt(a),d=ss("float32",l),h=ss("float32",l),f=kg(e,a),p=kg(n,a),m=_u(r,i),y=_u(s,o),g=e.length,v=wt(e),x=n.length,b=wt(n);if(f.length+p.length===0)for(let S=0;S<d.length;S++){const A=S%m.length,E=S%y.length,I=t(m[A*2],m[A*2+1],y[E*2],y[E*2+1]);d[S]=I.real,h[S]=I.imag}else for(let S=0;S<d.length;S++){const A=o0(S,c,u),E=A.slice(-g);f.forEach(R=>E[R]=0);const I=gc(E,g,v),T=A.slice(-x);p.forEach(R=>T[R]=0);const O=gc(T,x,b),$=t(m[I*2],m[I*2+1],y[O*2],y[O*2+1]);d[S]=$.real,h[S]=$.imag}return[d,h,a]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yie=jr((t,e)=>t+e),gVe=GL((t,e,n,r)=>({real:t+n,imag:e+r})),Ag=fi(a0,Yie,gVe),yVe={kernelName:a0,backendName:"cpu",kernelFunc:Ag};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qL(t,e,n,r,i){const s=$e(r),o=os(i,n);for(let a=0;a<t.length;a++){const l=t[a];if(l<0)throw new Error("Input x must be non-negative!");l>=i||(s>0?o[l]+=e[a]:o[l]+=1)}return o}function Zie(t,e,n,r=!1){const i=t.shape[0],s=t.shape[1],o=Xt([i,n],e.dtype);for(let a=0;a<i;a++)for(let l=0;l<s;l++){const c=t.get(a,l);if(c<0)throw new Error("Input x must be non-negative!");c>=n||(r?o.set(1,a,c):e.size>0?o.set(o.get(a,c)+e.get(a,l),a,c):o.set(o.get(a,c)+1,a,c))}return o}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jie=jr((t,e)=>t&e),vVe=fi(EO,Jie),xVe={kernelName:EO,backendName:"cpu",kernelFunc:vVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tc(t){return(e,n,r)=>{const i=Rr(n,e.length);for(let s=0;s<e.length;++s)i[s]=t(e[s],r);return i}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nn(t,e,n){const r=Tc(e);return Ih(t,r,n)}function Ih(t,e,n){return({inputs:r,attrs:i,backend:s})=>{const{x:o}=r;it(o,t);const a=s,l=a.data.get(o.dataId).values;let c;if(o.dtype==="string"){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");c=Eu(l)}else c=l;const u=n||o.dtype,d=e(c,u,i);return a.makeTensorInfo(o.shape,u,d)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qie=Tc(t=>Math.ceil(t)),bVe=Ih(nx,Qie),wVe={kernelName:nx,backendName:"cpu",kernelFunc:bVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ese(t,e,n,r){const i=Rr(n,$e(e));if(r&&n!=="string"){let s=0;t.forEach(o=>{const a=$e(o.shape);i.set(o.vals,s),s+=a})}else{let s=0;t.forEach(o=>{const a=n==="string"?Eu(o.vals):o.vals;let l=0;for(let c=0;c<o.shape[0];++c){const u=c*e[1]+s;for(let d=0;d<o.shape[1];++d)i[u+d]=a[l++]}s+=o.shape[1]})}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tse=jr((t,e)=>t===e?1:0),nse=fi(DN,tse,null,"bool"),kVe={kernelName:DN,backendName:"cpu",kernelFunc:nse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rse=Tc(t=>Math.exp(t)),ise=Ih(cx,rse,"float32"),SVe={kernelName:cx,backendName:"cpu",kernelFunc:ise};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sse=Tc(t=>Math.expm1(t)),CVe=Ih(ux,sse),NVe={kernelName:ux,backendName:"cpu",kernelFunc:CVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ose=Tc(t=>Math.floor(t)),AVe=Ih(dx,ose),IVe={kernelName:dx,backendName:"cpu",kernelFunc:AVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ase=jr((t,e)=>Math.floor(t/e)),_Ve=fi(hx,ase,null,"int32"),EVe={kernelName:hx,backendName:"cpu",kernelFunc:_Ve};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lse(t,e,n,r,i,s,o,a,l){const c=Xt([r,s],n);for(let u=0;u<r;u++){const d=[];let h=0;for(let f=0;f<i;f++){const p=t[u*i+f];h+=p*o[f],d.push(p)}if(h<0||h>=l/s)throw new Error(`Invalid indices: ${d} does not index into ${a}`);for(let f=0;f<s;f++)c.values[u*s+f]=e.get(...e.indexToLoc(h*s+f))}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cse(t,e,n){const r=Xt(n,t.dtype);for(let i=0;i<r.size;++i){const o=r.indexToLoc(i).slice(),a=o[0],l=o[2],c=e.locToIndex([a,l]);o[2]=e.values[c];const u=t.locToIndex(o);0<=u&&u<t.values.length&&(r.values[i]=t.values[u])}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const use=jr((t,e)=>t>e?1:0),TVe=fi(jN,use,null,"bool"),$Ve={kernelName:jN,backendName:"cpu",kernelFunc:TVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dse=jr((t,e)=>t>=e?1:0),PVe=fi(fx,dse,null,"bool"),RVe={kernelName:fx,backendName:"cpu",kernelFunc:PVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hse=jr((t,e)=>t<e?1:0),OVe=fi(zN,hse,null,"bool"),DVe={kernelName:zN,backendName:"cpu",kernelFunc:OVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fse=jr((t,e)=>t<=e?1:0),LVe=fi(UN,fse,null,"bool"),MVe={kernelName:UN,backendName:"cpu",kernelFunc:LVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pse(t,e,n){const r=(e-t)/(n-1),i=os(n,"float32");i[0]=t;for(let s=1;s<i.length;s++)i[s]=i[s-1]+r;return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mse=Tc(t=>Math.log(t)),FVe=Ih(vx,mse),jVe={kernelName:vx,backendName:"cpu",kernelFunc:FVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gse(t,e,n,r){const i=ss(r,$e(n));for(let s=0;s<i.length;++s){const o=s*e;let a=t[o];for(let l=0;l<e;++l){const c=t[o+l];(Number.isNaN(c)||c>a)&&(a=c)}i[s]=a}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yse=jr((t,e)=>Math.max(t,e)),BVe=fi(bx,yse),zVe={kernelName:bx,backendName:"cpu",kernelFunc:BVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vse=jr((t,e)=>Math.min(t,e)),UVe=fi(wx,vse),VVe={kernelName:wx,backendName:"cpu",kernelFunc:UVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HL=jr((t,e)=>t*e),WVe=GL((t,e,n,r)=>({real:t*n-e*r,imag:t*r+e*n})),W5=fi(Sx,HL,WVe),GVe={kernelName:Sx,backendName:"cpu",kernelFunc:W5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xse(t,e,n){const r=wh(-1,n);return HL([],e,r,t,n)}function qVe(t){const{inputs:e,backend:n}=t,{x:r}=e;it(r,"neg");const i=n.data.get(r.dataId).values,[s,o]=xse(i,r.shape,r.dtype);return n.makeTensorInfo(o,r.dtype,s)}const HVe={kernelName:QN,backendName:"cpu",kernelFunc:qVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bse=jr((t,e)=>t!==e?1:0),KVe=fi(e5,bse,null,"bool"),XVe={kernelName:e5,backendName:"cpu",kernelFunc:KVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KL(t,e,n,r,i){const s=e.length,o=$e(e),a=wt(e),l=wt(i),c=ss(n,$e(i));for(let u=0;u<o;++u){const d=o0(u,s,a),h=new Array(d.length);for(let p=0;p<h.length;p++)h[p]=d[r[p]];const f=gc(h,s,l);c[f]=t[u]}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qs(t){const{inputs:e,attrs:n,backend:r}=t,{x:i}=e,{perm:s}=n;it(i,"transpose");const o=i.shape.length,a=new Array(o);for(let d=0;d<a.length;d++)a[d]=i.shape[s[d]];const l=r.data.get(i.dataId).values,c=KL(l,i.shape,i.dtype,s,a);return{dataId:r.write(c,a,i.dtype),shape:a,dtype:i.dtype}}const YVe={kernelName:Km,backendName:"cpu",kernelFunc:Qs};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wse(t,e,n,r){const[i,s]=Pi(t,r),o=bo(e,"int32"),a=os($e(i),o),l=$e(s);for(let c=0;c<a.length;++c){const u=c*l;let d=1;for(let h=0;h<l;++h)d*=n[u+h];a[c]=d}return{outVals:a,outShape:i,outDtype:o}}function ZVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r;it(i,"prod");const a=i.shape.length,l=Yt(s,i.shape),c=yr(l,a);let u=l,d=i;const h=[];c!=null&&(d=Qs({inputs:{x:i},backend:n,attrs:{perm:c}}),h.push(d),u=Mr(u.length,a));const f=n.data.get(d.dataId).values,{outVals:p,outShape:m,outDtype:y}=wse(d.shape,d.dtype,f,u);let g=m;return o&&(g=Dr(m,l)),h.forEach(v=>n.disposeIntermediateTensorInfo(v)),n.makeTensorInfo(g,y,p)}const JVe={kernelName:o5,backendName:"cpu",kernelFunc:ZVe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QVe(t,e,n){t.forEach((r,i)=>{if(r<0||r>=n){const s=o0(i,e.length,wt(e)).join(",");throw new Error(`indices[${s}] = ${r} is not in [0, ${n})`)}})}function eWe(t,e){for(let n=0;n<t.length;++n){const r=t[n],i=n===t.length-1?e:t[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>i)throw new Error("Ragged splits must not point past values");for(let s=1;s<r.length;++s)if(r[s-1]>r[s])throw new Error("Ragged splits must be sorted in ascending order")}}function tWe(t,e,n,r){const i=[];let s=0;const o=e.length-1+n.length,a=new Array(o).fill(null).map(()=>[0]);eWe(n,r);let l=1;for(let c=0;c<e.length-1;++c){l*=e[c];const u=e[c+1];for(let d=1;d<l+1;++d)a[c].push(d*u)}for(let c=0;c<t.length;++c){let u=t[c],d=t[c]+1;for(let h=0;h<n.length;++h){const f=n[h],p=h+e.length-1;if(p>=0){const m=a[p],y=m[m.length-1]-f[u];for(let g=u;g<d;++g)a[p].push(f[g+1]+y)}u=f[u],d=f[d]}d!==u&&(i.push([u,d]),s+=d-u)}return{outSplits:a,valueSlices:i,numValues:s}}function nWe(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n].length,i=Rr("int32",r);e.push(i),t[n].forEach((s,o)=>i[o]=s)}return e}function rV(t,e){const n=t.slice(0,e);for(;n.length<e;)n.push(1);for(let r=e;r<t.length;r++)n[e-1]*=t[r];return n}function rWe(t,e,n,r,i,s){const o=rV(e,2)[1],a=rV(s,2)[1];let l=0;for(const c of n)for(let u=c[0];u<c[1];++u){for(let d=0;d<r;++d)i[l*a+d]=t[u*o+d];++l}}function iWe(t,e,n,r,i){const s=e.slice();s[0]=i;const o=Rr(n,$e(s)),a=t.length,l=a===0?0:a/e[0];return rWe(t,e,r,l,o,s),[o,s]}function kse(t,e,n,r,i,s,o,a){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const l=e[0][0]-1;if(QVe(s,o,l),r.length===0)throw new Error("params.rank must be nonzero");const c=r[0],{outSplits:u,valueSlices:d,numValues:h}=tWe(s,o,t,c),f=nWe(u),p=iWe(n,r,i,d,h);return[f,p[0],p[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iV=2147483647;function Sse(t,e,n,r,i,s,o){if(e.length>1)throw new Error("starts must be a scalar or vector");if(i.length>1)throw new Error("limits must be a scalar or vector");if(o.length>1)throw new Error("deltas must be a scalar or vector");const a=e.length===0,l=i.length===0,c=o.length===0,u=[];a||u.push(e[0]),l||u.push(i[0]),c||u.push(o[0]);for(let y=1;y<u.length;++y)if(u[y]!==u[y-1])throw new Error("starts, limits, and deltas must have the same shape");const d=u.length===0?1:u[0],h=Rr("int32",d+1);h[0]=0;for(let y=0;y<d;++y){const g=a?t[0]:t[y],v=l?r[0]:r[y],x=c?s[0]:s[y];if(x===0)throw new Error("Requires delta != 0");let b;if(x>0&&v<g||x<0&&v>g)b=0;else if(b=Math.ceil(Math.abs((v-g)/x)),b>iV)throw new Error(`Requires ((limit - start) / delta) <= ${iV}`);h[y+1]=h[y]+b}const f=h[d],p=Rr(n,f);let m=0;for(let y=0;y<d;++y){const g=h[y+1]-h[y];let v=a?t[0]:t[y];const x=c?s[0]:s[y];for(let b=0;b<g;++b)p[m++]=v,v+=x}return[h,p]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var va=yl;class RS{constructor(e,n,r,i,s,o,a,l,c,u){this.shape=e,this.shapeShape=n,this.values=r,this.valuesShape=i,this.valuesDType=s,this.defaultValue=o,this.defaultValueShape=a,this.rowPartitionValues=l,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=cne(u),this.raggedRank=une(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===va.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===va.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const n=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case va.VALUE_ROWIDS:return RS.getMaxWidthValueRowID(n);case va.ROW_SPLITS:return RS.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${va[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const n=e.length;if(n===0||n===1)return 0;let r=0;for(let i=0;i<n-1;++i){const s=e[i+1]-e[i];s>r&&(r=s)}return r}static getMaxWidthValueRowID(e){const n=e.length;if(n===0)return 0;let r=0,i=e[0],s=0;for(let o=1;o<n;++o){const a=e[o];a!==i&&(i=a,s=Math.max(o-r,s),r=o)}return Math.max(n-r,s)}tensorShapeFromTensor(e,n,r=!0){if(n.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return oV(e,r)}calculateOutputSize(e){const n=this.valuesShape,r=this.defaultValueShape;dne(r,n);const i=this.tensorShapeFromTensor(this.shape,this.shapeShape),o=lne(this.raggedRank,i,n);o[0]<0&&(o[0]=e);for(let a=1;a<=this.raggedRank;++a)o[a]<0&&(o[a]=this.getMaxWidth(a));return o}calculateFirstParentOutputIndex(e,n,r){const i=Math.min(e,r),s=[];let o=0;for(let a=0;a<i;++a,o+=n)s.push(o);for(let a=i;a<e;++a)s.push(-1);return Z(s.length===e,()=>"Final length of result must be equal to firstDimension."),s}calculateOutputIndexRowSplit(e,n,r,i){const s=e.length,o=[];for(let a=0;a<s-1;++a){const l=e[a+1]-e[a];let c=Math.min(i,l),u=n[a];u===-1&&(c=0);for(let d=0;d<c;++d)o.push(u),u+=r;for(let d=0;d<l-c;++d)o.push(-1)}if(s>0&&o.length!==e[s-1])throw new Error("Invalid row split size.");return o}calculateOutputIndexValueRowID(e,n,r,i){const s=e.length,o=[];if(s===0)return[];let a=0,l=e[0];if(l>=n.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${n.length}`);let c=n[l];o.push(c);for(let u=1;u<s;++u){const d=e[u];if(d===l)c>=0&&(++a,a<i?c+=r:c=-1);else{if(a=0,l=d,d>=n.length)throw new Error(`Got nextValueRowId=${d} which is not less than ${n.length}`);c=n[d]}o.push(c)}if(o.length!==e.length)throw new Error("Invalid row ids.");return o}calculateOutputIndex(e,n,r,i){const s=this.getRowPartitionTensor(e),o=this.getRowPartitionTypeByDimension(e);switch(o){case va.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(s,n,r,i);case va.ROW_SPLITS:if(s.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${s.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(s,n,r,i);default:throw new Error(`Unsupported partition type: ${va[o]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case va.FIRST_DIM_SIZE:return e[0];case va.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case va.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${va[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const n=this.getFirstDimensionSize(),r=this.calculateOutputSize(n),i=new Array(this.raggedRank+1);i[i.length-1]=1;for(let l=i.length-2;l>=0;--l)i[l]=i[l+1]*r[l+1];const s=oV(r,!1),o=Rr(this.valuesDType,$e(s));if(i[0]*r[0]>0){let l=this.calculateFirstParentOutputIndex(n,i[0],r[0]);for(let c=1;c<=this.raggedRank;++c)l=this.calculateOutputIndex(c-1,l,i[c],r[c]);this.setOutput(this.raggedRank,l,o,s)}return[s,o]}setOutput(e,n,r,i){if(r.length===0)return;const s=this.values,o=r;let a=i.slice();a=a.slice(e+1);const l=$e(a),c=n.length;let u=this.defaultValue;if(u.length!==l&&u.length!==1){const p=this.defaultValueShape;Ne(()=>{const m=be(u,p);u=a1(m,a).dataSync()})}let d=0,h=0,f=0;for(let p=0;p<=c;++p){let m=p<c?n[p]:-1;if(m===f){++f;continue}if(h<f){const y=s.subarray(d*l),g=o.subarray(h*l),v=(f-h)*l;sV(g,y,v)}if(p>=c){const y=r.length;m=Math.floor(y/l)}if(m>f)if(this.defaultValue.length===1)o.subarray(f*l,m*l).fill(this.defaultValue[0]),f=m;else for(;m>f;){const y=o.slice(f*l);sV(y,u,l),++f}m<0?(d=p+1,h=f):(d=p,h=f,f=h+1)}}}function sV(t,e,n){for(let r=0;r<n;r++)t[r]=e[r]}function oV(t,e){const n=[];for(let r of t){if(r<0){if(!e)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function Cse(t,e,n,r,i,s,o,a,l,c){return new RS(t,e,n,r,i,s,o,a,l,c).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nse(t,e,n,r){const i=t===e,s=t<e&&n<0,o=e<t&&n>1;if(i||s||o)return os(0,r);const a=Math.abs(Math.ceil((e-t)/n)),l=os(a,r);e<t&&n===1&&(n=-1),l[0]=t;for(let c=1;c<l.length;c++)l[c]=l[c-1]+n;return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ase=Tc(t=>1/Math.sqrt(t)),sWe=Ih(Ex,Ase),oWe={kernelName:Ex,backendName:"cpu",kernelFunc:sWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tf(t,e,n,r,i,s,o,a,l,c){const u=[r/i,i],d=t.values,h=e.values;if(r===0)return Xt(n,e.dtype);const f=l instanceof zi?l:Xt(u,e.dtype);typeof l=="string"||typeof l=="number"?f.values.fill(l):typeof l=="boolean"&&f.values.fill(+l);for(let p=0;p<s;p++){const m=[];let y=0;for(let g=0;g<o;g++){const v=d[p*o+g];m.push(v),y+=v*a[g]}if(y<0||y>=r/i)throw new Error(`Invalid indices: ${m} does not index into ${n}`);for(let g=0;g<i;g++)c?f.values[y*i+g]+=h[p*i+g]:f.values[y*i+g]=e.rank===0?h[0]:h[p*i+g]}return f}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aWe=Tc(t=>1/(1+Math.exp(-t))),Ise=Nn(Ox,t=>1/(1+Math.exp(-t))),lWe={kernelName:Ox,backendName:"cpu",kernelFunc:Ise};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _se(t,e,n,r,i){const s=eL(r,e,n),o=$e(n),a=wt(r);if(s){const d=tL(e,a);return i==="string"?t.slice(d,d+o):t.subarray(d,d+o)}const l=i==="string"?Eu(t):t,c=Xt(r,i,l),u=Xt(n,i);for(let d=0;d<u.size;++d){const h=u.indexToLoc(d),f=h.map((p,m)=>p+e[m]);u.set(c.get(...f),...h)}return i==="string"?$ne(u.values):u.values}function xp(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:s,size:o}=r;it(i,"slice");const[a,l]=E5(i,s,o);JD(i,a,l);const c=n.data.get(i.dataId).values,u=_se(c,a,l,i.shape,i.dtype);return n.makeTensorInfo(l,i.dtype,u)}const cWe={kernelName:h5,backendName:"cpu",kernelFunc:xp};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ese(t,e,n,r,i,s,o){const a=e[0],l=s[0],c=new Array(l),u=new Array(a),d=e[1];if(l===0){if(a!==0)throw new Error(vne(a));const y=Rr(n,0),g=Rr(i,0);return[y,[0,d],g,c,u]}let h=!0,f=0;const p=new Array(l).fill(0);for(let y=0;y<a;++y){const g=t[y*d];if(g<0)throw new Error(xne(y,g));if(g>=l)throw new Error(bne(y,g,l));++p[g],h=h&&g>=f,f=g}let m=!0;for(let y=0;y<l;++y){const g=p[y]===0;c[y]=g,m=m&&!g,p[y]=Math.max(p[y],1),y>0&&(p[y]+=p[y-1])}if(m&&h){const y=t,g=r;for(let v=0;v<a;++v)u[v]=v;return[y,[a,d],g,c,u]}else{const y=p[l-1],g=Rr(n,y*d),v=Rr(i,y),x=new Array(l).fill(0);for(let b=0;b<a;++b){const S=t[b*d],A=x[S],E=(S===0?0:p[S-1])+A;x[S]++;for(let I=0;I<d;++I)g[E*d+I]=t[b*d+I];v[E]=r[b],u[b]=E}for(let b=0;b<l;++b)if(x[b]===0){const A=b===0?0:p[b-1];g[A*d+0]=b;for(let E=1;E<d;++E)g[A*d+E]=0;v[A]=o}return[g,[y,d],v,c,u]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tse(t,e,n,r,i){const s=$e(r),o=e[0],a=i.length,l=[];let c=1,u=-1;for(let y=0;y<a;++y){const g=i[y];if(g===-1){if(u!==-1)throw new Error(wne(u,y));u=y,l.push(1)}else{if(g<0)throw new Error(kne(y,g));c*=g,l.push(g)}}if(u!==-1){if(c<=0)throw new Error(Sne());const y=Math.trunc(s/c);if(c*y!==s)throw new Error(Cne(r,l));l[u]=y}if($e(l)!==s)throw new Error(Nne(r,l));const h=r.length,f=[];if(h>0){f[h-1]=1;for(let y=h-2;y>=0;--y)f[y]=f[y+1]*r[y+1]}const p=[];if(a>0){p[a-1]=1;for(let y=a-2;y>=0;--y)p[y]=p[y+1]*l[y+1]}const m=Rr(n,o*a);for(let y=0;y<o;++y){let g=0;for(let v=0;v<h;++v)g+=t[y*h+v]*f[v];for(let v=0;v<a;++v)m[y*a+v]=Math.trunc(g/p[v]),g%=p[v]}return[m,[o,a],l]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XL(t,e,n,r,i,s=!1,o=0){const a=r.length,l=[e[0],t.length/e[0]],c=l[1],d=a>0?i[a-1]+1:0;if(d<0)throw new Error(H3());const h=e.slice();h[0]=d;const f=h.reduce((x,b)=>x*b,1),p=Rr(n,f);if(a===0)return d>0&&p.fill(o),[p,h];if(d<=0)throw new Error(H3());let m=0,y=1,g=0,v=i[m];for(;;){let x=0;if(y<a){if(x=i[y],v===x){++y;continue}if(v>=x)throw new Error(Ane())}if(v<0||v>=d)throw new Error(Ine(v,d));v>g&&p.fill(o,g*c,v*c);for(let b=m;b<y;++b){const S=r[b];if(S<0||S>=l[0])throw new Error(_ne(b,r[b],l[0]));for(let A=0;A<c;A++)p[v*c+A]+=t[S*c+A]}if(s)for(let b=0;b<c;b++)p[v*c+b]/=y-m;if(m=y,++y,g=v+1,v=x,y>a)break}return g<d&&p.fill(o,g*c,d*c),[p,h]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uWe=Tc(t=>Math.sqrt(t)),dWe=Nn(Lx,t=>Math.sqrt(t)),hWe={kernelName:Lx,backendName:"cpu",kernelFunc:dWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $se=jr((t,e)=>{const n=t-e;return n*n}),fWe=fi(Mx,$se),pWe={kernelName:Mx,backendName:"cpu",kernelFunc:fWe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pse=Tc((t,e)=>{const{pattern:n,replaceGlobal:r,rewrite:i}=e;return t.replace(new RegExp(n,r?"g":""),i)}),mWe=Ih(iD,Pse),gWe={kernelName:iD,backendName:"cpu",kernelFunc:mWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rse(t,e,n,r){const i=Xt(t,e.dtype);for(let s=0;s<i.size;s++){const o=i.indexToLoc(s),a=new Array(o.length);for(let l=0;l<a.length;l++)a[l]=o[l]*n[l]+r[l];i.set(e.get(...a),...o)}return i}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yWe{constructor(e,n,r,i,s,o){this.separator=Gd(e),this.nGramWidths=n,this.leftPad=Gd(r),this.rightPad=Gd(i),this.padWidth=s,this.preserveShort=o}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){const r=this.getPadWidth(n);return Math.max(0,e+2*r-n+1)}createNGrams(e,n,r,i,s,o){for(let a=0;a<s;++a){const l=this.getPadWidth(o),c=Math.max(0,l-a),u=Math.max(0,l-(s-(a+1))),d=o-(c+u),h=n+(c>0?0:a-l);let f=0;f+=c*this.leftPad.length;for(let v=0;v<d;++v)f+=e[h+v].length;f+=u*this.rightPad.length;const p=c+u+d-1;f+=p*this.separator.length,r[i+a]=new Uint8Array(f);const m=r[i+a];let y=0;const g=v=>v.forEach(x=>m[y++]=x);for(let v=0;v<c;++v)g(this.leftPad),g(this.separator);for(let v=0;v<d-1;++v)g(e[h+v]),g(this.separator);if(d>0){g(e[h+d-1]);for(let v=0;v<u;++v)g(this.separator),g(this.rightPad)}else{for(let v=0;v<u-1;++v)g(this.rightPad),g(this.separator);g(this.rightPad)}}}compute(e,n){const r=e.length,i=n.length;if(i>0){let l=n[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let c=1;c<i;++c){let u=n[c]>=l;if(u=u&&n[c]<=r,!u)throw new Error(`Invalid split value ${n[c]}, must be in [${l}, ${r}]`);l=n[c]}if(l!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${l}`)}const s=i-1,o=Rr("int32",i);if(r===0||i===0){const l=new Array(r);for(let c=0;c<=s;++c)o[c]=0;return[l,o]}o[0]=0;for(let l=1;l<=s;++l){const c=n[l]-n[l-1];let u=0;this.nGramWidths.forEach(d=>{u+=this.getNumNGrams(c,d)}),this.preserveShort&&c>0&&u===0&&(u=1),o[l]=o[l-1]+u}const a=new Array(o[s]);for(let l=0;l<s;++l){const c=n[l];let u=o[l];if(this.nGramWidths.forEach(d=>{const h=n[l+1]-n[l],f=this.getNumNGrams(h,d);this.createNGrams(e,c,a,u,f,d),u+=f}),this.preserveShort&&u===o[l]){const d=n[l+1]-n[l];if(d===0)continue;const h=d+2*this.padWidth,f=1;this.createNGrams(e,c,a,u,f,h)}}return[a,o]}}function Ose(t,e,n,r,i,s,o,a){return new yWe(n,r,i,s,o,a).compute(t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vWe(t,e,n,r){if(!t.length)return;if(e.length===0){for(let s=0;s<t.length;++s)r.push(t.subarray(s,s+1));return}if(e.length===1){const s=e[0];let o=t.indexOf(s);for(;o!==-1;){const a=t.subarray(0,o);(!n||a.length!==0)&&r.push(a),t=t.subarray(o+1),o=t.indexOf(s)}(!n||t.length!==0)&&r.push(t);return}let i=0;for(let s=0;s<t.length+1;s++)if(s===t.length||e.indexOf(t[s])!==-1){const o=t.subarray(i,s);(!n||o.length!==0)&&r.push(o),i=s+1}}function Dse(t,e,n){const r=t.length,i=[];let s=0,o=0;const a=new Array(r);for(let h=0;h<r;++h){const f=i.length;vWe(t[h],e,n,i);const p=i.length-f;a[h]=p,s+=p,o=Math.max(o,p)}const l=Rr("int32",s*2),c=new Array(s),u=[r,o];let d=0;for(let h=0;h<r;++h)for(let f=0;f<a[h];++f)l[d*2]=h,l[d*2+1]=f,c[d]=i[d],++d;return[l,c,u]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lse(t,e){const n=Rr("int32",t.length);for(let r=0;r<t.length;++r)n[r]=RDe(t[r]).modulo(e).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mse=jr((t,e)=>t-e),xWe=GL((t,e,n,r)=>({real:t-n,imag:e-r})),YL=fi(Fx,Mse,xWe),bWe={kernelName:Fx,backendName:"cpu",kernelFunc:YL};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fse(t,e){const n=new Array(t.rank);for(let i=0;i<n.length;i++)n[i]=t.shape[i]*e[i];const r=Xt(n,t.dtype);for(let i=0;i<r.values.length;++i){const s=r.indexToLoc(i),o=new Array(t.rank);for(let l=0;l<o.length;l++)o[l]=s[l]%t.shape[l];const a=t.locToIndex(o);r.values[i]=t.values[a]}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fy=(t,e)=>{const n=e.value-t.value;return n===0?t.index-e.index:n};function jse(t,e,n=0,r=t.length-1){for(;r>n;){if(r-n>600){const a=r-n+1,l=e-n+1,c=Math.log(a),u=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*u*(a-u)/a)*Math.sign(l-a/2),h=Math.max(n,Math.floor(e-l*u/a+d)),f=Math.min(r,Math.floor(e+(a-l)*u/a+d));jse(t,e,h,f)}const i=t[e];let s=n,o=r;for(um(t,n,e),Fy(t[r],i)>0&&um(t,n,r);s<o;){for(um(t,s,o),s++,o--;Fy(t[s],i)<0;)s=s+1;for(;Fy(t[o],i)>0;)o=o-1}Fy(t[n],i)===0?um(t,n,o):(o=o+1,um(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}}function Bse(t,e,n,r,i){const s=e[e.length-1],[o,a]=[t.length/s,s],l=ss(n,o*r),c=ss("int32",o*r);for(let d=0;d<o;d++){const h=d*a,f=t.subarray(h,h+a);let p=new Array(f.length);f.forEach((v,x)=>p[x]={value:v,index:x}),r<p.length&&(jse(p,r),p=p.slice(0,r)),i&&p.sort(Fy);const m=d*r,y=l.subarray(m,m+r),g=c.subarray(m,m+r);for(let v=0;v<r;v++)y[v]=p[v].value,g[v]=p[v].index}const u=e.slice();return u[u.length-1]=r,[Xt(u,n,l),Xt(u,"int32",c)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zse(t,e,n,r){const i=Yt(e,n)[0],s=[1,n[0],1];for(let p=0;p<i;p++)s[0]*=n[p];s[1]=n[i];for(let p=i+1;p<n.length;p++)s[2]*=n[p];const o=new Map,a=new Int32Array(n[i]),l=new zi(s,r,t),c=[],u=s[0]===1&&s[2]===1;for(let p=0;p<n[i];p++){let m;if(u)m=t[p].toString();else{const g=[];for(let v=0;v<s[0];v++)for(let x=0;x<s[2];x++)g.push(l.get(v,p,x));m=g.join(",")}const y=o.get(m);if(y!=null)a[p]=y;else{const g=o.size;o.set(m,g),a[p]=g,c.push(p)}}const d=s.slice();d[1]=o.size;const h=new zi(d,r);c.forEach((p,m)=>{for(let y=0;y<s[0];y++)for(let g=0;g<s[2];g++)h.set(l.get(y,p,g),y,m,g)});const f=n.slice();return f[i]=d[1],{outputValues:h.values,outputShape:f,indices:a}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wWe=Object.freeze(Object.defineProperty({__proto__:null,addImpl:Yie,bincountImpl:qL,bincountReduceImpl:Zie,bitwiseAndImpl:Jie,castImpl:Xie,ceilImpl:Qie,concatImpl:ese,equalImpl:tse,expImpl:rse,expm1Impl:sse,floorDivImpl:ase,floorImpl:ose,gatherNdImpl:lse,gatherV2Impl:cse,greaterEqualImpl:dse,greaterImpl:use,lessEqualImpl:fse,lessImpl:hse,linSpaceImpl:pse,logImpl:mse,maxImpl:gse,maximumImpl:yse,minimumImpl:vse,multiplyImpl:HL,negImpl:xse,notEqualImpl:bse,prodImpl:wse,raggedGatherImpl:kse,raggedRangeImpl:Sse,raggedTensorToTensorImpl:Cse,rangeImpl:Nse,rsqrtImpl:Ase,scatterImpl:Tf,sigmoidImpl:aWe,simpleAbsImpl:Kie,sliceImpl:_se,sparseFillEmptyRowsImpl:Ese,sparseReshapeImpl:Tse,sparseSegmentReductionImpl:XL,sqrtImpl:uWe,squaredDifferenceImpl:$se,staticRegexReplaceImpl:Pse,stridedSliceImpl:Rse,stringNGramsImpl:Ose,stringSplitImpl:Dse,stringToHashBucketFastImpl:Lse,subImpl:Mse,tileImpl:Fse,topKImpl:Bse,transposeImpl:KL,uniqueImpl:zse},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ate("cpu",()=>new V5,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Use=Nn(ax,t=>t>=0?t:Math.exp(t)-1),kWe={kernelName:ax,backendName:"cpu",kernelFunc:Use};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vse(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{alpha:s}=r;it([i],"leakyRelu");const o=$e(i.shape),a=n.data.get(i.dataId).values,l=ss("float32",o);for(let c=0;c<a.length;c++)l[c]=a[c]<0?s*a[c]:a[c];return n.makeTensorInfo(i.shape,"float32",l)}const SWe={kernelName:BN,backendName:"cpu",kernelFunc:Vse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CWe=jr((t,e)=>t<0?e*t:t);function Wse(t){const{inputs:e,backend:n}=t,{x:r,alpha:i}=e;it([r,i],"prelu");const s=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,[a,l]=CWe(r.shape,i.shape,s,o,"float32");return n.makeTensorInfo(l,"float32",a)}const NWe={kernelName:s5,backendName:"cpu",kernelFunc:Wse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gse=Nn(Ax,t=>Math.max(0,t)),AWe={kernelName:Ax,backendName:"cpu",kernelFunc:Gse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qse=Nn(Ix,t=>Math.min(Math.max(0,t),6)),IWe={kernelName:Ix,backendName:"cpu",kernelFunc:qse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OS(t,e,n,r,i){if(n==="linear")return Ac({inputs:{x:e},backend:t});if(n==="relu")return Gse({inputs:{x:e},backend:t});if(n==="elu")return Use({inputs:{x:e},backend:t});if(n==="relu6")return qse({inputs:{x:e},backend:t});if(n==="prelu")return Wse({inputs:{x:e,alpha:r},backend:t});if(n==="leakyrelu")return Vse({inputs:{x:e},backend:t,attrs:{alpha:i}});if(n==="sigmoid")return Ise({inputs:{x:e},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wn(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{shape:s}=r,o=$e(i.shape),a=hee(s,o),l=$e(a);Z(o===l,()=>`The new shape (${a}) has ${l} elements and the old shape (${i.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`),n.incRef(i.dataId);const c=n.data.get(i.dataId);if(c.complexTensorInfos!=null){const u=c.complexTensorInfos.real,d=c.complexTensorInfos.imag;u.shape=a,d.shape=a}return{dataId:i.dataId,shape:a,dtype:i.dtype}}const _We={kernelName:a5,backendName:"cpu",kernelFunc:Wn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hse(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:s}=e,{transposeA:o,transposeB:a}=r;it([i,s],"matMul");const l=i.shape.length,c=s.shape.length,u=o?i.shape[l-2]:i.shape[l-1],d=a?s.shape[c-1]:s.shape[c-2],h=o?i.shape[l-1]:i.shape[l-2],f=a?s.shape[c-2]:s.shape[c-1],p=i.shape.slice(0,-2),m=s.shape.slice(0,-2),y=$e(p),g=$e(m),x=Ut(i.shape.slice(0,-2),s.shape.slice(0,-2)).concat([h,f]);Z(u===d,()=>`Error in matMul: inner shapes (${u}) and (${d}) of Tensors with shapes ${i.shape} and ${s.shape} and transposeA=${o} and transposeB=${a} must match.`);const b=o?[y,u,h]:[y,h,u],S=a?[g,f,d]:[g,d,f],A=Wn({inputs:{x:i},backend:n,attrs:{shape:b}}),E=Wn({inputs:{x:s},backend:n,attrs:{shape:S}}),I=o?A.shape[1]:A.shape[2],T=o?A.shape[2]:A.shape[1],O=a?E.shape[1]:E.shape[2],$=Math.max(y,g),R=n.data.get(A.dataId).values,F=n.data.get(E.dataId).values,L=wt(A.shape),U=wt(E.shape),[q,K,j]=o?[L[0],1,L[1]]:[L[0],L[1],1],[Y,ae,le]=a?[1,U[1],U[0]]:[U[1],1,U[0]],M=T*O,V=Xt([$,T,O],A.dtype),H=V.values,J=n.blockSize;for(let oe=0;oe<$;oe++){const ce=oe%y,ge=oe%g;for(let ee=0;ee<T;ee+=J){const fe=Math.min(ee+J,T);for(let Se=0;Se<O;Se+=J){const me=Math.min(Se+J,O);for(let Le=0;Le<I;Le+=J){const we=Math.min(Le+J,I);for(let te=ee;te<fe;te++)for(let He=Se;He<me;He++){let Ze=0;for(let Ge=Le;Ge<we;Ge++){const Be=R[ce*q+te*K+Ge*j],Je=F[Ge*Y+He*ae+ge*le];Ze+=Be*Je}H[oe*M+(te*O+He)]+=Ze}}}}}return n.disposeIntermediateTensorInfo(A),n.disposeIntermediateTensorInfo(E),n.makeTensorInfo(x,V.dtype,V.values)}const EWe={kernelName:NN,backendName:"cpu",kernelFunc:Hse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TWe(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:s,bias:o,preluActivationWeights:a}=e,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:d}=r;let h,f,p;const m=[];h=Hse({inputs:{a:i,b:s},attrs:{transposeA:l,transposeB:c},backend:n}),o&&(f=Ag({inputs:{a:h,b:o},backend:n}),m.push(h),h=f),u&&(p=OS(n,h,u,a,d),m.push(h),h=p);for(const g of m)n.disposeIntermediateTensorInfo(g);return h}const $We={kernelName:pS,backendName:"cpu",kernelFunc:TWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PWe=Nn(Kv,t=>Math.acos(t)),RWe={kernelName:Kv,backendName:"cpu",kernelFunc:PWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OWe=Nn(Xv,t=>Math.acosh(t)),DWe={kernelName:Xv,backendName:"cpu",kernelFunc:OWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LWe(t){const{inputs:e,backend:n}=t,r=e;it(e,"addN");const i=r.map(a=>n.data.get(a.dataId).values),s=Xt(r[0].shape,r[0].dtype),o=s.values;for(let a=0;a<r.length;a++){const l=i[a];for(let c=0;c<o.length;c++)o[c]+=l[c]}return n.makeTensorInfo(s.shape,s.dtype,s.values)}const MWe={kernelName:SO,backendName:"cpu",kernelFunc:LWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r;it(i,"all");const a=Yt(s,i.shape);let l=a;const c=yr(l,i.shape.length);let u=i;c!=null&&(u=Qs({inputs:{x:i},backend:n,attrs:{perm:c}}),l=Mr(l.length,i.shape.length)),Wi("all",l,u.shape.length);const[d,h]=Pi(u.shape,l),f=$e(h),p=os($e(d),u.dtype),m=n.data.get(u.dataId).values;for(let g=0;g<p.length;++g){const v=g*f;let x=m[v];for(let b=0;b<f;++b){const S=m[v+b];x=x&&S}p[g]=x}c!=null&&n.disposeIntermediateTensorInfo(u);const y=n.makeTensorInfo(d,u.dtype,p);if(o){const g=Dr(d,a),v=Wn({inputs:{x:y},backend:n,attrs:{shape:g}});return n.disposeIntermediateTensorInfo(y),v}return y}const jWe={kernelName:CO,backendName:"cpu",kernelFunc:FWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r;it(i,"any");const a=Yt(s,i.shape);let l=a;const c=yr(l,i.shape.length);let u=i;c!=null&&(u=Qs({inputs:{x:i},backend:n,attrs:{perm:c}}),l=Mr(l.length,i.shape.length)),Wi("any",l,u.shape.length);const[d,h]=Pi(u.shape,l),f=$e(h),p=os($e(d),u.dtype),m=n.data.get(u.dataId).values;for(let g=0;g<p.length;++g){const v=g*f;let x=m[v];for(let b=0;b<f;++b){const S=m[v+b];x=x||S}p[g]=x}c!=null&&n.disposeIntermediateTensorInfo(u);const y=n.makeTensorInfo(d,u.dtype,p);if(o){const g=Dr(d,a),v=Wn({inputs:{x:y},backend:n,attrs:{shape:g}});return n.disposeIntermediateTensorInfo(y),v}return y}const zWe={kernelName:NO,backendName:"cpu",kernelFunc:BWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s}=r;it(i,"argMax");let o=Yt(s,i.shape);const a=yr(o,i.shape.length);let l=i;const c=[];a!=null&&(l=Qs({inputs:{x:i},backend:n,attrs:{perm:a}}),c.push(l),o=Mr(o.length,l.shape.length)),o=[o[0]],Wi("argMax",o,l.shape.length);const[u,d]=Pi(l.shape,o),h=$e(u),f=os(h,"int32"),p=$e(d),m=n.data.get(l.dataId).values;for(let y=0;y<f.length;++y){const g=y*p;let v=m[g],x=0;for(let b=0;b<p;++b){const S=m[g+b];S>v&&(v=S,x=b)}f[y]=x}return c.forEach(y=>n.disposeIntermediateTensorInfo(y)),n.makeTensorInfo(u,"int32",f)}const VWe={kernelName:wN,backendName:"cpu",kernelFunc:UWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s}=r;it(i,"argMin");let o=Yt(s,i.shape);const a=yr(o,i.shape.length);let l=i;const c=[];a!=null&&(l=Qs({inputs:{x:i},backend:n,attrs:{perm:a}}),c.push(l),o=Mr(o.length,l.shape.length)),o=[o[0]],Wi("argMin",o,l.shape.length);const[u,d]=Pi(l.shape,o),h=$e(u),f=os(h,"int32"),p=$e(d),m=n.data.get(l.dataId).values;for(let y=0;y<f.length;++y){const g=y*p;let v=m[g],x=0;for(let b=0;b<p;++b){const S=m[g+b];S<v&&(v=S,x=b)}f[y]=x}return c.forEach(y=>n.disposeIntermediateTensorInfo(y)),n.makeTensorInfo(u,"int32",f)}const GWe={kernelName:kN,backendName:"cpu",kernelFunc:WWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qWe=Nn(Yv,t=>Math.asin(t)),HWe={kernelName:Yv,backendName:"cpu",kernelFunc:qWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KWe=Nn(Zv,t=>Math.asinh(t)),XWe={kernelName:Zv,backendName:"cpu",kernelFunc:KWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YWe=Nn(Jv,t=>Math.atan(t)),ZWe={kernelName:Jv,backendName:"cpu",kernelFunc:YWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JWe=jr((t,e)=>Math.atan2(t,e)),QWe=fi(ex,JWe),e9e={kernelName:ex,backendName:"cpu",kernelFunc:QWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t9e=Nn(Qv,t=>Math.atanh(t)),n9e={kernelName:Qv,backendName:"cpu",kernelFunc:t9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZL(t,e,n,r,i,s){const o=i.strideHeight,a=i.strideWidth,l=i.dilationHeight,c=i.dilationWidth,u=i.effectiveFilterHeight,d=i.effectiveFilterWidth,h=i.padInfo.top,f=i.padInfo.left,p=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=Xt(i.outShape,n),y=m.values,g=i.outShape[1]*i.outShape[2]*i.outShape[3],v=i.outShape[2]*i.outShape[3],x=i.outShape[3];for(let b=0;b<i.batchSize;++b){const S=b*g,A=b*r[0];for(let E=0;E<i.inChannels;++E)for(let I=0;I<i.outHeight;++I){const T=I*o-h,O=Math.max(0,T),$=Math.min(i.inHeight,u+T),R=S+I*v;for(let F=0;F<i.outWidth;++F){const L=F*a-f,U=Math.max(0,L),q=Math.min(i.inWidth,d+L);let K=p,j=0,Y=0;for(let le=O;le<$;le+=l){const M=A+le*r[1];for(let V=U;V<q;V+=c){const H=M+V*r[2],J=t[H+E];s==="max"&&J>K?K=J:s==="avg"&&(j+=J,Y++)}if(isNaN(K))break}const ae=R+F*x+E;y[ae]=s==="avg"?j/Y:K}}}return m}function Kse(t,e,n,r,i=!1,s=!1){const o=Xt(r.outShape,"int32"),a=r.strideHeight,l=r.strideWidth,c=r.dilationHeight,u=r.dilationWidth,d=r.effectiveFilterHeight,h=r.effectiveFilterWidth,f=r.padInfo.top,p=r.padInfo.left,m=Xt(e,n,t);for(let y=0;y<r.batchSize;++y)for(let g=0;g<r.inChannels;++g)for(let v=0;v<r.outHeight;++v){const x=v*a-f;let b=x;for(;b<0;)b+=c;const S=Math.min(r.inHeight,d+x);for(let A=0;A<r.outWidth;++A){const E=A*l-p;let I=E;for(;I<0;)I+=u;const T=Math.min(r.inWidth,h+E);let O=Number.NEGATIVE_INFINITY,$=-1;for(let R=b;R<S;R+=c){const F=R-x;for(let L=I;L<T;L+=u){const U=L-E,q=m.get(y,R,L,g);q>O&&(O=q,i?$=s?((y*r.inHeight+R)*r.inWidth+L)*r.inChannels+g:(R*r.inWidth+L)*r.inChannels+g:$=F*h+U)}}o.set($,y,v,A,g)}}return o}function Xse(t,e,n,r,i,s){const o=i.strideDepth,a=i.strideHeight,l=i.strideWidth,c=i.dilationDepth,u=i.dilationHeight,d=i.dilationWidth,h=i.effectiveFilterDepth,f=i.effectiveFilterHeight,p=i.effectiveFilterWidth,m=i.padInfo.front,y=i.padInfo.top,g=i.padInfo.left,v=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,x=Xt(i.outShape,n),b=x.values,S=i.outShape[1]*i.outShape[2]*i.outShape[3]*i.outShape[4],A=i.outShape[2]*i.outShape[3]*i.outShape[4],E=i.outShape[3]*i.outShape[4],I=i.outShape[4];for(let T=0;T<i.batchSize;++T){const O=T*S,$=T*r[0];for(let R=0;R<i.inChannels;++R)for(let F=0;F<i.outDepth;++F){const L=F*o-m;let U=L;for(;U<0;)U+=c;const q=Math.min(i.inDepth,h+L),K=O+F*A;for(let j=0;j<i.outHeight;++j){const Y=j*a-y;let ae=Y;for(;ae<0;)ae+=u;const le=Math.min(i.inHeight,f+Y),M=K+j*E;for(let V=0;V<i.outWidth;++V){const H=V*l-g;let J=H;for(;J<0;)J+=d;const oe=Math.min(i.inWidth,p+H),ce=M+V*I;let ge=v,ee=0,fe=0;for(let me=U;me<q;me+=c){const Le=$+me*r[1];for(let we=ae;we<le;we+=u){const te=Le+we*r[2];for(let He=J;He<oe;He+=d){const Ze=te+He*r[3],Ge=t[Ze+R];if(s==="max"&&Ge>ge?ge=Ge:s==="avg"&&(ee+=Ge,fe++),isNaN(ge))break}if(isNaN(ge))break}if(isNaN(ge))break}const Se=ce+R;b[Se]=s==="avg"?ee/Math.max(fe,1):ge}}}}return x}function r9e(t,e){const n=Xt(e.outShape,"int32"),r=e.strideDepth,i=e.strideHeight,s=e.strideWidth,o=e.dilationDepth,a=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterDepth,u=e.effectiveFilterHeight,d=e.effectiveFilterWidth,h=e.padInfo.front,f=e.padInfo.top,p=e.padInfo.left;for(let m=0;m<e.batchSize;++m)for(let y=0;y<e.inChannels;++y)for(let g=0;g<e.outDepth;++g){const v=g*r-h;let x=v;for(;x<0;)x+=o;const b=Math.min(e.inDepth,c+v);for(let S=0;S<e.outHeight;++S){const A=S*i-f;let E=A;for(;E<0;)E+=a;const I=Math.min(e.inHeight,u+A);for(let T=0;T<e.outWidth;++T){const O=T*s-p;let $=O;for(;$<0;)$+=l;const R=Math.min(e.inWidth,d+O);let F=Number.NEGATIVE_INFINITY,L=-1;for(let U=x;U<b;U+=o){const q=U-v;for(let K=E;K<I;K+=a){const j=K-A;for(let Y=$;Y<R;Y+=l){const ae=Y-O,le=t.get(m,U,K,Y,y);le>=F&&(F=le,L=q*u*d+j*u+ae)}}}n.set(L,m,g,S,T,y)}}}return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i9e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;it(i,"avgPool");const{filterSize:s,strides:o,pad:a,dimRoundingMode:l}=r,c=1;Z(cs(o,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const u=Ya(i.shape,s,o,c,a,l);let d;if(u.filterWidth===1&&u.filterHeight===1&&xn(u.inShape,u.outShape))d=Ac({inputs:{x:i},backend:n});else{const h=n.data.get(i.dataId).values,f=wt(i.shape),p=ZL(h,i.shape,i.dtype,f,u,"avg");d=n.makeTensorInfo(u.outShape,i.dtype,p.values)}return d}const s9e={kernelName:SN,backendName:"cpu",kernelFunc:i9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o9e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:s,strides:o,pad:a,dimRoundingMode:l,dataFormat:c}=r;it(i,"avgPool3d");const u=Bu(i.shape,s,o,1,a,l,c),d=n.data.get(i.dataId).values,h=Xse(d,i.shape,i.dtype,wt(i.shape),u,"avg");return n.makeTensorInfo(h.shape,"float32",h.values)}const a9e={kernelName:CN,backendName:"cpu",kernelFunc:o9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l9e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,{filterSize:o,strides:a,pad:l,dimRoundingMode:c}=r;it([i,s],"avgPool3DGrad");const u=Bu(s.shape,o,a,1,l,c),d=u.strideDepth,h=u.strideHeight,f=u.strideWidth,p=u.filterDepth,m=u.filterHeight,y=u.filterWidth,g=u.dilationDepth,v=u.dilationHeight,x=u.dilationWidth,b=u.effectiveFilterDepth,S=u.effectiveFilterHeight,A=u.effectiveFilterWidth,E=b-1-u.padInfo.front,I=A-1-u.padInfo.left,T=S-1-u.padInfo.top,O=Xt(s.shape,"float32"),$=1/(p*m*y),R=n.bufferSync(i);for(let F=0;F<u.batchSize;++F)for(let L=0;L<u.inChannels;++L)for(let U=0;U<u.inDepth;++U)for(let q=0;q<u.inHeight;++q)for(let K=0;K<u.inWidth;++K){const j=U-E,Y=q-T,ae=K-I;let le=0;for(let M=0;M<b;M+=g){const V=(j+M)/d;if(!(V<0||V>=u.outDepth||Math.floor(V)!==V))for(let H=0;H<S;H+=v){const J=(Y+H)/h;if(!(J<0||J>=u.outHeight||Math.floor(J)!==J))for(let oe=0;oe<A;oe+=x){const ce=(ae+oe)/f;if(ce<0||ce>=u.outWidth||Math.floor(ce)!==ce)continue;const ge=R.get(F,V,J,ce,L);le+=ge}}}O.set(le*$,F,U,q,K,L)}return n.makeTensorInfo(O.shape,O.dtype,O.values)}const c9e={kernelName:IO,backendName:"cpu",kernelFunc:l9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u9e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,o=s;it([i,s],"avgPoolGrad");const{filterSize:a,strides:l,pad:c}=r,u=Ya(o.shape,a,l,1,c),d=u.strideHeight,h=u.strideWidth,f=u.filterHeight,p=u.filterWidth,m=u.dilationHeight,y=u.dilationWidth,g=u.effectiveFilterHeight,v=u.effectiveFilterWidth,x=v-1-u.padInfo.left,b=g-1-u.padInfo.top,S=Xt(o.shape,"float32"),A=1/(f*p),E=n.data.get(i.dataId).values,I=Xt(i.shape,"float32",E);for(let T=0;T<u.batchSize;++T)for(let O=0;O<u.inChannels;++O)for(let $=0;$<u.inHeight;++$)for(let R=0;R<u.inWidth;++R){const F=$-b,L=R-x;let U=0;for(let q=0;q<g;q+=m){const K=(F+q)/d;if(!(K<0||K>=u.outHeight||Math.floor(K)!==K))for(let j=0;j<v;j+=y){const Y=(L+j)/h;if(Y<0||Y>=u.outWidth||Math.floor(Y)!==Y)continue;const ae=I.get(T,K,Y,O);U+=ae}}S.set(U*A,T,$,R,O)}return n.makeTensorInfo(S.shape,S.dtype,S.values)}const d9e={kernelName:AO,backendName:"cpu",kernelFunc:u9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h9e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,scale:s,offset:o,mean:a,variance:l}=e;Z(a.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),Z(o==null||a.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),Z(s==null||a.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),it([i,a,l,s,o],"batchNorm");let{varianceEpsilon:c}=r;c==null&&(c=.001);const u=n.data.get(i.dataId).values,d=n.data.get(a.dataId).values,h=n.data.get(l.dataId).values,f=s?n.data.get(s.dataId).values:new Float32Array([1]),p=o?n.data.get(o.dataId).values:new Float32Array([0]),m=new Float32Array(u.length),y=p.length,g=f.length,v=h.length,x=d.length;let b=0,S=0,A=0,E=0;for(let I=0;I<u.length;++I)m[I]=p[b++]+(u[I]-d[S++])*f[A++]/Math.sqrt(h[E++]+c),b>=y&&(b=0),S>=x&&(S=0),A>=g&&(A=0),E>=v&&(E=0);return n.makeTensorInfo(i.shape,i.dtype,m)}const f9e={kernelName:MN,backendName:"cpu",kernelFunc:h9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p9e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:s,crops:o}=r;it([i],"batchToSpaceND");const a=s.reduce((g,v)=>g*v),l=Kx(i.shape,s,a),c=Xx(l.length,s.length),u=Yx(i.shape,s,a),d=oL(o,s.length),h=aL(u,o,s.length),f=Wn({inputs:{x:i},backend:n,attrs:{shape:l}}),p=Qs({inputs:{x:f},backend:n,attrs:{perm:c}}),m=Wn({inputs:{x:p},backend:n,attrs:{shape:u}}),y=xp({inputs:{x:m},backend:n,attrs:{begin:d,size:h}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),y}const m9e={kernelName:AN,backendName:"cpu",kernelFunc:p9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g9e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:s}=e,{size:o}=r,a=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values,c=qL(a,l,s.dtype,s.shape,o);return n.makeTensorInfo([o],s.dtype,c)}const y9e={kernelName:_O,backendName:"cpu",kernelFunc:g9e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v9e(t){const{inputs:e,backend:n}=t,{s0:r,s1:i}=e,s=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,a=Ut(Array.from(s),Array.from(o));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const x9e={kernelName:vee,backendName:"cpu",kernelFunc:v9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b9e=Nn(rx,(t,e)=>{const n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),w9e={kernelName:rx,backendName:"cpu",kernelFunc:b9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k9e=t=>{const{x:e}=t.inputs,n=t.backend,r=new Float32Array($e(e.shape)),i=n.data.get(e.dataId),s=i.complexTensorInfos.real,o=i.complexTensorInfos.imag,a=n.data.get(s.dataId).values,l=n.data.get(o.dataId).values;for(let c=0;c<a.length;c++){const u=a[c],d=l[c];r[c]=Math.hypot(u,d)}return n.makeOutput(r,e.shape,"float32")},S9e={kernelName:IN,backendName:"cpu",kernelFunc:k9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ig(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.data.get(r.dataId).complexTensorInfos.imag,s=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,s)}const C9e={kernelName:qO,backendName:"cpu",kernelFunc:Ig};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _g(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r,s=Yt(i,e[0].shape)[0],o=e.map(m=>m.shape);rL(o,s);let a=vc(e.map(m=>m.shape),s);if($e(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const l=e.filter(m=>$e(m.shape)>0);if(l.length===1)return Ac({inputs:{x:l[0]},backend:n});if(l[0].dtype==="complex64"){const m=l.map(b=>vp({inputs:{input:b},backend:n})),y=l.map(b=>Ig({inputs:{input:b},backend:n})),g=_g({inputs:m,backend:n,attrs:{axis:s}}),v=_g({inputs:y,backend:n,attrs:{axis:s}}),x=uo({inputs:{real:g,imag:v},backend:n});return m.forEach(b=>n.disposeIntermediateTensorInfo(b)),y.forEach(b=>n.disposeIntermediateTensorInfo(b)),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(v),x}const c=l.map(m=>{const g=[-1,$e(m.shape.slice(s))];return Wn({inputs:{x:m},backend:n,attrs:{shape:g}})}),u=c.map(m=>({vals:n.data.get(m.dataId).values,shape:m.shape}));a=vc(c.map(m=>m.shape),1);const d=c[0].shape[0]===1,h=ese(u,a,e[0].dtype,d),f=vc(l.map(m=>m.shape),s),p=n.makeTensorInfo(f,e[0].dtype,h);return c.forEach(m=>n.disposeIntermediateTensorInfo(m)),p}const N9e={kernelName:_N,backendName:"cpu",kernelFunc:_g};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yse(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:o,pad:a,dataFormat:l,dilations:c,dimRoundingMode:u}=r;it([i,s],"conv2d");const d=zu(l),h=Vi(i.shape,s.shape,o,c,a,u,!1,d),f=h.filterHeight,p=h.filterWidth,m=h.dilationHeight,y=h.dilationWidth,g=h.padInfo.left,v=h.padInfo.top,x=h.dataFormat==="channelsLast",b=new zi(h.outShape,i.dtype),S=wt(i.shape),A=wt(s.shape),E=S[0],I=x?S[1]:S[2],T=x?S[2]:1,O=x?1:S[1],$=b.strides[0],R=x?b.strides[1]:b.strides[2],F=x?b.strides[2]:1,L=x?1:b.strides[1],U=n.data.get(i.dataId).values,q=n.data.get(s.dataId).values,K=b.values;for(let j=0;j<h.batchSize;++j){const Y=j*E,ae=j*$;for(let le=0;le<h.outHeight;++le){const M=ae+le*R,V=le*h.strideHeight-v;for(let H=0;H<f;++H){const J=V+H*m;if(J<0||J>=h.inHeight)continue;const oe=H*A[0],ce=Y+J*I;for(let ge=0;ge<h.outWidth;++ge){const ee=M+ge*F,fe=ge*h.strideWidth-g;for(let Se=0;Se<p;++Se){const me=fe+Se*y;if(me<0||me>=h.inWidth)continue;const Le=oe+Se*A[1],we=ce+me*T;let te=Le;for(let He=0;He<h.inChannels;++He){const Ze=U[we+He*O];for(let Ge=0;Ge<h.outChannels;++Ge)K[ee+Ge*L]+=Ze*q[te+Ge];te+=h.outChannels}}}}}}return n.makeTensorInfo(b.shape,b.dtype,K)}const A9e={kernelName:EN,backendName:"cpu",kernelFunc:Yse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I9e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:o,pad:a,dataFormat:l,dimRoundingMode:c,filterShape:u}=r;it([i,s],"conv2dBackpropFilter");const d=zu(l),h=Vi(i.shape,u,o,1,a,c,!1,d),{strideHeight:f,strideWidth:p,filterHeight:m,filterWidth:y}=h,g=h.dataFormat==="channelsLast",v=new zi(h.filterShape,"float32"),x=h.padInfo.left,b=h.padInfo.top,S=n.data.get(i.dataId).values,A=n.data.get(s.dataId).values,E=new zi(i.shape,i.dtype,S),I=new zi(s.shape,s.dtype,A);for(let T=0;T<m;++T){const O=Math.max(0,Math.ceil((b-T)/f)),$=Math.min(h.outHeight,(h.inHeight+b-T)/f);for(let R=0;R<y;++R){const F=Math.max(0,Math.ceil((x-R)/p)),L=Math.min(h.outWidth,(h.inWidth+x-R)/p);for(let U=0;U<h.inChannels;++U)for(let q=0;q<h.outChannels;++q){let K=0;for(let j=0;j<h.batchSize;++j)for(let Y=O;Y<$;++Y){const ae=T+Y*f-b;for(let le=F;le<L;++le){const M=R+le*p-x;g?K+=E.get(j,ae,M,U)*I.get(j,Y,le,q):K+=E.get(j,U,ae,M)*I.get(j,q,Y,le)}}v.set(K,T,R,U,q)}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const _9e={kernelName:$O,backendName:"cpu",kernelFunc:I9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E9e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{inputShape:o,strides:a,pad:l,dataFormat:c,dimRoundingMode:u}=r;it([i,s],"conv2dBackpropInput");const d=wt(s.shape),h=wt(i.shape);let f=zu(c);const p=Vi(o,s.shape,a,1,l,u,!1,f),m=new zi(p.inShape,"float32"),y=m.values,g=n.data.get(i.dataId).values,v=n.data.get(s.dataId).values,[x,b,S]=d,{batchSize:A,filterHeight:E,filterWidth:I,inChannels:T,inHeight:O,inWidth:$,outChannels:R,outHeight:F,outWidth:L,strideHeight:U,strideWidth:q}=p;f=p.dataFormat;const K=E-1-p.padInfo.top,j=I-1-p.padInfo.left,Y=f==="channelsLast",ae=m.strides[0],le=Y?m.strides[1]:m.strides[2],M=Y?m.strides[2]:1,V=Y?1:m.strides[1],H=h[0],J=Y?h[1]:h[2],oe=Y?h[2]:1,ce=Y?1:h[1];for(let ge=0;ge<A;++ge)for(let ee=0;ee<T;++ee)for(let fe=0;fe<O;++fe){const Se=fe-K,me=Math.max(0,Math.ceil(Se/U)),Le=Math.min(F,(E+Se)/U);for(let we=0;we<$;++we){const te=we-j,He=Math.max(0,Math.ceil(te/q)),Ze=Math.min(L,(I+te)/q);let Ge=0;for(let Je=me;Je<Le;++Je){const We=Je*U-Se;for(let Ct=He;Ct<Ze;++Ct){const dt=Ct*q-te,Vt=H*ge+J*Je+oe*Ct,Nt=x*(E-1-We)+b*(I-1-dt)+S*ee;for(let At=0;At<R;++At){const en=g[Vt+ce*At],It=v[Nt+At];Ge+=en*It}}}const Be=ae*ge+le*fe+M*we+V*ee;y[Be]=Ge}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}const T9e={kernelName:TN,backendName:"cpu",kernelFunc:E9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $9e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:o,pad:a,dilations:l}=r;it([i,s],"conv3d");const c=kh(i.shape,s.shape,o,l,a),{filterDepth:u,filterHeight:d,filterWidth:h,dilationDepth:f,dilationHeight:p,dilationWidth:m,padInfo:y}=c,g=y.front,v=y.left,x=y.top,b=new zi(c.outShape,i.dtype),S=n.data.get(i.dataId).values,A=n.data.get(s.dataId).values,E=b.values,I=wt(i.shape),T=wt(s.shape);for(let O=0;O<c.batchSize;++O){const $=O*I[0],R=O*b.strides[0];for(let F=0;F<c.outDepth;++F){const L=R+F*b.strides[1],U=F*c.strideDepth-g;for(let q=0;q<u;++q){const K=U+q*f;if(K<0||K>=c.inDepth)continue;const j=q*T[0],Y=$+K*I[1];for(let ae=0;ae<c.outHeight;++ae){const le=L+ae*b.strides[2],M=ae*c.strideHeight-x;for(let V=0;V<d;++V){const H=M+V*p;if(H<0||H>=c.inHeight)continue;const J=j+V*T[1],oe=Y+H*I[2];for(let ce=0;ce<c.outWidth;++ce){const ge=le+ce*c.outChannels,ee=ce*c.strideWidth-v;for(let fe=0;fe<h;++fe){const Se=ee+fe*m;if(Se<0||Se>=c.inWidth)continue;const me=J+fe*T[2],Le=oe+Se*c.inChannels;let we=me;for(let te=0;te<c.inChannels;++te){const He=S[Le+te];for(let Ze=0;Ze<c.outChannels;++Ze)E[ge+Ze]+=He*A[we+Ze];we+=c.outChannels}}}}}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const P9e={kernelName:$N,backendName:"cpu",kernelFunc:$9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R9e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:o,pad:a,filterShape:l}=r;it([i,s],"conv3dBackpropFilterV2");const c=wt(i.shape),u=wt(s.shape),d=kh(i.shape,l,o,1,a),h=d.strideDepth,f=d.strideHeight,p=d.strideWidth,m=d.filterDepth,y=d.filterHeight,g=d.filterWidth,v=new zi(d.filterShape,"float32"),x=v.values,[b,S,A,E]=v.strides,I=n.data.get(s.dataId).values,[T,O,$,R]=u,F=n.data.get(i.dataId).values,[L,U,q,K]=c,j=d.padInfo.front,Y=d.padInfo.left,ae=d.padInfo.top;for(let le=0;le<m;++le){const M=Math.max(0,Math.ceil((j-le)/h)),V=Math.min(d.outDepth,(d.inDepth+j-le)/h),H=le*b;for(let J=0;J<y;++J){const oe=Math.max(0,Math.ceil((ae-J)/f)),ce=Math.min(d.outHeight,(d.inHeight+ae-J)/f),ge=J*S+H;for(let ee=0;ee<g;++ee){const fe=Math.max(0,Math.ceil((Y-ee)/p)),Se=Math.min(d.outWidth,(d.inWidth+Y-ee)/p),me=ee*A+ge;for(let Le=0;Le<d.inChannels;++Le){const we=Le*E+me;for(let te=0;te<d.outChannels;++te){let He=0;for(let Ze=0;Ze<d.batchSize;++Ze){const Ge=Ze*L,Be=Ze*T;for(let Je=M;Je<V;++Je){const Ct=(le+Je*h-j)*U+Ge,dt=Je*O+Be;for(let Vt=oe;Vt<ce;++Vt){const At=(J+Vt*f-ae)*q+Ct,en=Vt*$+dt;for(let It=fe;It<Se;++It){const _t=(ee+It*p-Y)*K+At,vt=It*R+en;He+=F[_t+Le]*I[vt+te]}}}}x[we+te]=He}}}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const O9e={kernelName:PO,backendName:"cpu",kernelFunc:R9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D9e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{pad:o,strides:a,inputShape:l}=r;it([i],"conv3dBackpropInputV2");const c=wt(i.shape),u=wt(s.shape),d=kh(l,s.shape,a,1,o),h=new zi(d.inShape,"float32"),f=h.values,[p,m,y,g]=h.strides,v=n.data.get(i.dataId).values,[x,b,S,A]=c,E=n.data.get(s.dataId).values,[I,T,O,$]=u,{batchSize:R,filterDepth:F,filterHeight:L,filterWidth:U,inChannels:q,inDepth:K,inHeight:j,inWidth:Y,outChannels:ae,outDepth:le,outHeight:M,outWidth:V,strideDepth:H,strideHeight:J,strideWidth:oe}=d,ce=F-1-d.padInfo.front,ge=L-1-d.padInfo.top,ee=U-1-d.padInfo.left;for(let fe=0;fe<R;++fe)for(let Se=0;Se<q;++Se)for(let me=0;me<K;++me){const Le=me-ce,we=Math.max(0,Math.ceil(Le/H)),te=Math.min(le,(F+Le)/H);for(let He=0;He<j;++He){const Ze=He-ge,Ge=Math.max(0,Math.ceil(Ze/J)),Be=Math.min(M,(L+Ze)/J);for(let Je=0;Je<Y;++Je){const We=Je-ee,Ct=Math.max(0,Math.ceil(We/oe)),dt=Math.min(V,(U+We)/oe);let Vt=0;for(let Nt=we;Nt<te;++Nt){const At=Nt*H-Le;for(let en=Ge;en<Be;++en){const It=en*J-Ze;for(let ht=Ct;ht<dt;++ht){const _t=ht*oe-We,vt=x*fe+b*Nt+S*en+A*ht,Pn=I*(F-1-At)+T*(L-1-It)+O*(U-1-_t)+$*Se;for(let nn=0;nn<ae;++nn){const mt=v[vt+nn],Mt=E[Pn+nn];Vt+=mt*Mt}}}}f[p*fe+m*me+y*He+g*Je+Se]=Vt}}}return n.makeTensorInfo(h.shape,h.dtype,h.values)}const L9e={kernelName:RO,backendName:"cpu",kernelFunc:D9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M9e=Nn(ix,t=>Math.cos(t)),F9e={kernelName:ix,backendName:"cpu",kernelFunc:M9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j9e=Nn(sx,t=>Math.cosh(t)),B9e={kernelName:sx,backendName:"cpu",kernelFunc:j9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z9e(t){const{inputs:e,backend:n,attrs:r}=t,{image:i,boxes:s,boxInd:o}=e,{cropSize:a,method:l,extrapolationValue:c}=r,[u,d,h,f]=i.shape,p=s.shape[0],[m,y]=a,g=Xt([p,m,y,f],"float32"),v=n.data.get(s.dataId).values,x=n.data.get(o.dataId).values,b=n.data.get(i.dataId).values,S=wt(i.shape),A=wt(g.shape);for(let E=0;E<p;E++){const I=E*4,T=v[I],O=v[I+1],$=v[I+2],R=v[I+3],F=x[E];if(F>=u)continue;const L=m>1?($-T)*(d-1)/(m-1):0,U=y>1?(R-O)*(h-1)/(y-1):0;for(let q=0;q<m;q++){const K=m>1?T*(d-1)+q*L:.5*(T+$)*(d-1);if(K<0||K>d-1){for(let j=0;j<y;j++)for(let Y=0;Y<f;Y++){const ae=Y+j*A[2]+q*A[1]+E*A[0];g.values[ae]=c}continue}if(l==="bilinear"){const j=Math.floor(K),Y=Math.ceil(K),ae=K-j;for(let le=0;le<y;le++){const M=y>1?O*(h-1)+le*U:.5*(O+R)*(h-1);if(M<0||M>h-1){for(let oe=0;oe<f;oe++){const ce=oe+le*A[2]+q*A[1]+E*A[0];g.values[ce]=c}continue}const V=Math.floor(M),H=Math.ceil(M),J=M-V;for(let oe=0;oe<f;oe++){let ce=oe+V*S[2]+j*S[1]+F*S[0];const ge=b[ce];ce=oe+H*S[2]+j*S[1]+F*S[0];const ee=b[ce];ce=oe+V*S[2]+Y*S[1]+F*S[0];const fe=b[ce];ce=oe+H*S[2]+Y*S[1]+F*S[0];const Se=b[ce],me=ge+(ee-ge)*J,Le=fe+(Se-fe)*J;ce=oe+le*A[2]+q*A[1]+E*A[0],g.values[ce]=me+(Le-me)*ae}}}else for(let j=0;j<y;++j){const Y=y>1?O*(h-1)+j*U:.5*(O+R)*(h-1);if(Y<0||Y>h-1){for(let M=0;M<f;M++){const V=M+j*A[2]+q*A[1]+E*A[0];g.values[V]=c}continue}const ae=Math.round(Y),le=Math.round(K);for(let M=0;M<f;M++){const V=M+ae*S[2]+le*S[1]+F*S[0],H=M+j*A[2]+q*A[1]+E*A[0];g.values[H]=b[V]}}}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}const U9e={kernelName:DO,backendName:"cpu",kernelFunc:z9e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V9e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,exclusive:o,reverse:a}=r;it(i,"cumprod");const l=yr([s],i.shape.length);let c=i;l!=null&&(c=Qs({inputs:{x:i},backend:n,attrs:{perm:l}}));const u=Mr(1,i.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);const d=bo(c.dtype,"int32"),h=bO($e(c.shape),d),f=n.data.get(c.dataId).values,p=c.shape[c.shape.length-1],m=a?(g,v)=>g+p-v-1:(g,v)=>g+v;for(let g=0;g<f.length;g+=p)for(let v=0;v<p;v++){const x=m(g,v);if(v===0)h[x]=o?1:f[x];else{const b=m(g,v-1);h[x]=o?f[b]*h[b]:f[x]*h[b]}}const y=n.makeTensorInfo(c.shape,d,h);if(l!=null){const g=Sh(l),v=Qs({inputs:{x:y},backend:n,attrs:{perm:g}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(c),v}return y}const W9e={kernelName:OO,backendName:"cpu",kernelFunc:V9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G9e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,exclusive:o,reverse:a}=r;it(i,"cumsum");const l=yr([s],i.shape.length);let c=i;l!=null&&(c=Qs({inputs:{x:i},backend:n,attrs:{perm:l}}));const u=Mr(1,i.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);const d=bo(c.dtype,"int32"),h=os($e(c.shape),d),f=n.data.get(c.dataId).values,p=c.shape[c.shape.length-1],m=a?(g,v)=>g+p-v-1:(g,v)=>g+v;for(let g=0;g<f.length;g+=p)for(let v=0;v<p;v++){const x=m(g,v);if(v===0)h[x]=o?0:f[x];else{const b=m(g,v-1);h[x]=o?f[b]+h[b]:f[x]+h[b]}}const y=n.makeTensorInfo(c.shape,d,h);if(l!=null){const g=Sh(l),v=Qs({inputs:{x:y},backend:n,attrs:{perm:g}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(c),v}return y}const q9e={kernelName:PN,backendName:"cpu",kernelFunc:G9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H9e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:s}=e,{size:o,binaryOutput:a}=r;if(i.shape.length===1){const l=n.data.get(i.dataId).values,c=n.data.get(s.dataId).values,u=qL(l,c,s.dtype,s.shape,o);return n.makeTensorInfo([o],s.dtype,u)}else if(i.shape.length===2){const l=n.bufferSync(i),c=n.bufferSync(s),u=Zie(l,c,o,a);return n.makeTensorInfo(u.shape,s.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}const K9e={kernelName:LO,backendName:"cpu",kernelFunc:H9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X9e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockSize:s,dataFormat:o}=r;Z(o==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${o}`);const a=i.shape[0],l=i.shape[1],c=i.shape[2],u=i.shape[3],d=l*s,h=c*s,f=u/(s*s),p=n.data.get(i.dataId).values,m=new Float32Array(a*d*h*f);let y=0;for(let g=0;g<a;++g)for(let v=0;v<d;++v){const x=Math.floor(v/s),b=v%s;for(let S=0;S<h;++S){const A=Math.floor(S/s),E=S%s,I=(b*s+E)*f;for(let T=0;T<f;++T){const $=T+I+u*(A+c*(x+l*g));m[y++]=p[$]}}}return n.makeTensorInfo([a,d,h,f],i.dtype,m)}const Y9e={kernelName:MO,backendName:"cpu",kernelFunc:X9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zse(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:o,pad:a,dilations:l,dimRoundingMode:c}=r;it([i,s],"depthwiseConv2DNative");const u=wt(i.shape),d=wt(s.shape);let h=l;h==null&&(h=[1,1]),Z(cs(o,h),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${h}'`);const f=Vi(i.shape,s.shape,o,h,a,c,!0),{filterHeight:p,filterWidth:m,dilationHeight:y,dilationWidth:g,padInfo:v}=f,x=v.left,b=v.top,S=f.outChannels/f.inChannels,A=new zi(f.outShape,i.dtype),E=n.data.get(i.dataId).values,I=n.data.get(s.dataId).values,T=A.values;for(let O=0;O<f.batchSize;++O){const $=O*u[0],R=O*A.strides[0];for(let F=0;F<f.outHeight;++F){const L=R+F*A.strides[1],U=F*f.strideHeight-b;for(let q=0;q<p;++q){const K=U+q*y;if(K<0||K>=f.inHeight)continue;const j=q*d[0],Y=$+K*u[1];for(let ae=0;ae<f.outWidth;++ae){const le=L+ae*A.strides[2],M=ae*f.strideWidth-x;for(let V=0;V<m;++V){const H=M+V*g;if(H<0||H>=f.inWidth)continue;const J=j+V*d[1],oe=Y+H*f.inChannels;let ce=le,ge=J;for(let ee=0;ee<f.inChannels;++ee){const fe=E[oe+ee];for(let Se=0;Se<S;++Se)T[ce+Se]+=fe*I[ge+Se];ce+=S,ge+=S}}}}}}return n.makeTensorInfo(A.shape,A.dtype,A.values)}const Z9e={kernelName:RN,backendName:"cpu",kernelFunc:Zse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J9e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:c,filterShape:u}=r;it([i,s],"depthwiseConv2dNativeBackpropFilter");const d=Vi(i.shape,u,o,a,l,c,!0),{strideHeight:h,strideWidth:f,filterHeight:p,filterWidth:m}=d,y=new zi(d.filterShape,"float32"),g=d.padInfo.left,v=d.padInfo.top,x=d.outChannels/d.inChannels,b=n.data.get(i.dataId).values,S=new zi(i.shape,i.dtype,b),A=n.data.get(s.dataId).values,E=new zi(s.shape,s.dtype,A);for(let I=0;I<p;++I){const T=Math.max(0,Math.ceil((v-I)/h)),O=Math.min(d.outHeight,(d.inHeight+v-I)/h);for(let $=0;$<m;++$){const R=Math.max(0,Math.ceil((g-$)/f)),F=Math.min(d.outWidth,(d.inWidth+g-$)/f);for(let L=0;L<d.outChannels;++L){const U=Math.trunc(L/x),q=L%x;let K=0;for(let j=0;j<d.batchSize;++j)for(let Y=T;Y<O;++Y){const ae=I+Y*h-v;for(let le=R;le<F;++le){const M=$+le*f-g;K+=S.get(j,ae,M,U)*E.get(j,Y,le,L)}}y.set(K,I,$,U,q)}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const Q9e={kernelName:FO,backendName:"cpu",kernelFunc:J9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eGe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:c,inputShape:u}=r;it([i,s],"depthwiseConv2DNativeBackpropInput");const d=wt(i.shape),h=wt(s.shape),f=Vi(u,s.shape,o,a,l,c,!0),p=new zi(f.inShape,"float32"),m=p.values,[y,g,v]=p.strides,x=n.data.get(i.dataId).values,[b,S,A]=d,E=n.data.get(s.dataId).values,[I,T,O]=h,{batchSize:$,filterHeight:R,filterWidth:F,inChannels:L,inHeight:U,inWidth:q,outChannels:K,outHeight:j,outWidth:Y,strideHeight:ae,strideWidth:le}=f,M=R-1-f.padInfo.top,V=F-1-f.padInfo.left,H=K/L;for(let J=0;J<$;++J)for(let oe=0;oe<L;++oe)for(let ce=0;ce<U;++ce){const ge=ce-M,ee=Math.max(0,Math.ceil(ge/ae)),fe=Math.min(j,(R+ge)/ae);for(let Se=0;Se<q;++Se){const me=Se-V,Le=Math.max(0,Math.ceil(me/le)),we=Math.min(Y,(F+me)/le);let te=0;for(let He=ee;He<fe;++He){const Ze=He*ae-ge;for(let Ge=Le;Ge<we;++Ge){const Be=Ge*le-me,Je=b*J+S*He+A*Ge,We=I*(R-1-Ze)+T*(F-1-Be)+O*oe;for(let Ct=0;Ct<H;++Ct){const dt=oe*H+Ct,Vt=x[Je+dt],Nt=E[We+Ct];te+=Vt*Nt}}}m[y*J+g*ce+v*Se+oe]=te}}return n.makeTensorInfo(p.shape,p.dtype,p.values)}const tGe={kernelName:jO,backendName:"cpu",kernelFunc:eGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nGe(t){const{inputs:e,backend:n}=t,{x:r}=e,i=$e(r.shape),s=n.data.get(r.dataId).values,o=Xt([i,i],r.dtype),a=o.values;for(let c=0;c<s.length;c++)a[c*i+c]=s[c];const l=[...r.shape,...r.shape];return n.makeTensorInfo(l,o.dtype,o.values)}const rGe={kernelName:xee,backendName:"cpu",kernelFunc:nGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iGe={kernelName:ON,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:i}=t,{strides:s,pad:o,dilations:a}=n,l=e,c=l.data.get(r.dataId).values,u=r.shape.length,d=l.data.get(i.dataId).values,h=i.shape.length,{batchSize:f,inHeight:p,inWidth:m,inChannels:y,outHeight:g,outWidth:v,padInfo:x,strideHeight:b,strideWidth:S,filterHeight:A,filterWidth:E,dilationHeight:I,dilationWidth:T,outShape:O}=Vx(r.shape,i.shape,s,o,"NHWC",a),$=$e(O),R=O.length,F=Rr(r.dtype,$);for(let U=0;U<f;++U)for(let q=0;q<g;++q){const K=q*b-x.top;for(let j=0;j<v;++j){const Y=j*S-x.left;for(let ae=0;ae<y;++ae){let le=Number.MIN_SAFE_INTEGER;for(let V=0;V<A;++V){const H=K+V*I;if(H>=0&&H<p)for(let J=0;J<E;++J){const oe=Y+J*T;if(oe>=0&&oe<m){const ce=gc([U,H,oe,ae],u,wt(r.shape)),ge=gc([V,J,ae],h,wt(i.shape)),ee=c[ce]+d[ge];ee>le&&(le=ee)}}}const M=gc([U,q,j,ae],R,wt(O));F[M]=le}}}return{dataId:l.write(Ep(F,r.dtype),O,r.dtype),shape:O,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sGe={kernelName:T3,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:i,dy:s}=t,{strides:o,pad:a,dilations:l}=n,c=e,u=Cl(r.shape,c.data.get(r.dataId).values),d=Cl(i.shape,c.data.get(i.dataId).values),{batchSize:h,inHeight:f,inWidth:p,inChannels:m,outHeight:y,outWidth:g,padInfo:v,strideHeight:x,strideWidth:b,filterHeight:S,filterWidth:A,dilationHeight:E,dilationWidth:I,outShape:T}=Vx(r.shape,i.shape,o,a,"NHWC",l);Z(s.rank===T.length,()=>`Error in ${T3}, dy must have the same rank as output ${T.length}, but got ${s.rank}`);const O=Cl(T,c.data.get(s.dataId).values),$=mee(i.shape,i.dtype);for(let F=0;F<h;++F)for(let L=0;L<y;++L){const U=L*x-v.top;for(let q=0;q<g;++q){const K=q*b-v.left;for(let j=0;j<m;++j){let Y=Number.MIN_SAFE_INTEGER,ae=0,le=0;for(let M=0;M<S;++M){const V=U+M*E;if(V>=0&&V<f)for(let H=0;H<A;++H){const J=K+H*I;if(J>=0&&J<p){const oe=u[F][V][J][j]+d[M][H][j];oe>Y&&(Y=oe,ae=M,le=H)}}}$[ae][le][j]+=O[F][L][q][j]}}}return{dataId:c.write(Ep($,r.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oGe={kernelName:E3,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:i,dy:s}=t,{strides:o,pad:a,dilations:l}=n,c=e,u=Cl(r.shape,c.data.get(r.dataId).values),d=Cl(i.shape,c.data.get(i.dataId).values),{batchSize:h,inHeight:f,inWidth:p,inChannels:m,outHeight:y,outWidth:g,padInfo:v,strideHeight:x,strideWidth:b,filterHeight:S,filterWidth:A,dilationHeight:E,dilationWidth:I,outShape:T}=Vx(r.shape,i.shape,o,a,"NHWC",l);Z(s.rank===T.length,()=>`Error in ${E3}, dy must have the same rank as output ${T.length}, but got ${s.rank}`);const O=Cl(T,c.data.get(s.dataId).values),$=mee(r.shape,r.dtype);for(let F=0;F<h;++F)for(let L=0;L<y;++L){const U=L*x-v.top;for(let q=0;q<g;++q){const K=q*b-v.left;for(let j=0;j<m;++j){let Y=Number.MIN_SAFE_INTEGER,ae=U<0?0:U,le=K<0?0:K;for(let M=0;M<S;++M){const V=U+M*E;if(V>=0&&V<f)for(let H=0;H<A;++H){const J=K+H*I;if(J>=0&&J<p){const oe=u[F][V][J][j]+d[M][H][j];oe>Y&&(Y=oe,ae=V,le=J)}}}$[F][ae][le][j]+=O[F][L][q][j]}}}return{dataId:c.write(Ep($,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aGe(t){const{inputs:e,backend:n,attrs:r}=t,{image:i}=e,{canvas:s,options:o}=r,{contextOptions:a,imageOptions:l}=o||{},c=(l==null?void 0:l.alpha)||1,u=(a==null?void 0:a.contextType)||"2d";if(u!=="2d")throw new Error(`Context type ${a.contextType} is not supported by the CPU backend.`);const d=s.getContext(u,(a==null?void 0:a.contextAttributes)||{});if(d==null)throw new Error(`Could not get the context with ${u} type.`);const[h,f]=i.shape.slice(0,2),p=i.shape.length===2?1:i.shape[2],m=n.data.get(i.dataId).values,y=i.dtype==="float32"?255:1,g=new Uint8ClampedArray(f*h*4);for(let x=0;x<h*f;++x){const b=[0,0,0,255*c];for(let A=0;A<p;A++){const E=m[x*p+A];if(i.dtype==="float32"){if(E<0||E>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${E}.`)}else if(i.dtype==="int32"&&(E<0||E>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${E}.`);p===1?(b[0]=E*y,b[1]=E*y,b[2]=E*y):b[A]=E*y}const S=x*4;g[S+0]=Math.round(b[0]),g[S+1]=Math.round(b[1]),g[S+2]=Math.round(b[2]),g[S+3]=Math.round(b[3])}s.width=f,s.height=h;const v=new ImageData(g,f,h);return d.putImageData(v,0,0),i}const lGe={kernelName:kDe,backendName:"cpu",kernelFunc:aGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sb(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r;it(i,"sum");let a;i.dtype==="bool"?a=ch({inputs:{x:i},backend:n,attrs:{dtype:"int32"}}):a=Ac({inputs:{x:i},backend:n});const l=a.shape.length,c=Yt(s,a.shape),u=yr(c,l);let d=c,h=a;u!=null&&(h=Qs({inputs:{x:a},backend:n,attrs:{perm:u}}),d=Mr(d.length,l)),Wi("sum",d,h.shape.length);const[f,p]=Pi(h.shape,d),m=bo(h.dtype,"int32");let y=PS(n,f,m);const g=$e(p),v=n.data.get(y.dataId).values,x=n.data.get(h.dataId).values;for(let b=0;b<v.length;++b){const S=b*g;let A=0;for(let E=0;E<g;++E)A+=x[S+E];v[b]=A}if(o){const b=Dr(y.shape,c),S=y;y=Wn({inputs:{x:y},backend:n,attrs:{shape:b}}),n.disposeIntermediateTensorInfo(S)}return n.disposeIntermediateTensorInfo(a),u!=null&&n.disposeIntermediateTensorInfo(h),y}const cGe={kernelName:f5,backendName:"cpu",kernelFunc:sb};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uGe(t){const{inputs:e,backend:n,attrs:r}=t,{equation:i}=r,s=e,{allDims:o,summedDims:a,idDims:l}=mL(i,s.length);yL(o.length,l,s);const{path:c,steps:u}=vL(a,l),d=u.length;let h=null,f=o.length;const p=[];for(let m=0;m<d;++m){for(const y of u[m]){const{permutationIndices:g,expandDims:v}=gL(f,l[y]);let x;xL(g)?x=s[y]:(x=Qs({inputs:{x:s[y]},backend:n,attrs:{perm:g}}),p.push(x));const b=x.shape.slice();for(let S=0;S<v.length;++S)b.splice(v[S],0,1);xn(x.shape,b)||(x=Wn({inputs:{x},backend:n,attrs:{shape:b}}),p.push(x)),h===null?h=x:(h=W5({inputs:{a:x,b:h},backend:n}),p.push(h))}m<d-1&&(c[m]>=0&&(h=sb({inputs:{x:h},backend:n,attrs:{axis:c[m]-(o.length-f),keepDims:!1}}),p.push(h)),f--)}for(const m of p)m!==h&&n.disposeIntermediateTensorInfo(m);return h}const dGe={kernelName:BO,backendName:"cpu",kernelFunc:uGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hGe(t){const{inputs:e,backend:n}=t,{dy:r,y:i}=e;it([r,i],"eluGrad");const s=new Float32Array($e(i.shape)),o=n.data.get(i.dataId).values,a=n.data.get(r.dataId).values;for(let l=0;l<o.length;++l){const c=o[l];c>=0?s[l]=a[l]:s[l]=a[l]*(c+1)}return n.makeTensorInfo(i.shape,"float32",s)}const fGe={kernelName:zO,backendName:"cpu",kernelFunc:hGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pGe=lL,mGe=cL,gGe=uL,yGe=dL,vGe=hL,xGe=fL,bGe=Nn(lx,t=>{const e=Math.sign(t),n=Math.abs(t),r=1/(1+pGe*n);return e*(1-((((xGe*r+vGe)*r+yGe)*r+gGe)*r+mGe)*r*Math.exp(-n*n))}),wGe={kernelName:lx,backendName:"cpu",kernelFunc:bGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DS(t){const{inputs:e,backend:n,attrs:r}=t,{input:i}=e,{dim:s}=r,o=i.shape.length,a=i.shape.slice();let l=s;return s<0&&(Z(-(o+1)<=s,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+s+1),a.splice(l,0,1),Wn({inputs:{x:i},backend:n,attrs:{shape:a}})}const kGe={kernelName:LN,backendName:"cpu",kernelFunc:DS};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SGe=jr((t,e)=>t/e),JL=fi(ox,SGe),i$={kernelName:ox,backendName:"cpu",kernelFunc:JL};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jse(t,e,n){const r=t.shape,i=r[0],s=r[1],o=n.data.get(t.dataId),a=o.complexTensorInfos.real,l=o.complexTensorInfos.imag,c=[i,s],u=$e(c),d=ss("float32",u),h=ss("float32",u);for(let y=0;y<i;y++){const g=xp({inputs:{x:a},backend:n,attrs:{begin:[y,0],size:[1,s]}}),v=xp({inputs:{x:l},backend:n,attrs:{begin:[y,0],size:[1,s]}}),x=uo({inputs:{real:g,imag:v},backend:n}),{real:b,imag:S}=CGe(x,e,n),A=_u(b,S);for(let E=0;E<s;E++){const I=pL(A,E);d[y*s+E]=I.real,h[y*s+E]=I.imag}n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(x)}const f=n.makeTensorInfo(c,"float32",d),p=n.makeTensorInfo(c,"float32",h),m=uo({inputs:{real:f,imag:p},backend:n});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),m}function CGe(t,e,n){const r=$e(t.shape),i=n.data.get(t.dataId),s=n.data.get(i.complexTensorInfos.real.dataId).values,o=n.data.get(i.complexTensorInfos.imag.dataId).values;if(NGe(r)){const a=s$(s,o,r,e,n),l=[t.shape[0],t.shape[1]];if(e){const c=n.makeTensorInfo(l,"float32",a.real),u=n.makeTensorInfo(l,"float32",a.imag),d=n.makeTensorInfo([],"float32",wh(r,"float32")),h=Ac({inputs:{x:d},backend:n}),f=i$.kernelFunc({inputs:{a:c,b:d},backend:n}),p=i$.kernelFunc({inputs:{a:u,b:h},backend:n}),m=n.data.get(f.dataId).values,y=n.data.get(p.dataId).values;return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),{real:m,imag:y}}return a}else{const a=_u(s,o),l=AGe(a,r,e);return hne(l)}}function NGe(t){return(t&t-1)===0}function s$(t,e,n,r,i){if(n===1)return{real:t,imag:e};const s=_u(t,e),o=n/2,a=fne(s),l=a.real,c=a.imag,u=[l.length],d=i.makeTensorInfo(u,"float32",l),h=i.makeTensorInfo(u,"float32",c),f=uo({inputs:{real:d,imag:h},backend:i}),p=pne(s),m=p.real,y=p.imag,g=[m.length],v=i.makeTensorInfo(g,"float32",m),x=i.makeTensorInfo(g,"float32",y),b=uo({inputs:{real:v,imag:x},backend:i}),S=s$(l,c,o,r,i),A=S.real,E=S.imag,I=[A.length],T=i.makeTensorInfo(I,"float32",A),O=i.makeTensorInfo(I,"float32",E),$=uo({inputs:{real:T,imag:O},backend:i}),R=s$(m,y,o,r,i),F=R.real,L=R.imag,U=[F.length],q=i.makeTensorInfo(U,"float32",F),K=i.makeTensorInfo(U,"float32",L),j=uo({inputs:{real:q,imag:K},backend:i}),Y=gne(n,r),ae=[Y.real.length],le=i.makeTensorInfo(ae,"float32",Y.real),M=i.makeTensorInfo(ae,"float32",Y.imag),V=uo({inputs:{real:le,imag:M},backend:i}),H=W5({inputs:{a:V,b:j},backend:i}),J=Ag({inputs:{a:$,b:H},backend:i}),oe=YL({inputs:{a:$,b:H},backend:i}),ce=vp({inputs:{input:J},backend:i}),ge=vp({inputs:{input:oe},backend:i}),ee=Ig({inputs:{input:J},backend:i}),fe=Ig({inputs:{input:oe},backend:i}),Se=_g({inputs:[ce,ge],backend:i,attrs:{axis:0}}),me=_g({inputs:[ee,fe],backend:i,attrs:{axis:0}}),Le=i.data.get(Se.dataId).values,we=i.data.get(me.dataId).values;return i.disposeIntermediateTensorInfo(d),i.disposeIntermediateTensorInfo(h),i.disposeIntermediateTensorInfo(f),i.disposeIntermediateTensorInfo(v),i.disposeIntermediateTensorInfo(x),i.disposeIntermediateTensorInfo(b),i.disposeIntermediateTensorInfo(T),i.disposeIntermediateTensorInfo(O),i.disposeIntermediateTensorInfo($),i.disposeIntermediateTensorInfo(q),i.disposeIntermediateTensorInfo(K),i.disposeIntermediateTensorInfo(j),i.disposeIntermediateTensorInfo(le),i.disposeIntermediateTensorInfo(M),i.disposeIntermediateTensorInfo(V),i.disposeIntermediateTensorInfo(H),i.disposeIntermediateTensorInfo(J),i.disposeIntermediateTensorInfo(oe),i.disposeIntermediateTensorInfo(ce),i.disposeIntermediateTensorInfo(ee),i.disposeIntermediateTensorInfo(ge),i.disposeIntermediateTensorInfo(fe),i.disposeIntermediateTensorInfo(Se),i.disposeIntermediateTensorInfo(me),{real:Le,imag:we}}function AGe(t,e,n){const r=new Float32Array(e*2);for(let i=0;i<e;i++){let s=0,o=0;for(let a=0;a<e;a++){const l=yne(i*a,e,n),c=pL(t,a);s+=c.real*l.real-c.imag*l.imag,o+=c.real*l.imag+c.imag*l.real}n&&(s/=e,o/=e),mne(r,s,o,i)}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IGe(t){const{inputs:e,backend:n}=t,{input:r}=e,i=$e(r.shape),s=r.shape[r.shape.length-1],o=i/s,a=Wn({inputs:{x:r},backend:n,attrs:{shape:[o,s]}}),l=Jse(a,!1,n),c=Wn({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),c}const _Ge={kernelName:UO,backendName:"cpu",kernelFunc:IGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QL(t){const{backend:e,attrs:n}=t,{shape:r,value:i,dtype:s}=n,o=s||s0(i),a=Rr(o,$e(r));return TGe(a,i,o),e.makeTensorInfo(r,o,a)}const EGe={kernelName:VO,backendName:"cpu",kernelFunc:QL};function TGe(t,e,n){t.fill(e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Ge={kernelName:WO,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,i=n,s=ss(r.dtype,$e(r.shape)),[o,a,l,c]=r.shape,u=i.data.get(r.dataId).values;for(let h=0;h<o;h++){const f=h*l*a*c;for(let p=0;p<a;p++){const m=p*(l*c);for(let y=0;y<l;y++){const g=y*c;for(let v=0;v<c;v++){const x=Math.round(l-y-1),b=f+m+g+v;let S=u[b];if(x>=0&&x<l){const A=x*c,E=f+m+A+v;S=u[E]}s[b]=S}}}}return{dataId:i.write(s,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PGe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s,bias:o,preluActivationWeights:a}=e,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h,activation:f,leakyreluAlpha:p}=r;let m=Yse({inputs:{x:i,filter:s},backend:n,attrs:{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h}});if(o){const y=m;if(u==="NCHW"&&o.shape.length===1&&o.shape[0]!==1){const g=Wn({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});m=Ag({inputs:{a:m,b:g},backend:n}),n.disposeIntermediateTensorInfo(g)}else m=Ag({inputs:{a:m,b:o},backend:n});n.disposeIntermediateTensorInfo(y)}if(f){const y=m;if(u==="NCHW"&&f==="prelu"&&a.shape.length===1&&a.shape[0]!==1){const g=Wn({inputs:{x:a},backend:n,attrs:{shape:[a.shape[0],1,1]}});m=OS(n,m,f,g,p),n.disposeIntermediateTensorInfo(g)}else m=OS(n,m,f,a,p);n.disposeIntermediateTensorInfo(y)}return m}const RGe={kernelName:mS,backendName:"cpu",kernelFunc:PGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OGe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s,bias:o,preluActivationWeights:a}=e,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h,activation:f,leakyreluAlpha:p}=r;let m=Zse({inputs:{x:i,filter:s},backend:n,attrs:{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h}});if(o){const y=m;m=Ag({inputs:{a:m,b:o},backend:n}),n.disposeIntermediateTensorInfo(y)}if(f){const y=m;m=OS(n,m,f,a,p),n.disposeIntermediateTensorInfo(y)}return m}const DGe={kernelName:Fee,backendName:"cpu",kernelFunc:OGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LGe(t){const{inputs:e,backend:n}=t,{params:r,indices:i}=e,s=$e(r.shape),o=i.shape,a=o[o.length-1],[l,c,u,d]=ZD(r,i);if(c===0)return n.makeTensorInfo(l,r.dtype,[]);const h=n.data.get(i.dataId).values,f=n.bufferSync(r),p=lse(h,f,r.dtype,c,a,u,d,r.shape,s);return n.makeTensorInfo(l,r.dtype,p.values)}const MGe={kernelName:bee,backendName:"cpu",kernelFunc:LGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FGe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,indices:s}=e,{axis:o,batchDims:a}=r;it([i,s],"gatherV2");const l=Yt(o,i.shape)[0],c=n.data.get(s.dataId).values,u=i.shape[l];for(let b=0;b<c.length;++b){const S=c[b];Z(S<=u-1&&S>=0,()=>`GatherV2: the index value ${S} is not in [0, ${u-1}]`)}let d=a;a==null&&(d=0);const h=$e(s.shape),f=wL(i,s,l,d),p=Wn({inputs:{x:i},backend:n,attrs:{shape:[f.batchSize,f.outerSize,f.dimSize,f.sliceSize]}}),m=Wn({inputs:{x:s},backend:n,attrs:{shape:[f.batchSize,h/f.batchSize]}}),y=[f.batchSize,f.outerSize,h/f.batchSize,f.sliceSize],g=n.bufferSync(m),v=n.bufferSync(p),x=cse(v,g,y);return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.makeTensorInfo(f.outputShape,x.dtype,x.values)}const jGe={kernelName:FN,backendName:"cpu",kernelFunc:FGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BGe(t){const{inputs:e,backend:n}=t,{input:r}=e,i=$e(r.shape),s=r.shape[r.shape.length-1],o=i/s,a=Wn({inputs:{x:r},backend:n,attrs:{shape:[o,s]}}),l=Jse(a,!0,n),c=Wn({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),c}const zGe={kernelName:GO,backendName:"cpu",kernelFunc:BGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UGe=Nn(mx,t=>Number.isFinite(t)?1:0,"bool"),VGe={kernelName:mx,backendName:"cpu",kernelFunc:UGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WGe=Nn(gx,t=>Math.abs(t)===1/0?1:0,"bool"),GGe={kernelName:gx,backendName:"cpu",kernelFunc:WGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qGe=Nn(yx,t=>Number.isNaN(t)?1:0,"bool"),HGe={kernelName:yx,backendName:"cpu",kernelFunc:qGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KGe(t){const{backend:e,attrs:n}=t,{start:r,stop:i,num:s}=n,o=pse(r,i,s);return e.makeTensorInfo([o.length],"float32",o)}const XGe={kernelName:wee,backendName:"cpu",kernelFunc:KGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YGe=Nn(xx,t=>Math.log1p(t)),ZGe={kernelName:xx,backendName:"cpu",kernelFunc:YGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JGe=jr((t,e)=>t&&e),QGe=fi(VN,JGe,null,"bool"),eqe={kernelName:VN,backendName:"cpu",kernelFunc:QGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tqe=Nn(WN,t=>t?0:1,"bool"),nqe={kernelName:WN,backendName:"cpu",kernelFunc:tqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rqe=jr((t,e)=>t||e),iqe=fi(GN,rqe,null,"bool"),sqe={kernelName:GN,backendName:"cpu",kernelFunc:iqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oqe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{depthRadius:s,bias:o,alpha:a,beta:l}=r;it(i,"LRN");const c=i.shape[3],u=c-1,d=n.data.get(i.dataId).values,h=$e(i.shape),f=new Float32Array(h);function p(m){const y=m%c;let g=m-y+Math.max(0,y-s);const v=m-y+Math.min(y+s,u);let x=0;for(;g<=v;g++){const b=d[g];x+=b*b}return x}for(let m=0;m<h;m++){const y=p(m),g=d[m]*Math.pow(o+a*y,-l);f[m]=g}return n.makeTensorInfo(i.shape,i.dtype,f)}const aqe={kernelName:qN,backendName:"cpu",kernelFunc:oqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lqe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,y:s,dy:o}=e,{depthRadius:a,bias:l,alpha:c,beta:u}=r;it(o,"LRNGrad");const d=$e(o.shape),h=o.shape[3],f=n.data.get(o.dataId).values,p=n.data.get(i.dataId).values,m=n.data.get(s.dataId).values,y=new Float32Array(d),g=d;for(let v=0;v<g;v++){const x=v%h,b=v-x+Math.max(0,x-a),S=v-x+Math.min(h,x+a+1);let A=0;for(let E=b;E<S;E++)A+=Math.pow(p[E],2);A=c*A+l;for(let E=b;E<S;E++){let I=-2*c*u*p[E]*m[v]/A;v===E&&(I+=Math.pow(A,-u)),I*=f[v],y[E]+=I}}return n.makeTensorInfo(o.shape,i.dtype,y)}const cqe={kernelName:HO,backendName:"cpu",kernelFunc:lqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qse(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reductionIndices:s,keepDims:o}=r,a=n;let l=i.shape;const c=l.length,u=Yt(s,l);let d=u;const h=yr(d,c);let f=a.data.get(i.dataId).values;if(h!=null){const b=new Array(c);for(let S=0;S<b.length;S++)b[S]=l[h[S]];f=KL(f,l,i.dtype,h,b),d=Mr(d.length,c),l=b}it(i,"max"),Wi("max",d,c);const[p,m]=Pi(l,d),y=$e(m),g=gse(f,y,p,i.dtype),v=a.write(g,p,i.dtype);let x=p;return o&&(x=Dr(p,u)),{dataId:v,shape:x,dtype:i.dtype}}const uqe={kernelName:HN,backendName:"cpu",kernelFunc:Qse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dqe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;it(i,"maxPool");const{filterSize:s,strides:o,pad:a,dimRoundingMode:l}=r,c=1;Z(cs(o,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const u=Ya(i.shape,s,o,c,a,l);let d;if(u.filterWidth===1&&u.filterHeight===1&&xn(u.inShape,u.outShape))d=Ac({inputs:{x:i},backend:n});else{const h=n.data.get(i.dataId).values,f=wt(i.shape),p=ZL(h,i.shape,i.dtype,f,u,"max");d=n.makeTensorInfo(u.outShape,i.dtype,p.values)}return d}const hqe={kernelName:KN,backendName:"cpu",kernelFunc:dqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fqe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:s,strides:o,pad:a,dimRoundingMode:l,dataFormat:c}=r;it(i,"maxPool3d");const u=Bu(i.shape,s,o,1,a,l,c),d=n.data.get(i.dataId).values,h=Xse(d,i.shape,i.dtype,wt(i.shape),u,"max");return n.makeTensorInfo(h.shape,"float32",h.values)}const pqe={kernelName:XN,backendName:"cpu",kernelFunc:fqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mqe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,{filterSize:o,strides:a,pad:l,dimRoundingMode:c}=r;it([i,s],"maxPool3DGrad");const u=Bu(s.shape,o,a,1,l,c),d=n.bufferSync(s),h=r9e(d,u),f=u.strideDepth,p=u.strideHeight,m=u.strideWidth,y=u.dilationDepth,g=u.dilationHeight,v=u.dilationWidth,x=u.effectiveFilterDepth,b=u.effectiveFilterHeight,S=u.effectiveFilterWidth,A=x-1-u.padInfo.front,E=S-1-u.padInfo.left,I=b-1-u.padInfo.top,T=Xt(s.shape,"float32"),O=n.bufferSync(i);for(let $=0;$<u.batchSize;++$)for(let R=0;R<u.inChannels;++R)for(let F=0;F<u.inDepth;++F)for(let L=0;L<u.inHeight;++L)for(let U=0;U<u.inWidth;++U){const q=F-A,K=L-I,j=U-E;let Y=0;for(let ae=0;ae<x;ae+=y){const le=(q+ae)/f;if(!(le<0||le>=u.outDepth||Math.floor(le)!==le))for(let M=0;M<b;M+=g){const V=(K+M)/p;if(!(V<0||V>=u.outHeight||Math.floor(V)!==V))for(let H=0;H<S;H+=v){const J=(j+H)/m;if(J<0||J>=u.outWidth||Math.floor(J)!==J)continue;const oe=x*b*S-1-h.get($,le,V,J,R),ce=ae*b*S+M*S+H,ge=oe===ce?1:0;if(ge===0)continue;const ee=O.get($,le,V,J,R);Y+=ee*ge}}}T.set(Y,$,F,L,U,R)}return n.makeTensorInfo(T.shape,T.dtype,T.values)}const gqe={kernelName:XO,backendName:"cpu",kernelFunc:mqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yqe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s,output:o}=e,a=s;it([s,o],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=r,h=Ya(a.shape,l,c,1,u,d),f=n.data.get(a.dataId).values,p=Xt(h.outShape,a.dtype,Kse(f,a.shape,a.dtype,h).values),m=h.strideHeight,y=h.strideWidth,g=h.dilationHeight,v=h.dilationWidth,x=h.effectiveFilterHeight,b=h.effectiveFilterWidth,S=b-1-h.padInfo.left,A=x-1-h.padInfo.top,E=Xt(a.shape,"float32"),I=n.data.get(i.dataId).values,T=Xt(i.shape,"float32",I);for(let O=0;O<h.batchSize;++O)for(let $=0;$<h.inChannels;++$)for(let R=0;R<h.inHeight;++R)for(let F=0;F<h.inWidth;++F){const L=R-A,U=F-S;let q=0;for(let K=0;K<x;K+=g){const j=(L+K)/m;if(!(j<0||j>=h.outHeight||Math.floor(j)!==j))for(let Y=0;Y<b;Y+=v){const ae=(U+Y)/y;if(ae<0||ae>=h.outWidth||Math.floor(ae)!==ae)continue;const le=x*b-1-p.get(O,j,ae,$),M=K*b+Y,V=le===M?1:0;if(V===0)continue;const H=T.get(O,j,ae,$);q+=H*V}}E.set(q,O,R,F,$)}return n.makeTensorInfo(E.shape,E.dtype,E.values)}const vqe={kernelName:KO,backendName:"cpu",kernelFunc:yqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xqe(t,e,n,r,i){const s=wt(e),o=ZL(t,e,n,s,i,"max"),a=Kse(t,e,n,i,!0,r);return[o.values,a.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bqe={kernelName:kee,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:i,strides:s,pad:o,includeBatchInIndex:a}=e,l=n;it(r,"MaxPoolWithArgmax");const c=l.data.get(r.dataId).values,u=Ya(r.shape,i,s,[1,1],o),[d,h]=xqe(c,r.shape,r.dtype,a,u),f=l.write(d,u.outShape,r.dtype),p=l.write(h,u.outShape,r.dtype);return[{dataId:f,shape:u.outShape,dtype:r.dtype},{dataId:p,shape:u.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wqe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r,a=Yt(s,i.shape),c=Pi(i.shape,a)[1],u=$e(c),d=[],h=n.makeTensorInfo([],"float32",new Float32Array([u]));d.push(h);const f=ch({inputs:{x:i},backend:n,attrs:{dtype:"float32"}});d.push(f);const p=JL({inputs:{a:f,b:h},backend:n});d.push(p);const m=sb({inputs:{x:p},backend:n,attrs:{axis:s,keepDims:o}});return d.forEach(y=>n.disposeIntermediateTensorInfo(y)),m}const kqe={kernelName:YN,backendName:"cpu",kernelFunc:wqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sqe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r;it(i,"min");const a=Yt(s,i.shape);let l=a;const c=yr(l,i.shape.length);let u=i;c!=null&&(u=Qs({inputs:{x:i},backend:n,attrs:{perm:c}}),l=Mr(l.length,i.shape.length)),Wi("min",l,u.shape.length);const[d,h]=Pi(u.shape,l),f=$e(h),p=os($e(d),u.dtype),m=n.data.get(u.dataId).values;for(let g=0;g<p.length;++g){const v=g*f;let x=m[v];for(let b=0;b<f;++b){const S=m[v+b];(Number.isNaN(S)||S<x)&&(x=S)}p[g]=x}c!=null&&n.disposeIntermediateTensorInfo(u);const y=n.makeTensorInfo(d,u.dtype,p);if(o){const g=Dr(d,a),v=Wn({inputs:{x:y},backend:n,attrs:{shape:g}});return n.disposeIntermediateTensorInfo(y),v}return y}const Cqe={kernelName:ZN,backendName:"cpu",kernelFunc:Sqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nqe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{paddings:s,mode:o}=r;it(i,"mirrorPad");const a=s.map((x,b)=>x[0]+i.shape[b]+x[1]),l=s.map(x=>x[0]),c=s.map((x,b)=>x[0]+i.shape[b]),u=o==="reflect"?0:1,d=n.data.get(i.dataId).values,h=i.shape.length,f=wt(i.shape),p=$e(a),m=a.length,y=wt(a),g=ss(i.dtype,p);for(let x=0;x<p;x++){let b=o0(x,m,y);for(let A=0;A<m;A++)b[A]<l[A]?b[A]=l[A]*2-b[A]-u:b[A]>=c[A]&&(b[A]=(c[A]-1)*2-b[A]+u);b=b.map((A,E)=>A-l[E]);const S=gc(b,h,f);g[x]=d[S]}return{dataId:n.write(g,a,i.dtype),shape:a,dtype:i.dtype}}const Aqe={kernelName:JN,backendName:"cpu",kernelFunc:Nqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Iqe=jr((t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e}),_qe=fi(kx,Iqe),Eqe={kernelName:kx,backendName:"cpu",kernelFunc:_qe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eoe(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{dim:s}=r,o=i.shape.length;let a=s;if(a===-1&&(a=o-1),a!==o-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${o} and dim was ${a}`);const l=Yt([a],i.shape),c=Qse({inputs:{x:i},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),u=Dr(c.shape,l),d=Wn({inputs:{x:c},backend:n,attrs:{shape:u}}),h=YL({inputs:{a:i,b:d},backend:n}),f=ise({inputs:{x:h},backend:n}),p=sb({inputs:{x:f},backend:n,attrs:{axis:l,keepDims:!1}}),m=Wn({inputs:{x:p},backend:n,attrs:{shape:u}}),y=JL({inputs:{a:f,b:m},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),y}const Tqe={kernelName:g5,backendName:"cpu",kernelFunc:eoe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $qe(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{numSamples:s,seed:o,normalized:a}=r;it(i,"multinomial");const l=a?i:eoe({inputs:{logits:i},backend:n,attrs:{dim:-1}}),c=l.shape[0],u=l.shape[1],d=n.data.get(l.dataId).values,h=[c,s],f=os($e(h),"int32");for(let p=0;p<c;++p){const m=p*u,y=new Float32Array(u-1);y[0]=d[m];for(let x=1;x<y.length;++x)y[x]=y[x-1]+d[m+x];const g=MD.alea(o.toString()),v=p*s;for(let x=0;x<s;++x){const b=g();f[v+x]=y.length;for(let S=0;S<y.length;S++)if(b<y[S]){f[v+x]=S;break}}}return a||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(h,"int32",f)}const Pqe={kernelName:See,backendName:"cpu",kernelFunc:$qe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rqe=qD;function Oqe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l}=r;it(i,"NonMaxSuppression");const c=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values,{selectedIndices:d}=Rqe(c,u,o,a,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const Dqe={kernelName:YO,backendName:"cpu",kernelFunc:Oqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lqe=HD;function Mqe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:c}=r;it(i,"NonMaxSuppressionPadded");const u=n.data.get(i.dataId).values,d=n.data.get(s.dataId).values,{selectedIndices:h,validOutputs:f}=Lqe(u,d,o,a,l,c);return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([f]))]}const Fqe={kernelName:ZO,backendName:"cpu",kernelFunc:Mqe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jqe=KD;function Bqe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,softNmsSigma:c}=r;it(i,"NonMaxSuppressionWithScore");const u=n.data.get(i.dataId).values,d=n.data.get(s.dataId).values,h=o,f=a,p=l,m=c,{selectedIndices:y,selectedScores:g}=jqe(u,d,h,f,p,m);return[n.makeTensorInfo([y.length],"int32",new Int32Array(y)),n.makeTensorInfo([g.length],"float32",new Float32Array(g))]}const zqe={kernelName:JO,backendName:"cpu",kernelFunc:Bqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uqe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:i}=e,{dtype:s,depth:o,onValue:a,offValue:l}=r;it(i,"oneHot");const c=$e(i.shape),u=new Float32Array(c*o);u.fill(l);const d=n.data.get(i.dataId).values;for(let h=0;h<c;++h)d[h]>=0&&d[h]<o&&(u[h*o+d[h]]=a);return n.makeTensorInfo([...i.shape,o],s,u)}const Vqe={kernelName:n5,backendName:"cpu",kernelFunc:Uqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LS(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const i=vp({inputs:{input:r},backend:n}),s=LS({inputs:{x:i},backend:n}),o=Ig({inputs:{input:r},backend:n}),a=LS({inputs:{x:o},backend:n}),l=uo({inputs:{real:s,imag:a},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return QL({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const Wqe={kernelName:x5,backendName:"cpu",kernelFunc:LS};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function toe(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const i=vp({inputs:{input:r},backend:n}),s=toe({inputs:{x:i},backend:n}),o=Ig({inputs:{input:r},backend:n}),a=LS({inputs:{x:o},backend:n}),l=uo({inputs:{real:s,imag:a},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return QL({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const Gqe={kernelName:t5,backendName:"cpu",kernelFunc:toe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function noe(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r;if(e.length===1)return DS({inputs:{input:e[0]},backend:n,attrs:{dim:i}});const s=e[0].shape,o=e[0].dtype;e.forEach(u=>{Xa(s,u.shape,"All tensors passed to stack must have matching shapes"),Z(o===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=e.map(u=>{const d=DS({inputs:{input:u},backend:n,attrs:{dim:i}});return a.push(d),d}),c=_g({inputs:l,backend:n,attrs:{axis:i}});return a.forEach(u=>n.disposeIntermediateTensorInfo(u)),c}const qqe={kernelName:r5,backendName:"cpu",kernelFunc:noe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hqe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{paddings:s,constantValue:o}=r;it(i,"pad");const a=s.map((v,x)=>v[0]+i.shape[x]+v[1]),l=s.map(v=>v[0]),c=n.data.get(i.dataId).values,u=$e(i.shape),d=i.shape.length,h=wt(i.shape),f=$e(a),p=a.length,m=wt(a),y=ss(i.dtype,f);o!==0&&y.fill(o);for(let v=0;v<u;v++){const b=o0(v,d,h).map((A,E)=>A+l[E]),S=gc(b,p,m);y[S]=c[v]}return{dataId:n.write(y,a,i.dtype),shape:a,dtype:i.dtype}}const roe={kernelName:i5,backendName:"cpu",kernelFunc:Hqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kqe=jr((t,e)=>Math.pow(t,e)),Xqe=fi(Cx,Kqe),Yqe={kernelName:Cx,backendName:"cpu",kernelFunc:Xqe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zqe(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:i,paramsDenseValues:s,indices:o}=e,a=i.map(y=>n.data.get(y.dataId).values),l=i.map(y=>y.shape),c=n.data.get(s.dataId).values,u=n.data.get(o.dataId).values,[d,h,f]=kse(a,l,c,s.shape,s.dtype,u,o.shape),p=d.map(y=>n.makeTensorInfo([y.length],"int32",y)),m=n.makeTensorInfo(f,s.dtype,h);return p.concat([m])}const Jqe={kernelName:Cee,backendName:"cpu",kernelFunc:Zqe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qqe(t){const{inputs:e,backend:n}=t,{starts:r,limits:i,deltas:s}=e,o=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values,[c,u]=Sse(o,r.shape,r.dtype,a,i.shape,l,s.shape),d=n.makeTensorInfo([c.length],"int32",c),h=n.makeTensorInfo([u.length],r.dtype,u);return[d,h]}const eHe={kernelName:Nee,backendName:"cpu",kernelFunc:Qqe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tHe(t){const{inputs:e,backend:n,attrs:r}=t,{shape:i,values:s,defaultValue:o,rowPartitionTensors:a}=e,{rowPartitionTypes:l}=r,c=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values,d=n.data.get(o.dataId).values,h=a.map(y=>n.data.get(y.dataId).values),f=a.map(y=>y.shape),[p,m]=Cse(c,i.shape,u,s.shape,s.dtype,d,o.shape,h,f,l);return n.makeTensorInfo(p,s.dtype,m)}const nHe={kernelName:Aee,backendName:"cpu",kernelFunc:tHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rHe(t){const{backend:e,attrs:n}=t,{start:r,stop:i,dtype:s,step:o}=n,a=Nse(r,i,o,s);return e.makeTensorInfo([a.length],s,a)}const iHe={kernelName:QO,backendName:"cpu",kernelFunc:rHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sHe=Nn(Nx,t=>1/t),oHe={kernelName:Nx,backendName:"cpu",kernelFunc:sHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aHe(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:s,halfPixelCenters:o,size:a}=r;it(i,"resizeBilinear");const l=wt(i.shape),[c,u]=a,[d,h,f,p]=i.shape,m=n.data.get(i.dataId).values,y=new Float32Array($e([d,c,u,p])),g=[s&&c>1?h-1:h,s&&u>1?f-1:f],v=[s&&c>1?c-1:c,s&&u>1?u-1:u];let x=0;const b=g[0]/v[0],S=g[1]/v[1];for(let A=0;A<d;A++)for(let E=0;E<c;E++){let I;o?I=b*(E+.5)-.5:I=b*E;const T=Math.max(0,Math.floor(I)),O=I-T,$=Math.min(h-1,Math.ceil(I)),R=A*l[0]+T*l[1],F=A*l[0]+$*l[1];for(let L=0;L<u;L++){let U;o?U=S*(L+.5)-.5:U=S*L;const q=Math.max(0,Math.floor(U)),K=U-q,j=Math.min(f-1,Math.ceil(U)),Y=R+q*l[2],ae=F+q*l[2],le=R+j*l[2],M=F+j*l[2];for(let V=0;V<p;V++){const H=m[Y+V],J=m[ae+V],oe=m[le+V],ce=m[M+V],ge=H+(oe-H)*K,ee=J+(ce-J)*K,fe=ge+(ee-ge)*O;y[x++]=fe}}}return n.makeTensorInfo([d,c,u,p],"float32",y)}const lHe={kernelName:c5,backendName:"cpu",kernelFunc:aHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cHe(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:s}=e,{alignCorners:o}=r;it([s,i],"resizeBilinearGrad");const a=wt(i.shape),[l,c,u,d]=i.shape,[,h,f]=s.shape,p=new Float32Array(l*c*u*d),m=[o&&h>1?c-1:c,o&&f>1?u-1:u],y=[o&&h>1?h-1:h,o&&f>1?f-1:f],g=m[0]/y[0],v=m[1]/y[1],x=n.data.get(s.dataId).values;let b=0;for(let S=0;S<l;S++){const A=S*a[0];for(let E=0;E<h;E++){const I=E*g,T=Math.floor(I),O=Math.min(Math.ceil(I),c-1),$=A+T*a[1],R=A+O*a[1],F=I-T,L=1-F;for(let U=0;U<f;U++){const q=U*v,K=Math.floor(q),j=Math.min(Math.ceil(q),u-1),Y=q-K,ae=1-Y,le=$+K*a[2],M=$+j*a[2],V=R+K*a[2],H=R+j*a[2],J=L*ae,oe=L*Y,ce=F*ae,ge=F*Y;for(let ee=0;ee<d;ee++){const fe=x[b++];p[le+ee]+=fe*J,p[M+ee]+=fe*oe,p[V+ee]+=fe*ce,p[H+ee]+=fe*ge}}}}return n.makeTensorInfo([l,u,c,d],"float32",p)}const uHe={kernelName:nD,backendName:"cpu",kernelFunc:cHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dHe(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:s,halfPixelCenters:o,size:a}=r;it(i,"resizeNearestNeighbor");const l=wt(i.shape),[c,u]=a,[d,h,f,p]=i.shape,m=n.data.get(i.dataId).values,y=new Float32Array(d*c*u*p),g=[s&&c>1?h-1:h,s&&u>1?f-1:f],v=[s&&c>1?c-1:c,s&&u>1?u-1:u],x=g[0]/v[0],b=g[1]/v[1];let S=0;for(let A=0;A<d;A++){const E=A*l[0];for(let I=0;I<c;I++){const T=o?x*(I+.5):x*I;let O=Math.min(h-1,s?Math.round(T):Math.floor(T));o&&(O=Math.max(0,O));const $=E+O*l[1];for(let R=0;R<u;R++){const F=o?b*(R+.5):b*R;let L=Math.min(f-1,s?Math.round(F):Math.floor(F));o&&(L=Math.max(0,L));const U=$+L*l[2];for(let q=0;q<p;q++){const K=m[U+q];y[S++]=K}}}}return n.makeTensorInfo([d,c,u,p],i.dtype,y)}const hHe={kernelName:l5,backendName:"cpu",kernelFunc:dHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fHe(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:s}=e,{alignCorners:o}=r;it([s,i],"resizeNearestNeighborGrad");const a=wt(i.shape),l=wt(s.shape),[c,u,d,h]=i.shape,[,f,p]=s.shape,m=new Float32Array(c*u*d*h),y=n.data.get(s.dataId).values,g=[o&&f>1?u-1:u,o&&p>1?d-1:d],v=[o&&f>1?f-1:f,o&&p>1?p-1:p],x=g[0]/v[0],b=g[1]/v[1],S=1/x,A=1/b,E=Math.ceil(S)*2+2,I=Math.ceil(A)*2+2;for(let T=0;T<c;T++){const O=T*a[0];for(let $=0;$<u;$++){const R=O+$*a[1],F=Math.floor($*S),L=Math.floor(F-E/2);for(let U=0;U<d;U++){const q=R+U*a[2],K=Math.floor(U*A),j=Math.floor(K-I/2);for(let Y=0;Y<h;Y++){let ae=0;for(let le=0;le<E;le++){const M=le+L;if(M<0||M>=f)continue;const V=O+M*l[1],H=M*x,J=Math.min(u-1,o?Math.round(H):Math.floor(H));if($===J)for(let oe=0;oe<I;oe++){const ce=oe+j;if(ce<0||ce>=p)continue;const ge=V+ce*l[2],ee=ce*b,fe=Math.min(d-1,o?Math.round(ee):Math.floor(ee));U===fe&&(ae+=y[ge+Y])}}m[q+Y]=ae}}}}return n.makeTensorInfo(i.shape,i.dtype,m)}const pHe={kernelName:tD,backendName:"cpu",kernelFunc:fHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dims:s}=r;it(i,"reverse");const o=i.shape.length,a=Yt(s,i.shape);if(o===0)return Ac({inputs:{x:i},backend:n});const l=new zi(i.shape,i.dtype),c=n.bufferSync(i);for(let u=0;u<l.size;u++){const d=l.indexToLoc(u),h=d.slice();a.forEach(f=>h[f]=i.shape[f]-1-h[f]),l.set(c.get(...h),...d)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}const gHe={kernelName:u5,backendName:"cpu",kernelFunc:mHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yHe={kernelName:cD,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:i,fillValue:s,center:o}=e,a=n,l=ss(r.dtype,$e(r.shape)),[c,u,d,h]=r.shape,[f,p]=sL(o,u,d),m=255,y=Math.sin(i),g=Math.cos(i),v=a.data.get(r.dataId).values;for(let b=0;b<c;b++){const S=b*d*u*h;for(let A=0;A<u;A++){const E=A*(d*h);for(let I=0;I<d;I++){const T=I*h;for(let O=0;O<h;O++){const $=[c,A,I,O],R=$[2],F=$[1];let L=(R-f)*g-(F-p)*y,U=(R-f)*y+(F-p)*g;L=Math.round(L+f),U=Math.round(U+p);let q=s;if(typeof s!="number"&&(O===3?q=m:q=s[O]),L>=0&&L<d&&U>=0&&U<u){const j=U*(d*h),Y=L*h,ae=S+j+Y+O;q=v[ae]}const K=S+E+T+O;l[K]=q}}}}return{dataId:a.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vHe=Nn(_x,t=>{const e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1}),xHe={kernelName:_x,backendName:"cpu",kernelFunc:vHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bHe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:i,updates:s}=e,{shape:o}=r,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=Pp(s,i,o),h=!0,f=n.bufferSync(i),p=n.bufferSync(s),m=Tf(f,p,o,d,c,l,a,u,0,h);return n.makeTensorInfo(o,m.dtype,m.values)}const wHe={kernelName:Iee,backendName:"cpu",kernelFunc:bHe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kHe(t,e){let n=0,r=t.length,i=0;for(;n<r;)i=Math.floor((n+r)/2),t[i]<e?n=i+1:r=i;return r}function SHe(t,e){let n=0,r=t.length,i=0;for(;n<r;)i=Math.floor((n+r)/2),t[i]<=e?n=i+1:r=i;return r}function CHe(t,e,n,r,i,s){const o=Rr("int32",n*i);for(let a=0;a<n;++a){const l=t.slice(a*r,(a+1)*r),c=a*i;for(let u=0;u<i;++u)o[c+u]=s==="left"?kHe(l,e[u+c]):SHe(l,e[u+c])}return o}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NHe(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:i,values:s}=e,{side:o}=r,a=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values,c=CHe(a,l,i.shape[0],i.shape[1],s.shape[1],o);return n.makeTensorInfo(s.shape,"int32",c)}const AHe={kernelName:Eee,backendName:"cpu",kernelFunc:NHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IHe(t){const{inputs:e,backend:n}=t,{condition:r,t:i,e:s}=e;it([r,i,s],"select");const o=r.shape.length,a=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values,c=n.data.get(s.dataId).values,u=bo(i.dtype,s.dtype),d=os($e(i.shape),u);let h=0;const f=o===0||o>1||i.shape.length===1?1:$e(i.shape.slice(1));for(let p=0;p<a.length;p++)for(let m=0;m<f;m++)a[p]===1?d[h++]=l[p]:d[h++]=c[p];return n.makeTensorInfo(i.shape,u,d)}const _He={kernelName:d5,backendName:"cpu",kernelFunc:IHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EHe=$5,THe=P5,$He=Nn(Tx,t=>t>=0?THe*t:EHe*(Math.exp(t)-1)),PHe={kernelName:Tx,backendName:"cpu",kernelFunc:$He};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RHe=Nn(Rx,t=>t<0?-1:t>0?1:0),OHe={kernelName:Rx,backendName:"cpu",kernelFunc:RHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DHe=Nn($x,t=>Math.sin(t)),LHe={kernelName:$x,backendName:"cpu",kernelFunc:DHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MHe=Nn(Px,t=>Math.sinh(t)),FHe={kernelName:Px,backendName:"cpu",kernelFunc:MHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jHe=11920928955078125e-23,aV=Math.log(jHe)+2,BHe=Nn(Dx,t=>{const e=t>-aV,n=t<aV,r=Math.exp(t);let i;return n?i=r:e?i=t:i=Math.log(1+r),i}),zHe={kernelName:Dx,backendName:"cpu",kernelFunc:BHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:s,paddings:o}=r;it([i],"spaceToBatchND");const a=$e(s),l=[[0,0]];l.push(...o);for(let A=1+s.length;A<i.shape.length;++A)l.push([0,0]);const c=roe.kernelFunc({inputs:{x:i},backend:n,attrs:{paddings:l,constantValue:0}}),u=Kx(c.shape,s,a,!1),d=Xx(u.length,s.length,!1),h=Yx(c.shape,s,a,!1),m=Wn({inputs:{x:c},backend:n,attrs:{shape:u}}),v=Qs({inputs:{x:m},backend:n,attrs:{perm:d}}),S=Wn({inputs:{x:v},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),S}const VHe={kernelName:p5,backendName:"cpu",kernelFunc:UHe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WHe(t){const{inputs:e,backend:n}=t,{indices:r,values:i,denseShape:s,defaultValue:o}=e;if(s.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${s.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(i.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${i.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const a=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values,c=n.data.get(s.dataId).values,u=n.data.get(o.dataId).values[0],[d,h,f,p,m]=Ese(a,r.shape,r.dtype,l,i.dtype,c,u);return[n.makeTensorInfo(h,r.dtype,d),n.makeTensorInfo([h[0]],i.dtype,f),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(y=>Number(y)))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}const GHe={kernelName:Tee,backendName:"cpu",kernelFunc:WHe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qHe(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:i,newShape:s}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(i.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${i.shape}`);if(s.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${s.shape}`);const o=Array.from(n.data.get(i.dataId).values),a=n.data.get(r.dataId).values,l=Array.from(n.data.get(s.dataId).values),[c,u,d]=Tse(a,r.shape,r.dtype,o,l);return[n.makeTensorInfo(u,r.dtype,c),n.makeTensorInfo([d.length],s.dtype,new Int32Array(d))]}const HHe={kernelName:$ee,backendName:"cpu",kernelFunc:qHe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KHe(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${s.shape}`);if(i.shape[0]!==s.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values,[c,u]=XL(o,r.shape,r.dtype,a,l,!0);return n.makeTensorInfo(u,r.dtype,c)}const XHe={kernelName:Pee,backendName:"cpu",kernelFunc:KHe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YHe(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${s.shape}`);if(i.shape[0]!==s.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values,[c,u]=XL(o,r.shape,r.dtype,a,l);return n.makeTensorInfo(u,r.dtype,c)}const ZHe={kernelName:Ree,backendName:"cpu",kernelFunc:YHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JHe(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:i,sparseValues:s,defaultValue:o}=e,{outputShape:a}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:h}=Pp(s,i,a),f=!1,p=n.bufferSync(i);let m;switch(s.dtype){case"bool":{const y=n.bufferSync(s),g=!!n.data.get(o.dataId).values[0];m=Tf(p,y,a,h,u,c,l,d,g,f);break}case"float32":{const y=n.bufferSync(s),g=n.data.get(o.dataId).values[0];m=Tf(p,y,a,h,u,c,l,d,g,f);break}case"int32":{const y=n.bufferSync(s),g=n.data.get(o.dataId).values[0];m=Tf(p,y,a,h,u,c,l,d,g,f);break}case"string":{const y=n.bufferSync(s),g=ih(n.data.get(o.dataId).values[0]);m=Tf(p,y,a,h,u,c,l,d,g,f);break}default:throw new Error(`Unsupported type ${s.dtype}`)}return n.makeTensorInfo(a,m.dtype,m.values)}const QHe={kernelName:Oee,backendName:"cpu",kernelFunc:JHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eKe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{numOrSizeSplits:s,axis:o}=r,a=Yt(o,i.shape)[0],l=bL(i,s,a),c=new Array(i.shape.length).fill(0),u=i.shape.slice();return l.map(d=>{const h=[...u];h[a]=d;const f=xp({inputs:{x:i},backend:n,attrs:{begin:c,size:h}});return c[a]+=d,f})}const tKe={kernelName:m5,backendName:"cpu",kernelFunc:eKe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nKe={kernelName:rD,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e;it(n,"square");const i=r.data.get(n.dataId).values,s=new Float32Array(i.length);for(let a=0;a<i.length;++a){const l=i[a];s[a]=l*l}return{dataId:r.write(s,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rKe=Nn(Ux,(t,e)=>{const n=e;return isNaN(t)?NaN:t>0?1:n.alpha}),iKe={kernelName:Ux,backendName:"cpu",kernelFunc:rKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sKe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:s,end:o,strides:a,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:h}=r;it(i,"stridedSlice");const{finalShapeSparse:f,finalShape:p,isIdentity:m,sliceDim0:y,isSimpleSlice:g,begin:v,end:x,strides:b}=nL(i.shape,s,o,a,l,c,u,d,h);let S;if(m)S=Wn({inputs:{x:i},backend:n,attrs:{shape:p}});else if(y||g){Z(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);const A=QD(v,x,b),E=xp({inputs:{x:i},backend:n,attrs:{begin:v,size:A}});S=Wn({inputs:{x:E},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(E)}else{const A=n.bufferSync(i),E=Rse(f,A,b,v);S=n.makeTensorInfo(p,E.dtype,E.values)}return S}const oKe={kernelName:sD,backendName:"cpu",kernelFunc:sKe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aKe(t){const{inputs:e,backend:n,attrs:r}=t,{separator:i,nGramWidths:s,leftPad:o,rightPad:a,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:d}=e,h=n.data.get(u.dataId).values,f=n.data.get(d.dataId).values,[p,m]=Ose(h,f,i,s,o,a,l,c);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(d.shape,"int32",m)]}const lKe={kernelName:Dee,backendName:"cpu",kernelFunc:aKe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cKe(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:i}=r,{input:s,delimiter:o}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(s.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${s.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const a=n.data.get(s.dataId).values,l=n.data.get(o.dataId).values[0],[c,u,d]=Dse(a,l,i),h=u.length;return[n.makeTensorInfo([h,2],"int32",c),n.makeTensorInfo([h],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const uKe={kernelName:Lee,backendName:"cpu",kernelFunc:cKe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dKe(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:i}=r,{input:s}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");const o=n.data.get(s.dataId).values,a=Lse(o,i);return n.makeTensorInfo(s.shape,"int32",a)}const hKe={kernelName:Mee,backendName:"cpu",kernelFunc:dKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fKe=Nn(jx,t=>Math.tan(t)),pKe={kernelName:jx,backendName:"cpu",kernelFunc:fKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mKe=Nn(Bx,t=>Math.tanh(t)),gKe={kernelName:Bx,backendName:"cpu",kernelFunc:mKe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yKe(t){const{inputs:e,backend:n}=t,{tensor:r,indices:i,updates:s}=e,{sliceRank:o,numUpdates:a,sliceSize:l,strides:c,outputSize:u}=Pp(s,i,r.shape),d=!1,h=n.bufferSync(i),f=n.bufferSync(s),p=n.bufferSync(r),m=Tf(h,f,r.shape,u,l,a,o,c,p,d);return n.makeTensorInfo(r.shape,m.dtype,m.values)}const vKe={kernelName:_ee,backendName:"cpu",kernelFunc:yKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xKe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reps:s}=r;it(i,"tile");const o=Fse(n.bufferSync(i),s);return n.makeTensorInfo(o.shape,o.dtype,o.values)}const bKe={kernelName:zx,backendName:"cpu",kernelFunc:xKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wKe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{k:s,sorted:o}=r;it(i,"topk");const a=n.data.get(i.dataId).values,[l,c]=Bse(a,i.shape,i.dtype,s,o);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(c.shape,c.dtype,c.values)]}const kKe={kernelName:oD,backendName:"cpu",kernelFunc:wKe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SKe(t){const{inputs:e,attrs:n,backend:r}=t,{image:i,transforms:s}=e,{interpolation:o,fillMode:a,fillValue:l,outputShape:c}=n,[u,d,h,f]=i.shape,[p,m]=c??[d,h],y=[u,p,m,f],g=wt(i.shape),v=g[0],x=g[1],b=g[2],S=wt(y),A=S[0],E=S[1],I=S[2],T=ss(i.dtype,$e(y));T.fill(l);const O=r.data.get(i.dataId).values,$=r.data.get(s.dataId).values;for(let F=0;F<u;++F){const L=s.shape[0]===1?$:$.subarray(F*8,F*8+8);for(let U=0;U<p;++U)for(let q=0;q<m;++q)for(let K=0;K<f;++K){let j;const Y=L[6]*q+L[7]*U+1;if(Y===0)continue;const ae=(L[0]*q+L[1]*U+L[2])/Y,le=(L[3]*q+L[4]*U+L[5])/Y,M=lV(ae,h,a),V=lV(le,d,a);switch(o){case"nearest":j=EKe(O,d,h,v,x,b,F,V,M,K,l);break;case"bilinear":j=TKe(O,d,h,v,x,b,F,V,M,K,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${o}`)}const H=F*A+U*E+q*I+K;T[H]=j}return r.makeTensorInfo(y,i.dtype,T)}return{dataId:r.write(T,y,i.dtype),shape:i.shape,dtype:i.dtype}}const CKe={kernelName:aD,backendName:"cpu",kernelFunc:SKe};function lV(t,e,n){switch(n){case"reflect":return NKe(t,e);case"wrap":return AKe(t,e);case"nearest":return _Ke(t,e);case"constant":default:return IKe(t)}}function NKe(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=2*e;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-e?n+r:-n-1}else if(n>e-1)if(e<=1)n=0;else{const r=2*e;n-=r*Math.trunc(n/r),n>=e&&(n=r-n-1)}return op(0,n,e-1)}function AKe(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=e-1;n+=e*(Math.trunc(-n/r)+1)}else if(n>e-1)if(e<=1)n=0;else{const r=e-1;n-=e*Math.trunc(n/r)}return op(0,n,e-1)}function IKe(t,e){return t}function _Ke(t,e){return op(0,t,e-1)}function jy(t,e,n,r,i,s,o,a,l,c,u){const d=o*r+a*i+l*s+c;return 0<=a&&a<e&&0<=l&&l<n?t[d]:u}function EKe(t,e,n,r,i,s,o,a,l,c,u){const d=Math.round(a),h=Math.round(l);return jy(t,e,n,r,i,s,o,d,h,c,u)}function TKe(t,e,n,r,i,s,o,a,l,c,u){const d=Math.floor(a),h=Math.floor(l),f=d+1,p=h+1,m=(p-l)*jy(t,e,n,r,i,s,o,d,h,c,u)+(l-h)*jy(t,e,n,r,i,s,o,d,p,c,u),y=(p-l)*jy(t,e,n,r,i,s,o,f,h,c,u)+(l-h)*jy(t,e,n,r,i,s,o,f,p,c,u);return(f-a)*m+(a-d)*y}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ke(t){const{inputs:e,attrs:n,backend:r}=t,{axis:i}=n,{x:s}=e;it(s,"unique");const o=r.data.get(s.dataId).values,{outputValues:a,outputShape:l,indices:c}=zse(o,i,s.shape,s.dtype);return[r.makeTensorInfo(l,s.dtype,a),r.makeTensorInfo([c.length],"int32",c)]}const PKe={kernelName:lD,backendName:"cpu",kernelFunc:$Ke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RKe(t){const{inputs:e,backend:n,attrs:r}=t,{value:i}=e;let{axis:s}=r;s<0&&(s+=i.shape.length);const o=i.shape.length,a=i.shape[s],l=new Array(o-1);let c=0;for(let f=0;f<o;f++)f!==s&&(l[c++]=i.shape[f]);const u=new Array(o).fill(0),d=i.shape.slice();d[s]=1;const h=new Array(a);for(let f=0;f<h.length;f++){u[s]=f;const p=xp({inputs:{x:i},backend:n,attrs:{begin:u,size:d}});h[f]=Wn({inputs:{x:p},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(p)}return h}const OKe={kernelName:y5,backendName:"cpu",kernelFunc:RKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DKe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,segmentIds:s}=e,{numSegments:o}=r;it(i,"unsortedSegmentSum");const a=i.shape.length,l=s.shape.length,c=[],u=[],d=a-l;let h=s;for(let p=0;p<d;++p){const m=DS({inputs:{input:h},backend:n,attrs:{dim:p+1}});h=m,u.push(m)}for(let p=0;p<o;++p){const m=wh(p,"int32"),y=n.makeTensorInfo([],"int32",m),g=nse({inputs:{a:y,b:h},backend:n}),v=ch({inputs:{x:g},backend:n,attrs:{dtype:"float32"}}),x=W5({inputs:{a:v,b:i},backend:n}),b=sb({inputs:{x},backend:n,attrs:{axis:0,keepDims:!1}});c.push(b),u.push(y),u.push(g),u.push(v),u.push(x),u.push(b)}const f=noe({inputs:c,backend:n,attrs:{axis:0}});return u.forEach(p=>n.disposeIntermediateTensorInfo(p)),f}const LKe={kernelName:v5,backendName:"cpu",kernelFunc:DKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MKe=[$We,dVe,RWe,DWe,yVe,MWe,jWe,zWe,VWe,GWe,HWe,XWe,ZWe,e9e,n9e,s9e,a9e,c9e,d9e,EWe,f9e,m9e,y9e,xVe,x9e,mVe,wVe,w9e,hVe,S9e,N9e,A9e,_9e,T9e,P9e,O9e,L9e,F9e,B9e,U9e,W9e,q9e,K9e,Y9e,Z9e,Q9e,tGe,rGe,iGe,sGe,oGe,lGe,dGe,kWe,fGe,kVe,wGe,SVe,kGe,NVe,_Ge,EGe,$Ge,IVe,EVe,RGe,DGe,MGe,jGe,$Ve,RVe,fVe,zGe,C9e,VGe,GGe,HGe,SWe,DVe,MVe,XGe,jVe,ZGe,eqe,nqe,sqe,aqe,cqe,uqe,zVe,hqe,pqe,gqe,vqe,bqe,kqe,Cqe,VVe,Aqe,Eqe,Pqe,GVe,HVe,Dqe,Fqe,zqe,XVe,Vqe,Gqe,qqe,roe,Yqe,NWe,JVe,Jqe,eHe,nHe,iHe,pVe,i$,oHe,AWe,IWe,_We,lHe,uHe,hHe,pHe,gHe,yHe,xHe,oWe,wHe,AHe,_He,PHe,lWe,OHe,LHe,FHe,cWe,Tqe,zHe,VHe,GHe,HHe,XHe,ZHe,QHe,tKe,hWe,nKe,pWe,gWe,iKe,oKe,lKe,uKe,hKe,bWe,cGe,pKe,gKe,vKe,bKe,kKe,CKe,YVe,PKe,OKe,LKe,Wqe];for(const t of MKe)jee(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gf={},Jw={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function FKe(t,e){gf[t]=e}function Pl(t,e){if(!(t in gf)||e!=null){const r=BKe(t,e);if(r!==null)gf[t]=r;else return console.log("Could not get context for WebGL version",t),null}const n=gf[t];return n==null||n.isContextLost()?(delete gf[t],Pl(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),gf[t])}function jKe(t){if(!Ee().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function BKe(t,e){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=e??jKe(t);return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete gf[t]},!1),Ee().getBool("SOFTWARE_WEBGL_ENABLED")&&(Jw.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",Jw)||n.getContext("experimental-webgl",Jw):n.getContext("webgl2",Jw)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var av;(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(av||(av={}));var Go;(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(Go||(Go={}));var Fi;(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(Fi||(Fi={}));function ob(t,e){return[e,t]}function zKe(t,e){return t*e}function Qw(t){const e=$e(t),n=Math.ceil(e/4);return N3(n)}function p0(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function UKe(t,e){const[n,r]=p0(t,e);return n*r*4}function eM(t,e){const n=t;let r,i,s,o,a,l,c,u,d,h;return Ee().getNumber("WEBGL_VERSION")===2?(r=n.R32F,i=n.R16F,s=n.RGBA16F,o=n.RGBA32F,a=n.RED,c=4,u=1,d=n.HALF_FLOAT,h=n.FLOAT,l=n.RGBA8):(r=t.RGBA,i=t.RGBA,s=t.RGBA,o=n.RGBA,a=t.RGBA,c=4,u=4,d=e!=null?e.HALF_FLOAT_OES:null,h=t.FLOAT,l=t.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:i,internalFormatPackedHalfFloat:s,internalFormatPackedFloat:o,textureFormatFloat:a,downloadTextureFormat:l,downloadUnpackNumChannels:c,defaultNumChannels:u,textureTypeHalfFloat:d,textureTypeFloat:h}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qe(t,e){const n=e();return Ee().getBool("DEBUG")&&VKe(t),n}function VKe(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+HKe(t,e))}const WKe=596e-10,GKe=65504;function qKe(t){return!!(Ee().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||WKe<Math.abs(t)&&Math.abs(t)<GKe)}function HKe(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function e2(t,e){return Gu(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function KKe(t,e){const n=Gu(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(Qe(t,()=>t.shaderSource(n,e)),Qe(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function XKe(t,e){const n=Gu(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(Qe(t,()=>t.shaderSource(n,e)),Qe(t,()=>t.compileShader(n)),Ee().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw ioe(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const YKe=/ERROR: [0-9]+:([0-9]+):/g;function ioe(t,e){const n=YKe.exec(e);if(n==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(t);return}const r=+n[1],i=t.split(`
`),s=i.length.toString().length+2,o=i.map((d,h)=>Hm((h+1).toString(),s)+d);let a=0;for(let d=0;d<o.length;d++)a=Math.max(o[d].length,a);const l=o.slice(0,r-1),c=o.slice(r-1,r),u=o.slice(r);console.log(l.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${Hm(c[0],a)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(u.join(`
`))}function ZKe(t){return Gu(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function JKe(t,e){if(Qe(t,()=>t.linkProgram(e)),!Ee().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function T_(t,e){if(Qe(t,()=>t.validateProgram(e)),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function QKe(t,e){const n=Gu(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Qe(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),Qe(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function eXe(t,e){const n=Gu(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Qe(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),Qe(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function tXe(t){return Gu(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function nXe(t,e){const n=Ee().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const r=`[${t}x${e}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n){const r=`[${t}x${e}]`,i=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+i+".")}}function rXe(t){return Gu(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function cV(t,e,n,r,i,s,o){const a=t.getAttribLocation(e,n);return a===-1?!1:(Qe(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),Qe(t,()=>t.vertexAttribPointer(a,i,t.FLOAT,!1,s,o)),Qe(t,()=>t.enableVertexAttribArray(a)),!0)}function iXe(t,e,n){cXe(t,n),Qe(t,()=>t.activeTexture(t.TEXTURE0+n)),Qe(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function sXe(t,e,n){return Gu(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function oXe(t,e,n){return t.getUniformLocation(e,n)}function aXe(t,e,n,r){Qe(t,()=>iXe(t,e,r)),Qe(t,()=>t.uniform1i(n,r))}function $_(t,e,n){Qe(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),Qe(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function uV(t,e){Qe(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),Qe(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function t2(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+lXe(t,e))}function lXe(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function Gu(t,e,n){const r=Qe(t,()=>e());if(r==null)throw new Error(n);return r}function cXe(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n){const i=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${i}.`)}}function Eg(t,e=2){return $e(t.slice(0,t.length-e))}function Tg(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function n2(t){let e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[Eg(t),...Tg(t)]),e}function uXe(t,e=!1){let n=Ee().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=Ee().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&Ee().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),e&&(n=n*2,r=r*2,t=t.map((a,l)=>l>=t.length-2?xO(t[l]):t[l]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=bh(t).newShape);let i=$e(t),s=null;t.length<=1&&i<=n?s=[1,i]:t.length===2&&t[0]<=n&&t[1]<=n?s=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?s=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?s=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?s=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(s=[t[0],t[1]*t[2]*t[3]]);const o=s!=null&&Math.max(...s)>r&&Math.min(...s)<=(e?2:1)&&Math.min(...s)>0;if(s==null||o)if(e){const a=Eg(t);let l=2,c=2;t.length&&([l,c]=Tg(t)),i=a*(l/2)*(c/2),s=N3(i).map(u=>u*2)}else s=N3(i);return s}function r2(t){return t%2===0}function MS(t,e){if(t=t.slice(-2),e=e.slice(-2),xn(t,e)||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){const n=t[t.length-1],r=e[e.length-1];if(n===r||r2(n)&&r2(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&r2(t[0])&&r2(e[0])}let P_,R_;function dXe(t){if(P_==null){const e=Pl(t);P_=e.getParameter(e.MAX_TEXTURE_SIZE)}return P_}function hXe(t){if(R_==null){const e=Pl(t);R_=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,R_)}function fXe(t){if(t===0)return 0;let e;const n=Pl(t);return Da(n,"EXT_disjoint_timer_query_webgl2")&&t===2?e=2:Da(n,"EXT_disjoint_timer_query")?e=1:e=0,e}function Da(t,e){return t.getExtension(e)!=null}function dV(t){try{if(Pl(t)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function pXe(t){if(t===0)return!1;const e=Pl(t);if(t===1){if(!Da(e,"OES_texture_float"))return!1}else if(!Da(e,"EXT_color_buffer_float"))return!1;return o$(e)}function mXe(t){if(t===0)return!1;const e=Pl(t);if(t===1){if(!Da(e,"OES_texture_float")||!Da(e,"WEBGL_color_buffer_float"))return!1}else{if(Da(e,"EXT_color_buffer_float"))return o$(e);const r="EXT_color_buffer_half_float";if(Da(e,r)){const i=e.getExtension(r);return gXe(e,i)}return!1}return o$(e)}function o$(t){const e=eM(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n);const r=1,i=1;t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,r,i,0,e.textureFormatFloat,e.textureTypeFloat,null);const s=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,s),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(s),o}function gXe(t,e){const n=eM(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r);const i=1,s=1;t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,i,s,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(o),a}function yXe(t){return t!==2?!1:Pl(t).fenceSync!=null}function ab(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&Z(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ct=Ee();ct.registerFlag("HAS_WEBGL",()=>ct.getNumber("WEBGL_VERSION")>0);ct.registerFlag("WEBGL_VERSION",()=>dV(2)?2:dV(1)?1:0);ct.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);ct.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>ct.get("WEBGL_VERSION")===2);ct.registerFlag("WEBGL_CPU_FORWARD",()=>!0);ct.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);ct.registerFlag("WEBGL_PACK",()=>ct.getBool("HAS_WEBGL"));ct.registerFlag("WEBGL_PACK_NORMALIZATION",()=>ct.getBool("WEBGL_PACK"));ct.registerFlag("WEBGL_PACK_CLIP",()=>ct.getBool("WEBGL_PACK"));ct.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>ct.getBool("WEBGL_PACK"));ct.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>ct.getBool("WEBGL_PACK"));ct.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>ct.getBool("WEBGL_PACK"));ct.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>ct.getBool("WEBGL_PACK"));ct.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>ct.getBool("WEBGL_PACK"));ct.registerFlag("WEBGL_PACK_REDUCE",()=>ct.getBool("WEBGL_PACK"));ct.registerFlag("WEBGL_LAZILY_UNPACK",()=>ct.getBool("WEBGL_PACK"));ct.registerFlag("WEBGL_CONV_IM2COL",()=>ct.getBool("WEBGL_PACK"));ct.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>ct.getBool("WEBGL_PACK"));ct.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>dXe(ct.getNumber("WEBGL_VERSION")));ct.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>hXe(ct.getNumber("WEBGL_VERSION")));ct.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=ct.getNumber("WEBGL_VERSION");return t===0?0:fXe(t)});ct.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>ct.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!nte());ct.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>pXe(ct.getNumber("WEBGL_VERSION")));ct.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>ct.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:ct.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));ct.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>mXe(ct.getNumber("WEBGL_VERSION")));ct.registerFlag("WEBGL_FENCE_API_ENABLED",()=>yXe(ct.getNumber("WEBGL_VERSION")));ct.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>ct.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);ct.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});ct.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>nte()?1:-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)});ct.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);ct.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);ct.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);ct.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);ct.registerFlag("WEBGL_EXP_CONV",()=>!1);ct.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>ct.getBool("IS_TEST"));ct.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);ct.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);ct.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);ct.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Os(){let t,e,n,r,i,s,o,a,l,c;return Ee().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",i="texture",s="outputColor",o="out vec4 outputColor;",a=Ee().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",c=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",i="texture2D",s="gl_FragColor",o="",a=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,c=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:i,output:s,defineOutput:o,defineSpecialNaN:a,defineSpecialInf:l,defineRound:c}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dp(t,e,n="index"){const r=wt(e);return r.map((i,s)=>{const o=`int ${t[s]} = ${n} / ${i}`,a=s===r.length-1?`int ${t[s+1]} = ${n} - ${t[s]} * ${i}`:`index -= ${t[s]} * ${i}`;return`${o}; ${a};`}).join("")}function G5(t,e,n="index"){const r=wt(e);return r.map((i,s)=>{const o=`int ${t[s]} = ${n} / outShapeStrides[${s}]`,a=s===r.length-1?`int ${t[s+1]} = ${n} - ${t[s]} * outShapeStrides[${s}]`:`index -= ${t[s]} * outShapeStrides[${s}]`;return`${o}; ${a};`}).join("")}function vXe(t,e){const n=t.length,r=t.map(s=>`${e}[${s}]`),i=new Array(n-1);i[n-2]=r[n-1];for(let s=n-3;s>=0;--s)i[s]=`(${i[s+1]} * ${r[s+1]})`;return i}function xXe(t,e,n="index"){const r=t.map((s,o)=>o),i=vXe(r,e);return i.map((s,o)=>{const a=`int ${t[o]} = ${n} / ${i[o]}`,l=o===i.length-1?`int ${t[o+1]} = ${n} - ${t[o]} * ${i[o]}`:`index -= ${t[o]} * ${i[o]}`;return`${a}; ${l};`}).join("")}function tM(t){const e=wt(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function nM(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const soe=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:ooe}=aBe;function bXe(t,e,n){const r=[];if(t.forEach(f=>{const p=$e(f.shapeInfo.logicalShape);if(f.shapeInfo.isUniform?r.push(`uniform float ${f.name}${p>1?`[${p}]`:""};`):(r.push(`uniform sampler2D ${f.name};`),r.push(`uniform int offset${f.name};`)),n.enableShapeUniforms){const{uniformShape:m}=rM(n.packedInputs,f.shapeInfo.logicalShape,f.shapeInfo.texShape);switch(m.length){case 1:r.push(`uniform int ${f.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${f.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${f.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${f.name}Shape;`);break}r.push(`uniform ivec2 ${f.name}TexShape;`)}}),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(f=>{r.push(`uniform ${f.type} ${f.name}${f.arrayIndex?`[${f.arrayIndex}]`:""};`)});const i=r.join(`
`),s=t.map(f=>wXe(f,e,n.packedInputs,n.enableShapeUniforms)).join(`
`),o=e.texShape,a=Os(),l=CXe(a);let c,u,d=IXe(a);return e.isPacked?(c=kXe(e.logicalShape,o,n.enableShapeUniforms),u=AXe(a)):(c=SXe(e.logicalShape,o,n.enableShapeUniforms),u=NXe(a)),n.packedInputs&&(d+=$Xe),[d,l,u,i,c,s,n.userCode].join(`
`)}function m0(t,e=!1){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return VXe(t,e);case 1:return GXe(t,e);case 2:return HXe(t,e);case 3:return XXe(t,e);case 4:return ZXe(t,e);case 5:return JXe(t);case 6:return QXe(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function aoe(t,e){switch(t.shapeInfo.logicalShape.length){case 0:return UXe(t);case 1:return WXe(t,e);case 2:return qXe(t,e);case 3:return KXe(t,e);default:return YXe(t,e)}}function wXe(t,e,n=!1,r){let i="";n?i+=aoe(t,r):i+=m0(t,r);const s=t.shapeInfo.logicalShape,o=e.logicalShape;return s.length<=o.length&&(n?i+=eYe(t,e):i+=tYe(t,e)),i}function kXe(t,e,n){switch(t.length){case 0:return loe();case 1:return PXe(t,e,n);case 2:return BXe(t,e,n);case 3:return OXe(t,e,n);default:return LXe(t,e,n)}}function SXe(t,e,n){switch(t.length){case 0:return loe();case 1:return RXe(t,e,n);case 2:return zXe(t,e,n);case 3:return DXe(t,e,n);case 4:return MXe(t,e,n);case 5:return FXe(t,e);case 6:return jXe(t,e);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function CXe(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function NXe(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function AXe(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function IXe(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${_Xe}
    ${EXe}
    ${TXe}
  `}const _Xe=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,EXe=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,TXe=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,$Xe=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function loe(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function PXe(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return r[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function RXe(t,e,n){return e[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function OXe(t,e,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],i=Math.ceil(t[2]/2),s=i*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${s};
      index -= b * ${s};

      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec3(b, r, c);
    }
  `}function DXe(t,e,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${G5(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;const r=Dp(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function LXe(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],i=Math.ceil(t[t.length-1]/2),s=i*Math.ceil(t[t.length-2]/2);let o=s,a="",l="b, r, c";for(let c=2;c<t.length-1;c++)o*=t[t.length-c-1],a=`
      int b${c} = index / ${o};
      index -= b${c} * ${o};
    `+a,l=`b${c}, `+l;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${a}

      int b = index / ${s};
      index -= b * ${s};

      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec${t.length}(${l});
    }
  `}function MXe(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${G5(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;const r=Dp(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function FXe(t,e){const n=Dp(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function jXe(t,e){const n=Dp(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function BXe(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(xn(t,e))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const i=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec2(r, c);
    }
  `}function zXe(t,e,n){return xn(t,e)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function Lp(t){return`offset${t}`}function UXe(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=Os();return`
    vec4 ${n}() {
      return ${r.texture2D}(${e}, halfCR);
    }
  `}function VXe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[i,s]=t.shapeInfo.texShape;if(i===1&&s===1)return`
      float ${r}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const o=Lp(n);if(e)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${o});
      return sampleTexture(${n}, uv);
    }
  `;const[a,l]=t.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${a}, ${l}, ${o});
      return sampleTexture(${n}, uv);
    }
  `}function WXe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t.shapeInfo.texShape,s=Os();if(e)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${s.texture2D}(${n}, uv);
    }
  `;const o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${o[0]}, ${o[1]}, index);
      return ${s.texture2D}(${n}, uv);
    }
  `}function GXe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${g0(t)}
      }
    `;const i=t.shapeInfo.texShape,s=i[0],o=i[1];if(o===1&&s===1)return`
      float ${r}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const a=Lp(n);return o===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / ${s}.0);
        return sampleTexture(${n}, uv);
      }
    `:s===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / ${o}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:e?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${a});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${s}, ${o}, index + ${a});
      return sampleTexture(${n}, uv);
    }
  `}function qXe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=t.shapeInfo.texShape,o=s[0],a=s[1],l=Os();if(s!=null&&xn(n,s))return e?`
      vec4 ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${l.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${a}.0, ${o}.0);

        return ${l.texture2D}(${r}, uv);
      }
    `;if(e)return`
    vec4 ${i}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `;const c=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],u=Math.ceil(n[1]/2);return`
    vec4 ${i}(int row, int col) {
      vec2 uv = packedUVfrom2D(${u}, ${c[0]}, ${c[1]}, row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `}function HXe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=t.shapeInfo.texShape;if(s!=null&&xn(n,s)){if(e)return`
      float ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const h=s[0],f=s[1];return`
    float ${i}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${f}.0, ${h}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:o,keptDims:a}=bh(n),l=o;if(l.length<n.length){const h=y0(t,l),f=["row","col"];return`
      ${m0(h,e)}
      float ${i}(int row, int col) {
        return ${i}(${v0(f,a)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${g0(t)}
      }
    `;const c=s[0],u=s[1],d=Lp(r);return u===1?e?`
      float ${i}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${c}.0);
      return sampleTexture(${r}, uv);
    }
  `:c===1?e?`
      float ${i}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${u}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:e?`
      float ${i}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${d};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${i}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${d};
    vec2 uv = uvFromFlat(${c}, ${u}, index);
    return sampleTexture(${r}, uv);
  }
`}function KXe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=t.shapeInfo.texShape,o=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];if(n[0]===1){const h=n.slice(1),f=[1,2],p=y0(t,h),m=["b","row","col"];return`
        ${aoe(p,e)}
        vec4 ${i}(int b, int row, int col) {
          return ${i}(${v0(m,f)});
        }
      `}const a=Os();if(e)return`
    vec4 ${i}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `;const l=o[0],c=o[1],u=Math.ceil(n[2]/2),d=u*Math.ceil(n[1]/2);return`
    vec4 ${i}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${c}, ${d}, ${u}, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `}function XXe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=n[1]*n[2],o=n[2],{newShape:a,keptDims:l}=bh(n),c=a;if(c.length<n.length){const m=y0(t,c),y=["row","col","depth"];return`
        ${m0(m,e)}
        float ${i}(int row, int col, int depth) {
          return ${i}(${v0(y,l)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${s}, ${o}, 1)));
        ${g0(t)}
      }
    `;const u=t.shapeInfo.texShape,d=u[0],h=u[1],f=t.shapeInfo.flatOffset;if(h===s&&f==null)return e?`
      float ${i}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${i}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${o}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${h}.0, ${d}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(h===o&&f==null)return e?`
      float ${i}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${h}.0, ${d}.0);
      return sampleTexture(${r}, uv);
    }
  `;const p=Lp(r);return e?`
    float ${i}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${p};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${i}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${s} + col * ${o} + depth + ${p};
        vec2 uv = uvFromFlat(${d}, ${h}, index);
        return sampleTexture(${r}, uv);
      }
  `}function YXe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=Os();if(e)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${i.texture2D}(${n}, uv);
    }
  `;const s=t.shapeInfo.logicalShape,o=s.length,a=t.shapeInfo.texShape,l=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],c=l[0],u=l[1],d=Math.ceil(s[o-1]/2);let h=d*Math.ceil(s[o-2]/2),f="int b, int row, int col",p=`b * ${h} + (row / 2) * ${d} + (col / 2)`;for(let m=2;m<o-1;m++)f=`int b${m}, `+f,h*=s[o-m-1],p=`b${m} * ${h} + `+p;return`
    vec4 ${r}(${f}) {
      int index = ${p};
      int texR = index / ${u};
      int texC = index - texR * ${u};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${u}, ${c});
      return ${i.texture2D}(${n}, uv);
    }
  `}function ZXe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=n[3],o=n[2]*s,a=n[1]*o,{newShape:l,keptDims:c}=bh(n);if(l.length<n.length){const v=y0(t,l),x=["row","col","depth","depth2"];return`
      ${m0(v,e)}
      float ${i}(int row, int col, int depth, int depth2) {
        return ${i}(${v0(x,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${a}, ${o}, ${s}, 1)));
        ${g0(t)}
      }
    `;const u=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,h=d[0],f=d[1],p=`int stride2 = ${r}Shape[3];`,m=`int stride1 = ${r}Shape[2] * stride2;`,y=`int stride0 = ${r}Shape[1] * stride1;`;if(f===a&&u==null)return e?`
      float ${i}(int row, int col, int depth, int depth2) {
        ${p}
        ${m}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${o}, ${s}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${f}.0, ${h}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(f===s&&u==null)return e?`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${f}.0, ${h}.0);
        return sampleTexture(${r}, uv);
      }
    `;const g=Lp(r);return e?`
    float ${i}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${p}
      ${m}
      ${y}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${g});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${i}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${o} +
          depth * ${s} + depth2;
      vec2 uv = uvFromFlat(${h}, ${f}, index + ${g});
      return sampleTexture(${r}, uv);
    }
  `}function JXe(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e[4],s=e[3]*i,o=e[2]*s,a=e[1]*o,{newShape:l,keptDims:c}=bh(e);if(l.length<e.length){const m=y0(t,l),y=["row","col","depth","depth2","depth3"];return`
      ${m0(m)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${v0(y,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${a}, ${o}, ${s}, ${i})) +
          depth3;
        ${g0(t)}
      }
    `;const u=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,h=d[0],f=d[1];if(f===a&&u==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${o}, ${s}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${f}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(f===i&&u==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${f}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;const p=Lp(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${o} + depth * ${s} +
          depth2 * ${i} + depth3 + ${p};
      vec2 uv = uvFromFlat(${h}, ${f}, index);
      return sampleTexture(${n}, uv);
    }
  `}function QXe(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:i,keptDims:s}=bh(e);if(i.length<e.length){const y=y0(t,i),g=["row","col","depth","depth2","depth3","depth4"];return`
      ${m0(y)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${v0(g,s)});
      }
    `}const o=e[5],a=e[4]*o,l=e[3]*a,c=e[2]*l,u=e[1]*c;if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${u}, ${c}, ${l}, ${a})) +
          dot(
            vec2(depth3, depth4),
            vec2(${o}, 1)));
        ${g0(t)}
      }
    `;const d=t.shapeInfo.flatOffset,h=t.shapeInfo.texShape,f=h[0],p=h[1];if(p===u&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${c}, ${l}, ${a}, ${o})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${p}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(p===o&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${p}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;const m=Lp(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${u} + col * ${c} + depth * ${l} +
          depth2 * ${a} + depth3 * ${o} + depth4 + ${m};
      vec2 uv = uvFromFlat(${f}, ${p}, index);
      return sampleTexture(${n}, uv);
    }
  `}function g0(t){const e=t.name,n=$e(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function eYe(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",s=t.shapeInfo.logicalShape.length,o=e.logicalShape.length,a=ooe(t.shapeInfo.logicalShape,e.logicalShape),l=$n(o),c=o-s;let u;const d=["x","y","z","w","u","v"];s===0?u="":o<2&&a.length>=1?u="coords = 0;":u=a.map(v=>`coords.${d[v+c]} = 0;`).join(`
`);let h="";o<2&&s>0?h="coords":h=t.shapeInfo.logicalShape.map((v,x)=>`coords.${d[x+c]}`).join(", ");let f="return outputValue;";const m=$e(t.shapeInfo.logicalShape)===1,g=$e(e.logicalShape)===1;if(s===1&&!m&&!g)f=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(m&&!g)o===1?f=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:f=`
        return vec4(outputValue.x);
      `;else if(a.length){const v=s-2,x=s-1;a.indexOf(v)>-1&&a.indexOf(x)>-1?f="return vec4(outputValue.x);":a.indexOf(v)>-1?f="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":a.indexOf(x)>-1&&(f="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${i}() {
      ${l} coords = getOutputCoords();
      ${u}
      vec4 outputValue = get${r}(${h});
      ${f}
    }
  `}function tYe(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",s=e.texShape,o=t.shapeInfo.texShape,a=t.shapeInfo.logicalShape.length,l=e.logicalShape.length;if(!t.shapeInfo.isUniform&&a===l&&t.shapeInfo.flatOffset==null&&xn(o,s))return`
      float ${i}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const c=$n(l),u=ooe(t.shapeInfo.logicalShape,e.logicalShape),d=l-a;let h;const f=["x","y","z","w","u","v"];a===0?h="":l<2&&u.length>=1?h="coords = 0;":h=u.map(m=>`coords.${f[m+d]} = 0;`).join(`
`);let p="";return l<2&&a>0?p="coords":p=t.shapeInfo.logicalShape.map((m,y)=>`coords.${f[y+d]}`).join(", "),`
    float ${i}() {
      ${c} coords = getOutputCoords();
      ${h}
      return get${r}(${p});
    }
  `}function $n(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function rM(t,e,n){const{newShape:r,keptDims:i}=bh(e),s=e.length,o=t&&s===3&&e[0]===1,a=o?e.slice(1):r,l=!t&&s>1&&!xn(e,n)&&r.length<s||o;return{useSqueezeShape:l,uniformShape:l?a:e,keptDims:i}}function y0(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function v0(t,e){return e.map(n=>t[n]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nYe(t,e,n,r){const i=n.map((u,d)=>{const h={logicalShape:u.shape,texShape:u.isUniform?null:u.texData.texShape,isUniform:u.isUniform,isPacked:u.isUniform?!1:u.texData.isPacked,flatOffset:null};return u.texData!=null&&u.texData.slice!=null&&u.texData.slice.flatOffset>0&&(h.flatOffset=u.texData.slice.flatOffset),{name:e.variableNames[d],shapeInfo:h}}),s=i.map(u=>u.shapeInfo),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},a=bXe(i,o,e),l=XKe(t.gl,a),c=t.createProgram(l);return Ee().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:l,source:a,webGLProgram:c,inShapeInfos:s,outShapeInfo:o,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(c),Object.assign({program:e,fragmentShader:l,source:a,webGLProgram:c,inShapeInfos:s,outShapeInfo:o},coe(t,e,c)))}function coe(t,e,n){const r=[],i=[];let s,o,a,l=null,c=null;c=t.getUniformLocation(n,"NAN",!1),Ee().getNumber("WEBGL_VERSION")===1&&(l=t.getUniformLocation(n,"INFINITY",!1));const u=!1;for(const d of e.variableNames){const h={name:d,uniform:t.getUniformLocation(n,d,u),offset:t.getUniformLocation(n,`offset${d}`,u)};e.enableShapeUniforms&&(h.shape=t.getUniformLocation(n,`${d}Shape`,u),h.texShape=t.getUniformLocation(n,`${d}TexShape`,u)),r.push(h)}if(e.enableShapeUniforms&&(s=t.getUniformLocation(n,"outShape",u),a=t.getUniformLocation(n,"outShapeStrides",u),o=t.getUniformLocation(n,"outTexShape",u)),e.customUniforms)for(const d of e.customUniforms)i.push(t.getUniformLocation(n,d.name,u));return{variablesLocations:r,customUniformLocations:i,infLoc:l,nanLoc:c,outShapeLocation:s,outShapeStridesLocation:a,outTexShapeLocation:o}}function hV(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((n,r)=>{const i=n.logicalShape,s=e[r],o=s.shape;if(!xn(i,o))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${i} and ${o} must match`);if(n.isUniform&&s.isUniform)return;const a=n.texShape,l=s.isUniform?null:s.texData.texShape;if(!xn(a,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${a} and ${l} must match`)})}function rYe(t,e,n,r,i){e.program.enableShapeUniforms||(hV(e.inShapeInfos,n),hV([e.outShapeInfo],[r]));const s=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(s.texture,o[0],o[1]):t.setOutputMatrixTexture(s.texture,o[0],o[1]),t.setProgram(e.webGLProgram),t.bindVertexArray(e.webGLProgram.vao),Ee().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN);for(let l=0;l<n.length;++l){const c=n[l],{uniform:u,offset:d,shape:h,texShape:f}=e.variablesLocations[l];if(h){const{uniformShape:p}=rM(e.program.packedInputs,c.shape,c.texData.texShape);switch(p.length){case 1:t.gl.uniform1iv(h,new Int32Array(p));break;case 2:t.gl.uniform2iv(h,new Int32Array(p));break;case 3:t.gl.uniform3iv(h,new Int32Array(p));break;case 4:t.gl.uniform4iv(h,new Int32Array(p));break}}if(f&&t.gl.uniform2i(f,c.texData.texShape[0],c.texData.texShape[1]),u!=null){if(c.isUniform){if($e(c.shape)<2)t.gl.uniform1f(u,c.uniformValues[0]);else{let p=c.uniformValues;p instanceof Float32Array||(p=new Float32Array(p)),t.gl.uniform1fv(u,p)}continue}c.texData.slice!=null&&d!=null&&t.gl.uniform1i(d,c.texData.slice.flatOffset),t.setInputMatrixTexture(c.texData.texture.texture,u,l)}}const a=e.outShapeLocation;if(a)switch(r.shape.length){case 1:t.gl.uniform1iv(a,new Int32Array(r.shape));break;case 2:t.gl.uniform2iv(a,new Int32Array(r.shape));break;case 3:t.gl.uniform3iv(a,new Int32Array(r.shape));break;case 4:t.gl.uniform4iv(a,new Int32Array(r.shape));break}if(e.outShapeStridesLocation){const l=wt(r.shape);switch(r.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(l));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(l));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(l));break}}if(e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),e.program.customUniforms&&i)for(let l=0;l<e.program.customUniforms.length;++l){const c=e.program.customUniforms[l],u=e.customUniformLocations[l],d=i[l];if(c.type==="float")t.gl.uniform1fv(u,d);else if(c.type==="vec2")t.gl.uniform2fv(u,d);else if(c.type==="vec3")t.gl.uniform3fv(u,d);else if(c.type==="vec4")t.gl.uniform4fv(u,d);else if(c.type==="int")t.gl.uniform1iv(u,d);else if(c.type==="ivec2")t.gl.uniform2iv(u,d);else if(c.type==="ivec3")t.gl.uniform3iv(u,d);else if(c.type==="ivec4")t.gl.uniform4iv(u,d);else throw Error(`uniform type ${c.type} is not supported yet.`)}t.executeProgram()}function iYe(t,e,n){let r="";e.concat(n).forEach(o=>{const a=o.texData!=null&&o.texData.slice!=null&&o.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!o.isUniform){const l=o.texData.texShape,{useSqueezeShape:c,uniformShape:u,keptDims:d}=rM(t.packedInputs,o.shape,l);let h="",f="",p="";if(u.length===1&&t.packedInputs){const S=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];h=`${S[0]>1}_${S[1]>1}`}else if(u.length===2&&!t.packedInputs)f=`${u[0]>1}_${u[1]>1}`;else if(u.length>2&&!t.packedInputs){const S=wt(u);p=`${S[0]===l[1]}_${S[S.length-1]===l[1]}`}const m=o.shape.length,y=u.length===2&&xn(o.shape,l),g=$e(o.shape)===1,v=kg(o.shape,n.shape),x=!t.packedInputs&&m===n.shape.length&&xn(l,n.texData.texShape),b=t.packedInputs||u.length>2?"":`${l[0]>1}_${l[1]>1}`;r+=`${m}_${x}_${c?d:""}_${u.length}_${g}_${v}_${y}_${h}_${f}_${p}_${b}_${a}`}else{const l=o.isUniform?"uniform":o.texData.texShape;r+=`${o.shape}_${l}_${a}`}});const i=t.userCode;let s=t.constructor.name;return s+="_"+r+"_"+i+`${Ee().getNumber("WEBGL_VERSION")}`,s}function ds(t){return Ee().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sYe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=av.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Os();this.outputShape=e,this.enableShapeUniforms=ds(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?G5(["r","c","d"],e):Dp(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oYe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=av.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Os();this.outputShape=e,this.enableShapeUniforms=ds(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?G5(["r","c","d"],e):Dp(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class aYe{constructor(e){this.variableNames=["A"],this.outTexUsage=Go.DOWNLOAD;const n=Os();this.outputShape=e,this.userCode=`
      ${soe}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lYe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Go.DOWNLOAD;const n=Os();this.outputShape=e,this.userCode=`
      ${soe}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cYe={R:0,G:1,B:2,A:3};class fV{constructor(e,n=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const i=Os();this.outputShape=e,this.enableShapeUniforms=ds(this.outputShape.length);let s="result";n&&(s="floor(result * 255. + 0.5)");let o="";for(let a=0;a<r.length;a++){const l=r[a];o+=`
          if(offset == ${a}) {
            result = values[${cYe[l]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?nM():tM(e)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${i.texture2D}(A, uv);
          ${o}
        }
        ${i.output} = vec4(${s}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uYe{constructor(e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=Os();this.outputShape=e,this.enableShapeUniforms=ds(this.outputShape.length);let i="",s="result";n&&(s="floor(result * 255. + 0.5)");for(let o=0;o<=1;o++)for(let a=0;a<=1;a++){const l=o*2+a;i+=`
          localCoords = coords;
          if(localCoords[2] + ${a} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${a};
          if (localCoords[1] + ${o} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${o};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?nM():tM(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${i}

          ${r.output} = ${s};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dYe(t){const e=Os(),n=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return KKe(t,n)}function hYe(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return QKe(t,e)}function fYe(t){const e=new Uint16Array([0,1,2,2,1,3]);return eXe(t,e)}function lb(t,e,n,r,i,s){nXe(e,n);const o=tXe(t),a=t.TEXTURE_2D;return Qe(t,()=>t.bindTexture(a,o)),Qe(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),Qe(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),Qe(t,()=>t.texParameteri(a,t.TEXTURE_MIN_FILTER,t.NEAREST)),Qe(t,()=>t.texParameteri(a,t.TEXTURE_MAG_FILTER,t.NEAREST)),Ee().getNumber("WEBGL_VERSION")===1?Qe(t,()=>t.texImage2D(a,0,r,e,n,0,i,s,null)):Qe(t,()=>t.texStorage2D(a,1,r,e,n)),Qe(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:o,texShape:[n,e]}}function uoe(t){return t.internalFormatFloat}function pYe(t,e,n,r){const[i,s]=ob(e,n);return lb(t,i,s,uoe(r),r.textureFormatFloat,t.FLOAT)}function doe(t){return t.internalFormatHalfFloat}function mYe(t,e,n,r){const[i,s]=ob(e,n);return lb(t,i,s,doe(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function hoe(t){return t.downloadTextureFormat}function gYe(t,e,n,r){const[i,s]=ob(e,n);return lb(t,i,s,hoe(r),t.RGBA,t.UNSIGNED_BYTE)}function foe(t){return t.internalFormatPackedFloat}function yYe(t,e,n,r){const[i,s]=p0(e,n);return lb(t,i,s,foe(r),t.RGBA,t.FLOAT)}function poe(t){return t.internalFormatPackedHalfFloat}function vYe(t,e,n,r){const[i,s]=p0(e,n);return lb(t,i,s,poe(r),t.RGBA,r.textureTypeHalfFloat)}function xYe(t,e,n){return Qe(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),cV(t,e,"clipSpacePos",n,3,20,0)&&cV(t,e,"uv",n,2,20,12)}function bYe(t,e,n,r,i,s){Qe(t,()=>t.bindTexture(t.TEXTURE_2D,e));let o,a,l;i instanceof Uint8Array?(o=new Uint8Array(n*r*4),a=t.UNSIGNED_BYTE,l=t.RGBA):(o=new Float32Array(n*r*4),a=t.FLOAT,l=s.internalFormatPackedFloat),o.set(i),Ee().getNumber("WEBGL_VERSION")===2?Qe(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,r,t.RGBA,a,o)):Qe(t,()=>t.texImage2D(t.TEXTURE_2D,0,l,n,r,0,t.RGBA,a,o)),Qe(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function wYe(t,e,n){Qe(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?Ee().getNumber("WEBGL_VERSION")===2?Qe(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):Qe(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):Ee().getNumber("WEBGL_VERSION")===2?Qe(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):Qe(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),Qe(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function kYe(t,e,n,r){const i=t.createBuffer();Qe(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,i));const a=4*4*e*n;return Qe(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,a,t.STREAM_READ)),Qe(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),Qe(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),i}function SYe(t,e,n){const r=t,i=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}function CYe(t,e,n,r){const[i,s]=ob(e,n),o=4,a=new Uint8Array(zKe(e*n,o));return Qe(t,()=>t.readPixels(0,0,i,s,r.downloadTextureFormat,t.UNSIGNED_BYTE,a)),new Float32Array(a.buffer)}function NYe(t,e,n,r,i,s,o,a){const l=t,c=new Float32Array(UKe(s,o));return l.bindBuffer(l.PIXEL_PACK_BUFFER,e),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}function AYe(t,e,n){const r=new Float32Array(e*n*4);return Qe(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r)),r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class O_{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const n=Ee().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,FKe(n,e)):this.gl=Pl(n),e=this.gl,Ee().getNumber("WEBGL_VERSION")===2){const s=e;this.createVertexArray=()=>Qe(s,()=>s.createVertexArray()),this.bindVertexArray=o=>Qe(s,()=>s.bindVertexArray(o)),this.deleteVertexArray=o=>Qe(s,()=>s.deleteVertexArray(o)),this.getVertexArray=()=>Qe(s,()=>s.getParameter(s.VERTEX_ARRAY_BINDING))}else if(e!=null){const s=e.getExtension("OES_vertex_array_object");if(s==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>Qe(e,()=>s.createVertexArrayOES()),this.bindVertexArray=o=>Qe(e,()=>s.bindVertexArrayOES(o)),this.deleteVertexArray=o=>Qe(e,()=>s.deleteVertexArrayOES(o)),this.getVertexArray=()=>Qe(e,()=>e.getParameter(s.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float";const i="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),Ee().getNumber("WEBGL_VERSION")===1){const s="OES_texture_float",o="OES_texture_half_float";if(this.textureFloatExtension=e2(this.gl,s),Da(this.gl,o))this.textureHalfFloatExtension=e2(this.gl,o);else if(Ee().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),Da(this.gl,i))this.colorBufferHalfFloatExtension=e2(this.gl,i);else if(Ee().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",Da(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(Da(this.gl,i))this.colorBufferHalfFloatExtension=this.gl.getExtension(i);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=hYe(this.gl),this.indexBuffer=fYe(this.gl),this.framebuffer=rXe(this.gl),this.textureConfig=eM(this.gl,this.textureHalfFloatExtension)}get debug(){return Ee().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;Qe(e,()=>e.finish()),Qe(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),Qe(e,()=>e.deleteFramebuffer(this.framebuffer)),Qe(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),Qe(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),Qe(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,n){return this.throwIfDisposed(),pYe(this.gl,e,n,this.textureConfig)}createFloat16MatrixTexture(e,n){return this.throwIfDisposed(),mYe(this.gl,e,n,this.textureConfig)}createUnsignedBytesMatrixTexture(e,n){return this.throwIfDisposed(),gYe(this.gl,e,n,this.textureConfig)}uploadPixelDataToTexture(e,n){this.throwIfDisposed(),wYe(this.gl,e,n)}uploadDenseMatrixToTexture(e,n,r,i){this.throwIfDisposed(),bYe(this.gl,e,n,r,i,this.textureConfig)}createFloat16PackedMatrixTexture(e,n){return this.throwIfDisposed(),vYe(this.gl,e,n,this.textureConfig)}createPackedMatrixTexture(e,n){return this.throwIfDisposed(),yYe(this.gl,e,n,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(uV(this.gl,this.framebuffer),this.outputTexture=null),Qe(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,n,r){return this.downloadMatrixDriver(e,()=>CYe(this.gl,n,r,this.textureConfig))}downloadPackedMatrixFromBuffer(e,n,r,i,s,o){return NYe(this.gl,e,n,r,i,s,o,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,n){return SYe(this.gl,e,n)}createBufferFromTexture(e,n,r){this.bindTextureToFrameBuffer(e);const i=kYe(this.gl,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),i}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let n,r;if(Ee().getBool("WEBGL_FENCE_API_ENABLED")){const i=e,s=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{const o=i.clientWaitSync(s,0,0);return o===i.ALREADY_SIGNALED||o===i.CONDITION_SATISFIED},n=s}else Ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(n,Ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:n,isFencePassed:r}}downloadMatrixFromPackedTexture(e,n,r){return this.downloadMatrixDriver(e,()=>AYe(this.gl,n,r))}createProgram(e){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=dYe(n));const r=ZKe(n);Qe(n,()=>n.attachShader(r,this.vertexShader)),Qe(n,()=>n.attachShader(r,e)),JKe(n,r);const i=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&T_(n,i),i}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const n=this.gl;Qe(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),xYe(n,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&(Qe(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&T_(this.gl,this.program),Qe(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,n,r=!0){return this.throwIfDisposed(),r?sXe(this.gl,e,n):oXe(this.gl,e,n)}getAttributeLocation(e,n){return this.throwIfDisposed(),Qe(this.gl,()=>this.gl.getAttribLocation(e,n))}getUniformLocationNoThrow(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)}setInputMatrixTexture(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),aXe(this.gl,e,n,r)}setOutputMatrixTexture(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)}setOutputPackedMatrixTexture(e,n,r){this.throwIfDisposed();const[i,s]=p0(n,r);this.setOutputMatrixTextureDriver(e,i,s)}setOutputMatrixWriteRegion(e,n,r,i){this.setOutputMatrixWriteRegionDriver(r,e,i,n)}setOutputPackedMatrixWriteRegion(e,n,r,i){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&T_(this.gl,this.program),t2(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}Qe(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),Qe(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=e2(this.gl,Ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(Ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,i=this.getQueryTimerExtensionWebGL2(),s=r.createQuery();return r.beginQuery(i.TIME_ELAPSED_EXT,s),s}const e=this.getQueryTimerExtensionWebGL1(),n=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,n),n}endQuery(){if(Ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await eU(()=>this.disposed||this.isQueryAvailable(e,Ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,Ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,n){if(n===0)return null;if(n===2){const r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,n){if(n===0)return!0;if(n===2){const r=this.gl,i=this.getQueryTimerExtensionWebGL2(),s=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),s&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),i=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),i&&!this.disjoint}}pollFence(e){return new Promise(n=>{this.addItemToPoll(()=>e.isFencePassed(),()=>n())})}pollItems(){const e=IYe(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=e;++n){const{resolveFn:r}=this.itemsToPoll[n];r()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,n){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in Ee().platform&&(r=Ee().platform.setTimeoutCustom.bind(Ee().platform)),eU(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),$_(this.gl,e,this.framebuffer),this.debug&&t2(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?($_(this.gl,this.outputTexture,this.framebuffer),this.debug&&t2(this.gl)):uV(this.gl,this.framebuffer)}downloadMatrixDriver(e,n){this.bindTextureToFrameBuffer(e);const r=n();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,n,r){this.throwIfDisposed();const i=this.gl;$_(i,e,this.framebuffer),this.debug&&t2(i),this.outputTexture=e,Qe(i,()=>i.viewport(0,0,n,r)),Qe(i,()=>i.scissor(0,0,n,r))}setOutputMatrixWriteRegionDriver(e,n,r,i){this.throwIfDisposed(),Qe(this.gl,()=>this.gl.scissor(e,n,r,i))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function IYe(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:_Ye,bincountImpl:moe,bincountReduceImpl:EYe,bitwiseAndImpl:TYe,castImpl:$Ye,ceilImpl:PYe,concatImpl:RYe,equalImpl:OYe,expImpl:DYe,expm1Impl:LYe,floorImpl:MYe,gatherNdImpl:FYe,gatherV2Impl:jYe,greaterImpl:BYe,greaterEqualImpl:zYe,lessImpl:UYe,lessEqualImpl:VYe,linSpaceImpl:WYe,logImpl:GYe,maxImpl:qYe,maximumImpl:HYe,minimumImpl:KYe,multiplyImpl:XYe,negImpl:YYe,notEqualImpl:ZYe,prodImpl:JYe,raggedGatherImpl:QYe,raggedRangeImpl:eZe,raggedTensorToTensorImpl:tZe,rangeImpl:nZe,rsqrtImpl:rZe,scatterImpl:iZe,sigmoidImpl:sZe,simpleAbsImpl:goe,sliceImpl:oZe,sparseFillEmptyRowsImpl:aZe,sparseReshapeImpl:lZe,sparseSegmentReductionImpl:yoe,sqrtImpl:cZe,staticRegexReplaceImpl:uZe,stridedSliceImpl:dZe,stringNGramsImpl:hZe,stringSplitImpl:fZe,stringToHashBucketFastImpl:pZe,subImpl:mZe,tileImpl:gZe,topKImpl:yZe,transposeImpl:iM,uniqueImpl:vZe}=wWe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function voe(t,e){return["x","y","z","w","u","v"].slice(0,e).map(n=>`${t}.${n}`)}function Is(t,e){return e===1?[t]:voe(t,e)}function xZe(t,e){if(t===1)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bZe{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=ds(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=Is("rc",this.rank),r=$n(this.rank),i=this.getOutOfBoundsCondition(n),s=this.getSetup(n),o=this.getOutput(n);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${i}) {
            setOutput(vec4(0));
          } else {
            ${s}

            setOutput(vec4(${o}));
          }
        }
      `}}getSourceCoordsArr(e){const n=[];for(let r=0;r<=1;r++)for(let i=0;i<=1;i++){let s=`${r===0?"r":"rp1"}, ${i===0?"c":"cp1"}`;for(let o=2;o<this.rank;o++)s=`${e[e.length-1-o]},`+s;n.push(s)}return n}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let r=this.rank-2;r<this.rank;r++)n+=`${e[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(n+="||");return n}getSetup(e){if(this.rank===1)return"";const n=e.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],i=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${i};
    `}getOutput(e){const n=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xoe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=ds(this.outputShape.length);let r="";for(let i=0;i<4;i++){let s="thisRC = rc;";i%2===1&&(s+="thisRC.z += 1;"),i>1&&(s+="thisRC.y += 1;"),r+=`
        ${s}
        ${i>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${i}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${i>0?"}":""}
      `}this.userCode=`
      ${wZe(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?nM():tM(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${r}

        setOutput(result);
      }
    `}}function wZe(t,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?xXe(["r","c","d"],"inputShape"):Dp(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kZe{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,n,r){const i=mV(n,r),s=gV(e,i,r);s in this.freeTextures||(this.freeTextures[s]=[]),s in this.usedTextures||(this.usedTextures[s]=[]);const o=pV(e,i,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[s].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();const l=this.freeTextures[s].pop();return this.usedTextures[s].push(l),l}let a;return i===Fi.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):i===Fi.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):i===Fi.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):i===Fi.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):i===Fi.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[s].push(a),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),a}releaseTexture(e,n,r,i){if(this.freeTextures==null)return;const s=mV(r,i),o=gV(n,s,i);o in this.freeTextures||(this.freeTextures[o]=[]);const a=pV(n,s,this.gpgpu.gl,this.gpgpu.textureConfig,i),l=Ee().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=a):(this.freeTextures[o].push(e),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;const c=this.usedTextures[o],u=c&&c.indexOf(e);if(u==null||u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c[u]=c[c.length-1],c.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function SZe(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function pV(t,e,n,r,i){const s=CZe(e,r);let o;if(i){const[l,c]=p0(t[0],t[1]);o=l*c}else{const[l,c]=ob(t[0],t[1]);o=l*c}const a=SZe(n,s);return o*a}function CZe(t,e){switch(t){case Fi.PACKED_2X2_FLOAT32:return foe(e);case Fi.PACKED_2X2_FLOAT16:return poe(e);case Fi.UNPACKED_FLOAT32:return uoe(e);case Fi.UNPACKED_FLOAT16:return doe(e);case Fi.PACKED_4X1_UNSIGNED_BYTE:return hoe(e);default:throw new Error(`Unknown physical texture type ${t}`)}}function NZe(t){return Ee().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?Fi.PACKED_2X2_FLOAT32:Fi.UNPACKED_FLOAT32:t?Fi.PACKED_2X2_FLOAT16:Fi.UNPACKED_FLOAT16}function mV(t,e){if(t===Go.UPLOAD)return Fi.PACKED_2X2_FLOAT32;if(t===Go.RENDER||t==null)return NZe(e);if(t===Go.DOWNLOAD||t===Go.PIXELS)return Fi.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function gV(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ac{constructor(e,n){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=ds(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const Ja="if (isnan(x)) return x;",AZe="return x;",yV="return abs(x);",IZe="return (x >= 0.0) ? x : (exp(x) - 1.0);",_Ze=Ja+`
  return (x < 0.0) ? 0.0 : x;
`,EZe=Ja+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,vd="return x;",TZe="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Ze="return x;",PZe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,RZe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,OZe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,DZe="return 1.0 / (1.0 + exp(-1.0 * x));";class Td{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=ds(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LZe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=ds(this.outputShape.length);const n=e.length,r=Is("rc",n),i=$n(n),s=xZe(n,r),o=r.slice(-2),a=n<=1?"rc":`vec2(${o.join(",")})`;this.userCode=`
      void main() {
        ${i} rc = getOutputCoords();
        vec4 packedInput = getA(${s});

        setOutput(getChannel(packedInput, ${a}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MZe=Wte,FZe=1e-7,jZe=1e-4,i2={};function BZe(t){return t in i2||(i2[t]={}),i2[t]}const zZe=Ee().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),UZe=600;function VZe(){return Ee().global.screen==null?1024:Ee().global.screen.height*Ee().global.screen.width*window.devicePixelRatio*UZe/1024/1024}class q5 extends vO{nextDataId(){return q5.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!Ee().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(e!=null){if(e instanceof O_)n=e;else{const r=Pl(Ee().getNumber("WEBGL_VERSION"),e);n=new O_(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=Pl(Ee().getNumber("WEBGL_VERSION"));n=new O_(r),this.binaryCache=BZe(Ee().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new kZe(this.gpgpu),this.numMBBeforeWarning=VZe(),this.texData=new uee(this,Zl())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,n,r,i,s,o){const a=this.makeTensorInfo(n,r),l=this.texData.get(a.dataId);l.isPacked=!1,l.texture={texture:e,texShape:[i,s]},l.texShape=[i,s];const c=n2(n),u=new fV(c,!1,o),d=this.runWebGLProgram(u,[a],r,[[i,s]]);return d.shape=n,l.texture=null,this.disposeIntermediateTensorInfo(a),d.dataId}write(e,n,r){if((Ee().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||Ee().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const i={id:this.nextDataId()};return this.texData.set(i,{shape:n,dtype:r,values:e,usage:Go.UPLOAD,refCount:1}),i}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const n=this.texData.get(e);n.refCount++}decRef(e){if(this.texData.has(e)){const n=this.texData.get(e);n.refCount--}}move(e,n,r,i,s){if(Ee().getBool("DEBUG")&&this.checkNumericalProblems(n),i==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:i,values:n,usage:Go.UPLOAD,refCount:s})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const n=this.texData.get(e),{values:r,dtype:i,complexTensorInfos:s,slice:o,shape:a,isPacked:l}=n;if(o!=null){let h;l?h=new Td(a,vd):h=new ac(a,vd);const f=this.runWebGLProgram(h,[{dataId:e,shape:a,dtype:i}],i),p=this.readSync(f.dataId);return this.disposeIntermediateTensorInfo(f),p}if(r!=null)return this.convertAndCacheOnCPU(e);if(i==="string")return r;const c=this.activeTimers!=null;let u;c&&(u=js());let d;if(i==="complex64"){const h=this.readSync(s.real.dataId),f=this.readSync(s.imag.dataId);d=_u(h,f)}else d=this.getValuesFromTexture(e);return c&&(this.downloadWaitMs+=js()-u),this.convertAndCacheOnCPU(e,d)}async read(e){if(this.pendingRead.has(e)){const p=this.pendingRead.get(e);return new Promise(m=>p.push(m))}const n=this.texData.get(e),{values:r,shape:i,slice:s,dtype:o,complexTensorInfos:a,isPacked:l}=n;if(s!=null){let p;l?p=new Td(i,vd):p=new ac(i,vd);const m=this.runWebGLProgram(p,[{dataId:e,shape:i,dtype:o}],o),y=this.read(m.dataId);return this.disposeIntermediateTensorInfo(m),y}if(r!=null)return this.convertAndCacheOnCPU(e);if(Ee().getBool("DEBUG")&&!Ee().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&Ee().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let c=null,u;if(o!=="complex64"&&Ee().get("WEBGL_BUFFER_SUPPORTED")){u=this.decode(e);const p=this.texData.get(u.dataId);c=this.gpgpu.createBufferFromTexture(p.texture.texture,...Qw(i))}this.pendingRead.set(e,[]),o!=="complex64"&&await this.gpgpu.createAndWaitForFence();let d;if(o==="complex64"){const p=await Promise.all([this.read(a.real.dataId),this.read(a.imag.dataId)]),m=p[0],y=p[1];d=_u(m,y)}else if(c==null)d=this.getValuesFromTexture(e);else{const p=$e(i);d=this.gpgpu.downloadFloat32MatrixFromBuffer(c,p)}if(u!=null&&this.disposeIntermediateTensorInfo(u),c!=null){const p=this.gpgpu.gl;Qe(p,()=>p.deleteBuffer(c))}const h=this.convertAndCacheOnCPU(e,d),f=this.pendingRead.get(e);return this.pendingRead.delete(e),f.forEach(p=>p(h)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&Zl().removeDataId(e,this),this.pendingDeletes--),h}readToGPU(e,n={}){const r=this.texData.get(e),{values:i,shape:s,slice:o,dtype:a,isPacked:l,texture:c}=r;if(a==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(o!=null){let f;l?f=new Td(s,vd):f=new ac(s,vd);const p=this.runWebGLProgram(f,[{dataId:e,shape:s,dtype:a}],a),m=this.readToGPU(p,n);return this.disposeIntermediateTensorInfo(p),m}if(c==null)throw i!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const u=this.decode(e,n.customTexShape),d=Zl().makeTensorFromTensorInfo(u),h=this.texData.get(u.dataId);return Object.assign({tensorRef:d},h.texture)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(i=>ih(i));return Xt(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Xt(e.shape,e.dtype,n)}checkNumericalProblems(e){if(e!=null)for(let n=0;n<e.length;n++){const r=e[n];if(!qKe(r))throw Ee().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:n,dtype:r,isPacked:i}=this.texData.get(e),s=$e(n);if(Ee().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const h=this.decode(e),f=this.texData.get(h.dataId),p=this.gpgpu.downloadMatrixFromPackedTexture(f.texture.texture,...Qw(n)).subarray(0,s);return this.disposeIntermediateTensorInfo(h),p}const o=Ee().getBool("WEBGL_PACK")&&i===!0,a=o?n2(n):n,l=o?new lYe(a):new aYe(a),c=this.runWebGLProgram(l,[{shape:a,dtype:r,dataId:e}],"float32"),u=this.texData.get(c.dataId),d=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(u.texture.texture,u.texShape[0],u.texShape[1]).subarray(0,s);return this.disposeIntermediateTensorInfo(c),d}timerAvailable(){return Ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const n=this.activeTimers,r=[];let i=!1;this.programTimersStack==null?(this.programTimersStack=r,i=!0):this.activeTimers.push(r),this.activeTimers=r,e();const s=ap(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),o=ap(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=n,i&&(this.programTimersStack=null);const a={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(Ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(s);a.kernelMs=cDe(l),a.getExtraProfileInfo=()=>l.map((c,u)=>({name:o[u],ms:c})).map(c=>`${c.name}: ${c.ms}`).join(", ")}else a.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,a})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return Ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:js(),endMs:null}}endTimer(e){return Ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=js(),e)}async getQueryTime(e){if(Ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const n=e;return n.endMs-n.startMs}disposeData(e,n=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(n?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!n&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,n),this.disposeData(r.imag.dataId,n)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:n,dtype:r,texShape:i,usage:s,isPacked:o,slice:a}=this.texData.get(e),l=a&&a.origDataId||e,c=this.dataRefCount.get(l);c>1?this.dataRefCount.set(l,c-1):(this.dataRefCount.delete(l),n!=null&&(this.numBytesInGPU-=this.computeBytes(i,r),this.textureManager.releaseTexture(n,i,s,o)));const u=this.texData.get(e);u.texture=null,u.texShape=null,u.isPacked=!1,u.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,n=zZe){return Ee().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&$e(r.shape)<n)}getGPGPUContext(){return this.gpgpu}where(e){zo("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=e.dataSync();return MZe(e.shape,n)}packedUnaryOp(e,n,r){const i=new Td(e.shape,n),s=this.compileAndRun(i,[e],r);return Zl().makeTensorFromTensorInfo(s)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const i=goe(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,i)}if(Ee().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,yV,e.dtype);const n=new ac(e.shape,yV),r=this.compileAndRun(n,[e]);return Zl().makeTensorFromTensorInfo(r)}makeTensorInfo(e,n,r){let i;if(n==="string"&&r!=null&&r.length>0&&Hv(r[0])){const s=r.map(o=>Gd(o));i=this.write(s,e,n)}else i=this.write(r,e,n);return this.texData.get(i).usage=null,{dataId:i,shape:e,dtype:n}}makeOutput(e,n,r){return Zl().makeTensorFromTensorInfo(this.makeTensorInfo(e,n,r),this)}unpackTensor(e){const n=new LZe(e.shape);return this.runWebGLProgram(n,[e],e.dtype)}packTensor(e){const n=new bZe(e.shape),r=!0;return this.runWebGLProgram(n,[e],e.dtype,null,r)}packedReshape(e,n){const r=[Eg(e.shape),...Tg(e.shape)],i={dtype:e.dtype,shape:r,dataId:e.dataId},s=[Eg(n),...Tg(n)],o=new xoe(s,r),a=!0,l=[r],c=this.runWebGLProgram(o,[i],e.dtype,l,a);return{dataId:c.dataId,shape:n,dtype:c.dtype}}decode(e,n){const r=this.texData.get(e),{isPacked:i,shape:s,dtype:o}=r;if(n!=null){const h=$e(s),f=n[0]*n[1]*4;Z(h<=f,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const a=n2(s);let l;i?l=new oYe(a):l=new sYe(a);const c=!0,u=[n??Qw(a)],d=this.runWebGLProgram(l,[{shape:a,dtype:o,dataId:e}],o,u,c,n);return{dtype:o,shape:s,dataId:d.dataId}}runWebGLProgram(e,n,r,i,s=!1,o){const a=this.makeTensorInfo(e.outputShape,r),l=this.texData.get(a.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===av.DENSE){const g=o??Qw(e.outputShape);l.texShape=g.map(v=>v*2)}if(e.outTexUsage!=null&&(l.usage=e.outTexUsage),$e(a.shape)===0)return l.values=ss(a.dtype,0),a;const c=[],u=n.map(g=>{if(g.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let v=this.texData.get(g.dataId);if(v.texture==null){if(!e.packedInputs&&$e(g.shape)<=Ee().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:g.shape,texData:null,isUniform:!0,uniformValues:v.values};e.packedInputs&&(v.isPacked=!0,v.shape=g.shape)}if(this.uploadToGPU(g.dataId),!!v.isPacked!=!!e.packedInputs)g=v.isPacked?this.unpackTensor(g):this.packTensor(g),c.push(g),v=this.texData.get(g.dataId);else if(v.isPacked&&!MS(v.shape,g.shape)){const x=g,b=g.shape;g.shape=v.shape,g=this.packedReshape(g,b),c.push(g),v=this.texData.get(g.dataId),x.shape=b}return{shape:g.shape,texData:v,isUniform:!1}});this.uploadToGPU(a.dataId);const d={shape:a.shape,texData:l,isUniform:!1},h=iYe(e,u,d),f=this.getAndSaveBinary(h,()=>nYe(this.gpgpu,e,u,d)),p=this.activeTimers!=null;let m;p&&(m=this.startTimer()),Ee().get("ENGINE_COMPILE_ONLY")||rYe(this.gpgpu,f,u,d,i),c.forEach(g=>this.disposeIntermediateTensorInfo(g)),p&&(m=this.endTimer(m),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(m)}));const y=Ee().getNumber("WEBGL_FLUSH_THRESHOLD");if(y>0){const g=js();g-this.lastGlFlushTime>y&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=g)}if(!Ee().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&s===!1){const g=this.unpackTensor(a);return this.disposeIntermediateTensorInfo(a),g}return a}compileAndRun(e,n,r,i,s=!1){return r=r||n[0].dtype,this.runWebGLProgram(e,n,r,i,s)}getAndSaveBinary(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(Ee().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=Ne(()=>{if(!Ee().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=Ee().getBool("DEBUG");Ee().set("DEBUG",!1);const n=this.abs(Rt(1e-8)).dataSync()[0];if(Ee().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?FZe:jZe}uploadToGPU(e){const n=this.texData.get(e),{shape:r,dtype:i,values:s,texture:o,usage:a,isPacked:l}=n;if(o!=null)return;const c=this.activeTimers!=null;let u;c&&(u=js());let d=n.texShape;if(d==null&&(d=uXe(r,l),n.texShape=d),s!=null){const h=n2(r);let f,p=d[1],m=d[0];const y=s instanceof Uint8Array||s instanceof Uint8ClampedArray;(l||!y)&&([p,m]=p0(d[0],d[1])),l?f=new uYe(h,y):f=new fV(h,y);const g=y?[m,p]:d,v=this.makeTensorInfo(g,i),x=this.texData.get(v.dataId);y?x.usage=Go.PIXELS:x.usage=Go.UPLOAD,x.texShape=g,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(v.dataId),p,m,s);const b=[[m,p]],S=!0,A=this.runWebGLProgram(f,[v],i,b,S),E=this.texData.get(A.dataId);n.texShape=E.texShape,n.isPacked=E.isPacked,n.usage=E.usage,Ee().get("ENGINE_COMPILE_ONLY")?this.disposeData(A.dataId):(n.texture=E.texture,n.values=null,this.texData.delete(A.dataId)),this.disposeIntermediateTensorInfo(v),c&&(this.uploadWaitMs+=js()-u)}else{const h=this.acquireTexture(d,a,i,l);n.texture=h}}convertAndCacheOnCPU(e,n){const r=this.texData.get(e),{dtype:i}=r;return n!=null&&(r.values=WZe(n,i)),r.values}acquireTexture(e,n,r,i){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const s=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${s} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,n,i)}computeBytes(e,n){return e[0]*e[1]*fS(n)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(n));return Promise.all(e)}else{for(const[,n]of Object.entries(this.binaryCache)){const r=new Promise(i=>{try{this.checkCompletion_(n),i(!0)}catch(s){throw s}});e.push(r)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await ane(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(ioe(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:n,customUniformLocations:r,infLoc:i,nanLoc:s,outShapeLocation:o,outShapeStridesLocation:a,outTexShapeLocation:l}=coe(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=n,e.customUniformLocations=r,e.infLoc=i,e.nanLoc=s,e.outShapeLocation=o,e.outShapeStridesLocation=a,e.outTexShapeLocation=l}}createTensorFromGPUData(e,n,r){e.channels=e.channels||"RGBA";const{texture:i,height:s,width:o,channels:a}=e,l=Zl().backend;if(!l.gpgpu.gl.isTexture(i))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const c=l.writeTexture(i,n,r,s,o,a);return Zl().makeTensorFromDataId(c,n,r,l)}}q5.nextDataId=0;function WZe(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){const n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}else throw new Error(`Unknown dtype ${e}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rte()&&ate("webgl",()=>new q5,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sM=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class bp{constructor(e,n,r){this.variableNames=["A","B"],this.outputShape=Ut(n,r),this.enableShapeUniforms=ds(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mp=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class x0{constructor(e,n,r,i=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Ut(n,r);const s=this.outputShape.length;this.enableShapeUniforms=ds(s);let o="";if(i)if(s===0||$e(this.outputShape)===1)o=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(o=`
          ${$n(s)} coords = getOutputCoords();
        `,s===1)this.enableShapeUniforms?o+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:o+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const l=Is("coords",s);this.enableShapeUniforms?o+=`
            bool nextRowOutOfBounds =
              (${l[s-2]} + 1) >= outShape[${s} - 2];
            bool nextColOutOfBounds =
              (${l[s-1]} + 1) >= outShape[${s} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:o+=`
            bool nextRowOutOfBounds =
              (${l[s-2]} + 1) >= ${this.outputShape[s-2]};
            bool nextColOutOfBounds =
              (${l[s-1]} + 1) >= ${this.outputShape[s-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${o}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ko(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const GZe={kernelName:px,backendName:"webgl",kernelFunc:ko};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _h(t){const{inputs:e,backend:n}=t,{real:r,imag:i}=e,s=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(s.dataId),a=ko({inputs:{x:r},backend:n}),l=ko({inputs:{x:i},backend:n});return o.complexTensorInfos={real:a,imag:l},s}const qZe={kernelName:TO,backendName:"webgl",kernelFunc:_h};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const boe="return (a < 0.) ? b * a : a;",woe=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function HZe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{alpha:s}=r,o=n.makeTensorInfo([],"float32",wh(s,"float32")),a=Ee().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new x0(woe,i.shape,o.shape):new bp(boe,i.shape,o.shape),l=n.runWebGLProgram(a,[i,o],"float32");return n.disposeIntermediateTensorInfo(o),l}const KZe={kernelName:BN,backendName:"webgl",kernelFunc:HZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const koe="return (a < 0.) ? b * a : a;",Soe=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function XZe(t){const{inputs:e,backend:n}=t,{x:r,alpha:i}=e,s=Ee().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new x0(Soe,r.shape,i.shape):new bp(koe,r.shape,i.shape);return n.runWebGLProgram(s,[r,i],"float32")}const YZe={kernelName:s5,backendName:"webgl",kernelFunc:XZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b0="if (isnan(x)) return x;";function un({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:r}){return({inputs:i,backend:s})=>{const{x:o}=i,a=s,l=r||o.dtype;if(a.shouldExecuteOnCPU([o])&&n!=null){const d=a.texData.get(o.dataId),h=n(d.values,l);return a.makeTensorInfo(o.shape,l,h)}const c=Ee().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let u;return c?u=new Td(o.shape,e):u=new ac(o.shape,t),a.runWebGLProgram(u,[o],l)}}function Gi({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:i,dtype:s}){return({inputs:o,backend:a})=>{const{a:l,b:c}=o,u=a;if(r&&l.dtype==="complex64"){const p=u.texData.get(l.dataId),m=u.texData.get(c.dataId),[y,g]=[[p.complexTensorInfos.real,m.complexTensorInfos.real],[p.complexTensorInfos.imag,m.complexTensorInfos.imag]].map(x=>{const[b,S]=x,A={dataId:b.dataId,dtype:b.dtype,shape:l.shape},E={dataId:S.dataId,dtype:S.dtype,shape:c.shape},I=new bp(t,l.shape,c.shape);return u.runWebGLProgram(I,[A,E],bo(b.dtype,S.dtype))}),v=_h({inputs:{real:y,imag:g},backend:u});return u.disposeIntermediateTensorInfo(y),u.disposeIntermediateTensorInfo(g),v}const d=s||bo(l.dtype,c.dtype);if((l.dtype==="string"||c.dtype==="string"||u.shouldExecuteOnCPU([l,c]))&&i!=null){const p=u.texData.get(l.dataId).values,m=u.texData.get(c.dataId).values,y=l.dtype==="string"?Eu(p):p,g=l.dtype==="string"?Eu(m):m,[v,x]=i(l.shape,c.shape,y,g,d),b=u.makeTensorInfo(x,d),S=u.texData.get(b.dataId);return S.values=v,b}const h=Ee().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let f;return h?f=new x0(e,l.shape,c.shape,n):f=new bp(t,l.shape,c.shape),u.runWebGLProgram(f,[l,c],d)}}function lv(t,e=!1){if(t==="linear")return e?$Ze:AZe;if(t==="relu")return e?RZe:_Ze;if(t==="elu")return e?PZe:IZe;if(t==="relu6")return e?OZe:EZe;if(t==="prelu")return e?Soe:koe;if(t==="leakyrelu")return e?woe:boe;if(t==="sigmoid")return e?DZe:TZe;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Coe{constructor(e,n,r,i=!1,s=!1,o=!1,a=null,l=!1,c=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=ds(this.outputShape.length);const u=i?e[1]:e[2],d=Math.ceil(u/2),h=i?"i * 2, rc.y":"rc.y, i * 2",f=s?"rc.z, i * 2":"i * 2, rc.z",p=i?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=s?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let y="",g="";a&&(l?y=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${a}
        }`:c?y=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${a}
        }`:y=`vec4 activation(vec4 x) {
          ${a}
        }`,g="result = activation(result);");const v=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let x="rc.x",b="rc.x";e[0]<n[0]?x=`imod(rc.x, ${e[0]})`:n[0]<e[0]&&(b=`imod(rc.x, ${n[0]})`),this.userCode=`
      ${y}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${d}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${x};
        int batchB = ${b};
        for (int i = 0; i < ${d}; i++) {
          vec4 a = getMatrixA(batchA, ${h});
          vec4 b = getMatrixB(batchB, ${f});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${p[0]} * ${m[0]});
          result += (${p[1]} * ${m[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${v}

        ${g}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vV={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class xV{constructor(e,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Ut(n,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bV="return a * b;";function oM(t){const{inputs:e,backend:n}=t,{a:r,b:i}=e,s=bo(r.dtype,i.dtype);if(r.dtype==="complex64"){const a=n.texData.get(r.dataId),l=n.texData.get(i.dataId),c=new xV(vV.REAL,r.shape,i.shape),u=new xV(vV.IMAG,r.shape,i.shape),d=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:r.shape},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:i.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:i.shape}],h=n.runWebGLProgram(c,d,"float32"),f=n.runWebGLProgram(u,d,"float32"),p=_h({inputs:{real:h,imag:f},backend:n});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),p}if(n.shouldExecuteOnCPU([r,i])){const a=n.texData.get(r.dataId),l=n.texData.get(i.dataId),[c,u]=XYe(r.shape,i.shape,a.values,l.values,s),d=n.makeTensorInfo(u,s),h=n.texData.get(d.dataId);return h.values=c,d}let o;return Ee().getBool("WEBGL_PACK_BINARY_OPERATIONS")?o=new x0(bV,r.shape,i.shape):o=new bp(bV,r.shape,i.shape),n.runWebGLProgram(o,[r,i],s)}const ZZe={kernelName:Sx,backendName:"webgl",kernelFunc:oM};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JZe(t,e,n){const r=[Eg(t.shape),...Tg(t.shape)],i={dtype:t.dtype,shape:r,dataId:t.dataId},s=[Eg(e),...Tg(e)],o=new xoe(s,r),a=!0,l=[r],c=n.runWebGLProgram(o,[i],t.dtype,l,a);return{dataId:c.dataId,shape:e,dtype:c.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{shape:s}=r,o=n,a=$e(i.shape),l=hee(s,a),c=$e(l);Z(a===c,()=>`The new shape (${l}) has ${c} elements and the old shape (${i.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`);const u=o.texData.get(i.dataId);return u.isPacked&&!MS(i.shape,l)&&!(u.texture!==null&&MS(u.shape,l))?JZe(i,l,o):(o.incRef(i.dataId),{dataId:i.dataId,shape:l,dtype:i.dtype})}const QZe={kernelName:a5,backendName:"webgl",kernelFunc:qe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wV{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:i,inSize:s,outSize:o}=e;this.outputShape=[i,o];const a=Math.floor(r/4)*4,l=r%4;let c="sumValue += dot(values, ones);";if(n!=null){const d=1/n;c=`sumValue += dot(values * ${vg(d)?d.toPrecision(2):d}, ones);`}let u="";s%r>0&&(u=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${u}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${a}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${c}
        }

        int inIdx = inOffset + ${a};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${c}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${c}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${c}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eJe{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:i,inSize:s,outSize:o}=e;this.outputShape=[i,o];let a="0.0",l="";n==="prod"?a="1.0":n==="min"?(a="1.0 / 1e-20",l="min"):n==="max"&&(a="-1.0 / 1e-20",l="max");let c=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?c="sumValue":n==="prod"?c="prodValue":n==="all"?c="allValue":n==="any"&&(c="anyValue");const u=Math.floor(r/4)*4,d=r%4;let h=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,f="vec4";n==="all"?(a="1.0",h=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,f="bvec4"):n==="any"&&(a="0.0",h=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,f="bvec4");let p="";s%r>0&&(p=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${a};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${p}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${a});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          ${f} values = ${f}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${h}
        }

        int inIdx = inOffset + ${u};
        if (${d===1}) {
          ${f} values = ${f}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${h}
        } else if (${d===2}) {
          ${f} values = ${f}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${h}
        } else if (${d===3}) {
          ${f} values = ${f}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${h}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tJe(t){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const n=e.length?e[e.length-1].outSize:t[1],r=T5(n);e.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return e}function Fp(t,e,n,r){const i=tJe(t.shape);let s=t;for(let o=0;o<i.length;o++){const{inSize:a,windowSize:l,outSize:c}=i[o];let u,d;n==="mean"?u=o===0?new wV({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c},a):new wV({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c}):u=new eJe({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c},n),d=s,s=r.runWebGLProgram(u,[s],e),d.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(d)}return s}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nJe{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[n[o]];this.outputShape=r,this.rank=r.length;const i=$n(this.rank),s=rJe(n);this.userCode=`
    void main() {
      ${i} resRC = getOutputCoords();
      setOutput(getA(${s}));
    }
    `}}function rJe(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let i=0;i<t.length;i++)r[t[i]]=n[i];return r.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iJe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(e.length);for(let u=0;u<r.length;u++)r[u]=e[n[u]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const i=$n(this.rank),s=voe("rc",this.rank),o=new Array(this.rank);for(let u=0;u<n.length;u++)o[n[u]]=s[u];const a=`vec2(${o.slice(-2).join()})`,l=`++${s[this.rank-1]} < ${r[this.rank-1]}`,c=`getChannel(getA(${o.join()}), ${a})`;this.userCode=`
    void main() {
      ${i} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${c};
      if(${l}) {
        result[1] = ${c};
      }
      --${s[this.rank-1]};
      if(++${s[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${c};
        if(${l}) {
          result[3] = ${c};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H5(t,e,n){const r=Ee().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new iJe(t.shape,e):new nJe(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sJe(t,e,n,r){const i=e,s=t.shape.length,o=Yt(i,t.shape);let a=o;const l=yr(a,s),c=l!=null;let u=t;c&&(u=H5(t,l,r),a=Mr(a.length,s)),Wi("sum",a,s);const[d,h]=Pi(u.shape,a);let f=d;n&&(f=Dr(d,o));const p=$e(h),y=$e(t.shape)/p,g=qe({inputs:{x:u},attrs:{shape:[y,p]},backend:r}),v=dD(t.dtype),x=Fp(g,v,"sum",r),b=qe({inputs:{x},attrs:{shape:f},backend:r});return r.disposeIntermediateTensorInfo(g),r.disposeIntermediateTensorInfo(x),c&&r.disposeIntermediateTensorInfo(u),b}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K5(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r;return sJe(i,s,o,n)}const oJe={kernelName:f5,backendName:"webgl",kernelFunc:K5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rs(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{perm:s}=r,o=n,a=i.shape.length,l=new Array(a);for(let u=0;u<l.length;u++)l[u]=i.shape[s[u]];let c;if(o.shouldExecuteOnCPU([i])){const d=o.texData.get(i.dataId).values,h=iM(d,i.shape,i.dtype,s,l);c=o.makeTensorInfo(l,i.dtype);const f=o.texData.get(c.dataId);f.values=h}else c=H5(i,s,o);return c}const aJe={kernelName:Km,backendName:"webgl",kernelFunc:Rs};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Noe=1e3;function FS({a:t,b:e,transposeA:n,transposeB:r,backend:i,bias:s=null,preluActivationWeights:o=null,leakyreluAlpha:a=0,activation:l=null}){const c=t.shape.length,u=e.shape.length,d=n?t.shape[c-2]:t.shape[c-1],h=r?e.shape[u-1]:e.shape[u-2],f=n?t.shape[c-1]:t.shape[c-2],p=r?e.shape[u-2]:e.shape[u-1],m=t.shape.slice(0,-2),y=e.shape.slice(0,-2),g=$e(m),v=$e(y),b=Ut(t.shape.slice(0,-2),e.shape.slice(0,-2)).concat([f,p]);Z(d===h,()=>`Error in matMul: inner shapes (${d}) and (${h}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${r} must match.`);const S=n?[g,d,f]:[g,f,d],A=r?[v,p,h]:[v,h,p],E=qe({inputs:{x:t},backend:i,attrs:{shape:S}}),I=qe({inputs:{x:e},backend:i,attrs:{shape:A}}),T=[E,I],O=Math.max(g,v),$=n?E.shape[1]:E.shape[2],R=s!=null,F=o!=null,L=l==="leakyrelu",U=l!=null?lv(l,!0):null,q=R||F||L||U!=null;let K;if((f===1||p===1)&&$>Noe&&q===!1){let Y=E,ae=I;n&&(Y=Rs({inputs:{x:E},backend:i,attrs:{perm:[0,2,1]}}),T.push(Y)),r&&(ae=Rs({inputs:{x:I},backend:i,attrs:{perm:[0,2,1]}}),T.push(ae));const le=p!==1,M=p===1;let V=Y;le&&(V=qe({inputs:{x:Y},backend:i,attrs:{shape:[O,$,1]}}),T.push(V));const H=p===1?2:1;let J=ae;M&&(J=qe({inputs:{x:ae},backend:i,attrs:{shape:[O,1,$]}}),T.push(J));const oe=oM({inputs:{a:V,b:J},backend:i});K=K5({inputs:{x:oe},backend:i,attrs:{axis:H,keepDims:!0}}),T.push(oe)}else{const Y=bo(t.dtype,e.dtype),ae=new Coe(S,A,[O,f,p],n,r,R,U,F,L),le=[E,I];if(s!=null&&le.push(s),F&&le.push(o),L){const M=i.makeTensorInfo([],"float32",wh(a,"float32"));le.push(M),T.push(M)}K=i.runWebGLProgram(ae,le,Y)}const j=qe({inputs:{x:K},backend:i,attrs:{shape:b}});T.push(K);for(const Y of T)i.disposeIntermediateTensorInfo(Y);return j}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lJe(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:s,bias:o,preluActivationWeights:a}=e,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:d}=r;return FS({a:i,b:s,transposeA:l,transposeB:c,backend:n,bias:o,preluActivationWeights:a,leakyreluAlpha:d,activation:u})}const cJe={kernelName:pS,backendName:"webgl",kernelFunc:lJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kV="return abs(x);";function uJe(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const s=n.texData.get(r.dataId),o=goe(s.values);return n.makeTensorInfo(r.shape,r.dtype,o)}let i;return Ee().getBool("WEBGL_PACK_UNARY_OPERATIONS")?i=new Td(r.shape,kV):i=new ac(r.shape,kV),n.runWebGLProgram(i,[r],r.dtype)}const dJe={kernelName:bN,backendName:"webgl",kernelFunc:uJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hJe=Ja+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,fJe=un({opSnippet:hJe}),pJe={kernelName:Kv,backendName:"webgl",kernelFunc:fJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mJe=Ja+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,gJe=un({opSnippet:mJe}),yJe={kernelName:Xv,backendName:"webgl",kernelFunc:gJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SV="return a + b;",vJe=Gi({opSnippet:SV,packedOpSnippet:SV,supportsComplex:!0,cpuKernelImpl:_Ye}),xJe={kernelName:a0,backendName:"webgl",kernelFunc:vJe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bJe{constructor(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((s,o)=>`T${o}`);const r=[];this.variableNames.forEach(s=>{r.push(`float v${s} = get${s}AtOutCoords();`)});const i=this.variableNames.map(s=>`v${s}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${i};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wJe{constructor(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((s,o)=>`T${o}`);const r=[];this.variableNames.forEach(s=>{r.push(`vec4 v${s} = get${s}AtOutCoords();`)});const i=this.variableNames.map(s=>`v${s}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${i};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U2(t){const{inputs:e,backend:n}=t,r=e;if(r.length===1)return ko({inputs:{x:r[0]},backend:n});if(r.length>Ee().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const l=Math.floor(r.length/2),c=U2({inputs:r.slice(0,l),backend:n}),u=U2({inputs:r.slice(l),backend:n});return U2({inputs:[c,u],backend:n})}const i=r.map(l=>l.dtype).reduce((l,c)=>bo(l,c)),s=r.map(l=>l.shape),a=Ee().getBool("WEBGL_PACK")?new wJe(r[0].shape,s):new bJe(r[0].shape,s);return n.runWebGLProgram(a,r,i)}const kJe={kernelName:SO,backendName:"webgl",kernelFunc:U2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SJe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r,a=i.shape.length,l=Yt(s,i.shape);let c=l;const u=yr(c,a);let d=i;u!=null&&(d=Rs({inputs:{x:i},backend:n,attrs:{perm:u}}),c=Mr(c.length,a)),Wi("all",c,a);const[h,f]=Pi(d.shape,c),p=$e(f),m=qe({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),y=Fp(m,m.dtype,"all",n);let g;if(o){const v=Dr(h,l);g=qe({inputs:{x:y},backend:n,attrs:{shape:v}})}else g=qe({inputs:{x:y},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),u!=null&&n.disposeIntermediateTensorInfo(d),g}const CJe={kernelName:CO,backendName:"webgl",kernelFunc:SJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NJe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r,a=i.shape.length,l=Yt(s,i.shape);let c=l;const u=yr(c,a);let d=i;u!=null&&(d=Rs({inputs:{x:i},backend:n,attrs:{perm:u}}),c=Mr(c.length,a)),Wi("any",c,a);const[h,f]=Pi(d.shape,c),p=$e(f),m=qe({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),y=Fp(m,m.dtype,"any",n);let g;if(o){const v=Dr(h,l);g=qe({inputs:{x:y},backend:n,attrs:{shape:v}})}else g=qe({inputs:{x:y},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),u!=null&&n.disposeIntermediateTensorInfo(d),g}const AJe={kernelName:NO,backendName:"webgl",kernelFunc:NJe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IJe{constructor(e,n,r){this.variableNames=["A"];const{windowSize:i,batchSize:s,outSize:o}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[s,o];const a=n==="max"?">":"<",l=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${i};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${i}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${a} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _Je{constructor(e,n,r,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,Z(e.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const s=e[e.length-1],o=Math.ceil(s/n);this.outputShape=e.slice(0,-1),o>1&&this.outputShape.push(o),i||this.variableNames.push("bestIndicesA");const a=this.outputShape,l=a.length,c=$n(l),u=Is("coords",l);let d,h;if(o===1){h=l+1;const I=$n(h);d=`
        ${I} sourceLocR = ${I}(${u.join()}, 0);
        ++${u[l-1]};
        ${I} sourceLocG = ${I}(${u.join()}, 0);
        ++${u[l-2]};
        ${I} sourceLocA = ${I}(${u.join()}, 0);
        --${u[l-1]};
        ${I} sourceLocB = ${I}(${u.join()}, 0);
        --${u[l-2]};`}else h=l,d=`
        ${c} sourceLocR = coords;
        ++${u[l-1]};
        ${c} sourceLocG = coords;
        ++${u[l-2]};
        ${c} sourceLocA = coords;
        --${u[l-1]};
        ${c} sourceLocB = coords;
        --${u[l-2]};`;const f=["x","y","z","w","u","v"].slice(0,h),p="."+f[h-1],m=f.map(I=>"int "+I),y=Is("sourceLocR",h-1).concat("inIdx.r"),g=Is("sourceLocG",h-1).concat("inIdx.g"),v=Is("sourceLocB",h-1).concat("inIdx.b"),x=Is("sourceLocA",h-1).concat("inIdx.a"),b=r==="max"?"greaterThan":"lessThan",S=i?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${y.join()}),
                             getBestIndicesAChannel(${g.join()}),
                             getBestIndicesAChannel(${v.join()}),
                             getBestIndicesAChannel(${x.join()})));`,A=`vec4(
            getAChannel(${y.join()}),
            hasNextCol ? getAChannel(${g.join()}) : 0.,
            hasNextRow ? getAChannel(${v.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${x.join()}) : 0.)`,E=i?"":`
      float getBestIndicesAChannel(${m.join()}) {
        return getChannel(getBestIndicesA(${f.join()}),
                                          vec2(${f.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${m.join()}) {
        return getChannel(getA(${f.join()}),
                               vec2(${f.slice(-2).join()}));
      }
      ${E}
      void main() {
        ${c} coords = getOutputCoords();
        bool hasNextCol = ${u[l-1]} < ${a[l-1]-1};
        bool hasNextRow = ${u[l-2]} < ${a[l-2]-1};
        ${d}
        ivec4 srcIdx = ivec4(sourceLocR${p}, sourceLocG${p},
          sourceLocB${p}, sourceLocA${p}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${A};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${S}
          vec4 candidate = ${A};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${b}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aoe(t,e,n,r=null){let i=e.shape[0],s=e.shape[1];r!=null&&(i=r.shape[0],s=r.shape[1]);const o=T5(s),a={windowSize:o,inSize:s,batchSize:i,outSize:Math.ceil(s/o)},l=new IJe(a,n,r==null),c=[e];r!=null&&c.push(r);const u=t.runWebGLProgram(l,c,"int32");if(u.shape[1]===1)return u;const d=Aoe(t,e,n,u);return t.disposeIntermediateTensorInfo(u),d}function Ioe(t,e,n,r=null){const i=r!=null?r.shape:e.shape,s=i[i.length-1],o=T5(s),a=new _Je(i,o,n,r==null),l=r==null?[e]:[e,r],c=t.runWebGLProgram(a,l,"int32");if(c.shape.length===e.shape.length){const u=Ioe(t,e,n,c);return t.disposeIntermediateTensorInfo(c),u}return c}function _oe(t,e,n,r){const i=[n];if(Wi("arg"+r.charAt(0).toUpperCase()+r.slice(1),i,e.shape.length),!Ee().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const s=[],o=t.texData.get(e.dataId),a=o!==null&&o.isPacked;let l=e;a&&(l=t.unpackTensor(e),s.push(l));const[c,u]=Pi(l.shape,i),d=$e(u),h=qe({inputs:{x:l},backend:t,attrs:{shape:[-1,d]}});s.push(h);const f=Aoe(t,h,r);s.push(f);const p=qe({inputs:{x:f},backend:t,attrs:{shape:c}});return s.forEach(m=>t.disposeIntermediateTensorInfo(m)),p}return Ioe(t,e,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EJe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s}=r;let o=Yt(s,i.shape);const a=yr(o,i.shape.length);let l=i;const c=[];a!=null&&(l=Rs({inputs:{x:i},backend:n,attrs:{perm:a}}),c.push(l),o=Mr(o.length,l.shape.length)),Wi("argMax",[o[0]],l.shape.length);const u=_oe(n,l,o[0],"max");return c.forEach(d=>n.disposeIntermediateTensorInfo(d)),u}const TJe={kernelName:wN,backendName:"webgl",kernelFunc:EJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Je(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s}=r;let o=Yt(s,i.shape);const a=yr(o,i.shape.length);let l=i;const c=[];a!=null&&(l=Rs({inputs:{x:i},backend:n,attrs:{perm:a}}),c.push(l),o=Mr(o.length,l.shape.length)),Wi("argMin",[o[0]],l.shape.length);const u=_oe(n,l,o[0],"min");return c.forEach(d=>n.disposeIntermediateTensorInfo(d)),u}const PJe={kernelName:kN,backendName:"webgl",kernelFunc:$Je};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RJe=Ja+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,OJe=un({opSnippet:RJe}),DJe={kernelName:Yv,backendName:"webgl",kernelFunc:OJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LJe=Ja+"return log(x + sqrt(x * x + 1.0));",MJe=un({opSnippet:LJe}),FJe={kernelName:Zv,backendName:"webgl",kernelFunc:MJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jJe=Ja+`
  return atan(x);
`,BJe=un({opSnippet:jJe}),zJe={kernelName:Jv,backendName:"webgl",kernelFunc:BJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UJe=sM+`
  return atan(a, b);
`,VJe=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Mp+`
  return result;
`,WJe=Gi({opSnippet:UJe,packedOpSnippet:VJe}),GJe={kernelName:ex,backendName:"webgl",kernelFunc:WJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qJe=Ja+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,HJe=un({opSnippet:qJe}),KJe={kernelName:Qv,backendName:"webgl",kernelFunc:HJe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cv{constructor(e,n,r,i=!1,s=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,a=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,u=e.dilationWidth,d=e.effectiveFilterHeight,h=e.effectiveFilterWidth,f=e.padInfo.top,p=e.padInfo.left;this.outputShape=e.outShape;const m=n==="avg",y=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,g=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let v="0.0";if(m||(v="-1.0 / 1e-20"),r){const I=">=";this.userCode=`
        const ivec2 strides = ivec2(${a}, ${l});
        const ivec2 pads = ivec2(${f}, ${p});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${d};
              wR += ${c}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${h};
                wC += ${u}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${I} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${i?s?y:g:`wR * ${h} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const x="max";let b=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(b="avgValue / max(count, 1.0)");const S=Math.floor(o/4)*4,A=o%4,E=`
      if (${m}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${x}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${l});
      const ivec2 pads = ivec2(${f}, ${p});
      const float initializationValue = ${v};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${v});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${d};
            wR += ${c}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${S}; wC += 4) {
            int xC = xCCorner + wC * ${u};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              getValue(batch, xR, xC + 3 * ${u}, d)
            );

            ${E}
          }

          int xC = xCCorner + ${S};
          if (${A===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${E}
          } else if (${A===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              initializationValue,
              initializationValue
            );

            ${E}
          } else if (${A===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              initializationValue
            );

            ${E}
          }
        }
        setOutput(${b});
      }
    `}}class aM{constructor(e,n,r,i=!1,s=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,a=e.strideDepth,l=e.strideHeight,c=e.strideWidth,u=e.dilationDepth,d=e.dilationHeight,h=e.dilationWidth,f=e.effectiveFilterDepth,p=e.effectiveFilterHeight,m=e.effectiveFilterWidth,y=e.padInfo.front,g=e.padInfo.top,v=e.padInfo.left;this.outputShape=e.outShape;const x=n==="avg";let b="0.0";if(x||(b="-1.0 / 1e-20"),r){const O=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${a}, ${l}, ${c});
        const ivec3 pads = ivec3(${y}, ${g}, ${v});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${f};
              wD += ${u}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${p};
                wR += ${d}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${m};
                  wC += ${h}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${O} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${i?s?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${p} * ${m} +
                      wR * ${m} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const S="max";let A=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(A="avgValue / max(count, 1.0)");const E=Math.floor(o/4)*4,I=o%4,T=`
      if (${x}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${S}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${a}, ${l}, ${c});
      const ivec3 pads = ivec3(${y}, ${g}, ${v});
      const float initializationValue = ${b};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${b});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${f};
            wD += ${u}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p};
            wR += ${d}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${E}; wC += 4) {
              int xC = xCCorner + wC * ${h};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                getValue(batch, xD, xR, xC + 2 * ${h}, ch),
                getValue(batch, xD, xR, xC + 3 * ${h}, ch)
              );

              ${T}
            }

            int xC = xCCorner + ${E};
            if (${I===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${T}
            } else if (${I===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                initializationValue,
                initializationValue
              );

              ${T}
            } else if (${I===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                getValue(batch, xD, xR, xC + 2 * ${h}, ch),
                initializationValue
              );

              ${T}
            }
          }
        }
        setOutput(${A});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XJe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;ab(i,"avgPool");const{filterSize:s,strides:o,pad:a,dimRoundingMode:l}=r,c=1;Z(cs(o,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const u=Ya(i.shape,s,o,c,a,l);if(u.filterWidth===1&&u.filterHeight===1&&xn(u.inShape,u.outShape))return ko({inputs:{x:i},backend:n});const d=new cv(u,"avg",!1);return n.runWebGLProgram(d,[i],"float32")}const YJe={kernelName:SN,backendName:"webgl",kernelFunc:XJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZJe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:s,strides:o,pad:a,dimRoundingMode:l,dataFormat:c}=r,u=[1,1,1],d=Bu(i.shape,s,o,u,a,l,c),h=new aM(d,"avg",!1);return n.runWebGLProgram(h,[i],"float32")}const JJe={kernelName:CN,backendName:"webgl",kernelFunc:ZJe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class QJe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,i=e.strideHeight,s=e.strideWidth,o=e.dilationHeight,a=e.dilationWidth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,u=l-1-e.padInfo.top,d=c-1-e.padInfo.left,h=1/(n*r);this.userCode=`
      const ivec2 pads = ivec2(${u}, ${d});
      const float avgMultiplier = float(${h});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${o}) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${c};
            wC+= ${a}) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class eQe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,i=e.filterWidth,s=e.strideDepth,o=e.strideHeight,a=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,u=e.dilationWidth,d=e.effectiveFilterDepth,h=e.effectiveFilterHeight,f=e.effectiveFilterWidth,p=d-1-e.padInfo.front,m=h-1-e.padInfo.top,y=f-1-e.padInfo.left,g=1/(n*r*i);this.userCode=`
      const ivec3 pads = ivec3(${p}, ${m}, ${y});
      const float avgMultiplier = float(${g});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${s}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${h};
              wR += ${c}) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${f};
                wC += ${u}) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tQe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,o=s,{filterSize:a,strides:l,pad:c,dimRoundingMode:u}=r,d=[1,1,1],h=Bu(o.shape,a,l,d,c,u),f=new eQe(h);return n.runWebGLProgram(f,[i],o.dtype)}const nQe={kernelName:IO,backendName:"webgl",kernelFunc:tQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rQe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,o=s;ab([i,s],"avgPoolGrad");const{filterSize:a,strides:l,pad:c}=r,u=Ya(o.shape,a,l,1,c),d=new QJe(u);return n.runWebGLProgram(d,[i],o.dtype)}const iQe={kernelName:AO,backendName:"webgl",kernelFunc:rQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sQe(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:s}=e,{transposeA:o,transposeB:a}=r;return FS({a:i,b:s,transposeA:o,transposeB:a,backend:n})}const oQe={kernelName:NN,backendName:"webgl",kernelFunc:sQe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class aQe{constructor(e,n,r,i,s,o){this.outputShape=[],this.variableNames=["x","mean","variance"],Ut(e,n),Ut(e,r);let a="0.0";i!=null&&(Ut(e,i),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="1.0";s!=null&&(Ut(e,s),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${a};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${o}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lQe{constructor(e,n,r,i,s,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Ut(e,n),Ut(e,r);let a="vec4(0.0)";i!=null&&(Ut(e,i),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="vec4(1.0)";s!=null&&(Ut(e,s),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${a};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${o}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cQe=({inputs:t,backend:e,attrs:n})=>{const{x:r,mean:i,variance:s,offset:o,scale:a}=t;Z(i.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),Z(o==null||i.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),Z(a==null||i.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;l==null&&(l=.001);const c=[r,i,s];let u=null;o!=null&&(u=o.shape,c.push(o));let d=null;a!=null&&(d=a.shape,c.push(a));const h=Ee().getBool("WEBGL_PACK_NORMALIZATION")?new lQe(r.shape,i.shape,s.shape,u,d,l):new aQe(r.shape,i.shape,s.shape,u,d,l);return e.runWebGLProgram(h,c,c[0].dtype)},uQe={kernelName:MN,backendName:"webgl",kernelFunc:cQe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dQe{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const n=$n(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=hQe(this.rank);let i;const s=e.map((o,a)=>`sourceLoc.${a$[a]} = start[${a}] + coords.${a$[a]};`);i=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${s.join(`
`)}
      `,this.userCode=`
      void main() {
        ${i}
        setOutput(getSource(${r}));
      }
    `}}const a$=["x","y","z","w","u","v"];function hQe(t){if(t===1)return"sourceLoc";if(t<=6)return a$.slice(0,t).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fQe{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=$n(this.rank),r=Is("coords",this.rank),i=Is("sourceLoc",this.rank),s=this.rank===1?"sourceLoc":`vec2(${i.slice(-2).join()})`,o=`getChannel(getSource(${i.join()}), ${s})`,a=`
      result.x = ${o};
      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
        ++${i[this.rank-1]};
        result.y = ${o};
        --${i[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {
        ++${i[this.rank-2]};
        result.z = ${o};
        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
          ++${i[this.rank-1]};
          result.w = ${o};
        }
      }
    `,c=this.rank<=4?`sourceLoc = coords +
            ${n}(${e.map((u,d)=>`start[${d}]`).join()});`:e.map((u,d)=>`${i[d]} = ${r[d]} + start[${d}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${c}
        vec4 result = vec4(0.);
        ${a}
        ${l}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pQe(t,e,n,r){const i=r.texData.get(t.dataId),s=r.makeTensorInfo(n,t.dtype),o=r.texData.get(s.dataId);Object.assign(o,i),o.refCount=1,o.shape=n,o.dtype=t.dtype;let a=tL(e,wt(t.shape));i.slice&&(a+=i.slice.flatOffset),o.slice={flatOffset:a,origDataId:i.slice&&i.slice.origDataId||t.dataId};const l=r.dataRefCount.get(o.slice.origDataId)||1;return r.dataRefCount.set(o.slice.origDataId,l+1),s}function w0(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:s,size:o}=r,[a,l]=E5(i,s,o);if(JD(i,a,l),$e(l)===0)return n.makeTensorInfo(l,i.dtype,[]);if(n.shouldExecuteOnCPU([i])||i.dtype==="string"){const d=n.texData.get(i.dataId),h=oZe(d.values,a,l,i.shape,i.dtype);return n.makeTensorInfo(l,i.dtype,h)}const{isPacked:c}=n.texData.get(i.dataId),u=eL(i.shape,a,l);if(c||!u){const d=Ee().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new fQe(l):new dQe(l),h=[a];return n.runWebGLProgram(d,[i],i.dtype,h)}return n.uploadToGPU(i.dataId),pQe(i,a,l,n)}const mQe={kernelName:h5,backendName:"webgl",kernelFunc:w0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gQe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:s,crops:o}=r;Z(i.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const a=s.reduce((v,x)=>v*x),l=Kx(i.shape,s,a),c=Xx(l.length,s.length),u=Yx(i.shape,s,a),d=oL(o,s.length),h=aL(u,o,s.length),f=[],p=qe({inputs:{x:i},backend:n,attrs:{shape:l}}),m=Rs({inputs:{x:p},backend:n,attrs:{perm:c}}),y=qe({inputs:{x:m},backend:n,attrs:{shape:u}}),g=w0({inputs:{x:y},backend:n,attrs:{begin:d,size:h}});return f.push(p),f.push(m),f.push(y),f.forEach(v=>n.disposeIntermediateTensorInfo(v)),g},yQe={kernelName:AN,backendName:"webgl",kernelFunc:gQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vQe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:s}=e,{size:o}=r,a=n.readSync(i.dataId),l=n.readSync(s.dataId),c=moe(a,l,s.dtype,s.shape,o);return n.makeTensorInfo([o],s.dtype,c)}const xQe={kernelName:_O,backendName:"webgl",kernelFunc:vQe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bQe=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,wQe=`
  return float(int(a.r) & int(b.r));
`;function kQe(t){const{inputs:e,backend:n}=t,{a:r,b:i}=e,s=Ee().getBool("WEBGL_PACK_BINARY_OPERATIONS"),o=Ee().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,i])||o===1){const l=n.texData.get(r.dataId).values,c=n.texData.get(i.dataId).values,[u,d]=TYe(r.shape,i.shape,l,c,r.dtype),h=n.makeTensorInfo(d,r.dtype),f=n.texData.get(h.dataId);return f.values=u,h}let a;return s?a=new x0(bQe,r.shape,i.shape,!1):a=new bp(wQe,r.shape,i.shape),n.runWebGLProgram(a,[r,i],r.dtype)}const SQe={kernelName:EO,backendName:"webgl",kernelFunc:kQe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CQe(t){const{inputs:e,backend:n}=t,{s0:r,s1:i}=e,s=n.readSync(r.dataId),o=n.readSync(i.dataId),a=Ut(Array.from(s),Array.from(o));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const NQe={kernelName:vee,backendName:"webgl",kernelFunc:CQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AQe="return float(a != b);",Eoe=Gi({opSnippet:AQe,cpuKernelImpl:ZYe,dtype:"bool"}),IQe={kernelName:e5,backendName:"webgl",kernelFunc:Eoe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cb(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.texData.get(r.dataId);return ko({inputs:{x:i.complexTensorInfos.real},backend:n})}const _Qe={kernelName:eD,backendName:"webgl",kernelFunc:cb};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EQe="return float(int(x));";function TQe(t,e){const n=new ac(t.shape,EQe),r=e.runWebGLProgram(n,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l$(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dtype:s}=r;if(s==="complex64"){if(i.dtype==="complex64")return ko({inputs:{x:i},backend:n});const o=Ni(i.shape),a=l$({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),l=_h({inputs:{real:a,imag:o},backend:n});return o.dispose(),n.disposeIntermediateTensorInfo(a),l}if(i.dtype==="complex64"){const o=cb({inputs:{input:i},backend:n}),a=l$({inputs:{x:o},backend:n,attrs:{dtype:s}});return n.disposeIntermediateTensorInfo(o),a}if(!fee(i.dtype,s)){const o=ko({inputs:{x:i},backend:n});return{dataId:o.dataId,shape:o.shape,dtype:s}}if(n.shouldExecuteOnCPU([i])){const o=n.texData.get(i.dataId).values,[a,l,c]=$Ye(o,i.shape,i.dtype,s);return n.makeTensorInfo(a,l,c)}if(s==="int32")return TQe(i,n);if(s==="bool"){const o=n.makeTensorInfo([],"bool",ss("bool",1)),l=Eoe({inputs:{a:i,b:o},backend:n});return n.disposeIntermediateTensorInfo(o),l}throw new Error(`Error in Cast: failed to cast ${i.dtype} to ${s}`)}const $Qe={kernelName:tx,backendName:"webgl",kernelFunc:l$};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CV="return ceil(x);",PQe=un({opSnippet:CV,packedOpSnippet:CV,cpuKernelImpl:PYe}),RQe={kernelName:nx,backendName:"webgl",kernelFunc:PQe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OQe{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DQe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LQe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{clipValueMin:s,clipValueMax:o}=r;let a;Ee().getBool("WEBGL_PACK_CLIP")?a=new DQe(i.shape):a=new OQe(i.shape);const l=[[s],[o]];return n.runWebGLProgram(a,[i],i.dtype,l)}const MQe={kernelName:rx,backendName:"webgl",kernelFunc:LQe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FQe{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NV(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function jQe(t){const{inputs:e,backend:n}=t,{x:r}=e,i=n.texData.get(r.dataId),s=new FQe(r.shape),o=[NV(r,i.complexTensorInfos.real),NV(r,i.complexTensorInfos.imag)];return n.runWebGLProgram(s,o,o[0].dtype)}const BQe={kernelName:IN,backendName:"webgl",kernelFunc:jQe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zQe{constructor(e){this.outputShape=[],this.outputShape=vc(e,1),this.variableNames=e.map((o,a)=>`T${a}`);const n=new Array(e.length-1);n[0]=e[0][1];for(let o=1;o<n.length;o++)n[o]=n[o-1]+e[o][1];const r=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let o=1;o<n.length;o++){const a=n[o-1];r.push(`else if (yC < ${n[o]}) setOutput(getT${o}(yR, yC-${a}));`)}const i=n.length,s=n[n.length-1];r.push(`else setOutput(getT${i}(yR, yC-${s}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UQe{constructor(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=vc(e,n);const r=this.outputShape,i=r.length,s=$n(i),o=Is("coords",i),a=["x","y","z","w","u","v"].slice(0,i);this.variableNames=e.map((m,y)=>`T${y}`);const l=new Array(e.length-1);l[0]=e[0][n];for(let m=1;m<l.length;m++)l[m]=l[m-1]+e[m][n];const c=a[n],u=a.slice(-2),d=a.join();let h=`if (${c} < ${l[0]}) {
        return getChannel(
            getT0(${d}), vec2(${u.join()}));
        }`;for(let m=1;m<l.length;m++){const y=l[m-1];h+=`
        if (${c} < ${l[m]}  && ${c} >= ${l[m-1]}) {
          return getChannel(
            getT${m}(${s2(a,c,y)}),
            vec2(${s2(u,c,y)}));
        }`}const f=l.length,p=l[l.length-1];h+=`
        return getChannel(
          getT${f}(${s2(a,c,p)}),
          vec2(${s2(u,c,p)}));`,this.userCode=`
      float getValue(${a.map(m=>"int "+m)}) {
        ${h}
      }

      void main() {
        ${s} coords = getOutputCoords();
        vec4 result = vec4(getValue(${o}), 0., 0., 0.);

        ${o[i-1]} = ${o[i-1]} + 1;
        if (${o[i-1]} < ${r[i-1]}) {
          result.g = getValue(${o});
        }

        ${o[i-2]} = ${o[i-2]} + 1;
        if (${o[i-2]} < ${r[i-2]}) {
          result.a = getValue(${o});
        }

        ${o[i-1]} = ${o[i-1]} - 1;
        if (${o[i-2]} < ${r[i-2]} &&
            ${o[i-1]} < ${r[i-1]}) {
          result.b = getValue(${o});
        }
        setOutput(result);
      }
    `}}function s2(t,e,n){const r=t.indexOf(e);return t.map((s,o)=>o===r?`${s} - ${n}`:s).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X5(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.texData.get(r.dataId);return ko({inputs:{x:i.complexTensorInfos.imag},backend:n})}const VQe={kernelName:qO,backendName:"webgl",kernelFunc:X5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function By(t,e,n){const r=t[0].dtype;if(r==="complex64"){const f=t.map(v=>cb({inputs:{input:v},backend:n})),p=t.map(v=>X5({inputs:{input:v},backend:n})),m=By(f,e,n),y=By(p,e,n),g=_h({inputs:{real:m,imag:y},backend:n});return f.forEach(v=>n.disposeIntermediateTensorInfo(v)),p.forEach(v=>n.disposeIntermediateTensorInfo(v)),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),g}let i=n.shouldExecuteOnCPU(t);if(r==="string"&&(i=!0),i){const f=t.map(b=>{const A=[-1,$e(b.shape.slice(e))];return qe({inputs:{x:b},backend:n,attrs:{shape:A}})}),p=f.map(b=>({vals:n.readSync(b.dataId),shape:b.shape})),m=vc(f.map(b=>b.shape),1),y=f[0].shape[0]===1,g=RYe(p,m,r,y),v=vc(t.map(b=>b.shape),e),x=n.makeTensorInfo(v,r,g);return f.forEach(b=>n.disposeIntermediateTensorInfo(b)),x}const s=t.filter(f=>$e(f.shape)>0),o=Ee().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&s[0].shape.length>1;if(s.length===1){const f=o?new ac(t[0].shape,vd):new Td(t[0].shape,vd);return n.runWebGLProgram(f,t,r)}const a=Ee().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(s.length>a){const f=[];for(let m=0;m<s.length;m+=a){const y=s.slice(m,m+a);f.push(By(y,e,n))}const p=By(f,e,n);for(const m of f)n.disposeIntermediateTensorInfo(m);return p}if(o){const f=new UQe(s.map(p=>p.shape),e);return n.runWebGLProgram(f,s,r)}const{tensors2D:l,outShape:c}=WQe(s,e,n),u=new zQe(l.map(f=>f.shape)),d=n.runWebGLProgram(u,l,r);l.forEach(f=>n.disposeIntermediateTensorInfo(f));const h=qe({inputs:{x:d},attrs:{shape:c},backend:n});return n.disposeIntermediateTensorInfo(d),h}function WQe(t,e,n){const r=vc(t.map(s=>s.shape),e);return{tensors2D:t.map(s=>qe({inputs:{x:s},attrs:{shape:[-1,$e(s.shape.slice(e))]},backend:n})),outShape:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Toe(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r,s=Yt(i,e[0].shape)[0],o=e.map(c=>c.shape);rL(o,s);const a=vc(e.map(c=>c.shape),s);if($e(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const l=e.filter(c=>$e(c.shape)>0);return l.length===1?ko({inputs:{x:l[0]},backend:n}):By(l,s,n)}const GQe={kernelName:_N,backendName:"webgl",kernelFunc:Toe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $oe{constructor(e,n=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const o=e.padInfo.top,a=e.padInfo.left,l=e.strideHeight,c=e.strideWidth,u=e.dilationHeight,d=e.dilationWidth,h=e.filterHeight,f=e.filterWidth,p=Math.floor(e.inChannels/4)*4,m=e.inChannels%4,y=e.dataFormat==="channelsLast",g=y?1:2,v=y?2:3,x=y?3:1;let b="",S="";r&&(i?b=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?b=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:b=`
          float activation(float x) {
            ${r}
          }
        `,S="result = activation(result);");const A=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${b}

      const ivec2 strides = ivec2(${l}, ${c});
      const ivec2 pads = ivec2(${o}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${x}];

        ivec2 xRCCorner =
            ivec2(coords[${g}], coords[${v}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${h}; wR++) {
          int xR = xRCorner + wR * ${u};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${f}; wC++) {
            int xC = xCCorner + wC * ${d};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${p}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${y}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${m===1}) {

              if (${y}) {
                dotProd +=
                    getX(batch, xR, xC, ${p}) *
                    getW(wR, wC, ${p}, d2);
              } else {
                dotProd +=
                    getX(batch, ${p}, xR, xC) *
                    getW(wR, wC, ${p}, d2);
              }

            } else if (${m===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2)
              );

              if (${y}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${m===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2),
                getW(wR, wC, ${p} + 2, d2)
              );

              if (${y}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1),
                  getX(batch, xR, xC, ${p} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC),
                  getX(batch, ${p} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${A}
        ${S}
        setOutput(result);
      }
    `}}class qQe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const n=e.padInfo.front,r=e.padInfo.top,i=e.padInfo.left,s=e.strideDepth,o=e.strideHeight,a=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,u=e.dilationWidth,d=e.filterDepth,h=e.filterHeight,f=e.filterWidth,p=Math.floor(e.inChannels/4)*4,m=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${s}, ${o}, ${a});
      const ivec3 pads = ivec3(${n}, ${r}, ${i});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${d}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${h}; wR++) {
            int xR = xRCorner + wR * ${c};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${f}; wC++) {
              int xC = xCCorner + wC * ${u};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${p}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${m===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${p}) *
                  getW(wF, wR, wC, ${p}, d2);
              } else if (${m===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${m===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1),
                  getX(batch, xF, xR, xC, ${p} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2),
                  getW(wF, wR, wC, ${p} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Poe{constructor(e,n=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=ds(this.outputShape.length);const o=e.padInfo.left,a=e.strideWidth,l=e.dilationWidth,c=e.filterHeight,u=e.filterWidth,d=u;let h=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let y=0;y<u;y++)h+=`
           vec4 xTexelC${y*2};
           int xTexelC${y*2}Ready;
           vec4 xTexelC${y*2+1};
           int xTexelC${y*2+1}Ready;
           vec4 xC${y};`;h+=`
     for (int r = 0; r < ${c}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let y=0;y<u;y++)h+=`
           xTexelC${y*2} = vec4(0.0);
           xTexelC${y*2}Ready = 0;
           xTexelC${y*2+1} = vec4(0.0);
           xTexelC${y*2+1}Ready = 0;
           xC${y} = vec4(0.0);`;h+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let y=0;y<(d+1)/2;y++){const g=y*2;if(h+=`
           xC = xCCorner + ${g*l};
           `,a===1){if(g<u&&(o%2===1?(h+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g}Ready == 0) {
                   xTexelC${g} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${g}.zw = vec2(0.0);
                   }
                   xTexelC${g}Ready = 1;
                 }
               `,l===1&&g>0?h+=`
                 xC${g} = vec4(xTexelC${g-2}.zw, xTexelC${g}.xy);
                 `:h+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${g} = vec4(previous.zw, xTexelC${g}.xy);
                   } else {
                     xC${g} = vec4(0.0, 0.0, xTexelC${g}.xy);
                   }
                   `):h+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${g}Ready == 0) {
                   xTexelC${g} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${g}.zw = vec2(0.0);
                   }
                   xTexelC${g}Ready = 1;
                 }

                 xC${g} = xTexelC${g};
                 `,g+1<u)){const v=o%2===0?xO(l):l;l%2===0&&o%2===1||l%2!==0&&o%2!==1?(h+=`
                   xCOffset = xC + imod(pads[1], 2) + ${v};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g+1}Ready == 0) {
                     xTexelC${g+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${g+1}.zw = vec2(0.0);
                     }
                     xTexelC${g+1}Ready = 1;
                   }
                   `,l>1?h+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${g+1} = vec4(previous.zw, xTexelC${g+1}.xy);
                     } else {
                      xC${g+1} = vec4(0.0, 0.0, xTexelC${g+1}.xy);
                     }
                     `:h+=`
                     xC${g+1} = vec4(xTexelC${g}.zw, xTexelC${g+1}.xy);
                     `):v===1?h+=`
                     xC${g+1} = xTexelC${g};
                     `:h+=`
                     xCOffset = xC + ${v};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g+1}Ready == 0) {
                       xTexelC${g+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${g+1}.zw = vec2(0.0);
                       }
                       xTexelC${g+1}Ready = 1;
                     }

                     xC${g+1} = xTexelC${g+1};
                     `}}else g<u&&(o%2===1?(h+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g}Ready == 0) {
                   xTexelC${g} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${g}.zw = vec2(0.0);
                   }
                   xTexelC${g}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${g+1}Ready == 0) {
                   xTexelC${g+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${g+1}.zw = vec2(0.0);
                   }
                   xTexelC${g+1}Ready = 1;
                 }

                 xC${g} = vec4(xTexelC${g}.zw, xTexelC${g+1}.zw);
               `,g+1<u&&(h+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${g+1} = vec4(xTexelC${g+1}.xy, final.xy);
                 `)):(h+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${g}Ready == 0) {
                   xTexelC${g} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${g}.zw = vec2(0.0);
                   }
                   xTexelC${g}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g+1}Ready == 0) {
                   xTexelC${g+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${g+1}.zw = vec2(0.);
                   }
                   xTexelC${g+1}Ready = 1;
                 }

                 xC${g} = vec4(
                   xTexelC${g}.xy, xTexelC${g+1}.xy);
               `,g+1<u&&(h+=`
                   xC${g+1} = vec4(xTexelC${g}.zw, xTexelC${g+1}.zw);
                 `)));g<u&&(h+=`
             wTexel = getW(r, ${g}, d1, d2);
             dotProd += xC${g}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${g}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,g+1<u&&(h+=`
               wTexel = getW(r, ${g+1}, d1, d2);
               dotProd += xC${g+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${g+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}h+=`
     }
   `,h+=`
     }
   `,h+=`
     }
   `;let f="",p="";r&&(i?f=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:s?f=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:f=`vec4 activation(vec4 x) {
           ${r}
         }`,p="result = activation(result);");const m=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${f}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${h}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${m}
         ${p}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class HQe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=ds(this.outputShape.length);const{dataFormat:r}=n,i=Os(),s=r==="channelsLast",o=s?1:2,a=s?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let c="";for(let u=0;u<=1;u++)for(let d=0;d<=1;d++)c+=`
          blockIndex = rc.z + ${d};
          pos = rc.y + ${u};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${o}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${a}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${s}) {
                  innerDims = vec2(d1, ch);
                  result[${u*2+d}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${u*2+d}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${c}

        ${i.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jS(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&n===1&&t[0]>1?[t[0],1]:null}function Roe({x:t,filter:e,convInfo:n,backend:r,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:o=0,activation:a=null}){const l=t.shape,c=r.texData.get(t.dataId),u=n.inChannels,d=l[0]*l[1]*l[2],h=n.outChannels,f=n.dataFormat==="channelsLast",p=!1,m=!1;let y;const g=[];if(s!=null){const b=jS(s.shape,f);b!=null&&(s=qe({inputs:{x:s},backend:r,attrs:{shape:b}}),g.push(s))}if(i!=null){const b=jS(i.shape,f);b!=null&&(i=qe({inputs:{x:i},backend:r,attrs:{shape:b}}),g.push(i))}if(!((d===1||h===1)&&u>Noe)&&c.isPacked&&f&&c.texture!=null&&l[2]%2!==0&&xn(c.shape.slice(-3),l.slice(-3))){const b=l[0]*l[1]*(l[2]+1),S={dataId:t.dataId,shape:[1,b,n.inChannels],dtype:t.dtype},A=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,Z(MS(c.shape,S.shape),()=>`packed reshape ${c.shape} to ${S.shape} isn't free`);const E=qe({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});g.push(E);const I=FS({a:S,b:E,backend:r,transposeA:p,transposeB:m,bias:i,activation:a,preluActivationWeights:s,leakyreluAlpha:o}),T=r.texData.get(I.dataId);Z(T.isPacked,()=>"batchMatMul result is expected to be packed"),c.shape=A,T.shape=n.outShape,y=ko({inputs:{x:I},backend:r}),y.shape=n.outShape,g.push(I)}else{const b=n.outHeight*n.outWidth,S=qe({inputs:{x:t},backend:r,attrs:{shape:f?[n.batchSize,b,n.inChannels]:[n.batchSize,n.inChannels,b]}}),A=qe({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),E=FS({a:f?S:A,b:f?A:S,transposeA:!f,transposeB:m,backend:r,bias:i,activation:a,preluActivationWeights:s,leakyreluAlpha:o});y=qe({inputs:{x:E},backend:r,attrs:{shape:n.outShape}}),g.push(S),g.push(A),g.push(E)}for(const b of g)r.disposeIntermediateTensorInfo(b);return y}function Ooe({x:t,filter:e,convInfo:n,backend:r,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:o=0,activation:a=null}){const{filterWidth:l,filterHeight:c,inChannels:u,outWidth:d,outHeight:h,dataFormat:f}=n,p=f==="channelsLast",m=l*c*u,y=h*d,g=[n.batchSize,m,y],v=!0,x=!1,b=[];if(s!=null){const j=jS(s.shape,p);j!=null&&(s=qe({inputs:{x:s},backend:r,attrs:{shape:j}}),b.push(s))}if(i!=null){const j=jS(i.shape,p);j!=null&&(i=qe({inputs:{x:i},backend:r,attrs:{shape:j}}),b.push(i))}const S=qe({inputs:{x:e},backend:r,attrs:{shape:[1,m,$e(e.shape)/m]}});b.push(S);const A=new HQe(g,n),E=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],I=r.runWebGLProgram(A,[t],"float32",E),T=qe({inputs:{x:I},backend:r,attrs:{shape:g}});b.push(I),b.push(T);const O=i!=null,$=s!=null,R=a==="leakyrelu",F=a?lv(a,!0):null,L=new Coe(p?T.shape:S.shape,p?S.shape:T.shape,p?[n.batchSize,y,n.outChannels]:[n.batchSize,n.outChannels,y],v,x,O,F,$,R),U=p?[T,S]:[S,T];if(i&&U.push(i),$&&U.push(s),R){const j=r.makeTensorInfo([],"float32",wh(o,"float32"));U.push(j),b.push(j)}const q=r.runWebGLProgram(L,U,"float32"),K=qe({inputs:{x:q},backend:r,attrs:{shape:n.outShape}});b.push(q);for(const j of b)r.disposeIntermediateTensorInfo(j);return K}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KQe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:o,pad:a,dataFormat:l,dilations:c,dimRoundingMode:u}=r,d=zu(l),h=Vi(i.shape,s.shape,o,c,a,u,!1,d);let f;if(h.filterHeight===1&&h.filterWidth===1&&h.dilationHeight===1&&h.dilationWidth===1&&h.strideHeight===1&&h.strideWidth===1&&(h.padInfo.type==="SAME"||h.padInfo.type==="VALID"))f=Roe({x:i,filter:s,convInfo:h,backend:n});else if(h.strideWidth<=2&&d==="channelsLast"&&Ee().getBool("WEBGL_EXP_CONV")){const m=new Poe(h),y=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];f=n.runWebGLProgram(m,[i,s],"float32",y)}else if(Ee().getBool("WEBGL_CONV_IM2COL"))f=Ooe({x:i,filter:s,convInfo:h,backend:n});else{const m=new $oe(h);f=n.runWebGLProgram(m,[i,s],"float32")}const p=qe({inputs:{x:f},backend:n,attrs:{shape:h.outShape}});return n.disposeIntermediateTensorInfo(f),p}const XQe={kernelName:EN,backendName:"webgl",kernelFunc:KQe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class YQe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,i=e.padInfo.top,s=e.padInfo.left,o=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${i};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${s};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              ${o?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class ZQe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,i=e.strideHeight,s=e.strideWidth,o=e.dataFormat==="channelsLast",a=n-1-e.padInfo.top,l=r-1-e.padInfo.left,c=o?1:2,u=o?2:3,d=o?3:1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${d}];

        ivec2 dyCorner = ivec2(coords[${c}], coords[${u}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${o}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class JQe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideDepth,r=e.strideHeight,i=e.strideWidth,s=e.padInfo.front,o=e.padInfo.top,a=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${s};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${o};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${i} - ${a};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class QQe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,i=e.filterWidth,s=e.strideDepth,o=e.strideHeight,a=e.strideWidth,l=n-1-e.padInfo.front,c=r-1-e.padInfo.top,u=i-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${c}, ${u});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${s}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${i}; wC++) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${i} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eet(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:o,pad:a,dataFormat:l,dimRoundingMode:c,filterShape:u}=r,d=zu(l),h=Vi(i.shape,u,o,1,a,c,!1,d),f=new YQe(h);return n.runWebGLProgram(f,[i,s],"float32")}const tet={kernelName:$O,backendName:"webgl",kernelFunc:eet};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class net{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=ds(this.outputShape.length);const n=e.filterHeight,r=e.filterWidth,i=n-1-e.padInfo.top,s=r-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${i}, ${s});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            int wCPerm = ${r} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ret(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{inputShape:o,strides:a,pad:l,dataFormat:c,dimRoundingMode:u}=r,d=zu(c),h=Vi(o,s.shape,a,1,l,u,!1,d);if(Ee().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&d==="channelsLast"){const f=[[h.strideHeight,h.strideWidth]],p=new net(h);return n.runWebGLProgram(p,[i,s],"float32",f)}else{const f=new ZQe(h);return n.runWebGLProgram(f,[i,s],"float32")}}const iet={kernelName:TN,backendName:"webgl",kernelFunc:ret};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function set(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:o,pad:a,dilations:l}=r,c=kh(i.shape,s.shape,o,l,a),u=new qQe(c);return n.runWebGLProgram(u,[i,s],"float32")}const oet={kernelName:$N,backendName:"webgl",kernelFunc:set};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aet(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:o,pad:a,filterShape:l}=r,c=kh(i.shape,l,o,1,a),u=new JQe(c);return n.runWebGLProgram(u,[i,s],"float32")}const cet={kernelName:PO,backendName:"webgl",kernelFunc:aet};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uet(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{pad:o,strides:a,inputShape:l}=r,c=kh(l,s.shape,a,1,o),u=new QQe(c);return n.runWebGLProgram(u,[i,s],"float32")}const det={kernelName:RO,backendName:"webgl",kernelFunc:uet};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const het=b0+`
  return cos(x);
`,fet=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${Mp}
  return result;
`,pet=un({opSnippet:het,packedOpSnippet:fet}),met={kernelName:ix,backendName:"webgl",kernelFunc:pet};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const get=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,yet=un({opSnippet:get}),vet={kernelName:sx,backendName:"webgl",kernelFunc:yet};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xet{constructor(e,n,r,i,s){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[o,a,l,c]=e,[u]=n,[d,h]=r;this.outputShape=[u,d,h,c];const f=i==="bilinear"?1:0,[p,m]=[`${a-1}.0`,`${l-1}.0`],[y,g,v]=d>1?[`${(a-1)/(d-1)}`,"(y2-y1) * height_ratio",`y1*${p} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${p}`],[x,b,S]=h>1?[`${(l-1)/(h-1)}`,"(x2-x1) * width_ratio",`x1*${m} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${m}`];this.userCode=`
      const float height_ratio = float(${y});
      const float width_ratio = float(${x});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${o}) {
          return;
        }

        float height_scale = ${g};
        float width_scale = ${b};

        float in_y = ${v};
        if( in_y < 0.0 || in_y > ${p} ) {
          setOutput(float(${s}));
          return;
        }
        float in_x = ${S};
        if( in_x < 0.0 || in_x > ${m} ) {
          setOutput(float(${s}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${f} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bet=t=>{const{inputs:e,backend:n,attrs:r}=t,{image:i,boxes:s,boxInd:o}=e,{cropSize:a,method:l,extrapolationValue:c}=r,u=new xet(i.shape,s.shape,a,l,c);return n.runWebGLProgram(u,[i,s,o],"float32")},wet={kernelName:DO,backendName:"webgl",kernelFunc:bet};var uv;(function(t){t.Prod="*",t.Sum="+"})(uv||(uv={}));class AV{constructor(e,n,r,i){this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const s=this.outputShape.length,o=this.op===uv.Prod?"1.0":"0.0",a=r?o:`getX(${IV(s,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1];let c="",u="";r?(c=i?`end != ${l-1}`:"end != 0",u=i?"end + 1":"end - 1"):(c=i?`end + pow2 < ${l}`:"end >= pow2",u=i?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${$n(s)} coords = getOutputCoords();
        int end = ${_V(s,"coords",this.op)};
        float val = ${a};
        int pow2 = int(pow(2.0, index));
        if (${c}) {
          int idx = ${u};
          ${_V(s,"coords",this.op)} = idx;
          val ${this.op}= getX(${IV(s,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function IV(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.x, ${e}.y`;if(t===3)return`${e}.x, ${e}.y, ${e}.z`;if(t===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function _V(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.y`;if(t===3)return`${e}.z`;if(t===4)return`${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Doe(t,e,n,r,i,s){const o=e.shape.length,a=yr([r],o);let l=e;a!=null&&(l=Rs({inputs:{x:e},backend:n,attrs:{perm:a}}));const c=Mr(1,o)[0];if(c!==o-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${r}`);const u=l.shape[c];let d=ko({inputs:{x:l},backend:n});for(let h=0;h<=Math.ceil(Math.log2(u))-1;h++){const f=new AV(t,l.shape,!1,s),p=[[h]],m=d;d=n.runWebGLProgram(f,[d],d.dtype,p),n.disposeIntermediateTensorInfo(m)}if(i){const h=new AV(t,l.shape,i,s),f=d;d=n.runWebGLProgram(h,[d],d.dtype),n.disposeIntermediateTensorInfo(f)}if(a!=null){const h=Sh(a),f=Rs({inputs:{x:d},backend:n,attrs:{perm:h}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(l),f}return d}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ket(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,exclusive:o,reverse:a}=r;return Doe(uv.Prod,i,n,s,o,a)}const Cet={kernelName:OO,backendName:"webgl",kernelFunc:ket};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Net(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,exclusive:o,reverse:a}=r;return Doe(uv.Sum,i,n,s,o,a)}const Aet={kernelName:PN,backendName:"webgl",kernelFunc:Net};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iet(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:s}=e,{size:o,binaryOutput:a}=r;if(i.shape.length===1){const l=n.readSync(i.dataId),c=n.readSync(s.dataId),u=moe(l,c,s.dtype,s.shape,o);return n.makeTensorInfo([o],s.dtype,u)}else if(i.shape.length===2){const l=n.bufferSync(i),c=n.bufferSync(s),u=EYe(l,c,o,a);return n.makeTensorInfo(u.shape,s.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}const _et={kernelName:LO,backendName:"webgl",kernelFunc:Iet};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Eet{constructor(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tet(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockSize:s,dataFormat:o}=r,a=i.shape[0],l=o==="NHWC"?i.shape[1]:i.shape[2],c=o==="NHWC"?i.shape[2]:i.shape[3],u=o==="NHWC"?i.shape[3]:i.shape[1],d=l*s,h=c*s,f=u/(s*s),p=o==="NHWC"?[a,d,h,f]:[a,f,d,h],m=new Eet(p,s,o);return n.runWebGLProgram(m,[i],i.dtype)}const $et={kernelName:MO,backendName:"webgl",kernelFunc:Tet};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Loe{constructor(e,n=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=ds(this.outputShape.length);const o=e.filterHeight,a=e.filterWidth,l=e.outChannels/e.inChannels;let c="",u="";r&&(i?c=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?c=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:c=`
          float activation(float x) {
            ${r}
          }
        `,u="result = activation(result);");const d=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${c}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${o}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${a}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${d}
        ${u}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Moe{constructor(e,n=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=ds(this.outputShape.length);const o=e.outChannels/e.inChannels,a=e.padInfo.left,l=e.strideWidth,c=e.dilationWidth,u=e.filterHeight,d=e.filterWidth,h=d;let f=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let g=0;g<d;g++)f+=`
          vec4 xTexelC${g*2};
          int xTexelC${g*2}Ready;
          vec4 xTexelC${g*2+1};
          int xTexelC${g*2+1}Ready;
          vec4 xC${g};`;f+=`
    for (int r = 0; r < ${u}; r++) {
      `;for(let g=0;g<d;g++)f+=`
          xTexelC${g*2} = vec4(0.0);
          xTexelC${g*2}Ready = 0;
          xTexelC${g*2+1} = vec4(0.0);
          xTexelC${g*2+1}Ready = 0;
          xC${g} = vec4(0.0);`;f+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let g=0;g<(h+1)/2;g++){const v=g*2;if(f+=`
          xC = xCCorner + ${v*c};
          `,l===1){if(v<d&&(a%2===1?(f+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }
              `,c===1&&v>0?f+=`
                xC${v} = vec4(xTexelC${v-2}.zw, xTexelC${v}.xy);
                `:f+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${v} = vec4(previous.zw, xTexelC${v}.xy);
                  } else {
                    xC${v} = vec4(0.0, 0.0, xTexelC${v}.xy);
                  }
                  `):f+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }

                xC${v} = xTexelC${v};
                `,v+1<d)){const x=a%2===0?xO(c):c;c%2===0&&a%2===1||c%2!==0&&a%2!==1?(f+=`
                  xCOffset = xC + imod(pads[1], 2) + ${x};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                    xTexelC${v+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${v+1}.zw = vec2(0.0);
                    }
                    xTexelC${v+1}Ready = 1;
                  }
                  `,c>1?f+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${v+1} = vec4(previous.zw, xTexelC${v+1}.xy);
                    } else {
                     xC${v+1} = vec4(0.0, 0.0, xTexelC${v+1}.xy);
                    }
                    `:f+=`
                    xC${v+1} = vec4(xTexelC${v}.zw, xTexelC${v+1}.xy);
                    `):x===1?f+=`
                    xC${v+1} = xTexelC${v};
                    `:f+=`
                    xCOffset = xC + ${x};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                      xTexelC${v+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${v+1}.zw = vec2(0.0);
                      }
                      xTexelC${v+1}Ready = 1;
                    }

                    xC${v+1} = xTexelC${v+1};
                    `}}else v<d&&(a%2===1?(f+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${v+1}Ready == 0) {
                  xTexelC${v+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${v+1}.zw = vec2(0.0);
                  }
                  xTexelC${v+1}Ready = 1;
                }

                xC${v} = vec4(xTexelC${v}.zw, xTexelC${v+1}.zw);
              `,v+1<d&&(f+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${v+1} = vec4(xTexelC${v+1}.xy, final.xy);
                `)):(f+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                  xTexelC${v+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${v+1}.zw = vec2(0.);
                  }
                  xTexelC${v+1}Ready = 1;
                }

                xC${v} = vec4(
                  xTexelC${v}.xy, xTexelC${v+1}.xy);
              `,v+1<d&&(f+=`
                  xC${v+1} = vec4(xTexelC${v}.zw, xTexelC${v+1}.zw);
                `)));v<d&&(f+=`
            wTexel = getW(r, ${v}, d1, q);
            dotProd += xC${v} * vec4(wTexel.xz, wTexel.xz);
          `,v+1<d&&(f+=`
              wTexel = getW(r, ${v+1}, d1, q);
              dotProd += xC${v+1} * vec4(wTexel.xz, wTexel.xz);
            `))}f+=`
    }
  `,f+=`
      }
    `;let p="",m="";r&&(i?p=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?p=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:p=`vec4 activation(vec4 x) {
          ${r}
        }`,m="result = activation(result);");const y=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${p}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${o};
        int q = d2 - d1 * ${o};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${f}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${y}
        ${m}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pet(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:o,pad:a,dilations:l,dimRoundingMode:c}=r;let u=l;u==null&&(u=[1,1]),Z(cs(o,u),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const d=Vi(i.shape,s.shape,o,u,a,c,!0);let h;Ee().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?h=new Moe(d):h=new Loe(d);const f=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(h,[i,s],"float32",f)}const Ret={kernelName:RN,backendName:"webgl",kernelFunc:Pet};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Oet{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,i=e.padInfo.top,s=e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${o} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${i};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${s};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Det{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,i=e.strideHeight,s=e.strideWidth,o=n-1-e.padInfo.top,a=r-1-e.padInfo.left,l=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Let(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:c,filterShape:u}=r,d=Vi(i.shape,u,o,a,l,c,!0),h=new Oet(d);return n.runWebGLProgram(h,[i,s],"float32")}const Met={kernelName:FO,backendName:"webgl",kernelFunc:Let};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fet(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:c,inputShape:u}=r,d=Vi(u,s.shape,o,a,l,c,!0),h=new Det(d);return n.runWebGLProgram(h,[i,s],"float32")}const jet={kernelName:jO,backendName:"webgl",kernelFunc:Fet};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Bet{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zet(t){const{inputs:e,backend:n}=t,{x:r}=e,i=[...r.shape,...r.shape],s=$e(r.shape),o=qe({inputs:{x:r},backend:n,attrs:{shape:[s]}}),a=new Bet(s),l=n.runWebGLProgram(a,[o],o.dtype),c=qe({inputs:{x:l},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),c}const Uet={kernelName:xee,backendName:"webgl",kernelFunc:zet};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Vet{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:n,inWidth:r,padInfo:i,strideHeight:s,strideWidth:o,filterHeight:a,filterWidth:l,dilationHeight:c,dilationWidth:u}=e,{top:d,left:h}=i;this.userCode=`
      const ivec2 strides = ivec2(${s}, ${o});
      const ivec2 pads = ivec2(${d}, ${h});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${a}; h++) {
          int hIn = hBeg + h * ${c};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${u};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wet(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:o,pad:a,dilations:l}=r,c=Vx(i.shape,s.shape,o,a,"NHWC",l);let u;const d=new Vet(c);u=n.runWebGLProgram(d,[i,s],"float32");const h=qe({inputs:{x:u},backend:n,attrs:{shape:c.outShape}});return n.disposeIntermediateTensorInfo(u),h}const Get={kernelName:ON,backendName:"webgl",kernelFunc:Wet};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qet(t){const{inputs:e,backend:n,attrs:r}=t,{equation:i}=r,s=e,{allDims:o,summedDims:a,idDims:l}=mL(i,s.length);yL(o.length,l,s);const{path:c,steps:u}=vL(a,l),d=u.length;let h=null,f=o.length;const p=[];for(let m=0;m<d;++m){for(const y of u[m]){const{permutationIndices:g,expandDims:v}=gL(f,l[y]);let x;xL(g)?x=s[y]:(x=Rs({inputs:{x:s[y]},backend:n,attrs:{perm:g}}),p.push(x));const b=x.shape.slice();for(let S=0;S<v.length;++S)b.splice(v[S],0,1);xn(x.shape,b)||(x=qe({inputs:{x},backend:n,attrs:{shape:b}}),p.push(x)),h===null?h=x:(h=oM({inputs:{a:x,b:h},backend:n}),p.push(h))}m<d-1&&(c[m]>=0&&(h=K5({inputs:{x:h},backend:n,attrs:{axis:c[m]-(o.length-f),keepDims:!1}}),p.push(h)),f--)}for(const m of p)m!==h&&n.disposeIntermediateTensorInfo(m);return h}const Het={kernelName:BO,backendName:"webgl",kernelFunc:qet};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ket="return (x >= 0.0) ? x : (exp(x) - 1.0);",Xet=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,Yet=un({opSnippet:Ket,packedOpSnippet:Xet}),Zet={kernelName:ax,backendName:"webgl",kernelFunc:Yet};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jet="return (b >= 0.0) ? a : a * (b + 1.0);",Qet=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,ett=t=>{const{inputs:e,backend:n}=t,{dy:r,y:i}=e,s=Ee().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new x0(Qet,r.shape,i.shape):new bp(Jet,r.shape,i.shape);return n.runWebGLProgram(s,[r,i],r.dtype)},ttt={kernelName:zO,backendName:"webgl",kernelFunc:ett};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ntt=`
  return vec4(equal(a, b));
`,rtt="return float(a == b);",itt=Gi({opSnippet:rtt,packedOpSnippet:ntt,dtype:"bool",cpuKernelImpl:OYe}),stt={kernelName:DN,backendName:"webgl",kernelFunc:itt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ott=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${lL};
  float a1 = ${cL};
  float a2 = ${uL};
  float a3 = ${dL};
  float a4 = ${hL};
  float a5 = ${fL};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,att=un({opSnippet:ott}),ltt={kernelName:lx,backendName:"webgl",kernelFunc:att};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ctt=b0+`
  return exp(x);
`,utt=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Foe=un({opSnippet:ctt,packedOpSnippet:utt,cpuKernelImpl:DYe,dtype:"float32"}),dtt={kernelName:cx,backendName:"webgl",kernelFunc:Foe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c$(t){const{inputs:e,attrs:n,backend:r}=t,{dim:i}=n,{input:s}=e,o=s.shape.length,a=s.shape.slice();let l=i;return i<0&&(Z(-(o+1)<=i,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+i+1),a.splice(l,0,1),qe({inputs:{x:s},backend:r,attrs:{shape:a}})}const htt={kernelName:LN,backendName:"webgl",kernelFunc:c$};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EV="return exp(x) - 1.0;",ftt=un({opSnippet:EV,packedOpSnippet:EV,cpuKernelImpl:LYe}),ptt={kernelName:ux,backendName:"webgl",kernelFunc:ftt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TV{constructor(e,n,r){this.variableNames=["real","imag"];const i=n[1];this.outputShape=n;const s=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,o=r?`${i}.0`:"1.0";let a;if(e==="real")a="return real * expR - imag * expI;";else if(e==="imag")a="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${s};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${a}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${i});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${i}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${o};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function joe(t,e,n){const r=n.texData.get(t.dataId),i=$e(t.shape),s=t.shape[t.shape.length-1],o=i/s,a=qe({inputs:{x:t},backend:n,attrs:{shape:[o,s]}}),l=a.shape,c=new TV("real",l,e),u=new TV("imag",l,e),d=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],h=n.runWebGLProgram(c,d,"float32"),f=n.runWebGLProgram(u,d,"float32"),p=_h({inputs:{real:h,imag:f},backend:n});n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f);const m=qe({inputs:{x:p},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(p),m}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mtt(t){const{inputs:e,backend:n}=t,{input:r}=e;return joe(r,!1,n)}const gtt={kernelName:UO,backendName:"webgl",kernelFunc:mtt};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ytt{constructor(e,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ub(t){const{backend:e,attrs:n}=t,{shape:r,value:i}=n;let{dtype:s}=n;if(s=s||s0(i),s==="string"){const o=Rr(s,$e(r));return o.fill(i),e.makeTensorInfo(r,s,o)}else{const o=new ytt(r,i),a=[[i]];return e.runWebGLProgram(o,[],s,a)}}const vtt={kernelName:VO,backendName:"webgl",kernelFunc:ub};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xtt{constructor(e){this.variableNames=["Image"],this.outputShape=[];const n=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const btt={kernelName:WO,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,r=e,i=new xtt(n.shape);return r.runWebGLProgram(i,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $V="return floor(x);",wtt=un({opSnippet:$V,packedOpSnippet:$V,cpuKernelImpl:MYe}),ktt={kernelName:dx,backendName:"webgl",kernelFunc:wtt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Stt=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,Ctt=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,Ntt=Gi({opSnippet:Stt,packedOpSnippet:Ctt,dtype:"int32"}),Att={kernelName:hx,backendName:"webgl",kernelFunc:Ntt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Itt{constructor(e){this.variableNames=["A"];const n=Os(),[r,i]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${i}.0, ${r}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _tt{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=Os(),[r,i]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${i}.0, ${r}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ett={kernelName:CDe,backendName:"webgl",kernelFunc:Ttt};let am,D_=Ee().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function Ttt(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:i}=e;const{numChannels:s}=r,o=typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement,a=typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement,[l,c]=o?[i.videoWidth,i.videoHeight]:[i.width,i.height],u=[c,l],d=[c,l,s];if(a||o){const m=Ee().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(am==null||m!==D_)&&(D_=m,am=document.createElement("canvas").getContext("2d",{willReadFrequently:D_})),am.canvas.width=l,am.canvas.height=c,am.drawImage(i,0,0,l,c),i=am.canvas}const h=n.makeTensorInfo(u,"int32");n.texData.get(h.dataId).usage=Go.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(h.dataId),i);const f=Ee().getBool("WEBGL_PACK")?new _tt(d):new Itt(d),p=n.runWebGLProgram(f,[h],"int32");return n.disposeData(h.dataId),p}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $tt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s,bias:o,preluActivationWeights:a}=e,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h,activation:f,leakyreluAlpha:p}=r,m=zu(u),y=Vi(i.shape,s.shape,l,d,c,h,!1,m);let g;const v=[],x=o!=null,b=a!=null,S=f==="leakyrelu",A=()=>{const I=[i,s],T=(O,$)=>{if($==="NCHW"&&O.shape.length===1&&O.shape[0]!==1){const R=qe({inputs:{x:O},backend:n,attrs:{shape:[O.shape[0],1,1]}});return v.push(R),R}return O};if(x&&I.push(T(o,u)),b&&I.push(T(a,u)),S){const O=n.makeTensorInfo([],"float32",wh(p,"float32"));I.push(O),v.push(O)}return I};if(y.filterHeight===1&&y.filterWidth===1&&y.dilationHeight===1&&y.dilationWidth===1&&y.strideHeight===1&&y.strideWidth===1&&(y.padInfo.type==="SAME"||y.padInfo.type==="VALID"))g=Roe({x:i,filter:s,convInfo:y,backend:n,bias:o,activation:f,preluActivationWeights:a,leakyreluAlpha:p});else if(y.strideWidth<=2&&m==="channelsLast"&&Ee().getBool("WEBGL_EXP_CONV")){const I=f?lv(f,!0):null,T=new Poe(y,x,I,b,S),O=[[y.padInfo.top,y.padInfo.left],[y.strideHeight,y.strideWidth],[y.dilationHeight,y.dilationWidth],[y.inHeight,y.inWidth]],$=A();g=n.runWebGLProgram(T,$,"float32",O)}else if(Ee().getBool("WEBGL_CONV_IM2COL"))g=Ooe({x:i,filter:s,convInfo:y,backend:n,bias:o,activation:f,preluActivationWeights:a,leakyreluAlpha:p});else{const I=f?lv(f,!1):null,T=new $oe(y,x,I,b,S),O=A();g=n.runWebGLProgram(T,O,"float32")}const E=qe({inputs:{x:g},backend:n,attrs:{shape:y.outShape}});return v.push(g),v.forEach(I=>n.disposeIntermediateTensorInfo(I)),E}const Ptt={kernelName:mS,backendName:"webgl",kernelFunc:$tt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rtt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s,bias:o,preluActivationWeights:a}=e,{strides:l,pad:c,dilations:u,dimRoundingMode:d,activation:h,leakyreluAlpha:f}=r,p=[];let m=u;m==null&&(m=[1,1]),Z(cs(l,m),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${m}'`);const y=Vi(i.shape,s.shape,l,m,c,d,!0),g=Ee().getBool("WEBGL_PACK_DEPTHWISECONV")&&y.strideWidth<=2&&y.outChannels/y.inChannels===1,v=h?lv(h,g):null,x=[i,s],b=o!=null,S=a!=null,A=h==="leakyrelu";if(b&&x.push(o),S&&x.push(a),A){const O=n.makeTensorInfo([],"float32",wh(f,"float32"));x.push(O),p.push(O)}let E;g?E=new Moe(y,b,v,S,A):E=new Loe(y,b,v,S,A);const I=[[y.padInfo.top,y.padInfo.left],[y.strideHeight,y.strideWidth],[y.dilationHeight,y.dilationWidth],[y.inHeight,y.inWidth]],T=n.runWebGLProgram(E,x,"float32",I);return p.forEach(O=>n.disposeIntermediateTensorInfo(O)),T}const Ott={kernelName:Fee,backendName:"webgl",kernelFunc:Rtt};class Dtt{constructor(e,n,r,i){this.sliceDim=e,this.strides=n,this.paramsShape=i,this.variableNames=["x","indices"],this.outputShape=r;const s=$n(r.length);let o=`
    int index;`;for(let a=0;a<this.sliceDim;a++)o+=`
          index = round(getIndices(coords[0], ${a}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[a]};
          flattenIndex += index * ${this.strides[a]};`;this.userCode=`
         void main() {
          ${s} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${o}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ltt(t){const{inputs:e,backend:n}=t,{params:r,indices:i}=e,s=i.shape,o=s[s.length-1],a=$e(r.shape),[l,c,u,d]=ZD(r,i),h=qe({inputs:{x:i},backend:n,attrs:{shape:[c,o]}}),f=qe({inputs:{x:r},backend:n,attrs:{shape:[$e(r.shape)/u,u]}});if(n.shouldExecuteOnCPU([r,i])||r.dtype==="string"){const g=n.readSync(i.dataId),v=n.bufferSync(r),x=FYe(g,v,r.dtype,c,o,u,d,r.shape,a);return n.makeTensorInfo(l,r.dtype,x.values)}const p=new Dtt(o,d,[c,u],r.shape),m=n.runWebGLProgram(p,[f,h],f.dtype),y=qe({inputs:{x:m},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),y}const Mtt={kernelName:bee,backendName:"webgl",kernelFunc:Ltt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ftt{constructor(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const r=$n(this.rank),i=jtt(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${i}));
      }
    `}}function jtt(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let i=0;i<t.length;i++)i===2?r.push("index"):r.push(`${n[i]}`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Boe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,indices:s}=e,{axis:o,batchDims:a}=r,l=Yt(o,i.shape)[0];if(Ee().get("DEBUG")){const v=n.readSync(s.dataId),x=i.shape[l];for(let b=0;b<v.length;++b){const S=v[b];Z(S<=x-1&&S>=0,()=>`GatherV2: the index value ${S} is not in [0, ${x-1}]`)}}const c=wL(i,s,l,a),u=$e(s.shape),d=[],h=qe({inputs:{x:i},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),f=qe({inputs:{x:s},backend:n,attrs:{shape:[c.batchSize,u/c.batchSize]}});d.push(h),d.push(f);const p=[c.batchSize,c.outerSize,u/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([i,s])||i.dtype==="string"){const v=n.bufferSync(f),x=n.bufferSync(h),b=jYe(x,v,p);return d.forEach(S=>n.disposeIntermediateTensorInfo(S)),n.makeTensorInfo(c.outputShape,b.dtype,b.values)}const m=new Ftt(h.shape,p),y=n.runWebGLProgram(m,[h,f],h.dtype);d.push(y);const g=qe({inputs:{x:y},backend:n,attrs:{shape:c.outputShape}});return d.forEach(v=>n.disposeIntermediateTensorInfo(v)),g}const Btt={kernelName:FN,backendName:"webgl",kernelFunc:Boe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ztt="return float(a > b);",Utt=`
  return vec4(greaterThan(a, b));
`,Vtt=Gi({opSnippet:ztt,packedOpSnippet:Utt,cpuKernelImpl:BYe,dtype:"bool"}),Wtt={kernelName:jN,backendName:"webgl",kernelFunc:Vtt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gtt="return float(a >= b);",qtt=`
  return vec4(greaterThanEqual(a, b));
`,Htt=Gi({opSnippet:Gtt,packedOpSnippet:qtt,dtype:"bool",cpuKernelImpl:zYe}),Ktt={kernelName:fx,backendName:"webgl",kernelFunc:Htt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xtt(t){const{inputs:e,backend:n}=t,{input:r}=e;return joe(r,!0,n)}const Ytt={kernelName:GO,backendName:"webgl",kernelFunc:Xtt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ztt="return float(!isnan(x) && !isinf(x));",Jtt=un({opSnippet:Ztt,dtype:"bool"}),Qtt={kernelName:mx,backendName:"webgl",kernelFunc:Jtt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ent="return float(isinf(x));",tnt=un({opSnippet:ent,dtype:"bool"}),nnt={kernelName:gx,backendName:"webgl",kernelFunc:tnt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rnt="return float(isnan(x));",int=un({opSnippet:rnt,dtype:"bool"}),snt={kernelName:yx,backendName:"webgl",kernelFunc:int};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ont="return float(a < b);",ant=`
  return vec4(lessThan(a, b));
`,lnt=Gi({opSnippet:ont,packedOpSnippet:ant,cpuKernelImpl:UYe,dtype:"bool"}),cnt={kernelName:zN,backendName:"webgl",kernelFunc:lnt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const unt="return float(a <= b);",dnt=`
  return vec4(lessThanEqual(a, b));
`,hnt=Gi({opSnippet:unt,packedOpSnippet:dnt,cpuKernelImpl:VYe,dtype:"bool"}),fnt={kernelName:UN,backendName:"webgl",kernelFunc:hnt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pnt(t){const{backend:e,attrs:n}=t,{start:r,stop:i,num:s}=n,o=WYe(r,i,s);return e.makeTensorInfo([o.length],"float32",o)}const mnt={kernelName:wee,backendName:"webgl",kernelFunc:pnt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gnt=b0+`
  return x < 0.0 ? 0./0. : log(x);
`,ynt=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,vnt=un({opSnippet:gnt,packedOpSnippet:ynt,cpuKernelImpl:GYe}),xnt={kernelName:vx,backendName:"webgl",kernelFunc:vnt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bnt=b0+`
  return log(1.0 + x);
`,wnt=un({opSnippet:bnt}),knt={kernelName:xx,backendName:"webgl",kernelFunc:wnt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Snt="return float(a >= 1.0 && b >= 1.0);",Cnt=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,Nnt=Gi({opSnippet:Snt,packedOpSnippet:Cnt,dtype:"bool"}),Ant={kernelName:VN,backendName:"webgl",kernelFunc:Nnt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Int="return float(!(x >= 1.0));",_nt=un({opSnippet:Int}),Ent={kernelName:WN,backendName:"webgl",kernelFunc:_nt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tnt="return float(a >= 1.0 || b >= 1.0);",$nt=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,Pnt=Gi({opSnippet:Tnt,packedOpSnippet:$nt,dtype:"bool"}),Rnt={kernelName:GN,backendName:"webgl",kernelFunc:Pnt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ont{constructor(e,n,r,i,s){this.variableNames=["x"],this.outputShape=[];const o=n,a=e[3]-1;this.outputShape=e;let l;const c=`float(${r}) + float(${i}) * sum`;s===.5?l=`inversesqrt(${c})`:s===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${s}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${o}; j <= ${o}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${a}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Dnt{constructor(e,n,r,i,s){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const o=n,a=e[3]-1;this.outputShape=e;let l;const c=`float(${r}) + float(${i}) * sum`;s===.5?l=`inversesqrt(${c})`:s===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${s}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${o};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${o}; j <= ${o}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${a}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lnt=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{depthRadius:s,bias:o,alpha:a,beta:l}=r,c=Ee().getBool("WEBGL_PACK_NORMALIZATION")?new Dnt(i.shape,s,o,a,l):new Ont(i.shape,s,o,a,l);return n.runWebGLProgram(c,[i],i.dtype)},Mnt={kernelName:qN,backendName:"webgl",kernelFunc:Lnt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Fnt{constructor(e,n,r,i,s){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=r,this.alpha=i,this.beta=s,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${i}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${i})
                * float(${s})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${s});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jnt=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i,y:s,dy:o}=e,{depthRadius:a,bias:l,alpha:c,beta:u}=r,d=new Fnt(i.shape,a,l,c,u);return n.runWebGLProgram(d,[i,s,o],i.dtype)},Bnt={kernelName:HO,backendName:"webgl",kernelFunc:jnt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function znt(t,e,n,r){const i=$e(e),o=$e(t.shape)/i,a=qe({inputs:{x:t},attrs:{shape:[o,i]},backend:r}),l=Fp(a,t.dtype,"max",r),c=qe({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zoe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reductionIndices:s,keepDims:o}=r,a=i.shape.length,l=Yt(s,i.shape);let c=l;const u=yr(c,a),d=u!=null,h=n.shouldExecuteOnCPU([i]);let f=i;if(d){if(h){const x=n.texData.get(f.dataId).values,b=new Array(a);for(let E=0;E<b.length;E++)b[E]=i.shape[u[E]];const S=iM(x,i.shape,i.dtype,u,b);f=n.makeTensorInfo(b,i.dtype);const A=n.texData.get(f.dataId);A.values=S}else f=H5(i,u,n);c=Mr(c.length,a)}Wi("max",c,a);const[p,m]=Pi(f.shape,c);let y=p;o&&(y=Dr(p,l));let g;if(h){const x=n.texData.get(f.dataId).values,b=qYe(x,$e(m),y,i.dtype);g=n.makeTensorInfo(y,i.dtype);const S=n.texData.get(g.dataId);S.values=b}else g=znt(f,m,y,n);return d&&n.disposeIntermediateTensorInfo(f),g}const Unt={kernelName:HN,backendName:"webgl",kernelFunc:zoe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vnt=sM+`
  return max(a, b);
`,Wnt=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Mp+`
  return result;
`,Gnt=Gi({opSnippet:Vnt,packedOpSnippet:Wnt,cpuKernelImpl:HYe}),qnt={kernelName:bx,backendName:"webgl",kernelFunc:Gnt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hnt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;ab(i,"maxPool");const{filterSize:s,strides:o,pad:a,dimRoundingMode:l}=r,c=1;Z(cs(o,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const u=Ya(i.shape,s,o,c,a,l);if(u.filterWidth===1&&u.filterHeight===1&&xn(u.inShape,u.outShape))return ko({inputs:{x:i},backend:n});const d=new cv(u,"max",!1);return n.runWebGLProgram(d,[i],i.dtype)}const Knt={kernelName:KN,backendName:"webgl",kernelFunc:Hnt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xnt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:s,strides:o,pad:a,dataFormat:l,dimRoundingMode:c}=r,u=[1,1,1],d=Bu(i.shape,s,o,u,a,c,l),h=new aM(d,"max",!1);return n.runWebGLProgram(h,[i],i.dtype)}const Ynt={kernelName:XN,backendName:"webgl",kernelFunc:Xnt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Znt{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideHeight,r=e.strideWidth,i=e.dilationHeight,s=e.effectiveFilterHeight,o=e.effectiveFilterWidth,a=s-1-e.padInfo.top,l=o-1-e.padInfo.left,c=s*o-1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${s};
          wR += ${i}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${o}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${c} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${o} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class Jnt{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideDepth,r=e.strideHeight,i=e.strideWidth,s=e.dilationDepth,o=e.dilationHeight,a=e.dilationWidth,l=e.effectiveFilterDepth,c=e.effectiveFilterHeight,u=e.effectiveFilterWidth,d=l-1-e.padInfo.front,h=c-1-e.padInfo.top,f=u-1-e.padInfo.left,p=l*c*u-1;this.userCode=`
      const ivec3 pads = ivec3(${d}, ${h}, ${f});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${s}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${c};
              wR += ${o}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${u};
                wC += ${a}) {
              float dyC = float(dyCCorner + wC) / ${i}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${p} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${c} * ${u} +
                  wR * ${u} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qnt(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,o=s,{filterSize:a,strides:l,pad:c,dimRoundingMode:u}=r,d=[1,1,1],h=Bu(o.shape,a,l,d,c,u),f=new aM(h,"max",!0),p=n.runWebGLProgram(f,[o],o.dtype),m=new Jnt(h),y=n.runWebGLProgram(m,[i,p],o.dtype);return n.disposeIntermediateTensorInfo(p),y}const ert={kernelName:XO,backendName:"webgl",kernelFunc:Qnt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function trt(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s,output:o}=e,a=s;ab([s,o],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=r,h=Ya(a.shape,l,c,1,u,d),f=!0,p=new cv(h,"max",f),m=n.runWebGLProgram(p,[a],a.dtype),y=new Znt(h),g=n.runWebGLProgram(y,[i,m],a.dtype);return n.disposeIntermediateTensorInfo(m),g}const nrt={kernelName:KO,backendName:"webgl",kernelFunc:trt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rrt(t,e,n,r){let i=new cv(n,"max",!1);const s=r.runWebGLProgram(i,[t],"float32");i=new cv(n,"max",!0,!0,e);const o=r.runWebGLProgram(i,[t],"float32");return[s,o]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const irt={kernelName:kee,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:i,strides:s,pad:o,includeBatchInIndex:a}=e,l=n;Z(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const c=[1,1];Z(cs(s,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);const u=Ya(r.shape,i,s,c,o),[d,h]=rrt(r,a,u,l);return[d,h]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function srt(t,e,n,r){const i=$e(e),o=$e(t.shape)/i,a=qe({inputs:{x:t},attrs:{shape:[o,i]},backend:r}),l=Fp(a,"float32","mean",r),c=qe({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ort={kernelName:YN,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{keepDims:i,axis:s}=e,o=n,a=r.shape.length,l=Yt(s,r.shape);let c=l;const u=yr(c,a),d=u!=null,h=o.shouldExecuteOnCPU([r]),f=[];let p=r;if(d){if(h){const b=o.texData.get(p.dataId).values,S=new Array(a);for(let I=0;I<S.length;I++)S[I]=r.shape[u[I]];const A=iM(b,r.shape,r.dtype,u,S);p=o.makeTensorInfo(S,r.dtype);const E=o.texData.get(p.dataId);E.values=A}else p=H5(r,u,o);f.push(p),c=Mr(c.length,a)}Wi("sum",c,a);const[m,y]=Pi(p.shape,c);let g=m;i&&(g=Dr(m,l));const v=srt(p,y,g,o);for(const x of f)o.disposeIntermediateTensorInfo(x);return v}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function art(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r,a=i.shape.length,l=Yt(s,i.shape);let c=l;const u=yr(c,a);let d=i;u!=null&&(d=Rs({inputs:{x:i},backend:n,attrs:{perm:u}}),c=Mr(c.length,i.shape.length)),Wi("min",c,a);const[h,f]=Pi(d.shape,c),p=$e(f),m=qe({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),y=Fp(m,m.dtype,"min",n);let g;if(o){const v=Dr(h,l);g=qe({inputs:{x:y},backend:n,attrs:{shape:v}})}else g=qe({inputs:{x:y},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),u!=null&&n.disposeIntermediateTensorInfo(d),g}const lrt={kernelName:ZN,backendName:"webgl",kernelFunc:art};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const crt=sM+`
  return min(a, b);
`,urt=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Mp+`
  return result;
`,drt=Gi({opSnippet:crt,packedOpSnippet:urt,cpuKernelImpl:KYe}),hrt={kernelName:wx,backendName:"webgl",kernelFunc:drt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class frt{constructor(e,n,r){this.variableNames=["x"],this.outputShape=n.map((u,d)=>u[0]+e[d]+u[1]);const i=e.length,s=$n(i),o=n.map(u=>u[0]).join(","),a=n.map((u,d)=>u[0]+e[d]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,i),c=r==="reflect"?0:1;if(i===1){this.userCode=`
        int start = ${o};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${c};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${c};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${s} start = ${s}(${o});
      ${s} end = ${s}(${a});

      void main() {
        ${s} outC = getOutputCoords();
        for (int i = 0; i < ${i}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${c};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${c};
          }
        }
        ${s} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class prt{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((p,m)=>p[0]+e[m]+p[1]);const i=e.length,s=$n(i),o=n.map(p=>p[0]).join(","),a=n.map((p,m)=>p[0]+e[m]).join(","),l=Is("rc",i),c=Is("source",i),u=`${l[i-1]} < ${this.outputShape[i-1]}`,d=i===1?"source":`vec2(${c.slice(-2).join()})`,h=r==="reflect"?0:1;let f="";if(i===1){const p=`
        ${s} source = rc;
        if (source < start) {
          source = start * 2 - source - ${h};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${h};
        }
        source -= start;
      `;f=`
        ${s} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${l[i-1]} += 1;
        if(${u}) {
          ${p}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
      `}else{const p=`
        ${s} source = rc;
        ${s} lt = ${s}(lessThan(source, start));
        ${s} gte = ${s}(greaterThanEqual(source, end));
        ${s} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${h}) +
                gte * ((end - 1) * 2 - source + ${h});
        source -= start;
      `;f=`
        ${s} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${l[i-1]} += 1;
        if(${u}) {
          ${p}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
        rc = outputLoc;
        ${l[i-2]} += 1;
        if(${l[i-2]} < ${this.outputShape[i-2]}) {
          ${p}
          result[2] = getChannel(getX(${c.join()}), ${d});
          ${l[i-1]} += 1;
          if(${u}) {
            ${p}
            result[3] = getChannel(getX(${c.join()}), ${d});
          }
        }
      `}this.userCode=`
      const ${s} start = ${s}(${o});
      const ${s} end = ${s}(${a});

      void main() {
        ${s} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${f}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mrt=({inputs:t,backend:e,attrs:n})=>{const{x:r}=t,{paddings:i,mode:s}=n,o=Ee().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new prt(r.shape,i,s):new frt(r.shape,i,s);return e.runWebGLProgram(o,[r],r.dtype)},grt={kernelName:JN,backendName:"webgl",kernelFunc:mrt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yrt=`if (b == 0.0) return NAN;
  return mod(a, b);`,vrt=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+Mp+`
  return result;
`,xrt=Gi({opSnippet:yrt,packedOpSnippet:vrt}),brt={kernelName:kx,backendName:"webgl",kernelFunc:xrt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wrt{constructor(e,n,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const krt=`
if (a == b) {
  return 1.0;
};
return a / b;`,Srt=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,Uoe=Gi({opSnippet:krt,packedOpSnippet:Srt,checkOutOfBounds:!0}),Crt={kernelName:ox,backendName:"webgl",kernelFunc:Uoe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PV="return a - b;",Voe=Gi({opSnippet:PV,packedOpSnippet:PV,supportsComplex:!0,cpuKernelImpl:mZe}),Nrt={kernelName:Fx,backendName:"webgl",kernelFunc:Voe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Woe(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{dim:s}=r,o=Yt([s],i.shape),a=zoe({inputs:{x:i},backend:n,attrs:{reductionIndices:o,keepDims:!1}}),l=Dr(a.shape,o),c=qe({inputs:{x:a},backend:n,attrs:{shape:l}}),u=Voe({inputs:{a:i,b:c},backend:n}),d=Foe({inputs:{x:u},backend:n}),h=K5({inputs:{x:d},backend:n,attrs:{axis:o,keepDims:!1}}),f=qe({inputs:{x:h},backend:n,attrs:{shape:l}}),p=Uoe({inputs:{a:d,b:f},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),p}const Art={kernelName:g5,backendName:"webgl",kernelFunc:Woe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Irt(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{numSamples:s,seed:o,normalized:a}=r,l=a?i:Woe({inputs:{logits:i},backend:n,attrs:{dim:i.shape.length-1}}),c=l.shape[0],u=l.shape[1],d=new wrt(c,u,s),h=[[o]],f=n.runWebGLProgram(d,[l],"int32",h);return a||n.disposeIntermediateTensorInfo(l),f}const _rt={kernelName:See,backendName:"webgl",kernelFunc:Irt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ert=Ja+`
  return -x;
`,Trt=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function $rt(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])){const s=n.texData.get(r.dataId),[o,a]=YYe(s.values,r.shape,r.dtype);return n.makeTensorInfo(a,r.dtype,o)}let i;return Ee().getBool("WEBGL_PACK_UNARY_OPERATIONS")?i=new Td(r.shape,Trt):i=new ac(r.shape,Ert),n.runWebGLProgram(i,[r],r.dtype)}const Prt={kernelName:QN,backendName:"webgl",kernelFunc:$rt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rrt=qD;function Ort(t){zo("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l}=r,c=n.readSync(i.dataId),u=n.readSync(s.dataId),{selectedIndices:d}=Rrt(c,u,o,a,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const Drt={kernelName:YO,backendName:"webgl",kernelFunc:Ort};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lrt=HD;function Mrt(t){zo("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:c}=r,u=n.readSync(i.dataId),d=n.readSync(s.dataId),{selectedIndices:h,validOutputs:f}=Lrt(u,d,o,a,l,c);return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([f]))]}const Frt={kernelName:ZO,backendName:"webgl",kernelFunc:Mrt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jrt=KD;function Brt(t){zo("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,softNmsSigma:c}=r,u=n.readSync(i.dataId),d=n.readSync(s.dataId),h=o,f=a,p=l,m=c,{selectedIndices:y,selectedScores:g}=jrt(u,d,h,f,p,m);return[n.makeTensorInfo([y.length],"int32",new Int32Array(y)),n.makeTensorInfo([g.length],"float32",new Float32Array(g))]}const zrt={kernelName:JO,backendName:"webgl",kernelFunc:Brt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Urt{constructor(e,n,r,i){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${i}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vrt=t=>{const{inputs:e,backend:n,attrs:r}=t,{indices:i}=e,{dtype:s,depth:o,onValue:a,offValue:l}=r,c=$e(i.shape),u=new Urt(c,o,a,l),d=qe({inputs:{x:i},backend:n,attrs:{shape:[c]}}),h=n.runWebGLProgram(u,[d],s);n.disposeIntermediateTensorInfo(d);const f=[...i.shape,o],p=qe({inputs:{x:h},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(h),p},Wrt={kernelName:n5,backendName:"webgl",kernelFunc:Vrt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BS(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="complex64"){const i=cb({inputs:{input:r},backend:n}),s=BS({inputs:{x:i},backend:n}),o=X5({inputs:{input:r},backend:n}),a=BS({inputs:{x:o},backend:n}),l=_h({inputs:{real:s,imag:a},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return ub({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}const Grt={kernelName:x5,backendName:"webgl",kernelFunc:BS};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Goe(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const i=cb({inputs:{input:r},backend:n}),s=Goe({inputs:{x:i},backend:n}),o=X5({inputs:{input:r},backend:n}),a=BS({inputs:{x:o},backend:n}),l=_h({inputs:{real:s,imag:a},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return ub({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const qrt={kernelName:t5,backendName:"webgl",kernelFunc:Goe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hrt(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r;if(e.length===1)return c$({inputs:{input:e[0]},backend:n,attrs:{dim:i}});const s=e[0].shape,o=e[0].dtype;e.forEach(u=>{Xa(s,u.shape,"All tensors passed to stack must have matching shapes"),Z(o===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=e.map(u=>{const d=c$({inputs:{input:u},backend:n,attrs:{dim:i}});return a.push(d),d}),c=Toe({inputs:l,backend:n,attrs:{axis:i}});return a.forEach(u=>n.disposeIntermediateTensorInfo(u)),c}const Krt={kernelName:r5,backendName:"webgl",kernelFunc:Hrt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Xrt{constructor(e,n,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((c,u)=>c[0]+e[u]+c[1]);const i=e.length,s=$n(i),o=n.map(c=>c[0]).join(","),a=n.map((c,u)=>c[0]+e[u]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,i);if(i===1){this.userCode=`
        int start = ${o};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${s} start = ${s}(${o});
      ${s} end = ${s}(${a});

      void main() {
        ${s} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${s} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Yrt{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((m,y)=>m[0]+e[y]+m[1]);const i=e.length,s=$n(i),o=n.map(m=>m[0]).join(","),a=n.map((m,y)=>m[0]+e[y]).join(","),l=Is("rc",i),c=Is("source",i),u=`${l[i-1]} < ${this.outputShape[i-1]}`,d=i===1?"source":`vec2(${c.slice(-2).join()})`,h=[`${s} rc = outputLoc;`,`${l[i-1]} += 1;
       if(${u}) {
      `,i===1?"":`}
       rc = outputLoc;
       ${l[i-2]} += 1;
       if(${l[i-2]} < ${this.outputShape[i-2]}) {`,i===1?"":`  ${l[i-1]} += 1;
         if(${u}) {`],f=i===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let p="";for(let m=0,y=i===1?2:4;m<y;m++)p+=`
        ${h[m]}
        if (${f}) {
          result[${m}] = float(value);
        } else {
          ${s} source = rc - start;
          result[${m}] = getChannel(getX(${c.join()}), ${d});
        }
      `;p+=i===1?"} ":"}}",this.userCode=`
      const ${s} start = ${s}(${o});
      const ${s} end = ${s}(${a});

      void main() {
        ${s} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${p}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qoe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{paddings:s,constantValue:o}=r;if($e(i.shape)===0){const c=s.map((u,d)=>u[0]+i.shape[d]+u[1]);return ub({backend:n,attrs:{shape:c,value:o,dtype:i.dtype}})}const a=Ee().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Yrt(i.shape,s,o):new Xrt(i.shape,s,o),l=[[o]];return n.runWebGLProgram(a,[i],i.dtype,l)},Zrt={kernelName:i5,backendName:"webgl",kernelFunc:qoe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jrt=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,Qrt=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+Mp+`
  return result;
`,eit=Gi({opSnippet:Jrt,packedOpSnippet:Qrt}),tit={kernelName:Cx,backendName:"webgl",kernelFunc:eit};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nit(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r,a=i.shape.length,l=[],c=Yt(s,i.shape);let u=c;const d=yr(u,a);let h=i;d!=null&&(h=Rs({inputs:{x:i},backend:n,attrs:{perm:d}}),u=Mr(u.length,a),l.push(h)),Wi("prod",u,a);let f;if(n.shouldExecuteOnCPU([h])){const p=n.texData.get(h.dataId).values,{outVals:m,outShape:y,outDtype:g}=JYe(h.shape,h.dtype,p,u);f=n.makeTensorInfo(y,g,m)}else{const[p,m]=Pi(h.shape,u),y=$e(m),g=qe({inputs:{x:h},backend:n,attrs:{shape:[-1,y]}}),v=dD(i.dtype),x=Fp(g,v,"prod",n);f=qe({inputs:{x},backend:n,attrs:{shape:p}}),l.push(g),l.push(x)}if(o){l.push(f);const p=Dr(f.shape,c);f=qe({inputs:{x:f},backend:n,attrs:{shape:p}})}return l.forEach(p=>n.disposeIntermediateTensorInfo(p)),f}const rit={kernelName:o5,backendName:"webgl",kernelFunc:nit};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iit(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:i,paramsDenseValues:s,indices:o}=e,{outputRaggedRank:a}=r,l=i.map(g=>n.readSync(g.dataId)),c=i.map(g=>g.shape),u=n.readSync(s.dataId),d=n.readSync(o.dataId),[h,f,p]=QYe(l,c,u,s.shape,s.dtype,d,o.shape,a),m=h.map(g=>n.makeTensorInfo([g.length],"int32",g)),y=n.makeTensorInfo(p,s.dtype,f);return m.concat([y])}const sit={kernelName:Cee,backendName:"webgl",kernelFunc:iit};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oit(t){const{inputs:e,backend:n}=t,{starts:r,limits:i,deltas:s}=e,o=n.readSync(r.dataId),a=n.readSync(i.dataId),l=n.readSync(s.dataId),[c,u]=eZe(o,r.shape,r.dtype,a,i.shape,l,s.shape),d=n.makeTensorInfo([c.length],"int32",c),h=n.makeTensorInfo([u.length],r.dtype,u);return[d,h]}const ait={kernelName:Nee,backendName:"webgl",kernelFunc:oit};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lit(t){const{inputs:e,backend:n,attrs:r}=t,{shape:i,values:s,defaultValue:o,rowPartitionTensors:a}=e,{rowPartitionTypes:l}=r,c=n.readSync(i.dataId),u=n.readSync(s.dataId),d=n.readSync(o.dataId),h=a.map(y=>n.readSync(y.dataId)),f=a.map(y=>y.shape),[p,m]=tZe(c,i.shape,u,s.shape,s.dtype,d,o.shape,h,f,l);return n.makeTensorInfo(p,s.dtype,m)}const cit={kernelName:Aee,backendName:"webgl",kernelFunc:lit};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hoe=t=>{const{backend:e,attrs:n}=t,{start:r,stop:i,step:s,dtype:o}=n,a=nZe(r,i,s,o);return e.makeTensorInfo([a.length],o,a)},uit={kernelName:QO,backendName:"webgl",kernelFunc:Hoe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dit="return 1.0 / x;",hit=un({opSnippet:dit}),fit={kernelName:Nx,backendName:"webgl",kernelFunc:hit};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pit=Ja+`
  return (x < 0.0) ? 0.0 : x;
`,mit=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,git=un({opSnippet:pit,packedOpSnippet:mit}),yit={kernelName:Ax,backendName:"webgl",kernelFunc:git};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vit=Ja+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,xit=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,bit=un({opSnippet:vit,packedOpSnippet:xit}),wit={kernelName:Ix,backendName:"webgl",kernelFunc:bit};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kit{constructor(e,n,r,i,s){this.variableNames=["A"],this.outputShape=[];const[o,a,l,c]=e;this.outputShape=[o,n,r,c];const u=[i&&n>1?a-1:a,i&&r>1?l-1:l],d=[i&&n>1?n-1:n,i&&r>1?r-1:r];let h;s?h="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":h="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/d[0]},
          ${u[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${h};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Sit{constructor(e,n,r,i,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,a,l,c]=e;this.outputShape=[o,n,r,c];const u=[i&&n>1?a-1:a,i&&r>1?l-1:l],d=[i&&n>1?n-1:n,i&&r>1?r-1:r];let h;s?h="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":h="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/d[0]},
          ${u[1]/d[1]},
          ${u[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${h};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cit(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:s,halfPixelCenters:o,size:a}=r,[l,c]=a,u=Ee().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Sit(i.shape,l,c,s,o):new kit(i.shape,l,c,s,o);return n.runWebGLProgram(u,[i],"float32")}const Nit={kernelName:c5,backendName:"webgl",kernelFunc:Cit};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ait{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,i,s]=n,[,o,a]=e,l=[r&&o>1?i-1:i,r&&a>1?s-1:s],c=[r&&o>1?o-1:o,r&&a>1?a-1:a],u=l[0]/c[0],d=l[1]/c[1],h=1/u,f=1/d,p=Math.ceil(h)*2+2,m=Math.ceil(f)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${d});

        const float invHeightScale = float(${h});
        const float invWidthScale = float(${f});

        const int winHeight = int(${p});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${i-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${s-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iit(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:s}=e,{alignCorners:o}=r,a=new Ait(s.shape,i.shape,o);return n.runWebGLProgram(a,[s],s.dtype)}const _it={kernelName:nD,backendName:"webgl",kernelFunc:Iit};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Eit{constructor(e,n,r,i,s){this.variableNames=["A"],this.outputShape=[];const[o,a,l,c]=e;this.outputShape=[o,n,r,c];const u=[i&&n>1?a-1:a,i&&r>1?l-1:l],d=[i&&n>1?n-1:n,i&&r>1?r-1:r],h=i?"0.5":"0.0";let f;s?f="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":f="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/d[0]},
          ${u[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${f};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${h})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Tit{constructor(e,n,r,i,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,a,l,c]=e;this.outputShape=[o,n,r,c];const u=[i&&n>1?a-1:a,i&&r>1?l-1:l],d=[i&&n>1?n-1:n,i&&r>1?r-1:r],h=i?"0.5":"0.0";let f;s?f="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":f="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/d[0]},
          ${u[1]/d[1]},
          ${u[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${f};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${h})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $it(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:s,halfPixelCenters:o,size:a}=r,[l,c]=a,u=Ee().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Tit(i.shape,l,c,s,o):new Eit(i.shape,l,c,s,o);return n.runWebGLProgram(u,[i],i.dtype)}const Pit={kernelName:l5,backendName:"webgl",kernelFunc:$it};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Rit{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,i,s]=n,[,o,a]=e,l=[r&&o>1?i-1:i,r&&a>1?s-1:s],c=[r&&o>1?o-1:o,r&&a>1?a-1:a],u=l[0]/c[0],d=l[1]/c[1],h=1/u,f=1/d,p=Math.ceil(h)*2+2,m=Math.ceil(f)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${d});

        const float invHeightScale = float(${h});
        const float invWidthScale = float(${f});

        const int winHeight = int(${p});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${c[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${c[1]}));

            int sourceNearestRow = int(min(
                float(int(${i}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${s}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oit(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:s}=e,{alignCorners:o}=r,a=new Rit(s.shape,i.shape,o);return n.runWebGLProgram(a,[s],s.dtype)}const Dit={kernelName:tD,backendName:"webgl",kernelFunc:Oit};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Lit{constructor(e,n){this.variableNames=["x"];const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const i=a=>n.indexOf(a)!==-1&&e[a]!==1?`${e[a]} - coords[${a}] - 1`:`coords[${a}]`,s=e.map((a,l)=>i(l)).join(","),o=$n(r);this.userCode=`
      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${s}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Mit{constructor(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;const i=Is("rc",r),s=`${i[r-1]} + 1 < ${this.outputShape[r-1]}`,o=`${i[r-2]} + 1 < ${this.outputShape[r-2]}`,a=$n(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${s}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${a} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(i.slice())};
          if(${s}){
            result.g = ${c(i.slice())};
          }
          if(${o}) {
            result.b = ${u(i.slice())};
            if(${s}) {
              result.a = ${d(i.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(p){return h(p)}function c(p){return p[r-1]="("+p[r-1]+" + 1)",h(p)}function u(p){return p[r-2]="("+p[r-2]+" + 1)",h(p)}function d(p){return p[r-1]="("+p[r-1]+" + 1)",p[r-2]="("+p[r-2]+" + 1)",h(p)}function h(p){const m=e.map((v,x)=>f(x,p)),y=m.join(","),g=m.slice(-2).join(",");return`getChannel(getX(${y}), vec2(${g}))`}function f(p,m){return n.indexOf(p)!==-1&&e[p]!==1?`${e[p]} - ${m[p]} - 1`:`${m[p]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fit(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dims:s}=r,o=i.shape.length,a=Yt(s,i.shape);if(o===0)return ko({inputs:{x:i},backend:n});const l=Ee().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Mit(i.shape,a):new Lit(i.shape,a);return n.runWebGLProgram(l,[i],i.dtype)}const jit={kernelName:u5,backendName:"webgl",kernelFunc:Fit};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Bit{constructor(e,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=e[1],i=e[2];this.outputShape=e;let s="";typeof n=="number"?s=`float outputValue = ${n.toFixed(2)};`:s=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${s}
          if(coordX >= 0 && coordX < ${i} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zit={kernelName:cD,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:i,fillValue:s,center:o}=e,a=n,l=new Bit(r.shape,s),[c,u]=sL(o,r.shape[1],r.shape[2]),d=[[c,u,Math.sin(i),Math.cos(i)]];return a.runWebGLProgram(l,[r],r.dtype,d)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uit=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,Vit=un({opSnippet:Uit}),Wit={kernelName:_x,backendName:"webgl",kernelFunc:Vit};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Git="return inversesqrt(x);",qit=un({opSnippet:Git,cpuKernelImpl:rZe}),Hit={kernelName:Ex,backendName:"webgl",kernelFunc:qit};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lM{constructor(e,n,r,i,s,o,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;const c=$n(s.length),u=$n(o.length);let d="";r===1?d="i":r===2&&(d="i, j");const h=`getIndices(${d})`;let f="";i===1?f="i":i===2&&(f="i, coords[1]");const p=`getUpdates(${f})`;let m="";l&&(m="coords[0], coords[1]");const y=`getDefaultValue(${m})`,g=n>1?"strides[j]":"strides";this.userCode=`
        ${c} strides = ${c}(${s});

        void main() {
          ${u} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${h});
              flattenedIndex += index * ${g};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${p};
              found = true;
            }
          }
          setOutput(mix(${y}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Kit{constructor(e,n,r,i,s,o,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=o;const c=$n(s.length),u=$n(o.length);let d="";r===1?d="i":r===2&&(d="i, j");const h=`getIndices(${d})`;let f="";i===1?f="i":i===2&&(f="i, coords[1]");const p=`getUpdates(${f})`;let m="";l&&(m="coords[0], coords[1]");const y=`getDefaultValue(${m})`,g=n>1?"strides[j]":"strides",v=n>1?"strides[j + 1]":"strides";this.userCode=`
        ${c} strides = ${c}(${s});

        void main() {
          ${u} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${e}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${n}; j+=2) {
              ivec4 index = round(${h});
              flattenedIndex += index.xz * ${g};
              if (j + 1 < ${n}) {
                flattenedIndex += index.yw * ${v};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${p};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${y}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xit(t){const{inputs:e,backend:n,attrs:r}=t,{indices:i,updates:s}=e,{shape:o}=r,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=Pp(s,i,o),h=[d/c,c];if(d===0)return n.makeTensorInfo(o,i.dtype);const f=qe({inputs:{x:i},backend:n,attrs:{shape:[l,a]}}),p=qe({inputs:{x:s},backend:n,attrs:{shape:[l,c]}}),m=n.makeTensorInfo([],"float32",new Float32Array([0]));let y;Ee().getBool("WEBGL_PACK")?y=new Kit(l,a,f.shape.length,p.shape.length,u,h):y=new lM(l,a,f.shape.length,p.shape.length,u,h);const g=n.runWebGLProgram(y,[p,f,m],p.dtype),v=qe({inputs:{x:g},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(m),v}const Yit={kernelName:Iee,backendName:"webgl",kernelFunc:Xit};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Zit{constructor(e,n,r,i){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,r];const s="while (left < right) {",o=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,a=Ee().getNumber("WEBGL_VERSION")===2?s:o,l=i==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${a}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jit(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:i,values:s}=e,{side:o}=r,a=new Zit(i.shape[0],i.shape[1],s.shape[1],o),l=[[i.shape[1]]];return n.runWebGLProgram(a,[i,s],"int32",l)}const Qit={kernelName:Eee,backendName:"webgl",kernelFunc:Jit};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class est{constructor(e,n,r){this.variableNames=["c","a","b"],this.outputShape=n;let i,s;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)s="resRC",i="resRC";else{const a=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],c=[];for(let u=0;u<n.length;u++)c.push(`${a[u]}`),u<e&&l.push(`${a[u]}`);i=l.join(),s=c.join()}const o=$n(r);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        float cVal = getC(${i});
        if (cVal >= 1.0) {
          setOutput(getA(${s}));
        } else {
          setOutput(getB(${s}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tst(t){const{inputs:e,backend:n}=t,{condition:r,t:i,e:s}=e,o=new est(r.shape.length,i.shape,i.shape.length);return n.runWebGLProgram(o,[r,i,s],bo(i.dtype,s.dtype))}const nst={kernelName:d5,backendName:"webgl",kernelFunc:tst};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rst=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${$5};
  float scale = ${P5};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,ist=un({opSnippet:rst}),sst={kernelName:Tx,backendName:"webgl",kernelFunc:ist};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ost=b0+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,ast=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,lst=un({opSnippet:ost,packedOpSnippet:ast,cpuKernelImpl:sZe}),cst={kernelName:Ox,backendName:"webgl",kernelFunc:lst};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ust=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,dst=un({opSnippet:ust}),hst={kernelName:Rx,backendName:"webgl",kernelFunc:dst};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fst=b0+`
  return sin(x);
`,pst=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${Mp}
  return result;
`,mst=un({opSnippet:fst,packedOpSnippet:pst}),gst={kernelName:$x,backendName:"webgl",kernelFunc:mst};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yst=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,vst=un({opSnippet:yst}),xst={kernelName:Px,backendName:"webgl",kernelFunc:vst};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bst=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,wst=un({opSnippet:bst}),kst={kernelName:Dx,backendName:"webgl",kernelFunc:wst};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sst=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:s,paddings:o}=r;Z(i.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const a=s.reduce((g,v)=>g*v),l=[[0,0]];l.push(...o);for(let g=1+s.length;g<i.shape.length;++g)l.push([0,0]);const c=[],u=qoe({inputs:{x:i},backend:n,attrs:{paddings:l,constantValue:0}}),d=Kx(u.shape,s,a,!1),h=Xx(d.length,s.length,!1),f=Yx(u.shape,s,a,!1),p=qe({inputs:{x:u},backend:n,attrs:{shape:d}}),m=Rs({inputs:{x:p},backend:n,attrs:{perm:h}}),y=qe({inputs:{x:m},backend:n,attrs:{shape:f}});return c.push(u),c.push(p),c.push(m),c.forEach(g=>n.disposeIntermediateTensorInfo(g)),y},Cst={kernelName:p5,backendName:"webgl",kernelFunc:Sst};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nst(t){const{inputs:e,backend:n}=t,{indices:r,values:i,denseShape:s,defaultValue:o}=e;if(s.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${s.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(i.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${i.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const a=n.readSync(r.dataId),l=n.readSync(i.dataId),c=n.readSync(s.dataId),u=n.readSync(o.dataId)[0],[d,h,f,p,m]=aZe(a,r.shape,r.dtype,l,i.dtype,c,u);return[n.makeTensorInfo(h,r.dtype,d),n.makeTensorInfo([h[0]],i.dtype,f),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(y=>Number(y)))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}const Ast={kernelName:Tee,backendName:"webgl",kernelFunc:Nst};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ist(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:i,newShape:s}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(i.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${i.shape}`);if(s.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${s.shape}`);const o=Array.from(n.readSync(i.dataId)),a=n.readSync(r.dataId),l=Array.from(n.readSync(s.dataId)),[c,u,d]=lZe(a,r.shape,r.dtype,o,l);return[n.makeTensorInfo(u,r.dtype,c),n.makeTensorInfo([d.length],s.dtype,new Int32Array(d))]}const _st={kernelName:$ee,backendName:"webgl",kernelFunc:Ist};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Est(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${s.shape}`);const o=n.readSync(r.dataId),a=n.readSync(i.dataId),l=n.readSync(s.dataId),[c,u]=yoe(o,r.shape,r.dtype,a,l,!0);return n.makeTensorInfo(u,r.dtype,c)}const Tst={kernelName:Pee,backendName:"webgl",kernelFunc:Est};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $st(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${s.shape}`);const o=n.readSync(r.dataId),a=n.readSync(i.dataId),l=n.readSync(s.dataId),[c,u]=yoe(o,r.shape,r.dtype,a,l);return n.makeTensorInfo(u,r.dtype,c)}const Pst={kernelName:Ree,backendName:"webgl",kernelFunc:$st};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rst(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:i,sparseValues:s,defaultValue:o}=e,{outputShape:a}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:h}=Pp(s,i,a),f=!1;if(s.dtype==="string"){const g=n.bufferSync(i),v=n.bufferSync(s),x=ih(n.readSync(o.dataId)[0]),b=iZe(g,v,a,h,u,c,l,d,x,f);return n.makeTensorInfo(a,b.dtype,b.values)}const p=new lM(c,l,i.shape.length,s.shape.length,d,[h,1],f),m=n.runWebGLProgram(p,[s,i,o],s.dtype),y=qe({inputs:{x:m},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(m),y}const Ost={kernelName:Oee,backendName:"webgl",kernelFunc:Rst};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dst(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{numOrSizeSplits:s,axis:o}=r,a=Yt(o,i.shape)[0],l=bL(i,s,a),c=i.shape.length,u=new Array(c).fill(0),d=i.shape.slice();return l.map(h=>{const f=[...d];f[a]=h;const p=w0({inputs:{x:i},backend:n,attrs:{begin:u,size:f}});return u[a]+=h,p})}const Lst={kernelName:m5,backendName:"webgl",kernelFunc:Dst};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RV="return sqrt(x);",Mst=un({opSnippet:RV,packedOpSnippet:RV,cpuKernelImpl:cZe}),Fst={kernelName:Lx,backendName:"webgl",kernelFunc:Mst};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jst="return x * x;",Bst=un({opSnippet:jst}),zst={kernelName:rD,backendName:"webgl",kernelFunc:Bst};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OV="return (a - b) * (a - b);",Ust=Gi({opSnippet:OV,packedOpSnippet:OV}),Vst={kernelName:Mx,backendName:"webgl",kernelFunc:Ust};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wst(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");const s=n.readSync(i.dataId),o=Eu(s),a=uZe(o,"string",r);return n.makeTensorInfo(i.shape,"string",a)}const Gst={kernelName:iD,backendName:"webgl",kernelFunc:Wst};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qst({inputs:t,attrs:e,backend:n}){const{x:r}=t,i=Ja+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,s=new ac(r.shape,i);return n.runWebGLProgram(s,[r],r.dtype)}const Hst={kernelName:Ux,backendName:"webgl",kernelFunc:qst};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Kst{constructor(e,n,r){this.variableNames=["x"],this.outputShape=r;const i=r.length,s=$n(r.length),o=$n(r.length);let a="";if(i===1)a="coords * strides + begin";else{let l=0;a=r.map((c,u)=>(l++,r.length===1?`coords * strides[${u}] + begin[${u}]`:`coords[${l-1}] * strides[${u}] + begin[${u}]`)).join(",")}this.userCode=`
      ${s} begin = ${s}(${e});
      ${s} strides = ${s}(${n});

      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xst(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:s,end:o,strides:a,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:h}=r,{finalShapeSparse:f,finalShape:p,isIdentity:m,sliceDim0:y,isSimpleSlice:g,begin:v,end:x,strides:b}=nL(i.shape,s,o,a,l,c,u,d,h);let S;if(m)S=qe({inputs:{x:i},backend:n,attrs:{shape:p}});else if(y||g){Z(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);const E=QD(v,x,b),I=w0({inputs:{x:i},backend:n,attrs:{begin:v,size:E}});S=qe({inputs:{x:I},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(I)}else if(n.shouldExecuteOnCPU([i])){const I=n.readSync(i.dataId),T=Xt(i.shape,i.dtype,I),O=dZe(f,T,b,v);S=n.makeTensorInfo(p,i.dtype,O.values)}else{const I=new Kst(v,b,f);S=n.runWebGLProgram(I,[i],i.dtype)}const A=qe({inputs:{x:S},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(S),A}const Yst={kernelName:sD,backendName:"webgl",kernelFunc:Xst};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zst(t){const{inputs:e,backend:n,attrs:r}=t,{separator:i,nGramWidths:s,leftPad:o,rightPad:a,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:d}=e,h=n.readSync(u.dataId),f=n.readSync(d.dataId),[p,m]=hZe(h,f,i,s,o,a,l,c);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(d.shape,"int32",m)]}const Jst={kernelName:Dee,backendName:"webgl",kernelFunc:Zst};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qst(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:i}=r,{input:s,delimiter:o}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(s.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${s.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const a=n.readSync(s.dataId),l=n.readSync(o.dataId)[0],[c,u,d]=fZe(a,l,i),h=u.length;return[n.makeTensorInfo([h,2],"int32",c),n.makeTensorInfo([h],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const eot={kernelName:Lee,backendName:"webgl",kernelFunc:Qst};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tot(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:i}=r,{input:s}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");const o=n.readSync(s.dataId),a=pZe(o,i);return n.makeTensorInfo(s.shape,"int32",a)}const not={kernelName:Mee,backendName:"webgl",kernelFunc:tot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rot="return tan(x);",iot=un({opSnippet:rot}),sot={kernelName:jx,backendName:"webgl",kernelFunc:iot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oot=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,aot=un({opSnippet:oot}),lot={kernelName:Bx,backendName:"webgl",kernelFunc:aot};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cot(t){const{inputs:e,backend:n,attrs:r}=t,{tensor:i,indices:s,updates:o}=e,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=Pp(o,s,i.shape),h=[d/c,c];if(d===0)return n.makeTensorInfo(i.shape,s.dtype);const f=qe({inputs:{x:s},backend:n,attrs:{shape:[l,a]}}),p=qe({inputs:{x:o},backend:n,attrs:{shape:[l,c]}}),m=qe({inputs:{x:i},backend:n,attrs:{shape:h}}),y=new lM(l,a,f.shape.length,p.shape.length,u,h,!1,!0),g=n.runWebGLProgram(y,[p,f,m],m.dtype),v=qe({inputs:{x:g},backend:n,attrs:{shape:i.shape}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),v}const uot={kernelName:_ee,backendName:"webgl",kernelFunc:cot};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dot{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[o]*n[o];this.outputShape=r,this.rank=r.length;const i=$n(this.rank),s=hot(e);this.userCode=`
      void main() {
        ${i} resRC = getOutputCoords();
        setOutput(getA(${s}));
      }
    `}}function hot(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let i=0;i<t.length;i++)r.push(`imod(${n[i]}, ${t[i]})`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Koe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reps:s}=r;if(i.dtype==="string"||i.shape.length>5){const l=n.readSync(i.dataId),c=i.dtype==="string"?l.map(h=>ih(h)):l,u=Xt(i.shape,i.dtype,c),d=gZe(u,s);return n.makeTensorInfo(d.shape,d.dtype,d.values)}const o=new dot(i.shape,s);return n.runWebGLProgram(o,[i],i.dtype)}const fot={kernelName:zx,backendName:"webgl",kernelFunc:Koe};class pot{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class mot{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nf(t,e){e!==null&&t.disposeIntermediateTensorInfo(e)}function DV(t){let e=1;for(;e<t;)e*=2;return e}function got(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{k:s,sorted:o}=r,a=Ee().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=Ee().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=i.shape,u=c[c.length-1];if(n.shouldExecuteOnCPU([i])||u<a||s>l){const O=n.readSync(i.dataId),[$,R]=yZe(O,c,i.dtype,s,o);return[n.makeTensorInfo($.shape,$.dtype,$.values),n.makeTensorInfo(R.shape,R.dtype,R.values)]}if(s===0)return c[c.length-1]=0,[n.makeTensorInfo(c,i.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(u===1)return[i,ub({attrs:{shape:c,dtype:"int32",value:0},backend:n})];const d=n.texData.get(i.dataId),h=d!==null&&d.isPacked,f=h?n.unpackTensor(i):i,m=$e(c)/u,y=qe({inputs:{x:f},attrs:{shape:[m,u]},backend:n});h&&nf(n,f);const g=DV(s),v=DV(u);let x=null;const b=()=>x===null?[y,y]:[y,x],S=(O,$,R)=>{const F=b(),L=new pot(R),q=[[u],[x===null?1:0],[Number.NEGATIVE_INFINITY],[O],[$]],K=x;x=n.runWebGLProgram(L,F,"int32",q),nf(n,K)};for(let O=1;O<g;O*=2){const $=O*2;for(let R=O;R>=1;R/=2)S($,R,[m,v])}for(let O=v;O>g;O/=2){const $=b(),R=new mot([m,O/2]),L=[[u],[x===null?1:0],[g]],U=x;x=n.runWebGLProgram(R,$,"int32",L),nf(n,U);const q=g/2,K=q*2;for(let j=q;j>=1;j/=2)S(K,j,x.shape)}let A=x;x=w0({inputs:{x},backend:n,attrs:{begin:0,size:[m,s]}}),nf(n,A);let E=Boe({inputs:{x:y,indices:x},backend:n,attrs:{axis:1,batchDims:1}});nf(n,y);const I=c.slice(0,-1);I.push(s),A=x,x=qe({inputs:{x},attrs:{shape:I},backend:n}),nf(n,A);const T=E;return E=qe({inputs:{x:E},attrs:{shape:I},backend:n}),nf(n,T),[E,x]}const yot={kernelName:oD,backendName:"webgl",kernelFunc:got};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vot{constructor(e,n,r,i,s,o){this.variableNames=["Image","Transforms"],this.outputShape=o;const a=r==="nearest"?1:2;let l;switch(i){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${s});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${s});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${e}));

                if (${a} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xot(t){const{inputs:e,backend:n,attrs:r}=t,{image:i,transforms:s}=e,{interpolation:o,fillMode:a,fillValue:l,outputShape:c}=r,[u,d,h,f]=i.shape,[p,m]=c??[d,h],y=[u,p,m,f],g=new vot(d,h,o,a,l,y);return n.runWebGLProgram(g,[i,s],"float32")}const bot={kernelName:aD,backendName:"webgl",kernelFunc:xot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wot(t){const{inputs:e,attrs:n,backend:r}=t,{axis:i}=n,{x:s}=e;ab(s,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const o=r.readSync(s.dataId),{outputValues:a,outputShape:l,indices:c}=vZe(o,i,s.shape,s.dtype);return[r.makeTensorInfo(l,s.dtype,a),r.makeTensorInfo([c.length],"int32",c)]}const kot={kernelName:lD,backendName:"webgl",kernelFunc:wot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sot(t){const{inputs:e,backend:n,attrs:r}=t,{value:i}=e;let{axis:s}=r;s<0&&(s+=i.shape.length);const o=i,a=o.shape.length,l=i.shape[s],c=new Array(a-1);let u=0;for(let m=0;m<a;m++)m!==s&&(c[u++]=o.shape[m]);const d=[],h=new Array(a).fill(0),f=o.shape.slice();f[s]=1;const p=new Array(l);for(let m=0;m<p.length;m++){h[s]=m;const y=w0({inputs:{x:o},backend:n,attrs:{begin:h,size:f}}),g=qe({inputs:{x:y},backend:n,attrs:{shape:c}});p[m]=g,d.push(y)}return d.forEach(m=>n.disposeIntermediateTensorInfo(m)),p}const Cot={kernelName:y5,backendName:"webgl",kernelFunc:Sot};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Not{constructor(e,n){this.variableNames=["x","segmentIds"];const r=e.windowSize,i=e.batchSize,s=e.inSize,o=e.numSegments,a=o*Math.ceil(s/r);this.outputShape=[i,a];const l="0.0",c="sumValue",u=Math.floor(r/4)*4,d=r%4,h=`
        sumValue += dot(values, segFilter);
    `;let f="";s%r>0&&(f=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return initializationValue;
        }
      `);let p="";s%r>0&&(p=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${f}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${p}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${o})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${o})));

        float sumValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${h}
        }

        int inIdx = inOffset + ${u};
        if (${d===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${h}
        } else if (${d===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${h}
        } else if (${d===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${h}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aot(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,segmentIds:s}=e,{numSegments:o}=r,a=i.shape.length,l=[];let c=0;const u=yr([c],a);let d=i;u!=null&&(d=Rs({inputs:{x:i},backend:n,attrs:{perm:u}}),l.push(d),c=Mr(1,a)[0]);const h=Tne(d.shape,c,o),f=$e([d.shape[c]]),p=qe({inputs:{x:d},backend:n,attrs:{shape:[-1,f]}});l.push(p);const m=dD(i.dtype),y=(b,S,A,E,I)=>{const T=b.shape[0],O=b.shape[1],$=Ene(O,I),R={windowSize:$,inSize:O,batchSize:T,numSegments:I},F=new Not(R,S),L=n.compileAndRun(F,[b,A],E);if(l.push(L),L.shape[1]===I)return L;const U=Hoe({backend:n,attrs:{start:0,stop:I,step:1,dtype:"float32"}}),q=Koe({inputs:{x:U},backend:n,attrs:{reps:[O/$]}});return l.push(U),l.push(q),y(L,S,q,E,I)},g=y(p,"unsortedSegmentSum",s,m,o),v=qe({inputs:{x:g},backend:n,attrs:{shape:h}});let x=v;if(u!=null){l.push(v);const b=Sh(u);x=Rs({inputs:{x},backend:n,attrs:{perm:b}})}return l.forEach(b=>n.disposeIntermediateTensorInfo(b)),x}const Iot={kernelName:v5,backendName:"webgl",kernelFunc:Aot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _ot=[cJe,dJe,pJe,yJe,xJe,kJe,CJe,AJe,TJe,PJe,DJe,FJe,zJe,GJe,KJe,YJe,JJe,nQe,iQe,oQe,uQe,yQe,xQe,SQe,NQe,$Qe,RQe,MQe,qZe,BQe,GQe,XQe,tet,iet,oet,cet,det,met,vet,wet,Cet,Aet,_et,$et,Ret,Met,jet,Uet,Get,Het,Zet,ttt,stt,ltt,dtt,htt,ptt,gtt,vtt,btt,ktt,Att,Ett,Ptt,Ott,Mtt,Btt,Wtt,Ktt,GZe,Ytt,VQe,Qtt,nnt,snt,KZe,cnt,fnt,mnt,xnt,knt,Ant,Ent,Rnt,Mnt,Bnt,Unt,qnt,Knt,Ynt,ert,nrt,irt,ort,lrt,hrt,grt,brt,_rt,ZZe,Prt,Drt,Frt,zrt,IQe,Wrt,qrt,Krt,Zrt,tit,YZe,rit,sit,ait,cit,uit,_Qe,Crt,fit,yit,wit,QZe,Nit,_it,Pit,Dit,jit,zit,Wit,Hit,Yit,Qit,nst,sst,cst,hst,gst,xst,mQe,Art,kst,Cst,Ast,_st,Tst,Pst,Ost,Lst,Fst,zst,Vst,Gst,Hst,Yst,Jst,eot,not,Nrt,oJe,sot,lot,uot,fot,yot,bot,aJe,kot,Cot,Iot,Grt];for(const t of _ot)jee(t);class Eot{constructor(){Lt(this,"model",null);Lt(this,"confidence",.85)}async train(e){if(e.length<7){console.warn("Insufficient data for training. Need at least 7 data points.");return}const n=l1(e.map((a,l)=>[l]),[e.length,1]),r=Ks(e);this.model=VUe({layers:[aVe({inputShape:[1],units:1})]}),this.model.compile({optimizer:hf.adam(.1),loss:q8e.meanSquaredError}),await this.model.fit(n,r,{epochs:100,batchSize:32,validationSplit:.2,verbose:0});const i=this.model.predict(n),s=await i.data(),o=this.calculateMSE(e,Array.from(s));this.confidence=Math.max(.7,1-o/100),n.dispose(),r.dispose(),i.dispose()}async predict(e){if(!this.model||e.length===0)return this.generateFallbackPredictions();const n=[],r=e.length-1;for(let i=1;i<=7;i++){const s=l1([[r+i]],[1,1]),o=this.model.predict(s),a=(await o.data())[0],c=this.calculateStandardDeviation(e)*1.96,u=Math.max(0,a-c),d=a+c;n.push({date:this.getFutureDate(i),actual:null,predicted:Math.round(a*100)/100,confidence:this.confidence,lowerBound:Math.round(u*100)/100,upperBound:Math.round(d*100)/100}),s.dispose(),o.dispose()}return n}getConfidence(){return this.confidence}calculateMSE(e,n){let r=0;for(let i=0;i<e.length;i++)r+=Math.pow(e[i]-n[i],2);return r/e.length}calculateStandardDeviation(e){const n=e.reduce((s,o)=>s+o,0)/e.length,r=e.map(s=>Math.pow(s-n,2)),i=r.reduce((s,o)=>s+o,0)/r.length;return Math.sqrt(i)}getFutureDate(e){const n=new Date;return n.setDate(n.getDate()+e),n.toISOString().split("T")[0]}generateFallbackPredictions(){const e=[];for(let n=1;n<=7;n++)e.push({date:this.getFutureDate(n),actual:null,predicted:85+Math.random()*10,confidence:.7,lowerBound:80,upperBound:95});return e}}class Tot{constructor(e=.3){Lt(this,"alpha");Lt(this,"level",null);this.alpha=e}forecast(e,n=7){if(e.length===0)return Array(n).fill(0);this.level=e[0];for(let s=1;s<e.length;s++)this.level=this.alpha*e[s]+(1-this.alpha)*this.level;const r=[];let i=this.level;for(let s=0;s<n;s++)r.push(i);return r}getTrendDirection(e){if(e.length<2)return"stable";const n=e.slice(-5),r=this.calculateSlope(n);return r>.1?"up":r<-.1?"down":"stable"}calculateSlope(e){const n=e.length,r=n*(n-1)/2,i=e.reduce((a,l)=>a+l,0),s=e.reduce((a,l,c)=>a+c*l,0),o=e.reduce((a,l,c)=>a+c*c,0);return(n*s-r*i)/(n*o-r*r)}}class Xoe{constructor(){Lt(this,"workflowModel");Lt(this,"smoothingModel");this.workflowModel=new Eot,this.smoothingModel=new Tot}async analyzeWorkflowPerformance(e){await this.workflowModel.train(e);const n=await this.workflowModel.predict(e),r=this.smoothingModel.getTrendDirection(e),i=this.generateRecommendation(n,r);return{predictions:n,trend:r,confidence:this.workflowModel.getConfidence(),recommendation:i}}generateRecommendation(e,n){const r=e.reduce((i,s)=>i+s.predicted,0)/e.length;return n==="up"&&r>90?"Excellent performance trend. Consider optimizing resource allocation for sustained growth.":n==="up"?"Positive trend detected. Monitor for consistency and consider process improvements.":n==="down"&&r<70?"Performance decline detected. Immediate review of workflow processes recommended.":n==="down"?"Slight performance dip. Investigate potential bottlenecks or resource constraints.":"Stable performance. Maintain current processes and monitor for changes."}static prepareWorkflowData(e){const n=e.filter(r=>r.category==="workflow"&&typeof r.value=="string").map(r=>{const i=r.value.toString().match(/(\d+(\.\d+)?)/);return i?parseFloat(i[1]):0}).filter(r=>!isNaN(r)&&r>0);return n.length>0?n:[85,87,83,89,86,88,90]}}const $ot=new Xoe;function Pot(){const[t,e]=N.useState({loading:!1,error:null,lastAction:null});return{executeAction:async r=>{e(i=>({...i,loading:!0,error:null}));try{let i;switch(r.actionType){case"optimize":i=await Rot(r.departmentId);break;case"alert":i=await Oot(r.departmentId,r.text);break;case"schedule":i=await Dot(r.departmentId,r.text);break;case"review":i=await Lot(r.departmentId,r.text);break;default:i=await Mot(r)}return e(s=>({...s,loading:!1,lastAction:r.text})),i.success?Xn.success(`Action executed: ${r.text}`):Xn.error(`Action failed: ${i.message}`),i}catch(i){const s=i instanceof Error?i.message:"Unknown error occurred";return e(o=>({...o,loading:!1,error:s})),Xn.error(`Action failed: ${s}`),{success:!1,message:s}}},loading:t.loading,error:t.error,lastAction:t.lastAction,reset:()=>e({loading:!1,error:null,lastAction:null})}}async function Rot(t){try{const e=await fetch(`/api/actions/optimize${t?`/${t}`:""}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({timestamp:new Date().toISOString()})});if(!e.ok)throw new Error(`Optimization request failed: ${e.status}`);return{success:!0,message:"Optimization triggered successfully",data:await e.json()}}catch{return console.warn("Optimization endpoint unavailable, using mock response"),{success:!0,message:`Optimization scheduled for ${t||"selected department"}`,data:{scheduled:!0,department:t,timestamp:new Date().toISOString()}}}}async function Oot(t,e){try{const n=await fetch("/api/actions/alert",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t,message:e||"Compliance alert triggered",timestamp:new Date().toISOString()})});if(!n.ok)throw new Error(`Alert request failed: ${n.status}`);return{success:!0,message:"Compliance alert sent successfully",data:await n.json()}}catch{return console.warn("Alert endpoint unavailable, using mock response"),{success:!0,message:`Compliance alert sent to ${t||"relevant teams"}`,data:{alertSent:!0,recipient:t,timestamp:new Date().toISOString()}}}}async function Dot(t,e){try{const n=await fetch("/api/actions/schedule",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({departmentId:t,description:e||"Scheduled maintenance",type:"maintenance",scheduledDate:new Date(Date.now()+6048e5).toISOString(),timestamp:new Date().toISOString()})});if(!n.ok)throw new Error(`Scheduling request failed: ${n.status}`);return{success:!0,message:"Maintenance scheduled successfully",data:await n.json()}}catch{return console.warn("Schedule endpoint unavailable, using mock response"),{success:!0,message:`Maintenance scheduled for ${t||"selected equipment"}`,data:{scheduled:!0,department:t,scheduledDate:new Date(Date.now()+7*24*60*60*1e3).toISOString(),timestamp:new Date().toISOString()}}}}async function Lot(t,e){try{const n=await fetch("/api/actions/review",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({departmentId:t,description:e||"Review requested",type:"safety_review",priority:"high",timestamp:new Date().toISOString()})});if(!n.ok)throw new Error(`Review request failed: ${n.status}`);return{success:!0,message:"Review triggered successfully",data:await n.json()}}catch{return console.warn("Review endpoint unavailable, using mock response"),{success:!0,message:`Review scheduled for ${t||"selected process"}`,data:{reviewScheduled:!0,department:t,priority:"high",timestamp:new Date().toISOString()}}}}async function Mot(t){try{const e=await fetch("/api/actions/generic",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({recommendation:t,timestamp:new Date().toISOString()})});if(!e.ok)throw new Error(`Generic action request failed: ${e.status}`);return{success:!0,message:"Action executed successfully",data:await e.json()}}catch{return console.warn("Generic action endpoint unavailable, using mock response"),{success:!0,message:`Action processed: ${t.text}`,data:{processed:!0,category:t.category,confidence:t.confidence,timestamp:new Date().toISOString()}}}}const LV=()=>{var A,E;const{insights:t,isLoading:e,error:n,refresh:r,isLive:i}=ZG(),[s,o]=N.useState("week"),[a,l]=N.useState(null),[c,u]=N.useState(!1),[d,h]=N.useState([]),[f,p]=N.useState(!1),{executeAction:m}=Pot(),y=()=>{const I=[{label:"Mon",value:85,actual:!0},{label:"Tue",value:87,actual:!0},{label:"Wed",value:83,actual:!0},{label:"Thu",value:89,actual:!0},{label:"Fri",value:86,actual:!0},{label:"Sat",value:88,actual:!0},{label:"Sun",value:90,actual:!0}];return a!=null&&a.predictions&&a.predictions.forEach((T,O)=>{I.push({label:`D+${O+1}`,value:T.predicted,actual:!1,predicted:!0,confidence:T.confidence,lowerBound:T.lowerBound,upperBound:T.upperBound})}),I},g=[{label:"Low",value:65},{label:"Medium",value:25},{label:"High",value:10}],v=[{label:"Permits",value:35},{label:"Reports",value:25},{label:"Contracts",value:20},{label:"Compliance",value:15},{label:"Other",value:5}];N.useEffect(()=>{if(t.length>0&&!f){p(!0);const I={insights:t,predictiveData:a,trend:(a==null?void 0:a.trend)||"stable",confidence:(a==null?void 0:a.confidence)||.8};TG(I).then(T=>{h(T),p(!1),T.length>0&&Xn.success(`Generated ${T.length} AI recommendations`)}).catch(T=>{console.error("Recommendation generation error:",T),p(!1)})}},[t,a]),N.useEffect(()=>{if(t.length>0&&!c){u(!0);const I=Xoe.prepareWorkflowData(t);$ot.analyzeWorkflowPerformance(I).then(T=>{l(T),u(!1),T.confidence>.8&&Xn.success(`High-confidence predictions generated (${(T.confidence*100).toFixed(0)}%)`)}).catch(T=>{console.error("Prediction error:",T),u(!1)})}},[t]);const x=async()=>{await r(),Xn.success("Data refreshed successfully")},b=I=>{o(I),Xn.success(`Time range updated to ${I}`)},S=async I=>{await m(I)};return n?k.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 p-6",children:k.jsx("div",{className:"max-w-7xl mx-auto",children:k.jsxs("div",{className:"glass-card p-8 rounded-xl border border-white/10 backdrop-blur-sm text-center",children:[k.jsx($H,{className:"w-16 h-16 text-rose-500 mx-auto mb-4"}),k.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Failed to Load Insights"}),k.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:n}),k.jsx("button",{onClick:x,className:"bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg transition-colors duration-200",children:"Try Again"})]})})}):k.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 p-6",children:[k.jsx(mpe,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,iconTheme:{primary:"#10B981",secondary:"#fff"}}}}),k.jsxs("div",{className:"max-w-7xl mx-auto",children:[k.jsx(Fwe,{range:s,onRangeChange:b,onRefresh:x,insights:t,isLive:i}),k.jsx(xge,{children:e&&k.jsxs(ml.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"glass-card p-8 rounded-xl border border-white/10 backdrop-blur-sm text-center mb-6",children:[k.jsx(jj,{className:"w-8 h-8 text-blue-500 animate-spin mx-auto mb-4"}),k.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading AI insights..."})]})}),!e&&k.jsxs(ml.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[k.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:t.slice(0,6).map((I,T)=>k.jsx(ml.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:T*.1},children:k.jsx(jwe,{title:I.title,value:I.value||"N/A",icon:I.icon,trend:I.trend,color:I.color})},I.id))}),a&&k.jsxs(ml.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},className:"glass-card p-6 rounded-xl border border-white/10 backdrop-blur-sm mb-8",children:[k.jsxs("div",{className:"flex items-center justify-between mb-4",children:[k.jsxs("div",{className:"flex items-center space-x-3",children:[k.jsx(O1e,{className:"w-6 h-6 text-yellow-500"}),k.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Predictive Analytics"})]}),k.jsxs("div",{className:"flex items-center space-x-2",children:[a.trend==="up"&&k.jsx(DH,{className:"w-5 h-5 text-emerald-500"}),a.trend==="down"&&k.jsx(OH,{className:"w-5 h-5 text-rose-500"}),a.trend==="stable"&&k.jsx(PH,{className:"w-5 h-5 text-gray-500"}),k.jsxs("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:[(A=a.trend)==null?void 0:A.toUpperCase()," TREND"]})]})]}),k.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[k.jsxs("div",{children:[k.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-3",children:"Performance Forecast"}),k.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:a.recommendation}),k.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[k.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["Confidence: ",k.jsxs("strong",{className:"text-emerald-500",children:[(a.confidence*100).toFixed(0),"%"]})]}),k.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Next 7 days forecast"})]})]}),k.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4",children:[k.jsx("h5",{className:"text-sm font-medium text-gray-900 dark:text-white mb-3",children:"Key Predictions"}),k.jsx("div",{className:"space-y-2",children:(E=a.predictions)==null?void 0:E.slice(0,3).map((I,T)=>k.jsxs("div",{className:"flex justify-between items-center text-sm",children:[k.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:I.date}),k.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[I.predicted.toFixed(1),"%"]}),k.jsxs("span",{className:`text-xs px-2 py-1 rounded ${I.confidence>.8?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900 dark:text-emerald-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}`,children:[(I.confidence*100).toFixed(0),"%"]})]},T))})]})]})]}),k.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[k.jsx(qw,{title:"Workflow Trends & Predictions",type:"line",data:y(),showPredictions:!0}),k.jsx(qw,{title:"Risk Score Distribution",type:"pie",data:g}),k.jsx(qw,{title:"Document Types Processed",type:"bar",data:v}),k.jsx(qw,{title:"Compliance Over Time",type:"line",data:y().map(I=>({...I,value:I.value*1.1}))})]}),k.jsxs(ml.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.6},className:"glass-card p-6 rounded-xl border border-white/10 backdrop-blur-sm mt-8",children:[k.jsxs("div",{className:"flex items-center justify-between mb-6",children:[k.jsxs("div",{className:"flex items-center space-x-3",children:[k.jsx(bk,{className:"w-6 h-6 text-yellow-500"}),k.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"AI Recommendations & Actionable Insights"})]}),f&&k.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[k.jsx(jj,{className:"w-4 h-4 animate-spin"}),k.jsx("span",{children:"Generating recommendations..."})]})]}),k.jsx(sDe,{insights:d,onExecuteAction:S})]}),k.jsxs(ml.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.8},className:"glass-card p-6 rounded-xl border border-white/10 backdrop-blur-sm mt-8",children:[k.jsxs("div",{className:"flex items-center justify-between mb-4",children:[k.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Performance Summary"}),i&&k.jsxs("div",{className:"flex items-center space-x-2 text-emerald-500",children:[k.jsx(i1e,{className:"w-4 h-4 animate-pulse"}),k.jsx("span",{className:"text-sm font-medium",children:"Live Updates Active"})]})]}),k.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[k.jsxs("div",{className:"text-center p-4 bg-blue-500/10 rounded-lg",children:[k.jsx("div",{className:"text-2xl font-bold text-blue-500",children:"94%"}),k.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Success Rate"})]}),k.jsxs("div",{className:"text-center p-4 bg-emerald-500/10 rounded-lg",children:[k.jsx("div",{className:"text-2xl font-bold text-emerald-500",children:"2.3h"}),k.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Avg. Response"})]}),k.jsxs("div",{className:"text-center p-4 bg-purple-500/10 rounded-lg",children:[k.jsx("div",{className:"text-2xl font-bold text-purple-500",children:"1,247"}),k.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Actions"})]}),k.jsxs("div",{className:"text-center p-4 bg-orange-500/10 rounded-lg",children:[k.jsx("div",{className:"text-2xl font-bold text-orange-500",children:"98%"}),k.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Accuracy"})]})]})]})]})]})]})},Fot=()=>{const[t,e]=N.useState([]),[n,r]=N.useState(!1),[i,s]=N.useState(!1),o=N.useRef(null),a=N.useRef(null),l=N.useCallback(async({text:f,file:p,userId:m,userName:y})=>{if(!f.trim()&&!p)return;r(!0);const g={id:Date.now().toString(),role:"user",content:f,timestamp:new Date,file:p?{name:p.name,type:p.type,size:p.size}:void 0};e(v=>[...v,g]);try{const v=new FormData;v.append("message",f),p&&v.append("file",p),m&&v.append("userId",m),y&&v.append("userName",y);const x=await fetch(`${{}.VITE_API_URL||"/api"}/chat-agent`,{method:"POST",body:v});if(!x.ok)throw new Error(`HTTP error! status: ${x.status}`);const b=await x.json(),S={id:(Date.now()+1).toString(),role:"ai",content:b.reply,timestamp:new Date,draft:b.draft?{...b.draft,logId:b.logId}:void 0};e(A=>[...A,S])}catch(v){console.error("Error sending message:",v);const x={id:(Date.now()+1).toString(),role:"system",content:"Sorry, there was an error processing your message. Please try again.",timestamp:new Date};e(b=>[...b,x])}finally{r(!1)}},[]),c=N.useCallback(f=>{if("speechSynthesis"in window){speechSynthesis.cancel();const p=new SpeechSynthesisUtterance(f);p.rate=.8,p.pitch=1,p.volume=.8,a.current=p,speechSynthesis.speak(p)}else console.warn("Speech synthesis not supported")},[]),u=N.useCallback(()=>{if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window)){console.warn("Speech recognition not supported");return}const f=window.webkitSpeechRecognition||window.SpeechRecognition,p=new f;p.continuous=!1,p.interimResults=!1,p.lang="en-US",p.onstart=()=>{s(!0)},p.onresult=m=>{const y=m.results[0][0].transcript;y.trim()&&l({text:y})},p.onerror=m=>{console.error("Speech recognition error:",m.error),s(!1)},p.onend=()=>{s(!1)},o.current=p,p.start()},[l]),d=N.useCallback(()=>{o.current&&(o.current.stop(),s(!1))},[]),h=N.useCallback(()=>{e([])},[]);return{messages:t,isLoading:n,sendMessage:l,playTTS:c,startVoiceCapture:u,stopVoiceCapture:d,isRecording:i,clearMessages:h}},jot=({draft:t,isOpen:e,onClose:n,onSend:r})=>{const[i,s]=N.useState(t.suggestedRecipients),[o,a]=N.useState(""),[l,c]=N.useState(!1),[u,d]=N.useState(t.body),[h,f]=N.useState(!1);if(!e)return null;const p=()=>{o.trim()&&!i.includes(o.trim())&&(s(x=>[...x,o.trim()]),a(""))},m=x=>{s(b=>b.filter(S=>S!==x))},y=()=>{if(!h){alert("Please confirm that the email is ready to send");return}const x=l?u:t.body;r(t,i,x),v()},g=()=>{c(!l)},v=()=>{c(!1),d(t.body),s(t.suggestedRecipients),f(!1),n()};return k.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:k.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[k.jsxs("div",{className:"p-6 border-b border-gray-200",children:[k.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Email Draft Preview"}),k.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Review and send the generated email draft"})]}),k.jsxs("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:[k.jsxs("div",{className:"mb-6",children:[k.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subject"}),k.jsx("div",{className:"p-3 bg-gray-50 rounded border border-gray-300",children:t.subject})]}),k.jsxs("div",{className:"mb-6",children:[k.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Recipients"}),k.jsxs("div",{className:"space-y-2",children:[k.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:i.map((x,b)=>k.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[x,k.jsx("button",{type:"button",onClick:()=>m(x),className:"ml-1 text-blue-600 hover:text-blue-800",children:"×"})]},b))}),k.jsxs("div",{className:"flex gap-2",children:[k.jsx("input",{type:"email",value:o,onChange:x=>a(x.target.value),placeholder:"Add recipient email",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",onKeyPress:x=>x.key==="Enter"&&p()}),k.jsx("button",{type:"button",onClick:p,className:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Add"})]})]})]}),k.jsxs("div",{className:"mb-6",children:[k.jsxs("div",{className:"flex items-center justify-between mb-2",children:[k.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email Body"}),k.jsx("button",{type:"button",onClick:g,className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:l?"Preview":"Edit"})]}),l?k.jsx("textarea",{value:u,onChange:x=>d(x.target.value),rows:12,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter email body..."}):k.jsx("div",{className:"p-4 bg-gray-50 rounded border border-gray-300 whitespace-pre-wrap text-sm max-h-60 overflow-y-auto",children:t.body})]}),k.jsx("div",{className:"mb-6",children:k.jsxs("label",{className:"flex items-center",children:[k.jsx("input",{type:"checkbox",checked:h,onChange:x=>f(x.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),k.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"I confirm this email is ready to send and contains appropriate content"})]})})]}),k.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-between items-center",children:[k.jsxs("div",{className:"text-sm text-gray-600",children:[i.length," recipient",i.length!==1?"s":""]}),k.jsxs("div",{className:"flex gap-3",children:[k.jsx("button",{type:"button",onClick:v,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Cancel"}),k.jsx("button",{type:"button",onClick:y,disabled:!h||i.length===0,className:"px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 disabled:bg-gray-400 disabled:cursor-not-allowed",children:"Send Email"})]})]})]})})},Bot=()=>{const{messages:t,isLoading:e,sendMessage:n,playTTS:r,startVoiceCapture:i,stopVoiceCapture:s,isRecording:o,clearMessages:a}=Fot(),[l,c]=N.useState(""),[u,d]=N.useState(null),[h,f]=N.useState(!1),[p,m]=N.useState(null),[y,g]=N.useState(null),v=N.useRef(null),x=N.useRef(null);N.useEffect(()=>{var R;(R=v.current)==null||R.scrollIntoView({behavior:"smooth"})},[t]);const b=(R,F="success")=>{g({message:R,type:F}),setTimeout(()=>g(null),5e3)},S=async()=>{!l.trim()&&!u||(await n({text:l,file:u||void 0,userId:"demo-user",userName:"Demo User"}),c(""),d(null),x.current&&(x.current.value=""))},A=R=>{var L;const F=((L=R.target.files)==null?void 0:L[0])||null;d(F)},E=R=>{R.key==="Enter"&&!R.shiftKey&&(R.preventDefault(),S())},I=R=>{m(R),f(!0)},T=async(R,F,L)=>{try{const U=await fetch("/api/email-approval/confirm",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({logId:R.logId,approved:!0,overrideRecipients:F,finalBody:L})});if(!U.ok)throw new Error("Failed to send email");const q=await U.json();q.success?b("Email sent successfully!","success"):b(`Failed to send email: ${q.message}`,"error")}catch(U){console.error("Error sending email:",U),b("Error sending email. Please try again.","error")}},O=R=>R.content.split(`
`).map((F,L)=>k.jsx("div",{children:F},L)),$=R=>R.includes("pdf")?"📄":R.includes("word")||R.includes("document")?"📝":R.includes("image")?"🖼️":R.includes("csv")||R.includes("spreadsheet")?"📊":"📎";return k.jsxs("div",{className:"min-h-screen bg-gray-50",children:[k.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:k.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:k.jsxs("div",{className:"flex justify-between items-center py-4",children:[k.jsxs("div",{children:[k.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"AI Chat Assistant"}),k.jsx("p",{className:"text-sm text-gray-600",children:"Get help with facility management and business operations"})]}),k.jsx("div",{className:"flex gap-2",children:k.jsx("button",{onClick:a,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Clear Chat"})})]})})}),k.jsxs("div",{className:"max-w-4xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:[k.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 mb-6",children:[k.jsx("div",{className:"p-4 border-b border-gray-200",children:k.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Conversation"})}),k.jsxs("div",{className:"h-96 overflow-y-auto p-4 space-y-4",children:[t.length===0?k.jsxs("div",{className:"text-center text-gray-500 py-8",children:[k.jsx("div",{className:"text-4xl mb-2",children:"🤖"}),k.jsx("p",{className:"text-lg",children:"Start a conversation with the AI assistant"}),k.jsx("p",{className:"text-sm mt-1",children:"Ask questions, upload files, or request email drafts"})]}):t.map(R=>k.jsx("div",{className:`flex ${R.role==="user"?"justify-end":"justify-start"}`,children:k.jsxs("div",{className:`max-w-3xl rounded-lg px-4 py-2 ${R.role==="user"?"bg-blue-600 text-white":R.role==="ai"?"bg-gray-100 text-gray-900":"bg-yellow-100 text-yellow-800"}`,children:[R.file&&k.jsxs("div",{className:"flex items-center gap-2 mb-2 p-2 bg-white bg-opacity-20 rounded",children:[k.jsx("span",{className:"text-lg",children:$(R.file.type)}),k.jsxs("div",{className:"text-sm",children:[k.jsx("div",{className:"font-medium",children:R.file.name}),k.jsxs("div",{className:"text-xs opacity-80",children:[(R.file.size/1024).toFixed(1)," KB"]})]})]}),k.jsx("div",{className:"whitespace-pre-wrap",children:O(R)}),k.jsx("div",{className:`text-xs mt-1 ${R.role==="user"?"text-blue-100":"text-gray-500"}`,children:R.timestamp.toLocaleTimeString()}),R.draft&&k.jsx("div",{className:"mt-3 pt-3 border-t border-gray-300 border-opacity-30",children:k.jsx("button",{onClick:()=>I(R.draft),className:"w-full bg-green-600 hover:bg-green-700 text-white text-sm font-medium py-2 px-3 rounded-md transition-colors",children:"📧 Review Email Draft"})}),R.role==="ai"&&k.jsx("button",{onClick:()=>r(R.content),className:"mt-2 text-xs text-gray-500 hover:text-gray-700 flex items-center gap-1",children:"🔊 Play"})]})},R.id)),e&&k.jsx("div",{className:"flex justify-start",children:k.jsx("div",{className:"bg-gray-100 text-gray-900 rounded-lg px-4 py-2 max-w-3xl",children:k.jsxs("div",{className:"flex items-center gap-2",children:[k.jsxs("div",{className:"flex space-x-1",children:[k.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),k.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),k.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),k.jsx("span",{className:"text-sm",children:"AI is thinking..."})]})})}),k.jsx("div",{ref:v})]})]}),k.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[u&&k.jsxs("div",{className:"mb-3 p-3 bg-blue-50 rounded-lg border border-blue-200 flex items-center justify-between",children:[k.jsxs("div",{className:"flex items-center gap-3",children:[k.jsx("span",{className:"text-2xl",children:$(u.type)}),k.jsxs("div",{children:[k.jsx("div",{className:"font-medium text-sm",children:u.name}),k.jsxs("div",{className:"text-xs text-gray-600",children:[(u.size/1024).toFixed(1)," KB"]})]})]}),k.jsx("button",{onClick:()=>d(null),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"Remove"})]}),k.jsxs("div",{className:"flex gap-3",children:[k.jsx("input",{type:"file",ref:x,onChange:A,accept:".pdf,.docx,.txt,.csv,.png,.jpg,.jpeg",className:"hidden"}),k.jsx("button",{onClick:()=>{var R;return(R=x.current)==null?void 0:R.click()},className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors flex items-center gap-2",title:"Upload file (PDF, DOCX, TXT, CSV, PNG, JPG)",children:"📎 Attach"}),k.jsx("button",{onClick:o?s:i,className:`px-4 py-2 rounded-md transition-colors flex items-center gap-2 ${o?"bg-red-600 text-white hover:bg-red-700":"text-gray-600 bg-gray-100 hover:bg-gray-200"}`,title:o?"Stop recording":"Start voice input",children:o?"🔴 Stop":"🎤 Voice"}),k.jsx("div",{className:"flex-1",children:k.jsx("textarea",{value:l,onChange:R=>c(R.target.value),onKeyPress:E,placeholder:"Type your message or use voice input...",rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md resize-none focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:e})}),k.jsx("button",{onClick:S,disabled:!l.trim()&&!u||e,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:e?"Sending...":"Send"})]}),k.jsx("div",{className:"mt-2 text-xs text-gray-500",children:"Supported files: PDF, DOCX, TXT, CSV, PNG, JPG (max 10MB)"})]})]}),p&&k.jsx(jot,{draft:p,isOpen:h,onClose:()=>f(!1),onSend:T}),y&&k.jsx("div",{className:`fixed top-4 right-4 px-6 py-3 rounded-lg shadow-lg z-50 ${y.type==="success"?"bg-green-600 text-white":"bg-red-600 text-white"}`,children:y.message})]})},L_=()=>{const[t,e]=N.useState([]),[n,r]=N.useState([]),[i,s]=N.useState([]),[o,a]=N.useState(!0),[l,c]=N.useState(null);N.useEffect(()=>{u(),d(),h()},[]);const u=async()=>{try{const f=await fetch("/api/org");if(!f.ok)throw new Error("Failed to fetch organogram");const p=await f.json();e(p.data||[])}catch(f){c(f instanceof Error?f.message:"Failed to fetch organogram")}},d=async()=>{try{const f=await fetch("/api/org/positions");if(!f.ok)throw new Error("Failed to fetch positions");const p=await f.json();r(p.data||[])}catch(f){c(f instanceof Error?f.message:"Failed to fetch positions")}},h=async()=>{var f;try{const p=await fetch("/api/org/supervisors");if(!p.ok)throw new Error("Failed to fetch users");const m=await p.json();s(((f=m.data)==null?void 0:f.flatMap(y=>y.users))||[])}catch(p){c(p instanceof Error?p.message:"Failed to fetch users")}finally{a(!1)}};return o?k.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:k.jsx("div",{className:"max-w-7xl mx-auto",children:k.jsx("div",{className:"text-center",children:"Loading organogram..."})})}):l?k.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:k.jsx("div",{className:"max-w-7xl mx-auto",children:k.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:["Error: ",l]})})}):k.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:k.jsxs("div",{className:"max-w-7xl mx-auto",children:[k.jsxs("div",{className:"mb-8",children:[k.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Organization Management"}),k.jsx("p",{className:"text-gray-600 mt-2",children:"Manage positions and user assignments"})]}),k.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[k.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[k.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Organogram Structure"}),k.jsx("div",{className:"space-y-4",children:t.map(f=>k.jsxs("div",{className:"border border-gray-200 rounded p-4",children:[k.jsx("h3",{className:"font-semibold text-lg",children:f.title}),k.jsx("p",{className:"text-sm text-gray-600",children:f.department}),f.users.length>0&&k.jsxs("div",{className:"mt-2",children:[k.jsx("p",{className:"text-sm font-medium",children:"Assigned Users:"}),k.jsx("ul",{className:"text-sm text-gray-600 ml-4",children:f.users.map(p=>k.jsxs("li",{children:[p.firstName," ",p.lastName," (",p.email,")"]},p.id))})]}),f.supervisor&&k.jsxs("div",{className:"mt-2",children:[k.jsx("p",{className:"text-sm font-medium",children:"Reports to:"}),k.jsx("p",{className:"text-sm text-gray-600 ml-4",children:f.supervisor.title})]})]},f.id))})]}),k.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[k.jsx("h2",{className:"text-xl font-semibold mb-4",children:"User Assignment"}),k.jsxs("div",{className:"space-y-6",children:[k.jsxs("div",{children:[k.jsx("h3",{className:"font-medium mb-2",children:"Available Positions"}),k.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:n.map(f=>k.jsxs("div",{className:"border border-gray-200 rounded p-3",children:[k.jsx("p",{className:"font-medium",children:f.title}),k.jsx("p",{className:"text-sm text-gray-600",children:f.department})]},f.id))})]}),k.jsxs("div",{children:[k.jsx("h3",{className:"font-medium mb-2",children:"Available Users"}),k.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:i.map(f=>k.jsxs("div",{className:"border border-gray-200 rounded p-3",children:[k.jsxs("p",{className:"font-medium",children:[f.firstName," ",f.lastName]}),k.jsx("p",{className:"text-sm text-gray-600",children:f.email}),k.jsx("p",{className:"text-sm text-gray-600",children:f.position})]},f.id))})]})]})]})]}),k.jsxs("div",{className:"mt-8 bg-white rounded-lg shadow p-6",children:[k.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Departments Summary"}),k.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Array.from(new Set(n.map(f=>f.department))).map(f=>k.jsxs("div",{className:"border border-gray-200 rounded p-4 text-center",children:[k.jsx("h3",{className:"font-semibold",children:f}),k.jsxs("p",{className:"text-sm text-gray-600",children:[n.filter(p=>p.department===f).length," positions"]})]},f))})]})]})})},zot=({items:t,onEditItem:e,onDeleteItem:n,onUpdateQuantity:r,isLoading:i=!1})=>{const[s,o]=N.useState(""),[a,l]=N.useState("all"),[c,u]=N.useState("name"),[d,h]=N.useState("asc"),f=N.useMemo(()=>["all",...[...new Set(t.map(x=>x.category))]],[t]),p=N.useMemo(()=>{let v=t.filter(x=>{const b=x.name.toLowerCase().includes(s.toLowerCase())||x.category.toLowerCase().includes(s.toLowerCase()),S=a==="all"||x.category===a;return b&&S&&x.isActive});return v.sort((x,b)=>{let S=x[c],A=b[c];return S===void 0||A===void 0?S===void 0&&A===void 0?0:S===void 0?d==="asc"?-1:1:d==="asc"?1:-1:((c==="createdAt"||c==="updatedAt"||c==="lastUpdated")&&(S=new Date(S).getTime(),A=new Date(A).getTime()),S<A?d==="asc"?-1:1:S>A?d==="asc"?1:-1:0)}),v},[t,s,a,c,d]),m=v=>{c===v?h(d==="asc"?"desc":"asc"):(u(v),h("asc"))},y=v=>v.quantity===0?{status:"out-of-stock",color:"bg-red-100 text-red-800"}:v.quantity<=v.reorderLevel?{status:"low-stock",color:"bg-yellow-100 text-yellow-800"}:{status:"in-stock",color:"bg-green-100 text-green-800"},g=(v,x)=>{const b=t.find(S=>S.id===v);if(b&&r){const S=Math.max(0,b.quantity+x);r(v,S)}};return i?k.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:k.jsxs("div",{className:"animate-pulse space-y-4",children:[k.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),k.jsx("div",{className:"space-y-3",children:[...Array(5)].map((v,x)=>k.jsx("div",{className:"h-12 bg-gray-200 rounded"},x))})]})}):k.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[k.jsxs("div",{className:"p-4 border-b border-gray-200 space-y-4 sm:space-y-0 sm:flex sm:items-center sm:justify-between",children:[k.jsxs("div",{className:"flex items-center space-x-4",children:[k.jsxs("div",{className:"relative",children:[k.jsx("input",{type:"text",placeholder:"Search items...",value:s,onChange:v=>o(v.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 w-64"}),k.jsx("svg",{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),k.jsx("select",{value:a,onChange:v=>l(v.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:f.map(v=>k.jsx("option",{value:v,children:v==="all"?"All Categories":v},v))})]}),k.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",p.length," of ",t.filter(v=>v.isActive).length," items"]})]}),k.jsx("div",{className:"overflow-x-auto",children:k.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[k.jsx("thead",{className:"bg-gray-50",children:k.jsxs("tr",{children:[k.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>m("name"),children:k.jsxs("div",{className:"flex items-center space-x-1",children:[k.jsx("span",{children:"Item Name"}),c==="name"&&k.jsx("span",{children:d==="asc"?"↑":"↓"})]})}),k.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>m("category"),children:k.jsxs("div",{className:"flex items-center space-x-1",children:[k.jsx("span",{children:"Category"}),c==="category"&&k.jsx("span",{children:d==="asc"?"↑":"↓"})]})}),k.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>m("quantity"),children:k.jsxs("div",{className:"flex items-center space-x-1",children:[k.jsx("span",{children:"Quantity"}),c==="quantity"&&k.jsx("span",{children:d==="asc"?"↑":"↓"})]})}),k.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),k.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>m("lastUpdated"),children:k.jsxs("div",{className:"flex items-center space-x-1",children:[k.jsx("span",{children:"Last Updated"}),c==="lastUpdated"&&k.jsx("span",{children:d==="asc"?"↑":"↓"})]})}),k.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),k.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.length===0?k.jsx("tr",{children:k.jsx("td",{colSpan:6,className:"px-6 py-8 text-center text-gray-500",children:"No inventory items found. Try adjusting your search or add new items."})}):p.map(v=>{const x=y(v);return k.jsxs("tr",{className:"hover:bg-gray-50",children:[k.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:k.jsxs("div",{children:[k.jsx("div",{className:"text-sm font-medium text-gray-900",children:v.name}),v.location&&k.jsx("div",{className:"text-sm text-gray-500",children:v.location})]})}),k.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:k.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:v.category})}),k.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[k.jsxs("div",{className:"flex items-center space-x-2",children:[k.jsxs("span",{className:"text-sm text-gray-900",children:[v.quantity," ",v.unit]}),r&&k.jsxs("div",{className:"flex space-x-1",children:[k.jsx("button",{onClick:()=>g(v.id,-1),className:"w-6 h-6 flex items-center justify-center bg-gray-100 hover:bg-gray-200 rounded text-xs",children:"-"}),k.jsx("button",{onClick:()=>g(v.id,1),className:"w-6 h-6 flex items-center justify-center bg-gray-100 hover:bg-gray-200 rounded text-xs",children:"+"})]})]}),k.jsxs("div",{className:"text-xs text-gray-500",children:["Reorder at: ",v.reorderLevel]})]}),k.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:k.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${x.color}`,children:x.status==="out-of-stock"?"Out of Stock":x.status==="low-stock"?"Low Stock":"In Stock"})}),k.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(v.lastUpdated).toLocaleDateString()}),k.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[e&&k.jsx("button",{onClick:()=>e(v),className:"text-blue-600 hover:text-blue-900",children:"Edit"}),n&&k.jsx("button",{onClick:()=>n(v.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},v.id)})})]})})]})},Uot="MbarieInventoryDB",Vot=1;class Wot{constructor(){Lt(this,"db",null)}async init(){return new Promise((e,n)=>{const r=indexedDB.open(Uot,Vot);r.onerror=()=>n(r.error),r.onsuccess=()=>{this.db=r.result,e()},r.onupgradeneeded=i=>{const s=i.target.result;if(!s.objectStoreNames.contains("inventory")){const o=s.createObjectStore("inventory",{keyPath:"id"});o.createIndex("category","category",{unique:!1}),o.createIndex("name","name",{unique:!1}),o.createIndex("isActive","isActive",{unique:!1})}if(!s.objectStoreNames.contains("transactions")){const o=s.createObjectStore("transactions",{keyPath:"id"});o.createIndex("itemId","itemId",{unique:!1}),o.createIndex("timestamp","timestamp",{unique:!1}),o.createIndex("synced","synced",{unique:!1})}if(!s.objectStoreNames.contains("alerts")){const o=s.createObjectStore("alerts",{keyPath:"id"});o.createIndex("itemId","itemId",{unique:!1}),o.createIndex("severity","severity",{unique:!1}),o.createIndex("resolved","resolved",{unique:!1})}}})}async addInventoryItem(e){if(!this.db)throw new Error("Database not initialized");return new Promise((n,r)=>{const s=this.db.transaction(["inventory"],"readwrite").objectStore("inventory"),o={...e,id:this.generateId(),createdAt:new Date,updatedAt:new Date},a=s.add(o);a.onsuccess=()=>n(o.id),a.onerror=()=>r(a.error)})}async getInventoryItem(e){if(!this.db)throw new Error("Database not initialized");return new Promise((n,r)=>{const o=this.db.transaction(["inventory"],"readonly").objectStore("inventory").get(e);o.onsuccess=()=>n(o.result||null),o.onerror=()=>r(o.error)})}async getAllInventoryItems(){if(!this.db)throw new Error("Database not initialized");return new Promise((e,n)=>{const s=this.db.transaction(["inventory"],"readonly").objectStore("inventory").getAll();s.onsuccess=()=>e(s.result),s.onerror=()=>n(s.error)})}async updateInventoryItem(e,n){if(!this.db)throw new Error("Database not initialized");return new Promise(async(r,i)=>{const s=await this.getInventoryItem(e);if(!s){i(new Error("Item not found"));return}const a=this.db.transaction(["inventory"],"readwrite").objectStore("inventory"),l={...s,...n,updatedAt:new Date},c=a.put(l);c.onsuccess=()=>r(),c.onerror=()=>i(c.error)})}async deleteInventoryItem(e){if(!this.db)throw new Error("Database not initialized");return new Promise((n,r)=>{const o=this.db.transaction(["inventory"],"readwrite").objectStore("inventory").delete(e);o.onsuccess=()=>n(),o.onerror=()=>r(o.error)})}async addTransaction(e){if(!this.db)throw new Error("Database not initialized");return new Promise((n,r)=>{const s=this.db.transaction(["transactions"],"readwrite").objectStore("transactions"),o={...e,id:this.generateId()},a=s.add(o);a.onsuccess=()=>n(o.id),a.onerror=()=>r(a.error)})}async getPendingTransactions(){if(!this.db)throw new Error("Database not initialized");return new Promise((e,n)=>{const o=this.db.transaction(["transactions"],"readonly").objectStore("transactions").index("synced").getAll(IDBKeyRange.only(!1));o.onsuccess=()=>e(o.result),o.onerror=()=>n(o.error)})}async markTransactionAsSynced(e){if(!this.db)throw new Error("Database not initialized");return new Promise((n,r)=>{const s=this.db.transaction(["transactions"],"readwrite").objectStore("transactions"),o=s.get(e);o.onsuccess=()=>{const a=o.result;if(a){a.synced=!0;const l=s.put(a);l.onsuccess=()=>n(),l.onerror=()=>r(l.error)}else r(new Error("Transaction not found"))},o.onerror=()=>r(o.error)})}async addStockAlert(e){if(!this.db)throw new Error("Database not initialized");return new Promise((n,r)=>{const s=this.db.transaction(["alerts"],"readwrite").objectStore("alerts"),o={...e,id:this.generateId()},a=s.add(o);a.onsuccess=()=>n(o.id),a.onerror=()=>r(a.error)})}async getActiveAlerts(){if(!this.db)throw new Error("Database not initialized");return new Promise((e,n)=>{const o=this.db.transaction(["alerts"],"readonly").objectStore("alerts").index("resolved").getAll(IDBKeyRange.only(!1));o.onsuccess=()=>e(o.result),o.onerror=()=>n(o.error)})}async markAlertAsResolved(e){if(!this.db)throw new Error("Database not initialized");return new Promise((n,r)=>{const s=this.db.transaction(["alerts"],"readwrite").objectStore("alerts"),o=s.get(e);o.onsuccess=()=>{const a=o.result;if(a){a.resolved=!0;const l=s.put(a);l.onsuccess=()=>n(),l.onerror=()=>r(l.error)}else r(new Error("Alert not found"))},o.onerror=()=>r(o.error)})}generateId(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}async clearAllData(){if(!this.db)throw new Error("Database not initialized");return new Promise((e,n)=>{const r=this.db.transaction(["inventory","transactions","alerts"],"readwrite");r.objectStore("inventory").clear(),r.objectStore("transactions").clear(),r.objectStore("alerts").clear(),r.oncomplete=()=>e(),r.onerror=()=>n(r.error)})}}const Rn=new Wot;class Got{constructor(e,n="https://api.deepseek.com/v1"){Lt(this,"apiKey");Lt(this,"baseUrl");this.apiKey=e,this.baseUrl=n}async processVoiceCommand(e){try{const n=this.parseVoiceCommand(e);switch(n.intent){case"add":return await this.handleAddCommand(n);case"query":return await this.handleQueryCommand(n);case"update":return await this.handleUpdateCommand(n);case"list":return await this.handleListCommand(n);case"alert":return await this.handleAlertCommand(n);default:return{success:!1,message:"I didn't understand that command. Try saying 'add item', 'check stock', or 'list inventory'."}}}catch(n){return console.error("Error processing voice command:",n),{success:!1,message:"Sorry, I encountered an error processing your command."}}}parseVoiceCommand(e){const n=e.toLowerCase();return n.includes("add")||n.includes("create")||n.includes("new")?this.parseAddCommand(e):n.includes("check")||n.includes("how many")||n.includes("quantity")?this.parseQueryCommand(e):n.includes("update")||n.includes("change")||n.includes("modify")?this.parseUpdateCommand(e):n.includes("list")||n.includes("show")||n.includes("display")?{intent:"list"}:n.includes("alert")||n.includes("low")||n.includes("reorder")?{intent:"alert"}:{intent:"query"}}parseAddCommand(e){const n=e.toLowerCase().split(" ");let r,i,s,o;for(let c=0;c<n.length;c++){const u=parseInt(n[c]);if(!isNaN(u)){r=u;const d=["liters","litre","l","kilograms","kg","pieces","pcs","units","boxes","packs"];c+1<n.length&&d.includes(n[c+1])&&(i=n[c+1]);break}}const a=Math.max(e.toLowerCase().indexOf("add"),e.toLowerCase().indexOf("create"),e.toLowerCase().indexOf("new"));if(a!==-1){let u=e.substring(a+3).trim();r&&(u=u.replace(r.toString(),"").trim()),i&&(u=u.replace(i,"").trim()),s=u}const l={fuel:["diesel","petrol","gasoline","fuel"],lubricant:["oil","lubricant","grease"],electrical:["bulb","wire","cable","electrical","led"],mechanical:["tool","part","mechanical"],safety:["glove","helmet","safety","protective"]};for(const[c,u]of Object.entries(l))if(u.some(d=>e.toLowerCase().includes(d))){o=c;break}return{intent:"add",item:s,quantity:r,unit:i,category:o}}parseQueryCommand(e){e.toLowerCase().split(" ");let n;const r=["check","how many","quantity","stock","level"];for(const i of r){const s=e.toLowerCase().indexOf(i);if(s!==-1){const o=e.substring(s+i.length).trim(),a=["of","the","for","in"];n=o.split(" ").filter(l=>!a.includes(l.toLowerCase())).join(" ");break}}return{intent:"query",item:n}}parseUpdateCommand(e){return{intent:"update",action:e}}async handleAddCommand(e){if(!e.item||!e.quantity)return{success:!1,message:"I need to know what item and how much to add. For example: 'Add 50 liters of diesel'"};try{const r=(await Rn.getAllInventoryItems()).find(i=>i.name.toLowerCase().includes(e.item.toLowerCase()));if(r){const i=r.quantity+e.quantity;return await Rn.updateInventoryItem(r.id,{quantity:i,lastUpdated:new Date}),await Rn.addTransaction({itemId:r.id,type:"in",quantity:e.quantity,previousQuantity:r.quantity,newQuantity:i,reason:"Voice command addition",performedBy:"Storekeeper",timestamp:new Date,synced:!1}),{success:!0,message:`Added ${e.quantity} ${e.unit||"units"} of ${e.item}. New quantity: ${i}.`,data:{itemId:r.id,newQuantity:i}}}else{const i=e.quantity*.2,s=await Rn.addInventoryItem({name:e.item,category:e.category||"general",quantity:e.quantity,unit:e.unit||"units",reorderLevel:Math.max(1,Math.floor(i)),supplier:"Unknown",lastUpdated:new Date,isActive:!0});return await Rn.addTransaction({itemId:s,type:"in",quantity:e.quantity,previousQuantity:0,newQuantity:e.quantity,reason:"Voice command - new item",performedBy:"Storekeeper",timestamp:new Date,synced:!1}),{success:!0,message:`Created new item: ${e.item} with ${e.quantity} ${e.unit||"units"}.`,data:{itemId:s}}}}catch(n){return console.error("Error adding inventory item:",n),{success:!1,message:"Failed to add the item to inventory."}}}async handleQueryCommand(e){if(!e.item)return{success:!1,message:"What item would you like to check? For example: 'Check diesel stock'"};try{const r=(await Rn.getAllInventoryItems()).filter(i=>i.name.toLowerCase().includes(e.item.toLowerCase()));if(r.length===0)return{success:!1,message:`I couldn't find any items matching "${e.item}".`};if(r.length===1){const i=r[0];let s=`${i.name}: ${i.quantity} ${i.unit}`;return i.quantity<=i.reorderLevel&&(s+=` (LOW STOCK - reorder level is ${i.reorderLevel})`),{success:!0,message:s,data:i}}else return{success:!0,message:`Found multiple items: ${r.map(s=>`${s.name}: ${s.quantity} ${s.unit}`).join(", ")}`,data:r}}catch(n){return console.error("Error querying inventory:",n),{success:!1,message:"Failed to query inventory."}}}async handleUpdateCommand(e){return{success:!1,message:"Update commands are not fully implemented yet. Please use the web interface for updates."}}async handleListCommand(e){try{const r=(await Rn.getAllInventoryItems()).filter(a=>a.isActive);if(r.length===0)return{success:!0,message:"No inventory items found."};const i=r.length,s=r.filter(a=>a.quantity<=a.reorderLevel);let o=`You have ${i} items in inventory.`;return s.length>0&&(o+=` ${s.length} items need reordering.`),{success:!0,message:o,data:{totalItems:i,lowStockCount:s.length,items:r.slice(0,5)}}}catch(n){return console.error("Error listing inventory:",n),{success:!1,message:"Failed to list inventory items."}}}async handleAlertCommand(e){try{const n=await Rn.getActiveAlerts();if(n.length===0)return{success:!0,message:"No active stock alerts."};const r=n.filter(o=>o.severity==="critical"),i=n.filter(o=>o.severity==="low");let s="";return r.length>0&&(s+=`CRITICAL: ${r.length} items are out of stock or very low. `),i.length>0&&(s+=`LOW: ${i.length} items are below reorder level.`),{success:!0,message:s||"No urgent stock alerts.",data:n}}catch(n){return console.error("Error checking alerts:",n),{success:!1,message:"Failed to check stock alerts."}}}async generateInventoryInsights(){try{const n=(await Rn.getAllInventoryItems()).filter(o=>o.isActive),r=n.filter(o=>o.quantity<=o.reorderLevel);if(n.length===0)return"No inventory data available for analysis.";let i=`Inventory Analysis:
`;i+=`• Total items: ${n.length}
`,i+=`• Low stock items: ${r.length}
`,r.length>0&&(i+=`• Items needing reorder: ${r.map(o=>o.name).join(", ")}
`);const s=n.reduce((o,a)=>o+a.quantity*(a.costPerUnit||1),0);return i+=`• Estimated inventory value: $${s.toFixed(2)}
`,i}catch(e){return console.error("Error generating insights:",e),"Unable to generate inventory insights at this time."}}}const qot=new Got("sk-17aab34fe0034f0c9ea6d32245d56a13"),Hot=({onCommandResult:t,disabled:e=!1})=>{const[n,r]=N.useState(!1),[i,s]=N.useState(""),[o,a]=N.useState(!1),[l,c]=N.useState(!1),u=N.useRef(null);N.useEffect(()=>{const y=window.SpeechRecognition||window.webkitSpeechRecognition;y&&(c(!0),u.current=new y,u.current.continuous=!1,u.current.interimResults=!0,u.current.lang="en-US",u.current.onresult=g=>{const v=Array.from(g.results).map(x=>x[0]).map(x=>x.transcript).join("");s(v)},u.current.onend=()=>{r(!1),i.trim()&&f(i)},u.current.onerror=g=>{console.error("Speech recognition error:",g.error),r(!1),t({success:!1,message:`Speech recognition error: ${g.error}`})})},[i]);const d=()=>{var y;if(!(!l||e)){s(""),r(!0);try{(y=u.current)==null||y.start(),t({success:!0,message:"Listening... Speak your inventory command."})}catch(g){console.error("Error starting speech recognition:",g),r(!1)}}},h=()=>{var y;r(!1),(y=u.current)==null||y.stop()},f=async y=>{if(y.trim()){a(!0);try{const g=await qot.processVoiceCommand(y);t(g),g.success&&"speechSynthesis"in window&&p(g.message)}catch(g){console.error("Error processing voice command:",g),t({success:!1,message:"Failed to process voice command."})}finally{a(!1)}}},p=y=>{if("speechSynthesis"in window){const g=new SpeechSynthesisUtterance(y);g.rate=.9,g.pitch=1,g.volume=.8,window.speechSynthesis.speak(g)}},m=()=>{i.trim()&&f(i)};return l?k.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 space-y-4",children:[k.jsxs("div",{className:"flex items-center justify-between",children:[k.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Voice Inventory Control"}),k.jsx("div",{className:"flex items-center space-x-2",children:k.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${n?"bg-red-100 text-red-800 animate-pulse":"bg-gray-100 text-gray-800"}`,children:n?"Listening...":"Ready"})})]}),k.jsxs("div",{className:"flex items-center space-x-3",children:[k.jsxs("button",{onClick:n?h:d,disabled:e||o,className:`flex items-center space-x-2 px-4 py-2 rounded-lg font-medium transition-colors ${n?"bg-red-600 text-white hover:bg-red-700":"bg-blue-600 text-white hover:bg-blue-700"} ${e||o?"opacity-50 cursor-not-allowed":""}`,children:[k.jsx("svg",{className:`w-5 h-5 ${n?"animate-pulse":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 016 0v6a3 3 0 01-3 3z"})}),k.jsx("span",{children:n?"Stop Listening":"Start Voice Command"})]}),o&&k.jsxs("div",{className:"flex items-center space-x-2 text-blue-600",children:[k.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-blue-600 border-t-transparent"}),k.jsx("span",{className:"text-sm",children:"Processing..."})]})]}),i&&k.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[k.jsxs("div",{className:"flex items-center justify-between mb-2",children:[k.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Command:"}),k.jsx("button",{onClick:m,disabled:o,className:"text-xs bg-green-600 text-white px-2 py-1 rounded hover:bg-green-700 disabled:opacity-50",children:"Process"})]}),k.jsx("p",{className:"text-gray-800",children:i})]}),k.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[k.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-2",children:"Try saying:"}),k.jsxs("ul",{className:"text-xs text-blue-700 space-y-1",children:[k.jsx("li",{children:'• "Add 50 liters of diesel"'}),k.jsx("li",{children:'• "Check lubricant stock"'}),k.jsx("li",{children:'• "How many LED bulbs are left?"'}),k.jsx("li",{children:'• "List all inventory"'}),k.jsx("li",{children:'• "Show stock alerts"'})]})]}),k.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[k.jsx("p",{children:"💡 Speak clearly and include quantities and units when adding items."}),k.jsx("p",{children:"🎯 Works offline - voice commands are processed locally."}),k.jsx("p",{children:"🔄 Changes sync automatically when back online."})]})]}):k.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:k.jsx("p",{className:"text-yellow-800 text-sm",children:"Voice commands are not supported in your browser. Try Chrome, Edge, or Safari."})})},Kot=({item:t,onSubmit:e,onCancel:n})=>{const[r,i]=N.useState({name:"",category:"general",quantity:0,unit:"units",reorderLevel:0,supplier:"",location:"",notes:"",costPerUnit:0,isActive:!0});N.useEffect(()=>{t&&i({name:t.name,category:t.category,quantity:t.quantity,unit:t.unit,reorderLevel:t.reorderLevel,supplier:t.supplier,location:t.location||"",notes:t.notes||"",costPerUnit:t.costPerUnit||0,isActive:t.isActive})},[t]);const s=c=>{if(c.preventDefault(),!r.name.trim()){alert("Item name is required");return}if(r.quantity<0){alert("Quantity cannot be negative");return}if(r.reorderLevel<0){alert("Reorder level cannot be negative");return}e({...r,lastUpdated:new Date})},o=c=>{const{name:u,value:d,type:h}=c.target;i(f=>({...f,[u]:h==="number"?d===""?0:Number(d):d}))},a=["fuel","lubricant","electrical","mechanical","safety","cleaning","office","general"],l=["liters","kilograms","pieces","units","boxes","packs","meters","rolls"];return k.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[k.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:t?"Edit Inventory Item":"Add New Inventory Item"}),k.jsxs("form",{onSubmit:s,className:"space-y-6",children:[k.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[k.jsxs("div",{children:[k.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Item Name *"}),k.jsx("input",{type:"text",id:"name",name:"name",value:r.name,onChange:o,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Diesel, LED Bulbs, Safety Gloves"})]}),k.jsxs("div",{children:[k.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-2",children:"Category *"}),k.jsx("select",{id:"category",name:"category",value:r.category,onChange:o,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:a.map(c=>k.jsx("option",{value:c,children:c.charAt(0).toUpperCase()+c.slice(1)},c))})]}),k.jsxs("div",{children:[k.jsx("label",{htmlFor:"quantity",className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantity *"}),k.jsx("input",{type:"number",id:"quantity",name:"quantity",value:r.quantity,onChange:o,min:"0",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),k.jsxs("div",{children:[k.jsx("label",{htmlFor:"unit",className:"block text-sm font-medium text-gray-700 mb-2",children:"Unit *"}),k.jsx("select",{id:"unit",name:"unit",value:r.unit,onChange:o,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:l.map(c=>k.jsx("option",{value:c,children:c},c))})]}),k.jsxs("div",{children:[k.jsx("label",{htmlFor:"reorderLevel",className:"block text-sm font-medium text-gray-700 mb-2",children:"Reorder Level *"}),k.jsx("input",{type:"number",id:"reorderLevel",name:"reorderLevel",value:r.reorderLevel,onChange:o,min:"0",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Minimum quantity before reordering"})]}),k.jsxs("div",{children:[k.jsx("label",{htmlFor:"costPerUnit",className:"block text-sm font-medium text-gray-700 mb-2",children:"Cost Per Unit"}),k.jsx("input",{type:"number",id:"costPerUnit",name:"costPerUnit",value:r.costPerUnit,onChange:o,min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00"})]}),k.jsxs("div",{children:[k.jsx("label",{htmlFor:"supplier",className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier *"}),k.jsx("input",{type:"text",id:"supplier",name:"supplier",value:r.supplier,onChange:o,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Supplier name"})]}),k.jsxs("div",{children:[k.jsx("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700 mb-2",children:"Location"}),k.jsx("input",{type:"text",id:"location",name:"location",value:r.location,onChange:o,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Storage location"})]})]}),k.jsxs("div",{children:[k.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),k.jsx("textarea",{id:"notes",name:"notes",value:r.notes,onChange:o,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Additional notes about this item..."})]}),k.jsxs("div",{children:[k.jsxs("label",{className:"flex items-center",children:[k.jsx("input",{type:"checkbox",name:"isActive",checked:r.isActive,onChange:c=>i(u=>({...u,isActive:c.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),k.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Active Item"})]}),k.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Uncheck to hide this item from inventory lists"})]}),k.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[k.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Cancel"}),k.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:t?"Update Item":"Add Item"})]})]})]})},Xot=({alerts:t})=>{const e=t.filter(r=>r.severity==="critical"),n=t.filter(r=>r.severity==="low");return t.length===0?k.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800",children:[k.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"All Stock OK"]}):k.jsxs("div",{className:"relative",children:[k.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-800",children:[k.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})}),e.length>0?k.jsxs("span",{children:[e.length," Critical Alert",e.length!==1?"s":""]}):k.jsxs("span",{children:[n.length," Low Stock Alert",n.length!==1?"s":""]})]}),k.jsx("div",{className:"absolute top-full right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 z-10 hidden group-hover:block",children:k.jsxs("div",{className:"p-4",children:[k.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Stock Alerts"}),e.length>0&&k.jsxs("div",{className:"mb-3",children:[k.jsx("h4",{className:"text-xs font-medium text-red-600 mb-2",children:"Critical Alerts"}),k.jsxs("div",{className:"space-y-2",children:[e.slice(0,3).map(r=>k.jsxs("div",{className:"flex items-center justify-between text-xs",children:[k.jsx("span",{className:"text-gray-700",children:r.itemName}),k.jsxs("span",{className:"text-red-600 font-medium",children:[r.currentQuantity," left (Reorder: ",r.reorderLevel,")"]})]},r.id)),e.length>3&&k.jsxs("div",{className:"text-xs text-gray-500",children:["+",e.length-3," more critical items"]})]})]}),n.length>0&&k.jsxs("div",{children:[k.jsx("h4",{className:"text-xs font-medium text-yellow-600 mb-2",children:"Low Stock"}),k.jsxs("div",{className:"space-y-2",children:[n.slice(0,3).map(r=>k.jsxs("div",{className:"flex items-center justify-between text-xs",children:[k.jsx("span",{className:"text-gray-700",children:r.itemName}),k.jsxs("span",{className:"text-yellow-600",children:[r.currentQuantity," left (Reorder: ",r.reorderLevel,")"]})]},r.id)),n.length>3&&k.jsxs("div",{className:"text-xs text-gray-500",children:["+",n.length-3," more low stock items"]})]})]})]})})]})},Yot=()=>{const[t,e]=N.useState({pendingChanges:0,lastSync:null,isSyncing:!1,syncError:null});N.useEffect(()=>{const r=async()=>{try{const s=await Rn.getPendingTransactions();e(o=>({...o,pendingChanges:s.length}))}catch(s){console.error("Error checking pending changes:",s)}};r();const i=setInterval(r,3e4);return()=>clearInterval(i)},[]);const n=N.useCallback(async()=>{if(t.isSyncing)return!1;e(r=>({...r,isSyncing:!0,syncError:null}));try{const r=await Rn.getPendingTransactions();if(r.length===0)return e(i=>({...i,isSyncing:!1,lastSync:new Date})),!0;for(const i of r)await Rn.markTransactionAsSynced(i.id);return e({pendingChanges:0,lastSync:new Date,isSyncing:!1,syncError:null}),!0}catch(r){return console.error("Sync failed:",r),e(i=>({...i,isSyncing:!1,syncError:r instanceof Error?r.message:"Sync failed"})),!1}},[t.isSyncing]);return N.useEffect(()=>{const r=()=>{t.pendingChanges>0&&!t.isSyncing&&n()};return window.addEventListener("online",r),()=>window.removeEventListener("online",r)},[t.pendingChanges,t.isSyncing,n]),{syncState:t,triggerSync:n}},Zot=()=>{const[t,e]=N.useState([]),n=N.useCallback(async()=>{try{const o=(await Rn.getAllInventoryItems()).filter(u=>u.isActive),a=[];for(const u of o)u.quantity===0?a.push({id:`alert-${u.id}-critical`,itemId:u.id,itemName:u.name,currentQuantity:u.quantity,reorderLevel:u.reorderLevel,severity:"critical",createdAt:new Date,resolved:!1}):u.quantity<=u.reorderLevel&&a.push({id:`alert-${u.id}-low`,itemId:u.id,itemName:u.name,currentQuantity:u.quantity,reorderLevel:u.reorderLevel,severity:"low",createdAt:new Date,resolved:!1});const l=await Rn.getActiveAlerts();for(const u of a){const d=l.find(h=>h.itemId===u.itemId&&h.severity===u.severity);d?await Rn.updateInventoryItem(d.id,{createdAt:new Date}):await Rn.addStockAlert(u)}for(const u of l){const d=o.find(f=>f.id===u.itemId);(!d||u.severity==="critical"&&d.quantity>0||u.severity==="low"&&d.quantity>d.reorderLevel)&&await Rn.markAlertAsResolved(u.id)}const c=await Rn.getActiveAlerts();e(c)}catch(s){console.error("Error checking stock alerts:",s)}},[]);N.useEffect(()=>{n()},[n]),N.useEffect(()=>{const s=setInterval(n,3e5);return()=>clearInterval(s)},[n]),N.useEffect(()=>{const s=()=>{n()};return window.addEventListener("focus",s),()=>window.removeEventListener("focus",s)},[n]);const r=N.useCallback(async s=>{try{await Rn.markAlertAsResolved(s),await n()}catch(o){console.error("Error resolving alert:",o)}},[n]),i=N.useCallback(()=>{const s=t.filter(a=>a.severity==="critical"),o=t.filter(a=>a.severity==="low");return{total:t.length,critical:s.length,low:o.length,hasCritical:s.length>0,hasAlerts:t.length>0}},[t]);return{alerts:t,checkAlerts:n,resolveAlert:r,getAlertSummary:i}},Jot=()=>{const[t,e]=N.useState([]),[n,r]=N.useState(!0),[i,s]=N.useState(!1),[o,a]=N.useState(null),[l,c]=N.useState(null),[u,d]=N.useState([]),{syncState:h,triggerSync:f}=Yot(),{alerts:p,checkAlerts:m}=Zot();N.useEffect(()=>{y()},[]),N.useEffect(()=>{d(p)},[p]);const y=async()=>{try{await Rn.init(),await g(),await m()}catch(O){console.error("Failed to initialize database:",O)}finally{r(!1)}},g=async()=>{try{const O=await Rn.getAllInventoryItems();e(O)}catch(O){console.error("Failed to load items:",O)}},v=async O=>{try{const $=await Rn.addInventoryItem(O);await Rn.addTransaction({itemId:$,type:"in",quantity:O.quantity,previousQuantity:0,newQuantity:O.quantity,reason:"Manual addition",performedBy:"Storekeeper",timestamp:new Date,synced:!1}),await g(),await m(),s(!1),c({success:!0,message:`Successfully added ${O.name} to inventory.`})}catch($){console.error("Failed to add item:",$),c({success:!1,message:"Failed to add item to inventory."})}},x=async(O,$)=>{try{if(await Rn.updateInventoryItem(O,$),$.quantity!==void 0){const R=t.find(F=>F.id===O);R&&await Rn.addTransaction({itemId:O,type:"adjustment",quantity:$.quantity-R.quantity,previousQuantity:R.quantity,newQuantity:$.quantity,reason:"Manual adjustment",performedBy:"Storekeeper",timestamp:new Date,synced:!1})}await g(),await m(),a(null),c({success:!0,message:"Item updated successfully."})}catch(R){console.error("Failed to update item:",R),c({success:!1,message:"Failed to update item."})}},b=async O=>{if(confirm("Are you sure you want to delete this item?"))try{await Rn.updateInventoryItem(O,{isActive:!1}),await g(),await m(),c({success:!0,message:"Item deleted successfully."})}catch($){console.error("Failed to delete item:",$),c({success:!1,message:"Failed to delete item."})}},S=async(O,$)=>{try{const R=t.find(F=>F.id===O);if(!R)return;await Rn.updateInventoryItem(O,{quantity:$,lastUpdated:new Date}),await Rn.addTransaction({itemId:O,type:$>R.quantity?"in":"out",quantity:Math.abs($-R.quantity),previousQuantity:R.quantity,newQuantity:$,reason:"Quick adjustment",performedBy:"Storekeeper",timestamp:new Date,synced:!1}),await g(),await m()}catch(R){console.error("Failed to update quantity:",R)}},A=O=>{c(O),O.success&&(g(),m())},E=async()=>{await f(),await g(),await m()},T=(()=>{const O=t.filter(U=>U.isActive),$=O.length,R=O.filter(U=>U.quantity<=U.reorderLevel&&U.quantity>0),F=O.filter(U=>U.quantity===0),L=O.reduce((U,q)=>U+q.quantity*(q.costPerUnit||0),0);return{totalItems:$,lowStockItems:R.length,outOfStockItems:F.length,totalValue:L}})();return k.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:k.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[k.jsx("div",{className:"mb-8",children:k.jsxs("div",{className:"flex items-center justify-between",children:[k.jsxs("div",{children:[k.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Storekeeper Dashboard"}),k.jsx("p",{className:"mt-2 text-gray-600",children:"Manage inventory, track stock levels, and use voice commands for quick updates."})]}),k.jsxs("div",{className:"flex items-center space-x-4",children:[k.jsx(Xot,{alerts:u}),k.jsxs("button",{onClick:E,disabled:h.isSyncing,className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:[k.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),k.jsx("span",{children:h.isSyncing?"Syncing...":h.pendingChanges>0?`Sync (${h.pendingChanges})`:"Sync"})]})]})]})}),k.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[k.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:k.jsxs("div",{className:"flex items-center",children:[k.jsx("div",{className:"flex-shrink-0",children:k.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:k.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})})}),k.jsxs("div",{className:"ml-4",children:[k.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Items"}),k.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:T.totalItems})]})]})}),k.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:k.jsxs("div",{className:"flex items-center",children:[k.jsx("div",{className:"flex-shrink-0",children:k.jsx("div",{className:"w-8 h-8 bg-yellow-100 rounded-lg flex items-center justify-center",children:k.jsx("svg",{className:"w-5 h-5 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})})})}),k.jsxs("div",{className:"ml-4",children:[k.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Low Stock"}),k.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:T.lowStockItems})]})]})}),k.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:k.jsxs("div",{className:"flex items-center",children:[k.jsx("div",{className:"flex-shrink-0",children:k.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-lg flex items-center justify-center",children:k.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),k.jsxs("div",{className:"ml-4",children:[k.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Out of Stock"}),k.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:T.outOfStockItems})]})]})}),k.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:k.jsxs("div",{className:"flex items-center",children:[k.jsx("div",{className:"flex-shrink-0",children:k.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:k.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})})}),k.jsxs("div",{className:"ml-4",children:[k.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Value"}),k.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:["$",T.totalValue.toFixed(2)]})]})]})})]}),k.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[k.jsx("div",{className:"lg:col-span-2",children:k.jsx(Hot,{onCommandResult:A})}),k.jsx("div",{className:"lg:col-span-1",children:l&&k.jsxs("div",{className:`p-4 rounded-lg border ${l.success?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:[k.jsxs("div",{className:"flex items-center",children:[l.success?k.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):k.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),k.jsx("span",{className:"font-medium",children:l.success?"Success":"Error"})]}),k.jsx("p",{className:"mt-2 text-sm",children:l.message})]})})]}),k.jsx("div",{className:"mb-6",children:k.jsxs("button",{onClick:()=>s(!0),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[k.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),k.jsx("span",{children:"Add New Item"})]})}),(i||o)&&k.jsx("div",{className:"mb-6",children:k.jsx(Kot,{item:o||void 0,onSubmit:o?O=>x(o.id,O):v,onCancel:()=>{s(!1),a(null)}})}),k.jsx(zot,{items:t,onEditItem:a,onDeleteItem:b,onUpdateQuantity:S,isLoading:n})]})})},o2={generator:{temperature:{warning:85,critical:95},vibration:{warning:.8,critical:1.2},voltage:{warning:{min:210,max:250},critical:{min:200,max:260}},runtimeHours:{warning:2e3,critical:3e3}},ac_unit:{temperature:{warning:15,critical:10},pressure:{warning:{min:100,max:400},critical:{min:80,max:450}},runtimeHours:{warning:1500,critical:2500}},pump:{vibration:{warning:.5,critical:.8},pressure:{warning:{min:2,max:8},critical:{min:1,max:10}},runtimeHours:{warning:1800,critical:2800}},compressor:{temperature:{warning:80,critical:90},pressure:{warning:{min:6,max:10},critical:{min:5,max:12}},vibration:{warning:.6,critical:1},runtimeHours:{warning:2200,critical:3200}}};class Qot{constructor(){Lt(this,"sensorHistory",new Map);Lt(this,"analysisCache",new Map)}async analyzeSensorData(e){const n=[];for(const r of e){this.sensorHistory.has(r.equipmentId)||this.sensorHistory.set(r.equipmentId,[]),this.sensorHistory.get(r.equipmentId).push(r);const i=this.analyzeSingleSensor(r);n.push(i)}return n}async predictFailure(e,n){const r=this.analysisCache.get(e);if(r&&Date.now()-r.lastAnalysis.getTime()<36e5)return r;const i=this.sensorHistory.get(e)||[],s=o2[n]||o2.generator,o=this.analyzeCurrentStatus(i,s),a=this.calculateFailureProbability(i,n),l=this.predictFailureTimeframe(a,n),c={equipmentId:e,equipmentName:`Equipment ${e}`,status:o.status,predictedFailureInDays:l,confidence:a.confidence,recommendedAction:this.generateRecommendedAction(o,l,n),riskLevel:this.calculateRiskLevel(a.score,l),contributingFactors:o.factors,lastAnalysis:new Date,nextAnalysis:new Date(Date.now()+36e5)};return this.analysisCache.set(e,c),c}async generateMaintenanceReport(e){const n=[];for(const a of e)try{const l=await this.predictFailure(a,"generator");n.push(l)}catch(l){console.warn(`Failed to analyze equipment ${a}:`,l)}const r=n.filter(a=>a.status==="critical"||a.riskLevel==="critical"),i=n.filter(a=>a.predictedFailureInDays<=7&&a.status!=="critical"),s=this.generateOverallRecommendations(n),o=this.calculateOverallRisk(n);return{criticalEquipment:r,upcomingMaintenance:i,recommendations:s,overallRisk:o}}analyzeSingleSensor(e){const{value:n,normalRange:r,type:i}=e;let s="normal",o=0,a="stable",l=0;n<r.min?(o=(r.min-n)/r.min,s=o>.2?"critical":"warning"):n>r.max&&(o=(n-r.max)/r.max,s=o>.2?"critical":"warning");const c=this.sensorHistory.get(e.equipmentId)||[];if(c.length>=3){const d=c.slice(-3).map(f=>f.value),h=(d[2]-d[0])/2;Math.abs(h)>.1&&(a=h>0?"increasing":"decreasing")}l=Math.min(1,Math.abs(o)*2);const u=this.generateSensorRecommendations(e,s,a);return{equipmentId:e.equipmentId,sensorType:e.type,currentValue:e.value,normalRange:r,deviation:o,trend:a,anomalyScore:l,recommendations:u}}analyzeCurrentStatus(e,n){if(e.length===0)return{status:"normal",factors:["No sensor data available"]};const r=e.slice(-10),i=[];let s=0,o=0;for(const a of r){const l=this.analyzeSingleSensor(a);l.anomalyScore>.8?(s++,i.push(`Critical ${a.type} reading: ${a.value}${a.unit}`)):l.anomalyScore>.5&&(o++,i.push(`Warning ${a.type} reading: ${a.value}${a.unit}`))}return s>=2?{status:"critical",factors:i}:o>=3||s>=1?{status:"warning",factors:i}:{status:"normal",factors:["All readings within normal range"]}}calculateFailureProbability(e,n){if(e.length<5)return{score:.1,confidence:.5};let r=0,i=0;for(const c of e.slice(-20)){const u=this.analyzeSingleSensor(c);r+=u.anomalyScore,i++}const s=r/i,o=this.calculateRuntimeFactor(e,n),a=Math.min(.95,s*.7+o*.3),l=Math.min(.95,e.length/50);return{score:a,confidence:l}}calculateRuntimeFactor(e,n){var l;const r=e.filter(c=>c.type==="runtime");if(r.length===0)return 0;const s=r.reduce((c,u)=>c+u.value,0)/r.length,a=((l=(o2[n]||o2.generator).runtimeHours)==null?void 0:l.critical)||3e3;return Math.min(1,s/a)}predictFailureTimeframe(e,n){const i=(n==="generator"?30:45)*(1-e.score);return Math.max(1,Math.min(90,i*e.confidence))}generateRecommendedAction(e,n,r){return e.status==="critical"?`IMMEDIATE MAINTENANCE REQUIRED: ${e.factors.join(", ")}. Predicted failure in ${n} days.`:e.status==="warning"?`Schedule maintenance within 7 days. Issues: ${e.factors.slice(0,2).join(", ")}. Predicted failure in ${n} days.`:n<=14?`Plan maintenance within 2 weeks. Predicted failure in ${n} days.`:`Monitor equipment. Next scheduled maintenance in ${Math.floor(n/2)} days.`}calculateRiskLevel(e,n){return e>.8||n<=3?"critical":e>.6||n<=7?"high":e>.4||n<=14?"medium":"low"}generateSensorRecommendations(e,n,r){const i=[];return n==="critical"?i.push(`IMMEDIATE ACTION: ${e.type} is critically ${e.value<e.normalRange.min?"low":"high"}`):n==="warning"&&i.push(`Monitor ${e.type} closely - value is outside normal range`),r==="increasing"&&e.value>e.normalRange.max?i.push(`Trend shows increasing ${e.type} - investigate cause`):r==="decreasing"&&e.value<e.normalRange.min&&i.push(`Trend shows decreasing ${e.type} - check for issues`),i}generateOverallRecommendations(e){const n=[],r=e.filter(o=>o.riskLevel==="critical").length,i=e.filter(o=>o.riskLevel==="high").length;r>0&&n.push(`CRITICAL: ${r} equipment items require immediate maintenance`),i>0&&n.push(`HIGH PRIORITY: ${i} equipment items need maintenance within 7 days`);const s=e.filter(o=>o.predictedFailureInDays<=30).length;return s>0&&n.push(`UPCOMING: ${s} equipment items predicted to fail within 30 days`),e.some(o=>o.confidence<.7)&&n.push("LOW CONFIDENCE: Some predictions have low confidence - consider collecting more sensor data"),n}calculateOverallRisk(e){const n=e.map(i=>{switch(i.riskLevel){case"critical":return 4;case"high":return 3;case"medium":return 2;case"low":return 1;default:return 1}}),r=n.reduce((i,s)=>i+s,0)/n.length;return r>=3.5?"critical":r>=2.5?"high":r>=1.5?"medium":"low"}clearCache(e){e?(this.analysisCache.delete(e),this.sensorHistory.delete(e)):(this.analysisCache.clear(),this.sensorHistory.clear())}}const zS=new Qot,eat=()=>{const[t,e]=N.useState([]),[n,r]=N.useState([]),[i,s]=N.useState(!1),[o,a]=N.useState("disconnected"),[l,c]=N.useState(null),u=N.useCallback(g=>{const v=["generator","ac_unit","pump","compressor"],x=v[Math.floor(Math.random()*v.length)],b=[];switch(x){case"generator":b.push({equipmentId:g,type:"temperature",value:75+Math.random()*30,unit:"°C",normalRange:{min:60,max:90},status:"normal"},{equipmentId:g,type:"vibration",value:.3+Math.random()*1,unit:"mm/s",normalRange:{min:.1,max:.8},status:"normal"},{equipmentId:g,type:"voltage",value:220+Math.random()*40,unit:"V",normalRange:{min:210,max:250},status:"normal"},{equipmentId:g,type:"runtime",value:500+Math.random()*2500,unit:"hours",normalRange:{min:0,max:3e3},status:"normal"});break;case"ac_unit":b.push({equipmentId:g,type:"temperature",value:12+Math.random()*10,unit:"°C",normalRange:{min:10,max:20},status:"normal"},{equipmentId:g,type:"pressure",value:200+Math.random()*300,unit:"psi",normalRange:{min:100,max:400},status:"normal"},{equipmentId:g,type:"runtime",value:300+Math.random()*2e3,unit:"hours",normalRange:{min:0,max:2500},status:"normal"});break;case"pump":b.push({equipmentId:g,type:"vibration",value:.2+Math.random()*.6,unit:"mm/s",normalRange:{min:.1,max:.5},status:"normal"},{equipmentId:g,type:"pressure",value:3+Math.random()*7,unit:"bar",normalRange:{min:2,max:8},status:"normal"},{equipmentId:g,type:"runtime",value:400+Math.random()*2200,unit:"hours",normalRange:{min:0,max:2800},status:"normal"});break;case"compressor":b.push({equipmentId:g,type:"temperature",value:70+Math.random()*25,unit:"°C",normalRange:{min:60,max:90},status:"normal"},{equipmentId:g,type:"pressure",value:7+Math.random()*5,unit:"bar",normalRange:{min:6,max:10},status:"normal"},{equipmentId:g,type:"vibration",value:.3+Math.random()*.7,unit:"mm/s",normalRange:{min:.2,max:.6},status:"normal"});break}return b.map(S=>({...S,id:`sensor-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:new Date}))},[]),d=N.useCallback(async g=>{try{const v=await zS.analyzeSensorData(g);r(x=>{const b=[...x];return v.forEach(S=>{const A=b.findIndex(E=>E.equipmentId===S.equipmentId&&E.sensorType===S.sensorType);A>=0?b[A]=S:b.push(S)}),b.slice(-100)})}catch(v){console.error("Error processing sensor data:",v),c(`Failed to process sensor data: ${v instanceof Error?v.message:"Unknown error"}`)}},[]),h=N.useCallback(g=>{e(v=>[...v,g].slice(-500))},[]),f=N.useCallback(()=>{a("connecting"),c(null),setTimeout(()=>{s(!0),a("connected");const g=["GEN-01","GEN-02","AC-01","AC-02","PUMP-01","COMP-01"];let v;const x=()=>{const b=g[Math.floor(Math.random()*g.length)],S=u(b);S.forEach(A=>{h(A)}),d(S)};return v=window.setInterval(x,5e3),x(),()=>clearInterval(v)},1e3)},[u,h,d]),p=N.useCallback(()=>{s(!1),a("disconnected")},[]),m=N.useCallback((g,v,x)=>{const b={temperature:{min:60,max:90},vibration:{min:.1,max:.8},voltage:{min:210,max:250},pressure:{min:2,max:8},runtime:{min:0,max:3e3}},S={id:`mock-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,equipmentId:g,type:v,value:x,unit:v==="temperature"?"°C":v==="vibration"?"mm/s":v==="voltage"?"V":v==="pressure"?"bar":"hours",timestamp:new Date,normalRange:b[v]||{min:0,max:100},status:"normal"};if(x<S.normalRange.min||x>S.normalRange.max){const A=Math.max((S.normalRange.min-x)/S.normalRange.min,(x-S.normalRange.max)/S.normalRange.max);S.status=A>.2?"critical":"warning"}h(S),d([S])},[h,d]),y=N.useCallback(()=>{e([]),r([]),zS.clearCache()},[]);return N.useEffect(()=>(f(),p),[f,p]),{sensorReadings:t,sensorAnalyses:n,isConnected:i,connectionStatus:o,error:l,startStream:f,stopStream:p,addMockSensorData:m,clearData:y}};class tat{constructor(){Lt(this,"tasks",[]);Lt(this,"technicians",[]);Lt(this,"equipment",[]);Lt(this,"schedules",[])}initialize(e,n,r,i=[]){this.tasks=e,this.technicians=n,this.equipment=r,this.schedules=i}async scheduleMaintenance(e,n=[]){const r=[],i=[],s={},o=[],a=this.prioritizeTasks(e),l=this.getAvailableTechnicians();for(const c of a)try{const u=await this.createMaintenanceTask(c,n),d=await this.assignTaskToTechnician(u,l);d?(i.push(d),this.updateTechnicianWorkload(d.assignedTo,d.estimatedDuration),s[d.assignedTo]||(s[d.assignedTo]=[]),s[d.assignedTo].push(d)):(r.push(u),o.push(`No available technician for ${u.equipmentName}`))}catch(u){console.error(`Failed to schedule task for ${c.equipmentName}:`,u),r.push(await this.createMaintenanceTask(c,n)),o.push(`Scheduling error for ${c.equipmentName}`)}return this.generateSchedules(s),{scheduledTasks:i,unscheduledTasks:r,technicianAssignments:s,conflicts:o}}prioritizeTasks(e){return e.filter(n=>n.status!=="normal").sort((n,r)=>n.riskLevel==="critical"&&r.riskLevel!=="critical"?-1:r.riskLevel==="critical"&&n.riskLevel!=="critical"?1:n.predictedFailureInDays!==r.predictedFailureInDays?n.predictedFailureInDays-r.predictedFailureInDays:r.confidence-n.confidence)}async createMaintenanceTask(e,n){const r=this.equipment.find(o=>o.id===e.equipmentId),i=this.determineRequiredParts(e,r,n);return{id:`MT-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,equipmentId:e.equipmentId,equipmentName:e.equipmentName,description:this.generateTaskDescription(e,r),priority:this.mapRiskToPriority(e.riskLevel),status:"pending",assignedTo:"",estimatedDuration:this.estimateTaskDuration(e,r),scheduledDate:new Date,predictedFailureInDays:e.predictedFailureInDays,requiredParts:i,notes:e.recommendedAction,createdAt:new Date,updatedAt:new Date,synced:!1}}async assignTaskToTechnician(e,n){if(n.length===0)return null;const r=n.map(s=>({tech:s,score:this.calculateTechnicianScore(s,e)}));r.sort((s,o)=>o.score-s.score);const i=r[0];if(i.score>0){const s={...e};return s.assignedTo=i.tech.name,s.status="scheduled",s.scheduledDate=this.calculateOptimalScheduleDate(i.tech,e),s}return null}calculateTechnicianScore(e,n){let r=0;e.isAvailable&&(r+=40);const i=e.currentWorkload*.3;r+=Math.max(0,30-i);const s=this.equipment.find(o=>o.id===n.equipmentId);return s&&this.hasMatchingSkills(e,s)&&(r+=20),n.priority==="critical"&&(r+=10),r}hasMatchingSkills(e,n){const r=n.type.toLowerCase();return e.skills.some(i=>i.toLowerCase().includes(r)||r.includes(i.toLowerCase()))}calculateOptimalScheduleDate(e,n){const r=new Date,i=Math.ceil(e.currentWorkload/20),s=n.priority==="critical"?0:n.priority==="high"?1:2,o=Math.max(i,s);return r.setDate(r.getDate()+o),r}updateTechnicianWorkload(e,n){const r=this.technicians.find(i=>i.name===e);if(r){const i=n/480*100;r.currentWorkload=Math.min(100,r.currentWorkload+i),r.currentWorkload>80&&(r.isAvailable=!1)}}generateTaskDescription(e,n){const r=`Predictive maintenance for ${e.equipmentName}`;return n?`${r} (${n.type}) - ${e.recommendedAction.split(".")[0]}`:`${r} - ${e.recommendedAction.split(".")[0]}`}mapRiskToPriority(e){switch(e){case"critical":return"critical";case"high":return"high";case"medium":return"medium";case"low":return"low";default:return"medium"}}estimateTaskDuration(e,n){let r=120;return e.riskLevel==="critical"?r=240:e.riskLevel==="high"&&(r=180),n&&(n.criticality==="critical"?r+=60:n.criticality==="high"&&(r+=30)),r}determineRequiredParts(e,n,r=[]){const i=[];if(n)switch(n.type.toLowerCase()){case"generator":i.push("Fuel Filter","Oil Filter","Air Filter");break;case"ac_unit":i.push("Refrigerant","Air Filter","Thermostat");break;case"pump":i.push("Seal Kit","Bearings","Gaskets");break;case"compressor":i.push("Air Filter","Oil","Belts");break}const s=i.filter(o=>r.some(a=>a.name.toLowerCase().includes(o.toLowerCase())&&a.quantity>0));return s.length>0?s:[]}getAvailableTechnicians(){return this.technicians.filter(e=>e.isAvailable&&e.currentWorkload<80)}generateSchedules(e){this.schedules=[];for(const[n,r]of Object.entries(e)){const i=this.technicians.find(l=>l.name===n);if(!i)continue;const s=r.reduce((l,c)=>l+c.estimatedDuration/60,0),o=this.calculateEfficiency(r,i),a={id:`SCH-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,technicianId:i.id,technicianName:i.name,tasks:r,date:new Date,totalHours:s,efficiency:o};this.schedules.push(a)}}calculateEfficiency(e,n){if(e.length===0)return 100;e.reduce((s,o)=>s+o.estimatedDuration,0);const r=this.getSkillMultiplier(n,e),i=Math.max(.5,1-n.currentWorkload/200);return Math.min(100,r*i*100)}getSkillMultiplier(e,n){let r=0;for(const i of n){const s=this.equipment.find(o=>o.id===i.equipmentId);s&&this.hasMatchingSkills(e,s)&&r++}return r/n.length}getScheduledTasks(){return this.tasks.filter(e=>e.status==="scheduled"||e.status==="in-progress")}getTechnicianSchedules(){return this.schedules}rescheduleTask(e,n){const r=this.tasks.find(i=>i.id===e);return r&&r.status==="scheduled"?(r.scheduledDate=n,r.updatedAt=new Date,!0):!1}completeTask(e,n){const r=this.tasks.find(i=>i.id===e);if(r&&(r.status==="scheduled"||r.status==="in-progress")){r.status="completed",r.completedDate=new Date,n&&(r.actualDuration=n),r.updatedAt=new Date;const i=this.technicians.find(s=>s.name===r.assignedTo);if(i){const s=(n||r.estimatedDuration)/480*100;i.currentWorkload=Math.max(0,i.currentWorkload-s),i.currentWorkload<=80&&(i.isAvailable=!0)}return!0}return!1}}const a2=new tat;class Sy{static generateDepartmentRecommendations(e,n){const r=[],i=e.filter(o=>o.riskLevel==="critical"),s=e.filter(o=>o.riskLevel==="high");switch(n.toLowerCase()){case"operations":i.length>0&&(r.push(`CRITICAL: ${i.length} equipment items require immediate attention in Operations`),r.push("Prioritize maintenance to avoid production downtime")),s.length>0&&r.push(`Schedule maintenance for ${s.length} high-risk equipment items within 48 hours`),r.push("Coordinate with inventory for critical spare parts");break;case"facilities":i.length>0&&(r.push(`URGENT: ${i.length} facility equipment items need immediate repair`),r.push("Alert facilities management team immediately")),r.push("Check HVAC and electrical systems for preventive maintenance"),r.push("Verify emergency backup systems are operational");break;case"production":i.length>0&&(r.push(`PRODUCTION RISK: ${i.length} production equipment items critical`),r.push("Schedule maintenance during off-peak hours if possible")),r.push("Monitor production line equipment closely"),r.push("Coordinate maintenance with production schedules");break;case"maintenance":r.push("Review all predictive maintenance alerts"),r.push("Assign technicians based on skill and availability"),r.push("Track maintenance completion and follow-up"),r.push("Update maintenance records and documentation");break;default:r.push("Review equipment status and prioritize maintenance"),r.push("Coordinate with relevant departments for scheduling")}return e.some(o=>o.confidence<.7)&&r.push("Some predictions have low confidence - consider additional sensor data"),e.some(o=>o.predictedFailureInDays<=3)&&r.push("IMMEDIATE ACTION: Equipment predicted to fail within 3 days"),r}static generateTaskDescription(e,n,r){let i=`Predictive maintenance for ${e.equipmentName}`;if(n&&(i+=` (${n.type})`),r&&r.length>0){const s=r.filter(a=>a.anomalyScore>.8),o=r.filter(a=>a.anomalyScore>.5&&a.anomalyScore<=.8);s.length>0?i+=` - Critical issues: ${s.map(a=>a.sensorType).join(", ")}`:o.length>0&&(i+=` - Warning issues: ${o.map(a=>a.sensorType).join(", ")}`)}return e.predictedFailureInDays<=7&&(i+=` - Predicted failure in ${e.predictedFailureInDays} days`),i}static assessEquipmentRisk(e,n,r){const i=[],s=[];n.criticality==="critical"&&(i.push("Equipment is mission-critical"),s.push("Maintain redundancy and backup systems"));const o=r.filter(u=>u.anomalyScore>.7);o.length>0&&(i.push(`Multiple sensor anomalies: ${o.map(u=>u.sensorType).join(", ")}`),s.push("Immediate sensor calibration and inspection")),n.runtimeHours>2e3&&(i.push("High runtime hours"),s.push("Schedule comprehensive inspection"));const a=new Date().getFullYear()-new Date(n.installationDate).getFullYear();a>5&&(i.push(`Equipment age: ${a} years`),s.push("Consider equipment replacement planning"));let l=0;e.riskLevel==="critical"?l+=4:e.riskLevel==="high"?l+=3:e.riskLevel==="medium"?l+=2:l+=1,l+=o.length,n.criticality==="critical"&&(l+=2),a>5&&(l+=1);let c;return l>=6?c="critical":l>=4?c="high":l>=2?c="medium":c="low",{overallRisk:c,riskFactors:i,mitigationStrategies:s}}static optimizeMaintenanceSchedule(e,n,r={start:"08:00",end:"17:00"}){const i=[...e],s=[];let o=0;i.sort((d,h)=>d.priority==="critical"&&h.priority!=="critical"?-1:h.priority==="critical"&&d.priority!=="critical"?1:d.predictedFailureInDays!==h.predictedFailureInDays?d.predictedFailureInDays-h.predictedFailureInDays:d.estimatedDuration-h.estimatedDuration);const a=n.filter(d=>d.isAvailable&&d.currentWorkload<80),l={};a.forEach(d=>{l[d.id]=[]});for(const d of i)if(!d.assignedTo){const h=this.findSuitableTechnician(d,a);h?(d.assignedTo=h.name,l[h.id].push(d),h.currentWorkload+=d.estimatedDuration/(8*60)*100,h.currentWorkload>80&&(h.isAvailable=!1)):s.push(`No suitable technician found for ${d.equipmentName}`)}const c=e.reduce((d,h)=>d+h.estimatedDuration,0),u=i.reduce((d,h)=>{const f=n.find(m=>m.name===h.assignedTo),p=f?this.calculateTechnicianEfficiency(f,h):.8;return d+h.estimatedDuration/p},0);return o=c>0?(c-u)/c*100:0,{optimizedSchedule:i,efficiencyGain:Math.max(0,o),conflicts:s}}static findSuitableTechnician(e,n){let r=null,i=0;for(const s of n)if(s.isAvailable&&s.currentWorkload<80){const o=this.calculateTechnicianSuitability(s,e);o>i&&(i=o,r=s)}return r}static calculateTechnicianSuitability(e,n){let r=0;return r+=(100-e.currentWorkload)*.3,e.skills.some(s=>n.description.toLowerCase().includes(s.toLowerCase()))&&(r+=40),e.skills.includes("generator")&&n.description.includes("generator")&&(r+=20),e.skills.includes("HVAC")&&n.description.includes("AC")&&(r+=20),r}static calculateTechnicianEfficiency(e,n){let r=.8;return e.skills.some(s=>n.description.toLowerCase().includes(s.toLowerCase()))&&(r+=.15),e.currentWorkload>60&&(r-=.1),Math.min(1,Math.max(.5,r))}static generateMaintenanceReport(e,n,r){const i=[],s=[],o=e.filter(p=>p.riskLevel==="critical");o.length>0&&(i.push(`CRITICAL: ${o.length} equipment items require immediate attention`),o.forEach(p=>{i.push(`${p.equipmentName}: ${p.recommendedAction}`)})),s.push(...this.generateDepartmentRecommendations(e,r));const a=n.filter(p=>p.status==="completed"),l=n.filter(p=>p.status==="scheduled"||p.status==="in-progress"),c=a.reduce((p,m)=>p+(m.actualDuration||m.estimatedDuration),0),u=a.length>0?c/a.length:0,d=n.filter(p=>p.description.includes("predictive")||p.description.includes("preventive")),h=n.length>0?d.length/n.length*100:0;return{summary:`Maintenance Report for ${r} Department:
- Total Equipment Monitored: ${e.length}
- Critical Alerts: ${o.length}
- Scheduled Tasks: ${l.length}
- Completed Tasks: ${a.length}
- Preventive Maintenance Rate: ${h.toFixed(1)}%`,criticalAlerts:i,recommendations:s,efficiencyMetrics:{tasksScheduled:l.length,tasksCompleted:a.length,averageCompletionTime:u,preventiveMaintenanceRate:h}}}static explainSensorAnomaly(e,n){const{sensorType:r,currentValue:i,normalRange:s,trend:o,anomalyScore:a}=e;let l;a>.8?l="critical":a>.6?l="high":a>.4?l="medium":l="low";const c=`Sensor ${r} reading ${i} is outside normal range (${s.min}-${s.max}). 
    Current trend: ${o}. Anomaly confidence: ${(a*100).toFixed(1)}%.`,u=[],d=[];switch(l==="critical"?(u.push("IMMEDIATE: Shut down equipment if safe to do so"),u.push("Alert maintenance team immediately"),u.push("Isolate equipment from operations")):l==="high"&&(u.push("Schedule inspection within 24 hours"),u.push("Monitor equipment closely"),u.push("Prepare maintenance resources")),r){case"temperature":u.push("Check cooling systems and ventilation"),d.push("Improve thermal management system"),d.push("Consider equipment load reduction");break;case"vibration":u.push("Inspect for loose components"),u.push("Check alignment and balance"),d.push("Schedule vibration analysis"),d.push("Consider foundation reinforcement");break;case"voltage":u.push("Check power supply stability"),u.push("Inspect electrical connections"),d.push("Review power distribution system"),d.push("Consider voltage regulation equipment");break;case"pressure":u.push("Check for leaks or blockages"),u.push("Verify pressure relief systems"),d.push("Review system pressure design"),d.push("Consider pressure monitoring upgrades");break}return{severity:l,explanation:c,immediateActions:u,longTermRecommendations:d}}}const MV={generateRecommendations:Sy.generateDepartmentRecommendations,assessRisk:Sy.assessEquipmentRisk,optimizeSchedule:Sy.optimizeMaintenanceSchedule,generateReport:Sy.generateMaintenanceReport,explainAnomaly:Sy.explainSensorAnomaly},nat=({department:t="operations",onTaskSelect:e,onEquipmentSelect:n})=>{const[r,i]=N.useState([]),[s,o]=N.useState([]),[a,l]=N.useState([]),[c,u]=N.useState([]),[d,h]=N.useState([]),[f,p]=N.useState("all"),[m,y]=N.useState(!0),{sensorReadings:g,sensorAnalyses:v,isConnected:x,connectionStatus:b,error:S,addMockSensorData:A,clearData:E}=eat();N.useEffect(()=>{(async()=>{y(!0);const U=[{id:"GEN-01",name:"Main Generator",type:"generator",location:"Power Room A",status:"operational",lastMaintenance:new Date("2025-09-15"),nextScheduledMaintenance:new Date("2025-11-15"),runtimeHours:1850,installationDate:new Date("2023-01-15"),manufacturer:"Cummins",model:"C275D5",serialNumber:"CMM-2023-001",department:"operations",criticality:"critical",notes:"Primary power source for building"},{id:"AC-01",name:"Central AC Unit",type:"ac_unit",location:"Roof Top",status:"warning",lastMaintenance:new Date("2025-08-20"),nextScheduledMaintenance:new Date("2025-10-20"),runtimeHours:3200,installationDate:new Date("2022-03-10"),manufacturer:"Carrier",model:"38TXD",serialNumber:"CRR-2022-045",department:"facilities",criticality:"high",notes:"Serving main office area"},{id:"PUMP-01",name:"Cooling Water Pump",type:"pump",location:"Mechanical Room",status:"operational",lastMaintenance:new Date("2025-07-10"),nextScheduledMaintenance:new Date("2025-09-10"),runtimeHours:2100,installationDate:new Date("2023-06-01"),manufacturer:"Grundfos",model:"CR45",serialNumber:"GRF-2023-078",department:"operations",criticality:"medium",notes:"Cooling system circulation"}],q=[{id:"TECH-001",name:"Musa Ibrahim",email:"musa.ibrahim@company.com",phone:"+2348012345678",department:"maintenance",skills:["generator","electrical","mechanical"],currentWorkload:45,location:"Main Building",isAvailable:!0,lastActive:new Date},{id:"TECH-002",name:"Amina Mohammed",email:"amina.mohammed@company.com",phone:"+2348098765432",department:"facilities",skills:["HVAC","plumbing","electrical"],currentWorkload:65,location:"North Wing",isAvailable:!0,lastActive:new Date},{id:"TECH-003",name:"Chinedu Okoro",email:"chinedu.okoro@company.com",phone:"+2348055512345",department:"operations",skills:["pumps","mechanical","instrumentation"],currentWorkload:80,location:"Production Area",isAvailable:!1,lastActive:new Date}];i(U),o(q);const K=[];for(const Y of U)try{const ae=await zS.predictFailure(Y.id,Y.type);K.push(ae)}catch(ae){console.error(`Failed to analyze ${Y.name}:`,ae)}l(K),a2.initialize([],q,U);const j=await a2.scheduleMaintenance(K);u(j.scheduledTasks),h(a2.getTechnicianSchedules()),y(!1)})()},[]);const I=c.filter(L=>{switch(f){case"critical":return L.priority==="critical";case"scheduled":return L.status==="scheduled"||L.status==="in-progress";case"completed":return L.status==="completed";default:return!0}}),T=a.filter(L=>L.riskLevel==="critical").length,O=a.filter(L=>L.riskLevel==="high").length,$=MV.generateRecommendations(a,t),R=L=>{a2.completeTask(L)&&u(U=>U.map(q=>q.id===L?{...q,status:"completed",completedDate:new Date}:q))},F=()=>{A("GEN-01","temperature",120)};return m?k.jsx("div",{className:"flex items-center justify-center h-64",children:k.jsxs("div",{className:"text-center",children:[k.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),k.jsx("p",{className:"mt-4 text-gray-600",children:"Loading maintenance dashboard..."})]})}):k.jsxs("div",{className:"space-y-6",children:[k.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[k.jsxs("div",{className:"flex justify-between items-center mb-4",children:[k.jsxs("div",{children:[k.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Predictive Maintenance Dashboard"}),k.jsxs("p",{className:"text-gray-600",children:["Department: ",t]})]}),k.jsxs("div",{className:"flex items-center space-x-4",children:[k.jsxs("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${b==="connected"?"bg-green-100 text-green-800":b==="connecting"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:["Sensor Stream: ",b]}),k.jsx("button",{onClick:F,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Simulate Critical Alert"})]})]}),k.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[k.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[k.jsx("div",{className:"text-2xl font-bold text-blue-700",children:r.length}),k.jsx("div",{className:"text-sm text-blue-600",children:"Total Equipment"})]}),k.jsxs("div",{className:"bg-red-50 rounded-lg p-4 border border-red-200",children:[k.jsx("div",{className:"text-2xl font-bold text-red-700",children:T}),k.jsx("div",{className:"text-sm text-red-600",children:"Critical Alerts"})]}),k.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4 border border-yellow-200",children:[k.jsx("div",{className:"text-2xl font-bold text-yellow-700",children:O}),k.jsx("div",{className:"text-sm text-yellow-600",children:"High Risk"})]}),k.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[k.jsx("div",{className:"text-2xl font-bold text-green-700",children:c.filter(L=>L.status==="completed").length}),k.jsx("div",{className:"text-sm text-green-600",children:"Tasks Completed"})]})]}),$.length>0&&k.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[k.jsx("h3",{className:"font-semibold text-yellow-800 mb-2",children:"AI Recommendations"}),k.jsx("ul",{className:"space-y-1",children:$.slice(0,3).map((L,U)=>k.jsxs("li",{className:"text-sm text-yellow-700",children:["• ",L]},U))})]})]}),k.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[k.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[k.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[k.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Equipment Health Status"}),k.jsx("div",{className:"space-y-3",children:a.map(L=>{const U=r.find(q=>q.id===L.equipmentId);return k.jsxs("div",{className:`p-4 rounded-lg border ${L.riskLevel==="critical"?"bg-red-50 border-red-200":L.riskLevel==="high"?"bg-yellow-50 border-yellow-200":"bg-green-50 border-green-200"}`,children:[k.jsxs("div",{className:"flex justify-between items-start",children:[k.jsxs("div",{children:[k.jsx("h3",{className:"font-medium text-gray-900",children:L.equipmentName}),k.jsx("p",{className:"text-sm text-gray-600",children:U==null?void 0:U.location}),k.jsxs("p",{className:`text-sm font-medium ${L.riskLevel==="critical"?"text-red-700":L.riskLevel==="high"?"text-yellow-700":"text-green-700"}`,children:["Risk: ",L.riskLevel.toUpperCase()]}),k.jsxs("p",{className:"text-sm text-gray-600",children:["Predicted failure in ",L.predictedFailureInDays," days"]})]}),k.jsxs("div",{className:"text-right",children:[k.jsx("div",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${L.status==="critical"?"bg-red-100 text-red-800":L.status==="warning"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:L.status.toUpperCase()}),k.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Confidence: ",(L.confidence*100).toFixed(1),"%"]})]})]}),k.jsx("p",{className:"text-sm text-gray-700 mt-2",children:L.recommendedAction})]},L.equipmentId)})})]}),k.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[k.jsxs("div",{className:"flex justify-between items-center mb-4",children:[k.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Maintenance Tasks"}),k.jsx("div",{className:"flex space-x-2",children:["all","critical","scheduled","completed"].map(L=>k.jsx("button",{onClick:()=>p(L),className:`px-3 py-1 rounded-full text-sm font-medium ${f===L?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:L.charAt(0).toUpperCase()+L.slice(1)},L))})]}),k.jsx("div",{className:"space-y-3",children:I.length===0?k.jsx("p",{className:"text-gray-500 text-center py-4",children:"No tasks found for selected filter."}):I.map(L=>k.jsx("div",{className:"p-4 border rounded-lg hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>e==null?void 0:e(L),children:k.jsxs("div",{className:"flex justify-between items-start",children:[k.jsxs("div",{children:[k.jsx("h3",{className:"font-medium text-gray-900",children:L.equipmentName}),k.jsx("p",{className:"text-sm text-gray-600",children:L.description}),k.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[k.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${L.priority==="critical"?"bg-red-100 text-red-800":L.priority==="high"?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}`,children:L.priority.toUpperCase()}),k.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${L.status==="completed"?"bg-green-100 text-green-800":L.status==="in-progress"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:L.status.replace("-"," ").toUpperCase()})]})]}),k.jsxs("div",{className:"text-right",children:[k.jsxs("p",{className:"text-sm text-gray-600",children:["Assigned to: ",L.assignedTo||"Unassigned"]}),k.jsxs("p",{className:"text-sm text-gray-500",children:["Est. ",Math.round(L.estimatedDuration/60),"h"]}),L.status==="scheduled"&&k.jsx("button",{onClick:U=>{U.stopPropagation(),R(L.id)},className:"mt-2 px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700",children:"Complete"})]})]})},L.id))})]})]}),k.jsxs("div",{className:"space-y-6",children:[k.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[k.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Technician Schedule"}),k.jsx("div",{className:"space-y-4",children:d.map(L=>{const U=s.find(q=>q.id===L.technicianId);return k.jsxs("div",{className:"border rounded-lg p-3",children:[k.jsxs("div",{className:"flex justify-between items-start",children:[k.jsxs("div",{children:[k.jsx("h3",{className:"font-medium text-gray-900",children:L.technicianName}),k.jsxs("p",{className:"text-sm text-gray-600",children:[L.tasks.length," tasks • ",L.totalHours.toFixed(1),"h"]}),k.jsxs("p",{className:"text-sm text-gray-500",children:["Efficiency: ",L.efficiency.toFixed(1),"%"]})]}),k.jsx("div",{className:`px-2 py-1 rounded text-xs font-medium ${U!=null&&U.isAvailable?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:U!=null&&U.isAvailable?"Available":"Busy"})]}),k.jsxs("div",{className:"mt-2 space-y-1",children:[L.tasks.slice(0,2).map(q=>k.jsxs("div",{className:"text-xs text-gray-600 flex justify-between",children:[k.jsx("span",{children:q.equipmentName}),k.jsxs("span",{children:[Math.round(q.estimatedDuration/60),"h"]})]},q.id)),L.tasks.length>2&&k.jsxs("div",{className:"text-xs text-gray-500",children:["+",L.tasks.length-2," more tasks"]})]})]},L.id)})})]}),k.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[k.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Sensor Data"}),k.jsx("div",{className:"space-y-3",children:v.slice(-5).map((L,U)=>k.jsxs("div",{className:"flex justify-between items-center p-2 border rounded",children:[k.jsxs("div",{children:[k.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[L.equipmentId," - ",L.sensorType]}),k.jsxs("p",{className:"text-xs text-gray-600",children:["Value: ",L.currentValue,L.normalRange&&` (${L.normalRange.min}-${L.normalRange.max})`]})]}),k.jsx("div",{className:`px-2 py-1 rounded text-xs font-medium ${L.anomalyScore>.8?"bg-red-100 text-red-800":L.anomalyScore>.5?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:L.anomalyScore>.8?"Critical":L.anomalyScore>.5?"Warning":"Normal"})]},U))})]}),k.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[k.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),k.jsxs("div",{className:"space-y-2",children:[k.jsx("button",{onClick:()=>{a.forEach(async L=>{const U=await zS.predictFailure(L.equipmentId,"generator");l(q=>q.map(K=>K.equipmentId===L.equipmentId?U:K))})},className:"w-full px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Refresh Analyses"}),k.jsx("button",{onClick:E,className:"w-full px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700 transition-colors",children:"Clear Sensor Data"}),k.jsx("button",{onClick:()=>{const L=MV.generateReport(a,c,t);console.log("Maintenance Report:",L),alert("Maintenance report generated in console")},className:"w-full px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition-colors",children:"Generate Report"})]})]})]})]})]})},rat=()=>{const[t,e]=N.useState(!navigator.onLine),[n,r]=N.useState(_y()),[i,s]=N.useState(null);return N.useEffect(()=>{const c=()=>{e(!0),console.log("App is now offline")},u=()=>{e(!1),s(new Date),console.log("App is now online - sync will start automatically")};window.addEventListener("offline",c),window.addEventListener("online",u),_G();const d=EG(),h=setInterval(()=>{r(_y())},5e3);return()=>{window.removeEventListener("offline",c),window.removeEventListener("online",u),d(),clearInterval(h)}},[]),{isOffline:t,syncStats:n,lastSync:i,triggerSync:async()=>{if(!navigator.onLine)return console.log("Cannot sync - app is offline"),!1;try{console.log("Manual sync triggered");const{processSyncQueue:c}=await Yy(()=>Promise.resolve().then(()=>_he),void 0);return await c(),r(_y()),s(new Date),!0}catch(c){return console.error("Manual sync failed:",c),!1}},clearSyncQueue:()=>{try{localStorage.removeItem("mbarie-sync-queue"),r(_y()),console.log("Sync queue cleared")}catch(c){console.error("Failed to clear sync queue:",c)}},getOfflineStatus:()=>({isOffline:t,lastSync:i,syncStats:n,connectionType:t?"offline":"online",pendingActions:n.total,hasRetries:n.hasRetries})}};function iat(){const{isOffline:t,syncStats:e,lastSync:n,triggerSync:r,clearSyncQueue:i}=rat(),s=()=>t?"bg-red-500 text-white":e.total>0?"bg-yellow-500 text-white":"bg-green-500 text-white",o=()=>t?k.jsx(Bj,{className:"w-4 h-4"}):e.total>0?k.jsx(RH,{className:"w-4 h-4 animate-spin"}):k.jsx(zj,{className:"w-4 h-4"}),a=()=>t?"Offline Mode":e.total>0?`Syncing (${e.total})`:"Connected",l=()=>{if(!n)return"Never";const h=new Date().getTime()-n.getTime(),f=Math.floor(h/6e4);if(f<1)return"Just now";if(f<60)return`${f}m ago`;const p=Math.floor(f/60);return p<24?`${p}h ago`:n.toLocaleDateString()},c=async()=>{t||await r()},u=()=>{e.total>0&&window.confirm("Clear all pending sync items? This cannot be undone.")&&i()};return k.jsxs("div",{className:"fixed bottom-4 right-4 z-50",children:[k.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 rounded-lg shadow-lg transition-all duration-300 ${s()}`,children:[o(),k.jsx("span",{className:"text-sm font-medium",children:a()}),k.jsxs("div",{className:"group relative",children:[k.jsx("button",{className:"opacity-80 hover:opacity-100 transition-opacity",children:k.jsx($H,{className:"w-4 h-4"})}),k.jsx("div",{className:"absolute bottom-full right-0 mb-2 w-64 p-3 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200",children:k.jsxs("div",{className:"text-sm text-gray-900 dark:text-white",children:[k.jsx("div",{className:"font-semibold mb-2",children:"Sync Status"}),k.jsxs("div",{className:"flex items-center justify-between mb-2",children:[k.jsx("span",{children:"Connection:"}),k.jsxs("span",{className:`flex items-center gap-1 ${t?"text-red-500":"text-green-500"}`,children:[t?k.jsx(Bj,{className:"w-3 h-3"}):k.jsx(zj,{className:"w-3 h-3"}),t?"Offline":"Online"]})]}),k.jsxs("div",{className:"flex items-center justify-between mb-2",children:[k.jsx("span",{children:"Last Sync:"}),k.jsx("span",{className:"text-gray-600 dark:text-gray-400 text-xs",children:l()})]}),e.total>0&&k.jsxs(k.Fragment,{children:[k.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 my-2 pt-2",children:[k.jsx("div",{className:"font-medium mb-1",children:"Pending Sync:"}),Object.entries(e.byType).map(([d,h])=>k.jsxs("div",{className:"flex items-center justify-between text-xs",children:[k.jsxs("span",{className:"capitalize",children:[d,":"]}),k.jsx("span",{className:"text-yellow-600 dark:text-yellow-400",children:h})]},d))]}),k.jsxs("div",{className:"flex gap-2 mt-3",children:[k.jsx("button",{onClick:c,className:"flex-1 bg-blue-500 hover:bg-blue-600 text-white text-xs py-1 px-2 rounded transition-colors",children:"Sync Now"}),k.jsx("button",{onClick:u,className:"flex-1 bg-gray-500 hover:bg-gray-600 text-white text-xs py-1 px-2 rounded transition-colors",children:"Clear"})]})]}),e.total===0&&!t&&k.jsxs("div",{className:"flex items-center gap-1 text-green-600 dark:text-green-400 text-xs",children:[k.jsx(Fj,{className:"w-3 h-3"}),"All data synced"]}),t&&k.jsxs("div",{className:"mt-2 p-2 bg-yellow-50 dark:bg-yellow-900/20 rounded text-xs text-yellow-800 dark:text-yellow-200",children:[k.jsx("strong",{children:"Offline Mode:"})," Some features limited. Actions will sync when back online."]})]})})]})]}),e.total>0&&!t&&k.jsx("div",{className:"mt-2 w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1",children:k.jsx("div",{className:"bg-yellow-500 h-1 rounded-full transition-all duration-1000",style:{width:`${Math.min(90,e.total/10*100)}%`}})}),!t&&e.total===0&&n&&k.jsx("div",{className:"mt-2 px-3 py-2 bg-green-500 text-white text-sm rounded-lg shadow-lg animate-pulse",children:k.jsxs("div",{className:"flex items-center gap-2",children:[k.jsx(Fj,{className:"w-4 h-4"}),k.jsx("span",{children:"All data synced"})]})})]})}const Kl=({children:t})=>{const{user:e,isLoading:n}=Mg();return n?k.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:k.jsxs("div",{className:"text-center",children:[k.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),k.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):e?k.jsx(k.Fragment,{children:t}):k.jsx(cP,{to:"/login",replace:!0})},FV=({children:t})=>{const{user:e,isLoading:n}=Mg();return n?k.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:k.jsxs("div",{className:"text-center",children:[k.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),k.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):e?k.jsx(cP,{to:"/dashboard",replace:!0}):k.jsx(k.Fragment,{children:t})};function sat(){const{user:t}=Mg();return k.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t&&k.jsx(ghe,{}),k.jsx("main",{className:"flex-1",children:k.jsxs(Que,{children:[k.jsx(ws,{path:"/",element:k.jsx(f6,{})}),k.jsx(ws,{path:"/home",element:k.jsx(f6,{})}),k.jsx(ws,{path:"/login",element:k.jsx(FV,{children:k.jsx(yhe,{})})}),k.jsx(ws,{path:"/register",element:k.jsx(FV,{children:k.jsx(vhe,{})})}),k.jsx(ws,{path:"/dashboard",element:k.jsx(Kl,{children:k.jsx(LV,{})})}),k.jsx(ws,{path:"/ai-insights",element:k.jsx(Kl,{children:k.jsx(LV,{})})}),k.jsx(ws,{path:"/inventory",element:k.jsx(Kl,{children:k.jsx(Jot,{})})}),k.jsx(ws,{path:"/maintenance",element:k.jsx(Kl,{children:k.jsx(nat,{})})}),k.jsx(ws,{path:"/chat-agent",element:k.jsx(Kl,{children:k.jsx(Bot,{})})}),k.jsx(ws,{path:"/ai-agent",element:k.jsx(Kl,{children:k.jsx(k6,{})})}),k.jsx(ws,{path:"/admin-org-editor",element:k.jsx(Kl,{children:k.jsx(L_,{})})}),k.jsx(ws,{path:"/settings",element:k.jsx(Kl,{children:k.jsx(L_,{})})}),k.jsx(ws,{path:"/profile",element:k.jsx(Kl,{children:k.jsx(L_,{})})}),k.jsx(ws,{path:"/copilot",element:k.jsx(Kl,{children:k.jsx(k6,{})})}),k.jsx(ws,{path:"*",element:k.jsx(cP,{to:"/",replace:!0})})]})}),k.jsx(iat,{})]})}function oat(){return k.jsx(Rde,{children:k.jsx(Dde,{children:k.jsx(Sde,{children:k.jsx(sat,{})})})})}M_.createRoot(document.getElementById("root")).render(k.jsx(Tu.StrictMode,{children:k.jsx(oat,{})}));export{En as _,wp as c,Ic as g};
